bien y después de haber hecho este filtrado es cuando podemos indicar que solo queremos realizar el cálculo sobre aquellos puntos en los cuales se cumple esta condición así que ahora lo que puedo hacer es primero des comentar el código voy a guardar una versión incremental vamos a por las 7 y vamos a y desbloquear el comentario y por otra parte la llave del condicional la voy a colocar al final de todo este código tras lo cual lo voy a sangrar para que quede claro que está dentro de ese bloque condicional vale si todo ha ido bien y estamos ahora en la versión 7 del ejercicio lo que vamos a poder comprobar es que solo va a realizar el cálculo sobre a aquellos puntos que ahora mismo se están moviendo en la pantalla con lo cual el rendimiento del sistema mejora bastante ya que ahorramos una variedad de cálculos y podemos ver que los vectores en principio empiezan a ser correctos hay que tener en cuenta que en aquellas superficies en las que el color es similar es difícil que realmente coja un vector de movimiento pero en aquella superficie es donde hay una cierta irregularidad en el color pues es más fácil detectar la dirección estamos trabajando a 200 milisegundos voy a probar a bajar a 100 aunque sospecho que ya tenemos un cuello de botella con el rendimiento pero bueno por si acaso va bastante bien y ahora lo que puedo hacer es cambiar el super paso lo teníamos a 16 ahora sí puedo probar a bajar a 8 algo que era prohibitivo antes de hacer el filtro ahora nos lo podemos permitir entonces en la primera interacción evidentemente no ha podido detectar pero si nos fijamos ahora mismo los vectores de movimiento son bastante mejores bien lo voy a volver a poner a 16 porque a 8 en el primer filtro así que innecesariamente cargante simplemente lo que me gustaría ahora es trabajar con flechas entonces para eso he encontrado por aquí una pequeña librería que dibuja una flecha más que nada porque aquí ya están calculados los senos y los cosenos de la punta de la flecha para ahora no perder tiempo calculando un poco de trigonometría entonces voy a esta función tengamos en cuenta que el autor nos está diciendo que tengo que poner el contexto begin pad y contexto stroke antes y después así que me vuelvo al código voy a desactivar mi código de línea por si acaso más adelante lo quiero recuperar voy a poner esta función fuera del código ahora quiero contexto resultado punto beijing paz y contexto resultado punto estruch no hace falta tanto contexto resultado punto estruch y aquí en el medio lo que voy a hacer es poner la función de canvas a row que me invita a poner el contexto resultado el from es la equis el from es la y el tú es la equis más el diferencial de equis y el y slayer y además el diferencial de y si todo ha ido bien voy a decirle que quiero recuperar esta línea es el stroke white vamos a volver y vamos a verlo y ahora muy bien bueno yo diría que las flechas están al revés están absolutamente al revés así que esto va a hacer más diferencial de x más diferencial de y en el destino le quitó los diferenciales así es que si todo va bien ahora comprobamos como las flechas están correctas y bueno voy a hacer el punto aquí este fil rec contexto resultado punto file style es igual a white y voy a hacer unos puntitos de 2 píxeles por 2 píxeles con esto podemos comprobar vamos a por la mano con esto podemos comprobar como el sistema es capaz detectar qué píxeles están en movimiento y a partir de ahí comprobar cuál es la dirección de movimiento de estos píxeles esto será interesante más que nada para que el sistema y descarte toda aquella información que no es importante y se quede con aquella información que realmente deba valorar por ejemplo también nos puede servir para quitar el fondo y dejar el frente y en definitiva para filtrar algunos tipos de cálculo