anteriormente hemos hablado del concepto de que el software debería en definitiva correr de una manera paralela o haciendo que cada neurona no corriera de forma secuencial con respecto a las demás sin embargo hasta ahora los ejercicios que hemos desarrollado realmente no corren así sino que corren de forma completamente secuencial bien pues de esta forma a continuación lo que voy a hacer es poner sobre la mesa una serie de técnicas que nos permiten realmente implementar el paralelismo arafo ahora mismo ocurre lo siguiente si yo abro el monitor de actividad básicamente este monitor de actividad me permite y saber cuál es el rendimiento de la cpu en este caso tengo en este equipo un procesador intel i5 esto quiere decir que el procesador de cuatro núcleos pero el software que desarrollado ahora mismo no es capaz todavía de aprovechar esos cuatro núcleos este software es secuencial y cuando digo que es secuencial lo que quiero decir es que realiza las tareas una detrás de la otra no realiza las tareas de forma paralela así que elimina unos cuantos ejercicios vamos a abrir por ejemplo vamos tengo ejercicio abrimos el último archivo que tengamos podemos hallar y lo que ocurre en este caso es que si seguimos la ejecución de este ejercicio nos daremos cuenta que primero se ejecuta algo y luego se hace otra cosa y luego se hace otra cosa y luego se hace otra cosa y luego se hace otra cosa es decir el software ahora mismo es secuencial no es paralelo y esto quiere decir que el software ahora mismo está funcionando pero no estamos implementando la filosofía de la que he hablado anteriormente que consiste en simular el comportamiento paralelo de las neuronas del cerebro arenal así que como digo a continuación voy a presentar una metodología que nos permite precisamente trabajar de una forma paralela y nuevo secuencial esta metodología que consiste en utilizar los múltiples núcleos de un sistema en este caso en el lenguaje que estamos trabajando recibe el nombre de workers digamos que son como trabajadores así que voy a hacer lo siguiente voy a guardar este archivo dentro de esta carpeta vamos a crear una carpeta nueva ejercicio 12 esto va a ser index.html y creó un archivo esto efe esto de aquí bien a continuación voy a especificar lo siguiente voy a crear un nuevo archivo y este archivo lo voy a guardar en la misma carpeta con el nombre que quiera realmente voy a poner trabajador punto j s en algunos ejercicios suelen poner el nombre de worker js pero cuando hago eso la gente cree que es que el archivo se tiene que llamar worker punto j s y no es así el archivo se puede llamar como queramos eso sí tiene que acabar en j s así que a continuación lo que voy a hacer es que voy a ir al google por ejemplo ah voy a ir a la cruz y voy a poner porque eres javascript workers valoramos la guía de mozilla y vamos a algún ejemplo de código estás voy a este ejemplo hoy aquí y el body voy a ejecutar un script que va a hacerlo 7 en este caso lo que voy a hacer es decir que creó un my work en que un trabajador y le digo que es igual a new work air en este caso lo que suelo hacer es cambiar todo aquello que puedo a castellano para que quede claro qué es lo que puedo cambiar y qué es lo que no puedo cambiar entonces en este caso no puedo cambiar la palabra bar porque es la definición de variable puedo cambiar el nombre de la instancia y de worker lo que hace en este caso es no puedo cambiar la palabra view es la creación de un nuevo objeto no puedo cambiar el worker lo que sí que puedo cambiar evidentemente es el nombre del archivo es trabajador punto j s y ahora voy a decir lo siguiente mi trabajador punto b 6 es decir cuando el trabajador cuando el worker me envíe un mensaje en este caso con sole punto lo voy a decir se ha ejecutado el worker para continuación lo que hago básicamente en este caso es decirle al sistema que quiero un mes es el otro método con el que voy a trabajar tanto en un lado como en el otro es un método llamado post message y trabajador aquí lo tenemos y vamos a hacer lo siguiente vamos a enviar un mensaje que es hola de esta forma tengo implementado en este caso dos métodos que es el post message y el orbe sets el post meses envía mensajes desde el archivo principal hasta el worker y el onubense lo que hace es escuchar todos aquellos mensajes que se reciban desde el worker hasta el archivo principal ahora a continuación lo que tengo que hacer es ir al trabajador y hacer lo siguiente vamos a escoger este ejemplo por ejemplo vamos a ver no y voy a copiar a este código y voy a decir con message es decir cuando reciba un mensaje voy a final entonces en este caso voy a decir vamos a ver ejemplo bueno voltear esto y voy a poner post message es decir cuando el walker recibe un mensaje en este caso lo que estaba ocurriendo es que el worker devuelve un mensaje y el mensaje que devuelve es si estás leyendo esto es que te lo da el worker vale vamos al index y dice se ha ejecutado el worker vale nos vamos a por ello y vamos allá ahora me voy a loca host me voy a inteligencia artificial vamos con el ejercicio sí no hay nada en la pantalla pero se ha ejecutado nada en la pantalla pero me voy a la consola y dice se ha ejecutado el worker se ha ejecutado el worker lo que hace básicamente en este caso es decir esto de aquí simplemente se ha ejecutado el worker ahora bien yo lo que quiero ahora es poner un event el joven por cierto lo podemos cambiar por lo que queramos dentro y entonces en este caso voy a poner mi evento punto dato vamos a volver a recargar y dice y esto es lo importante si estás leyendo esto es que tarda el worker ejemplos que si estás leyendo esto es que te lo da el worker es un texto que está dentro del worker pero el index no tiene ese texto si estoy leyendo este texto es porque realmente proviene del worker ya tenemos una primera demostración en la que podemos comprobar como realmente podemos enviar y recibir información vamos a por la segunda demostración donde ya hemos visto cómo recibimos información vamos a ver como enviamos y recibimos ahora a continuación vamos a hacer lo siguiente vamos a empezar a comprender esto para que nos va a servir digo bar número es igual a 3 ahora digo que quiero enviar número recordemos que número vale 3 lo que hago ahora es un mes el evento y quiere referir nuevo número a un nuevo número es igual a mi bebé entro punto data y esto por ejemplo lo multiplicó por ejemplo por 3 así que ahora digo el resultado es nuevo empleo esto qué es lo que hace bueno lo que hace es recoger un número y enviarlo al worker el worker lo multiplica por 3 y se lo devuelve al objeto principal se lo devuelve al espacio principal de esta forma estamos tirando información a un walker el worker es el que la calcula y luego nos la devuelve así que ahora lo que hago es que recargo y dice que efectivamente el resultado es 9 parece que nos hemos complicado una barbaridad para algo que a priori podríamos hacer de una forma mucho más sencilla pero no es así desde el punto de vista en que lo que podríamos hacer no es realmente tan sencillo porque finalmente sólo estaríamos aprovechando un núcleo de procesamiento y si estamos haciendo esto es precisamente para aprovechar varios núcleos de procesamiento voy a hacer un ejercicio sencillo vamos a examinar esto brackets y aquí en el worker voy a hacer lo siguiente en meses voy a hacer una función bucle y digo vamos a ver par temporizador entonces yo aquí y digo el temporizador es igual a receta y madoff y ejecuta el bucle dentro de un segundo para darle un poquito de ventaja clear time out temporizador se está auto temporizador es igual a 7 bout el bucle pero ahora lo quiero ejecutar en 10 milisegundos y ahora lo que quiero hacer es decirle al sistema que post message y voy a decir hola por hola pero esto veo esto norte o este otro goteo y ya está así que ahora me voy con meses pues lo que me pasa es que ahora recargo bien y me empieza a decir muchas veces hola incluso quizás podría realizar alguna operación local más queda para poner a funcionar el procesamiento global número es igual a 1 punto y muchos recitales así que ahora digo número por igual 1.0 y muchos triples y ahora quiero ponerme ese número de esta forma hacemos el programa calculé algo más complejo bien aquí tenemos un número vemos cómo va creciendo es posible que pronto llegue al infinito para que llegue para que tardé en llegar al infinito vemos como él ya tenemos exponenciales lo que se suele hacer es meter unos pocos ceros y así al meter unos pocos ceros pues y hacemos que tarde más y seguir creciendo pero va a tardar más en llegar hasta el final bien pues me voy al monitor de recursos y en el monitor de actividad a ver monitor y el monitor de actividad veo observó como el procesador no está al 100% observamos allí a ver si se actualiza como el pulsador no está al 100% de hecho sabemos que chrome tiene el procesador al 11% pero la gracia de todo esto es que yo ahora a continuación se puede volver voy a parar y ahora a continuación la siguiente parte del ejercicio que voy a hacer es crear tantos workers como charo bueno pues la idea la gracia de todo esto consiste en que yo ahora puedo venir y puedo decirle al sistema puedo decirle a index que quiero más workers así que simplemente lo que tengo que hacer es copiar este bloque de código y luego podemos hacer matrices de workers vale pero de momento vamos a crear manualmente unos pocos workers más mi trabajador 2 mi trabajador 2000 trabajador 3 mi trabajador 3 y mi trabajador 3 y mi trabajador 4 y mi trabajador 4 insisto que se podría hacer una nueva actriz un array de workers pero en este caso quiero 4 manualmente ahí por cierto y los 4 pueden apuntar al mismo archivo js en este caso como ejecutar el mismo código no hay ningún problema también se pueden hacer diferentes archivos js pero no es obligatorio volvemos el caso es que ahora vuelvo a recargar y lo que tengo ahora es que si me voy al código comprobaremos como ahora el uso del procesador es mayor y de hecho el uso del procesador llega un momento en el que podrá llegar perfectamente al cien por ciento en este caso también te digo que estoy perdiendo mucho tiempo en los cónsules entonces a ver el código vamos a quitar con soles cargamos parece que no esté ocurriendo nada pero sí que está ocurriendo en este caso voy a hacer una cosa enfermera cosa en el trabajador bar contador es igual a 1 entonces contador + + y si el contador porcentaje de 1000 es igual a cero es decir una de cada mil veces hazme un post message del número esto lo que va a hacer es hacer un post meses pero sólo una de cada mil veces de esa forma el worker contiene una trabajando pero no pierdo tanto tiempo en los cónsules recargamos para funcionar allí tenemos vamos a ver el monitor de actividad en crecimiento y desde luego lo que puedo hacer es decirle al worker que quiero que ejecuta el bucle tan rápido como pueda luego también hay que tener en cuenta que el micro hay que tener en cuenta que en chrome e en cuanto pierdo el foco el sistema quita recursos al archivo abierto al entonces por eso esto es un poco como la física cuántica encuentro es una partícula ha cambiado pues es un poco igual cuando veo la gráfica es que ya no tengo el foco y por tanto no veo la gráfica real bueno como decía y puedo hacer una matriz de workers entonces yo aquí lo que puedo hacer en este caso ejecución para asegurarnos que realmente metamos el sistema es lo siguiente tengo por aquí un libro siguiente número workers es igual a los 8 10 16 bar trabajador es igual ánimo a raya o sea no es un solo elemento sino que son varios y ahora vivo número 33 el otro no por mar y es igual a 0 y es menor que número workers y más lo que hago es hacer esto lo que hago es meter esto dentro de una matriz y así con muy poco esfuerzo como podemos ver acabó de crear 16 workers pero quien crea 16 podría crear 32 o podría crear el número que generó que sera el cierre lo vuelvo a ejecutar el cuidado el cometió algún error liniers línea 10 esto es mi trabajador recargamos número es not the fine dónde estás número aquí dos meses nada no quiero enviar nada así que ahora me voy al monitor de actividad y observamos que la cosa cambia bastante ya no tengo cuatro tareas tengo 16 tareas y si tengo 16 tareas como vamos a poder comprobar tengo realmente que ahora si estoy obteniendo el máximo rendimiento del procesador es decir --resultados no sé si soy el micrófono por el ventilador del portátil acaba de ponerse a ventilar fuertemente y sobre todo es muy importante aquí es que estoy comprobando como estoy utilizando realmente los recursos de multi procesamiento del sistema y estoy enviando workers que trabajan en paralelo es decir ya no voy a trabajar de forma secuencial sino que voy a ser capaz de dividir tareas de repartir tareas en cada uno de los workers y de que cada tarea funcione de forma paralela y de esta forma se podría aproximar tal y como he presentado el concepto en el módulo 1 del curso me podría acercar más al funcionamiento independiente y paralelo de las neuronas y no como hemos trabajado hasta ahora que hemos trabajado de una forma bastante secuencial