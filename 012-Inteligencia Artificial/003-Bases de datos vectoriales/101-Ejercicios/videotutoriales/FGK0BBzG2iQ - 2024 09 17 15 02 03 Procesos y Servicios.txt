y vale grabando y bueno lo primero que os voy a contar es que bueno vamos a echar un vistazo al temario vamos a hablar con el temario delante y veréis que en programación bueno para empezar tenemos programación multiproceso y programación multio en la siguiente parte en la primera parte de la asignatura ahora empezaré contándoos Qué es eso a continuación tenemos la programación multiproceso y estilo vamos a trabajarla tanto con javascript en entorno web como con python en entorno de escritorio sobre todo bueno multiproceso en web para hacer cualquier multiproceso en el lado del cliente y Uy Perdón madre mía y multiproceso y multihilo en aplicación no solo para aplicación sino también para servidor debéis tener en cuenta que esta asignatura se llama programación de servicio y de procesos la primera parte prácticamente es para procesos pero a continuación vamos a estar también trabajando con servicios y en servicios pues evidentemente ahí no tiene tanta aplicación la programación e web sino que sobre todo tiene sentido la aplicación en aplicación de escritorio ya sea como consola o con interfaz gráfica de usuario a continuación el tema número tres es este es servicios puros y duros será programación de comunicaciones en Red comunicación en Red entre aplicaciones bueno no solo en Red vale sino también cómo comunicar aplicaciones en un mismo ordenador a partir de ahí comunicación en Red e analizar la arquitectura de cliente y servidor qué librerías hay para conectarnos sockets esta parte es muy importante dentro de la asignatura porque los sockets son un mecanismo de comunicación bastante frecuente a partir de ahí cómo enlazar y establecer conexiones eh la buena y mala noticia la mala es que es difícil son difíciles de establecer la buena es que una vez que se han establecido pues ya es difícil romperlas Así que una vez que hemos creado sockets pues Cómo utilizar sockets para enviar y para recibir información programación de aplicaciones en cliente servidor vale Y esta parte de la asignatura es muy interesante en el sentido en que nosotros llevamos tiempo utilizando Apache pero Apache es una aplicación ya programada con lo cual lo que haremos es programar un mini Apache vale programar un mini servidor web nosotros o por ejemplo utilizamos aplicaciones de correo pero ya están programadas vale Así que crearemos una mini aplicación de correo Aquí también os contaré qué protocolos hay para comunicar Qué diferentes protocolos donde Hola Borja donde Sí pero tú no O sea Quédate pero es que estoy en clase con un segundo Ah no tú eres de segundo Ah es que todavía no os ubico o sea para mí tú eres de primero Así que nada Siéntate cre no que no y un momento Mira ya que estás ahí Acércate y dale a donde pone entrada creo que es el segundo botón de los debajo ahí Vale pues no sé creo que saí de HDMI sí no ahora pica en la pantalla Haz clic en la pantalla ahí vale a ver qué tal Ahí estamos ahí lo tenemos fenomenal Vale y eh Por último dentro del tema tres pues utilización de hilos para la implementación de comunicaciones simultáneas con el servidor es decir si os fijáis el la el último punto del tema 3 lo que hace es recoger la comunicación multiproceso y multihilo y eh utilizarla también para conexiones en Red vale a partir de aquí generación de servicios en Red o sea esto es creación de programas que ofrezcan algún tipo de servicio en la red primero protocolo protocolos estándar de comunicación Pues explicaros tampoco les veremos las tripas vale pero explicaros Cuáles son los tres protocolos de correo electrónico el pop el imap el smtp para crear clientes de correo electrónico para crear servidores de correo electrónico protocolo ftp file transfer protocol para enviar archivos de forma masiva protocolo http para servir una web vale Y bueno establecimiento de finalización de conexiones transmisión de información implementación de comunicaciones simultáneas concurrentes Vale y vamos a ver siguiente tema y último tema pues utilización de técnicas de programación segura Vale entonces prácticas de programa segura criptografía claro ayer empezamos a hablar del tema de en sistemas de gestión empresarial de crear una aplicación de gestión empresarial pero ayer no hablamos nada de seguridad por qué Porque lo vamos a hablar aquí vale lo vamos a hablar en esta signatura Qué protocolos criptográficos hay Qué política de seguridad y qué roles podemos adoptar Hola Uy pero si hoy no tienes clase sí eh Tienes que ir a dirección porque creo que ya tia instalado el Windows pero estabn pendientes de instalarte un Office para ofimática y todo eso Pero eso tienes que ir a dirección y preguntar Amparo y a esto pero hasta donde yo sé ya tienes el Windows instalado vale venga hasta ahora Lourdes eh Y bueno programación de mecanismos de control de acceso vale ayer empezamos a programar un mecanismo de control de acceso pero muy ligero con lo cual gracias a este punto pues lo aseguraremos encriptación de la información ayer por ejemplo os acordáis que yo recogía un Jason y lo iba a enviar al servidor claro según la asignatura de ayer lo iba a enviar en plano porque la asignatura de ayer no trata de seguridad trata de crear un sistema de gestión empresarial pero esta asignatura trata entre otros muchos temas el que cuando se transmita la información transmita de una forma segura vale Así que como veréis pues y tal como os decía ayer pues hay una eh cómo te diría yo hay una interconexión bastante grande entre las asignaturas que estáis viendo en segundo como os decía ayer salvo en programación multimedia que va un poco pues a su rollete no bien entonces vamos a empezar por el primer tema vamos a hablar de procesos y de servicios vamos a hablar en primer lugar de procesos y vamos a hablar de veréis como vosotros sabéis en la gran mayoría de ordenadores desde hace muchos años pues existen diferentes núcleos de procesamiento en este caso Yo estoy trabajando con un i7 razonablemente actualizado y estáis viendo como en este i7 hay hasta 16 núcleos de proceso núcleos que ya de por sí se están utilizando en el sentido de que pues utilizan para que el sistema operativo funcione por ejemplo estoy grabando una sesión con obs Studio luego eso tiene una carga en procesador estoy emitiendo la pantalla con zoom con lo cual es eso tiene otra carga entonces que tenga 16 núcleos no quiere decir que estén los núcleos quietecitos pero sí que podéis ver que desde luego no están al 100% vale De hecho están todos por aquí abajo bien a continuación como os decía eh vamos a trabajar multiproceso tanto en web con javascript como con como en aplicación con python y voy a empezar la parte de web voy a trabajar con el editor y vamos a hacer un ejemplo sin multiproceso vale para que ilustrar cuál es el problema Y a partir de ahí ilustrar Cuál es la solución me voy al segundo me voy a programación de servicios y procesos me voy a programación multiproceso voy a ejecutables por ejemplo y voy a crear un archivo 001 sin multiproceso html bien para hacer esto eh A continuación voy a crear el doc type más básico el archivo html más básico que me sea posible ahora lo voy a hacer más grande me voy a Body Vale y dentro de Body voy a hacer un pequeño javascript al cual le voy a poner un problema en principio tonto vale pero un problema grande voy a decir que LED y es igual a 1.000 y un número vale lo de que sea 1 y 00 y otros números ahora os contaré Por qué no es porque sí he hecho no te digo mil veces vale pero he hecho unas cuantas veces este ejercicio y ahora os diré el Por qué pongo este número tan concreto o sea un uno muchos ceros y luego otros números bien Ahora a continuación digo led iteraciones es igual a muchas por ejemplo estas de Aquí vamos a ver qué pasa y ahora digo for eh Perdona y no esto es número y ahora digo forlet I es igual a 0 Y es menor que iteraciones y más quiero que me cojas número y me lo multipliques por 1.000 y otro número vale mira parece que es el mismo Pero ha sido casualidad quiero decir puede ser otro diferente la cuestión está en que voy a lo que vale este número lo voy a multiplicar por este otro número pero lo voy a ejecutar estas iteraciones de aquí ahí está el problema Esa es la situación vamos a ver qué ocurre al final Por cierto voy a hacer console pun log y voy a decir console.log finalizado así que ejecuto bueno ya sabéis que intento poner puntos y comas me voy a eh local Host dam segundo me voy a procesos y servicios vale me voy a programación me voy a programación me voy a ejecutables ejecuto esto y pasa lo siguiente vale pasa lo siguiente vamos a ver vamos a ver esto vamos a ver momentín Ah Espera que igual ya ha acabado Ah vaya finalizado me cago en la mara bueno Vamos a ponerle un poquito más difícil la cosa Vale vamos a poner unas cuantas iteraciones más a ver qué pasa bien recargo Y entonces ocurre esto veis lo que ocurre eso de ahí ocurre Vale tengo un proceso que está a tope veis que el sistema operativo se va repartiendo el proceso entre diferentes eh diferentes núcleos pero En definitiva hay una gráfica que está subiendo vale a ver sí José Manuel me sigue sin ir bien el brackets y lo que pasa es que en este caso tengo el hedit es el editor por defecto de Linux que con que me deje escribir código y me coloreé el cdigo para buscar errores no me hace falta más quiero decir que ya miraré el fin de semana a ver por qué no arranca brackets pero vamos o sea que realmente al final es un editor José Manuel dime cuenta Comenta vale muy bien Vamos a hablar de eso bien por aquí dice finalizado ahora avanzamos un poco más Y por qué Linux eh La respuesta es por nada en particular es decir eh Yo siempre digo y esto que te digo si te lo digo es cierto y si hace falta os envío fotografía al grupo de WhatsApp ahora no porque no estoy en casa pero cuando esté yo en casa Tengo tres máquinas una de hecho ahora tengo cuatro Vale tengo dos con Linux una con Windows y otra con Mac Por qué pues por una razón muy sencilla porque Windows tiene aplicaciones y tiene utilidades que no están ni en Linux ni en Mac tiene aplicaciones que no están ni en Windows ni en Linux y Linux tiene aplicaciones o utilidades que no están en Windows ni están en Mac Vale entonces eh lo primero que quiero deciros es que para empezar vale Ya sé que esto no responde exactamente la pregunta de José Manuel pero eh Para empezar el año pasado me habéis visto estar todo el año trabajando con Windows también porque el ordenador que llevaba era el ordenador de Capitol y Capitol obligaba a Windows y no tengo ningún problema Por ello vale en casa no es solo que tenga Mac sino que yo creo que vídeos míos del año pasado habéis visto un vídeo de un huevo de vídeos míos que estaban hechos con Mac vale eh Porque en su momento en el año 2020 pues tenía un mac delante y lo grabé con un mac y ahora eh que bueno este ordenador es de tame entonces me lo dejaron la semana pasada como ordenador para trabajar como profesor el ordenador venía vacío y dije mira Sabes qué Pues le voy a meter un Linux y ya está Vale y luego tengo aparte de esto en casa una torre con Linux que es una torre para renderizar vale Porque para empezar eh Yo supongo que ya sabéis porque lo habéis visto en mis redes sociales que me dedico también bastante al 3D y en el 3D hay un proceso que se llama renderizar Vale y eh Y ese ordenador lo tengo con Linux para renderizar Por qué con Linux Pues porque con Linux yo puedo controlar más todo a cambio cuesta más de controlar es decir Windows no tiene diferentes distribuciones como Linux Windows es lo que hay si te gusta lo tomas si no lo dejas Windows 11 pesa lo que pesa y está muy Guay vale pero si tienes un ordenador antiguo no le puedes meter Windows 11 ahora si trabajas con Linux si tienes un ordenador antiguo hay distribuciones de Linux y hay mogollón de gestores de ventana que unos pesan más y otros pesan menos vale entonces en primer lugar ante o sea de Cara a la respuesta José Manuel lo que quiero dejar claro es que o sea mi mensaje no es Linux Mola y los demás no molan vale sino que simplemente ha sido una cuestión de que la semana pasada Pues cuando abrí el ordenador que me dejó tame cuando llegué a mi casa y yo creía que llevaba Windows simplemente me di cuenta de que este ordenador es nuevo se lo acaban de comprar ahora me di cuenta de que se lo habían vendido sin sistema operativo y dije mira sabes qué pues me apetece instalarle Linux e Igual dentro de dos meses Igual me apetece instalarle Windows y Mac no puedo evidentemente porque es un pc vale o sea que no es que sea una declaración de intenciones ni tampoco es un chicos trabajado ahora todos con Linux sino que vale Insisto que hay cosas que en Windows funcionan prácticamente solas y en Linux son un dolor en el culo vale Y al revés y hay cosas que en Linux funcionan solas Mira por ejemplo una tontería que te voy a decir en Linux hay una utilidad que es esta de aquí eh Ahora se me ha acabado aquí será verdad mira aquí queé es el analizador de espacio en disco que te dice cuánto has gastado del disco duro y te dice qué carpetas ocupan más esto para mí es la vida y eso en Linux en ubuntu viene instalado por defecto porque sí y en Windows te lo tienes que descargar de alguien que lo haya hecho y tal Vale entonces y de la misma forma hay aplicaciones que están en Windows y Mulan mogón y en Linux no están Vale entonces eh Sí luego efectivamente Aunque en Windows tenéis también el powershell Pero si te acostumbras a trabajar en consola Pues evidentemente el bash de Linux pues es bastante más completo y más compatible con otros sistemas unix que la consola de Windows Vale entonces ya os digo o sea yo fijaos que ningún momento le estoy diciendo a nadie ni pasaos a Linux ni pasaos a Mac ni pasaos a Windows lo que sí que os digo es que siempre intento y siempre voy a intentar utilizar herramientas que sean multiplataforma y gratuitas es decir que estén tanto en Windows como en Linux como en Mac para que cada uno podáis elegir el sistema que os de la gana para trabajar vale bien entonces Mirad bueno habéis visto el problema a ver no no no por un uso específico no y luego también te digo para un poco agregar más información que por ejemplo eh Hola dime Claro por supuesto vale Y luego también os digo que en cuanto a la duda de Linux que yo por ejemplo a mi madre le tengo puesto desde hace muchos años un Linux Por qué por el tema de virus vale para asegurarme que no le entra ningún virus para asegurarme que puedo gestionar la seguridad y mi padre por ejemplo durante muchos años le puse Linux en su empresa y luego en estos últimos años le he cambiado a Mac Pero por qué le he cambiado a Mac Pues porque llegado un momento que tenía tres Max en casa y dije para tener tres Max en casa le pongo uno a mi padre en la empresa y ya está O sea quiero decir que sí que efectivamente pues lo de Linux es un poco por preferencia Pero insisto muy personal vale Yo en ningún momento os estoy diciendo eh trabajad con Linux porque Vais a trabajar mejor vale a día de hoy otra cosa es si habláramos de hace un par de décadas pero a día de hoy Vais a trabajar igual de cómodos en Windows en Mac que en Linux vale Y por tanto elegid lo que queráis Bien dentro de procesos y servicios por tanto hemos hecho una demostración de un no para paralelismo es decir hemos hecho un número de iteraciones de tal forma que el sistema ha tardado un tiempo en finalizar ahora cuánto tiempo ha tardado el sistema en finalizar Bueno pues esto lo podemos saber con la consabida librería de date de javascript Así que 002 con date y a continuación lo que voy a hacer es que e bueno led ahora o led inicio es igual a New date con lo cual instanci una nueva copia de la del objeto date si queréis voy a hacer un console pun log inicio para ver qué tiene date voy a mutear un momento este código ahora lo vuelvo a poner ya os digo José Manuel que el tema de Windows de Mac y de Linux lo volveremos hablar muchas veces durante el curso pero yo creo que Siempre os voy a decir esto mismo vale que no os suponga un problema sino que trabajéis en lo que queráis eh espera acabo esto y ahora te cuento una historia de cuando yo era joven entonces una batallita del abuelo entonces vengo por aquí me voy a la 002 con date vale veis que tengo aquí por ejemplo la fecha actual pero yo quiero el inicio pun Now vale aquí punto Now no inicio punto y aquí caray venga javascript date apoc get apoc venga y get Time Ahí estamos get Time bien nos vamos por aquí nos vamos por aquí vale Y ahí tengo la época unix en microsegundos vale Ya sabéis que Perdona en milisegundos no en microsegundos ya sabéis que tal y como os comenté el año pasado la época unix es los segundos que han pasado desde el día 1 de enero de 1970 lo cual me va a venir muy bien para comparar inicio comparar final y medir cuánto tiempo ha pasado vale Y cuánto tiempo ha tardado el programa en ejecutarse eso qué quiere decir Bueno pues eso quiere decir que led final es igual a New date y por tanto Bueno pues tiempo inicio o apoc inicio Let apoc inicio es igual a inicio get Time Let apoc final es igual a final get Time y por tanto Let resta es igual a oc final e cuidado Ah Se me ha ido vale vamos a ver Ah s sí Albert y sin problema lo tengo claro vale resta es igual Ahora me tocó comentarios a eh apoc final menos apoc inicio Vale qué estoy haciendo aquí lo que estoy haciendo aquí es que espera que lo voy a poner aquí un momento y aquí vale nueva instancia del objeto date que ya sabéis que en javascript pues carga las fechas dentro de un objeto y puedo pedir años horas meses días minutos segundos apoc semanas lo que quiera Ahora quiero saber O sea no quiero saber el año no quiero saber el mes no quiero saber el día no quiero saber la hora Quiero saber el apoc vale Quiero saber el apoc desde el 1 de enero del 70 vale bien ahora creo una nueva instancia de date pero no la anterior vale es un objeto diferente y por lo tanto ahora saco el apoc del final del programa como te puedes imaginar luego una sencilla resta resto el final menos el inicio para saber la diferencia vale para saber cuántos milisegundos han pasado y lo saco por consola lo saco por consola o por pantalla o por lo que os de la gana vale console pun log resta si queréis un poquito de texto vale eh la diferencia de tiempo ha sido de coma resta vale esto básicamente es mensaje por consola no tiene mucho misterio bien eh he bloqueado este código de aquí ahora lo desbloqueo ahora lo analizamos y ejecuto eh Y la diferencia de tiempo ha sido de 0 milisegundos Por qué Pues porque he desbloqueado el o sea he bloqueado el código conflictivo vale Entonces ahora voy a desbloquear el código conflictivo voy a ponerle alguna iteración menos Y entonces digo creo un número eh cercano a uno por qué cercano a uno pues porque si lo subo a más de dos en cuanto multiplico x veces se me va a más infinito y en cuanto llega a más infinito la ejecución para y si lo pongo a menos de uno en cuanto lo empieza a multiplicar se me va a cer0 y al llegar a cer0 la multiplicación para vale por tanto pongo un número que es un poquito superior a un y un poquito superior a uno para que siga calculando y ni se vaya a más infinito ni se vaya a cer0 ni a menos infinito tampoco evidentemente vale Este parámetro Define el número de iteraciones de cálculo aquí es donde está el conflicto porque veis que estoy haciendo pues 1 millones de operaciones de cálculo vale Así que arranco un bucle for realizo una multiplicación queé estoy haciendo con esta multiplicación pues Albert lo que estoy haciendo es putear al procesador vale es forzar al procesador a que me haga 1 millones de veces una multiplicación de un número contra otro y que por tanto tarda en procesar y bueno el finalizado me lo puedo quitar Porque finalizado si ya tengo el final menos el principio pues ya está claro que voy a sacar un mensaje por pantalla bien Si yo hago esto y ahora ejecuto recargo me voy al proceso veis que otra vez un hilo de proceso Ahí está un hilo de proceso se ha escapado veis ahí arriba y he tardado 5706 milisegundos voy a añadirle un cerito más tardará 50 segundos atención todos vale fijaos como hay un hilo de proceso que está escapado hacia arriba Sí se lo va pasando de hilo a hilo se lo va pasando de procesador a procesador y dentro de 50 segundos pues este programa parará qué ocurre Pues que yo estoy haciendo estoy forzando una operación que tarda 50 segundos en hacerse pero estoy en un ordenador que tiene 16 núcleos eh luego ya os contaré que pues cada lo que igual hablis en sistema informáticos el año pasado que hay diferentes familias de procesadores este concretamente tiene no sé cuántos Hilos de alto rendimiento no sé cuántos Hilos de economía y en fin ya os hablaré de ello vale pero lo cierto Es que estoy mira aquí está vale 52,000 milisegundos 52 segundos Lo cierto es que estoy despreciando 15 Hilos de proceso es decir tengo un ordenador que tiene 16 hilos 16 núcleos vale 16 Hilos de ejecución pero estoy utilizando solo uno ese es el problema con el cual nos vamos a encontrar qué ocurre Pues que eh en todos los programas que habéis hecho el año pasado en primero probablemente nunca os habéis dado cuenta de esto porque en primero hemos hecho prr pramas pequeños y tampoco pasaba nada pero qué ocurre Pues que en segundo ahora en desarrollo de interfaces empezaremos hablar de Machine learning e Inteligencia artificial y eso pesa eso se lleva proceso en acceso a datos hablaremos algo de Big Data y cuando hablamos de Big Data hablamos de procesar grandes cantidades de información entonces en segundo pues va a llegar un momento en el cual nos encontramos con la necesidad de procesar grandes volúmenes de información y con el problema de que hasta el momento todo lo que hemos hecho hasta el momento lo hemos hecho en monon nucleo toda la programación que hemos hecho Únicamente se ha ejecutado en un núcleo Por qué Pues porque si os dais cuenta hasta el momento hayamos programado en estilo estructurado o hayamos programado en programación orientada a objetos pero En definitiva nunca hemos paralelizado nuestra nuestros programas nunca los hemos separado en partes y ejecutado partes en paralelo sino que nuestros programas Siempre han empezado desde arriba y han llegado hasta abajo y ya está bueno pues una vez que hemos presentado el problema vamos a presentar la solución una solución perdón porque hay muchas soluciones una de ellas es estando en el entorno web acordaos que vamos a ver soluciones web y soluciones de escritorio es izar un framework que aporta html5 que viene preinstalado en prácticamente cualquier navegador decentemente actualizado que es el objeto workers vale Vamos allá 003 workers bueno primero Navigator vale me borro esto porque ya sabéis que es un archivo inicial voy a poner const navegador es igual a Navigator vale Y voy a decir console log navegador bueno porque es un const Pues porque el navegador no va a cambiar vale le podía haber puesto led le podía haber puesto bar pero el navegador es el que hay con lo cual no vamos a cambiar nada con lo cual por eso he puesto un const para ahorrar un poquito de memoria un poquito tampoco creáis que vamos a ahorrar mucho así que vengo por aquí Navigator vale Y si os fijáis Y si os fijáis pues Navigator el objeto Navigator tiene un montón de propiedades me dice que es mozilla netscape versión 5 el agent tengo el sistema operativo con el que estoy trabajando vale el device Memory 8 gpu me reconoce la gpu interesante y hay por aquí un parámetro Aquí está Hardware concurrency donde tengo un número que en este caso es 16 ese número estará proporcionado al número de núcleos que tengáis en vuestro sistema operativo que evidentemente debe coincidir con lo que veáis aquí luego primera buena noticia Y es que como veis javascript ve vuestros núcleos esto quiere decir que me voy al código vale esto es instanci el objeto Navigator Esto es lo saco por consola porque qué Porque es muy cómodo javascript tiene eso de bueno que sacas cualquier cosa por consola y te la archiva y ahora const núcleos una vez más por qué lo pongo en const pues porque si mi ordenador tiene 16 no va a variar va a tener 16 no puedo ni ponerle más ni quitarle y menos en caliente vale Así que en núcleos es igual a navegador Hardware concurrency Pero por qué pues quiero que sepáis que esto no me lo he inventado yo quiero que sepáis que esto está aquí vale Eso sale del propio objeto Navigator con lo cual hago así saco el número de núcleos Y entonces digo console pun log y digo tu ordenador tiene coma núcleos Ay qué rabia me da Okay Bueno pues no Hala bien recargo y tu ordenador tiene 16 núcleos vale a continuación eh voy a hacer lo siguiente voy a hacer un eh led trabajador es igual a un New worker es la como os digo el objeto preconstruido que tiene cualquier navegador desde 2010 que soporta programación distribuida vale Y ahora a continuación aquí donde pongo worker tengo que decirle dónde está ese worker cómo se llama ese worker aunque hay un método utilizando un blog de javascript que permite que el worker esté dentro de este archivo Dentro de este archivo html el blog de javascript os lo enseñaré más adelante pero eh Generalmente si no utilizamos blog se utiliza en un archivo javascript externo Vale entonces esto es esto qué archivo es m no lo tengo aquí qué archivo estoy pues no lo veo eh Pero bueno este será el archivo A ver espera esto es worker vale Y lo que voy a hacer es que 004 worker.js evidentemente si digo que voy a llamar a un archivo worker.js es que a continuación no quieto a continuación voy a crear un archivo y lo voy a guardar como 004 worker.js bien tengo por lo tanto un hilo principal de ejecución que llama a un worker llama 004 worker js el nombre es el que os dé la gana evidentemente pero si creáis si llamáis a un archivo 004 worker.js es porque tenéis que crear un archivo llamado 004 worker js bien aquí dentro voy a decir on message es igual a function y voy a decir que eh console.log Ok Hola vale Pero eso no se va a ejecutar lo que lo primero que quiero que veáis es que el worker está a la espera hay un método reservado que Hola sig adelante Dime primero de medio Allí sí hay un método que se llama eh on message que básicamente es un evento realmente vale como el on click os acordáis ayer de interfaces El on keypress Vale pues on message donde Cuando alguien me envíe un mensaje dime hola vale pero nadie le ha enviado un mensaje así que me voy aquí me voy a worker vale tu ordenador tiene 16 núcleos pero no dice hola es decir no dice console.log hola con lo cual lo que voy a hacer es lo siguiente yo aquí he instanciado un worker pero no le he enviado ningún mensaje así que trabajador punto post message y ya está Le voy a decir hola pero por decirle algo vale podría enviarle un post message vacío qué estoy haciendo ahí post message es Te envío un mensaje on message es recibo un mensaje y ahora luego veréis que el worker a su vez le puede enviar un post message al hilo principal y el hilo principal puede escuchar un on message Vale ahora hago un esquema aparte de que pongo comentarios y vemos cómo es la comunicación entre Hilos de momento lo que quiero es que funcione Vale pues vamos a verlo sí no no ahora mismo lo que está ocurriendo es que lo que quiero que ocurra es que el hilo principal le Envía un post message al worker el worker recibe el mensaje y dice hola de momento y ahora luego lo que va a ocurrir Es que además el worker enviará mensaje de vuelta vale pero de momento no así que yo ahora vengo recargo y dejar el error porque el error ya sabéis que es el favicon y dice Okay Hola y entonces vosotros diréis Bueno sí pero Y qué quiero decir esto ya lo podía hacer anteriormente con cualquier otro sistema Pues no porque cuando yo hago un worker así como si yo pongo aquí un console pun log ese console.log se ejecuta en el mismo hilo de proceso si yo hago un worker automáticamente javascript arranca otro proceso diferente arranco un proceso paralelo vale bien Ahora Borja ahora vamos a hacer lo que estabas comentando voy a comentar un poco esto creo una instancia de worker le envío un mensaje Vale en esta parte de la asignatura los dos conceptos clave son post message y on message vale Te envío y recibo Ahora yo te digo Ok Hola y entonces eh Te digo eh post message Ok vuelvo al proceso principal este Ok Hola simplemente dice hola eh Perdón esto voy a hacerlo esto voy a hacerlo en otro 005 worker este va a llamar a 005 worker y este va a ser 005 worker que va a hacer un post message vale o sea el worker Escucha ejecuta lo que tenga que ejecutar y cuando acaba de ejecutar devuelve un mensaje al hilo principal es decir el worker escucha dice algo hace algo simplemente por demostrar que el worker hace algo y devuelve un mensaje al hilo principal vale el hilo principal a su vez trabajador onmessage eh en el worker no hace falta poner trabajador message porque ya soy el worker es directamente on message Vale y post message pero ahora veréis por qué en el hilo principal sí que hace falta poner trabajador post message y trabajador on message Por qué Pues porque ahora a continuación voy a tener múltiples hilos y necesito controlar de cada uno de ellos a quién le envío Y de quién recibo Vale entonces trabajador onmessage es igual a function a ver eh A ver vale os cuento blanca bueno dragos no así no se comunican los hackers eh lo del tema de comunicación de hackers tiene que más que ver con el tema 3 cu y 5 de la asignatura es decir el tema de comunicación entre procesos en Red pero no esto es entre Hilos de ejecución en un mismo procesador esto de momento no tiene nada que ver con hackear Ahora cuando avance la asignatura pues ya hablaremos más de hackear y Blanca esto efectivamente lo hago no solo por no sobrecargar la cpu porque según se mire hasta hace un momento yo no la tenía sobrecargada Porque si yo utilizo un hilo de proceso y me quedan 16 Perdona 15 hilos libres no estoy sobrecargando la cpu Pero lo que sí que estoy haciendo Es que la cpu se muera de risa entonces lo que estoy haciendo es blanca al contrario sobrecargar la cpu pero para utilizar el pleno potencial de la cpu Y para que lo que antes tardaba 50 segundos pues tarde 50 parid 16 es decir tarde mucho menos en ejecutarse O sea que Blanca lo que quiero Precisamente es sobrecargar la cpu Pero porque hasta ahora no podíais sobrecargar la cpu no sabíais cómo y quiero sobrecargarla en plan bien vale no para cargá sino para sacar el rendimiento que le puedo sacar bien function on message y console pun log el worker me ha devuelto un mensaje así que ahora ejecuto me vengo por aquí me voy a worker y Ok Hola y el worker me ha devuelto un mensaje no un momentín Claro muy buena cuestión porque yo ahora mismo fíjate que estoy trabajando el on message y dice function y me dice o sea aquí da igual que el worker me diga Ok vuelvo al proceso principal Ok soy el worker y vuelvo al proceso principal porque este Ok soy el worker y vuelvo al proceso principal Se ha perdido en la Nava sin embargo si yo aquí pongo e y ahora digo console.log y el worker dice e pun Data dame los datos Dame O sea no solo quiero detectar que he recibido un mensaje Quiero saber qué dice ese mensaje así que vengo por aquí y el worker dice ok soy el worker y vuelvo al proceso principal vale o sea no solo podemos pegarle un toque sino además podemos enviar información o puedes poner que no te vuelva Nada igual solo ping y acabado y ya está vale cosas bueno cosas un poco feas que he hecho hasta ahora y es que este worker de aquí está haciendo un console punto log os acordáis que Siempre os digo que las funciones no deben hacer console punto log dentro de la función debe hacer returno vale Y cuando hagas return ya veremos Por dónde sale el return de un worker es el post message con lo cual esto lo he hecho para que veáis que funciona Pero esto es un poco guarrete ahora luego lo quitaré y en teoría debemos basarnos únicamente en Post message bien con esto queda un cuarto de Hora de clase Voy a ver si puedo e enseñaros Cómo Qué ventajas tiene esto y ahora a continuación lo que voy a hacer es el código de sin multiproceso lo voy a copiar y lo voy a pegar Perdona aquí esto es 006 worker Llama a 006 worker esto es 006 worker y atención porque ahora aquí lo que voy a hacer es poner el código que he puesto antes el código costoso de calcular si yo ahora ejecuto 006 worker Vais a ver que tengo un hilo de proceso ocupado veis tengo un hilo de proceso ocupado pero el resto no con lo cual vosotros diréis no has ganado nada vale Ya está ya he vuelto la ventaja veis ahí Vale ahora ha bajado ahora viene la demostración final de la de esta primera parte de la clase de hoy ahora es cuando lo amos todos enormemente porque lo bueno que tienen los workers 007 worker Lo bueno que tienen los workers es que yo no tengo por qué tener uno solo sino que digo led trabajadores es igual a array Y si hago una array puedo crear tantos workers como yo quiera tantos núcleos como yo tenga vale Y entonces digo eh led número trabajadores es igual a 8 no voy a poner 16 Por qué Porque si no como decía Blanca igual sí que peto el ordenador vale si tengo 16 Pues voy a la mitad porque necesito más núcleos para obs para zoom y para todo eso bien y ahora digo atención for Let t es ig a 0 o w worker es igual a cer w es menor que número trabajadores W más y entonces digo atención y entonces digo eh dónde estás trabajadores de w es igual a New worker trabajadores dew post message trabajadores on message es decir ya no tengo un trabajador tengo una Ray de trabajadores tengo una Ray de ocho trabajadores a cada atención porque ahora viene la parte importante de la clase a cada uno de los trabajadores ahora comento esto a cada uno de los trabajadores le meto un worker y lo que quiero que veáis a continuación es que en lugar de ejecutarse secuencialmente se van a ejecutar en paralelo Vamos allá sí sí de momento sí no de momento no eso que acabas de decir es muy importante claro las cosas no ocurren solas no ocurren si nosotros no lo hacemos que ocurran vale nosotros somos los que vamos a decir Oye tienes 1 millones pártelo entre 8 a este worker le envío esto a este worker le envío esto pero no Hemos llegado Ahí todavía de momento solo queremos demostrar que podemos ejecutar hilos simultáneos y ahora luego ya veremos Cómo distribuimos trabajo pero bien visto vale bien visto por tu parte Así que vengo por aquí me voy a 07 y atención porque ahora saco a ahora saco los procesos Y qué está ocurriendo pues esto ya es otra fiesta Vale ahora los workers me empiezan a devolver información pero esto ya es otra fiesta vale voy a hacer una cosa voy a poner 12 hilos Es que no quiero poner 16 para no petar el equipo entero claro voy a poner 12 Mirad ahora el procesador Mirad que la fiesta se vuelve más interesante vale Y ahora sí tengo 12 de 16 núcleos a tope de Caña al 100% de proceso durante unos cuantos segundos durante 5 segundos vale vamos a comentar código en estos últimos minutos de la clase pero de momento ya tenemos una primera demostración como con no demasiado esfuerzo inicial vale luego Habrá más esfuerzo Pero y con un bloque de código no muy grande y podemos repartir ahora luego vamos a tener que tener en cuenta ahora luego al final de la tarde la semana que viene vale vamos a tener en cuenta cosas como la que tú has dicho que dices Sí vale hemos arrancado diferentes hilos pero ahora hay que información y hay que repartirla en los hilos y ojo y peor todavía luego recoger cachos de información juntar cachos de información pero el problema es que cada worker igual te devuelve la información en un momento diferente os enseñaré una cosa que se llaman semáforos para eso o sea Hay un montón más de cosas que ver ya te digo y de hecho muchas de ellas son complejas de ver y complejas de entender dentro de que voy intentar hacerlo lo más sencillo posible pero el mensaje que con el que quiero que os quedéis en esta primera parte de la clase es que Vais a ser capaces de utilizar los procesos Vale entonces pongo comentarios y digo eh creo un array vacío de momento es un array vacío número de trabajadores especifico Cuántos workers quiero y creo un for para crear tantos trabajadores como necesite vale Y esto ya es cuando el worker me devuelve un mensaje digo algo por consola y soy capaz de comunicarme con el worker O sea no solo devuelvo un mensaje sino que soy capaz de atrapar que Lu esa es otra cosa que tenemos que hablar de e pun Data Qué puede tener ese e pun datata puedo enviar un String puedo enviar un jas pero no puedo enviar una imagen hay cosas que sí que se pueden enviar y cosas que no se pueden enviar ojo en web luego en python es otra película diferente el concepto es el mismo pero la película es diferente Claro Esa es la cuestión en este caso hay que tener en cuenta que el Ah el entorno de ejecución es el navegador web que a su vez está en comunicación con el sistema operativo por tanto es el navegador web el que decide A qué núcleo tira claro con python nos va a pasar lo mismo como javascript y python son lenguajes de alto nivel no tienen mucho control para decidir A qué núcleo voy Si en algún momento utilizamos una librería de un lenguaje de bajo nivel Como por ejemplo c+ má ahí sí que podemos elegir a qué núcleo le tiro pero os aseguro que hacer multiproceso en c+ má ni de coña es tan sencillo como esto que acabáis de ver en javascript sí no no Claro coge diferentes Sí correcto vale bien pues vamos a acabar esta clase por aquí porque ahora a continuación me tengo que ir a inglés y me tengo que ir a Fall para asegurar que las profes arrancan correctamente eh Y esto José Manuel eh podemos crear una web aplicación en la que delegamos funciones en diferentes núcleos para que funcione de forma más eficiente esa es exactamente la idea de enseñaros Esto vale Y es que cuando por lo que sea tengáis una web o una aplicación que Noté que va lenta porque el hilo principal está haciendo demasiados procesos que analicé si es posible porque a veces no es posible si es posible tirar esos procesos a Hilos de ejecución paralelos y concurrentes para que más adelante esos hilos te devuelvan la información al hilo principal pero En definitiva que repartas la carga vale que el procesador te pueda ayudar con los hilos de ejecución que tienes Por eso digo José Manuel y por eso os decía el otro día que esta asignatura si os dais cuenta no es nada visual y es muy abstracta y es muy de pensar y es muy de calcular pero yo creo que es una asignatura muy bonita Porque te permite hacer cosas que antes no podías hacer vale Y vamos a ver y vamos a ver claro no no José Manuel pero yo aquí arriba lo que he hecho es detectar el número de núcleos con lo cual efectivamente no puedes tirar a ocho núcleos porque igual alguien tiene cuatro núcleos y le fundes el procesador nunca se va a fundir eh lo de fundir es una forma de hablar nunca se va a fundir de verdad Pero como puedes detectar el número de núcleos que tienes pues puedes decir número de núcleos partido dos El 50% de los núcleos que tengas o el 75 o lo que sea O sea que tranquilo que por una parte efectivamente José Manuel se puede tirar por lo bajo pero por otra parte hay mecanismos para detectar la potencia real de tu cliente concreto y adaptar la ejecución a la potencia de su equipo o sea que José Manuel te digo lo que antes decía Borja nada ocurre solo o sea todo lo que ocurra ocurrirá porque vosotros lo Vais a programar pero podéis programarlo vale pero tenéis mecanismos para detectar y adaptar y tener en cuenta y ajustar y todo eso vale bien pues como os digo me voy un momentín no os vayais vosotros me voy a eh espera Ah no Pilar continúa en esa aula de ahí Ah espera inglés A qué hora tienen Ah inglés por qué no estoy viendo aquí Ah no no inglés es la hora siguiente vale Ok pues me voy a lenguajes de marcas Bueno voy haber un momento pelar y ya sabéis que vosotros y nosotros nos vemos en acceso a datos a las 6 Vale y un momentín José Manuel No espera que la clase de ayer de interfaces fue un poco abstracta vale Yo lo que quiero es que os guste tanto interfaces como procesos ya veremos pero me alegro de que te guste de que te guste procesos nos vemos a las 8 para trabajar con acceso a datos Y luego Perdona a las 8 no a las 6 con acceso a datos Y luego a las 8 para la segunda parte de esta clase de procesos y servicios vale Venga pues cierro por aquí y ahora luego nos vemos paro también el obs