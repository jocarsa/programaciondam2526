bueno tengo por aquí una serie de archivos que en un momento dado he preparado vamos a verlos a esto y hay una arquitectura he creado un juego de sprites que son pues cruz uno existe récord esta es la cruz 1 es decir de altura completa si ésta es la l pues la l1 es decir el juego de parámetros de altura completa los he intentado nombrar todos como pues lo mismo con el 1 puerta al aeropuerto antes no tenía puerta porque no tenía sentido esto es un poco lo de menos simple 11 simple 21 ahora sí vale y yo podría por ejemplo ahora venir al editor me dirá el código y podría cambiar unos por otros pero claro no quiero esto por la sencilla razón vamos a cerrar un poco esto vamos a sacar el código dónde está js aquí lo tenemos muy bien entonces yo podría venir a condiciones iniciales y podría eliminar digamos los elementos pero no lo quiero porque entonces no vería correctamente dentro de la casa cuando el personaje entrará porque las paredes sería demasiado grandes lo que voy a hacer es que voy a duplicar todos estos bloques vamos a ver y simple alto alto alto todos alto y alto también pongo aquí en el source alto de áfrica con nuevas imágenes y ahora aquí pues pongo simple guión 1 es decir cómo se llaman las imágenes realmente y ahora lo que voy a hacer es que cuando yo esté en el uso cuando los elementos estén cerca de mí cuando estén cerca de la pantalla lo que quiero es que se muestren unos y cuando estén periféricos a la pantalla quiero que se muestren otros como lo voy a hacer pues me voy a ir a funciones y vamos con los bloques simples vamos allá esto es el centro la puerta la ventana esto es cual el bloque arquitectura en x y entonces voy a decir lo siguiente sí vamos a ver sí hizo x del desfase si hizo x del desfase es un mayor anchura navegador por 0.25 la iso x mayor menor que esto por 0.5 o bien la iso y es mayor que altura navegador por 0.25 es la iso y es menor que altura navegador por 0.75 en este caso dibuja me una cosa en caso contrario dibújame la otra es decir lo que va a hacer en este caso es dibujar la que toca vamos a hacerlo vamos a ver esto vamos a hacer el es vacío voy a copiar esto por todas partes así que bloques simples lo que simple es la puerta nada la ventana voy a ir copiando y pegando lo en cada uno de ellos la te colate y la t para la shell es muy bien ahora voy a pegar los els no nos olvidemos y este es lo que es lo pego aquí no pero aquí lo voy pegando en todos y cada uno de ellos hay que tener mucho cuidado porque las probabilidades de fallos son grandes bien entonces si este código ha ido bien no lo sé vamos a verlo en principio ahora solo va a pintar los bloques que estén en el centro más o menos en el centro de la pantalla no carga nada entiendo que debe haber habido un error vamos a ver lo funciones 171 vamos a ver en bloque en x me falta un comentario vamos a ver hago esto grande condiciones iniciales línea 82 no puede encontrar en línea 82 l 11 vamos a ver cómo se llama ese elemento arquitectura l 1 porque dice que no lo puede encontrar l 1 punto png en la línea l 1 y 1 punto png voy a recargar el año 82 qué ah vale bueno aparte de que cambiado todos y no quería ahora cuarto 182 sigue sin encontrar el source porque también cambiando estos me he venido muy arriba cambiando elementos y he cambiado más los que debían muy bien ya está vamos a verlo y ahora lo voy a jugar y bueno en principio me está pintando todos cuando solo quería que me pintara los del centro de la pantalla voy a recargar todo con fuerza para asegurarme de que está cargando realmente lo que bebe y ahora vamos aquí a funciones y vamos a repasar y vamos a ver no sé qué es eso anchura navegador vamos a ver si esas son las anchura navegador correcto y soy y español vale voy a repasar el código voy a ver dónde está el error claro ya ver lo que está ocurriendo entonces con este código que tengo ahora mismo en la pantalla esto es menor esto es mayor entonces menor esto es mayor voy a estructurar menor mayor o igual a cabo antes copiando pero no porque esa estructura siempre da verdadera me está dando a mí y si siempre da verdadera pues nunca ejecuta el efecto que quiero ver en pantalla y es que solo dibuje lo del centro o no de la periferia guardo recargo por aquí bien sigue dibujando y es curioso porque se sigue dibujando es porque da y eso me extrañó la barbaridad me extraña una barbaridad que de true cuando sea antes daba tres que ahora tiene que dar folks así que bueno vamos a hacer esta fase x el navegador x 025 voy a hacer diferentes pruebas con él y hasta que consigue hasta que consiga el que aquel que esté afinado para lo que yo quiero vale ahora sí con esta estructura lógica vamos a verlo con esta estructura lógica lo que está ocurriendo es que cuando está alejado ahí lo vemos vale lo que he hecho con esa estructura lógica es decirle que sí es cierto una de estas dos cosas y es cierta otra de estas dos cosas en ese caso pinta así que ahora voy a poner el caso él voy a poner el caso el cge y luego en el caso true el cuidado el ahorro tengo que copiar este aquí copio este aquí voy copiando cada uno porque estaba copiando a la bestia el primero vale y ahora en el caso true voy a poner cada uno de los bloques vamos allá muy bien esto es bloque arquitectura x era x había postulado entonces simple 1a simple 2a ventana 1a del sol de 4 ep3 dedos pero eso no puede ser pero bueno ya hablaremos de ello l 4 l 3 l 2 y l2 tampoco puede ser ok si todo va bien recargo le voy a jugar y en principio ahora veremos como pues aquellos elementos que están más alejados vamos a verlo a aquellos elementos que están más alejados pues los pinta grandes digamos y aquellos elementos que están más cercanos pues los pinta más pequeños ay hace extraño al tiempo que un extraño no pasa nada más o menos empieza a funcionar y bueno ahora analizaremos lo que importa es que cuando me acerque al interior de la casa pues las paredes se vayan reconstruyendo como ya digo hace extraños con lo cual tengo que ver un poco tal pero por lo menos ya estamos viendo que cuando estoy dentro de una casa pues quita las paredes y cuando me voy alejando pues ponen las paredes qué es un poco el objetivo de todo esto luego otra cosa que quiero otra cosa que quiero es que quiero poner techo he preparado unos techos entonces vamos a verlos los techos en este caso los tengo dentro de este sprite llamado techo pero lo cierto es que este sprite marilyn requeriría hacer una nueva capa porque claro donde pongo techo pues tengo que especificarlo así que voy a crear una nueva capa la valla de más techos y ahora voy a empezar a trabajar lo práctico así que de hecho por aquí voy a sacar el terreno y lo pintó de blanco y ahora pues bueno puedo por ejemplo duplicar la capa me la llevo aquí miramos hacia abajo duplicamos me lo sigo llevando tiramos hacia abajo vaya dónde está la varita mágica copio y pego me lo llevo pero para abajo seleccionó copio y pego giro 90 grados primeramente no hace falta me lo llevo hacia abajo y duplicó pero hacia abajo en duplicó un par de veces y ya está me puedo exportar esto con mapa 1 techos exportó y me voy al código a ampliarlo así que ahora vengo por aquí y digo lo siguiente vamos a el index y entonces digo lo siguiente y en forma para colores lienzo mapa techos o techos con techos me voy a condiciones iniciales con texto mapa techos y en forma para techos mat aproximaba personajes la arquitectura mapa techos los techos sí no y lo he guardado incorrectamente mapas mapa algunos techos me voy a el inicio con texto mapa techos pinta de los techos y ahora siempre que haya algo que pintar en funciones en el terreno lo que era correcto ya lo digo bar techo es igual a contexto mapa techos de ciments trata de tal y digo sí es cierto que te echo de alfa es decir de 3 es igual a 255 en ese caso pinta de un techo térmicamente esto debería hacerlo después de todas las paredes entonces voy a hacerlo así cuando acaba de safed cuando acabe save me vengo aquí y digo 1783 están en ese caso dibujo el fondo dibujo bloque techo y ya está vamos a verse funcionando recargamos cuidado porque tengo que hacerlo de liso que ha pasado algo ha pasado vamos a verlo bloque techo es notify como entonces vengo por aquí en condiciones iniciales y bloque techo de hecho es lo que te echo recargamos vale técnicamente me pinta todos los pechos a ellos se ve como ahí se ve como lo del navegador no está funcionando muy allá pero bueno no pasa nada lo que me importa es que lo que quiero es que cuando me acerqué quite los techos y le voy a decir al sistema vemos aquí que tengo el techo de la casa le voy a decir al sistema que quiero que eso esté dentro de un condicional así que si eso es esto en ese caso pasa esto recargo y ahora en principio sólo va a pintar los techos en aquellas partes de edificio que esté en lejanas vemos como ahí tenemos los techos y vemos cómo poco a poco se van quitando conforme me voy acercando para dejar del interior de la casa le digo que no está funcionando todo lo bien que debería pero por lo menos está empezando a funcionar y ahora a continuación pues ya afinar en la lógica condicional pero por lo menos como digo lo que me importa es que lo que quiero es que cuando me acerqué dentro de una casa me deje ver dentro de la casa y cuando me aleje pues ya evidentemente como para la casa así que con esto por lo menos tengo para ir empezando 0 25 y 0 5 bueno podríamos pensar si es suficiente o no pero vamos de momento tenemos eso y por lo menos tengo suficiente para ir avanzando ahora lo que quiero ahora lo que voy a hacer es poner diferentes personajes vamos a poner diferentes personajes y para ello lo que haré es utilizar la herramienta que creamos anteriormente de configurar personajes bien pues ahora bueno no voy a dejar los personajes cubo un poco por ahí sueltos porque lo que quiero es crear una serie de personajes con el configurador anteriormente utilizamos el configurador para poder personalizar nosotros los elementos del personaje pero sin embargo lo que voy a hacer ahora es decirle al sistema que quiero que lo haga el propio sistema voy a hacer una segunda versión del configurador para no machacar la que tengo porque la que tengo está bien para dejarle al usuario que se haga sobre el personaje pero yo no quiero eso yo lo que quiero es que cree múltiples personajes así que el configurador lo voy a copiar y pegar voy a llamarlo auto configurador y vamos a editar este archivo de hecho en un solo archivo pero tenemos todo y lo voy a llevar a auto configurador y nada más empezar vemos cómo tenía vamos a verlo por aquí tenía un change y el saint lo que hacía era ejecutar realmente la función voy a decir lo siguiente y es que no quiero que la ejecuta en el saint quiero que la ejecute en el documento punto breve y lo que va a hacer en este caso es que va a crear el personaje vamos a verlo momento con soler y con sol punto no funciona guardo recargo bien funcionando pero no está no ha seleccionado nada no sé qué vale ese cambio algo vamos a ver por qué bucle 1000 aunque el inicio voy a hacer con sole punto log hola y vamos a confirmar si está funcionando o no hola está funcionando vale pues entonces voy a crear la función pinta va a hacer todo esto cuidado que me falta un paréntesis y ahora entonces voy a decirle aquí saber que he dejado esto ok esto fuera esto dentro no quiero realmente me hace falta el bucle así que vamos a verlo en la 102 en la fe y me hace falta y esto sobra vamos a verlo para pintar acepta el monte esto en 5 segundos el pintor y tú vamos a dejarle 5 segundos y lo que quiero es que el programa coja automáticamente parámetros y pin de ahí lo tenemos vale no sé por qué de hecho empieza con el bucle ok ahora lo que quiero es que el programa digamos cada equis segundos por aquí ahora a los 15 segundos le voy a decir window location es igual a window punto lo que son lo que va a hacer es cargar la página y ahora lo más interesante es que cada vez que carga la página quiero que pongan unos valores aleatorios en los colores vamos a verlo ahora esperamos 10 segundos más y si nos fijamos y si nos fijamos ahora recarga el personaje espera 5 segundos carga el personaje lo pone a animar y unos segundos después vuelve bien ya tengo el auto configurador ahora lo que quiero es darle una serie de valores personalizados voy a ver si me deja trabajar con el revés y esto lo voy a ver aquí value rgb voy a ver 200 02 tengo 500 voy a ver si el input me deja aquí está es el problema se requiere rgb con lo cual voy a tener que convertir voy a tener que convertir a hexadecimal ahí pero pone negro evidentemente no pasa nada bueno pues fácilmente puede encontrar por aquí javascript rgb x y encontrar alguna función muchas de hecho funciones en internet para vamos a ver componentes rgb tu ex pues esta mismo a mirar directamente a contraste con joaquín entonces vamos a ver voy a poner estas dos funciones por aquí y entonces ahora lo que voy a hacer es lo siguiente dónde está inicio muy bien digo bar r es igual para ere que ere pelo es igual a más punto round a ver más punto random x y hago lo mismo para todos y cada uno de los colores de pelo vettel o lo mismo para pantalones de pantalones r camiseta de camiseta piel de piel r claro no la cara siempre va a ser de color negro r pies eres pies de pies y las sombras se queda igual entonces ahora lo que voy a hacer es decirle al sistema que en el selector color pelo seleccionó color pelo punto atributo color creo que es color punto vale puntual y entonces utilizo esta función rgb tu ex qué es r pelo je pelo y pp lo vamos a probarlo recargamos de nuevo en la vida 22 vale bueno amarillo ahora sí vale al personaje matar el pelo amarillo ahora recargamos negro o azul parece azul de hecho me aferro un poco el ron de efectivamente es azul así que bueno ahora voy a hacer lo mismo con el resto de colores es decir el primer paso lo que queremos es que el programa crea automáticamente personajes aparte de que yo le proporciona al usuario la capacidad de personalizarlo pero lo que quiero es que el propio sistema genere un número prácticamente ilimitado de personajes ahora aplicamos lo mismo para el resto de elementos color pantalones r pantalones de pantalones color camiseta es r camiseta qué camiseta del camiseta color piel de piel y color pies color zapatillas es r pies que pierce de piaf con esto en la pantalla al menos vamos a tener un número prácticamente ilimitado de personajes ahí lo vemos como el sistema ha generado un personaje más marciano que otra cosa pero bueno este es un poco la gracia de momento este va a parecer más marciano todavía no pasa nada perfecto y ahora lo que quiero vamos a verlo ahora lo que quiero es que el sistema cuando genera esto cuando genera cada personaje lo guarde esto va a ser más difícil desde el punto de vista desde que desde javascript no puedo guardar un personaje automáticamente vale tengo que contar con algún tipo de programación del lado del servidor así que eso voy a hacer lo que voy a hacer es guardar todo este bloque mediante la tecnología ajax a un elemento dentro del servidor así que vamos a buscarlo vamos a por ello y vamos a ver por nuestra tv de 5 canvas safe png ajax php y en este caso vamos a verlo pues mismamente entonces 6 esto lo voy a poner por aquí abajo esto está guardando un elemento canvas que canvas pues canvas es bar canvas guardar es igual a documento en función de todo cayetá y por tanto aquí pongo canvas guardar llamó a test 6 php luego tengo que crear ese archivo lo guardo dentro de videojuegos como test safe php le pongo ese código que en principio podría lo quiero guardar dentro de img dentro de personajes y con el nombre personaje y el código upc de hoy un poco la época yonex aceite si todo va bien vamos a verlo y no da error que puede que sí tengo el personaje claro cuidado tengo que ejecutar la función así que ese mes y antes de irnos hacemos esto vamos a hacerlo vamos a ver si se guarda igual tengo que decirle que no lo haga tan rápido vamos a verlo me voy a personajes y bueno tengo ahí un personaje ha vuelto a cargar la pantalla hacer lo siguiente en el código voy a decirle un time out de 10 segundos para guardar la imagen y así le doy tiempo de sobra vamos a ver test safe con sobre lo muy bien en principio por aquí y debería guardar la imagen en algún momento aquí está ok vale pero es un warning no es otra cosa y si todo ha ido bien ing lo guarda en ing personajes personaje en principio no eco ok 254 y voy a ver si 254 es el con sol eso es vamos a esperar a que recargue y a ver si ahora recargar pues ya me da el resultado final vamos a ver un segundo voy a recargar ahí está el personaje ahora ha de aparecer la afección ajax vale no está devolviendo nada no está devolviendo nada no está guardando nada vamos a ver si vuelve lograría que de hecho no está recargando y el correcto windows punto location es igual a windows punto location esto lo ejecutamos después de 20 vamos a ejecutarlo entonces ahí lo que va a hacer ahora es vale dibujar al personaje ahora el ajax ahora recargado vuelve para el personaje vuelve a hacer ajax y ballet y bueno ahora cargará en un momento dado el cálculo es pero supongo vamos a editar el código php porque aquí seguimos siendo los mismos personajes el php guarda en ing personajes personaje pero no está guardando así es que bueno vamos a verlo vamos a ver vale voy a probar este data url canvas que recordemos que es canvas guardar php test safe punto php pero posdata vale ingrid place lo guardamos como img personajes personaje u y vamos a verlo recargamos vamos a ver el personaje a continuación saldrá bueno creo que no va a salir el ajax de hecho con solo safety vale y ahora veremos si es cierto que la guardado recarga y en principio parece que no bueno personajes personaje vale pues voy a probarlo shift voy a probar a editar el código y ahora vemos que puede haber sido y al acabar esta parte de la programación veremos cómo poco a poco van a ir apareciendo nuevos personajes en la carpeta y por cada una de las veces que el sistema guarde un personaje pues aparecerá un nuevo archivo png que tendremos disponible para utilizar de esta forma más adelante en el videojuego vamos a poder tener tantos personajes como queramos pero lo bueno es que los personajes nos los va a crear automáticamente y por combinación aleatoria y el propio sistema