bien pues me voy a crear dentro de fecha al 72 una carpeta que se llama vida artificial entonces dentro de vida artificial voy a crear un archivo llamado bueno index punto php aunque hoy vamos a empezar con javascript pero para cuando nos estemos meter php más adelante dentro de unos días voy a sacar algún jquery por tanto vida artificial por aquí bien y el cargo el archivo y bueno como siempre la estructura de control sí exactamente y verás es una especie de auto agar-agar habrá severas entonces pongo localhost barra vida artificial y digo html lo claro este puesto es local host ahora sí bien pongo que ver me pongo podía vale dentro del gel a un script src es igual a jquery punto js y bueno en este caso yo que casi fuera del html para asegurarme la ejecución aunque realmente me entra en un bucle pero en fin voy a poner un script y voy a poner documento punto 9 function pues algo así como console log punto funciona así que recargo saco la consola y si todo ha ido bien dije funciona ya sabéis si habéis visto porque el hecho rápido que copia del archivo jquery ahí dentro para que realmente lo encuentre cuando lo llame ahora dentro de este elemento voy a hacer dentro del body un canvas ambas vamos a operar ahora con canvas le digo y del lienzo y le voy a decir en este caso para empezar ahora wish es igual a 512 píxeles height es igual a 512 píxeles si queréis un poquito de estilo dentro del head simplemente para decirle que el canvas tiene un border de un píxel solid black por ejemplo simplemente para que veáis que vemos el canvas no tiene mucho más misterio bien tenemos ahí el canvas así que este canvas va a ser un poco ahora de momento como una pecera donde van a haber diferentes animalitos así que lo primero que quiero es declarar el canvas en poder empezar a trabajar con el canvas y poblar algunos animalitos por ahí dentro entonces para ello ya sabéis que como os podéis imaginar voy a hacer una función loop y voy a hacer como siempre he dicho que hoy vamos a empezar poco a poco con cosas que ya conocemos temporizador es igual a nada y al final aquí se time out y digo voy a ejecutar loop por ejemplo un segundo y todo esto es igual al temporizador así que dentro de luz pues ya sabéis que hago clear time out de temporizador y al final la misma línea es decir la misma estructura de siempre para que podamos entrar dentro del loop y podamos hacer cosas así que voy a copiar algo de código de ejercicios anteriores vamos a ver vida artificial hc de box y digo por ejemplo pues este mismo realmente me puede servir un segundo en un segundo y aquí está esto en condiciones iniciales aquí esto en el contexto y element by the va a ser lienzo que es el y de que le he puesto así que por ejemplo dentro del loop voy a hacer algo así algo tan sencillo como decir contexto punto que os voy a vamos a ver html5 canvas chip voy a buscar vamos a verlo mira esto está el texto voy a buscar arq vale y ahí está entonces aquí está pues digo contexto punto arq y yo que sé en 100 con un radio de 100 empieza en cero acaba en más y por dos ya que se trabajan radiales y antich lo que hay es les voy a decir su bolso y ahora veremos bien si guardo y recargo vamos a verlo bien hay un error y dice clear time out is not the fine clear time out tenía alguna m demás recargamos vale y no hace nada si más que nada porque primero un control punto loft pero estoy convencido de que no es eso simplemente porque no he dicho un feel style entonces con solo hola así que recargó y dice hola y sigue diciendo hola vale entonces debería decir lo siguiente contexto punto feel style es igual a red por ejemplo a ver qué pasa así que guarde y recargo vale ahora sí que debería empezar a dibujar vamos a verlo voy a poner aquí fons si no tenías más voy a decir contexto punto pekín paz y lo que me faltaba era extraer al contexto punto field así que ahora aguarde recargo vamos a ver lo bien context punto field contexto punto field y ahí tenemos por fin el círculo funcionando en pantalla y bueno ahora como tiene 100 de radio es un poco grande vale por tanto voy a poner 10 y recordamos que conviene mucho poner una instrucción que dice contexto el punto clear rect que va de 0 a 0 hasta 512 más que nada porque esa es la altura del objeto así que bueno lo que estaba ocurriendo ahora mismo en la pantalla es que aparece un círculo digamos en una cierta posición este círculo va a representar a unos pequeños seres que van a vivir de momento en esta pecera luego llama a los peces llama a los lemmings se llama lo que quieras llamarlos llevan las personas depende luego hasta qué profundidad queráis programar pero de momento vamos a programar un sistema de vida artificial lo más sencillo posible pero que cumpla unas ciertas reglas en cuanto a que los objetos nazcan vivan y mueran y necesiten comer necesitan descansar y se ven amenazados por otros bichos que les quieren comer es decir un poco pues un pequeño ecosistema así que ya tengo un elemento en pantalla pero ahora evidentemente lo que quiero hacer es crear x elementos x circulitos de estos así que voy a hacer lo siguiente si digo sí pero no os preocupéis y digo condiciones iniciales de los vamos como los llamamos peces de los peces así que digo bar número de número es igual a 100 voy a empezar con 100 voy a empezar con 100 individuos luego lo podéis aumentar y disminuir a partir de aquí voy a decir bar 2 x del tipo x es igual a new a rey porque cada uno tendrá su posición bar post y es igual a new al rey este ejercicio que será más adelante para convertirse en tridimensional pero habla de momento por sencillez vamos a empezar con bidimensional y poco más de momento ahora lo que he hecho simplemente es crearles una posición x y una posición y déjame que sangre un poco esto así que ahora en el documento web y le digo condiciones iniciales de los peces si la vamos a ver aquí yo realmente no he declarado posiciones sino que los arrays he dicho yo te declara de posiciones ahora en el documento puntos rudy es donde igual ahora te voy a poner posición a cada uno de los 100 posiciones venga va es que luego también habrá vida y todo eso pero bien de momento sí que son oposiciones y yo digo que se te ocurre que debo hacer un foro claro que sí si tengo que recorrer cada uno de los peces y darle posiciones el hecho de recorrer automáticamente es un informe de hecho el que haya creado un número igual a 100 tiene toda la pinta de que voy a meter en un foro por eso digo bar y es igual a 0 y es menor que número y + + y ahora digo x de y ahora pondrás cara de estar aquí otra de las matrices con la media libra de ella pero lo que hay efectivamente entonces os x es igual a una posición aleatoria entonces voy a decir más punto random de por 100 1 por 512 porque por 512 que es la anchura de nuestro nuestra tercera ahora mismo post y de iu es igual a más random por 512 el más punto random a efe otra cosa que os digo es que esto me gustaría que estuviera en un mal punto round entonces no quiero ahora mismo decimales harán que el juego vaya más lento así que me voy a librar de los decimales simplemente encapsulando el random dentro de un round y ahora por tanto como os podéis imaginar dentro del loop después del clear recto el clear recto sagrado se no se toca y le digo fort bar y es igual a cero y es menor que número y más y hago lo siguiente con texto de quintas voy a crear todo esto y lo que hago por tanto ahora es decir pos xd pose y d por tanto guarde y recargo y si todo va bien pues lo que ocurre en la pantalla es que aparece un conjunto de 100 circuitos y aparecen 100 circulitos que de momento se están refrescando una vez cada segundo ahora luego lo subiremos lo bajaremos según craig pero son 100 circulitos que aunque se están dibujando una vez cada segundo ahora mismo no van a ninguna parte y la razón de que no van a ninguna parte es que no tienen razón para ir a ninguna parte porque son inmortales no necesitan comer no necesitan dormir no necesitan descansar no se quedan nada no nacen no mueren simplemente están ahí siempre así que yo creo que escribir sobre el mortal por estar y así aburrido en un sillón como diciendo el que no pasa nada con mi vida vale así que tenemos que hacerles que pase algo entonces ese algo por ejemplo es que tengan que ir a por comida así que en la siguiente parte lo que vamos a hacer es crear otras bolitas diferentes que son las bolitas de comida cómo vamos a hacerlo pues mira vamos a hacer y podríamos hacer que se comieran entre sí pero dicho esto es un poco antropófago así que vamos a poner un poco de vida como que te diría yo zanahorias como vegetales y que coman eso entonces condiciones iniciales de la comida así que digo bar número comida es igual a lo que queráis por ejemplo 100 también luego los variables como queráis dar comida x es igual a new array llevar comida y es igual a new array como os podéis imaginar dentro del documento web y voy a decir posiciones iniciales opciones posiciones iniciales de la comida así que me copió el foro tal cual formar y es igual a cero y es menor que número comida pues le digo comida x tiene un random y comida y tiene otro random esta copia de pegado prácticamente únicamente varía que en lugar de número es número comida y en lugar de post x y post y es comida x y comida y así que al final después en el loop lo que voy a hacer es que formar y es menor al número comida luego ya haremos que varíe la proporción que haya más peces y menos comida o que haya más comida de menos peces lo que sea por tanto dejadme hacer que la comida sea de color hielo de color amarillo para diferenciarlo más que nada y voy a decirle comida x comida y voy a ponerle un radio de 2 no se verá en pantalla sí si voy a poner ahora en saber si me deja a ver si me deja si lo he puesto de orange porque es que se lo ponían amarillo con respecto al fondo no se veía nada así que tengo ya por ahí unos pequeños personajillos vale de color rojo y tengo algunos elementos de comida así que lo que voy a querer a continuación es que los personajes los rojos vayan a comerse la comida pero vamos a hacer que tengan un mínimo de inteligencia y que tengan un mínimo inteligencia y es que no se vayan al primero de la matriz sino que revisen la matriz y vayan de momento al que esté más cerca eso quiere decir que dentro de la inmortalidad ahora mismo de estas partículas no sólo son inmortales sino que además son omniscientes porque una partícula que esté situada en esta esquina ahora mismo podría ver todas las partículas de comida cuando en la vida real cuando avancemos un poco más la programación de esto lo que vemos es que una partícula digamos solo puede haber la comida que esté cerca de ella y sea ciega a la comida que hay lejos de ella pero ahora mismo por simplicidad lo que vamos a hacer es que cualquier partícula roja pueda ver cualquier partícula de comida lo que quiero hacer ahora es que cada partícula detecte cuál es la partícula de comida que tiene más cerca si queréis como esto va a ser un poco lioso voy a hacer que número sea igual a 20 y número comida sea igual a 20 precisamente para eso lo hemos metido dentro de un contador para luego simplemente cambiar el contador de elementos y el contador de comida y ya está y no tener que modificar nada más bien por tanto ahora quiero hacer lo siguiente aquí en la pantalla mirad hay una función antes de mover nada quiero tirar una línea quiero ver yo en la pantalla lo que estaba viendo esa partícula así que para eso vamos a ver cómo dibujar una línea dentro de html5 canvas draw line realmente es lindo entonces online la gente como os decía vale entonces ahí lo que hacemos es decir lo siguiente dibujo una línea y dibujo una línea es contexto punto move esto lo hicimos con anterioridad no me acuerdo para qué pero tú lo que hacía era simplemente decirle mueve el cursor sin dibujar hasta por ejemplo yo que sé 2020 y ahora digo contexto punto la gente hasta por ejemplo 50/50 y contexto punto nuestro contexto punto extra que básicamente quiere decir que dibuja la línea así que guarda y recargo y como podemos comprobar pues tengo ahí por defecto una línea que por defecto si yo no toco nada más ostras esto que es avale que hay algo que ha dibujado lo que hace es que dibuja una línea se ve que el último elemento de comida lo que hace es que lo pone que también con esa línea el fin da igual pero lo que quiero de momento es que comprobéis como dibujo una pequeña línea y para que he dibujado una línea mirad vamos a hacer un poco una locura atención he dibujado una línea para ahora decir lo siguiente quiero recorrer este foro con número ahora digo voy a explicaros un poco lo que quiero para que lo entendáis en pantalla mientras lo voy escribiendo digo trazo una línea entre cualquier pez y cualquier comida y ahora aquí digo formar jota es igual a cero jota es menor que número comida j más es decir meto en el doble bucle for a todos los peces contra toda la comida y ahora digo contexto punto y digo quiero moverme hasta post x de ahí como pues y d y quiero dibujar con texto punto online hasta comida de x de j comida y de j y contexto punto extra si todo ha ido bien si todo ha ido bien lo que veremos ahora en la pantalla es justo esto y es que tenemos por tanto que cada uno de los objetos cada uno de los elementos es capaz de ver cada una de las partículas de comida veréis esto está un poquito confuso atención porque lo que estoy haciendo es dibujarlo al final y todo lo que dibujo al final se dibuja por delante así que permitirme mira dibujo los trazos al principio de todo para que pues para que los peces en la comida se queden por delante del trazo así lo veréis mejor esto es dibujó los peces y esto es dibujo la comida esto es cada uno de los bloques ahora ya a partir de aquí vamos a ver voy a decirle que quiero que las líneas sean menos visibles porque son muy fuertes entonces con texto html5 canvas stroud guys canvas line vamos a verlo aquí está yo no hago nada la en guys y también contexto punto vamos a ver este color like color espera que no te lo digo estruch esta era ésta después se voy a decir creo que está el es igual a great por ejemplo por tanto ahora guarde y recargo con texto y contexto evidentemente no puede ser el contexto así que hay una cosa así no quiero por tanto es que pues veáis estoy avanzando muy poco a poco pero es que quiero hacerlo así es que veáis como en este caso con esta función ahora mismo 0.1 vamos a probarlo cada una cada uno de los objetos cada uno de los peces está pudiendo ver a cada una de las comidas se crea una especie de red neural es un gráfico bonito y por tanto lo que voy a hacer ahora es que cada uno de los peces saque la línea recta más corta que hay entre él y una comida es decir no quiero que ahora mismo todos los peces vean todas las piezas de comida bueno realmente las van a ver pero quiero que cada pez seleccione una pieza de comida concretamente la que está más cerca con lo cual ahora yo lo que tengo que hacer es detectar aquí en el contexto una condición que me permita especificar cuándo realmente dibujo una línea bueno así que hago lo siguiente mirar dentro de este foro para cada uno de los elementos primero reviso la matriz en busca del mejor candidato donde el mejor candidato ahora mismo es que es el que esté más cerca y luego dibujo la línea entre el pez y el mejor candidato así que claro todo este contexto line guys pues va a pasar aquí y dentro del foro vamos a hacer ahora lo siguiente mira digo bar distancia x es igual a muchísimo es igual a 1000 bar distancia y es igual a 1000 con un valor muy alto y ahora lo que digo es ahora revisa si no espera persona esto va afuera esto va fuera y ahora digo revisa la distancia entre el pp y la comida y dime si esa distancia mejora o no mejora el índice mejora una mejora lo que tenía antes de hecho bar índice es igual a hacer por ejemplo y digo sí es cierto vamos a ver que por equis de iu post no menos comida x bj todo eso de hecho a bs su valor absoluto es menor que distancia x vamos a hacer esto grande y también es cierto que todo esto se repite para y pues y de menos comida distancia vamos a verlo tal en ese caso digo distancia x es igual a esto de aquí a distancia y es igual no queda mucho más de teoría hoy es igual a esto de aquí es decir actualiza la distancia del mejor candidato y digo índice es igual a j lo que estoy haciendo ahora es decir mira la distancia inicial una distancia ficticia que me acabo de inventar entre el pez y la comida es de mil unidades está súper lejos así que coge un bloque de comida está más cerca vale quédate con ese ahora coge el siguiente bloque de comida está más cerca quédate comencé no está más cerca déjalo quédate con lo que tenías porque estaba más cerca entonces este vive lo que está haciendo este y perdón lo que está haciendo es evaluar si se comida está más cerca de ti que la que tenías antes y si es cierto que está más cerca actualiza la distancia índice sigo a la j porque es el índice de la comida como diciendo el identificador de la comida para que para usarlo luego aquí abajo entonces si es un organismo de búsqueda realmente entonces lo que hago de hecho es parecido a la búsqueda por burbuja ya que va uno a uno iba reordenando pero si es una búsqueda la burbuja si este no pero el de burbuja tiene esto más luego una reordenación el mejor candidato eso es el que puedes encontrar entonces esto es índice comida x de índice comida y bendice entonces si todo esto ha funcionado correctamente vamos a verlo vete a saber no pongo yo como te diría iba a decir los huevos en la tapa del piano de que eso funcione correctamente la primera así que guardo y recargo vale y bien sí sí está parece que sí que está funcionando bueno no sé si funciona muy bien algo está funcionando aunque esta partícula dice esta partícula de aquí dice que la que le queda más cerca es esta de aquí cuando yo creo que le queda más cerca esta de aquí así que bueno por lo menos estamos consiguiendo que cada partícula detecte un bloque de comida ahora tenemos que al final el algoritmo porque hay partículas por ejemplo esta está viendo que su comida más cercana en esta de aquí y no se da cuenta de que tiene otras más cerca pero por lo menos ya tenemos una primera selección de comida por cierto independientemente de que se estén equivocando pero creo que veréis que va a haber algo de pelea porque estas de aquí todas van a por la misma que insisto ahora afinaremos el algoritmo pero aún al final del algoritmo algo de pelea habrá porque habrá un bloque de comida que esté cerca de dos con lo cual tenemos que ver quién gana vale pero de momento vamos a afinar un poco el algoritmo para que realmente una partícula detecte correctamente a la que tiene más cerca y supongo que el problema es alguno de estos de aquí vamos a verlo bueno vamos a verlo bueno lo que voy a hacer entonces es que vamos a ver lo digo bar distancia x es igual a mil ya mil distancia y ahora lo que hago no es declarar sino reasignar el bar índice lo mismo vamos a ver vamos a poner el bar índice por aquí y ahora reasignó y vamos a verlo vale pues es todo no pero bueno pero mejores si hay uno que está más cerca tú cómo es posible que estés cogiendo ese que está súper lejos vale vamos a ir buscando pues acabamos el ejercicio de la clase de hoy simplemente ahora sí haciendo que la partícula ya que ha detectado la comida más cercana vaya hacia ella así que vamos a hacer lo siguiente si esto es correcto no sólo ya dibujo la línea sino que hago lo siguiente vamos a ver y digo 2x es igual a 2 x de iu menos distancia x partido 10 por ejemplo posse y day es igual a posse y day menos distancia y partidos días claro en este caso suma o resta bueno pues eso no lo sabemos con lo cual realmente distancia y no perdona persona menos comida x exacto por eso es lo que estaba previendo de j comida y bj ahora os alejan todos los acercan todas ahora veremos y vamos a ponerle un segundo a ver qué pasa porque es que la que haga bien segundos igual era demasiado bien si parece que se han ido demasiado lejos vamos a ver sí pero es un problema haber distancia con la distancia no sabemos si es negativo o positivo vamos a verlo a la distancia así exacto es eso es lo que te digo vale sí exacto vale entonces vamos a verlo ya os digo que me extraña mucho que no funcione comida x de j teoría es correcto vamos a dejarlo x de j vamos a lanzar un console de comida x dejó de comer comida y de j bien bien ahí empieza a estar y ahí empieza a estar de índice ese es el problema es que no existe jota ahí dentro de ese índice por eso se va entonces esto es índice esto es 10 parece que se van parece que se van parece que se van todos vamos a ponerles un signo más para que no se vayan y se van hacia claro cuando llegan a una se van a buscar la siguiente bien pues no me preocupa demasiado el caso es que ahora mismo por lo menos ya se están moviendo así que de momento con que se mueva en la pantalla tenemos suficiente para hoy y en la próxima sesión lo que haremos es que vayan poco a buscar más a su bloque correspondiente de comida si a las bolas es quieres poner un border simplemente lo que tienes que hacer es decir aquí contexto punto stroke también en las bolas en la comida y o en los peces así que aguardo y recargo y ahora verás en un momento cuidado porque además lo tengo que decir stroke style y line guys así que le digo por aquí los peces por ejemplo y digo strong que está el es igual a black por ejemplo así que guardamos y recargamos vamos a ver en las y en la comida así voy a ponerle un line wifi 1 ahora sí por tanto lo mismo que hemos aplicado para las líneas se puede aplicar también para los círculos no son dips efectivamente pero hay mecanismos para hacerlo en primer lugar lo que hacemos en este ejercicio es implementar a esta altura las cuatro líneas que ayer propuso josé luís en cuanto a la detección de que es mayor si la posición x del personaje del pez digamos o la posición x de la comida lo mismo en cuanto a la y que es mayor si la posición x de la comida o la posterior y de la comida o la posición y del personaje y en base a eso lo que hacemos es sumar o restar la distancia con esto lo que tenemos por tanto es que cuando recargamos las partículas pueden ir efectivamente directamente hacia la comida a partir de aquí también paula propuso ayer por la tarde la fórmula estándar del cálculo de la distancia que es esta que tenemos aquí entonces esto es básicamente un square rod es decir una raíz cuadrada donde dentro del square lo que se hace es restar las 2 x restar las dos y estos dos esas restas elevan al cuadrado y suman entre ellas la idea por tanto es que podemos usar esta fórmula por ejemplo vamos a ver el lugar de live así que vamos a ver moment in aquí está vale entonces la idea era sustituir esa fórmula digamos en este punto en el que hacemos la validación de que es mayor o que es menor si la posición x y la posición y del personaje y por tanto la distancia por eso para implementar esta fórmula tendríamos que hacer lo siguiente en primer lugar en la parte superior vamos a verlo por aquí en primer lugar en la parte superior voy a decir lo siguiente voy a decir bar distancia es igual a mil por ejemplo no distancia xy distancia y si no en este caso distancia que es el módulo de la distancia de hecho aquí ahora en primer lugar declarar una nueva variable llamada distancia que igual va 1000 y a continuación digo por aquí distancia es igual a 1000 distancia x mi distancia y si no distancia a secas entonces lo que voy a hacer en este caso es que voy a cambiar esta fórmula aquí está voy a cambiar la fórmula que hay dentro del if para calcular para implementar esta fórmula que tenemos aquí me voy a poner como su letra en la parte de arriba en un comentario y vamos a ver cómo se traduce eso a fórmulas de javascript así que 1 square route es más punto s qr espera que te lo digo javascript square route está dentro de la librería matemática sql de ayer sq rt y lo que ponga dentro de vamos a verlo esto fuera también y esto fuera también vale y digo vamos a ver y diego ahí está x - x partidos al cuadrado así que en este caso lo que voy a hacer es decidir 2x de allí menos comida x de jota y todo eso tiene que estar elevado al cuadrado elevará al cuadrado es javascript power entonces el power la potencia es lo que elevó y a cuánto lo elevó así que vengo aquí y digo más puntos y creo eso como 2 es el cuidado porque ahora está fuera vamos a verlo ahora se toma 2 y tengo por tanto el square route de la potencia de 2 donde ahora lo que hago es sumarlo esto es correcto aquí y ahora digo lo mismo esto es menos pues post y beige menos comida y bj elevado a 2 con todo esto lo que hago es decir esto de aquí es menor que la distancia que originalmente es de 1000 si es menor es que es una mejor apuesta y si no lo es nos quedamos como estábamos así que si es una mejor apuesta digo la nueva distancia actualizó la distancia y digo distancia es igual a todo esto si eso es cierto que es menor quiere decir que es una mejor apuesta y digo entonces distancia ya no es igual a 1000 entonces la mejor distancia es esto de aquí y el índice es decir el elemento vamos a ver de comida al que me quiero dirigir en este caso es j por qué es esta jota de aquí porque estoy rastreando la comida y vigo mira parece que de momento el mejor que hay es este índice en el que entrado vamos a guardar os dejo ahí la fórmula para que la puedes copiar a ver que podamos ver todos a la vez le voy a recargar vamos a verlo bien aclaró momento vamos a verlo si quedan todos quietos vale aquí y dice jota vale se han quedado todos quietos y mira todos hacen y se van para allá bien vamos a verlo claro cuidado vamos a verlo el tema está en que aquí estoy usando distancia xy distancia y no estoy actualizando la distancia por eso lo que voy a hacer claro aquí lo que estaba haciendo es trabajar también con el módulo de la distancia así que al finalmente pues no eliminamos esas dos líneas vamos a verlo estas dos líneas que he eliminado por aquí que es distancia x y ahora que tenía ahí dentro más igual a punto a bs 2x menos comida x bj y el de abajo el de la distancia y así que recargamos vamos a verlo y en principio no tenemos ahí el cálculo de la distancia donde yo diría que hemos mejorado yo diría que con la implementación de la fórmula que ayer propuso paula ahora así que parece que está localizando en cada uno de los elementos la partícula que está más cercana voy a actualizar unas cuantas veces y en principio parece que sí que se cumpla por tanto esta fórmula habría mejorado claramente el comportamiento del programa bien por tanto tenemos dos aportes que habéis hecho por una parte el aporte que ha hecho josé luís en cuanto al cálculo de cómo se debe comportar la velocidad en base a quién es mayor o quién es menor y luego tenemos el cálculo estándar la fórmula estándar para cálculo del módulo de la distancia entre dos elementos que también ha ayudado a mejorar el comportamiento por tanto como podemos ver lo que tenemos en la pantalla es una serie de partículas que ahora sí fijaos cómo están peleando un poco por la comida ahora luego veremos qué partícula gana y qué hacen las demás y yo ahora lo que quiero es que en el momento en que la primera partícula llegue a la comida en ese caso la comida cuente como que la han comido y por tanto la segunda partícula ya no puede llegar es más la segunda partícula probablemente lo que tendrá que hacer es ir a buscar otra pieza de comida para eso como os podéis imaginar dentro de lo que es las condiciones iniciales de la comida tendréis que crear otra propiedad que será comido o activo o algo así que vengo aquí y digo bar comida activa es igual a new a rey aquí estoy declarando que esa comida va a estar dentro de una red por tanto dentro del documento punto 9 dentro de las posiciones iniciales de la comida que ahora será propiedades iniciales de la comida pues voy a decir comida activa de iu es igual a 1 donde por ejemplo uno será activa 0 será inactiva por tanto ahora voy a decir lo siguiente voy a decir para cada una ya aquí en el loop lo que estoy haciendo es con la y con el force en él en la i latina lo que estoy haciendo es averiguar parchear cada uno de los elementos y ahora con la j aquí dentro de la jtf en ese mismo y que hemos estado trabajando digo si es cierta esta condición y también es cierta también se da la condición de que comida activa de j es igual a 1 de que esa comida sigue estando activa en ese caso actualiza su distancia y todo lo que tú quieras con lo cual lo único que me queda ahora es decirle en alguna parte al programa que cuando no digo que la distancia sea cero porque ya sabemos que con esta fórmula de lo que se ha partido 10 nunca va a llegar a ser cero sino que cada vez va haciendo fracciones pero digo cuando estés suficientemente cerca entonces voy a hacer lo siguiente vamos a ver y ahora por aquí digo sí pos x menos comida de índice comida x 20 efe perdón menor que no menos todo esto el más punto a bs bueno perdonar porque una persona no pero qué estoy haciendo lo mismo de ayer y para hacer lo mismo de ayer puedo usar otra vez la fórmula de la distancia entonces cojo la fórmula de la distancia estoy ahora mismo en el 71 y digo si más ese cuerpo xd y menos comida x de índice massmart punto power posición y de menos comida y de índice es menor qué cuántas unidades pues nos vamos a poner tres por ejemplo en ese caso diré comida activa beijing dice es igual a 0 que equivale decir eso es que cuando una partícula se ha acercado demasiado a esa comida pues cuenta como que se ha comido la comida y por tanto que se haya comido la comida lo que hace es in activar la propiedad de la comida con lo cual el resto de partículas no la van a ver bueno ahora lo único que me quedaría mirar es lo siguiente ahora os pongo el código cuando dibujo la comida sólo quiero dibujar aquellas comidas que están activas así que dentro del bucle de dibujo la comida le pongo un if y digo sólo en el caso de la comida que está activa sólo sí comida activa y es igual a 1 solo en ese caso dibujo el círculo de la comida con lo cual si todo ha ido correctamente y no da ningún error vamos a ver como el primer elemento que pues llegue se come la comida voy a poner un radio mayor vamos a verlo 3 he puesto radio de 3 a mira y en cuanto uno se come la comida a continuación van a por el siguiente a ver hay veis fijaos a continuación van a por el siguiente sí bien ahora es cuando si queréis en el loop podemos 5 está bien por ejemplo si queréis podemos mirar rebajar el tiempo de reacción y así la animación va más rápida para ver qué es lo que ocurre y ahora si queréis también podemos poner más elementos acordaos que los rebaje a 20 pues vamos a poner 100 también os digo que la velocidad del juego será menor porque hay más elementos que calcular pero bueno también habrá más diversión y fijaos cómo entendemos cómo van comiendo hay partículas todos así también es que al poner 10 60 así a 60 de microsegundos quieres decir bien entonces si es que todo el balance saco exacto muy bien muy bien pero por supuesto vamos a meter más condiciones ahora voy a introducir un valor que va a ser la energía de cada uno de los peces donde cuando un pez va viviendo va pasando el tiempo y ese pez no ha comido pierde energía de hecho más adelante haremos que tiene un momento dado un pez se queda sin energía pues incluso pueda morir y no ha comido pero por supuesto cuando sp se come comida aumenta su energía ahora lograremos también que aquellos peces que más comida han comido vayan más lentos que el resto de peces pero a continuación por tanto para implementar esa lógica dentro de lo que es el pez voy a decir bar energía es igual a no sé a 10 pies a personas que si la energía es igual a la red efectivamente y efectivamente ahora es energía para cada pez por tanto en las condiciones iniciales de los peces voy a decir energía es igual ahora sí a 10 se le está asignando el valor 10 a cada uno de los peces ahora voy a hacer lo siguiente mirad dónde dibujo el pez os acordáis que antes he puesto aquí 10 mira qué es el radio donde dibujo los peces decía contexto punto arco es igual a posición y x posición y 10 s 10 era la un valor estático de 10 pues ahora le digo energía y al final de cada una de las partículas digo energía menos igual voy a poner 0.1 e igual me he pasado porque si pongo uno es que en diez movimientos me muere el pez y tampoco quiero eso quiero que vivan un poquito más claro cuidado he puesto la condición de pérdida de energía pero no he puesto la condición de ganar energía con lo cual lo que va a pasar ahora es que aunque los peces van a comer poco a poco muy para que pequeños han hecho el momento voy a poner 0.01 a ver si conseguimos que así vivan más a ver esto ya no me 0.001 a nono por favor energía de iu a verlo ahora vamos a verlo bueno vale un poquito menos qué rápido bajan de energía vamos a ver un segundo vale a ver no les quito energía y si no les quito a vale el problema está ahí le estoy dando energía efectivamente muy bien ahí está el error perfecto vamos a verlo ahora sí pero no sé si notáis si le puesto a 0.1 y con 0.1 van decreciendo con el tiempo dejamos allí mirar hasta que efectivamente hasta que se hace en chiquis y más y desaparece bueno pues lo que voy a hacer en este caso ahora es decirle que aquella partícula que consiga llegar a la comida a esa partícula se le da aún más 10 más lo que queráis de energía dónde está eso esto está aquí arriba vamos a verlo vamos a ver dónde lo pongo a cero ahí está efectivamente está aquí en mi caso de tres donde comida activa lo ponían a cero con lo cual pues en ese caso digo pues energía de iu vamos a verlo más igual 10 por ejemplo lo que queráis con esto lo que vamos a conseguir será visualizar como aquellas partículas que consiguen comer si se hacen más grandes y luego siguen decreciendo igualmente muy bien podemos incrementar la complejidad de este juego todo lo que queramos ahora veréis más ejemplos bien será un error ir a un error porque el radio no puede ser negativo aquí en ese caso no hay ningún problema porque fijaos yo aquí donde le quito energía le puedo decir sí energía de iu es mayor que 0 o es mayor perdón que 0.1 en ese caso sólo en ese caso le quito energía esta pequeña estructura de control lo que está haciendo es evitar que en ningún caso la el radio pueda ser negativo así que comprobamos como el radio en este caso nunca puede ser negativo bien lo que quiero ahora incluso es que sólo aquellas partículas que tienen hambre vayan a por comida quiero decir con esto que fijaos que en cuanto a una partícula come pues aunque acaba de comer también se va por la siguiente partícula y dices glotón a tú que acabas de comer pues deja comer a las que no han comido tú que ya has comido ya tienes hambre y no vas a ir a buscar más partículas hasta que no vuelvas a tener hambre por tanto lo que ocurre con todo esto mirad es que voy a decir lo siguiente sólo para aquellas partículas vamos a verlo aquí está vale y aquí está solo si es cierto la distancia es esta y la distancia es esta y comida activa es igual a esto energía de iu es menor qué bien por ejemplo solo cuando tu radio es menor que 10 solo cuando tu nivel de energía es menor que 10 en ese caso es cuando tienes hambre y en ese caso cuando tienes que preguntarte dónde está la partícula qué quieres comer así que fijaos que una partícula que ya ha comido se queda en el sitio ahora cuando hay cuando todas se han comido o sea cuando se quedan sin energía quería decir perdón es cuando dicen ahora no hay comida ahora vamos a ponerle un poco más de interés a la comida también lo que quiero es eliminar este pequeño console lo que ya no me hace ningún papel por tanto quito o museo este con sol punto lo que aparte hará que el programa funcione más rápido vale entonces lo que quiero hacer es que ahora la comida se vaya moviendo poco a poco por tanto para ello vamos a verlo por tanto para ello vamos a verlo en la comida voy a decir bar ángulo comida es igual a new array es el ángulo de dirección en el que se mueve la comida en las condiciones iniciales de la comida voy a decir ángulo comida es igual a más random y ahora recordad que más fondo random entre 0 y 1 con decimales entonces lo multiplicó por más por dos porque más punto y por dos pues porque recordamos que en rabia nes 360° sexagesimal es equivalen a más y por dos radiales es decir le estoy dando un ángulo entre 0 y 360 grados sexagesimal es así que ahora en la comida en el loop realmente voy a hacer lo siguiente dibujo comida y digo en primer lugar varió un poco el ángulo y digo bar y ángulo comida más igual ángulo comida de por supuesto más igual a más punto random partido pues 10 o por ahí así perdonar ahora vamos a ver más igual a más punto random partido 10 esto siempre para dar valores positivos menos más punto random partido 20 esto me va a dar valores positivos y negativos alrededor de 0 así que ahora vivo comida x es más igual lo que valiera le sumó el más punto cost ángulo comida veis y comida y day es más igual le sumo comida y quería decir más puntos en el seno de ángulo comida bay con esto la idea es que las partículas se vayan moviendo aleatoriamente por la pantalla por tanto si esto ha funcionado correctamente vamos a verlo ángulo comida es notifight en qué línea en la línea espera que no lo veo en la línea en 103 ángulo comida es que le he puesto con una m ángulo comida vale recargo y si todo va bien fijaos cómo las partículas veis las partículas se mueven ahí va y se comen de casualidad porque resulta que al parecer la velocidad es demasiado fuerte lo cual también está bien porque así obligamos a las partículas a correr un poco exactamente muy bien buena observación porque mirad ahí se produce digamos una carrera por la comida mirar y se han comido de casualidad pero también lo que quiero en este caso es decir la particular intenta comer la comida pero si la comida es demasiado rápida y te quedas sin energía pues te has quedado sin energía y por tanto ya no estás activo así que lo que voy a hacer en este caso es que las partículas puedan morir si aquí si están persiguiendo bueno sí la vida es así al igual la vida empezó así con un juego de ordenador de peces comen a ovejas en fin vamos a poner el siguiente vídeo la opción de que una particular si se queda sin vida pues ya no pueda tener más vida ahora lo que vamos a hacer es decirle al programa que en las condiciones iniciales de los peces haya una condición inicial que sea pc activo o no sé si pesa activo o activo directamente así que bar activo porque antes era comida activa bar activo es igual a niego al rey así que por tanto digo activo d y todos los elementos son activos activo de iu es igual a 1 todos los elementos están activos por defecto creo en primer lugar ya sabéis siempre la propiedad a continuación creo asignó la activación y ahora voy a decir lo siguiente sólo para aquellos elementos cuya distancia sea esta y que la comida activa sea igual a 1 y que la energía sea menor que 10 vale y también es cierto qué activo de ahí sea igual a 1 es decir que la partícula no esté muerta que la partícula cuente como activa lo que tengo que hacer ahora es decir lo que pasa cuando la partícula está activa y esto que pasa es esto de aquí abajo mira espera que lo encuentre aquí si energía de iu energía d es menor que 0.2 en ese caso lo siento mucho particular pero activo de iu es igual a cero qué malvado de momento no vamos a intentar exacto vamos a intentar posponer ese momento en el que caeremos en el canibalismo y el antropófago mismo que su conservación queda anotada en el cuaderno de bitácora un momento no lo sé no sentí que lo pongamos en marcha claro ahora lo que haremos es ver cómo hacer que vayamos la velocidad de las partículas bueno pues eso es muy fácil la labor es de momento un momento porque también lo que quiero hacer es lo siguiente vamos a ver dibujó los peces vale pues le digo solo sí solo en el caso y aquí sólo en el caso de que activo de iu sea igual a 1 solo en ese caso dibujar el personaje así que vamos a ver lo que comentáis y efectivamente por si hay un momento en el que pues sí bueno si todavía como en unas cuantas en una de casualidad comido no mira esto de casualidad porque se ha encontrado una ovejita que le pasa por al lado bien esto es muy sencillo mirad cuando yo estoy vamos a verlo cuando yo le digo comida x más igual más punto coseno esto de aquí pues el coseno y el seno los dividido entre dos y por tanto lo que estoy haciendo es que la velocidad de la partícula de la comida es la mitad entonces en este caso pues van a ir vamos a verlo fijaos cómo era la comida le cuesta mucho no te creas tú también está viendo es bueno seguir siendo así sí pero la velocidad debería quiero decir ahora mismo el pez debería ser más rápido que la comida a mí no voy a refrescar otra vez no es ahí se quedan se queda que no va voy a decirle 20 ahora sí entonces sí entonces pues le digo partido 4 partido 5 algo que claramente madrid algo de claramente las partículas digamos los peces sean más rápidos que la comida creo que ahora mencionado demasiada ventaja eso eso vamos a hacer eso y ahí tienen que currárselo un poquito más madre mía sí en los juegos de vida artificial esa es una consecuencia muy frecuente y es que vais a ver de hecho es gran parte de lo que nos enseñan los juegos de vida artificial que el equilibrio entre la supervivencia es muy delicado es decir con nada que hagas o se te muera en todas las partículas o súper pueblas el juego con lo cual de hacer un juego en el que haya comedores y comidos y se mantenga un equilibrio es realmente difícil lo cuando de pensar un poco en la vida real no excesos atrás pues ese es el equilibrio sea tan difícil la vida real pues dices que si bien entonces ahora efectivamente lo que quiero hacer es poner un sistema con el que la velocidad de la partícula esté en función de su hambre quiero decir las partículas con más vida pues sean más gruesas se mueva más lentamente ahí sí que es un poco como el haga realmente y las partículas más pequeñas que tengan más hambre se muevan también más rápidas así que a continuación lo que quiero hacer es que me voy aquí a las partículas vamos a ver dibujo la línea del pez aquí posición x es más igual a posición x más la distancia y esta es la cuestión aquí lo que estamos haciendo es que la velocidad por ejemplo la habíamos puesto a 10 vamos a ver qué pasa es la ponemos a 5 si la ponemos a 5 las partículas y las más rápidas qué rápidas más rápidas van que rápidas van si le ponemos a 50 las partículas salidas muy lentas y ahora bueno las orejitas van más rápidas que las partículas con lo cual lo que está claro es que este factor esté divisor es el responsable de la velocidad de las partículas lo que quiero por tanto es que ese factor esté en proporción directa con la vida de la partícula habéis visto que cuando la vida es más grande la partícula es más lenta y cuando la es más pequeña va más rápida así que lo que voy a hacer aquí es poner energía igual luego me toca multiplicarlo dividirlo pero ahora de momento voy a resumir esta línea más igual menos igual estoy usando operadores resumidos más igual y menos igual y veámoslo en funcionamiento ahí está y por tanto lo que tenemos ahora es que las partículas y las partículas más jóvenes son las que más comen pero claro nos hemos quedado sin comida fuerte en este partido bien voy a poner un poco más de comida vamos a ahora generaremos comida aleatoria que se vaya generando comida aleatoriamente pero ahora de momento lo que quiero es que en comida van a haber mil partículas y mil partículas de comida le damos un poco más de interés y vemos cómo pues bueno cuando se van quedando ahí cuando se van quedando su nombre exacto bien van muy rápidos veis en cuanto una partícula tiene hambre hace placas y se va directamente por la comida pues simplemente ese valor energía cuidado aquí ese valor energía estoy poniendo un paréntesis para que quede claro es el dividendo y el divisor pues que el divisor pues lo voy a multiplicar por 10 por ejemplo para que las partículas vayan más lentas no sé si x 10 estará bien pero ahora lo probamos click quieres hacer eso por yo sí yo si yo te cuento por qué recuerda momento vamos a las veces pero espera kalex álex entonces mirada vamos a ver veo eso veo vuestra propuesta y vamos a activarla a ver qué pasa vale vamos a por ello este juego ahora mismo es aburrido desde el punto de vista de que nosotros podemos mirar pero no podemos tocar con lo cual lo que quiero ahora vamos a ver las partículas están empleando un segundo escribe partículas se me muere y luego de repente se hace grande ahí hay alguna especie de fallo vale ahora mismo este juego es divertido está animado pero no es interactivo cuando digo que no es interactivo quiere decir que yo como ser humano no puedo interactuar con este juego así que por qué no lo que quiero hacer ahora es que cuando yo vea que se quedan sin comida quiero hacer clic en alguna parte y donde yo haga clic quiero crear un punto de comida así que para ello voy a hacer lo siguiente en el documento punto web y voy a crearme aquí una sección y digo cuando haga clic quiero crear comida entonces esto cómo se escribe pues dices en el canvas cuando sobre el canvas haga clic quiero ejecutar una función cuidado con el parámetro donde de momento voy a decir con soul ha explicado y punto y el punto que pues no lo sé sí pero con el cliente x más como más punto cliente y es que cliente es la distancia entre el punto que has normales pero todavía entre el punto que has pinchado y este puntito de aquí pero de igual me vale así que hago clic y dice ha explicado 106-93 es que fíjate que hago clic aquí y me dice 10 8 y yo como que 10 8 estoy en 0 porque me está cogiendo en ese punto pero igual me vale ahora así que lo que quiero es que ya soy capaz de reconocer el punto en el que he pensado bueno pues en ese caso una vez que he reconocido el punto en el que he pinchado voy a aumentar un índice más un número más la cantidad de comida cuál es la cantidad de comida la cantidad de comida es vamos a verlo número comida así que digo número comida más he puesto una comida más claro habrá por supuesto donde está esa comida pues como te puedes imaginar comida x número comida del final número comida es igual a punto cliente x comida y de número comida es igual a punto cliente y no os olvidéis de comida activa de número comida es igual a 1 ángulo comida de número comida es igual a más random de esto de aquí más punto random por más y por 2 si está funcionando bien mirad que está funcionando bien quiere decir que yo hago clic en un punto y aparece comida técnicamente parece comida 10 píxeles más a la derecha 10 países más abajo por lo del punto cliente x pero da igual nos hacemos una idea voy a decir que quiero menos comida inicial atención todos a la pantalla menos comida inicial y veréis que cuando yo hago clic estoy creando nueva comida la veis voy haciendo clic aquí no aquí miramos rimas comida come comida y por tanto yo creo que hemos hecho este juego más interesante con esta tontería que acabamos de hacer pero será un salto cualitativo en cuanto a que mira voy poniendo está más cerca coge está yo creo que hemos hecho un salto cualitativo en el que como seres humanos somos capaces de interactuar con ese mundo virtual es decir estamos creando una pecera en la que hay equis peces pero también como seres humanos podemos intervenir en los parámetros dentro de esa pecera bien mira lo que voy a hacer ahora es simplemente desactivar temporalmente el contexto clear recto y con el contexto clear recto fijaos que lo que hago simplemente es hace que no se borre cada uno de los fotogramas bueno pues la atención de la pantalla no me gusta exactamente eso pero lo que sí que me gusta un juguete que os voy a enseñar es contexto punto fil rect y voy a decir entre 0 y 512 y 512 para decirle contexto punto feel style y el fill style va a ser rgb esto va con comillas rgb a perdón 25 52 55 25 50 puntos uno lo que ocurre aquí por tanto si todo ha ido bien es que no sé si veis como las partículas dejan con una pequeña estela entonces esa estela es muy divertida en mi opinión porque es una especie como de bueno de rastro que va dejando la partícula lo he puesto en 0.01 lo que pasa es que no puedo tampoco ponerlo tan bajo porque entonces me deja una estela para siempre yo tampoco quiero eso ahí hay un punto en el que me deja una estela de terna vale por tanto en lugar del contexto clear rect lo que quiero es que pongáis ese contexto feel style y finalmente el contexto fill recto y un segundo dejadme que os pongo otra vez esa línea porque voy a poner número es igual a 100 vamos a darle y ahora os lo vuelvo a poner los vuelvo a poner la línea está ahí la tenéis de vuelta y así que recargo y así me deja una estela también en las partículas rojas así pues bueno tengo una especie como de vector que me dice tengo el vector fijo gris que me dice a dónde van y tengo también el rastro negro la estela negra que me dice de dónde vienen es un poquito más dinámico hawai sí vale hola ellos como comida no os vayáis me desaparecen un poco me desaparecen un poco del entorno llega un momento en el que corro el riesgo de que se vayan fuera de la pantalla entonces para que no se vayan fuera de la pantalla es decir ahora mismo el espacio es infinito pero yo como jugador estoy como obligado estoy atrapado a ver este trozo a ver esta escena bueno pues quiero como en cualquiera de los juegos isométricos que hemos hecho con anterioridad quiero ser capaz de decirle al programa que me quiero ir moviendo hacia un lado y hacia otro y evidentemente lo quiero hacer con las flechas bien lo que quiero ahora también es poder añadir elementos mira elementos al peces a la escena y por tanto en el documento puntos red y he copiado y pegado está esta instrucción que dice lo siguiente en el body cuando hagas context menú contexto vemos el botón derecho del ratón en canvas es decir en canvas ejecute una función que dice return false retorno false hace esto mirad le doy botón derecho y return scholz es que no me devuelve nada en pantalla es decir impide ejecutar nada en pantalla por tanto ahora lo que voy a hacer es que de la misma manera que he hecho cuando haga clic quiero crear comida pues voy a hacer otro bloque que vivo cuando haga clic con el botón derecho creo un perro así que el momento en que detecte en jquery el right mouse right click vamos a ver y aquí y vigo realmente retro falls contex menú si es esto mismo realmente es esto digo return false editó esa misma función y digo número más vamos a ver 2x es igual 2x de número es igual a punto cliente x2 y de número es igual a punto cliente y igual pongo el retorno falso al final no lo sé ahora veremos digo energía de número es igual a 1 y digo activo de número es igual a 1 por tanto ahora guardamos y recargamos y vemos como con el botón izquierdo podemos poner comida y con el botón derecho vamos a verlo para el reto ràfols vamos a devolverlo bajo vamos a ponerlo abajo oigo energía 1 efectivamente muy bien energía es igual a 10 creada uno pequeñito y super hambriento digo porque se ha ido corriendo por la comida y es este pequeñito entonces creo uno por aquí y fijaos que ahora puedo crear tanto veis tanto comida como personajes vale por qué revisa así a lo malo y bueno antes de empezar me gustaría como vamos a hacer hoy unas cuantas cosas es esto de aquí y si ver como vamos a hacer unas cuantas cosas aunque el juego se ralentice un poco me gustaría poner unos cuantos indicadores de texto en la posición de cada una de cada uno de los jugadores entonces el texto es una de las cosas que se pueden introducir dentro de canvas es texto dinámico de hecho esa es la gracia esa es la idea así que por tanto lo que voy a hacer es lo siguiente mirar voy a buscar html5 canvas cheat y lo que quiero en este caso es buscar un poquito de texto cómo se hace el texto así que el texto básicamente trabajando con la fuente por defecto porque se pueden cargar fuentes personalizadas pero en principio no queremos entonces aquí está fill texto vale pues voy a hacer lo siguiente vamos a ver dentro de cada vez que dibujo cada vez que dibujo los peces voy a decir lo siguiente fijaos estoy la línea en mi caso la 125 y dentro de la línea da 125 en definitiva al final de donde dibujo los peces aquí pone dibujó los peces pues voy a hacer lo siguiente voy a decir fil text y dentro de phil text digo hola por ejemplo para empezar y digo os x de iu + 10 como posee y de ahí 10 y ya está así que bueno igual me hace falta un feel style un momento ahora vamos a probarlo así que guardo y recargo vale parece que hay un error vamos a verlo y el error dice phil text is not the fine claro que sí porque es contexto punto feel texto llegamos así que guarde y recargo y si os fijáis ahora pone hola en cada una de las partículas vale así que bueno puedo poner hola me gustaría que el texto estuviera negro por tanto digo contexto punto feel style es igual a black que aunque la partícula sea roja pues el texto ahora es negro bien por tanto este texto me va a servir para poner hola si no poner los parámetros que me interesa revisar de cada partícula así que en lugar de poner o la voy a poner uve dos puntos más energía de qué es lo que va a hacer esto bueno pues si os fijáis en la pantalla fijaos que lo que hace es indicar me la vida de cada una de las partículas claro el problema que tengo en este caso sí es que se puede considerar que sea un problema es que tengo demasiados decimales para cada una de las vidas esto me puede ayudar a explicarme cómo os diría yo pues porque el juego en un momento dado puede ralentizarse entonces lo que quiero hacer en este caso es lo siguiente quiero redondear esa vida vamos a verlo pero tampoco quiero quitarle demasiados decimales así que aquí donde pongo dibujo los peces digo lo siguiente energía de iu es igual a energía de iu vamos a perder por 10 a esto le metemos un mal punto round y eso lo divido entre 10 y eso es lo que hace como ahora vamos a ver es redondear con un decimal moment in case han quedado fijas ahora veremos por qué la idea por tanto es que para redondear ese número finalmente lo que hacemos es multiplicar lo primero por 100 luego redondear lo y finalmente dividirlo entre 100 vale con lo cual nos quedamos con un decimal por ahí suelto después de un montón de ceros pero suficiente para el objetivo que perseguimos y es que no se mueva demasiado bien lo que quiero ahora por tanto simplemente es trabajar como os decía antes el género de la partícula así que atención todo es la pantalla vengo aquí arriba a condiciones iniciales y condiciones iniciales de los peces vigo vara género es igual a new array por tanto en las posiciones iniciales de los peces digo género de y es igual a más puntos round y el adjunto round de más punto random esto que va a hacer pues esto va a hacer que cada partícula sea cero o sea uno recordad que el parámetro más punto random lo que hace es dar un valor entre 0 y 1 con un montón de decimales y el más punto round lo que hace es redondear lo al número más próximo por tanto esto lo que hace es que yo tengo cero o tengo uno lo cual es perfecto para los dos géneros que yo quiero entonces quiero llamarlo masculino y femenino vale género by género b así que la idea en este caso es decir lo siguiente aquí le estoy asignando un género a cada una de las partículas y cuando las voy a dibujar mirad cuando dibujo los peces digo lo siguiente vamos a ver aquí está digo if género de ella es igual a cero en ese caso ahora veremos contexto feel style es igual a red en caso contrario contexto feel style es igual a blue esto qué quiere decir pues que cuando se cree en las partículas se les va a preguntar por su género y lo que ve y lo que sí yo creo que ayer me pasó lo mismo lo que os hacía por el whatsapp entonces las partículas se van a crear con el género cero o con el género uno y seis que sepas lo mismo y no sé por qué entonces simplemente les voy a decir si la partícula desde género 0 pues en ese caso de coloreadas del color rojo y si la partículas del color 1 por defecto pues de coloreadas de color azul lo que ocurre por tanto es que fijaos que cuando se crean las partículas pues hay algunas de color rojo y hay otras de color azul de hecho cuando creó nuevas partículas así cuidado mira cuando él creó nuevas partículas tengo que decirles también os acordáis que cuando pulsar el botón derecho creaba una nueva partícula pues tengo que decirles también cuando el pulso un botón derecho vamos a ver dónde estás cuando el pulso botón derecho pues estás aquí y le digo género de número es igual a esto de aquí por tanto ahora se crean partículas de ambos géneros e incluso cuando yo voy creando nuevas partículas pues se van creando cada una con un género diferente aleatoriamente ahora quiero algo haber complejo en el sentido de que lo que quiero es en primer lugar asignar una vida es decir un parámetro de vida a los personajes la edad del personaje entonces una vez que hayamos asignado la vida no la energía sino la vida lo que quiero es poder decirle a un personaje que nazca que viva que muera y cuando esté en una en un cierto intervalo de edad que busque a un miembro del otro género para reproducirse esa es la cuestión esa es justo la cuestión ahora veremos en un primer momento lo que vamos a hacer es decirle que cuando esté en ese intervalo de edad le dé prioridad a la reproducción pero claro tampoco puede descuidar su alimentación así que vamos a ver qué pasa porque probablemente lo primero que ocurrirá en la primera pasada es que se extingan intentando reproducirse vale así que por tanto ahora lo que voy a hacer es decir condiciones iniciales digo bar edad es igual a new array y por tanto cuando declaró las condiciones iniciales de los peces digo mira de iu y digo todos empiezan igual a cero todos empiezan con vida cero por tanto ahora para cada uno de los peces vamos a verlo ahí para cada uno de los peces vamos a ver dibujó los peces aquí y para cada uno de los peces digo edad más igual a 0.01 por ejemplo entonces ahora dejadme poner un poco de texto donde voy a decir su energía es igual a la energía y la vida es igual a la vida esto será menos 5 vamos a verlo así que aguarda y recargo y si no ha generado ningún error que parece que sí que ha generado vamos a ver por qué consola miráis notifight en la línea 53 entonces en la línea 53 vida vale posiciones iniciales esa edad madre mía claro pues le digo edad entonces vengo aquí y cuando se dibuja el perfil o edad y luego tengo vida lo he nombrado cada vez de una manera así que guardo y recargo el texto no deberían porque yo aquí he dicho menos 10 y aquí le digo menos 5 que igual tétrico menos 0 para que tengan espacio digamos para que no se machaque no el texto sólo no sí si queréis lo que podemos hacer es quitar el film está el esté transparente dejarlo en clear rect y ya está y así no tienen el efecto de transparencia madrid ahora porque esa es naranja vale bueno pues esto no me cuadra mucho ahora luego veremos por qué sale esto si lo único que he hecho es quitar ese file style donde ayer pusimos el rg vea a 0.1 no creo porque bueno sí sí que creo muy bien porque esto es el file está el pero este es el fill recto y el último color que se ve que había marcado en el naranja lo cual sí que es eso y lo que hago es activar el clear rect vale con lo cual con el clear rect lo que hacemos es eliminar el efecto este y luego también tener en cuenta que mi lupa ayer lo puse a cero por tanto si queréis lo pongo a 50 y así pues podemos ver el juego ocurrir un poco más lento y así podemos ver mejor qué es lo que ocurre con la energía y con la vida así que bueno vamos viendo como las partículas van cumpliendo xx años y lo que voy a hacer en este caso lo que voy a hacer en este caso es que la partícula digamos viva hasta por ejemplo 100 años fijaos que en lo que llevamos jugando la partícula ya ha cumplido cinco años y eso que esta vez el helado por tanto lo que voy a hacer es poner por aquí en alguna parte lo siguiente vamos a ver por aquí por ejemplo donde pongo dibujó los peces os digo edad de y es mayor que dejadme poner 20 ahora para probarlo luego pondremos 100 entonces digo activo de i es igual a 0 es decir la partícula ya no está activa madre mía pero creo que era activo déjame que te lo diga no era activo entonces activo de y es igual a cero sí y es más lo que voy a hacer es que muera a los cinco porque es que si no aún con 20 voy a tener que esperar mucho entonces guarde recargo porque fijaos que ahora sí va a tardar un poquito en llegar a 5 y simplemente lo que quiero comprobar es que todas las partículas en cuanto llegan a 5 estamos por 2 pues desaparecen por lo cual lo que va a tener que ocurrir estamos con tres con 839 ahora iremos hacia cinco y en cuanto llegue a cinco las partículas efectivamente black desaparecen bien pues lo que tenemos que hacer en este caso es especificar que antes de que la partícula haya muerto pues tiene que haberse multiplicado la edad vamos a dejarlo si queréis a 100 a 50 20 lo que queráis y ahora permitidme que empiezo ya tener aquí bastante código así que voy a comentarlo para que quede más claro como tengo unas cuantas líneas voy a empezar a escribir un poco todo lo que acabo de hacer en cada una de las líneas esto es dibujo los peces pues esto va a ser el dibujo realmente repaso todo aquello que tiene que ver con el jugador y digo cada vez que paso por aquí le sumo un poco de vida y esto es la edad esto es caducidad de la partícula cuando supera la caducidad se desactiva a partir de aquí digo y todo esto bloque de código pasa sólo si la partícula esta vida porque fijaos que es univ si activo es igual a 1 entonces pasa todo lo que hay adentro con esta línea recordado que lo que estaba haciendo es redondear rebombeo la energía para quitar de finales a partir de aquí inició una línea y en este caso lo que hago es que coloreo según el género de la partícula ahí lo tenemos por más que y claro cuando llegan a esa edad claro así que la siguiente parte digo específico los parámetros relleno y color del objeto y lo dibujo y esto es todo de aquí todo esto de aquí todo este bloque a continuación a medida que pasa el tiempo la partícula va perdiendo energía cuando la partícula ha perdido demasiada energía se desactiva y estos son ayudantes de texto para informarme de los parámetros de la partícula que es contexto feel style de color negro y dibujarla y dibujar la ub como veis por tanto una pequeña ayudita en texto para que sepáis correctamente qué es lo que hace este bloque de texto porque fijaos que cada vez que paso por aquí cada vez que paso por aquí pues y lo que ocurre es que al final hacemos un montón de operaciones el juego que era sencillo pues poco a poco está empezando a dejar de serlo así que viene bien de vez en cuando para en un momento echar la vista atrás y decidir a ver vamos a comentar todo el código que hemos hecho para que cuando lo re paséis pues sepáis perfectamente qué hace cada línea y por qué lo hace y cómo lo hace a partir de aquí y por tanto fijaos que digo sea activo es igual a 1 tengo que especificar qué es lo que ocurre cuando la partícula vamos a verlo número comida vale aquí lo que voy a hacer ahora aquí y bueno a ver vale bueno pues fijaos mirad tengo aquí arriba este bucle foro el con soul lo voy a quitar y todo esto que tengo aquí realmente es el cálculo de la distancia entre las partículas y la comida pues yo lo que voy a hacer es lo siguiente atención mira todo esto le digo vida perdona edad una cosa y un segundo voy a crear una variable al límite de edad es igual voy a poner 50 entonces con esto lo que voy a hacer en cada una de las partículas mirad es que les voy a decir aquí en la muerte digo sí edad es mayor a límite edad y por esto en lugar de poner 50 como número local lo que hago es poner una variable límite de edad y esto lo hago por lo siguiente porque si ahora digo si edad es menor a límite edad por 0.2 y también es cierto o también es cierto mejor dicho qué edad es mayor qué límite edad por 0.8 solo en ese caso cuidado que aquí hay que poner correctamente esta llave fijaos que esa llave va desde aquí hasta aquí ahora todo ese código se va a ejecutar sólo si la edad está al 20 es menor que el 20% o es mayor que el 80% pongamos que la partícula vivir 100 años yo le digo desde cero años hasta veinte años el 20 por ciento de 100 años come desde 80 años hasta 100 años come pero desde 20 años hasta 80 años tenía 4 tiempo pues ahí sí ahora lo tocamos ahí se reproduce de momento no se reproduce de momento no hace nada por tanto lo que quiero que veáis en la pantalla es que recargó las partículas nacen las partículas no van a morir se van a quedar congeladas bueno sí claro exacto cuando se queden congeladas pues allá el poco tiempo morirán dejadme que haga el juego más rápido porque como ahora va lento vamos a verlo ahora seguir se cierran délfor afectivamente y ahí está bueno estaban en 50 con lo cual se quedan en 10 años y mirar cuando llegan cuando cumplen 10 años ahí se quedan y claro a ella luego se mueren y ya está efectivamente porque el límite edad lo había puesto 50 si lo ponemos 200 llegarán a 20 años si lo ponemos a 50 el 20% de 50 es 10 así que fijamos por tanto que cuando las partículas cumplen esa edad se quedan congeladas y mueren podemos limitar un poco más ese proceso entonces le puedo decir mira ese proceso se va a dar sólo cuando la partícula pues esté entre el 30% y el 50% por ejemplo así que limitamos más ese proceso el problema está en que las partículas ya tenían suficiente con sobrevivir como para que ahora encima les corte el suministro de energía vale por tanto lo que voy a hacer es que cada vez que comen una partícula pues energía es más igual a 10 vale para que en ese tiempo en el que las partículas no hacen nada pues a ver si pueden sobrevivir lo que ocurre ahora por tanto fijamos ahora se van muriendo se va muriendo es abriendo vale lo que ocurre ahora es que aquí en el código mirad le digo si edad está entre este límite y este límite en ese caso busca comida para escribirlo aquí si la edad está entre el límite inferior es menor realmente al revés si la edad es menor que el límite inferior y es superior que el límite superior en ese caso o superior o es superior en este caso la preocupación de la partícula es comer pero en caso contrario es decir en el caso else aquí els aquí abajo donde estaba el corchete puesto en elx digo en caso contrario la preocupación de la partícula es reproducirse así que lo primero que tenemos que hacer dentro de este bucle else es que cada partícula busquen al resto de partículas que cada partícula busca el resto de partículas como os podéis imaginar es otra vez un bucle foro pero no le pongáis y ponerle jota o ponerle así por ejemplo ponerle otro número otra letra formar h es igual a cero h es igual al número más y lo que quiero hacer ahora es simplemente vamos a hacerlo igual que al principio es dibujar líneas entre los candidatos lo que quiero es sacar líneas crear líneas entre cada uno de los elementos así que vamos a hacer esto vamos a ver aquí y digo pues mira verás contexto online with 0.1 contexto move to pues ahí estás todo esto lo copió todo esto lo pego y digo esto es entre 2 x de iu y posee x de h / post y de tipos y de h y lo que va a ocurrir en este caso es que cuando entré en ese caso es en este caso falso en caso contrario la preocupación la particular reproducirse lo primero que quiero es comprobar que se ven entre ellas que se localizan así que recargo y mirad en el momento en el que llegan a 10 años en este caso hace qué edad es ahora hay unos 15 años parece que era pero lo veis ahí lo que ocurre es que se ven soy capaz de decir vale cuando estáis comiendo pasáis de vosotros pasáis las unas de las otras pero en el momento en el que llegáis a esa edad lo que ocurre es que placas en este caso os buscáis decís vale me quiero reproducir quién se quiere reproducir cuidado además aquí debería decir lo siguiente pero muy bien no igual de bueno como quieras en tu juego quiero decir pero había habido que sea igual no depende del juego entonces yo dijo vamos a ver yo digo atención aquí dentro del foro mira aquí dentro del foro digo sí es cierto del género no es igual admiración igual al género vih y también es cierto qué vida de h todo esto lo voy a poner aquí querida h es mayor que límite vida al límite mira al límite de vida espera que te lo digo límite a la verdad límite por 0.3 y también es cierto que vida de h sí porque lo he cambiado aquí arriba mira le había puesto entre 0.3 y 0.5 o lo que digáis lo que sea cada uno lo que ponga límite de edad por 0.5 es decir la partícula y está en edad reproductiva pero la particular se también tiene que estarlo así que en este caso vamos a ver esto guarde recargo vemos ahí las partículas y cuando llegan a esa edad concreta mirad vamos a verlo error fatal y eso será la edad será posible tengo hay un cacao entonces edad y edad así que recargo otra vez tengo un cacao entre vida y edad vamos a verlo y placas y si todo ha ido bien fijaos como efectivamente las azules no se buscan entre ellas y las rojas no se buscan entre ellas dejadme que lo hago otra vez y lo vais a ver ahí como cuando llegan a cuando yo era 15 si os fijáis en las líneas dejadme si queréis que imprimo para que imprimo pantalla entonces imprimo pantalla para hacer un snapshot me voy a imágenes me voy a capturas me vengo aquí vista previa y fijaos como por ejemplo esta azul no tira línea al azul esa azul no tira línea azul pero todas las azules de la línea de la roja de la línea las azules pero la roja no tiene la línea a la otra roja por tanto pues bueno con esta pequeña estructura de control pues hemos sido capaces de que atención llamémosla así queréis macho y hembra de que todos los machos localicen a todas las hembras y que todas las hembras lo que dicen a todos los machos pero ahora no queremos eso lo que queremos ahora es que cada macho localicé a la hembra que tiene más cercana y cada hembra localiza el macho que tiene más cercano yo hasta ahora lo que tengo es que las partículas digamos en cuanto cumplen esa cierta edad pues se reconocen entre sí así que lo que quiero ahora como he hecho previamente no es realmente mirar que cada partícula busque al resto de partículas vamos a ver si no que cada partícula de atención busque a la partícula en edad de reproducción sea la más cercana una vez más acordaos que esto lo hicimos anteriormente con ese parámetro llamado distancia por tanto digo bar distancia es igual a 10.000 por ejemplo si distancia voy a ser distancia 2 para que no confundir con la distancia entonces yo ahora vengo aquí dentro vamos a ver formar lo que sea esto es localizado el mejor candidato dibujo la línea entonces lo que es la línea la tiró fuera y el form lo único que va a hacer como hemos hecho anteriormente por otra parte es localizar el mejor candidato entonces digo mira voy a copiar un poquito de código aquí en este código de hecho que voy digo sí más square route de la posición x de qué vih y ahí conseguiría y h y comida activa esto ya lo he puesto antes y energía es igual a eso realmente ya está y esto es igual a 1 bien atención mirando un momento y digo más punto por punto lo que sea es menor a distancia 2 porque estoy usando la variable distancia 2 para no confundir con la otra distancia pues en ese caso digo distancia 2 es igual a esto es igual a esa fórmula es la misma de antes normal a esa fórmula de ley distancia xy distancia y nada bueno si las necesitas los necesito distancia x2 distancia griega 2 2x pons y de h entonces digo índice es igual a vamos a ver a jota no índice es igual a h así que yo vengo aquí y digo pos x de índice y pos x de índice y ahora dejadme que mientras habéis copiando comenté cada una de las líneas para que sepáis qué es lo que he hecho introduzco una distancia inicial demasiado grande repaso cada una de las partículas compruebo que la partícula sea candidata a atención mirada una cosa he dicho que el género no sea igual al género de la partícula y que la edad esté entre 0.3 y 0.5 y qué activo de h sea igual a 1 y que la partícula esté activa no vaya a querer procrear con una partícula muerta que va a ser que no claro evidentemente hay que tenerlo en cuenta bien entonces digo si la distancia es menor que la anterior entonces en ese caso actualizo la distancia esto creo que lo usábamos luego para algo creo distancia x creo distancia y si ya me acuerdo le digo al programa quién es el ganador tienes el índice ganador para qué para localizado el mejor candidato dibujo la línea usando el índice del ganador europa no eliminado por tanto guardo y recargo vamos a verlo un segundo a ver si funciona lo pongo aquí recargó vamos a verlo de momento no van a buscarse entre ellas lo único que quiero es que dibujen una línea y habérsela dibujan y dibujar una línea captura de pantalla y aunque luego se muera la partícula pues me da igual la parte que viene ahora en principio podríamos decir que es un poco difícil pero sin embargo lo que voy a hacer es copiar y pegar código del que ya tenemos de ayer entonces mira lo que hago es que vamos a pegar y esta número comida ahí está mira en cuanto a la distancia x lo que hacemos es qué distancia x es igual al absoluto entre estos dos esto ya lo tengo yo no tengo luego dibujo la línea ahí está y el mismo bucle que hiciste el otro día 'josé luis' para acortar las distancias pues es el que voy a usar hoy vamos a ver un segundo mira de hecho voy a hacer esto atención me copió todo esto y hago lo siguiente ahora actualizo la posición de las partículas para que se busquen copio y pego ese código y digo sí pos x es menor apos xd que posee xd h pues en ese caso pues x es igual a distancia x partido 10 vale distancia de x2 porque fijaos que es distancia x2 y de hecho aquí voy a poner más distancia x2 es igual a 10.000 y va a distancia y dos es igual a 10.000 entonces ahora vengo y digo 2x de h instancia x2 pons y de h pons y vh y distancia y dos de distancia agregados y ahora al final digo si la distancia vh porque a dedo índice sí señor de índice índice el índice ahí está entonces vengo aquí y digo si esto es así y de índice y es menor que tres es decir si las partículas se han acercado a una distancia menor que tres unidades pues a procrear así que vengo aquí y digo si la distancia entre las partículas es pequeña crean nuevas partículas así que digo lo siguiente crear una nueva partícula momento en un segundo que voy a copiar el código crear una nueva partícula es esto de aquí voy a empezar con esto que voy hay número más lo estoy haciendo es crear una nueva partícula en la matriz cliente x no voy a decir por equis y porsche y day energía 10 activo número género está puesto un segundo déjame probarlo antes de copiarlo así que recargamos a ver qué pasa tengo miedo y la vida a ver qué pasa ahora cuando se vuelvan 15 vamos a ver por qué a bien se ha producido un error a ver por qué pues porque mira ha pasado lo que os decía antes en el momento en el que se tocan se empieza a tocar demasiado entonces claro empiezan a tener tanta descendencia que se bloquea el programa se desborda la matriz de hecho igual mira de un segundo igual podemos ver si miramos el rendimiento de la memoria déjame hacer un segundo una cosa déjame cerrar del todo veis ahí y yo creo que veremos la rama 302 a la rama rahm a 2 con 1 yo creo que veremos que en el momento en el que pase eso pico hay pico toma ya toma hasta que pueda eso es lo que he pasado 4 gigas me ha usado el navegador que te parece bueno 4 gb era usado dos personas dos gigas el navegador si ha llegado a 4 pues que ya estaba usando dos personas limpiamente dos gigas bien pues déjame hacer una cosa y ya os dejo copiar simplemente lo que tenemos que hacer es decir a la particular y cuando ya haya procreado no sigas procreando así que mira atención en condiciones iniciales de los peces le digo bar pero crea es igual a new rave en la declaración inicial le digo procrea de iu es igual a 1 como diciendo es igual a cierto esto cuidado porque lo tengo que poner también en las nuevas partículas que creo así que cuando hago clic muy bien posiciones iniciales y crear una nueva partícula y también evidentemente cuando creo particular aquí pero créame número aquí lo mismo un segundo procrear el número entonces mirada atención lo que voy a hacer es lo siguiente cuando las partículas digamos que han procreado mírame todos la pantalla crean nuevas partículas y en ese caso digo y en ese caso digo pero creo que es igual a cero pero crea de índice es igual a 0 como diciendo las dos que han intervenido en la reproducción ya está ya no se puede reproducir y haber y por tanto ahora cuando las partículas se buscan entre ellas les tengo que decir sin género no es igual al género y edad es igual al límite edad y límite de edad es igual al límite edad y todo esto y activos igual a 1 y procrear vi -sí procrea h es igual a 1 y aquí arriba le digo y aquí arriba le dijo si edad es igual a esto el segundo que ponga esto entre paréntesis ayudaros lo paso y también es cierto que procrear es igual a pero vale un segundo si nada es menor que esto o bien es cierto que procrean es igual a eso claro bien vamos a ver si era desigual a eso es menor que eso es menor que eso va a llevar a morir es cierto vale otro bloque de condiciones ya se lo he dicho eso he dicho pero lo que quiero es que cuando una partícula esté entre esa edad espera un segundo y digo cuando una partícula tiene más de esa edad y menos de eso y menos de esa edad y procrear es igual a cero en ese caso come o bien cuando es pequeña o bien cuando es está en edad pero procrear segura 0 en ese caso como vamos a probarlo vale entonces vamos a ver qué es lo que va a pasar a 15 vuelva a tener miedo vale parece que sí el problema de sant generado nuevas partículas no lo he visto no veo ninguna no creo que se han muerto vamos a verlo también te digo que se ha creado una cada vez que ha ocurrido eso vamos a parís wow y parece que se ha vuelto a colgar si parece que la memoria ram ha vuelto a desbordar no sé ahora mismo porque vale perfecto vamos a verlo entonces para solucionar el problema de la extinción lo que vamos a hacer es que cuando se crea una nueva partícula a cuidado luego también te digo procrear y que se procrea del número en la matriz número otro error pero mira fijaos cuando si en procrear tenía procrear de número así si es verdad a la partícula original así que simplemente este código de crear una nueva partícula lo voy a encapsular dentro de un bucle foro y que va a hacer el bucle for pues el buque informa decir hoy en el que es una crea yo que sé 10 5 lo que queráis si yo que sé entonces digo por z barxeta es igual a 1 z es menor que 5 por ejemplo son 4 partículas beta más todo este bloque de código lo meto dentro del bucle for y eso quiere decir que cada vez que crean nuevas partículas va a crear 5 partículas de golpe así que recargamos vamos a verlo van a ser partículas muy grandes porque recordad que les he dado una energía inicial muy grande y vamos a verlo vida ahora encontrará 15 bien ahí lo tenemos vale y si están todas ahí pegadas pero de hecho se nota que hay varias por el contorno de la línea así que ahora mirada ayayay persona parecer ahora sí no creo eso falta comida le metemos más otra cosa que os digo otra cosa que os digo mirad para que no se creen todas en el mismo sitio más bien esto va a llevar a la superpoblación vale sí muy bien cuánta gente bien entonces lo que voy a hacer mirad atención vale si eso puede pasar un segundo irak a una cosa es que le voy a decir posición número es igual a post x más y más punto random es decir que cada partícula cuando nazca que no nazca en la misma posición porque no nacen todas a la vez sino más punto random por 10 menos 5 y aquí lo mismo y la vida inicial vas a ver a poner a 20 yo que sé vamos a probar vamos a verlo incluso ahora igual le digo un poco más de diferencia vamos a verlo así que cuando lleguen ahora a 15 ahí vemos como han aparecido un montón en sitios diferentes y vamos a ver ahora y cuando se reproducen salen un montón de partículas voy a decirle 50 menos 25 para que se vea mejor en qué posiciones nacen y vamos a verlo perfecto y se ve perfectamente cómo se multiplican así que bueno ahora es perfecto de hecho lo que me extraña es que bueno si están en situación de ahora me voy quedando sin comida pero lo que ocurre siempre que me quedo sin comida pues es que no todos pueden sobrevivir desgraciadamente así que fijaos cómo bueno esa es una cuestión muy buena que ahora mismo no sé qué pasaría con esto pero si eso sería problemático bien enfermedad general el texto recordad que lo hemos puesto simplemente para poder diagnosticar si queréis cuando tengamos claro que lo que estaba ocurriendo es lo que toca no os digo que elimines el texto porque en algún momento os puede venir bien pero lo que sí que os digo es que podéis putear temporalmente las líneas de texto y así nos quedamos únicamente con las partículas y luego por otra parte pues el juego va a funcionar un poco más ruido esto lo tengo en feroz creo y vale vamos allá hoy la clase va a estar dividida en dos mitades una super necesaria que es el trabajo con el splice con matrices y otras que os va a gustar mucho que es una parte un poco dedicada reservada al marketing digital es decir no basta con hacer un juego sino que hay que saber cómo promocionarlo como distribuirlo como publicitar lo cómo hacer que en definitiva a la gente le llegue la noticia de que está ese juego para descarga bien pero vamos primero con la primera parte que se les place entonces mirad para ello voy a ir a por ejemplo pues bueno voy a ir a sham voy a ir a hp docs voy a crear una carpeta llamada splice voy a arrancar el control panel realmente de lo que voy a hablar en esta primera parte de la clase es de javascript y duro con lo cual pues bueno teóricamente tampoco haría falta el sap pero así estamos dentro de sampués porque no entonces atención lo que voy a hacer en este caso es que dentro de hp docs voy a copiar por alguna parte de la librería de jquery me voy a la carpeta splice y dentro de splice voy a crear un nuevo archivo un nuevo documento de texto llamado index html el cual voy a abrir dentro de heavy o dentro de la tapa plus o dentro del programa que queráis para editar código y le voy a poner el siguiente código ya sabéis realmente la plantilla de siempre de crear un documento html y cargarle los atributos básicos de trabajo así que html por aquí un head por aquí un body por aquí dentro del head un script src es igual a jquery js y un pequeño script que va a tener la estructura que ya sabéis que dice que cuando el documento está preparado ejecutamos una función que va a tener el siguiente contenido dentro del body voy a hacer un 'tablet' simplemente como representación gráfica un béisbol por aquí con un border es igual a 1 y por tanto ahora y por tanto ahora voy a ejecutar este código dentro de este código voy a poner localhost splice de momento no tenemos nada si os fijáis tengo un puntito es la tabla que acabo de crear que está vacía vale por tanto es normal que tenga un puntito y ahora voy a decir bar colección es igual a nada ya sabéis sin acento evidentemente porque es el nombre de una variable así que lo que quiero hacer ahora es decir que colección ya no es una variable sino que es una matriz y quiero insertar contenido dentro de esta matriz dentro de esta colección y claro cuidado por eso no le digo que es igual a comillas sino que realmente es igual al niño a rey así que yo ahora le digo colección de cero es igual a jorge colección de uno es igual a juan colección en el índice 2 es igual a javier colección en el índice 3 es igual a jaime y por último colección en el índice 4 es igual a jose con esto por tanto lo que he hecho es en primer lugar declarar que colección va a ser una colección un array un arreglo de elementos mientras que a continuación dentro de la función ready lo que he hecho es introducir nuevos valores dentro de esa colección por tanto simplemente lo que quiero ahora es verlo en pantalla por tanto ahora para verlo en pantalla digo pues bueno bar y es igual a cero y es menor qué colección punto en la longitud de la colección y más hago un pequeño bucle for que va a recorrer uno a uno de los elementos de la matriz y digo en la tabla en la etiqueta llamada table quiero app en lo siguiente quiero aprendiz ar una fila de la tabla qué va a decir cuidado con las aperturas y los cierres de ustedes que es muy fácil equivocarse ahí qué va a decir y colección de ella colección de voy a hacer esto un poco más grande para que podáis ver la línea completa ay voy a hacer el ordenador más pequeño porque esta mañana tampoco me hace falta tanta dimensión pone en función pues entonces está mal tiene que poner funk son efectivamente muy bien perfecto con lo cual si todo va bien y ahora os dejo un par de minutos para que acabes de copiar este código si todo va bien yo lo que estoy haciendo en primer lugar es declarar una matriz estoy después de declarar la matriz poniendo elementos dentro de la matriz y por último visualmente para que veáis claro de qué va este ejercicio lo que estoy haciendo es devolver el contenido de la matriz dentro de esa tabla para que visualmente podáis ver bien qué es lo que tiene esa tabla ahí dentro ahora por tanto supongamos que en un momento dado no me interesa tener tantos elementos en la matriz que estamos viendo en este juego de vida artificial pues que si cada equis tiempo se van creando comidas digamos y cada equis tiempo se van creando nuevos personajes al final eso como comentábamos el otro día en cuanto a perfilado de una aplicación es el patrón característico de una aplicación que cada vez va a gastar más memoria y las aplicaciones que creaba les gastan más memoria suelen tener una gráfica de memoria creciente y lo peor es que cuando llega un punto en que la memoria consumida excede a la memoria disponible es una aplicación que está condenada a colgarse así que si en definitiva tenemos una circunstancia en la que cada vez están apareciendo nuevos elementos en escena y además se nos da la circunstancia de que tenemos elementos de juego de personaje es decir personajes en la escena que se mueren y tenemos también comida que en cuanto se la come un personaje debe dejar de existir pues vamos a ver cómo retirar elementos de esa matriz lo que quiero contaros por tanto en esta primera parte de la clase de atención es que ahora llego al código digo y ahora eliminó un miembro de la matriz así que lo que voy a hacer es decir lo siguiente fijaos colección puntos place y dentro de splice lo que voy a hacer es usar dos parámetros uno el índice a partir del cual vamos a empezar a operar y dos cuando se índices a partir de ahí nos queremos cargar entonces yo digo pongo 2,0 y ahora lo que voy a hacer es volver a poner lo siguiente voy a decir table dejadme que ponga aquí vacío la tabla y digo table html y pongo nada pongo grupo vacío simplemente para comprobar que se vacía la tabla bien pues si ahora recargo fijaos que estoy poblando la tabla realizando un splice y vaciando la tabla de nuevo así que guardo y recargo vamos a ver lo guardo aquí recargo aquí y es normal que la tabla parezca vacía vale porque la he poblado pero luego a renglón seguido la he vaciado ahora quiero repetir este mismo código tal cual vuelvo a poblar la tabla guardo y recargo y en este caso fijaos que he dicho lo siguiente siguen estando jorge juan javier jaime dijo se porque en el splice es seleccionado el índice de 0 el lince de 2 predicho a partir de ahí cuantos me quiero cargar 0 y como le he dicho que me quiero cargar 0 no se ha cargado a nadie pero si yo ahora vengo colección punto splice 2 1 recargo la pantalla ahí va donde ha ido javier no está si efectivamente me coge el índice de 2 que era javier y claro exacto porque el 0 digamos cuenta como primer índice simplemente que sepáis aunque lo más normal es usar una eliminación de un índice pero simplemente que sepáis que podría eliminar dos índices a la vez en este caso el índice 2 a partir del que ha empezado y el siguiente que es el índice 3 por tanto ahora guardo y recargo y veis que me he cargado a javier y también me cargan la jaime este es por tanto el uso voy a dejarlo a uno que es como realmente lo quería el uso de splice pero lo más importante es que veáis que esta tabla que he hecho donde en la primera casilla he puesto la y que es el índice y en la segunda casilla de puesto la corrección de ahí lo que hace es eliminar la matriz y reordenar los índices os habéis dado cuenta ha vaciado el número dos que era javier y automáticamente le ha dado el índice número dos a jaime y el índice número tres será la roja a jose esto es muy importante porque cuando va a ser una matriz no me serviría de nada que yo eliminará el valor de la matriz pero no se asignará el índice porque la matriz seguiría siendo infinita yo no sólo quiere vaciar quiero acortar la matriz quiero que sea lo más corta posible porque pues porque al final va a haber en este caso un inevitable bucle foro entonces en ese bucle for ya que tienes que recorrer por lo menos evita t recorrer aquellos elementos que ya no existen a partir de ella esto puede variar mucho el cómo se trata dentro de un juego pero la idea por tanto es no cargar en memoria sacar de los bucles por dentro de que una estrategia es eliminar tantos por como puedas se hace falta agrupar otra estrategia es los bucles forma y dimensionales juntarlos en un bucle for unidimensional pero son más difíciles de concebir vale siempre vamos a tener lo mismo y es que las mejoras en eficiencia son empeoramientos desde el punto de vista de nosotros entender el código pero si al final hace que el programa funcione mejor pues si es necesario se hace pues una veces a eliminar bucles for agrupar buques por quitar dimensiones a los bucles por otra es cuando te encuentras un bucle intentar que ese bucle por todos los medios sólo bucle lo estrictamente necesario y no haga bucle por aquellos elementos donde sabes que para que le preguntas a los elementos y realmente te va a decir que no aunque te diga que no el programa finalmente hace un bucle y otra de las muchas estrategias que existen es lo que te decía no hacer bucles cada iteración del juego sino solo ejecutar el juego solo ejecutar el bucle cuando algo cambiar el juego se acordáis hace unas cuantas semanas ya hicimos un pequeño ejercicio y el que os recordáis le pedíamos a la base de datos algo solo cuando detectaba que algo había cambiado en la base de datos acordáis repasarlos encuentra los vídeos entonces lo que hacíamos era en lugar de vomitar me la base de datos 25 veces por segundo lo que hacíamos era mirar la fecha del último cambio y si la fecha del último cambio era diferencia ayer nos empezamos a acordar era diferente a nuestra última fecha sólo entonces tráeme los datos de la base de datos efectivamente entonces yo no acordaba en qué ejercicio era pero recordaba lo que habíamos hecho pero esa misma técnica que aprendimos en el chat es la que se puede aplicar a prácticamente cualquier otro juego porque la filosofía de esa técnica es no pidas algo y repase es un bucle for y reparar es una matriz si tienes la constancia objetiva de que es que ese but in fort no ha cambiado esa matriz no ha cambiado sólo cuando sepas por los medios que sea que esa matriz ha cambiado es cuando tienes que volver a ejecutarse un clifford así que o sea que voy a decir cinco o seis estrategias en un momento dado para usarlas todas juntas pero hay muchas más simplemente deciros que hasta ahora por ejemplo cuando hacemos un bucle for os preguntáis bueno pero esto realmente en un videojuego real sería tal cual así depende por una parte y por otra parte no por una parte sí en cuanto a que al final es de alguna parte del juego tiene que haber un repaso de una matriz o una estructura de datos similar pero por otra parte no en cuanto a que suelen ser más complejas de lo que hasta ahora en clase también lo que suelo decir es cuando tenemos por ejemplo que hacer una que es repasar una matriz bidimensional un rectángulo pues yo os digo doble foro por qué pues porque así entendéis que el primer bucle for es para la equis y el segundo bucle for es para la y es decir lo que me importa ahora mismo está más adelante no me importará tanto pero lo que importa ahora mismo es que esto sea fácil de concebir ahora estaríamos en un juego real yo diría dos bucle for no eso hay que resumir en un bucle foro con lo cual le tenéis que dar una idea a cada elemento de la matriz rectangular y hacer aquello que hemos hecho alguna vez de decir para detectar el elemento que tienes arriba porque cuando tengo un índice único unidimensional no madrid rectangular es decir drive dejadme demostrarlo gráficamente quien es windows 10 yo entonces le digo new google sí y me hago una tabla imagínate de cinco por cinco para él si efectivamente muy bien ahí lo tienes entonces digo cinco por cinco déjame marcar que sólo quiero esa parte de ahí vale entonces claro yo os puedo decir mira un bucle for de cinco y luego dentro un bucle for de cinco eso es fácil de comprender pero muy ineficiente con lo cual en un juego real yo os diría 1 2 3 6 7 8 9 y 10 11 12 13 14 y 15 16 17 18 19 y 20 y 21 22 23 24 y 25 y os diría apoye un índice único a cada uno de los elementos con lo cual esto facilita las cosas en cuanto a que cuando haga un bucle for solo tengo que hacer un único bucle for no uno que va a deu de 0 a 5 de 15 y otro que va de 1 a 5 sino un único núcleo foro que va de 1 a 25 entonces qué pasa estoy en 13 y quiero averiguar el elemento de la derecha 13 + 1 y el 14 qué pasa si quiero averiguar el elemento que está a la izquierda 13 - 1 pero qué pasa si quiero averiguar el elemento que está arriba 13 - la longitud de la matriz horizontal con lo cual yo sé que 13 le quito 5 y me queda 8 y qué pasa si quiero averiguar el elemento debajo claro y qué pasa si quiere averiguar el elemento debajo a la derecha pues que digo vale bajo es 5 a la derecha es 1 luego le sumó un 6 y 13 más 6 19 quiere decir que esta es una manera mucho más eficiente de trabajar pero también te obliga a ti como un programador a hacer más cálculos mentales mientras que si estoy en una matriz bidimensional es decir un four por aquí y un fuera por aquí digo uy abajo la derecha es muy fácil es x más 1 y digamos 1 más fácil para ti pero menos eficiente para el juego vale por tanto en cuanto a eficiencia en programador se suele dar muchas veces arregla no digo siempre pero se le dará esa regla y es que cuanto más eficiente sea una aplicación más compleja es de comprender desde el punto de vista de ver el código y saber lo que está pasando pero bueno por eso digo que hasta ahora con que el juego funcione me vale con que el juego funcione y que vosotros veis el código y digáis vale sé lo que está ocurriendo en ese código cuando tenemos unos cuantos meses más y yo ya pueda decir a ver ya se supone que tenés que ver lo que aparezca en el código vale con lo cual podemos complicar el código y os lo puedo exigir esa complicación de código yo no la puedo exigir el primero el tercer mes porque me diréis lista prende todavía cómo quieres que comprenda eso pero sí al mes cinco o seis sí que diría hombre ahora ya demostró en cuanto al bucle con lo cual ya lo podemos complicar y en ese momento podremos hacer que la aplicación sea más eficiente mediante la aplicación de estas cinco o seis técnicas que os he dicho muchas otras más pero finalmente la idea es que el repaso en alguna parte del videojuego de empezar ya del juego evidentemente pero el repaso de un cierto elementos de un cierto número de matrices de elementos de matriz para ver qué haces con cada elemento de matriz es inevitable lo que haremos es optimizarlo eso sí bueno todo esto aplicado evidentemente a lo que estamos haciendo mirad josé vicente carta la código es un cambio esta fin de semana a ver sí a ver si no ha tenido vale pues se traduce en esto en que yo al final tengo un juego donde hay una serie de elementos hay comida que se va creando dinámicamente pero se va eliminando dinámicamente también con lo cual al final yo si dejo este juego funcional para siempre tendría una cantidad infinita de comida cuando yo digo cuando un personaje se come algo de comida para que seguir evaluando ese elemento de la matriz si es que sé que no va a servir para nada ese elemento está acordados digamos en el caso de la comida muerto comida en el caso del personaje muerto el personaje lo mismo los personajes cuando cumplen cierta edad desaparecen para que seguir preguntando para qué seguir manteniendo ese personaje en la matriz si yo realmente sé que ese personaje no está bueno pues lo que hecho en este caso para mantener la eficiencia en el código y para hacer que el juego se fijara en un ordenador 5 horas funcionando y no se va a colgar entonces lo que he hecho por tanto es lo siguiente mirad si os fijáis aquí comida x splice lo que digo es si esto de aquí el square route es menor que 3 a que equivalía esto estos acordáis que era la ecuación de la distancia entre dos puntos y esto era menor que 3 así que os acordáis que decía número comida menos energía de iu es igual a 3 que estaba haciendo en este caso por lo que estaba haciendo es la partícula te la has comido el índice de la comida es igual a cero comida activa es igual a cero esa línea no la he quitado la podría quitar para ganar un pelín más de rendimiento pero ser todo lo que he hecho es esto es decir bueno pues comida x splice elimina quita esa comida de la matriz comida y splice evidentemente se quitó la equis tengo que quitarla y si quito la y tengo que quitar comida activa y tengo evitar ángulo comida es decir tengo que quitar todos los elementos correspondientes todas las propiedades correspondientes a ese número de la matriz pero por ejemplo si os fijáis cuando el personaje muere aquí le digo caducidad de la partícula cuando supera la caducidad se desactiva entonces lo que he hecho es decir vale activo de i es igual a cero rodrigo activo punto slice posición x splice posición y splice energía de splice es decir estoy cogiendo esa partícula y la estoy retirando de todas las matrices de la matriz de posición x de la matriz posición y de la matriz de energía de la matriz de género de la matriz de edad de lamadrid el límite de edad y de la matriz de procrear por tanto ese es un poco la idea la aplicación de detrás de este concepto donde la idea es retirar todos aquellos elementos que no uses para que el juego digamos su única limitación es que se haga una matriz muy grande pues simplemente el programa no pueda con ella pero ya es la limitación de hardware ya no sea una limitación de estas malgastando memoria y estás manteniendo elementos en la matriz que realmente ya no tienes porqué mantener porque no vas a hacer nada con ellos en definitiva lo que estamos haciendo es una limpieza y una optimización en cada bucle del juego de la matriz actual bien qué pasaría si eliminar a la equis y no eliminará el resto de elementos ten en cuenta que en este caso por ilustrar una vez más yo digo índices uno dos tres cuatro cinco seis siete ocho nueve y diez y yo aquí realmente si inserto un nuevo elemento de la matriz tengo x y mira era y lo que sea entonces yo aquí tengo una serie de elementos nos voy a inventar y tengo una serie de elementos por aquí me los voy a inventar tengo pues un 110 dependiendo de cada uno de los elementos claro imagínate que yo digo quiero el x del índice f 6 y lo quiero eliminar pero eliminó la x si no eliminó la y el problema está en que yo eliminaría esto fíjate que si te va con 88 va con 69 con 5 y 5.4 pero láser splice como veis el ejercicio anterior lo que haría es correr hacia arriba todos estos elementos con lo cual la matriz el juego funcionar seguiría funcionando pero la matriz sedes coordinaría porque las propiedades ya no cuadrarían entre sí y por tanto pasaría lo que ha dicho josé luís que en este caso probablemente el juego funcionaría pero vídeos de las partículas comenzarían a tele portarse porque se emprenderá confundir las x de unas partículas con las y de otras partículas vale por eso evidentemente al eliminar en este caso lo estamos haciendo con matrices más adelante lo haremos con objetos y cuando eliminemos un objetos acordáis de programación en todo objetos que volverá la programación lenta de objetos lo que nos permite es que cuando eliminó un objeto eliminó del tirón todas sus propiedades con el cual no me tengo por que preocupar de que la eliminación está sincronizada como sí que me tengo que preocupar ahora pero me tendré que preocupar por otras cosas vale por eso digo ahora con matrices más adelante lo haremos con objetos por ejemplo la pregunta de si se trabaja así en videojuegos con matrices y tal pues de la misma manera que nos estamos trabajando con matrices cuando yo tengo para una partícula posición x posición y yo digo me voy a liar con objetos con profesiones entre de objetos por dos atributos pues no porque es mucho más complejo el código se vuelve mucho más complejo digo matriz 0 matriz 2 ya tomada por saco pero también te digo que esto de que una partícula tenga posiciones de exposición y energía género esto en programación entre objetos aquí os recuerda recordar que un objeto tiene dos cosas atributos y lo otro era métodos esto se parece a atributos con lo cual yo digo ostras en el momento en el que tengo más de cinco o seis propiedades para cada partícula digo hombre esto se empieza a parecer atributos de un objeto si no antes una radio objetos desde luego que sí pero la idea es que cuando eliminó un objeto no tengo que decir y eliminó la equis y eliminó la i griega y eliminó no sé qué y con el sol y tercer eliminó todo y eliminó por probabilidades de error con lo cual yo ya veo este punto de evolución del juego y digo estoy igual sería cuestión de empezar pero de momento me lo puedo permitir porque como de momento sólo tengo atributos ahora si en un momento dado digo no es que una partícula puede atacar y otra puede defender que una partícula cada una de ellas pueda atacar y que otra podrá defender a quien suena a métodos con lo cual la idea por tanto es que yo empiezo un juego de la manera más sencilla que pueda usando cuantos menos recursos que pueda pero también el propio desarrollo del juego me va a llevar hacia diego buenos al final la partícula tiene atributos y tiene métodos pues esto ya no son matrices que estos son objetos vale y si os fijáis empezáis a repasar un poco los juegos que a los que juegan normalmente veréis que al final pues es muy normal es muy común que una partícula que un personaje en un juego pues tenga edad y tenga posición y puede atacar y tengan este arma o no tenga este arma y tengan estabilidad o no tenga estabilidad o sea de tipo francotirador o sea de tipo campero o sea de tipo marine o sea de tipo lo que sea vale por tanto esa es otra esto que estamos haciendo ahora trabajar con matrices veis que cada vez se está complicando más el rango con matrices para que pues para que dentro de unas pocas semanas cuando yo os diga oye tenemos ya que pasar a programación a objetos no digáis que rollo programación a objetos realmente lo diréis aprenderéis bueno es un rollo pero entiendo cuál es la utilidad entiendo qué exacto es un buen rollo con la evolución de la dificultad de nuestro juego es un rollo pero es necesario ese rollo porque nos va a complicar un poco la vida como programadores pero nos va a solucionar muchas de las cosas que nos encontramos cuando la partícula empieza a tener muchos atributos en la segunda parte de la clase de hoy quisiera hacer un poco un break y no empezar a hablar de parámetros tan técnicos como matrices variables y todo esto porque al final vamos a ver esto es lo que tenemos aquí en la pantalla lo que tenéis ahora mismo en la pantalla eso es un juego eso es realmente las tripas de un juego y entender al final el repaso de matrices la posición x ley y la trigonometría la unión de todos sus componentes son los que realmente hacen un juego y los gráficos evidentemente y el sonido pero si te centras demasiado en todo esto al final que es lo que acabas teniendo pues tienes un juego fabuloso perfecto acabado en el cajón de tu mesa y que hace un juego perfecto fabuloso y acabado en el cajón de tu mesa pues polvo vale con lo cual vosotros al final sois programadores no sois personas de marketing digital no sois los que vendes el juego pero os viene bien en cierto momento tener al menos unas nociones básicas de cuándo has acabado un juego cómo publicitarlo o cuando te estás creando un portafolio como publicitar te ate mismo entonces en esta media hora de la esta parte de práctica de esta parte teórica voy a explicaros los fundamentos el abc el pim-pam-pum el 123 del marketing digital entonces a partir de aquí os voy a decir que bueno explicar marketing digital no es fácil porque es como si a alguien de marketing digital le dijeras mira en media hora explica de programación y es más explícamelo con la regla a b y c que siempre yo pueda abrir cualquier página y probar un juego con abc a ver no exactamente porque cada juego ese programa de una manera diferente y cada juego tiene una diversidad diferente y tal pues lo mismo ocurre en sentido contrario y es que es difícil resumir todas las reglas que se pueden dar una campaña de marketing es decir todas las decisiones que se pueden tomar una campaña de marketing en una regla sabe dice porque realmente cada tipo de producto cada tipo de campaña cada tipo de usuario requiere una campaña de marketing diferente no entendéis pero ahora sí lo vamos a intentar vale por tanto voy a poner los tres reglas básicas para que entendáis cómo funciona el proceso de marketing en cualquier producto que quieras vender yo qué es lo que quiero vender un videojuego no así que yo he desarrollado un videojuego y quiero venderlo entre toda la maraña de acciones y reacciones que puede tener una campaña de marketing una manera de agruparlas en tres conceptos muy fácilmente entendibles es deciros que tenéis que atraer tenéis que retener y tenéis que convertir recordad se presente en estas palabras porque es una buena manera de empezar es como un marketing para tú mismo le ha parecido bien que es atraer a traer gente a dónde hacer tu juego vale muy bien ahí empezamos a hablar de cosas concretas entonces a traer efectivamente es atraer a gente a mi juego ahora hablaremos de por qué medios podeis atraer una vez que ha traído que pasa pues no pasa nada porque una vez que se ha traído tienes que convencer retener consiste en convencer al usuario y que es convertir eso convertir es convertir un usuario en euros eso es convertir vale entonces convertir interés a ver digo en dinero porque yo a veces voy un poco al grano pero el dinero puede no ser lo único que tú estás buscando puede ser la reputación puede ser la fama puede ser otras cosas pero digamos el dinero como un objetivo que puedes querer conseguir en un juego bastante entendible y bastante básico y bastante primario muy bien vamos a empezar a desarrollar cada una de estas tres áreas un momento entendáis un poco la estrategia lleva a la gente a tu juego una vez que la gente ha llegado a tu juego porque tú puedes atraer tú puedes hacer que la gente vaya a tu web o facebook o lo que sea hablamos de eso pero si cuando la gente llega ve el juego y dice por torsten asko estás atrayendo pero no está reteniendo y su la vez desea que la gente se preocupa mucho de atraer pero no de retener así que es retener sin atraer haz que tu juego sea no parezca al menos fantástico un grafismo muy bueno un poster tal unos gameplays que es todo eso pero no te has preocupado de atraer no estás llegando a la gente y dice si las ha traído la retenido pero te falta ese botón de compra que falta es de que la gente se quiera gastar el dinero en ese objeto en ese producto en ese videojuego en este caso en primer lugar lo que queremos es atraer a la gente a tu juego entonces yo a partir de aquí nos explicaría insisto muy fácilmente marketing 101 la teoría del penalti la teoría del penalti dice lo siguiente supongamos que tú eres un portero y te dedicas a parar a goles y sabes que has practicado el tirarte a la derecha más preciado lo has entrenado te queda bien cada vez bien has visto cómo caer bien no hacerte daño mirad efe la izquierda es que no has entrenado y encima es que el año pasado que esté mal te rompiste una costilla inevitablemente cada vez que te caes te duele ahí así que supongamos que tiene un penalti y te lo tiran por la izquierda tú qué haces tiras porque sabes que te vas a tirar sabes que vas a caer mal no lo has entrenado y sabes que te duele la costilla pero por lo menos tienes una oportunidad de parar el balón que padres a tener hacia la derecha que los fans del equipo de fútbol te van a machacar porque la vida por la derecha es un paquete él es disléxico futbolista vale pues la teoría del penalti esto que voy a explicar estaba 7 clarísimo verdad pues lo que dice es que no pongas tu juego en aquellos canales que tú quieras sino pon tu juego en aquellos canales dentro de efectos que tus usuarios realmente están ahí así que lo primero que tienes que hacer por tanto es saber qué canales de distribución tienes qué canales es que tuberías hay entre tú y el jugador final que tuberías hay bien muy bien plataformas de venta online la moraleja es tu sabes que tus usuarios están ahí están en esas plataformas tu juego tiene que estar en las plataformas que plataformas de venta online conocéis steam origen bueno no estamos enumerando y luego tenéis que evaluar una cual es la que realmente os conviene más porque también depende del tipo de juego que queráis igual está más en unas o en otras bien también tenemos por supuesto un google play en cuanto a móviles y la appstore y ahora muchas más el concepto de plataforma de venta online está claro que más canales hay facebook redes sociales dentro de las cuales tenemos facebook twiter bueno vamos yo te diría que si yo te diría que si por la sencilla razón de que instagram es una red social donde lo que predomina entre las imágenes el contenido visual y un juego es algo que puede obtener mucho contenido visual yo te digo si tienes una empresa de contabilidad de una gestoría pues lo que haces no es muy visual es muy útil pero no es muy visual pero si haces un videojuego que se puede prestar mucho que tengas cuenta de instagram así que sin problema podemos considerar que youtube es una red social basada en vídeos vimeo un montón de redes sociales el concepto de red social está claro que más canales de venta bien eso es porque es un poquito más difícil porque nadie conoce el juego nadie conoce la página con lo cual efectivamente en la página del juego es un canal pero yo no la pondría lo voy a dejar ahí y dejarme atraer pero la página del juego es algo más propio de retener al usuario que de atraer al usuario tú tienes que ir donde está la gente yo siempre suelo decir la gente está en facebook la gente está en twitter la gente no está en mi página web desgraciadamente a mí me gustaría que subirá pero no es tan vale así que esto no son los regionales tendríamos que estudiar más pero de momento dejadme plegar esto un segundo supongamos que ya hemos detectado los canales donde vamos a esta vez ya hemos detectado los canales donde están nuestros usuarios y nos ubicamos dentro de esos canales a partir de ahí que hacemos pues lo que hacemos es atraer al usuario hacia nuestro juego de hecho muchas veces las propias plataformas de venta online no hace falta que atraiga hacia tu página porque al probablemente online es suficiente para vender el juego en las redes sociales y a redes sociales realmente son simples a tractores son a tractores que atraen el usuario hacia donde tú quieras que venga el juego el usuario bien yo diría cuando vosotros pensando cómo hacerlo vosotros porque la gente lo va a hacer igual como nosotros voy a ser este vídeos de atraer vamos a dar un poco de retener cuando nosotros veis un juego en el lineal de una tienda game o en la play store o en steam o lo que sea qué es lo que hace decir este juego tiene que hablar me voy a comprar o qué es lo que os hace decidir no bien vamos a ver imágenes gameplay tráiler qué más de qué va claro evidentemente que el género sea compatible con tus intereses por supuesto que sí breaks me podéis decir de qué va un poco así resumidamente y de calle la ley del karma y entonces la ley de la ley del karma básicamente dice que de la misma manera que nosotros evaluamos la compra de un juego de esa misma manera la gente va a evaluar la compra del juego que nos hagáis por tanto fijaos que yo no suelo decir mucho la empatía poneros en el lugar del usuario pensad como un usuario porque de hecho vosotros al final también sois usuarios y pensad como vosotros se evaluaría jce la compra de un juego para vosotros hacer digamos ese material veréis y ya no estoy hablando de vosotros programadores sino vosotros como parte de un equipo de desarrollo de un juego si vosotros lo primero que evaluase es que el juego tenga imágenes chulas eso no es una imagen tura pues lo que os quiero decir al final hacer un juego es esto es indudable hacer un juego es eso más los gráficos más eventualmente la música pero la gente y que el juego funcione es esto nada más que eso que el juego esté en marcha en movimiento es eso pero que el juego se venda no es esto que el juego se venda como me estáis diciendo son las imágenes así que si hay que preocuparse que el código del juego funcione correctamente por supuesto que sí pero desde el punto de vista del marketing me estáis diciendo y nosotros a mí no lleva vosotros que lo primero son las imágenes es contar con imágenes hacer un póster hacer lo que sea por ejemplo ya ves tú ya lo que te voy a decir ayer me instalé el telesoft ians no pero es que el sábado sobrio el alumno y dije oye el boca a boca y qué juego bien así que me lo instale así que me fui a google place llama por la noche busqué clash of land y vi eso es lo primero que vi eso tiene que ver algo con cómo se juega luego realmente al juego no pero que te sugiere esa imagen guerra vale pues sigamos sí exacto bueno el hecho de ver a liam neeson dices madre mía si bien en ese juego yo tengo que jugar también vale es eso por supuestísimo que sí pero eso de entrada que eso es evidentemente cierto no lo piensas igual ya mí son bien tú tienes esta imagen vamos a dejar a liam neeson fuera que efectivamente le pagan por aparecer ahí el juego realmente así que el juego fuera así pero el juego no es realmente así el caso es que vamos a ver y yo me meto a descargar el crash softland y cuando yo me meto descargarlo yo sé que el juego no es así porque he visto un alumno jugar y no se juega así pero yo veo esa imagen pregunto y preguntarnos lo vosotros también y digo yo aquí me quieren timar porque yo sé que el juego no se juega así yo pienso eso no es curioso y quiero ver más imágenes porque veo este digo de repente de currado que tiene cuando yo digo es que eso realmente no nos representa un gameplay no es una captura pero lo que importa es lo que me comunica la imagen lo que realmente no sé si os acordáis o si existiese entonces pero en los 80 te comprabas juegos para ha mostrado para como total vamos a las portadas increíbles y luego la jugabilidad que te diré yo había un juego por ejemplo uno de miles de ejemplos que era el horno big game el horno era esto y la portada era ésta tú imagínate que la portada del juego era está ilustrada por un español por cierto y el juego era este e insisto se aten imágenes de que te compramos un cassette una cinta de cassette de hecho fijaos que tienen el formato de cassette con esta portada y luego te encontrabas esto en el juego pero era todo un género de hecho pero nadie se sentía decepcionado porque al final sabías que una cosa era la portada del juego otra cosa del juego en sí pues aquí pasa un poco lo mismo esto ya se parece más vale tú tienes un poco esto pero también ayuda a tener este personaje un poco como diciendo con una espada con unos músculos con una cara de batalla que no veas bien así que esto es a lo que nos referimos con imágenes gameplay el gameplay evidentemente abrirte un canal en youtube abrir de un canal en vimeo grabar el gameplay porque digo vale esto así de entrada tienen una pinta pero yo digo antes de descargar melo en mi caso no cuenta porque ya había el gameplay en las manos del alumno pero supongamos que no lo he visto pues yo me voy a youtube y digo pues le preguntaron si haces lo mismo no lo sé y digo class of plants gameplay también te digo de clases gratuito planetario me ha pasado de gastarme 60 euros en un juego de xbox con lo cual yo digo bueno me vuelva a pasar me miro el gameplay y miro si el juego me gusta o no si los proyectos ahora a ver bien vale y yo aquí ya puedo decir vale este es realmente el juego y aquí ya puedo decir si me gusta o no me gusta o lo que sea pero antes de dejar de descargar el juego estoy consiguiendo que ese gameplay esté en la red y quien quiera pueda con nada de esfuerzo saber cómo sería ese gameplay muy bien hacer un trailer básicamente sería un gameplay grabado poner información de qué va yo creo que el género es evidentemente eso sería retener tenéis claro más o menos el concepto de retener y por tanto claro en cuanto a retener una de las acciones una de las múltiples acciones de retener sería y disponer de una web una no digo ni la más importante era menos importante yo os digo pensar os hasta qué punto de vista para vosotros es o no es importante el que cuando tienes un juego de gas oye este juego quien ha desarrollado vamos a buscarlo en internet vamos a ver si el juego tiene página web vamos a ver si no la tiene y en base a eso vosotros mismos yo no estoy diciendo tenemos que tener una web yo estoy diciendo valorar lo que vosotros mismos valorar es que un juego tengo una web para fiarnos de ese juego o no llenos dijo sí no sino que si decide si es que realmente me da igual luego tengo una web yo me voy a google play y si lo veo y es gratis y me han hablado bien de él y me meto en youtube y ve un gameplay que me gusta no me hace falta más para descargarme el juego o no lo sé cómo pensáis vosotros igual decís que algún juego y en ese juego hay que pagar yo quiero saber cuando hago un micropago a quien le estoy pagando realmente y mirad si para vos es importante que pongas rovio detrás y que eso tenga una web y que te metas y llegas al estante existe nosotros unos tíos que igual el mes que viene desaparecen y me yo me enganchaba el juego y si visto no me acuerdo es que tengan una web no quiere decir que no voy a desaparecer el mes que viene pero te da un poquito más de confianza o no pero no estoy diciendo ni que os hagáis una web ni que no es una web ni que mantengáis un blog que no mantengáis un blog es lo que estoy diciendo es valorar pensad lo que vosotros valoráis cuando compráis un juego porque probablemente la gente va a valorar eso mismo de nuestro juego bien y vamos a hablar un poco de convertir bien por último tenemos convertir porque tú has atraído y cuando te digo es atraído has hecho que la gente vaya a tu juego ya es retenido cuando la gente ha llegado a tu juego le has sido capaz de convencer de que se descargue el juego ahora tienes que convertir y convertir no digamos ya el hecho de que se descarga en el juego porque si por ese juego gratuito digamos es fácil el hecho de poder convertir interesados en usuarios pero como conviertes usuarios en dinero entonces lo primero que tienes que pensar entonces lo que no puede ser a preocuparte de atraer y preocuparte de retener con lo cual tendrás un juego con 50 millones de descargas pero con cero ingresos así que cómo convertir lo que quiero que penséis es como consiguen que paguéis dinero paga el dinero por un juego vamos a ver no mentir de móvil no y tú dices depende de qué depende porque me interesa mucho ese depende muy bien depende del precio y qué parte de lo que el juego te ofrece que te puede ofrecer el juego para que digas vale me vale la pena pagar tanto dinero por el juego no lo que tú que más aguas la historia que tiene 61 no me ha dicho aquí una serie de dos cosas lo que quiere es que lo penséis cuidado porque tú dices no me gasto ni un euro en juego en un juego móvil y estás desarrollando un juego para móvil qué dice la ley del karma bien cuidado vamos a ver que la gente no se gasta tanto dinero en juegos para móviles es algo que existe la cultura de la gratuito es algo que existe el que la gente dice a este juego vale dos euros y este juego vale cero y este mola este lo tanto registra vale cero euros y la gente se descarga cuando dice son dos euros que son dos euros y el juego realmente mola es que no es dinero pero la gente vosotros los primeros que probablemente también nos lo descarga anoche mi hija que lleva una semana jugando un juego de esos de mascotas de perrito tal me dijo me compras una mascota pero automáticamente le dije no sin pensarlo no porque le dije que no porque todos tenemos ese chip de juego para móvil lo quiero gratuito en cuanto no es gratuito no lo quiero lo que pasa es que luego lo pensé y si te soy sincero lo pensé más como desarrollador de juegos que como padre que dije vamos a ver vieja y abajo este de jugando este juego no sé 2 3 4 semanas no en el contado lleva ya unas cuantas semanas y dije cuánta diversión le ha proporcionado este juego a mi hija pues unas cuantas horas de diversión por cuánto coste de momento cero dices es que cualquier otro entretenimiento película de cine la feria lo que sea una película cualquier de entretenimiento mínimo en 20 euros entre tonterías de acá vas dejando juego de la wii juego de la nintendo juego de la xbox con lo cual en un primer momento le dije no pero en un segundo momento 30 segundos después le dije vale cuánto cuesta entonces ahí me dijo 250 claro y al momento que dices dos euros cincuenta por seguir alargando el disfrute del juego es dinero comparado con otras es como si queréis el ejemplo del whatsapp vale con el water gratis pero antes y pasamos de un momento del whatsapp era gratis va a valer 089 euros al año y todo el mundo pues voy a dejar de usar el whatsapp que yo decía 89 céntimos de euro al año si es que tienes un pueblo de gastar más euros cual teología bien muy bien muy bien vale efectivamente en convertir esa filosofía que tiene esto es una filosofía que tiene mucha gente es decir si yo con el juego eso de los cachorritos que os decía hace un momento yo digo de entrada a pagar cinco euros o tres euros me da igual yo digo no a pagar tres euros por algo que igual te lo descargas sino también de pinchar un palo no ahora después de haber jugado aquí semanas y ver que el juego en principio mola que te digan pagar tres euros que el juego mola que es lo mismo que está haciendo así que el tema es primero probar gratis y luego y algo para comprar qué es eso que puede ser para comprar qué puede ser muy bien vamos a verlo pueden ser skins pueden ser armas que más mapas más niveles y todo ello de pago evidentemente vale por tanto la idea es que aquí al final tenéis la estrategia es gozada de cómo podéis hacer primero que vuestro juego llega a la gente segundo que a la gente le guste nuestro juego o por lo menos digan oye prevista la ver qué tal y tercero eventualmente podáis ganar dinero con ello vale otra manera de convertir una manera un poco ligera para todos es con un sistema de anuncios entonces la pregunta es cómo se paga un sistema de anuncios la respuesta es depende del sistema de anuncios generalmente si nadie hace clic no se paga pero ahí depende un poco del sistema que cojas hay un sistema de anuncio directo sí por fa estaba abierto gracias estamos hay un sistema de anuncios directo con el cual tú vas al anunciante y le dices soy anunciante logitech por ejemplo mira tengo este juego con lo cual págame ochocientos mil euros págame 100.000 euros y pongo el anuncio de logitech en mi juego que es lo primero que te voy a preguntar logitech eso es lo primero que te va a preguntar con lo cual si tú estás lanzando el juego en ese momento que le vas a decir no bueno ya tú sabes pues exacto crecimiento exponencial y logitech como no saben nada de estas cosas te dirán si vale lo que tú digas vale con lo cual el anuncio directo es un tipo de anuncio pero evidentemente no es abordable desde un primer momento con lo cual el primer momento lo mejor que tienes para poner anuncios en tu juego son los sistemas de anuncios tales como adsense es nuestra mejor opción de google entonces es un sistema con lo cual tú pones anuncios en tu página y google empieza a servir anuncios automáticamente de esa página tú no tienes que pagar nada google te va a pagar según las veces que la gente vea tu anuncio o según las veces que la gente haga clic en tu anuncio si nadie ve y nadie te hace click google no te va a cobrar nada pero tampoco te va a pagar nada por esto digo que es la mejor manera de empezar porque si nadie ve tu anuncio no se te va a cobrar nada si tanto qué quiere decir pagar por él vamos a ver no efectivamente eso varía de tienda en tienda por ejemplo en el caso de google tú pagas una vez una cuota de 25 euros y es para toda la vida y no tienes que pagar más en el caso de apple por ejemplo tú pagas una cuota de 100 euros al año por esto digo que hay los gastos de mantenimiento dependen de las tiendas y estima ahora mismo no me sé de memoria cuánto es la cuota pero bueno no hagas lo que hagas solo por el hecho de poder empezar a subir juegos a la plataforma tu para 25 euros que luego los juegos llevan o no llevan publicidad es tu tema este problema exactamente la lúcida licencia para su videojuego la licencia para tener una cuenta de desarrollador entonces la idea y está por tanto en que si tú pagas acotado 25 euros y empezar a subir juegos a google play pero no moneditas pues la moneditas has pagado no estás recuperando tu puedes gastarte esa cuota y luego meter anuncios en los juegos pero google no te va a decir oye no que además la cuota me tienes que pagar porcentaje de anuncios no lo hago él le da igual ahora otra cosa es que digas no he pagado la cuota y este juego vale tres euros también tienes que tener claro que esos tres euros no son para vosotros directamente el cien por cien sino que vosotros queráis el 40 por ciento de esos tres euros igual se queda el 60 por ciento de esos tres euros como qué tanta diferencia con respecto a qué y qué momento 99 déjame ver exactamente porcentaje no no en absoluto vender en google transforma 7 digo exacto mira bueno a ver según este artículo no no esto es microsoft android vale bueno aquí pone que le dan a desarrolladores de por ciento de la venta y por tanto se quedan al 30 pero es que me da igual aunque fuera pongamos que eso es lo que hay supongamos lo amazon en este caso 15 por ciento de valor la venta vale supongamos que fuera 60 para google 40 para mí es que me dé igual quién es el hecho de que me permita llegar a toda esa gente y que me ponga la infraestructura y que mi juego esté en cada uno de los terminales android que lleva todo el mundo de bolsillo a mí me seguirá valiendo la pena decir que hace el 60 66 s luego que sí tienes que vender más unidades para llegar a ese objetivo o vender las más caro equivale a no venderlo en definitiva es que sepáis que todo aquello que va por anuncios de la llevas tú pero todo aquello que vaya por micropagos o bien pagar por el juego o bien micropagos en su psique se queda google una cuota la que sea o google o apple o quien sea vamos a hacer una primera toma de contacto con el plug in touch right que es un plugin para jquery entonces voy a ir al campo ya el ht docs voy a crear una carpeta llamada suite y le digo jquery no sé si era con el latina o con tal touch wipe es mirará con y latina y esto es suave con y entonces me voy a touch white vale este detecta cuatro direcciones con lo cual tendríamos que buscar otro que detectará ángulos lo que hablábamos otro día pero bueno de igual los muestro este como ejemplo de lo que se puede mostrar y mirad dónde estás git hub me lo descargo repositorios al zwai jquery plugin me descargo el fib atención todos me voy al disco local me voy a hp docs me voy a white y mira me lo extraigo y digo vemos aquí jquery touch wipe mínimo y ahora por supuesto también me pongo algún jquery así que ahora me hago un archivo index.html y os voy a demostrar cómo se usa este plugin me voy a heavy me copia un poco esta estructura y le digo primero que aarón jquery importante segundo cargo la librería el troll algo que he llegado un momento también haremos muchísimo que es cargar una librería base y a partir de ahí un montón de librerías que nos sirvan para cosas concretas los frameworks y ahora digo documento punto 9 function y digo cómo se usa esto vemos y simple en y finger pink no capsa bay sexual muy bien así que me voy al bei sexual y digo cuando sobre el body hagas white tengo que respetar la sintaxis y tengo lo siguiente los tres sol pero aquí está vamos a verlo si si bien espero no aquí está ahí está si hay una coma eso sí entonces digo bueno this punto texturas soy pegado en esta dirección esta me gusta bien así que por tanto ahora ejecutamos este juego vamos a verlo y le digo localhost white o la de la tabla y así la tabla tengo una tabla guardo y recargo y dice hacia la derecha hacia la izquierda hacia arriba y hacia abajo y si hago clic no soy perdonada así que por tanto esto por supuesto se puede hacer también en el teléfono móvil ahora lo voy a demostrar pero fijaos que con esta sencilla librería tendríamos que buscar otra que me cogiera ángulos concretos pero el uso es más o menos aproximado a esto simplemente es cargar una librería leer la documentación acerca de qué parámetros y cómo se usa evidentemente esa librería y a partir de ahí empezar a usarla vamos a ver esto en el móvil quién soy yo 126 86 me conecto a la wifi y digo era verdad y digo 192 punto en hambre 168 punto 1.26 white vamos a poner un poquito más de luz y si yo ahora hago así ha superado hacia la derecha pero la derecha así hacia la izquierda arriba y abajo vale con lo cual os digo esa es una librería buscada alguna otra que además pueda tener en cualquier ángulo si os interesa eso a ver el problema de que los juegos en el móvil se re escale en ultra pequeñísimos y de hecho de que cuando hacer doble clic cambia el factor de zoom eso es un problema típico y tópico de los juegos web para móviles de las web para móvil entonces os voy a contar una etiqueta muy sencilla en html para que no os pase eso entra aquí y donde acabo de poner yo entra al site 1926 81 26 white bien entonces la idea html meta prevent scaling es la etiqueta de oporto entonces la etiqueta es está aquí está esta es y usher escala bold es igual a no esta es la buena creo que si efectivamente entonces fíjate que si yo le pongo eso digo iniciales 'kale y máximo mes que él es igual a 1 y pongo y usar escala balls iguala no digo ya aquí de todos la greg la diferencia no digo ya que salga pequeño o grande sino que lo que estoy diciendo es que exactamente como salga al principio eso ya se le hace doble clic y verás como no se escala y adele pins y verás como no se puede escalar dime no eso es diferente porque eso lo podéis a poder hacer cuando metáis el juego dentro de ponga evitar el forzar a que siempre sería horizontal o vertical pero eso sí el juego está en html puro es decir a través de navegador no se puede hacer vía el código tenés que tener en cuenta una cosa y es que html a día de hoy esto se prevé que cambie en el futuro pero no hemos llegado a ese punto a día de hoy html no puede interactuar con el hardware de tu equipo html no puedo no puede tocar el vibrador no puede cambiar la configuración de la pantalla no puede hacer que el teléfono suene en el ring digamos no haya el sonido por tanto todo eso nos hace falta fue un gap que es el framework que nos permite hacer que a través de html podamos hacer ese tipo de cosas vale portando eso concreto no se puede todavía pues probadlo para que recargue probadlo y veréis como por mucho que hagas para con la de javi arriba por mucho que haga doble clic o lo que queráis para que creo que no se ha actualizado vale veréis como no se puede es lo mismo que hicimos el flap space de hecho eso