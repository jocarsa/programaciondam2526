a partir de aquí a partir de aquí tenemos eh un objeto en la pantalla que se está moviendo en una dirección concreta y cuando digo un objeto lo que quiero decir es que ahora mismo No es un objeto desde el punto de vista de la programación orientada a objetos pero curiosamente como Vais a ver en esta asignatura la programación orientada a objetos es y va a ser vuestra gran amiga vale Así que para esto así que para esto aquí tengo esto un poco pillado Okay Vale bien Así que para esto voy a venir aquí y voy a decir que 006 eh objetos clases realmente Bien voy a crear una Class npc ya sabéis queé quiere decir Non playable cará vale personaje no jugador entonces voy a decir que Eh Pues a ver dis pun x es igual a pues maz punto Random multiplicado por 512 es decir va a tener una x aleatoria dis y ma Random 512 vale así tengo un npc que eh tiene una serie de parámetros esto quiere decir que bar mi npc es igual a New npc como veis programación orientada a objetos console pun log mi npc vale hago así Ahora quitaré lo de esto es un bucle Okay objetos vale dónde estás error en la 13 error en la 13 vale fun constructor dis pun x esto ya es otra cosa constructor vale Oh vale Ok no Ok eh javascript constructor a ver si es constructor Ah muy bien sin function perfecto vale tenemos ahí un npc voy a quitar el console tenemos ahí un npc Y este npc tiene una serie de coordenadas vale lo que voy a hacer ahora es decirle que dis pun ángulo es igual a maz pun Random por ma punto pi por 2 para que tenga un ángulo aleatorio y ahora lo que voy a hacer es decirle qué vamos a ver mi npc punto x su propiedad x es más igual a mi npc perdón a maz pun Cos de mi npc punto ángulo y mi npc y es el seno Ahora quiero poner aquí mi npc x mi npc y Vale qué va a ocurrir ahora lo que va a ocurrir ahora es que cada vez que yo refresque el personaje va a salir en un punto aleatorio y va a tener una dirección aleatoria aquí hay unas cuantas cosas que os tendré que explicar que son las siguientes cuando yo declaro un npc le estoy dando una x que puede ser un valor aleatorio entre 0 y 512 le estoy dando un valor y que puede ser un valor aleatorio entre 0 y 512 y le estoy dando un ángulo en javascript y en muchos otros entornos de programación aquí le he dado yo a continuar verdad sí vale se programa en radianes con lo cual si os acordáis de educación secundaria una vuelta entera al círculo es 2 pi radianes por tanto le estoy diciendo que quiero un número aleatorio y lo quiero multiplicar por pi por Eso quiere decir que cada objeto tendrá un ángulo diferente entre lo que en grados hexagesimal se llamaría de 0 a 360 pero es que como aquí no hay grados hexagesimal sino que hay radianes va desde 0 a pi por 2 Vale cuando actualizamos la posición de un objeto en trigonometría para actualizar la x se utiliza el coseno del por tanto recordáis y si no recordáis yo os lo recuerdo que en trigonometría a que pensabais que esta parte de videojuegos iba a ser Guay y de repente estáis diciendo Oh trigonometría en qué momento vale si yo tengo un círculo eh No vale si yo tengo un círculo y yo tengo esto de aquí vale Yo tengo los ejes Supongo que os acordáis que si yo tengo un ángulo concreto su proyección en x es el coseno y su proyección en y es el seno vale es decir teniendo en cuenta que esto es el vector unitario vale esto es 1 la y es 1 y por tanto esto quiere decir que la x es 1 si esto de aquí es el ángulo a en ese caso esto de aquí es el coseno de a y esto de aquí es el seno de a es decir la proyección horizontal del ángulo es el coseno la proyección vertical del ángulo es el coseno insisto eso que visteis en Secundaria que pensasteis que nunca lo utilizaría en la vida real Pues mira tú por dónde se utilizan videojuegos vale a ver y esto es esquema eh Uh No esto Qué es Ah espera esquema pun svg vale muy bien Por eso he puesto aquí que para hallar la x de ese ángulo quiero averiguar el coseno y para hallar la y de ese ángulo necesito averiguar el seno bien con esto como os digo Tenemos un objeto que rebota como veis tenemos un objeto que rebota Perdón que rebota que viaja vale a través de del escenario a partir de aquí yo puedo poner condiciones por ejemplo Ahora sí el rebote voy a poner un choque contra las paredes Así que ahora vengo por aquí y le digo eh 007 rebote contra las paredes y entonces voy a decir Eh rebota sí dis punx es menor que 0 o dis punto x Es mayor que 512 o dis pun y es menor que 0 o dis pun y es mayor que 5122 en ese caso es decir si has rebotado contra alguna pared vamos a ver Ah sí desde luego s voy un momentín acabo esto y voy muy bien Es más igual a ma punto Pi y ya vale vamos a ver voy a poner comentarios esto es la función que se ejecuta cuando se instancia el objeto esto es se le da una posición entre 0 y 512 se le da en x quiero decir en x se le da una posición entre 0 y 512 en y vale se le da entre 0 y pi radianes Perdona y dos pi radianes es decir un ángulo completo Esta es la función que se ejecuta el método realmente el método constructor que se ejecuta cuando se instancia el objeto pero recordáis de programación orientada a objetos que vosotros podéis poner métodos los que os dé la gana entonces este es un método para que se detecte la colisión con las paredes y rebote Entonces si quieto aquí en el caso de que la posición del objeto esté fuera de los límites en ese caso el ángulo pega media vuelta es decir maz pun pi es lo que para los que estáis acostumbrados a trabajar con radian con grados exagesimal Son 180 gr vale maz punto pi 180 gr eso qué quiere decir pues que una vez que he definido la clase y una vez que he definido el método Ahora aquí abajo puedo decir mi npc punto rebota es decir estoy llamando a un método de la clase y rebota ya sabe que tiene que ejecutar este código que tengo aquí vale vamos a verlo si rebota Okay vale ahí y plonk Debería rebotar a ver momento y ahí en el cero debería rebotar vale vamos a ver e console punto log colisión vamos a ver y Ah colisión vale Ok venga vale dis pun x vale má igual a ma. Cos de dis pun a por 10 y el seno lo que estoy haciendo un momentín primero voy a ver si funciona que debe ser que sí pero bueno a ver uno que colisione más rápido venga Y dónde está Vale Voy a hacer lo siguiente vamos a ver ahora If dis pun x es menor que 0 en ese caso dis pun x es ig a 0 If dis pun x Es mayor que 512 en ese caso dis pun x es ig a 512 y de hecho incluso voy a poner 10 y aquí voy a poner 502 ahora os comento esto por Qué dis pun y es menor que 0 en ese caso dis pun y es igual a 0 y If dis pun y es mayor que 512 en ese caso dis pun y es igual a 502 lo que estoy haciendo es que en el caso de que el objeto esté fuera de los límites fuerzo a atraerlo dentro de los límites vale si ahora recargo vamos a verlo estoy en rebota no a ver si es que estoy en otro archivo diferente Ah no estoy en sí estoy en el mismo sí pareces vale vamos a verlo y catlon ahí lo veis vale Ahí catlon lo que pasa es que el ángulo no me lo está cogiendo el ángulo no me lo está cogiendo vale vamos a copiar esto le pongo el ángulo de paso para forzar a que el ángulo cambie Oh más rápido venga y si todo va bien Ahora debería hacer u sigue igual dis pun a es más igual a ma pun pi Ah dis punto ángulo Ah venga es que es punto ángulo no punto a Mira me voy a cargar todo esto ahí vale vamos a verlo ahora más rápido dis punto ángulo dis punto ángulo y plonk ahí vale como veis cuando choca contra una pared pues lo que hace es rebotar Es decir en el caso de que el objeto esté fuera de los límites fuerzo a traerlo dentro de los límites y además le pongo 180 gr al ángulo o sea lo que viene siendo un giro de 180 gr o sea un giro sobre sí mismo bien claro qué ocurre Pues que la programación orientada a objetos eh Está muy bien en el momento en el que yo he creado aquí una clase para trabajar con un npc pero si ahora No quiero trabajar con un npc sio quiero trabajar con 10 npcs no hay ningún problema vamos a por ello si yo ahora le digo 008 array de npc os acordáis que el año pasado vimos npcs Vale pues no va a rebotar por toda la pantalla no porque Claro rebota en el ángulo de 180 no rebota en un ángulo complementario Pero podemos calcular el ángulo complementario sin ningún problema o sea eso también se puede hacer fácilmente Vale entonces Yo vengo por aquí y digo par mis npcs es igual a Nuevo array bar número npc es igual a cuántos queréis Cuántos pongo en diagonal Sí pero cada uno en su diagonal ahora veréis ahora en cuanto hayan muchos Lo veréis eh cuánto le pongo Cuántos pongo 4 c qu AB rido Pero bueno va venga cinco Claro no sé vamos a verlo y ahora digo eh vamos a ver for no for Let I es igual a 0 I es menor vamos a ver y es menor que número npc y más y entonces digo mis npc de I es igual a New npc qué estoy haciendo pues lo que estoy haciendo es crear una Ray de npcs ya no estoy creando ya no estoy creando un solo npc estoy creando Mira por ejemplo Albert decía 50 me ha molado más 50 ahí 50 vale estoy creando una Ray de npcs pero cada npc es una instancia de la clase npc vale Así que ahora así por cierto que a partir de hoy creo que no volveréis a ver los juegos de igual forma porque cada vez que veáis npc en pantalla pensaréis que es una Ray de una clase porque realmente lo es bien entonces yo a continuación digo Bueno pues vamos a ver pues for voy a copar esto forlet I es ig a 0 Y es igual a número npc un momento que meta todo esto aquí yo diré que mis npcs de I de X de y de ángulo y rebota de X y de y por tanto si ahora recargo esto Vais a ver que simplemente haciendo eso en lugar de tener un array mi npc is not defined vale dónde en array de npcs en la línea 19 por aquí me falta alguna opción de las de show numbers ostra vale la Oh la 19 a ver G Ah console pun log Sí ahí fuera bien recargo Y si os dais cuenta como he hecho una clase y he metido todo dentro de la clase con el mismo esfuerzo que hago una clase hago 50 instancias Esta es la gracia de la programación orientada a objetos y en desarrollo de videojuegos como Vais a ver a partir de ya a partir de ahora mismo A partir de hoy la programación orientada a objetos pues tiene mucha gracia porque nos permite eh automatizar un montón de cosas bien en este caso en este juego tenemos npcs y a continuación lo que quiero es tener un jugador porque el jugador lo voy a tener que mover con las teclas y el jugador va a tener que evitar ser tocado por las cajas en el momento en el que el jugador sea tocado por alguna caja pues automáticamente va a perder vale Sí correcto efectivamente tipo infección tipo partículas vale es que cada vez que se divida se o sea se divida separta en varios Sí por supuesto vale a partir de aquí Esta es que lo sepáis una de las asuras más duras pero más creativas en las cuales en la igual Vais a poder experimentar pues una barbaridad de cosas bien voy a crear e vamos a ver antes de crear el jugador y una condición de inicio y una condición de ganar y una condición de perder también es cierto vale voy a trabajar un poquito más el código de este npc porque diréis vale si hay una un método para rebota porque no hay un método para mueve porque el código de mueve está fuera Pues debería Y por qué no hay un método de dibuja si nos ponemos en plan orientado a objetos todo deberían ser métodos Vale entonces eh 009 métodos de objeto vale esto creo que me lev el mismo de antes y Ah muy bien otro es diferente fantástico Vale entonces Yo vengo por aquí y digo mueve este método Define el movimiento de la caja y el movimiento de la caja simplemente es este código de aquí y meterlo aquí esto es dis Y esto es dis vale Y ahora claro mis npcs punto mueve Ok y esto de aquí es dibuja Bueno pues caray con el ratón este método es el encg de dibujar el npc dibuja cojo este código lo pongo ahí dis Y disy qué pesado el cursor yo creo que ahora coincidir conmigo este en que este código es mucho más limpio Oye muévete Oye rebota oye dibújate y si quieres averiguar qué es lo que hace cada uno de los métodos Pues ahí tienes su código es decir eh programación orientada a objetos pura y dura vale el funcionamiento debe ser exactamente el mismo pero ahora la ordenación del código es mucho mejor bien tenemos ya unos npcs l vemos losos como os digo enemigos Si se quiere y ahora a continuación lo que voy a hacer es dibujar al bueno de la película vale el bueno de la película vamos a dibujar al protagonista vale el protagonista va a estar en otro Canvas Voy a pintar dos Canvas este va a ser Lienzo uno y este va a ser Lienzo dos por tanto Lienzo esto es Lienzo Uno Vale y ahora Lienzo dos y contexto dos y Lienzo 2 vale va a ser Lienzo 2 lo cual quiere decir que si yo ahora me voy aquí pues tendré ahora veréis dos lienzos vale el Lienzo de los malos y el Lienzo del Bueno no es la única forma de trabajar pero es una forma bastante común de tal forma que yo ahora de la misma forma que he hecho una clase npc Pues voy a hacer una Class jugador método constructor y con el método constructor Pues voy a decir que eh dis pun x es = 256 dis pun y es = a 256 bien entonces instanci un jugador a ver aquí instanci a los npc en un array de 50 elementos y aquí instanci una única copia del jugador humano entonces bar jugador es igual a New jugador muy bien jugador y vale jugador tiene una x y una y esto quiere decir que un momento aquí contexto 2. fill Style es igual a Green pongo eso para que en lugar de pintarse negro se pinte verde y entonces ahora voy a decir claro dibuja qué rabia dibuja es contexto 2 pun fillrect dis pun x coma dis pun y coma 20,20 vale por tanto le digo jugador pun dibuja vale esto es a continuación movemos a todos los npc Llamando a sus métodos y a continuación Hola dime pasa Ah No lo sé sí que parece que está no o no Ah pues ni me hab dado cuenta vale Y a continuación con este bloque de código dibujamos al jugador Uno Vale vamos a probarlo Dime Sí claro sin sistema operativo pero por m mejor no no ya vale Yo me lo puse yo me puse un con lo cual por mí tranquilo vale ahora luego se lo comento Sí el que funcione bien vale esta hora vale dibujamos al jugador uno entonces vengo por aquí Ah protagonista vale Perdón ahí está el protagonista Uh No espérate me ha parecido verdes los npcs espérate a ver a contexto dos F Style Ahora sí ahí está el problema vale Mirad tengo el contexto uno que es este de aquí y tengo el contexto dos que es el jugador a ver que no pasa nada vale porque yo lo que he hecho básicamente es eh o sea pintar Por una parte los npcs y por otra parte en un Lienzo separado el jugador qué voy a hacer luego Bueno pues luego lo que voy a hacer es un sencillo truco css de juntar los lienzos vale con lo cual vengo aquí y digo Canvas position absolute top cer píxeles left 0 píxeles y solucionado vale y lo que acabo de hacer básicamente es que a partir de esta siguiente versión que voy a utilizar Pues los dos están juntos vale es decir estoy pintando los dos Canvas a la vez bien Ahora a continuación para esta siguiente parte de la clase que est siendo muy densa lo sé tranquilos eh luego habrá días que más denso y días que menos denso sí Blanca ya pero cuenta ya muy bien la pregunta de Blanca podría ser bueno por qué no lo pintas en el mismo Lienzo las dos cosas correcto Blanca esto es porque estoy anticipando una cosa que voy a hacer ahora luego Y esa cosa que voy a hacer ahora luego va a ser comprobar si en el pixxel que hay bajo es decir si en el pixxel que hay bajo del rectángulo verde hay pintado algo de color negro porque eso quiere decir que habré colisionado claro qué ocurre que si yo pinto en un mismo Lienzo a todo el mundo y luego le pregunto a ese Lienzo si hay un píxel el Lienzo me dirá Sí claro Hay un píxel porque estoy pintando al bueno Vale por eso lo he dibujado en dos lienzos para luego poderle hacer preguntas al Lienzo número uno y no tener que contaminar la información con el Lienzo número dos vale Voy a mover el personaje y ahora a continuación en cuanto mueva el personaje verás a qué me refiero vale verás exactamente lo que quiere decir no blanca no no va a tener que ser siempre así vale a lo largo de los días me vais a ver desarrollar juegos de múltiples formas diferentes y verás que esto que voy a hacer de separar la información en varias capas es conveniente pero nunca obligatorio vale verás que igual haré otros tipos de juegos en los que por los motivos que sea me convenga hacer un único Lienzo vale no os quedéis con varios lienzos o un Lienzo con lo que sí que quiero que os quedéis es con el concepto global de la clase de hoy de que al final es un bucle vale ejecuto información en un bucle y el bucle es el que hace creer a la gente que esto que está en la pantalla es una animación cuando no es una animación Vale entonces a ver un momento Ah vale Okay David okay luego el siguiente concepto con el que quiero que os quedéis en la clase de hoy es que la programación orientada a objetos es la mejor amiga de los videojuegos es un concepto también muy importante para la clase de hoy que veremos también demostrado mucho a lo largo de los próximos días Es decir la programación orientada objetos que en otros ámbitos de programación parece que entra muy forzada vale es como que utilizamos objetos porque sí por ser más Guay que nadie pues en videojuegos la programación orientada a objetos es supervivencia vale es si lo utilizas todo irá bien y si no utilizas la cosa se puede complicar muchísimo Ahora parece que hay mucho código parece que se ha complicado pero cuando lo analicé detenidamente veréis que haberlo metido todo en una en un objeto Es lo mejor que hemos podido hacer vale antes de colisionar eh Blanca vamos a mover al personaje una de las claves que tiene el desarrollo de videojuegos consiste Precisamente en mover vale en que el jugador hace algo en que el jugador puede interactuar con el entorno ahora mismo el jugador no es más que un nada Sabes que no es nada absolutamente para ello a continuación voy a hacer lo siguiente 012 mover al jugador y entonces yo digo por aquí yo digo por aquí yo digo por aquí y ahora a continuación sé que me vais a hacer una pregunta voy a escribir este código fuera del bucle y me diréis Oye por qué no lo has dibujado dentro del bucle vale eh vamos a ver voy a decir eh document punto no eh No no Bueno sí document onk press es igual a fun e y console pun log e Qué es la e de hecho puedo hacer onk down os acordáis de los eventos javascript vale on down Así que vengo por aquí vale Mirad atención Mirad pulso la a Perdona pulso la a y sale el Keyboard event que me da una serie de cosas vale de el key code el de todo bien entonces voy a pulsar vamos a ver voy a pulsar arriba abajo izquierda derecha esto que quiere decir pues esto quiere decir que cuando yo pincho un K down puedo decir sí e pun k Por qué e. K Pues porque lo pone ahí vale veis que pone punto k en el objeto no me lo he inventado yo e Punk Es igual a ostia es igual a Arrow app Por qué Arrow app Pues porque lo pone espérate porque lo pone ahí es lo bueno que tiene la consola de javascript que de chiva un montón de cosas vale ifk Arrow app console.log arriba si yo recargo yo toco teclas e arriba no no Ah Perdona Perdona esto es una comparación son dos iguales como se me ocurre poner un solo igual vale yo teclas pero solo cuando yo pulso la flecha de hacia arriba me dice arriba lo veis de esta forma yo puedo detectar qué teclas he pulsado entonces If K claro como podéis imaginar Arrow down Arrow left y Arrow right ojo también podría poner wsad yo que sé vale lo que queráis eso me da igual entonces digo abajo izquierda derecha vale arriba abajo izquierda derecha ya tengo las pulsaciones de tecla un momentín esto es controles para mover al jugador con las teclas del teclado y entonces yo por ejemplo voy a decir jugador punto x más igual Perdona y menos igual a jugador punto y menos ig a 5 left jugador X Men ig 5 y wr jugador x+ = 5 Ah sí sí es más correcto Así que recargo Y si ahora muevo las flechas veréis que se mueve tengo como un como el juego de la serpiente del snake del Nokia vale bien tengo el snake Simplemente porque no estoy limpiando esta línea es limpio el Lienzo uno pero a continuación también esto lo voy a poner aquí limpio Lienzo uno pero a continuación limpio el Lienzo dos Vale ahora tengo el personaje que se está moviendo ahora tengo como veis el personaje que se está moviendo En qué consiste el juego Bueno pues el juego consiste voy a Ahora sí voy a poner menos npcs porque igual me muero un poco si en un momento dado toco algún npc muero vamos a ver vale el juego efectivamente tal y como Comenta Sergio en principio Ah blanca ahora vamos a eso eh en principio yo voy a hacer que consista en eso en que el cuadrado verde no puede tocar los negros Pero insisto podéis cambiar la jugabilidad como queráis eh Blanca eso de menos igual recordamos del curso pasado que es un operador aritmético abreviado Entonces recordáis que voy a ponerlo por aquí abajo que cuando yo por ejemplo digo x = x + 10 para no poner toda esa fórmula lo que hago es x + = 10 vale es un operador aritmético abreviado de la misma forma que cuando pongo x = x - 10 en lugar de poner eso pongo X Men = 10 y es el operador abreviado aritmético de la resta vale podría poner esto de aquí Pero simplemente por escribir menos código digamos vale borro todo esto de aquí un momento vuelvo al código bien entonces ahora aprovecho para decir vale lo que comentábamos hace un momento con Sergio que sí vamos a hacer eso pero no tendría por qué igual podría hacer que mi objetivo en el juego es matar a los negros y Eso suena mal y a continuación o juego de snake efectivamente vale o el juego este que tienes que ir creando eh cómo te diría yo creando zonas para bloquear las zonas y todo eso tiene un nombre pero no me acuerdo ese juego Vale entonces lo que quiero deciros con esto al igual que en el en la asignatura anterior es que yo estoy haciendo un juego Pero qué es lo que tenéis que hacer vosotros modificarlo vale vosotros tenéis que Mi código y tenéis que justificar que habéis cambiado el código para hacer algo diferente vale o que por ejemplo lo que está comentando Sergio que conforme te vas comiendo a los cuadrados la serpiente se haga más grande Sergio y no podéis hacer vuestro propio juego No es que tenéis que hacer vuestro propio juego vale porque si solo copiáis Mi código no demostráis que habéis entendido el código ni os ponéis a prueba vosotros con lo cual tenéis que hacer vuestro propio código claro tenéis que hacer vuestro propio juego evidentemente en eh cóm te diría yo dentro del código que yo os dé vale porque no os puedo digamos dar 10 de código y exigir os 100 o sea otra cosa es que alguien se atreva y diga no tú me das 10 pero yo me atrevo a hacer 100 vale fantástico Pero vale yo os digo que tenéis que hacer un juego diferente Pero dentro de la complejidad de código que yo os he enseñado y desde luego Sergio eh con el tema que comentas de orientado a objetos te aseguro que no es que yo os obligue a orientar a objetos intentar hacer esto sin orientar a objetos y veréis que será horrible vale o sea os aseguro que orientar objetos os lo estoy dando más como solución que como obligación cuando lo probéis y cuando experimenté ya lo veréis bien entonces de las varias formas que tenemos de calcular cuando estoy cerca digamos de un enemigo vamos a verlo estoy pensando cómo lo calculo vale voy a calcular lo que había comentado antes vale lo que le había dicho antes a Blanca veréis voy a considerar es que hay varias formas de calcularlo eh Por eso digo voy a considerar la esquina superior izquierda del jugador la esquina superior izquierda en este sistema de dibujo es el origen del dibujo Vale y a continuación blanca y ahora viene la respuesta a la pregunta que hacías antes lo que voy a hacer es mirar Qué píxel hay bajo de ese píxel de color verde sabéis ahora mismo que tenemos dos capas la de arriba que es el personaje y la de abajo que son los npcs Pues en la posición del personaje voy a mirar Qué hay en la capa de abajo para ello voy a introducir un nuevo concepto que una vez más os lo vuelvo a repetir en la clase de hoy estamos viendo un montón de nuevos conceptos pero tranquilos que En las siguientes clases lo que vamos a hacer es darle vueltas y vueltas a estos mismos conceptos o sea que tranquilos que si alguien dice hoy no lo Pillo yo os digo tranquilos lo pillaré el lunes que viene y si no el lunes siguiente porque vamos a estar repitiendo y repitiendo estos conceptos Vale entonces 13 y mirar el píxel debajo vale mirar el píxel debajo es una instrucción aquí es una instrucción que tiene el siguiente nombre bar datos es igual a contexto get image Data la función nueva es esta es get image Data y get image Data es leer un Pixel Dime el color del Pixel que yo te voy a decir el color es el pixxel Perdona es jugador pun x jugador pun y 1,1 pun Data para verlo mejor porque diréis vale Y eso toda esa fórmula Qué es voy a poner log datos recargo Así que tengo como objetivo hoy hacer algo que sea un juego mínimamente acabado para que podáis jugar en casa vale Y si saco el código sale esto eh punto Data sí correcto vale sale eso Mirad sale 00 pero cuando alguien pasa cuando alguien mira mira ahí Ah Espera que no lo veis espera Cuando alguien pasa Espera que no se ve momentín Cuando alguien pasa Mirad Cuando alguien me pase por encima veréis que no pone 00 sino que pondrá 00256 Espera que nadie me ha pasado por encima ahora por cierto comento este código ahora no me pasar a nadie por encima voy a moverme Mira voy a perseguir a alguien lo veis como 00255 vale estoy persiguiendo yo a alguien bien Eso quiere decir que yo ya puedo leer entonces mediante la siguiente línea soy capaz de obtener un array con los componentes de color de un píxel el píxel que está en jugador x jugador y bien Ahora digo par Alfa es igual a eh datos de tres por qué de tres esto es otra cosa que os voy a repetir mil millones de veces durante esta asignatura los colores siempre son una Ray de cuatro elementos el cero es el rojo el uno es el verde el dos es el azul y el tres es el alfa la transparencia vale por eso diréis es del TR te lo has sacado de la manga Sí pero no esto el índice 3 es la transparencia vale Y ahora digo si Alfa es igual a 255 en ese caso console pun log has perdido vamos a verlo espera sí Okay creo que es el mismo creo que no he creado uno nuevo vale vamos a verlo me voy a chocar contra uno ae y has perdido lo veis vale lo habéis visto y pl has perdido Mira si queréis voy a hacer otra cosa en lugar de decir has perdido voy a decir window location es igual a window.to location esto quiere decir recargar esto es recargar la página lo que viene a querer decir que has perdido vale me voy a quedar quieto y veréis que en cuanto una caja me pase por encima la el navegador se refrescarán o sea como que has perdido y el juego vuelve a empezar ahora para fastidiar ninguna caja pasará por encima claro Sí Bueno creo que el secreto de este juego es quedarse quieto o sea es imposible Bueno me voy a mover venga y plop Oy a ver qué ha pasado window location es igual a window location dónde te has undefine Ah es que he puesto Loc location vale va venga Uy fija lo has visto mira ahí plom y pl Ay mira ahí justo no pero ahí sí sí es justo claro efectivamente vale correcto muy bien Ahí estamos efectivamente lo que he hecho aquí poniendo uno es solo quiero un píxel vale Lo que pasa es que si cojo más de un píxel tenemos que recorrer los píxeles Y eso lo dejo para otro día pero efectivamente para un cálculo de mayor precisión sería más píxeles bien sí lo comentaba por ahí lo comentaba por ahí blanca que estaba mal escrito vale con esto si estamos trabajando con un videojuego vale debemos tener en cuenta que Espérate que no sé dónde tengo el otro Chrome aquí vale muy bien No esto es otra cosa pim y dam y multi no estos servicios y procesos y multimedia vale bien eh llegados A este momento es cuando ya empezaría a tocar a hablar de la arquitectura del juego vale tanto a nivel técnico como a nivel de jugabilidad en principio en un juego si me voy al 4.2 vale deberían cumplirse una serie de condiciones muy relajadas quiero decir que si no las cumplís no pasa nada en un juego debería haber un jugador aunque también es cierto que hay juegos de cero jugadores es decir la máquina juega y tú miras debería haber al menos un jugador por supuesto hablaremos también de videojuegos en Red donde ahí lo que haremos es mezclar los conocimientos de programación multimedia con programación de servicios y procesos Ya que en servicios y procesos trabajamos con programación a través de la red entre otras muchas cosas bien debería haber una condición de inicio que es el punto en el que empieza el jugador debería haber al menos de muerte condición en la que el juego no puede continuar y debe Volver a comenzar se considera que el jugador ha perdido y debería haber al menos una condición de éxito condición en la que el juego llega o bien Al Punto Final o bien a un checkpoint o lo podéis llamar también niveles eh si lo habéis visto alguna vez O si habéis hecho alguna vez sabréis que las artes marciales funcionan con cinturones de colores los cinturones de colores fue fueron un invento de un japonés llamado jigoro Cano que además fue el inventor del judo moderno no el yudo como parte del bushido vale sino el yudo deportivo Y entonces eh digamos estábamos hablando de mitad del siglo XX donde hasta ese momento tú a una persona digamos en el Japón feudal vale antes de perder la Segunda Guerra Mundial con todo lo que yo conllevó de cambio de cultura y todo eso Entonces tú le podías decir a alguien no el yudo es una vida o sea cuando acabarás el yudo nunca cuando te mueras acabarás el yudo vale con el karate ocurre igual karaté no es un deporte japonés es un deporte de okinaga importado por Japón pero como Japón invadió okinaga pues en fin bien entonces aig rocano como vivía una época insisto es después de la Segunda Guerra en la cual Pues los jóvenes cada vez tenían menos paciencia tú Fíjate si los jóvenes japoneses tienen poca paciencia imaginate los españoles que los jóvenes japoneses tienen siempre la fama esta de tener mucha paciencia y mucha disciplina y todo esto no pues loroco se inventó eh lo del tema de los cinturones de colores para que a un estudiante que se había có te diría yo esforzado todo el año decirle mira ahora es amarillo que es una lo del Amarillo es decir es nada amarillo pero el estudiante s siente como que Oye como que he avanzado un paso más vale que haces un año más o llegas al siguiente examen Ahora eres naranja Qué quiere decir naranja no quiere decir nada pero es una forma de darle retroalimentación a un estudiante Para que sienta que cada poco tiempo pues su esfuerzo tiene algún tipo de resultado aunque su resultado sea un cinturón de un color que si lo miras al final es un color ridículo pero es un color Al fin y al cabo es una muestra de aprendizaje esa técnica de gamificación esa técnica de retroalimentación es una técnica que tenéis que llevar a un juego en alguna parte es decir en algún tipo de en algún momento del juego el jugador tiene que recibir puntos vidas subida de nivel estrellas lo que tú quieras vale Pero tiene que tener alguna esto positiva bien la sensación de progresión correcto eso es además eh debemos tener cuidado porque debe haber una condición de muerte pero si la condición de muerte es demasiado fácil el usuario no percibe reto y se cansa porque es como qué juego de niños si la condición de muerte es demasiado difícil el usuario se frustra hay muchos tipos de usuario hay usuarios que cuando hay dificultad hay reto Pero hay muchos otros que si es demasiado difícil es como Mira esto es imposible vale bien debería haber al menos una condición de éxito pero si el éxito es demasiado sencillo no hay percepción de mérito si el éxito es demasiado complejo el usuario se frustra vale por eso eh en videojuegos tales como por ejemplo pues los Call of Duty vale Ahora eres general de Tercer Rango es como pero si soy un pringao si soy un gorder sabes en el sillón de casa con un mando voy a ser general de Tercer Rango si estoy ahí sabes entonces la idea Está en que por una parte en la clase de hoy estamos empezando a ver los cómo te diría yo los aspectos técnicos básicos fundamentales de un juego muy sencillo son cuadra vines a continuación empezamos a hablar de una parte de la arquitectura que es la jugabilidad y vamos a hablar a continuación de eh de los tipos de juego antes de hacerlo quiero transformar esto en algo que os va a gustar mucho más porque ahora mismo esos son cuadraditos eso son cuadradin pero Mirad atención porque antes de pasar a hablar un poco de tipologías de juego voy a deciros que eh video game Sprite e vídeo game Sprite Vale pues mira Oh qué Guay qué guapo Hala fantástico me encanta esto parecen Pokémons pero muy distorsionado no sé sí bien entonces me lo voy a guardar escritorio el tema sería hacer nuestros propios sprit pero para la clase de hoy lo que estoy haciendo es vale cogerlos de por ahí en este ordenador tengo el gimp No todavía no pues vamos a instalarlo vamos a ver en este ordenador necesito tener el gimp así que me lo instalo y instalando un segundo a ver a ver no Claro Según como lo interpretemos No yo lo interpretaba al revés es decir vamos a ver si la condición de muerte es demasiado fácil es decir si el juego es demasiado fácil el jugador no muere el usuario no percibe reto y se cansa o sea lo que tú estás diciendo vale Y si la condición de muerte es demasiado difícil O sea si muero siempre si muero Cada día los 30 segundos de jugar me frustro porque digo No duro más de 30 segundos vale o sea sí lo que tú quieres decir sí es que según como se mire vamos a ver si ya tengo el gim Sí ya tengo el G Vale pues quería demostraros porque me va a costar muy poco esfuerzo lo fácil que va a ser eh reemplazar vale escritorio reemplazar los cuadros por sprites así que atención Mirad vengo por aquí y digo Este es el malo por qué Porque me la gana Así que este es el malo copio y pego lo exporto en no tengo aquí dam no Qué cosas por qué bueno pues es tema de archivos vale var no per Cómo espera vamos a ver no tengo permiso vale Este es el malo Okay venga y este de aquí voy a decidir porque me da la gana que es el bueno no tiene mucha pinta de Bueno pero vale copio pego Y exporto por cierto este qué tamaño tiene por saberlo 34 Bueno pues Vale pues venga lo que sea y este es el bueno así que Mirad ahora me vengo aquí vale me voy a escritorio me voy al bueno y al malo me falta el feo me voy a dam me voy a segundo me voy a ver un momento Ah que se me ha apagado la pantalla un segundin ahora programación multimedia análisis de motores animación 2D pego ahí El bueno y el malo vale Y ahora en el código creo 014 sprites html y digo cargo las imágenes del bueno y del malo entonces digo bar imagen bueno es igual a New image y imagen bueno Sr c es igual a Bueno png ahora bar imagen malo es igual a New image y imagen malo es igual punto src es igual a malo.png con lo cual cuando los dibujo en lugar de decir Fil rect contexto do punto eh draw image y le digo imagen bueno coma eh imagen bueno coma dis pun x coma dis punto y vamos a probarlo y ahora hacemos el malo probamos primero el Bueno luego el malo vale sprit Y si os fijáis ahí tengo el bueno que ya no tiene por qué ser un Sprite de color verde sino que puede ser un Sprite de momento hoy estático sin animación y todo eso vale pero es un Sprite vale Y ahora me voy al malo y en el malo en el npc contexto draw image imagen malo con programación orientada a objetos lo cambio en una parte en un solo sitio y se me cambia en todo el juego y entonces ahora fijaos que el qué no porque era Alfa ves Mira sí como era Alfa bl ves O sea no estaba leyendo negro realmente estaba viendo si hay un píxel transparente o hay un píxel sólido Y si hay un píxel sólido pues Exacto la cuarta realmente pero sí vale o sea 0 1 de los tres eso es efectivamente un poco para deciros que eh yo evidentemente en esta asignatura me centro en la programación no en los gráficos pero también hay que decir y también hay que reconocer que un juego que con gráficos de rectángulos parece una auténtica pero sin embargo simplemente le metéis unos sprites chulos y de repente el juego tiene Otro aspecto completamente diferente vale bien una vez que tenemos esto Una vez que tenemos esto ya podríamos hacer un celda o algo así volvemos al documento Y a partir de aquí hemos hablado de las condiciones y Tenemos también que hablar de los tipos de juego en la clase de hoy evidentemente estamos hablando de momento únicamente de juegos 2D vale ya llegaremos a juegos 3D eh aparte os enseñaré un bueno dos frameworks 3js y aframe.io que pienso que os van a facilitar un mogollón la vida a la hora de crear juegos 3D vale pero de momento vamos a hablar de juegos 2D Qué tipos de juegos 2D conocéis por ejemplo un tipo es juego cenital hay diferentes formas de clasificarlos vale bueno Pacman no es un tipo de juego es un juego concreto mítico Eso sí vale tenemos el juego cenital tipos de juego claro según criterios cierto es vale en cuanto al punto de vista muy bien Vamos a ver punto de vista tenemos cenital quiere decir que la cámara está arriba tenemos plataformas la cámara está adelante y lo ves todo en altura vale No según criterios Y luego el punto de vista es un criterio Vale entonces pero sí plataformas Es según punto de vista Tenemos también isométricos son juegos realmente 2,5d están a caballo entre 2D y 3D pero la forma de programarlos es 2D qué más no Exactamente Porque recordad que hoy estamos trabajando con juegos 2D Entonces desde el punto de vista si yo hago 2D tenemos cenital plataformas e isométrico si yo con considero empiezo a considerar los juegos 3D tengo fps que es First person Shooter tengo TPS que es third person Shooter cuando la cámara está arriba digamos el personaje qué más vaya aquí estamos vale podéis decirme también otros criterio si queréis Vale Según el tipo de juego No eso es punto de vista igualmente Sí s Sí vale en tipo de juego tenemos shooters que es o sea básicamente el shoot map muy bien Ahí estamos tenemos deportes el Shooter digamos que podríamos considerar que es el juego de guerra tenemos RPG juegos de rle playing juegos de gestión correcto móntate tu propio equipo de deporte tenemos simulación tenemos estos qué más tenemos juegos de cartas azar incluso o sea cartas dados Ey qué ha pasado aquí a ver tenemos aventuras tenemos carreras también carreras podría estar dentro de deportes Pero bueno eh tenemos combate podría estar dentro de shooters Pero bueno una cosa es combatir y otra cosa es disparar sí tenemos juegos de construcción lo cual nos lleva a los mundos abiertos tenemos el hack and Slash los arcades vale Hay un montón de tipos de juegos de lucha es puesto por ahí no Sonic es plataformas Sonic se considera plataformas en cuanto claro es correr digamos es correr bit map vale No pero aún así los viejos todos los juegos viejos se clasifican dentro de alguna una o varias categorías claro luego está los viejos en los inicios el pong y todo esto vale bien con todo esto La idea es a continuación en esta última parte de la clase empezar a plantearos el que empecéis a mezclar tres conceptos que hemos visto hoy concepto número uno el concepto de la programación lo que puedes hacer con la programación y el resultado que da el concepto número dos Uy el concepto número dos que es que da igual el juego que hagas en principio da igual la el punto de vista da igual todo en principio debería haber un punto de inicio una condición de ganar y una condición de morir y que el juego que hagas debería estar encuadrado en alguno de Estos tipos y en alguna de estas perspectivas Oye hoy todavía cenital plataformas isométricos hoy todavía no podéis hacer ni fps ni tp es ni juego isométrico cenital muchos rpgs están isométrico tú ves desde arriba desde muy lejos Vale o los de estrategia lo que quiero que vayáis pensando es Qué tipo de juego queréis hacer vale Qué tipo de juego podríais empezar a hacer con lo que hemos visto hoy evidentemente insiste una vez más Esto no es una formación de grafismo vale No es una formación de gráficos ni 2D ni 3D que si queréis materiales tengo un montón de ellos de complementarios con lo cual evidentemente siempre estamos hablando de sprites de internet y utilizarlos dentro del videojuego vale yo no me voy a no me voy a preocupar de dónde habis sacado los gráficos no me voy a preocupar de que el código sea vuestro lo habis hecho vosotros vale claro José Manuel Mira te voy a decir una cosa te voy a decir una cosa que me pasaba hace años Yo hace un montón de años y esto lo podéis ver en mis redes sociales especialmente en instagram desde el año 2010 hasta el año 20171 yo no todo pero gran parte de mi trabajo era Sí lo que pasa blanca Es que este es medio cital pero como el personaje no lo ves desde arriba sino que lo ves desde frente es un poco raro o sea el de hoy es un poco una mezcla no O sea pretende ser cenital pero el personaje luego se ve como en perspectiva Bueno pues desde 2010 hasta 2017 yo me dedicaba a ser profesor en un máster de programación de videojuegos insisto si miráis mi Instagram lo Vais a ver y cada final de curso yo iba con los proyectos de los alumnos al director del centro y le decía Mira estos son los proyectos de este año y el tío los veía Y decía esto es una y yo decía eh No pero el videojuego está super guay y él que era no era programador sino se fijaba en los gráficos decía pero es que es horrible es una son cuadrados de colores y yo decía No pero fíjate que está super bien programado porque la orientación a objetos porque el rendimiento porque la comunicación de red y el tío decía me la suda O sea visualmente el juego es una Vale entonces por eso lo que estaba comentando José Manuel es que claro que esté programado bien programado es lo que a mí me importa como profesor de la asignatura de programación multimedia y en dispositivos pero también tener en cuenta que cuando lancé el juego y lo juegue la gente pues no pueden haber cuadraditos negros sino que tiene que haber algo que visualmente pues sea un poco atractivo vale esto es que me está ah no vale que creería que me estando alguien por la plataforma de tame o algo así bien así que por hoy poco más ahora haremos el descanso de la tarde vale ya hemos tenido hoy unos cuantos conocimientos de programación de videojuegos eh Solo con lo que hemos programado hoy Yo creo que ahora cuando juguéis a muchos de los juegos que jugáis normalmente especialmente 2D pues empezaré a entender qué es lo que hay bajo de ese juego Vale qué es lo que mueve ese juego y un poco antes que antes de irnos al descanso deciros que tranquilos porque en semanas siguientes vamos a estar trabajando con estas mismas técnicas pero creando más juegos luego volveremos a ver el concepto de Lienzo volveremos a ver el concepto de bucle volveremos a ver el concepto de programación orientado de objetos aplicado a juegos vale o sea no será todo nuevo hoy ha sido explosión cerebral lo sé A cambio he querido daros algo que se parece mínimamente a un juego en la pantalla vale Y en próximos días evidentemente Pues Seguiremos con esos conceptos para ir mucho más allá eh José Manuel efectivamente eh No es que tienen un rendimiento pésimo sino que últimamente salen juegos que es que requieren que el ordenador sea una barbaridad de ordenador ya os explicaré por qué tiene que ver con el ciclo de vida de producto muchas veces cuando haces un juego lo que hacen es que no lo hacen para los ordenadores de hoy sino que si estiman que ese juego va a tener un ciclo de vida de 10 años lo hacen para el ordenador promedio dentro de 5 años es decir tiene un sentido otra cosa es que nos guste o no ese sentido Pero tiene un sentido vale o sea no lo hacen porque sí y luego también es cierto que hay muchas veces defectos de optimización también lo hay también sacan muchas veces juegos rápido y de prisa y mal y luego con el tiempo van sacando parches también lo hay vale Ya hablaremos un poco de todo eso Pero hoy el objetivo era pues empezar a programar algo bien voy a obs voy a