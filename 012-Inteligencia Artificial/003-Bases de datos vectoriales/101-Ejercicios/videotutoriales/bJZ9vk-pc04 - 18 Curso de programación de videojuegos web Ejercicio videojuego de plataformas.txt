bien entonces lo que voy a hacer es crear bueno primero arrancar samp sanz contra el panel arranco apache como os decía y me voy al disco duro ce me voy a camps me voy a hp docs y ahí creo una carpeta llamada plataformas objetos no sé si la tenía ya o pq no vale entonces creo una carpeta llamada plataformas objetos dentro de esa carpeta voy a crear por una parte una carpeta llamada personajes y otra carpeta llamada nivel entonces claro en los personajes voy a introducir todos los personajes que he descargado de open game art y en la carpeta de nivel voy a introducir el archivo bits lands que también he descargado de open game arts este es un archivo que tiene ahora mismo está teniendo en detalles 1944 x 544 por tanto esto nos va a dar para hacer un juego muy pequeño pero me parece fantástico quiero decir que vamos a hacer una ventana muy pequeña ahora veréis el gong con css zoom la vamos a ampliar con lo cual el juego va a tener una estética pixelada pérez justo lo que quería con lo cual me parece fenomenal entonces para ello voy a hacer lo siguiente ahora dentro de la carpeta principal pues me creo un archivo de texto index html por cierto y copias de seguridad vamos a ver por aquí no se ven vamos a ver en vista en opciones en cambiar opciones de carpeta quiero mostrar archivos no quiero ocultar nada vale no estoy viendo no sé por qué pero de normal me parecer un huevo de archivos ocultos ahora ese caso arrancó el macro tengo la mochila y os enseño qué pinta tienen los archivos temporales de javi pero hay archivos temporales y ozil entonces plataformas objetos por tanto abre el ebit lo lanzo y bueno en principio para empezar vamos a hacer lo siguiente vamos a hacer un archivo html que tenga una mujer que tenga un body voy a tener un canvas que va a tener el escenario y este canvas así en principio mirad si este archivo tiene ahora mismo está teniendo ahora mismo vamos a verlo 944 prácticamente casi mil píxeles pues fijaos ese canvas va a tener wish 100 píxeles únicamente igual es un poco escaso pero y height va a tener 60 píxeles vamos a verlo presenta píxeles en el gel permitirme hacer un pequeño style simplemente ya sabéis luego lo quitaremos pero simplemente para decir lo que tenga el escenario quiero que tenga un borde de un píxel solid black simplemente para que cuando vaya al localhost plataformas objetos bien tenga esto en la pantalla de momento mirada atención lo que voy a hacer es un zoom para ver esto más grande más adelante le aplicará una propiedad css de zoom al pero ahora de momento lo que quiero hacer un zoom en la pantalla así que por tanto ahora empieza a dibujar y digo lo siguiente a continuación ahora traeremos jquery por supuesto pero a continuación me voy a script y digo bar escenario es igual a new image por tanto digo escenario punto src es igual a entrar dentro de donde ahora lo veremos dentro de estas son hp box plataformas objetos dentro del nivel y bits lands punto png así que nivel barra islands punto png por supuesto ahora lo que voy a hacer es mono amarran fer cargando jquery porque nos vendrá muy bien así que lo saco de cualquier otro proyecto plataformas objetos lo pego lo renombró para simplificar el nombre y lo llamo en esta parte del juego digo script src es igual a jquery punto js y por tanto ya puedo hacer el documento y crear una función qué va a hacer un set i'm out a cargador quiero cargador ejecutarlo en un segundo para darle tiempo que la imagen se cargue aunque es una imagen muy poco pesada en este caso por tanto su uso en cargador es una función que básicamente va a dibujar el contexto claro que es el contexto pues digo barce es igual a documento punto de element by heidi y voy a el escenario y por tanto ahora voy a decir bar contexto salud es igual a cero punto get context en 2d por lo cual ahora en cargador al final puedo poner contexto puntos row image y digo quiero cargar el escenario 0 y claro al hacer esto evidentemente lo que ocurrirá dentro de un segundo es que la imagen se cargará o debería cargar vamos a ver si tenemos algún error consola un error and expecto the string en la línea 16 set i'm out cargador aquí vale muy bien es que esta función de post o mal entonces es función y a éste le falta un paréntesis vale ahora sí así que guardo y recargo y yo tenemos cuidado veis que a la función le faltaba un paréntesis hay el escenario y me parece súper pixelado pero si es fantástico es lo que quería este efecto pixelado claro ahora el único problema que tengo ahora mismo es que mirad pues el escenario qué es este de aquí estoy viendo prácticamente ahora veréis esto viendo prácticamente este caso de aquí arriba lo que quiero es ver este cacho de aquí abajo vale entonces para ver este caso de aquí abajo lo que quiero en este caso es decirle que no se dibuja melo en 0 en x pero en y si esta imagen tiene cuanto hemos dicho 400 y pico cuando no sea de alto de 540 y algo no pues voy a decirle por ejemplo 500 a ver qué pasa así que aguardo y recargo estaba bien a 66 - vamos a darle no lo sé vamos a verlo a usarlo siempre algo 54 46 y en fin has dicho que no claro el positivo va hacia abajo negativo hacia arriba así que menos 400 así que vale menos 400 no si me demasiado menos 200 demasiado poco hay menos de 300 ahí es perfecto vale con lo cual tenemos nuestro cero aquí y ahora lo que voy a hacer es meter el personaje meter un personaje es decirme quién es el bueno vamos a ver tenemos el arquero tenemos el del hacha que parece un número algo así tenemos el gnomo del hacha a ver en la espalda este no esté no hago la mitad de bueno si de repente así y placas hasta con una espada de la nada si bueno yo qué sé vamos a jugar con esto entonces este es el v de r1 vale pues lo que quiero hacer es lo siguiente le digo para el personaje es igual a new image y digo personaje punto src es igual a personajes y vd r 1 punto png así que por supuesto en el cargador ahora digo contexto punto draw image y digo que en el escenario dibujo perdona el escenario dibujo el personaje de momento en 0 así que guardo y recargo y me dibuja el personaje allí pero claro qué problema hay pues cómo está dibujando toda la tira de sprites así que quiere usar en este caso el clip y por tanto vengo aquí tendré que poner los nueve parámetros a mi conexión a internet muy bien con lo cual sin conexión a internet vamos a verlo sin conexión a internet pues tendremos que guiarnos de memoria o de lo que tengáis de código por ella anteriormente también te digo exactamente digo qué bar vale entonces claro vale entonces era 00 el clipping sería por ejemplo 100 por probar algo déjame averiguarlo voy a ese archivo lo voy a editar con el gimp para saber pues según el número de sprites que tenga los personajes que no esté según el número de sprays que tenga por realmente que anchura tiene cada uno de ellos no es mirada tiene 336 calculadora tiene 336 partidos 6 y eso quiere decir que a cada uno le tocan 56 píxeles vale por tanto de hecho mira al 56 por 56 justo vale pues digamos que empezamos en cero llegamos hasta 56 y lo acabó metiendo en 00 y me faltan dos parámetros 56 ayer así que hago así y vamos a verlo perfecto pero vale con lo cual ahora simplemente lo que quiero hacer es que el personaje pues no empiece en el súper cero sino que empiece por ejemplo en 40 vale entonces hago así con lo cual personaje ahí voy a colocarlo un poco más abajo voy a decirle 6 píxeles con lo cual hay límite y si no me ha quedado de casualidad pero me ha quedado clavado así que ya tenemos por aquí esto vale programe estación de una especie de alias pero bien dará luego a ver si quitamos la anti allers y lo que queremos ahora simplemente va a ser en primer lugar poder mover al personaje para que vaya avanzando y a ver con qué enemigo se va encontrando claro lo primero que quiero por tanto es ser capaz de mover el personaje con los controles y quiero evidentemente una función loop vamos a preparar una función loop y por tanto eso será en el siguiente vídeo por tanto entramos dentro de la dinámica de bar temporizador es igual a nada y en el cargador digo el temporizador es igual a ser time out y ejecutó luz pues un segundo otro segundo el loop digo clear time out vamos a verlo clear time out temporizador y le digo otra vez temporizadores igualase time out loop en por ejemplo voy a empezar con 100 es decir con 10 veces por segundo y en fotogramas por segundo a partir de aquí creó una variable que se llama escenario x que es igual por ejemplo a 0 empieza siendo 0 así que por tanto yo al final aquí voy a hacer lo siguiente dibujo el escenario dibujo el personaje pero en el escenario voy a decirle que se dibuje en escenario x y ahora simplemente para meter una primera condición para que veáis algo moverse voy a poner escenario x + + que es lo único que me falta lo único que me falta es un contexto barra clear rect para borrarlo todo desde cero punto cero hasta a 100,60 vale con lo cual ahora veréis que cuidado no es escenario más ese escenario de x menos porque tiene que ir hacia el otro lado y veremos como de momento de manera automática evidentemente pues el personaje va avanzando sí claro a veremos a eso no veo nada lo veo casi nada vale por tanto voy a replantear un poco el tamaño del escenario porque con 100 píxeles igual es demasiado poco entonces voy a poner y voy a poner los 120 a ver así y aquí pongo 200 120 a ver si hay un poco mejor vale perfecto hecho por tanto de exponer aquí arriba a 200 x 120 en el borrador 200 x 120 y lo demás me lo dejado exactamente igual entonces vamos a manejar esto ahora mediante las teclas mediante el teclado y por tanto ya no quiero que escenario x sea menos si no voy a recargar sino que dentro del cargador quiero detectar cuando modificó cuando toco una tecla dentro de él el objeto el canvas o lo que sea por donde digo cuando sobre documento punto round y ejecutó una función que tiene la es por ejemplo que tiene un parámetro llamado b y digo en este caso a ver si tengo ya vale dime porque la función de cargador lo podríamos hacer en red y sin ningún problema pero nunca el loop me quedé con respecto a hacerlo a dónde no hay ninguna diferencia no te olvidas sino que cuando estoy trabajando con una función que hay down es decir para hacer un clic no necesito meterlo en un loop claro cada vez que le llame aunque hay down aunque esto no esté dentro de un loop se va a ejecutar eso y ahí y la pues poniendo como en breve entonces lo que voy a hacer ahora es decir lo siguiente vamos a ver para detectar solo teníamos por aquí algún juego pero bueno en el isométrico entonces nos venimos aquí isométrico por aquí y selecciona el código donde ya tendría aquí clic brawn pues elección o estos de aquí los pegó en el documento y digo sí y which 37 pues voy a decir escenario x menos o más no lo sé vamos a probarlo de momento me voy a dejar las los desfases y escenario x menos y probamos por tanto guard y recargo y vamos a ver que efectivamente es así en cuanto a que con esto podemos mover al personaje el personaje tal vez quizás tiene un spray de correr o moverse no lo sé y los tres primeros son de moverse digamos por tanto vamos a utilizar esos sprites para hacer que el personaje pueda caminar hay una cosa que quiero hacer mirar y es la siguiente y es que digo si el escenario x es menor que cero en ese caso no puede ser menos - así que digo vamos a ver sí es cierto que escenario x es menor que cero en ese caso escenario x es igual a cero lo cual le impedirá que escenario x pueda ser nunca veis me puedo mover para que lo hecho al revés si es mayor que 0 en ese caso escenario x es esto fijaos cómo me puedo mover en esa dirección pero no me puedo mover en esta dirección no puedo avanzar más allá de ese panel izquierdo bien ahora lo que quiero es que cuando el personaje esté caminando cuando yo pulse digamos el loop vaya rodando a través de los fotogramas clave a través de los sprites del personaje por tanto para ello voy a hacer lo siguiente mira aquí arriba en las declaraciones originales en las declaraciones del personaje digo bar sprite caminando es igual a 1 eso quiere decir que empieza en la posición inicial cada vez que yo pulsó la tecla digamos 37 le voy a decir sprite caminando más lo mismo ocurrirá cuando pulsó la tecla contraria en todo caso siempre se aumenta una unidad del sprite y por último como tenemos ya sabemos tres sprites voy a decir sí sprite caminando es mayor que 3 en este caso sprite caminando es igual a cero lo cual quiere decir que cuando te pases de tres vuelve a empezar uno dos tres y luego no me hagas 4 5 6 123 vuelve 123 perdona es igual a 1 2 3 vuelve a 123 y eso hace la sensación de caminar claro esto quiere decir que cuando yo dibujo el sprite no voy a poner aquí 0 recordad que estos primeros parámetros es el punto en el que empieza este es el punto x por tanto voy a decir en este caso sprite caminando x 56 - 56 vamos a verlo y si todo ha ocurrido correctamente y ahora hago así y daros cuenta como ya tengo el personaje caminando lo mismo hacia atrás es un poco michael jackson vale pero está ahí caminando cuando lo dejas fijo no hace la animación no lanzan mucho más lenta pero bueno ya nos preocuparemos de eso ahora de momento lo importante es que mediante sprays y mediante una imagen pues ya tenemos al personaje funcionando mirad vamos a por una operación de salto por tanto en este caso lo que quiero es que cuando el personal cuando yo pulse el botón de hacia arriba me ejecute y un salto entonces para ello mirad voy a crear vamos a ver lo estaréis caminando vale voy a crear una variable llamada saltando es igual a 0 por defecto el personaje no está saltando y ahora digo bar velocidad y es igual por ejemplo a 10 voy a comentar un poquito el código porque claro es lo que tienen los juegos que enseguida se van complicando así que esto es cargador del escenario para saber que todo esto de aquí el cargador del personaje cargador del canvas y así un poco vamos viendo que cada línea pertenece a un bloque por tanto ahora digo lo siguiente tengo saltando tengo velocidad y tengo bar posición y exposición y su posición y es igual a donde hemos dibujado el personaje pero no creo pues y es la posición donde está aquí en lo que pensamos 166 píxeles vale 6 píxeles sí posición y son 6 con lo cual yo vengo aquí mirad yo vengo aquí y digo sí saltando es igual a cero perdona es igual a uno sí es cierto que estoy saltando en ese caso posición y por ejemplo más por decirte algo no porque es la del personaje no del escenario es el personaje el que va a saltar en x movemos el escenario en y movemos el personaje entonces yo vengo aquí y digo en 6 pongo posición y comprobamos que todo siguió funcionando y ahora por ejemplo mira la atención digo cuando toques la tecla 40 era la 40 la 38 la aseguró la 3 y la 38 te voy a decir saltando es igual a 1 qué es lo que ocurre por tanto ahora al recargar porque yo me puedo mover de izquierda a derecha y cuando algo así o se cae bien se cae se cae no es ya no es porque sea más o porque sea menos sino porque yo de momento lo que he hecho aquí es detectar cuando realmente estaba saltando cuando no está saltando de momento lo que es bajarlo poco a poco para comprobar que ocurre algo cuando pulsamos el botón de mover sin embargo lo que voy a hacer ahora es un movimiento un poquito más complejo y voy a decir lo siguiente posición y es igual a posición y menos velocidad y os acordáis y lo puesto antes velocidad y ahora en la línea de bajo digo velocidad y esto es vale igual 2 vamos a verlo y si todo va bien y si todo va bien con esta fórmula de posición y velocidad vamos a ver hace bomba correcto pero es lo que quiero así que fijaos que con esto pero salta tiene el típico movimiento de salto pero se cae porque se cae bueno pues se cae evidentemente mirad porque si yo vengo aquí y digo posición perdona si es cierto posición y es mayor que 6 en ese caso saltando es igual a cero cuando detecte que has vuelto al píxel 6a y deja de saltar por si todo ha ido correctamente salto y mirad bueno se queda justo una más abajo mayor o igual que 6 bien vale vamos a verlo ah sí sí claro porque eso es efectivamente eso entonces tengo que decir saltando es igual a cero y velocidad y es igual a 20 creo que habíamos puesto y 20 10 así que guardo y recargo y ahora comprobamos cómo el personaje agua vuelve a hacer lo mismo vamos a verlo iguales a mí que no había recargado black amaya bien voy a hacer un control mayúsculas r no es que he puesto felicidad entonces voy a poner velocidad y así mejor así que salto y tengo el personaje que se puede mover y tengo al personaje que puede saltar pero tengo el típico problema de siempre que es el problema de que claro yo aquí tengo una serie de plataformas y cada plataforma tiene una altura diferente de hecho cuando el personaje rebasa la forma original parece que esté volando en el cielo por tanto lo que en este caso ocurre es que tengo que calcular cuál es la colisión con cada una de las plataformas que tengo a continuación vamos a ver la imagen es esta de aquí vamos a calcular pero si queréis vamos repasando un poco el escenario tengo ahí arriba si os fijáis al principio tengo dos plataformas tengo esta y si me apuráis podría dar en bajar ahí abajo luego tengo esta plataforma pero también tengo esta de aquí si voy por aquí madre mía aquí tengo una escalera y aquí esto no es plataforma esto es toda una y luego prácticamente sería digamos una recta hasta el final que soluciones me dais no te entendido cuéntales y eso de qué línea un hombre y claro vale vale si lo que quieres es que no nos metamos en colisiones para eso prefiero mover al personaje aquí abajo y empezar a jugar lo dices para centrarnos en malos y dejar colisiones para más adelante a los correctores de oro vale pues prefiero en este caso dejar al personaje aquí más que hacer un compás y que el personaje vaya rodando por aquí nos preocupamos de los malos y ya preocuparemos de colisiones bueno eso es lo que quería que un poco razonamos efectivamente yo recomendaría hacerlo como el flap y vert porque estaba pensando de en el gym dibujar aquí unas zonas rojas y decir y cuando te encuentres una zona roja es que no puedes bajar más hacia abajo pero bueno vamos por tanto a colocar al personaje mirad aquí abajo por tanto le digo que la posición del personaje inicial atención no será 6 sino que será ni idea sino que será 26 igual vamos a ver lo recargo allí pues no será 26 sino que será el 46 no estamos cerca pero no todavía para ello creo que ya casi la posición del escenario la posición del escenario x escenario existencia que estaba allá arriba con el escenario voy a decir que sea 50 vale menos 50 vale pues menos 150 y simplemente lo que voy a hacer ahora es que el personaje en lugar de ser posición y menos pero dos personas y 56 va a ser 54 así que para que el juego cuadre inicialmente fijaos tengo posición y del personaje 54 escenario x menos 150 ahora comprobamos cómo el personaje puede caminar la tendremos que rehacer también la condición del salto donde le voy a decir que si posición x es menor proporción y es menor o igual a 54 en ese caso deja de saltar vamos a verlo y comprobamos como puedo saltar puedo caminar mientras salto y tengo ya ahí el personaje caminando muy bien con lo cual con esa trampilla tenemos ya el juego preparado para que podamos lanzar ya digamos los malos ahora lo que quiero en primer lugar es que aparezca un personaje y que aparezca desde la derecha hacia la izquierda por tanto seleccionó alguno de los sprites y digo plataformas objetos personajes y seleccionó un personaje pues no sé a ver cuál podemos seleccionar mira qué os parece el arquero es perfecto porque tiene tres posiciones de andar cuatro posiciones de disparar al típico arquero que venga primero andando y en cuanto detecte que está a más de equis píxeles de mí pues entonces empieza a disparar flechas así que lo primero que necesito mirar es que este personaje pues porque nos iba a venir de la derecha a la izquierda atención mirad me lo primero que voy a hacer es imagen transformar voltear horizontalmente es decir lo voy a voltear horizontalmente para que mire hacia mí y ahora lo voy a sobreescribir no lo voy a exportar como se ve uno ve como versión ve digamos en lugar de machacar lo original lo guardo como una versión más ahora por tanto lo voy a cargar y al cargarlo me voy a ir a condiciones iniciales y digo cargador del arquero y vigo bar arquero es igual a new image arquero punto src es igual a personajes barra y vamos a buscar ese personaje que es él v 1 punto png gv 1 punto png ese personaje ahora mismo está le doy una posición inicial antes de hacer objetos voy a hacer un personaje concreto para que lo veamos en movimiento para que le demos un poco de comportamiento así que le digo un arquero perdón por equis arquero es igual a no ser a 200 a 300 o algo así 2x arquero así que por tanto claro ya vamos pensando que había que habrá una propiedad llamada número de flechas una propiedad llamada vida una propiedad un método llamado dispara un método llamado camina vale vamos pensándolo bien entonces para ello dentro del cargador nada dentro del loop digo lo siguiente vamos a verlo así que digo contexto punto draw image y digo en post x arquero bueno quiero cargar el arquero 2x arquero menos escenario x realmente vamos a verlo escenario x coma como cuanto con +54 voy a ver el 54 creo que es escenario x - x arquero de puesto al revés escenario x de hecho más os x arquero vamos a verlo así que recargamos y si todo ha ido bien mira tengo ahí el arquero y fijaos que de momento el arquero está quieto en el sitio lo cual es perfectamente normal pero es lo esperable claro ahora lo que quiero porque veis que aparecen todos los planes del arquero ahora lo que quiero es que ese arquero vaya caminando para que el arquero vaya caminando tengo que medir cuántos sprites tiene este personaje en primer lugar quiero sobre el sprite de caminar cuántos sprites tiene el personaje vamos a ver son 39 2 y son 7 sprites 39 2 partidos 7 me sale a 56 qué curioso así que lo que voy a hacer es lo siguiente lo que voy a hacer es de momento voy a decir vamos a ver igual que arriba digo 56 por 6 coma con 56 como escenario x - + post arquero 54 56 si todavía bien esta fórmula de develar la posición inicial del arquero hay 3 me gustaría empezar a crear una clase para empezar a definir el arquero porque el tema no es un arquero el tema de este es que en el juego tenemos que tener x ar que los diferentes y no quiero tener que ir creando pues ya sabéis cuando tengo varios objetos matrices pero entonces matrices la posición x matrices la posición y matriz estaban dando una matriz está saltando matriz dpto tras haber entonces lo que quiero por tanto mirada atención es que hago lo siguiente me voy a objetos donde hicimos esto en qué juego lo hicimos tan que es muy bien en tanques por ejemplo efectivamente ahí lo vamos a tener entonces en tanques y hago lo siguiente de la misma manera atención esto no es obligatorio pero es una recomendación de la misma manera que hicimos tanque punto js es decir que creamos una función tanque pues me voy a crear dentro del juego de plataformas objetos me voy a crear un nuevo archivo pero sabes que no hay directamente dejadme que haga una carpeta porque si luego tengo arquero y tengo el del palo y tengo el gnomo y tengo el no sé que no me vayan a nuestro de tal entonces voy a crear una carpeta llamada por ejemplo clases y dentro de clases creo un archivo llamado arquero punto j s alqueró punto j ese es un archivo que meto dentro de heavy y al que le voy a dar el siguiente código me copió el del tanque y digo bar arquero tendrá las siguientes características bueno va a tener un nivel digamos que tiene un nivel y digo this punto y de como el tanque es igual aire this punto munición pues bueno de flechas con cuántas flechas diríais que empiezan arquero pie no tenemos tampoco flechas con cuánta vida empieza el arquero bien cuidado porque cada vez que un espadazo le quitas una bebida claro 10 this post x les voy a decir que bueno más punto round voy a hacerlo de momento 200 y logremos un más punto round para que vayan apareciendo malos vale independientemente de momento puede ser porque estamos re declarando variables si es que estamos re teclado no está buscando un nuevo objeto y ahora pos y sí que sé que de momento en este juego tiene que ser un y creo que más o menos lo tenemos ya tiempo descanso vale pues un segundo y eliminamos el ángulo y ahora a continuación la vuelta del descanso de cara vemos métodos para que el arquero pueda o bien disparar o bien caminar así que tenemos una serie de propiedades para el arquero que son su identificador las flechas que tiene la vida que tiene la posición x y la posición y lo que quiero ahora es decir arquero punto prototype y voy a tener una función llamada dispara y una función llamada camino cuando el arquero dispara lo primero que quiero hacer es decirle this punto flechas menos eso para empezar arquero punto prototype punto camina es igual a function y aquí pondré algo de código para que el arquero esté caminando hay una tercera función que es arquero punto prototype punto recibe daño ya sabéis que no debo poner una ñ así que recibe dano o recibe daño con n y o lo que queráis vale pero no una ñ es igual a function y voy a decir en este caso de vida menos bueno pues a partir de aquí por tanto una vez que tengo esta clase dentro de lo que es el videojuego original quiero crear una instancia así que para ello vamos a verlo para ello en el cargador por ejemplo en la función cargadora voy a decir bar vamos a ver espera dónde estás esto no había un segundo que vuelva aquí creo clases sí a los tanques vamos al archivo original y recordamos que aquí está tanques es igual ánimo al rey pues voy a decir vara esto en las funciones preparatorias al arquero no porque ya he usado antes arqueros es igual amigo al rey y con eso por tanto ya puedo decir esto voy a decir voy a pasar con un arquero digo bar arqueros pero un arquero es igual a mí arquero cuidado y un te digo vamos a ver la función se llama arquero claro sabes que no esperes por un momento pero momento no es demasiado bueno que llame un objeto con el mismo nombre que aquí he llamado a la imagen por tanto voy a hacer que eso sea arquero o bj el objeto del arquero así diferenciamos lo que es la imagen de lo que es la instancia del objeto y por tanto actualizar los prototipos mirad arquero bj punto pero total me dispara arquero viejo tapón de producto examina y arquero bj punto prototype puntos recibe daño por tanto ahora puedo decir en este caso arqueros de 0 es igual a arquero o bj y el programa sabrá perfectamente de qué estoy hablando cada en cada momento new arquero bj de 0 por qué pues porque así le pasó un identificador acordaos qué arquero espera recibir un identificador un nivel que luego tomará como el y del objeto cuidado mucho cuidado porque esto está en un archivo externo llamado arquero pero yo no he llamado a ese archivo por tanto script src y llamó a la carpeta clases y llamó a arquero punto j s para que cuando yo le diga que quiero crear un new arquero o b j el programa sepa exactamente de qué le estoy hablando ahora que tengo toda esta información es cuando puedo ya he creado una instancia y por tanto ahora hago lo siguiente en el loop quiero dibujar lo siguiente quiero dibujar un remake vamos a ver lo del arquero o bj de 1 alquilo bj de 0 perdón arc perdona pero sí arqueros de 0 y ahora cuidado porque cuando ocurre esto tengo que pensar cuál es la posición x del objeto y la posición x del objeto es escenario x esto se queda por arqueros de 0 punto 2x creo que no punto post x no por qué yo no quiero llamar una imagen efe bien entonces arqueros de 0 puntos x bien correcto y ok así que si todo ha ido bien recargo en expectante aunque el ine 32 línea 32 bar otra vez muy bien eso es si tu dedo bien ahí tengo un arquero pero ese arquero viene de un objeto si queréis ver la demostración me voy a arquero y le digo que va a tener una posición aquí es de 300 para probar para hacer una primera prueba así que guarda y recargo y comprobamos como ahora está desplazado ahora está más hacia allá en relación al trabajo el arquero el contexto de los emails aquí del arquero puedes ponerlo cuando el personaje está caminando lo que tiene que ocurrir es que 10 puntos x menos si menos es decir cuando el personaje está caminando quiere decir que su posición x está disminuyendo porque se va acercando hacia nuestro personaje así que yo ahora digo lo siguiente quiero medir la distancia entre nuestro personaje y el arquero y quiero decirle si la distancia es más de tanto tú ves caminando pero cuando te acercas demasiado deja de caminar y empieza a disparar flechas por tanto voy a hacer lo siguiente él ha dispuesto este cuando camina a dos puntos x menos bien pues en el loop lo que hago voy a crear aquí una sección de texto la distancia entre él arquero el personaje sí sigue realmente es escenario x es el escenario x el personaje está más o menos por ahí el personaje es escenario x muy bien si escenario x menos arqueros de 0 puntos x es menor qué bien por ejemplo perdón a perdonar o no muy bien si correcto es esto esta es la fórmula si escenario de x es menor que escenario de x más arqueros 0.2 x y esto es menor que 10 menos que en este caso console punto log ya estás cerca una cosa que voy a hacer si queréis es que voy a poner con sobre el punto log de todo esto para ver cuál es esa fórmula así que ahora mira algo así y ya estás cerca siguen siendo menos 300 como es posible que sea menos 300 fijaos que esa distancia no va modificándose lo cual es un poco raro vamos a verlo escenario x vamos a verlo no varía parece como que no varía abal el escenario x no está haciendo nada claro si mirar nada pero es que si hago esto escenario x menos escenario x se anulan entre los dos con lo cual lo único que me queda es la distancia al objeto vale aquí vamos a verlo 300 sigue siendo menos 300 aquí ahora si se va acercando y comprobamos que cuando me acerco al personaje eso debe dar casi pues bien pues lo que voy a hacer ese entonces decir lo siguiente me menor que 100 por ejemplo yo que sea así elimino esto y digo lo siguiente atención y digo mira cuando me acerco al personaje más allá de 100 píxeles me dice ya estás cerca y se dice ya estás cerca lo que quiero es que el personaje empieza a disparar qué voy a hacer por tanto pues mira lo que hago es qué si el personaje es menor que 100 en ese caso arqueros de 0 punto dispara en caso contrario arqueros de 0 punto camino si estás cerca del personaje dispárale si no estás cerca del personaje tú ves caminando con lo cual si todo ha ido bien mirad vamos a verlo fijaos cómo atención el personaje viene caminando se me viene caminando y cuando llegué a menorca ahí se para y se para porque entonces es cuando sacada al arco y empezar a disparar comprobemos lo fijaos cómo el personaje empieza a caminar y empieza a caminar no se mueve con los sprays ahora lograremos pero cuando llega a menos que 100 es cuando me empieza a disparar al igual que hicimos en los tanques el otro día creo que no sería de mucha utilidad el poder dibujar barritas en la parte de arriba de los personajes que me digan cada personaje cuánta vida tiene y cuánta munición tiene en el caso del personaje bueno lo que voy a hacer es ponerle una única barrita de vida porque como tiene una espada pues no va con munición en el caso del arquero le voy a dibujar dos barritas arriba la vida y la medición por tanto voy a hacer lo siguiente en mi personaje cuando el dibujo aquí digo bueno aquí mismo con texto de wimax el contexto de güemes nuevo contexto draw recto os acordáis no fil recto y recto si he copiado pero ahora lo voy a deshacer contexto fil recto antes de yo digo contexto punto feel style es igual a black y ahora digo contexto el mundo phil rect y digo escenarios x de puntos x como 20,6 por ejemplo coma si todo va bien vamos a verlo y no da ningún error que igual si ahí vamos bien no era el arquero paisa y la barrita no era esa barrida la que quería es escenario x no es la barca del arquero es la barrita del personaje de hecho 20 píxeles es muy grande 6 píxeles es muy grande es cuatro una vez vale vamos a ver el escenario x más arqueros a 2020 a poner el 50 por donde parece escenario x porque si le he puesto el arquero entonces si ya parece aparece en el arquero porque igual está justo allí detrás tampoco escenario x + 30 + 300 no lo creo pues sí hay un desfase y comprobamos ahí se queda ahí qué raro porque no me coge escenario de crisis o sea moviendo la varita es fija porque el personaje es fijo vamos a verlo ahora sí y ahí está a 100 pues quiero que esté a vier vale un poco más a 30 70 acá si lo tengo en qué número claro pues tengo digamos por ahí la vida del personaje claro me extiendo la barrita que encima del personaje de guardarla vale ahora quiero feel style es igual a green y por tanto cuidado ahora quiero lo siguiente con texto fil rec en 46 y quiero dibujar en sabor y está de 2 una barrita de momento de 8 que hará así para ver si os fijáis tengo una barrita verde con la vida llena encima del personaje pero cuidado la barrita llena encima del personaje evidentemente tiene que ir en función ese 8 tiene que ir en función de la vida del personaje así que cuando hemos dicho que es la vida del personaje 3 el arquero del personaje no hemos hecho nada vamos a decírselo esto no es un objeto porque es el personaje original no sé qué es lo había dicho no vale pues bar vida personaje cuando le ponemos 10 igual a 10 así que por tanto digo bar vamos a ver 8 x mira personaje partido ahora esa barrita me va a mostrar exactamente la vida que tenga el personaje pero claro como sé yo que vida tiene el personaje pues si queréis voy a hacer una pequeña prueba y es que cuando el personaje esté disparando lo que voy a hacer simplemente es que le quite vida al personaje diosa cuando el arquero está disparando le quita vida al personaje vamos a verlo mirad se va a quedar sin vida rapidísimo le digo cuando dispara personaje vida personaje menos digamos que estoy dando por hecho que habéis parado y alcanzado y la quita olvida vale para hacerlo rápido y fácil entonces guarde recargo y el personaje se acerca y vais a ver con nuestras orejas que el x se queda sin vida y muerto y de hecho es mira negativa y todo vale pero demostración de que por lo menos ya estamos haciendo que el personaje arquero interactúe con nuestro personaje final ahora que tenemos buena parte de que la barra de la vida de personaje se me está yendo abajo del todo pero ahora que tenemos él la vida del jugador vamos con la vida y con la munición del arquero así que para ello lo que hago es que vuelvo a decir esto es el arquero vale esto es el personaje en mi personaje donde estoy dibujando en el personaje pues voy a dibujar esto al lado del personaje vale y ahora aquí voy a dibujar lo mismo pero con él el arquero así que digo feel style black y ahora sí que digo escenario x arqueros por equis y esto está aquí con esto he duplicado las líneas de arriba las líneas de dibujo las he puesto aquí las he puesto al lado del personaje porque no tenía mucho sentido que arriba se dibujar el personaje y abajo se dibuja la vida así está todo junto y ahora donde se dibuja el arquero pues el dibujo también mira vamos a verlo ahí está bien es hay que desplazar un poco más así que pues bueno si eso quiere decir escribe decir más 25 algo así muy bien hay legal y entonces vale ahí muy bien perfecto mira personaje aquí lo mismo por tanto dijo escenario x más arqueros de tal más 20 6 en ese caso a las 26 porque es un píxel más allá ahí lo vamos a ver y claro quiero otra barrita arriba para servir a los dos igual ahora iremos a eso porque le sigo diciendo que es la vida personaje ahora luego le pondré vida arquero o algo así y ahora mirad duplicó todo esto atención duplicó todo esto para un segundo marcador de vida y digo esto es 65 no esto es y el color es de color pongo la munición red vale pues ahí bueno tarde han llegado tarde y mirad damos cuenta como véis ahí como tengo ahí los dos que se acaban perfecto pues en lugar de 55 voy a poner 60 voy a poner 61 es decir estoy cogiendo la y para que las dos barritas se queden ahí pegadas bueno pues lo que voy a hacer es que mirad el personaje no se va a quedar sin vida de momento el arquero este es vida personaje no esto es 8 ahora esto es cuántas flechas hemos hecho que tenía el personaje el arquero 10 lucas 10 entonces esto es arqueros de 0 flechas partidos días vamos a verlo en vez ahora veremos que cuando se encuentran el arquero se queda sin flechas y el personaje se queda sin vida a hero 3 0-3 es simplemente lo que voy a hacer a continuación es lo siguiente mirad digo function game over y simplemente hago lo siguiente cuando sí es cierto que mira personaje es menor o igual que 0 en ese caso ejecuto la función game over y la función game over lo primero que hace es cargarse el temporizador o sea parar el juego y a continuación me voy a buscar por ahí alguna imagen de game over algún screen the game over algo así el que más nos guste mira uno como éste para ese perfecto a un game over para el juego lo guardo dentro de la carpeta de proyecto pues igual pues tiene pintas entonces sam entonces htd ox entonces plataformas objetos y pues no sé cómo tengo nivel y personajes voy a ponerlo en nivel y digo game over jpg qué es lo que voy a hacer pues la pantalla de game over simplemente va a decir en primer lugar clear rect contexto clear rect de 0 hasta cuánto no sé hasta 200 120 y simplemente voy a decir contexto punto remake de la pantalla de game over pero ya sabéis que la pantalla de game over es algo que hay que declarar imagen de la pantalla de game over así que bar gay me over ing es igual a mi email game over img src es igual a niveles y game over punto jpg así que vengo aquí draw email game over img en 00 si todo ha ido bien guardo y recargo y cuidado es nivel no espera que lo tengo mal es nivel no el nombre de la carpeta se suscriba de error así que ahora ejecuto se le acerca el malo y comprobamos cómo se queda sin vida y cuando se queda sin vida bien game over que ha pasado aquí así que parece que quiera haber dibujado a esperas y es que la imagen es muy grande entonces le digo que me game over como 200 como 120 o sea me las escalas para que tenga la misma escala del canvas y para que mover y aprovecho este momento para empezar a ordenar un poco más el código y para crear archivos externos antes de continuar con objetos y crear archivos externos de la siguiente manera me voy al juego plataformas objetos me voy a crear una carpeta de funciones y dentro de la carpeta funciones voy a crear un documento de texto llamado condiciones iniciales js por qué si una identificada de imagen que no tocaba por lo menos al final de la sesión de hoy hayamos hecho un pequeñito objeto y organizamos un poquito más esto antes de mañana hacer crecer este juego entonces como os decía he hecho la carga el archivo de condiciones iniciales y lo que voy a hacer es derivarle toda la declaración de las condiciones iniciales así que tú vas aquí dentro bien a continuación el documento 9 en principio lo voy a dejar y ahora lo que voy a hacer es derivar todo esto vamos a ver sí vale vamos a hacer lo siguiente voy a crear un archivo llamado game over punto j s que es el que contendrá la función así que de vivo la función game over aquí dentro lo he metido dentro de la carpeta funciones y ahora pues bueno voy a hacer un par de funciones más donde voy a decir cargador punto j s y en cargador punto js pongo la función cargador y voy a hacer un último archivo de momento voy llamado loop js y dentro de loop voy a poner la función loop y ahora llamaremos a todos estos archivos claro sí externalizado a archivos externos ahora como os podéis imaginar lo que tengo que hacer es llamar a los archivos externos por tanto en index.html hago lo siguiente el llamado a la clase del arquero el llamado llamo ahora a funciones barra que y mover punto j s llamo a funciones condiciones iniciales punto j s llamo a funciones loop punto j s y creo que ya está y por tanto ahora si todo ha ido bien el programa seguirá funcionando exactamente igual no vale get contexto full condiciones iniciales tampoco pero no debería porque así plantar claro que tiene por qué fallar porque falla pues porque condiciones iniciales está llamando un canvas que todavía no se ha creado por tanto voy a todo esto y lo voy a colocar aquí abajo y así me aseguro que para cuando se ejecuta en condiciones iniciales ya hay un canvas en el dom limpiamos un poquito y esto es la elegancia personificada no me digáis que no da gusto abrir y decir esto es el juego de aquí donde vas a cargador de más salud pero cada cosa está en cada lugar diferente debe ser un juego claro vale cargadores notifight bien cargadores notifight cargadores ya no sé por qué es que no lo llamaron entonces casi no lo llamo pues cómo va a funcionar por tanto me voy a cargador punto j s vale y ahora sí tenemos ya el juego de momento funcionando y bueno para acabar la clase de hoy la parte teórica me gustaría por lo menos que el personaje estuviera andando cuando el personaje digamos cuando el arquero está andando pues que tenga los esplais de andar recordamos que vamos a verlos tan por aquí recordamos que me voy a personajes me voy al personaje y tener en cuenta que el arquero andando son los últimos tres sprites es igual que el otro así que digo lo siguiente mirada atención me voy al objeto arquero y digo condición inicial condición constructora encendido y apagado las luces a ver que baile y digo this punto sprite o de desplazamiento o de punto como lo que como lo queráis llamar como le hemos llamado antes con el personaje inicial sprite caminando vale pues ese nombre está bien disputó sprite caminando es igual a uno para empezar en alguna parte quiero que me esencial pero voy bueno pues digo he creado un disc sprite caminando para decir que en el caso de que el objeto esté caminando en el caso de que esta instancia esté caminando le digo bis punto sprite caminando más y por supuesto como antes le digo sí es cierto que viste punto sprite caminando es mayor que 3 en este caso de punto es para ir caminando es igual a uno otra cosa que voy a hacer es que realmente este esta instancia este arquero ahora mismo por lo menos quiere como mínimo dos estados que es el estado caminando y el estado disparando por tanto yo digo lo siguiente this punto estado es igual a caminando bien entonces digo lo siguiente vamos a verlo lo que hago aquí por tanto es un bucle de sprites y ahora por tanto volviendo al archivo principal no ya no el loop volviendo al loop cuando dibujo el arquero dónde estás aquí estás 56 x 6 vale pues hago lo siguiente vamos a verlo dónde estás imagen estás aquí 234 vale pues digo 56 por 4 más arqueros de 0 punto que punto sprite caminando por 56 no ya pero no porque es un punto con lo cual queda claro que es la variable que corresponde al objeto queda claro porque yo te digo que queda claro pero tuviera así pero visualmente no queda muy claro entonces otra cosa es que por precaución por claridad le diéramos otro nombre quieres que otro nombre eso es porque el 56 por 4 porque me quiero ahorrar estos 4 claro porque debe empezar en cero o lo que es lo mismo mira le quitó estos 56 que le pongo un 3 así que vamos a ver lo momento vamos a verlo si no da error bien está caminando y cuando para conseguir se ha parado cuando para game over antes de quitar la energía pues ahora lo que voy a hacer evidentemente es que ya tenemos el spray de cuando para pues cuando para que empiece a disparar bien pues arrancamos apache vamos a verlo seguimos con el juego de ayer pero mirad atención me voy a localhost me voy a objetos plataformas objetos y tenemos este juego por aquí por tanto y lo primero que me gustaría hacer antes de ponerlos a disparar flechas es hablar un poco de qué se debe hacer en el objeto y que se debe hacer fuera del objeto veréis mirad yo tengo por una parte vamos a sacar la carpeta correspondiente me voy a echar me voy a ht docs me voy a plataformas objetos tengo index.html ok tengo en funciones tengo el loop js y tengo el en clases tengo el arquero punto j s entonces cuando el personaje está caminando yo tengo aquí las instrucciones de qué es lo que debe ocurrir cuando el personaje camina a su posición x se le resta un valor y a su variable de sprite caminando se le suma un valor pero sin embargo lo que no me acaba de hacer demasiada gracia es que realmente el dibujo el proceso de dibujo tanto del propio arquero como de su barra de vida se produce fuera del elemento es decir se produce fuera del propio arquero claro para que quiero un objeto si al final acabó dibujando una gran cantidad del código dentro del loop lo que voy a hacer por tanto antes de empezar a disparar y ahora veréis que esto nos allana mucho el camino para disparar flechas es que voy a todo este arquero vamos a ver ok y lo voy a poner aquí entonces en el caso de que el arquero esté caminando en ese caso quiero contexto emails y atención un momentín ahora no puedo poner arqueros de la matriz cero porque estoy dentro del objeto qué es lo que tengo que poner this is sprite caminando lo que se ha dicho es entonces en lugar de arqueros de 0 puntos x pongo this post x en lugar de arqueros de 0 post x vuelva a poner this post x y lo mismo para cada una de las coincidencias que me encuentre claro esto va a ser genial porque ahora cada arquero dentro va a tener su propia propiedad así que cambió todos los arqueros 0 por dime no es porque bis ya es arquero bj digamos exacto me ahorraría un loop efectivamente que al final en cierta manera tendría algún tipo de loop pero no un loop relleno de código que puede estar dentro del objeto porque para eso hemos creado el objeto bien pues ahora volvemos a loop arqueros de 0 camina eso se queda igual de momento ahora luego lo trabajaremos también adentro pero si ahora recargo vamos a comprobar si funciona o no o si la error que puede dar error 6 y se va a dar le dicen todo a mí de momento no me da error vale pues mira miren 66 vamos a ver de la misma manera que el objeto sabe vamos a ver que el objeto sabe te acuerdas que ayer pusimos vida personaje y no tuvimos que poner this punto vida personaje ni nada porque vida el personaje es una variable global y como disponiendo personaje es una variable global se puede llamar desde cualquier parte por esa misma lógica contexto también ayer lo declaramos como variable global y eso quiere decir que también es visible desde dentro del objeto ojo no al revés esta propiedad is claro no se debe sacar dentro este programa porque no tiene sentido sacarlo tiene más sentido operarlo desde dentro del objeto por tanto hay objetos como el contexto que sí que nos interesa que tenga una visibilidad pública global pero hay objetos como en este perdón hay propiedades como estáis caminando o prototipos como camina que sólo me interesa que se puedan ver y llamar desde este objeto y por tanto veréis que con esto el loop de repente ya haremos lo que comentabas hay de convertir el personaje también en un objeto pero de momento esto me queda bastante más limpio me acabo de mover todo ese código a donde realmente le corresponde porque es que además ahora estamos con un arquero pero cuando aumentamos el de la mara cuando metamos el de la onza y cuando metamos el de la guadaña pues claro como tenga que dibujar a todo el mundo al final no voy a cumplir el objetivo de encapsular el código claro efectivamente lo que ocurre es que cuando ya no está caminando sino que está disparando desaparece porque antes se hacía la decisión entre dispara o camina pero al final abajo sí o sí en cualquier caso se dibujaba el objeto claro ahora no ahora solo se dibuja en camina y no se dibuja en aquí en dispara pero es que me da igual ahora mismo yo sé que el personaje desaparece pero es que tiene que desaparecer porque lo que vamos a hacer a continuación es que cuando el personaje se acerque demasiado a nuestro personaje bueno pues deje de hacer ese sprite y saque el arco y ejecutamos los sprites del arco disparando así que vamos a por ello por tanto yo ahora vengo y lo siguiente vamos a ver yo digo this punto disparando es igual a cero el momento del personaje no está disparando así que yo te pregunto qué es lo que tienes que hacer cuando alguien invoqué la función de dispara pues yo digo mira sí es cierto que bis punto disparando es igual a 0 en ese caso this punto disparando es igual a 1 el estado no el estado es el que hace si estás disparando o si estás caminando si estás recibiendo el año que ahora mismo lo hemos hecho con una estructura de control if pero que más adelante meteremos también en el objeto de momento estado déjalo ahí ya veremos lo que hace vale sigamos en este caso por tanto si disparando es igual a 1 disparando es igual a 1 en este caso voy a hacer lo siguiente vamos a ver si mira propiedad de punto os x flecha la posición x de la flecha del arquero es igual a 0 el momento pues x flecha de crear una nueva propiedad llamada puntos x fecha flecha y ahora en el método dispara le digo contexto punto emails y digo quiero disparar la flecha es una imagen que no existe todavía ahora la creamos quiero disparar la flecha y la quiero disparar en 10.2 x más bis punto 2 x flecha es decir la posición x del personaje más la posición x de la flecha claro ahora digo these puntos x flecha igual bueno menos sapos x flecha cada vez que pase por aquí le quitó una posición oye que es la flecha creo que no tenemos verdad así claro que sí y le decimos cuál es la posición después de punto y vale pues como creo que el sprite no había una flecha o sí que hay una flecha vamos a verlo ah bueno vale pues lo que sea ips y cs lo abro con el gimp y cojo la flecha que haya era igual y la usamos vamos a verlo a perfecto fenomenal pues lo que voy a hacer es que seleccionó esta flecha así fíjense crisis no nos lo pasó entonces tengo ahí una flecha ojo le doy la vuelta así que imagen transformar voltear horizontalmente para que vaya en ese sentido no nos importaría mucho pero espero que no lo veo alguien bh trucks hay entonces plataformas objetos personajes separar los personajes y yo voy a llamarlo flecha con lo cual ahora no declararemos las condiciones iniciales para poder empezar a usarlo lo que voy a hacer ahora por tanto es decir que es flecha así que me voy a las condiciones iniciales me voy a funciones condiciones iniciales típico imagen para la flecha y vivo bar flecha es igual a new image y digo flecha a punto src es igual a entrar en personajes y cargar el archivo flecha punto png con lo que si todo ha ido correctamente y yo creo que sí todo ha ido correctamente ejecutó el juego de nuevo recargo por aquí con lo cual el arquero se acerca puede que el arquero desaparezca da igual no he visto flecha muy bien vamos a ver cuál es la posición de la flecha this post y claro espera sí lo sé es que realmente la posición espera pero es que aparte de todo eso es escenario x más puntos y más puntos flecha vamos a verla ahora espera que te lo digo un momentín que si eres lo propio ale acércate hay ahí está la fecha game over dejadme que le diga vida personaje menos dejadme que lo comenté porque si no se me muere muy rápido y así pues podremos ver mejor cómo funciona la flecha bien la y efectivamente pues la flecha aparece en la misma altura que el personaje vale por tanto pues puedo hacer this puntos y más 20 yo que sé para que la flecha esté alineada con la posición es necesaria el arco del personaje esto más o menos y punto posibilidad más si 25 casi mejor si aquí he cambiado esto he puesto escenario de x + 2 puntos x + 10 puntos huevos flecha y no te sale nada claro tienes que definirla seguimos dispara sobre una vez vengo yo porque le voy a decir porque le voy a decir que en el momento en que la flecha desaparezca por pantalla en ese caso puede seguir disparando pero antes de eso vamos a hacer el spray del arquero el espray del arquero vamos a ver que tiene lo siguiente mirad this punto sprite disparando es igual a cero con lo cual esto es así bueno así perdón a uno si estaré disparando empieza en uno digamos el estado uno para luego ir al estado uno dos y tres por cierto al ciego esto y también te digo que me voy a personajes me voy a g 1b y vamos a ver qué sprites son los del arquero disparando mira lo que quiero es que el arquero vamos a ver el tercero y el cuarto entonces bueno pues lo que quiero simplemente es que primero haga al 3 que luego haga el 4 pero que luego vuelva al 3 pero cuando ha disparado se supone que se quedan en 3 vale entonces bueno esto va a ser complejo te digo como no o sí me ha gustado esa idea sí porque como en principio parece que el del aura no lo vamos a usar mira sabes qué pasa no ya está voy a usar el 3 el 4 y el 1 parecidos y con el aura no voy a hacer lo que voy a hacer 3 4 y 3 ya está con lo cual le digo que la posición inicial de disparando es 3 y es que laura tampoco lo quiero eliminar porque igual quizás quién sabe os pongo deberes de fin de semana que utilicéis el de laura para detectar cuando tú le has pegado un espadazo al arquero y digamos cuando tú le parece su espacio al arquero y uses la función recibe daño ahora a una mesa fotograma para que indicarte que efectivamente le has tocado a ese personaje por tanto no hemos realizado entonces digo sprite disparando es igual a 3 y ahora hago lo siguiente si disparando es igual a 1 en ese caso digo vamos a ver mira aquí dibujó el arquero y digo arquero 56 por 2 más this sprite disparando perdona pero no hace falta porque tengo esto de aquí tengo el 3 con lo cual ya no hace falta eso y todo esto se queda igual 6 puntos x ok dejando un segundo déjame un segundo y digo ahora sprite disparando más ahora voy a hacer lo siguiente sí sprite disparando es igual a 3 en ese caso sprite disparando es igual a 4 en caso contrario el sprite disparando es igual a 3 toma ya ahora veréis a ver si me funciona como yo creo algo así se va a quedar enganchado disparando si todo va bien vale cuidado sprays disparando a esquís bis punto spray disparando pero bueno fijaos como ya he hecho la primera el primer amago de disparar y fíjate que de hecho la flecha casi coincide perfectamente en el sitio ha sido casualidad de hecho está un poco más baja pero bueno vamos a verlo así que mira llega se va a quedar en spray disparando en el día 21 así diez puntos para ir disparando si está previsto cuidado no hace si no hace lo que yo quiero no hace lo que yo quiero mirar es this punto spray disparando más 56 estoy disparando entonces vamos a ver ahora se seguirá quedando enganchado pero mirada av por qué porque no puedes saberlo vale espera es que no es menos 56 91 dime pero en absoluto es una corrección y ahora si eso es lo que quiero que haga que se quede enganchado pero disparando con la flecha ahora luego ya lo pararemos cejas aparte de las cejas no sé por qué espero pero deja esa parte aquí entonces aquí es cuando voy a hacer lo siguiente atención lo que voy a hacer ahora es que sólo en el caso de que disparando sea igual a 1 mira sólo en este caso digo si es cierto vamos a ver sí es cierto escenario x + 2 puntos x + 10 puntos flecha todo lo que quieras es menor soy menor que la posición del personaje la pasión de un personaje cuál es la posición del personaje el arquero no está eso eso divide sprite caminando por 56 el sprite 56 claro pero hay una equis al final cuál es la equis este personaje y parece que es 40 porque es 40 y posición y 40-40 créeme entonces si esto es menor que 40 en ese caso y sólo en ese caso le digo 2.2 x flecha salud es igual a 0 y le digo en ese caso mira personaje menos sólo en ese caso entonces vamos a ver si esto funciona vamos a verlo entonces el arquero se acerca mira el arquero se acerca dispara una flecha y si la flecha toca a mi personaje ahora le tocará pero bien ahí vale entonces se le ha quitado exacto se le ha quitado una vida y entonces vuelve a disparar y vuelve a disparar y vuelve a disparar hasta que te quede sin vidas y cuando te quedes sin vidas pues ya que y mover bueno es lo que tiene en juego plataformas así que como os podéis imaginar yo me puedo mover todo lo que quieras pero efectivamente entonces sí pero a menos claro que efectivamente eso es lo que quería decir pero apple habla del agua y el descaro ahora tengo que empezar a que el personaje por cierto que cuando el personaje empieza a disparar se elevan los cuadritos de arriba donde los cuadritos de arriba quieras que no ahí sí que frank ahí sí que tengo que copiar y pegar tal cual el código de los cuadritos y digo esto bueno aquí mismo lo puedo comer para que cuando el personaje esté disparando a eso sí mira this post x flecha pues mis flechas como estas flechas menos de momento así que guardo y recargo y ahora vas a ver cómo el personaje dispara una flecha y si la flecha me da a mí me quita vida pero ahí van unas cuantas flechas tira ah perdón a la polis fecha no espera qué pasa aquí porque las flechas se van hacia abajo si el contador de flechas bueno ahora mira qué pasa pero no debería bajarse a tope sólo debería bajar 1 mirad lo que voy a hacer ahora es que efectivamente el de flechas de momento lo voy a mover únicamente a este if con lo cual el personaje ahora lo que voy a hacer antes de ir al descanso es simplemente vamos a verlo un momento y cómo se queda sin flechas y una más bien y ahora quiero que se pueda saltar en cuanto a la velocidad de la flecha mira la moja entonces le digo this punto post x flecha pues menos igual a 5 y supongo que has puesto que también 3 bien entonces recargo y dispara la flecha sale y sale ahí pero yo lo que quiero ahora es que además mirad es que además yo pueda saltar entonces le digo si el escenario y todo esto es menor a 40 y también es cierto y también es cierto la pose y del personaje cuánto es espera a la variable como se llama quería decir posición y digo y posición y que es mayor que la posición de la flecha la posición y de la flecha que es dos puntos claro cuánto has dicho más 25 no te digo que no y ojo la posición y es la esquina superior izquierda del personaje también hay que verlo vamos a verlo vamos y supongo calma luego posición y posición claro mi posición un momento claro espera atención mirad mirad me vale yo salto y la he saltado vale y no vuelve a ser no vuelve a dar por qué porque el programa no sabe que cuando la flecha desaparezca del escenario tiene que volver entonces yo digo lo siguiente sí vamos a ver si ves puntos x flecha es menor que cero en este caso esto me lo dejo así a ver qué pasa a veces que no ha resaltado ajustamos es que la posición y esta validación probablemente no será correcta posición y ahora tiramos por él con soul o tiene exposición y pero un momento por un momento pero digo cuando os x flecha sea menor que cero pues le voy a decir dos equis flecha es igual a cero this punto flechas menos y con esto lo que va a ocurrir mira ahora arreglamos lo de la del salto pero con esto lo que va a ocurrir es que cuando la flecha desaparezca del escenario ahí va el personaje estará autorizado vale vamos a ver cuando ves el escenario x más esto de aquí más esto de aquí sea menor que cero ahora sí atención a la breaks pues la flecha se reiniciará entonces fijaos cuando la fecha sale vuelve a dispararme otra y ahora ya hay que arreglar el tema del salto hay que arreglar el tema del salto para comprobar digamos en qué momento está saltando yo sabeis ahora mismo lo que voy a hacer es lo siguiente console punto log posición y más vertical más de punto posición y lo que quiero es ver en la consola quién es quién entonces con el personaje empieza a disparar mirad atención a la consola vale 54 bien señor salto ahí está es la validación entonces claro no puede ser menor porque el personaje está en 54 y la flecha fíjate tú qué casualidad está en 54 eso qué quiere decir que la validación no es mayor sino que le digo no es igual entonces fíjate mira como ahora sí todo ha ido bien como ahora sí todo bien yo recargo y si me da la flecha me da la flecha pero si yo salto la flecha ya no me verá o no es y no es bueno no es igual pero es pero esta no se cumplen o no es que es igual vamos a verlo pero es que es y se tiene que cumplir las dos aunque si ésta se cumple y ésta no se cumple entonces es falso vale porque la y ya no se cumple vamos a ver ahora me quedo quieto bien a vale vale correcto bien entonces digo si es cierto vamos a hacer la colisión sí es cierto que esto es menor que 40 no menor que 50 y también es cierto que la flecha es mayor que 40 y también es cierto que la posición y es igual a perdona a disposición obispos y el 25 no hace falta dejadme que lo valide a partir de ahí si lo validamos copias vale comprobamos que me pega un flechazo y ahora saltó ya no me pegó un flechazo ahora me quedo quieto y me pega un flechazo comprobamos que es alto ya no le haga flechas y hay que arreglarlo evidentemente vale pero comprobamos como ya he podido pasar con lo cual ya podéis copiar vamos al descanso y ahora la vuelta a espadas una vez que tenemos todo esto en marcha realmente estaría bien de cara al personaje principal del juego pues también meterlo dentro de un objeto porque pues porque el personaje principal del juego quieras que no puede caminar puede saltar puede pegar con la flecha incluso quizás más adelante en el juego puede hacer más acciones así que por tanto me voy a ir a la carpeta de clases tenía hecha previamente la clase arquero punto js y por tanto voy a crear ahora un archivo llamado personaje punto js vamos a convertir el comportamiento del personaje de procedural a objeto por una parte para tenerlo más aislado y por otra parte incluso más adelante para poder crecer en cosas como por ejemplo meter el personaje en un worker y dejar un archivo aparte lo tenemos mucho mejor para un worker yo sé que se os facilita la vida entonces voy a cargar personaje que evidentemente de momento está vacío voy a ponerle la misma estructura que arquero diego la misma estructura pero no exactamente el mismo código mirad entonces dijo digo personaje o bj breaks morro las propiedades por todo realmente borro el contenido de los prototipos pero claro digo esto es personaje o bj a mí esto siempre me da si queréis que os diga mucha rabia vale porque estoy haciendo un objeto del cual sé que voy a hacer una instancia y claro a ser un objeto para luego hacer una instancia porque quiere que te diga vale por tanto en el personaje vamos a aprovechar sólo una de las ventajas de los objetos que es la encapsulación pero no la instancia múltiple en los arqueros y que vamos aprovechar las dos cosas una ley cancelación y luego empezar a multiplicar arqueros sin ningún problema de código bueno pues personaje o bj es igual a una función y digo persona el personaje o bj punto dispara llamémoslo dispara aunque realmente es golpea o no sé cómo se llama eso con una espada esta vez yo que sé cómo se ataca vale pues mira sabes que ataca así que personaje o bj caminas o se queda igual personaje o bj recibe daños o también se queda igual porque de hecho luego nos conectaremos con verdad bien entonces en bar personaje o bj entonces tengo que empezar a introducir sus condiciones iniciales por tanto en este caso digo this punto que condiciones iniciales tenemos para el personaje this punto mira voy a cogerme todo esto sabes qué lo corto y digo en personaje mira me pongo bar sprays caminando van saltando bar velocidad bar posición pues cambio el bar por this punto sprite caminando this punto saltando this punto velocidad y this punto posición y this punto vida personaje porque hacemos por tanto es y esto es algo que os voy a recomendar yo os recomiendo y luego vosotros haré lo que queráis pero yo generalmente no empiezo programando directamente en objetos sino quiero que empiezo es programando directamente empresa rural y una vez que veranos estudiando entonces empiezo a convertir a objetos la idea es que veáis que es conceptualmente sencillo hay probabilidades de error evidentemente pero conceptualmente no es muy complejo es más trabajo pero intelectualmente es más sencillo a menos que esto es lo que yo hago es mi metodología a menos que vosotros digáis mirada es que le pilla el roi a los objetos y llega un momento que es que ya cojo un juego y pienso en objetos y lo quiero hacer directamente en objetos ningún problema evidentemente entonces voy a continuación a camina porque lo único que tenemos desarrollado es caminar entonces lo que hago es lo siguiente vamos a ver aquí en condiciones iniciales no me voy a cargador y digo es para ir caminando vale pues digo no en el cargador digo personaje o bj o personaje en esta instancia do es igual a mío personaje perdona personaje mejor hay entonces ahora lo que hago es que vivo claro aquí sí que lo puedo no lo sé voy a es que no porque como todo esto depende de que ir aun me da un poco de respeto meterlo dentro del objeto vamos a meterlo lo corto y lo meto en personaje y ahora lo que digo es escenario the xx más y digo these puntos país caminando bis punto estoy caminando this punto estoy caminando y ya está no sé falta un punto exprés caminando y vamos a verlo ok momento por supuesto que está bueno no por supuesto que está no espera primero en primer lugar en el propio juego como os podéis imaginar tengo que llamar también a personaje punto j s vale vamos a verlo vamos a ver dónde puede pecar vale esperéis caminando es notifight el club 4 vale pues vamos al 14 y ahí lo tenéis y esto es para ir caminando que un momento claro es que realmente el contexto otro email del personaje tiene que estar dentro claro muy bien así que cortó todo esto lo meto dentro del personaje y me he cortado desde el remake del personaje hasta los files style y feel reik de la barra de vida el lavado de la barra de vida y barra de energía así que lo he puesto en el prototipo camina justo bajo de toda la estructura que ayuda a um y claro ahora digo price caminando de punto posición y mientras lo vais copiando voy a probarlo probablemente espera caminando el loop 4 a espera que no le guarda do vale el momento antes que la carrera dime bis punto que bueno vale muy bien vamos a ver no lo veo y disputó vida personaje efectivamente así que guarde y recargo vamos a ver lo bien saltando y es notifight el loop en claro efectivamente entonces esta función de saltando realmente podría mover la haya ay podría mover la ya a personaje o bj punto prototype punto saltando es igual a function y pegar si this punto saltando es igual a 1 this punto posición y disposición y de velocidad y lo convierto todo a vis lo convierto todavía y ya está vamos a probarlo vale vi de personajes notify en segundo esto déjame comentarlo eso de momento nada al lado para que el personaje de más posición y es notifight claro ahí empezamos a tener un problema ese problema lo vamos a tener sí o sí y es que el problema que tenemos mirad es que la posición y está dentro del objeto que quiero decir con esto pues que el arquero está haciendo referencia a la posición y del personaje pero la posición y ya no es una variable global sino que es una variable local entonces por tanto vamos a preocuparnos primero en primer lugar de la posición está cerrado entonces vamos allá vamos a ver antes de ello hasta así claro pero por supuesto mira espera pero claro el personaje jms punto camina porque he creado una instancia pero no he llamado al objeto así que a ver si tenía un romero dónde está el clon tenía un clon de momento el aquí ahí me ha detectado el personaje el arquero me ha detectado es que estoy caminando entonces claro ahora tengo que ver por qué no se está dibujando en la pantalla bueno valentín uno en un segundo qué reparo esto remakes personaje disposición y vamos a ver espera el caminando por 56 tengo la sensación sí claro y cada vez que hago esto cada vez que hago esto como esto ya no está en el loop esto va aquí sí ahora sí efectivamente ahí tengo que ver qué hago tengo que ver qué hago porque esto sólo se está dibujando mirad cuando yo pulsó el botón de hecho casi no se ve pero estoy dibujando con lo cual probablemente tendría que ponerlo en mira no porque es que no está en el loop sólo está en el preparatorio con lo cual voy a decir personaje dibuja para hacer una función que sí que pueda ser repetitiva para hacer un método que sí que pueda ser repetitivo jaime que ahorra que líneas porque realmente no en todo momento está caminando sino con una vez que ya me down ya está pero no descarto pero personaje o bj cargador js en 5 personaje bj is not be fine así a caminar vamos a ver personaje bj spotify en la línea 5 es igual al new personaje vj ni un personaje bj sí que está definido pues darle un segundo a cabo este código y ahora os lo pasó y ese es el problema en la línea 33 es igual a function correcto personaje mi camino y en el loop cuidado vale en el look dijo personaje inés punto dibuja y ahora simplemente en condiciones el cargador tengo que mover esto de aquí a condiciones iniciales vale a ver que voy lo pruebo os enseño bien ahora correcto el sprite parece que no está funcionando pero eso me da un poco igual mi posición y no está definido ok porque camina y no he puesto sólo camina lo que me importa es poner en condiciones iniciales personaje jms es igual a liu personaje o bj porque quiero que sea reconocible que se pueda leer desde cargador punto js y desde el punto j s si lo pongo dentro de cargador js que cargado el jota esa es una función si ahí realizó la instancia sólo será visible dentro del cargador pero no será visible dentro de loop con lo cual yo quiero que ese personaje sea visible desde cualquier función que exista en el juego bien el qué pero el que meto en el del jugador principal qué líneas su mecánica de hecho en dibuja aquí está dibujar está en el loop inicial pero fíjate que la declaración del personaje esta línea para otro día esta línea no la puedo meter al loop porque lo que estaría haciendo es crear una nueva instancia del personaje a cada loop evidentemente no perdido personaje ins camino tampoco lo debo meter en el loop porque camina no es algo que ocurra cada vez que yo en el código como estaba es otra posibilidad lo que pasa es que esto en principio fíjate que hemos transformado el código para en principio no hacer nada pero esto nos permite evolucionar mucho más limpiamente es decir que cuando a partir de cuando trabaje el personaje sepa que hay un archivo específicamente que se encarga de todo lo que hace el personaje y que yo cuando vengo aquí condiciones iniciales y que de una nueva instancia ya sé que eso equivale a caminar a daño a dispara a pegar a lo que sea vale no se llama la limpieza si quieres llamarlo sin sencillez porque ahora mismo vida que se parece que es al contrario si parece que antes estaba más sencillo de entender que ahora lo sé pero el tema de los objetos que es lo que a mí siempre me ha dado rabia de los objetos es que sólo parecen de utilidad cuando el programa se complica cuando es sencillo parece el reyno efectivamente hoy como el spray caminando no me funciona aparte del error cuando me da la flechas no da igual pero cuando como les pedí caminando no me funciona en el dibujo voy a meter un console el punto log qué va a hacer puntos para ir caminando para ver exactamente cuánto vales para él caminando así que guarde y recargo y me dice siempre vale 1 cuando realmente esto no debería ocurrir porque yo digo visto sprite caminando más puntos price caminando es igual a 1 por tanto de alguna manera no está recibiendo esa variable puedo hacer eso esa variable concreta me voy a condiciones iniciales y digo bar sprite personaje es todo lo que estoy haciendo es convertirlo en una variable global por tanto en personaje digo sprite personaje más para el personaje más aunque ahí se quede una variable local y digo sprite personaje más sprite personal personas pero personaje si guarde recargo la espada la muerte eso es lo que quería lo que ocurre aquí es que digo si sprite personaje es mayor que 3 en ese caso vale voy a por la espada me da unas ganas de hacer cosas bien pasa un poco lo mismo mira de atención mira mi momento porque esta es la última parte teórica de la clase de hoy en un cuarto de hora pero una parte importante conceptualmente para que empecemos a pensar en ella qué ha pasado ahora pues lo que ha pasado es que yo estoy llamando aquí en posición y es nos difamen en arquero claro por qué posición y ya no es posición y es this punto posición y es la posición y del objeto con lo cual no hay mucho problema pero conceptualmente quiero que penséis en ello porque es comunicación entre objetos un objeto que dentro de ese objeto llama una propiedad de otro objeto me voy a arquero me voy a arquero y en la línea 22 ay le digo posición y vamos a verlo posición y es personaje y pge punto posición y ahora no fallara en esa línea probablemente fallara dos más abajo espera que te lo digo y entonces me dice posición y una vez más me bajo aquí abajo y dijo personaje ins punto posición y yo creo que ya así que si todo bien ahora sí vamos a ver que nos dispare vive el personaje otra vez pues personaje james mira personaje ahora yo creo que sí es importante en este caso ver como una instancia de un objeto está modificando la otra instancia de otro objeto vamos a verlo tal es correcto y no puedo saltar al arreglamos el saltar sin problema siempre luego sois no por ser la legación es que creo que alguien muy grandes no lo sé ahora veremos s bueno lo que quiero hacer ahora simplemente es recuperar la función del salto claro una vez más fíjate que vamos a ver en este caso personajes alto 3 caminan dispara a slacker o al personaje saltando es igual a esto entonces claro ahí que hacemos pues lo que voy a hacer en este caso es lo siguiente decirle al loop vamos a verlo al loop le digo personaje jms punto saltando vamos a verlo puede que no sea tan fácil puede que no sea tan fácil porque personajes puntos saltando no es una función como vamos a ver personaje imms saltando vale satán si dibujas una función y dibuja es una función como me dices que saltando nuestra función como como qué saltar entonces en el loop digo saltar muy bien entonces recargo tengo ahí eso lo de la flecha a ver qué pasa no pasa nada y no pasa nada porque en el personaje realmente cuando yo vengo aquí le digo saltando pero no es saltando es this punto saltando y aquí digo seis puntos saltando ok vamos a verlo ahora a saltar saltar estoy saltando qué pasa aquí ok despuntó saltando aquí muy bien si hay dispersión si nos vamos a ver sí pero en cuenta lógica vale pasa lo mismo que antes voy a tener que de momento para poder acabar la clase saltando de momento voy a decir dar una variable global saltando global es igual a cero con lo cual de momento dejadme decir saltando global la primera es igual a cero y saltando global vamos a verlo ahora así aunque se convierte en una variable global correcto serás y que le ha dado por saltar porque le tengo que decir que tengo que decir en lugar de ir saltando global guarda y recargo en salto de la barra no me salta pero bueno me da igual tengo ya el juego funcionando con la flecha así las flechas y matas vale pues ahora voy a devolver la condición del game over a ver qué pasa con ella entonces vamos a ver en el personaje en qué momento le estoy quitando vida vale mi vida dime de qué línea personajes vida personaje - perfecto andrés claro yo vengo aquí por ejemplo y le digo sí y vamos a verlos y servir al personaje si personajes punto vida personaje es menor o igual que 0 en ese caso ejecuto la función game over vamos a probarlo a ver qué pasa así que tengo el personaje me va quitando vida bien no tendría por qué pasar pero lo que voy a hacer es que voy a poner aquí un clear time out temporizador a ver por qué no me cuadra a las abejas hombre claro que sí un punto coma ya medio entonces pues no debería en cuanto a que por mucho que sea el objeto que es correcto que es el objeto pero es más es el arquero donde acabo de meter esta condición vale claro sí pero no pero voy a mirar lo voy a meterlo aquí en el propio loop aunque debería funcionar en personaje perdona no en arquero le digo se me ha perdido aquí si personaje punto vida personaje es igual es menor o igual que 0 pues en ese caso player time out y ejecuta game over así que vale recargo me acerco pierdo vida game over y ya está dentro del loop aunque debería haber funcionado dentro del objeto pero lo meto dentro del loop para que me asegure que el loop cierra su propio temporizador y ejecuta la función game over vale así que ahora dame 5 minutos y lo que voy a hacer es acabar de limpiar el código antes de pasar oslo esto ya lo tenía de antes esto es el grupo el arquero vale elimina algún espacio esto fuera team si es que parece que es eso parece que ha pasado eso efectivamente vale pues fíjate álex como es un rollo haberlo pasado el objeto pero yo ahora abro personaje y vídeo personaje propiedad del personaje ataca personaje camina el personaje recibe personaje salta personaje dibuja igual de un vistazo vivo me hago una idea que hace el personaje es con lo cual en cuanto a código pues es más claro y el cargador y ya está así que el objetivo de hoy es continuar el juego de manera que por lo menos podamos implementar el ataque y una vez que implementamos el ataque veremos qué es lo que pasa qué fácil es y qué retos nos plantea el hecho de decir bueno tenemos un objeto para el personaje arquero pues vamos a ver la duplicación masiva de arqueros no digo ya que vayamos a poner 1500 arqueros en lo que tenemos de escenario pero un poco el que veáis que la primera de las ventajas de trabajar con objetos es la encapsulación pero luego la segunda de las ventajas es que puedes poner equis arqueros que te diría yo tres o cuatro arqueros un poquito tenemos que modificar el código para que el personaje se dé cuenta de que ya no hay un arquero sino que hay tres o cuatro arqueros pero ya está es decir no habrá que hacer demasiado más bien en este caso por tanto en este caso luego también hablaremos de meter un segundo personaje veremos qué propiedades y qué métodos se dan en los dos personajes hablaremos de herencia entonces bueno en primer lugar por tanto voy a abrir el proyecto tanto en una carpeta como en otra camps ht docs me voy a la carpeta de plataformas objetos voy a empezar cargando index.html aquí me voy al localhost plataformas objetos y lo primero que quiero hacer como os decía es conseguir que el personaje ataque con la tecla que queráis así que lo primero que tengo que hacer como os podéis imaginar es cargar yo digo voy a trabajar sobre el personaje pues en ese caso me voy a clases me voy a personaje cargo personaje de punto js y yo sé que lo que yo quiera hacer está ahí dentro entonces si me planteo vamos a ver atacar es una propiedad o atacar es algo una acción que realiza el personaje pues si es una acción en ese caso me voy a ir a atacar vale entonces en este caso me voy al método de ataca y por eso vemos que programar con objetos en principio es más complejo pero cuando ya lo tenemos es más lógico todos todo se vuelve más lógico y cuanto más complejo sea el juego más lógico se vuelve programar con objetos entonces yo lo que hago es decir bueno pues ataca en primer lugar voy a decir que un documento que jdd aun cuando pulse una tecla vamos a ver claro camina a ver pero espera bah venga voy a hacer lo siguiente cuando el personaje ataca porque el personaje ahora mismo en el loop vamos a hacer esto de esta manera y ahora luego veremos cómo lo modificamos el personaje en el loop lo que está haciendo es en cualquier momento vamos a ver arqueros 0 dispara arqueros 0 camina pero este es el personaje en team esto es saltar qué pasa vale pues reinicia a ver vamos a ver mientras tanto muy bien yo cargador y voy viendo condiciones iniciales voy abriendo archivos vale aquí está así que lo que hago en este caso es decir bueno pues en condiciones iniciales yo voy contando un poco cosas en condiciones iniciales tengo el personaje que en principio tiene la instrucción de camina que tenga la instrucción de caminar en este caso tal y como tenemos desarrollado el código del juego ahora mismo no quiere decir que necesariamente empieza a caminar sino que lo que está haciendo es escuchar si debe caminar según las teclas que yo pulse por supuesto entonces en este caso lo que voy a hacer es duplicar esa línea y poner personal heinz punto ataca que no necesariamente quiere decir que vaya a lanzar un ataque sino que quiere decir que va a escuchar si tiene que lanzar un ataque ahora luego cambiaremos todo esto por no funcione más escuchado o algo así entonces otra cosa que voy a hacer mientras vas cargando vale de paso es que ya que este archivo lo tengo más limpio pues voy a poner sangrías para diferenciar correctamente qué es cada una de las diferentes partes del código de este archivo porque antes era un ladrillo antes era un bloque y era por lo menos pues que era una especie de separador es una especie de índices para que podáis localizar porque es el cargador del escenario el candado del personaje del arquero del canvas la batalla e imagen para la flecha bien pues me vuelvo al personaje una vez que hemos puesto mira por aquí personaje ins ataca justo al lado del personaje ins camina así que me voy a atacar y digo cuál es la tecla que queréis para ataque de espada el espacio hola no sé vamos a darle a la captura entonces me voy a javascript kick out 65 vale perfecto les digo si a witch es igual a 65 en ese caso lo que hago es lo siguiente mira vamos a ver hago lo siguiente yo digo this punto atacando es igual a cero que es una propiedad entonces yo digo sí es cierto que ha expulsado la tecla 65 en este caso digo this punto atacando es igual a 1 luego alguien decir que activamos la animación de atacar y esto me va a llevar a crear un nuevo método llamado personaje o bj prototype ataca perdón personaje producto punto animación ataca y digo lo siguiente sí es cierto kevin mundo atacando es igual a 1 tengo ahora que decidir cuál es el sprite de ataque así que digo de punto sprite de ataque es igual a no lo sé espera que te lo digo es igual a 1 este es el arquero donde está el mío webber rbr creo es igual vamos a ver empiezo en ponemos aquí mismo empiezo en 4 de sprite de ataque es igual a 4 así que si ves punto atacando lo que voy a hacer en este caso es decir contexto otro email contexto punto y medio sprite personaje pues digo sprite atacando dos puntos price está atacando por 56 y ahí lo tenemos lo que hago a continuación es decir this punto atacando más y por último digo sí atacando perdona disputó sprite atacando ataque this punto sprite ataque perdonad que hay en esa línea se ha equivocado aquí de punto sprite ataque si de spray de ataque es igual o mayor es mayor o igual a cero mayor o igual qué cuánto que unos tres cuatro cinco y seis que 6 eso quiere decir kevin punto sprite de ataque es igual a 1 es decir me dejas el personaje como estaba this punto atacando es igual a 0 o sea para de atacar para el ataque vamos a verlo respecto de cada cuatro no claro eso sí no quiero que me lo devuelva quiero que me lo devuelvas para que te lo digo quiero que me lo devuelva aquí porque si me lo devuelve a 4 se quedaría ahí quieto y al final dibujo esto vamos a verlo vamos a comprobarlo ahora comento todo esto claro que luego dibujo entonces vamos a ver claro momento el momento no hace nada porque tengo que capturarlo porque ahora en el loop ahora en el loop tengo que decir personaje ins animación ataca simplemente comprar lo que funciona y vamos con ello es la isla no parece que me estoy haciendo nada libre rosso el punto e interesante en principio si está atacando las teclas del movimiento me las coge ahora vamos a ver por qué un segundo en un segundo efe pam pam atacando es igual a uno entonces de tener que hacer es lo siguiente mira como ayer ahora os pongo todo esto igual a 1 atacando es igual a 1 pero esto es igual a 1 y ahora digo atacando y un segundo que vamos allá vale y allí empieza a acercarse al infinito y más allá ahora hablamos eso bien pero de momento esta es un poco la idea ahora veremos porque me ejecuta siempre de esta función entonces bueno una vez después que he solucionado frank los errores que tenía de que en lugar de poner atacando ponía atacando y evidentemente no iba proyecto arma tampoco me decía esa variable no sé cuál es vale entonces creo como el programa fijaos pero como el programa pues lo que está haciendo es atacar pero con un duplicado que es un poco gracioso es como que mi alma está atacando sabes pero lo que puedo hacer por ejemplo lo que puedo hacer por ejemplo es decir lo siguiente en este caso mirad lo que voy a decir es el loop js yo estoy haciendo a la vez dibuja y a la vez animación ataca entonces claro lo que puedo hacer en este caso es decir lo siguiente atacando es igual a 1 o es igual a 0 digamos en ese caso personaje dibuja esto me quitará el salto ahora luego lo veremos en caso contrario personaje animación ataca y esto lo que hará es que o se dibuja o ataca y cuando ataca también se dibuja y por tanto no habrán duplicados si ahora pongo esta estructura de control web o las versión duplicado durante un segundo ahora veremos pero por lo menos podéis comprobar por lo menos me he comido la fecha por lo menos podéis comprobar cómo el personaje pues digamos ya no tiene un doble personaje cada vez que ataca hay un fotograma en el que parece que sí hay que ver ese error al que se produce me desaparece la barra de vida por la siguiente por la sencilla razón de que un personaje animación ataca cuando hago el draw image no estoy dibujando la barra de vila así que simplemente copiamos las líneas correspondientes a esa barra de vida que es esto que tenemos aquí abajo lo copió aquí arriba perdón o como aquí así aquí arriba y ahora veréis que tengo la animación del ataque junto con la barra de vida del personaje si hay un momento en el que aparecen 2 a ver bien el time out a 500 ah 12 y eso tendrá que ver con lo de sprite caminando donde está caminando tiene gracias por cierto que nuestro cronista 33 creo vale no sé voy a probarlo porque hace unos días que trabajando a baja velocidad así tampoco verdad pero al ser de presentaba por ahí y así pues jugamos a más velocidad de la misma manera también tenemos pendiente de él que el personaje cuando lanza una flecha pues no siga o sea no se quede enganchado la animación de lanzar flecha así que eso vamos a solucionarlo en el siguiente vídeo vamos primero con una chorrada visual y luego con algo más importante vamos primero a que el arquero no se quede arqueando infinitamente es una rodilla visual luego vamos a ir a qué a que realmente detecte que cuando pega un espadazo debe matar un personaje así que por tanto así que por tanto hago lo siguiente ok bien vamos al arquero no tengo el arquero por aquí voy a clases me voy a arquero el arquero bj en arquero o bj voy a hacer lo siguiente aquí es disparando es igual a 1 qué es la eliminación de dispara esto todo esto de aquí dispara es todo esto de aquí sprite disparando es igual a 3 en ese caso es price disparando es igual a 4 vale mirad ejecutó lo siguiente vamos a ver me voy a condiciones iniciales en el arquero y digo bar animación arquero es igual a cero animación ahora mismo está apagada si le he dicho bar animación arquero es igual a 0 de momento es una variable global me voy ahora arquero punto j s me voy a disparar donde realmente también tengo la animación y aquí donde pongo el spray disparando aquí está digo sí spray disparando es igual a 3 vamos a verlo por ejemplo digo disparando es igual a 4 els digo animación arquero es igual a 1 vamos a ver cómo lo podemos hacer en caso contrario animación arquero es igual a cero hacia atrás esto hacia atrás ahora voy a comentar todo este código para documentarlo un poco y digo lo siguiente cuando el arquero dispara quien lo llama vamos a ver esto está el loop o donde está aquí entonces digo animación arquero es igual a uno es animación arquero vamos a verlo guarde recargaron sigo donde está el código que he puesto si esto va bien vamos a verlo bien sigue animando y ahora yo digo todo este bloque see this spray disparando es igual a 3 animación arquero es igual a 1 vamos a verlo arquero el arquero o bj ostras en el 20 lo he asignado left handers eso es así que si todo va bien vamos a ver lo hace hoy en animación 'la quiero es igual a 1 animación arquero es igual a 1 va antes bueno claro es que la posición sigue siendo menor la posición sigue siendo menor vale vive bien al final o cuando la flecha toque al personaje pero si 66 vale vamos a ver yo de momento voy a hacer una cosa le he puesto animación ar quiero es igual a 0 a ver qué hace bien entonces muy bien es un principio está bien y es que me voy a arquero y se lo pongo en la condición de que la pos flecha y menor que cero es decir cuando la flecha llega al final del escenario comento todo esto vamos a verlo típico h a lo hecho con lo cual muy bien pues ahora lo que voy a decir es que animación arquero también estará cuando la flecha mata al personaje y luego tendría que estar una vez al principio también ahora bastante mejor de momento lo voy a dejar ahí y ahora por último vamos a hacer algo conceptualmente más complejo como en este caso va a ser como en este caso va a ser tiene que producirse un reconocimiento entre el ataque del personaje el arquero la posición del arquero y realmente si no te quedan flechas con que disparas no tengo la condición voy antes de meternos con el espadazo algo que problemas a mí me llama bastante me está grabando bastante es el hecho de si es el hecho de en el estilo voy a decir lo siguiente body un poquito de estilo body background black y voy a decir overflow giren y así pues tenemos el fondo negro y además en el escenario voy a decir lo siguiente voy a decir margin auto para que se centre en pantalla son unas pequeñas y sencillas líneas vale vamos a verlo martín auto porque no te has centrado también podría ser text align realmente entendería en body text align centre que también podría servir perfectamente y margin 0px padding 0px eles y con esto probablemente vamos a ver lo que tenemos me hace falta bueno bajar un poquito un par de veces pero vale en el escenario le puedo decir margin top pues 30 píxeles así simplemente para que baje un poquito y ahí lo tenemos así podemos jugar con más comodidad bueno pues lo que quiero hacer en este caso como os decía a continuación en el siguiente vídeo va a ser poder detectar que la espada realmente pegue al personaje y que en un momento dado incluso pues el personaje se le quite vida voy a averiguar dónde estar todos los controles punto log ninguno parece así ya que los quiero mute ar y ahora me voy a ir dentro del personaje como os digo y voy a ver qué es lo que ocurre cuando digamos recibe un espadazo el malo el arquero y digo cuando el personaje está atacando vamos a decirle a uno cuando el personaje está atacando cuando está justo en el medio del ataque le voy a decir de momento mirad cuando le digo si després presenta que en mi caso es mayor o igual que 7 digo con soul vamos a ver si le pegamos al arquero vamos a verlo nos estamos pegando les vengo aquí y digo mira te digo así vamos a ver si le pegamos al arquero vamos a ver si le pegamos al arquero vamos a ver si le pegamos el arquero es decir cada vez que yo ejecuto el ataque de la espada al final del ataque digo vamos a ver si le pegamos al arquero claro vamos a ver cómo os podéis imaginar es un hijo sí es cierto que la posición del personaje está lo suficientemente cerca de la posición del arquero en este caso pasa una cosa si no pasa otra así que yo lo que hago por tanto mirada de lo siguiente lo que hago es decir con soul pero digo si es cierto de momento lo voy a poner como una condición if basada en donde vamos a hacer un bucle oh pero ahora de momento condiciones porque sólo hay un arquero de momento así que si ahora vengo y digo sí dónde está mi posición si 40 realmente estos son la segunda parte de la evaluación si arquero de 0 posiciones que es donde se dibuja el arquero se dibuja aquí momento que voy a donde se dibuja el arquero escenario más aquí vamos a ver qué voy this punto post realmente es arquero de 0 es igual a poseerá el kilo de 0 creo que sí si adquiero de cero de tal - post x es menor qué 40 más el ataque vamos a poner 120 esto es el arquero está ya acerca de nuestro personaje no pongo 40 porque eso querría decir que la creu tenía que estar pegado al personaje para que le pudiera atacar pongo el 120 para que hay un poquito de margen no sé si será suficiente margen probablemente sí será mucho bueno en este caso si esto es cierto digo arquero de 0 vida es vida arquero de 0.1 menos si esto ha ido bien vamos a verlo le disparó desde lejos no debe ser nada hay dos equis off and i find porque andy fine interesante vamos a ver en el loop es arqueros de 0 arqueros de acero le disparó desde lejos mira no le hace nada vale can not ruiz properties vida off and if i'm porque es arqueros de 0 vida bien mira de atención lo estoy esperando desde lejos no le hago nada pero cuando se acerca a atención ahí parece que sí que le estoy quitando vida pero no actualiza la vida porque no actualiza la vida así que no estoy quitando vida aunque parezca que no dibuja entonces para ello me voy al arquero ahora os pongo esto de aquí él no lo he dejado en arquero sí eso sí mira la atención en el arquero mientras que disputó flechas estaba puesto en mi caso pues el green la vida del arquero no está apuesta vale estoy en arquero estoy o bien en dispara o bien en camino entonces el 66 lo voy a poner en 8 x this vida partido 3 porque la vida inicialmente la vida máxima del arquero es de 3 puntos y aquí lo mismo aquí abajo ok así que yo creo que ya vamos a verlo mirad le disparó ahí va he tocado lo que no diría 90 dime vale un segundo porque no era ahí ay sino que es aquí no era el 66 sino que era en el 8 vamos a verlo y mirad si todo va bien veis cómo le quito vida muy cerca quizás ahora cambiamos el 120 por otro valor y ahora cómo le voy quitando y le voy quitando y le voy quitando y le voy quitando pues tengo que empezar a especificar qué es lo que ocurre cuando el personaje se queda sin vida algo así como un estado en el cual diré si es cierto que el personaje pierde vida pues en ese caso deja de disparar deja de dibujar te deja de todo porque el arquero digamos ha quedado sin vida y digamos que debe morir habéis detectado que el 65 el valor 65 en personaje es correcto por tanto que voy a 65 ponérmelo fácil también os digo claro por eso digo le doy a la ves qué fácil para que lo menos fácil hombre claro no vamos a perder 85 porque es que sí no sí claro pero porque yo soy muy mal y levitando de lo que sea bueno pues ahora por tanto lo que nos faltará será el comportamiento de hacer que cuando el arquero detecte que no tiene vida suficiente pues no puede atacar no puede dibujarse no puede hacer nada en el arquero en el dibujo del arquero lo que voy a hacer es algo como simplemente en el loop mismo vamos a ver el arqueros y digo sí arqueros de 0 punto vida es menor o igual que 0 solo en ese caso sólo en ese caso pero él comparte por si dispara o si camina o si dibuja o de lo que sea en cualquier otro caso no hagas nada por tanto ahora vaya espera mira es menor o igual que 0 si es mayor que 0 8 al contrario la lógica del contrario bien entonces disparamos salgamos entonces fíjate cómo ha desaparecido ha eliminado y el personaje puede continuar con lo cual como os podéis imaginar pues en la siguiente parte del programa lo que debemos hacer va a ser simplemente conseguir que no sólo haya un arquero sino que pueda haber múltiples arqueros una espinita que tengo clavada desde que empezamos este proyecto es que siempre fallamos lo mismo y es que realmente pasa un segundo y el personaje empieza y el juego empieza y lo dice es este juego exactamente como se juega es claro porque no en el cargador en lugar de decir que el loop empieza en un segundo en 1000 milisegundos le voy a decir 10.000 milisegundos estoy en cargador aquí se espera 10 segundos y yo aquí por ejemplo le voy a poner un mensajito con una imagen que voy a hacer un momento en el gym en el que pondré avanza hacia el castillo y eliminando a tus enemigos yo que sé vale y usa las teclas las flechas y la para dar instrucciones en definitiva entonces me voy a ir a alguien y voy a hacer una cosa me voy a descargar una fuente no para usar ahora mismo en el sistema sino para cargarla como bitmap y para ello me voy a ir a la font dentro de la font puntocom quiero fuentes lcd y quiero una fuente empleo como esa arcade clásico o como esa así que descargó esta fuente me la descargo la descomprime la instalo déjame que reinicie gimp porque si he instalado una nueva fuente pues tengo que reiniciar el game para que se dé cuenta de que tiene la nueva fuente y cuando tenía mi canvas y canvas tenía 200% 20 así que en el gimp voy a hacer media tipografías ha detectado que hay una nueva y está ahí dale que te pego repasando las así que lo que voy a hacer por tanto es crear una pantalla de 200 x 120 píxeles para poner el mensajito que haga falta puede ser porque la fuente es una página norteamericana con lo cual pues quien sobre fuentes no tiene por qué tener en cuenta todo el set único de acentos y leyes y sevilla si introducir complejos y todo eso siempre podemos buscar otra para que te pego de hecho no sé si es mi ordenador que está empezando a darle mucha caña espero que sólo sea por él pues si el que más le vale pues creo una imagen de 200 x 120 y en esta imagen que el principio va a tener fondo transparente le voy a decir que le añado una tipografía como se llama esta tipografía arca de clase entonces r arcade classic letra 18 seguro que mucho menos y digo llega ahora los huevos hasta el castillo tamaño ballet llega hasta el castillo derrotando a tus enemigos sí entonces voy a poner el texto centrado esto supone que es centrado parece que ha sido derecha así vale centrado es eso muy bien hago así y ahora pongo otro texto y digo flechas qué grande granos para atacar y ahora lo que voy a hacer va a ser sencillamente se ve que el tamaño no es el mismo qué tamaño es este es un 14 pues por tanto qué tamaño es este no voy a poner en 14 también y ahora permitir una tontería y es que duplicó las dos capas simplemente para que esta capa de arriba flechas esta capa de arriba le digo que es de color blanco y la tuvo un píxel ves como el texto tiene como relieve arena chorro villa visual y digo llega hasta el castillo también le pongo color blanco y lo muevo hacia arriba un píxel flechas llega hasta el castillo y juraría que lo había convertido a blanco vale harás bien y por tanto aparte de que no podría alinear un poquito mejor pero entonces por tanto lo que voy a hacer ahora es que lo exportó en el disco en samp en http en plataformas objetos claro nivel si digo texto bienvenidos y ahora por tanto como te puedes imaginar pues en condiciones iniciales encargados del escenario digo texto del cargador y digo bar texto cargador es igual a new image texto cargador punto src es igual a entrar dentro del nivel y seleccionar el elemento esto fuera seleccionar el elemento texto bienvenida png con lo cual en el cargador simplemente voy a decir contexto otro email y simplemente voy a poner texto cargador en 00 y ya está pero cargador en 00 porque ya he dado yo el tamaño correcto para que aparezca en la pantalla así que simplemente ejecuto el juego llega hasta el castillo de tus enemigos flechas para moverte para atacar por tener un mensajito que con el cual apuesta juego de qué va qué controlesdeuso yo que sé y diez segundos después pues ya empieza el juego y ya pues te tienes que buscar la vida para ir atacando al personaje en el siguiente bloque teórico lo que quiero hacer es tener dos arqueros entonces claro para ello me voy a ir por ejemplo donde está la declaración del arquero inicial pues me voy a condiciones iniciales y digo vamos a ver para arquero es igual a new image vale esta es la imagen en qué momento estoy definiendo yo el arquero que estoy creando no está en cargador dime que no está en loop no está el loop eso es donde está eso hace ahí no debería estar ahí así que mira cargador del personaje cargador del arquero pues en una nueva sección creó múltiples arqueros entonces me digo bar arqueros es igual a igual eso se queda así y ahora como es un array voy a meter un pequeño bucle form pero mira digo por bar y es igual a cero es menor o igual que 4 es decir meter 4 arqueros le digo y más y ahora fíjate qué digo atención qué digo arqueros de iu es igual a new arquero bj de ahí porque le pasó un identificador tú fijate que antes cada vez que ayuda hacia una matriz tenía que decir y vida del personaje de deposición x de ahí y flechas de ahí y lo que fuera de ahí ahora no vale ahora yo digo arqueros de ahí el personaje ya sabe que tiene que crear un nuevo objeto independiente y cada uno tiene su vida y sus municiones y sus lo que tú quieras lo cual no quiere decir que yo pueda variar las condiciones si yo quiero puedo variar las mira cuando yo creo un arquero tiene una propiedad constructora mira que es la de 2 x es igual a 300 pero yo puedo variar eso yo puedo variar eso y decirle arqueros diego arqueros de puntos x tiene una propiedad constructora eso quiere decir que si yo no te digo nada tú ya sabes con qué x tienes que partir ahora y te puede ser algo diferente entonces te digo os x es igual a más punto random una aleatoria que será más punto random por cien más 300 por ciento por 300 eso quiere decir s más punto random pero esta posición x puede estar entre 300 y 600 no te creas porque la posición inicial es 300 con la cualidad de 300 hacia allá hacia la derecha así probablemente eso sí entonces esto de hecho sí eso sí que va a pasar le digo más puntos round para redondear no me gusta mucho los decimales siempre que los puede habitar en videojuegos porque hay que mal ese videojuego equivalen a ralentizamiento entonces hago así vamos a verlo me espero diez segundos vamos a ver lo que pasa y si todo va bien es porque el segundo desarrollo acorta un poco para jugar todo va bien de hecho no estoy dibujando a ninguno está bien sólo estoy dibujando uno solo estoy dibujando uno solo estoy dibujando uno de hecho ha funcionado lo del random porque se me ha ido más lejos así que lo estaba dibujando próxima ido lejos déjame que en el cargador le ponga un segundo ya luego lo aumentaremos para dar tiempo que se lea el mensaje mira aparece el arquero pero efectivamente josé luís sólo estoy dibujando uno así que de momento el momento del momento mirar me voy al loop y claro es que aquí estoy diciendo en este caso madre mía fíjate con lo primero que me voy a encontrar pero bueno para esto estamos haciendo esta parte del ejercicio claro es que estoy haciendo arqueros de cero sólo me refiero arqueros de cero no sólo para el dibujo sino que incluso para el cálculo de la vida pero no pasa nada porque yo digo lo siguiente vamos a ver yo vengo aquí a condiciones iniciales y digo bar no arqueros es igual hemos dicho a 4 con lo cual vengo aquí y creo que esta variable global llamada núm arqueros eso qué quiere decir pues que ahora puedo copiar esta estructura de control for y en el loop decir oye mírame esto para todos los arqueros que haya esto me lo haces para todos los arqueros que haya ya no es arqueros de cero es arqueros de arqueros de ahí los cuatro juntos los cuatro juntitos encima empiezan a disparar los cuales si en un momento pero lo que quiero que veáis mermelada es que hay varios enemigos game over rapidísimo y por tanto bueno un poquito hemos tenido que modificar el código pero trabajando con programación orientada a objetos esta es la segunda ventaja que os llevo diciendo nuestros días y es que la primera es la encapsulación pero esta la segunda es que trabajar con múltiples elementos este código todavía podría ser mejorable pero sólo con lo que tenemos en la pantalla trabajaremos con múltiples arqueros decir pues mira más arqueros de cambio el cero por la iv y a funcionar y ya sabéis cada uno de vosotros que cada uno tiene una vida cada uno tiene una lo que sea pero de hecho no es lo siguiente que voy a modificar la última parte de este bloque teórico como vienen todos a por mí lo que puedo hacer es mirar de la misma manera claro de la misma manera que yo he puesto aquí si arqueros vida es mayor que 0 entonces sólo en el caso mira en este else le digo si además es cierto qué escenario x más arqueros de iu de post x es menor que 400 solo en ese caso camina hacia mí lo cual quiere decir que no vengas hacia mí si yo no me ha acercado vamos a verlo solo viene uno vaya menos si sabéis 400 es mucho si pero bueno es la demostración un poco y ahora es cuando viene el tercero y el cuarto tengo que calibrarlo pero sí con una pequeña estructura de control lo podemos hacer para que funcione perfectamente y mirar y ahora por último no sé si os fijáis si intentáis matar a los arqueros que no podéis matar a los arqueros sólo podéis porque ahora es modificado algo de código claro es lo que voy a modificar ahora porque en el personaje fijaos daos cuenta como cuando yo detecto vamos a ver si le pegamos al arquero sólo estoy detectando arqueros de 0 entonces como te puedes imaginar pues otra vez aquí voy a meter una estructura de control force donde digo mírame todos los arqueros y mira a ver si alguno de ellos le estoy pegando cambio otra vez el 0 por la ahí y ya está vale pues digo esto es 600 la condición lo es así que no viene ninguno a ver si ahora de repente viene uno que empieza a disparar yo le arreó y desaparece vamos a por el siguiente vienen dos o tres a la han soltado pero venga pero hombre es que se ve que el random ha tenido muy mala fortuna sí exacto eso es para me parece otro sí sí probablemente y recordarme que pongamos porciones sobre escudo efectivamente o por ejemplo que cuando pulses hacia abajo que hacia abajo no tiene ningún comportamiento de momento pues que saque un escudo o lo que sea pero efectivamente una manera de recuperar vida o protegerse en cuanto a la pérdida de vida y si no es bueno sí exacto entonces voy a vamos a ver me voy a ir a open game arts puntocom no pues sólo no es otra cosa sí entonces pongo pasión estás y eso es que claro blue bulls son esto está y estoy bien para eso para vino mira blackpool son blue poison y el xc efe de gimp increíble entonces nada me las descargó en jump at&t rocks por si acaso en personajes pues voy a poner aquí pociones y en pociones tengo plancton son grupos son si carpeta de pociones purple porción red faction white poison y oye por si acaso debajo de xtf y lo tengo ahí por si lo queremos modificar una vez que me he descargado las imágenes como os podéis imaginar lo que voy a hacer es primero declarar las en las condiciones iniciales no voy a declarar todas pero pongo cargo las pociones y dijo me habéis dicho que la posición de la vida es la de qué color roja así que tengo red bolsón creo recordó entonces digo bar porción roja es igual a new image y digo poción roja punto src es igual a pociones barra repulsión png esto de momento claro sabes qué hacer un objeto por una poción realmente no porque una poción únicamente tiene el estado de consumida o no consumida por eso yo en ese caso haría una matriz y ya está podríamos hacer un objeto que sería un poco matar moscas a cañonazos entonces en condiciones iniciales mismo en pociones voy a decir bar poción tiene dos propiedades realmente bar pociones es igual a mí array y las propiedades son las siguientes var porciones x es igual amigo a rey y luego lo convierte en objeto de pociones activado es igual a new a rey y ahora creo pociones y digo por bar p es igual a 0 p es menor cuántas porciones metemos es posible 6 mejor por favor el nuevo evidentemente que si no me paso el juego pues igual arriba abajo izquierda vemos el juego entonces le voy a decir en este caso que pociones sabes que el pociones ni barra y realmente no voy a usar pociones de x de q de perdona y es igual a más punto random x tengo unos 500 más 300 y pociones activado dp es igual a 1 es decir por defecto todas las posiciones activadas esto qué quiere decir pues que lo que voy a hacer en el loop es empezar a dibujar las pociones y digo vídeo para que me voy a la otra parte de la pantalla en el loop mientras vais copiando en el loop voy a hacer aquí dibujo pociones así que digo torpe es igual a lo que sea es igual a 6 de momento digo contexto punto women dibujo la poción roja opciones de x de p cuánto pues no lo sé cuánto era cuando la verticalidad la equis para dibujar el vertical el 54 por aquí pues si quieres pues 54 vamos a probar a ver qué sale de él y esto qué es en el loop lo que ha hecho es dibujar ahora en este foro escribir ese foro para dibujar porciones a la izquierda así que recargo y si todo va bien y ahora ninguna pero claro como verlas voy a quitar el game over dónde está un segundo vale eso es lo que quería ver vale estos van a parecer las manos vale vamos a ver por qué vamos a ver por qué sí ahí debe de estar el problema entonces enferma cosa voy a poner 30 54 bien ahí sí o sea con el 30 54 pues igual son 60 o 64 a los 74 tú crees y ahora ese 30 es lo que ha fallado por tanto yo digo posición espera pociones de x quizás esto es muy fuerte quizá esto es muy grande entonces posiciones x metal le voy a quitar el 300 y a ver ahí ahora aparecen 2 que se van conmigo si me falta efectivamente como has dicho en el loop me falta el pociones roja más qué al escenario x no será menos no más bien ahí lo tenemos por tanto ahora tengo todas las porciones adjuntas ahora lo distribuir pero lo que quiero evidentemente a continuación es que en el momento en el que yo toque una poción en el momento en el que yo pasé por una poción pues pueda recuperar vida y bueno para ir acabando el bloque teórico de la clase de hoy lo que quiero es simplemente hay muchas cosas que podríamos refinar de este juego pero básicamente el bloque principal pues ya está en marcha y quiero poner en funcionamiento las pociones entonces para poner en funcionamiento las pociones lo que tengo que hacer es que el personaje detecte cuando ha pasado por una poción y para ello voy a hacer lo siguiente cuando el personaje está caminando o en cualquier momento del loop realmente hay varias zonas no se pueden poner dibujo pociones pues yo antes digo es cierto el personaje ha cogido pociones os digo para cada una de las porciones para cada una de las porciones yo digo sí es cierto personaje ins la instancia del personaje punto que pues punto no es el personaje ins siempre es 60 por tanto digo si pociones de equis más escenario es menor que a cuantos al personaje a 40 píxeles quiero recordar te lo digo yo 40 estaba 40 píxeles eso quiere decir que he cogido la poción con lo cual digo lo siguiente pociones activado dp es igual a cero pociones activado perdona no personaje game punto mira es igual a 8 la poción se desactiva y tu restaurar toda la vida siempre no seamos crueles ah por qué entonces restauró la vida y ahora simplemente en el foro en dibujo pociones solo dibujo aquellas posiciones a ver situaciones de pe más escenario es menor que 40 y también es cierto que porciones de p porque porciones activado de p es igual a 1 y aquí digo sí es cierto que porciones de que porciones activado de ps1 en ese caso pasa esto vamos a verlo vamos a ver si funciona bien el personaje me dispara mirad me dispara a esperar que no me está quitando vida com porque es la había desactivado yo el arquero para hacer un poco de trampa vale eso es lo que admira tres porciones ahí mira el personaje me empieza a quitar vida me quita vida pero yo toco la poción espera que no he recuperado la posibilidad pasando por aquí por la pantalla ya vamos a verlo la variable lo cual no deja de ser extraño debe de ser que yo la estoy nombrando de alguna manera incorrecta mira personaje puede ser vida personaje un momento vamos a comprobarlo si es cuando estás justo encima de ella vaya ahora mira tengo ahí la posición preparada bien me quita vida y yo lo que hago es que tomó la posición y recupere la vida si ahora exacto vilmente madre mía y encima sin modificar eso cojo la poción vaya hombre ahora me aparecen 2 así de repente así en grupo y ahora encima no tengo pociones fantástico pues me tengo que aguantar tengo que venga hombre que tiene otro la dificultad del juego efectivamente bien permitirme hacer lo siguiente qué es lo siguiente voy a cargar la imagen me voy a disco efe ht docs me voy a plataformas objetos me voy a nivel voy a big bands y entonces mirad y entonces voy a decir este archivo me lo guardo como veis lands fondo recordáis el parallax que hicimos entonces dentro de mis las de fondo voy a todo esto es el wisla fondo no pues ahora quiero el big bands y digo selecciono todo esto de momento pero eliminó a qué dolor los explico a que no me copio y pego una nueva imagen y ahora si puedo eliminar vale entonces como os decía selecciono todo esto y lo eliminó selecciono todo esto por eso un poquito menos y lo eliminó ahora con cuidado seleccionó aquello que no quiera esto se amen era un poquito de goma de borrar 4 píxeles borro por aquí también borro por aquí también borró por aquí también y esto va a servir lands por el color azul que es te lo puedo quitar con la varita me parece de allí entonces lo guardo y luego sobre escribo exportar como big bands con lo cual ahora en el escenario yo digo lo siguiente me voy a condiciones iniciales y en el escenario cargador del escenario digo bar escenario y bar escenario fondo es igual al image escenario de fondo es igual a niveles wieland fondo y simplemente lo que quiero ahora es que cuando dibujo en el loop el fondo cuando dibujo el escenario pues quiero dibujar primero en el escenario fondo el escenario x partido x 1.2 si todo ha ido bien con esto guarde recargo bien vale guarde recargo y no sé si lo veis como el fondo va a una velocidad diferente yo quiera es posible que me vaya a matar voy a poner 1.5 y así lo podréis ver mejor bien ahora se nota bastante más ahora toma todas las porciones pero no tengo malos pero tengo posiciones mira un malo vaya a los malos tres malos pues las voy a necesitar soy pero ver avale tales valores ya no lo sé he cometido un error fatal no pasa nada porque puedo resucitar lo único malo es que ahora las voy a gastando sí sin necesidad ahí es donde acaba de recortar recordáis por tanto os invito a que con estas sencillas líneas de código pues por una parte declárase el fondo por otra parte lo metemos en el loop con un partido 1.5 por ejemplo para que tengamos un poquito de efecto de parallax que siempre queda bien para un juego para dar profundidad especialmente es un juego 2d empezamos a preparar los deberes de fin de semana entonces los deberes de este fin de semana simplemente consiste en este juego reutilizar todo el código que podáis no digo que no tendréis que escribir algo tendréis que escribir pero no consiste en programar código desde cero sino consiste en el código la clase del arquero y en base a ello hacer la clase de este personaje que parece un enano es decir la idea consiste en aprovechar el concepto de objetos para en este caso introducir un nuevo malo pero comprobar que reutilizar el concepto de objeto pues ahora que ahora meter un nuevo malo no se ha firmado del emmy ahora cuánto código que tener que meter si no va a ser declarar nuevo malo arranca un nuevo malo meter el metro en el foro y ya lo tienes por tanto en primer lugar lo que voy a hacer es que voy a editar este archivo del enemigo voy a también seleccionar él cuál es el que estábamos trabajando este el arquero y os lo voy a poner para que coincida os lo pongo entonces este enano lo que hago en primer lugar es voltearlo horizontalmente para que mire hacia la izquierda lo del helado de fuego es un poco extraño ahora veremos qué hacemos con ello entonces selecciono todo lo copió aquí dentro de una nueva capa y vamos a buscar la coincidencia es que el enano ahí estará ay el enano estará dibujando y voy a eliminar cuidado porque tengo que hacer una eliminación de exactamente 56 píxeles mover 50 y 60 así que seleccionó estos de aquí corto pero una nueva capa esta capa la nueva pero fijaos abajo por mover menos 56,0 no sé si lo veis abajo para qué no no para persona la empresa que se podía con lo cual únicamente tengo hay un enano que sobra que es doble y lo eliminó por tanto allí podréis ver cómo empieza a coincidir pues el enano que pega con cuchillo el enano que recoge el cuchillo el enano que saca cuchillo y así tenéis por tanto un número igual de sprites cuidado porque se me ha ido uno para arriba y este qué sí espero que no lo esté viendo donde estoy trabajando eso es ahora también probablemente pero os lo voy a dejar porque si no quedará vacío prefiero que de repente aislarán o girado que de repente veáis nada que digáis esto que es error mío o después que está vacío o lo que sea entonces eliminó esto lo guardo como que pvr uno es pvr 1 lo guardo como pdr 1 b y por tanto ahora qué es lo que haríamos voy a hacer los deberes entonces lo que haríamos es que me voy a clases y sabes que me cojo el arquero y digo punto duplicó y los explicó cómo era no por supuesto ahora cargo enano js y digo enano o bj enano bj vamos a verlo this i de vista al contexto draw image no dibujo el arquero dibujo el enano pero para ello como os podéis imaginar lo que tengo que hacer es en condiciones iniciales cargador del arquero pues cargador del enano creó múltiples enanos aunque como se llamaba este archivo pvr 1b y digo bar enano es igual al image enano punto src es esto bar os x enano es igual a esto bar animación enano es igual a esto no enanos es igual a esto bar enanos es igual ánimo a rey así que no era nos va enanos enano o bj es enano vj era enorme j y ya está lo que estamos haciendo por tanto es reutilizar el mismo código para además de crear arqueros poder crear enanos y ahora así es cuando me voy a los enanos y digo esto es enano si gano flecha de momento está por ahí vale en principio ahora nos enfrentamos pero en principio y luego también tenemos que ver qué variables son comunes y empezar a hacer herencia en una superclase de propiedades comunes de todo eso pero de momento lo que quiero que veáis es que si ya tengo un arquero de repente tener 7 con personaje a de repente tener un personaje me va a ser más sencillo tengo que empezar a reescribir todo el código bien pero ahora mismo no va a pasar nada ahora mismo no va a pasar nada bien el nuevo viejo está en la 41 enano vj de enanos antiguamente enanos de ahí es igual a new enano o viejo está claro por qué pues porque en index.html he cargado arquero pero no que haga el verano por tanto el programa no sabe lo que es esa instancia tengo el juego si todo va bien ahora veréis que tengo arqueros pero no tengo enanos bueno avanzando pero cuando quieran saldrán y ahí está pero que es lo único que me quedaría por hacer pues lo único que me quedaría por hacer es en el propio loop en el propio dibujo simplemente donde aquí tengo el número de arqueros pues hago lo mismo para dibujar los enanos así que personaje ins posiciones pues digo formar y es igual a 0 y es menor o igual que número enanos vamos a ver digo enanos de iu enanos era no lo sé voy a ver qué pasa yo creo que esto debería dar algún error hoy vamos a buscar ahora es una flecha bien claro porque no he especificado qué es lo que ocurre ahí va otro enano y mira un arquero vale eso es lo que quiero que veáis es lo que quiero que veáis eso es lo que tenéis debes del fin de semana cuando tarda en resolverlo diez minutos vale bueno y que no tienen flechas de que ataquen estaríamos un poco más pero sobre todo los deberes de este fin de semana son para que os deis cuenta que después de haber sufrido esta semana con el tema de tener que capturar en objetos y luego todo es más reutilizable luego quieres dibujar x tipos más de personajes pues no son otros tres días haciendo el código son es decir mira ahora es como esto plans otro tipo de personaje le cambió la imagen le cambia un poquito la lógica evidentemente y ya tengo un nuevo personaje vale por tanto veréis lo que siempre me ha dado rabia de la programación orientada a objetos es que si esta es una gráfica de perdonarlo bueno ahora veremos que hay en cada eje no es tiempo y el verde no esfuerzo y resultados aquí perdón al esfuerzo y resultado entonces lo que siempre me ha dado rabia es que con programación procedural tu gráfica es así tu gráfica es así o a veces hay que reconocer que también es tiempo y complejidad pero bueno o sea con matrices quiere llamarlo así como estábamos trabajando hasta ahora al principio es muy fácil trabajar claro esto lo tengo al revés esto es no y resultado vale pero no hagáis que el resto básicamente lo que quiere decir esta gráfica es que con muy poco esfuerzo obtienes mucho resultado al principio el problema está en que despega es muy fácilmente pero con programación procedural cuando el juego se complica empieza a aparecer mucho código repetitivo y es cuando de repente aquello que había empezado muy fácil cuando el juego se complica se convierte en algo más complejo la programación funcional probablemente sea una gráfica cómo está el hecho de esto y encapsular lo en funciones hace que al principio te cueste más fíjate esto era programar profesoral tienes programar con funciones pero también sabes que cuando llegas a cierto punto la subida es lineal la dificultad es lineal pero el resultado responde al esfuerzo lo que siempre me ha dado rabia programación entrada a objetos es que la gráfica es que al principio le pones mucho esfuerzo para tener muy poco resultado pero sin embargo más adelante cuando el juego se complica precisamente aplicando un poco más de esfuerzo obtienes mucho más resultado que es lo que acaba de ocurrir entonces al principio estos dos o tres días que hemos dado con este juego pues hoy han sido un poco como traumáticos porque claro es y programa un objeto y la ley si lo veíamos claro pero pues bueno ha sido tres días en tener un malo en pantalla pero sabes que una vez que tenemos un balón pantalla en diez minutos dúplicas otro malo y tienes otro malo en pantalla diferente porque esto se ha salido por sólo se mira para enfrentarme la oferta de bytes de primavera bien entonces por eso os digo claro imagínate que yo llego el primer día con la empanada mental que voy a estar el primer día y aparte de explicarte variables y matrices y el 'new y la x la y doble el doble foro además de diego y además objetos a cada puesto me digas por ahí por tanto llega un momento en el que no digo ni mucho menos que a partir de ahora objetos para todo ni mucho menos a partir de ahora objetos cuando esté justificado utilizarlos pero desde luego el tema es que veáis que los objetos finalmente pues nos dan una manera más accesible de acceder a grandes cantidades de información y sobre todo lo que comentaba creó el primer día lo de la plantilla de la factura es que yo vengo aquí ahora arquero o enano y de un solo vistazo yo veo en la estructura de archivos leal archivo enano punto js y tú qué dirías que hace el archivo era no punto j s si tiene pinta de ser una plantilla que define cómo se comporta el malo llamado enano pero es que yo abro esa plantilla y digo vale pues mira esto tiene toda la pinta de que aquí se están declarando una serie de propiedades iniciales pero tiene toda la pinta de que aquí se va a especificar qué es lo que pasa cuando el personaje dispara aquí se va a especificar qué es lo que pasa cuando el personaje camina y aquí es lo que se va a especificar con el personaje recibe daño quiero decir por tanto que es más complejo de concebir pero una vez que ya estabas metido en el ajo echarle un vistazo a cómo funciona todo acaba siendo mucho más fácil que tener un código así de largo y ver matrices vida posición x posición y que es donde está aquí cada cosa que al principio es fácil pero luego se complica vale por tanto los deberes son estos que acabo de hacer que simplemente otro personaje e integrarlo en más la chorra villa jesús puedan acudir a ocurrir con el tiempo que tengáis lo que ha hecho él para la chs meter la barra cambiar de color para que el color sea compatible con la pócima los rodillos visuales