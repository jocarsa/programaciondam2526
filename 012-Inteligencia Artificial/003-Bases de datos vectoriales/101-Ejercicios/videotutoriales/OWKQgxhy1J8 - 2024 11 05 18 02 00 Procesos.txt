Bueno pues mientras Estaba en clase con los de primero Pues he estado pensando que técnicamente claro podríamos hacer o sea que al final lo estemos haciendo en python realmente no es mucho problema en el sentido de que lo digo porque hacer una interfaz de usuario vía web pues me repele un poco Perdona vía web vía tkinter me repel un poco porque cada día las aplicaciones web son más comunes y las aplicaciones de escritorio son menos comunes pero claro haciéndolo con python pues lo podemos hacer con te o sea con flask Vale entonces vamos a ver vamos a arrancar heit y Eh Esto es dam segundo y e servicios y procesos comunicaciones de red utilización de sockets Vale y smtp y lo junto vamos a juntarlo para juntarlo Ah claro lo estaba haciendo con idel bu pero da igual voy a hacerlo con esto bien eh vengo por aquí y ahora voy a juntar entonces en enviar aquí username password crear el mensaje así que copio me voy ajunto me voy a enviar y lo pego por aquí vale creo el mensaje y ahora le ponemos cosas porque por ejemplo en enviar le puedo decir que le paso una serie de parámetros estoy grabando sí estoy grabando Vale entonces por aquí digo que envío con asunto eh momentín voy a hacer una cosa desde para asunto mensaje Vale entonces esto es desde para asunto y mensaje Okay conecto al servidor ftp eh o sea ftp no smtp correo enviado correctamente y tal bien Vamos a probarlo Porque a continuación voy a decir pues Vale pues hago una prueba local hago una prueba local enviar desde e dam @ jocar.com.mx envío Así que ahora me voy al terminal me voy a c bar W html dam segundo programación de no procesos no a ver ls programación de servicios procesos CD 003 CD 007 ls vale Y esto es eh python 3 003 no Hola Por qué no Uy python 3 no python 3 y 003 Ah ahora sí venga correo enviado correctamente Así que ahora espero unos segundos en el correo electrónico y aquí lo tenemos vale asunto desde python lo cual quiere decir que ya he conseguido encapsular y reutilizar esto de forma bastante correcta y ahora evidentemente pues al hacer print en lugar de hacer print voy a hacer un return y voy a hacer un return y voy a decir que eh mensaje es correo enviado correctamente es decir devuelvo un Jason y return F y error f e Perdón bien ejecutamos de nuevo vuelvo cuidado F Ah sí No espera Ah sí F aquí ahí vale correo enviado y de hecho me da bueno Claro porque es return Vale entonces realmente no está devolviendo nada Ok recibidos y ya está no se ve pero ya me acaba de entrar el correo a continuación 004 continuamos juntando me voy a poner servilleta en la cabeza porque es que se me clava vale continuamos juntando entonces imap y me vengo por aquí y conecto y cierro conexión copio en el recibir pego esto lo pego por aquí ahora empezaré a quitar cosas porque si hace falta pongo comentarios pero los pondré a la derecha vale Okay Vale y ahora en lugar de enviar ya tenemos claro que podemos enviar cuidado aquí sí ya tenemos Claro que podemos enviar Ahora quiero recibir f5 no porque no Esto no es f5 Entonces python 3 004 y continuamos dibujando vale Y aquí bien Vamos a ver eh Ah vale nueva cuenta y tal esto es un correo vale Okay bien A ver webmail. yonos punes no eh yonos webmail vale a ver atención al cliente voy a quitar este correo papelera vale okay borro esto definitivamente me vuelvo al correo y ahora sí vale tengo asunto Hola de José Vicente cuerpo Hola Claro qué ocurre Pues que ahora obviamente lo que quiero es devolver como jas porque sí vale estoy haciendo un print en pantalla pero hacer un print en pantalla es un poco bestia Vale entonces un poco sucio así que vengo por aquí y digo vamos a ver para cada uno de los mails Okay mensajes es igual a vacío Y entonces digo a ver vale Y aquí digo mensaje es igual a diccionario vacío mensaje de asunto es igual a subject mensaje de from o d es igual a from por el from tiene Ah mira tiene un guion después un guion bajo curioso vale Y el cuerpo es igual al Body con lo cual vamos a ver esto por aquí y digo Ah esto es If Ah vale bueno Esto Pues otra vez vale Y aquí al final print Ah un igual 50 veces nada fuera Vale ahora digo eh mensajes punto apen mensaje y al final del todo mail. Close mail. logout print mensajes vamos a ver si es cierto que esto nos devuelve los mensajes que no le diy f5 y no es f5 python 3005 y devolver como jas Vale qué ha pasado Crash muy bien Vamos a ver un indent das not match vale aquí en msg Qué raro vale vamos a voy a hacer una cosa vamos a ID el a ver cierro esto que es de primero esto es de primero descartar cambios esto no esto es el correo esto es de primero vamos con esta carpeta dam segundo y para la indentación probablemente vale voy a esto anterior lo pegamos ahí devolver como J son y vamos a ver dónde está el problema de indentación aquí y vamos a ver email message Qué pasa ahí me he dejado Algo vamos a ver qué me he dejado response Part 1 pues no me he dejado nada A ver no does not match Any Ah Espérate Espérate vale Aquí está el problema mensaje este es el problema ostras claro esto no encaja con ninguna indentación Ni Esto y ahora me dirá lo mismo de otras líneas vale a ver claro subject Ah qué rollo No me digas que voy a tener que hacerlo con todo bueno eh No esto for Part content type If content type Body y mensaje y ya me queda el els el body el apen el mail el logout y el print mensajes vale venga va Qué pasa ya esto qué le ocurre pues le ocurre esto pero vamos a ver si ya lo he intentado qué quieres ah qué pasa a ver esto aquí ost es que no sé qué quiere foro toma a ver cómo puedo arreglar esto a ver otra cosa que se me ocurre otra cosa que se me ocurre es abrir imap a ver aquí conectar con el servidor y bueno básicamente volver a hacerlo a ver devolver como jas 006 indentación vale pego me abro el 005 voy a ponerme el 005 en la otra pantalla vale a ver no no no a ver seis pego recibir f5 Ok correcto Vale ahora esto es correcto ahora recibir mensajes es igual a Ray y esto lo pongo aquí vale mensaje en el instance esto lo pongo aquí Ah puñetas ostras no sé aquí qué va a pasar Pero vale mensajes igual a subject Okay mensaje de from eh mensaje cuerpo y mensaje cuerpo mensajes a pen mensaje mensajes a pen mensaje y eh print mensajes f5 Okay Vale esto ya es eh A ver Ah cuerpo Hola y cuerpo correo vale fantástico esto quiere decir que ya estamos devolviendo los mensajes como un jas y por lo tanto ahora a continuación pues ya podemos hacer prácticamente lo que queramos en el sentido de que yo puedo esto Ahora me voy a crear una carpeta 007 funciones y dentro de la carpeta nueva me voy a crear en funciones un archivo llamado funciones correo vale Y voy a quitar la llamada y voy a crear otro archivo que va a ser el archivo principal o servidor python lo que va a hacer es eh from bueno import o from eh funciones correo import all vale lo importo todo y entonces quiero recibir Okay print recibir porque el print recibir me está haciendo creo no print mensajes no return mensajes vale quiero que me retorne los mensajes como debe hacer correctamente una función vamos a ejecutarlo f5 perfecto vale ahora esta función de aquí ya está llamando a la función que corresponda dentro de recibir lo cual quiere decir lo cual quiere decir que ahora a continuación ya puedo empezar a hacerlo de flask me vengo por aquí me vengo por aquí chat gpt y digo eh flask simplest server Vale y ok Ya está el más sencillo de todos vengo por aquí no r vale from flash import flask y en la ruta recibir quiero return recibir quiero recibir tendré que hacer recibir porque recibir es un diccionario y creo recordar voy a probarlo creo recordar que flask porque como tengo un poco de cacao entre no de js y flask puo en fin vamos a probarlo e dónde estás el terminal lo he cerrado entonces CD bar w html dam segundo programación de servicios y procesos CD 003 c CD ls Vale y CD 007 esto teóricamente podría haberlo hecho en una carpeta nueva que se llame 008 servidor Vale entonces 008 servidor vale CD 008 servidor cierro todo esto y ahora abro con idle y voy a ejecutar de hecho vale python 3 servidor python Estoy escuchando en el puerto 5000 me abro un navegador me voy a localhost bar5 2.5000 vale Y me dice not Found porque no he definido la ruta base pero si me voy a recibir vale Ahí lo tenemos Mira pues esto en node hace falta convertirlo pero Aquí no aquí en python me lo devuelve a palosco y ya está esto qué quiere decir pues claro esto quiere decir que yo ahora a continuación ya tengo un backend donde tengo pues dos métodos dos rutas vale de momento tengo recibir y luego lo que haremos es hacer enviar y ahora a continuación qué me hace falta pues me hace falta una interfaz de usuario me hace falta la fecha Por cierto bueno da igual ahora le pondremos la fecha eh de cada correo Vale entonces yo ahora a continuación vengo por aquí y me voy a vamos a ver vale me voy a crear un archivo html Entonces hago así y digo and on load Index html index.php no no no Sorry Index html que me he rayado vale aquí cierro aquí recargo no f1 009 eh Index html o Index vale Y ahora en el servidor lo que voy a hacer es aquí render template eso es lo que quería creo dos rutas recibir recibe mail Vale y Index recibe Index render template Index con lo cual pues obviamente esto quiere decir que ahora sí puedo abrir heit y en hedit en Index puedo crear un archivo nuevo llamado Index html archivo que vamos a intentar que sea lo más sencillo posible doc type html Head Body y vamos allá vale y voy a beber porque me lo merezco vamos a ver vale Y ahora que he bebido y ahora que he bebido aquí en el body voy a decir por ejemplo pues Main por ejemplo y después de hacer Main me voy a Script me voy a Script me voy a rascar la oreja porque me pica Ah vale ni que decir tiene Obviamente que podemos integrar también esto luego con crimson vale Al final todo es integrable con crimson Vale entonces me voy a Script y digo fetch http 2 bar localhost bar 2.5000 barra recibir okay vale punto then fun response y digo return response.js y punto den fun datos y console pun log datos de momento vale lo más sencillo que puedo entonces me voy aquí no aquí ya estaba yo antes Dónde estaba aquí No tampoco Aquí bien me voy a recibir pero ahora en lugar de recibir me voy al raíz not Found Por qué Porque tengo que hacer una carpeta llamada public aquí dónde estás templates Esto vale me hago una carpeta nueva llamada templates en templates cargo Index html Hola súbelo a ver en templates muevo Index html Oh Wow guardar claro creo que tiene lo mismo vale ahora cierro elimino OK ahora sí bien y vamos a probarlo Oye el servidor lo he arrancado creo que no por cd00 CD 008 no En qué número estoy en el 009 vale python 3 servidor Ahora sí me voy aquí vale Y no vemos nada pero sin embargo hay una Ray y hay una Ray que tiene una serie de como vemos ahí de elementos vale Lo cual quiere decir que ahora puedo empezar a poblar estos elementos dentro de del sistema es decir ya los he recuperado ahora ya tengo acceso a una interfaz de usuario y dado que tengo acceso a una interfaz de usuario pues ya puedo empezar a hacer cosas vosotros me diréis Oye pero es que en crimson el Back está hecho en php Pero esto está hecho en python Pues sabéis que casi que mejor vale porque así no hoy porque hoy no nos dará tiempo pero así os puedo empezar a demostrar como Incluso en un sistema de gestión empresarial pues se pueden mezclar diferentes tecnologías un trozo hecho en php otro trozo hecho en python y no pasa nada hombre y no pasa nada quiero decir habrá que tener cuidado luego para integrarlo pero ya está pero se puede integrar correctamente bien Ahora a continuación me gustaría hacer un template entonces vengo por aquí copio y pego f2010 template pero template en el sentido de html no template de flask así que templates me voy a no me voy a Index y aquí e abajo por ejemplo o arriba da igual voy a decir template Y entonces digo template ID eh correo vale un correo individual entonces digo article y digo vamos a ver tengo h3 el asunto h4 d y p cuerpo del correo Esto no se ve porque vosotros Ya sabéis esto es cd01 python servidor vosotros ya sabéis aquí que un template técnicamente no se ve en la pantalla vale porque hay que instanciar lo que es justo lo que quiero así que eh js use of html template que básicamente consiste en crear un instance vale en crear una instancia vamos a ver okay eso lo tengo vale sí okay venga esto es lo que necesito vale Y entonces digo plantilla es igual a document get Element by ID correo esto Aquí y ahora contenedor es igual a document query selector y Main vale digo Main por decir algo ahora continuación esto lo voy a poner aquí ahora a continuación aquí Esta es la cosa delicada vale datos pun for each fun dato Y entonces digo led tarjeta es igual a plantilla content clone node el clone node es lo delicado es lo específico y ahora query selector Vale y container appen vale Y ahora digo lo lo complejo de template es este es el clone Noe Vale yaes ahora digo eh tarjeta punto query selector H qu h3 punto text content es igual a dato punto qu dato punto asunto claro como te puedes imaginar Pumba h4 IP text content es dato pun d y dato punto eh Espera que te lo digo dato punto cuerpo y por último eh contenedor appen Child plantilla o tarjeta Perdón que es el instanciado y ya está Ahora vengo por aquí recargo y ahí lo tengo vale ahí lo tengo ya está hecho y ahora evidentemente pues lo que tenemos que hacer es formatearlo un poquito mejor en el sentido de que pues yo ahora vengo por aquí le digo de momento un poquito de estilo de css luego lo separaremos en varios archivos ya sabéis que primero desarrollo en un único archivo y luego ya lo separo Y entonces digo eh vamos a ver todo De momento todo es padding cer píxeles margin cer píxeles vale Y así empezamos ya quitando un montón de márgenes ahora continuación digo article es eh vamos a ver Mira el body va a ser quiero estilizar lo menos posible porque como luego esto irá integrado dentro de crimson no quiero que unos estilos machaquen a otros vale por tanto quiero hacer que sea mínimamente elegante pero que luego sea integrable entonces eh Body Más que nada porque en crimson que es un sistema de gestión de empresa Pues luego habrá un apartado que será correo vale consulta tu correo desde aquí dentro pues Vale para eso para que cuadre para que encaje bien entonces Body background rgb 220 220220 y article background White vale padding 20 píxeles Border radius 10 píxeles Box Shadow c píxeles 4 píxeles 10 píxeles rgba 0.3 una cosa así vale ahí empieza a estar la cosa entonces ahora margin 10 píxeles Ok vale Y ahí empiezo a tener un listado de mis correos no sé por qué el Border radius ya está OK Border radius pero lo divertido es que si ahora yo me voy a mi correo Ok y digo correo para dam @ com eh nuevo correo a ver si ahora y ahora te escribo un nuevo correo para ver si lo recibes le doy a enviar click Okay enviar está enviando espero unos pocos segundos recargo aquí en local Host en este servidor recargo de momento no pasa nada tranquilos ahora llegará vale me vengo por aquí y ya está nuevo correo a ver si ahora y tengo un nuevo correo abierto en la pantalla vale pero quiero más porque yo a continuación lo que quiero es que cuando yo haga clic en un correo pues ese correo se abra ese correo se haga grande yo lo pueda ver vale tampoco es que ahora mismo tenga correos gigantescos pero digamos que quiero que ocurra eso así que para ello Pues ahora en el lado del cliente Por cierto eh otra de las ventajas de estar haciéndolo de esta forma es que si os fijáis estoy haciéndolo en modo full stack vale que quiere decir que la capa de abstracción de Front es totalmente ignorante de qué es lo que ocurre en el servidor por tanto ahora mismo el servidor es python el día de mañana lo puedo cambiar A node lo puedo cambiar A php lo puedo cambiar A lo que me dé la gana y mientras la capa de servidor le envía la capa de cliente un js al cliente le da igual quien le esté enviando un js Mientras que el j sea correcto vale o sea como estamos haciendo crimson realmente no es que tengamos previsto cambiarlo de tecnología pero por si acaso bien Ahora a continuación vengo y digo Vale ahora eh Quiero abrir un correo Okay pego f2 011 y abrir un correo o enviar un correo voy a enviar un correo vale porque es que eh Si no igual no se nos acaba la clase y creo que es más interesante enviar un correo entonces 0011 enviar un correo vale Así que yo vengo por aquí y al final del todo al final del todo a ver paro CD 011 eh python TR servidor vale venga local Host Seguimos igual OK Pero ahora en el 011 en templates aquí en el Index yo por ejemplo voy a poner aquí un article vale en el Main y voy a decir asunto input type text y d es igual a asunto d no para input Ty ID para mensaje Time no me lo está marcando vale No pasa nada vamos a verlo Ah ahora que me lo marcas curioso ig no puedo poner eso vale en fin lo que sea vamos a ver bueno así rápidamente Vale pues ya Ah la continuación Ah y un botón de enviar claro buton enviar así que voy a javascript y le digo led botón es igual a document query selector Button Y entonces digo que botón punto on click es igual a function Y entonces voy a decir a ver voy a decir vale voy a decir a ver mensaje es igual a asunto es document pun query selector asunto punto coma para y eh mensaje y cómo se llama esto eh mensaje vale para es para Y esto es mensaje creo cuidado esto es mensaje Y esto es mensaje vale una vez que tengo esto de crimson podría un fetch con Jason estoy vago Así que js fetch and Send js vale No esto Sí ahí esto a ver no así vale entonces vengo por aquí y le digo fetch y ahora viene el interrogante Vale y pongo esto coma post type application js stringify mensaje vale una vez que tengo esto a continuación lo que quiero hacer es atrapar esos elementos vale De hecho en el servidor me voy a crear una ruta aquí una ruta llamada enviar y Esto va a ser ref enviar email y va a ser eh funciones correo va a ser enviar enviar Okay desde es dam @ hocar comom Vale entonces Aquí voy a preguntar un momento por qué digo Ah no esto es la ruta es recibir no enviar y ahora ya vengo por aquí js python y digo Now make python get js Data and pass to function parameter parameters Ok recibir y ahora aquí cuidado cuidado porque me hace falta Todo esto me hace falta Todo esto request y J sonif madre vamos a ver Ok Esto vale Data es igual a request get jas vamos a asumir que siempre va a funcionar voy a quitar las estructuras de protección Data es igual a request.js que ya empezamos con el tema de los sangrados Entonces el servidor me lo voy a abrir con idel vale Data es igual a request Jason ahora asunto es esto aquí entiendo que enviar email aquí methods post vale datas igual j y al final enviar asunto para mensaje vale Ok esto en principio ya con lo cual si en principio ya vamos a verlo no sé en qué carpeta estoy en 011 Ah pues sí pues enviar un correo vale me vengo aquí me voy a No aquí no me vengo aquí Ay lo siento recargo y digo asunto prueba para enviar correo para info @ josic caral.com mensaje Esta es una prueba para ver si llega y si no da error sabes Entonces le doy a enviar error vale eh review function for enviar email did not return a valid response Ah return or ended with a return vale Okay esto quiere decir que aquí en idle eh No esto qué es esto no es eh me he salido No aquí claro debe retornar algo vale entonces pues eso debe retornar Pues algo así como return Okay Vale return J unify status Ok message ok No pasa nada porque no estoy recogiendo el mensaje no estoy devolviendo el mensaje pero bueno ya está vale Así que 400 no 200 el mensaje de Ok es 200 vale paro por aquí vuelvo a arrancar me voy al correo electrónico vuelvo a enviar Ah muy bien recargo vale asunto eh nuevo mensaje para info @josé ventec carratala comom voy a ver que haya puesto bien el correo electrónico porque si no va a llegar okay Y este es un mensaje desde python le doy a enviar todo parece ok No estoy recogiendo el mensaje de vuelta vale No pasa nada no estoy haciendo nada para vaciar Campos ni aquí poner Ok ni se ha enviado correctamente ni nada parecido vale No pasa nada pero yo me voy a mi correo y en el correo me voy a recibidos y aquí y mira el anterior se había enviado al parecer Vale y nuevo mensaje con lo cual Este es un mensaje desde python y por lo tanto Pues comprobamos como ya tenemos realizada una aplicación que cumple Pues un mínimo para poder considerarse como un micr cliente de correo electrónico en el sentido de que por una parte recibe nuestro correo electrónico nos permite consultar nuestro correo electrónico y por otra parte nos permite enviar un correo electrónico ahora obviamente pues tendríamos luego que eh que implementar más cosas vale un botón de redactar nuevo correo eh cuál he leído y cuál no he leído responder a correo un montón de cosas vale Pero hoy por lo menos pues quería que se quedará hecha pues la parte más básica de un pequeño cliente de correo electrónico que nos permita leer y nos permita escribir correos electrónicos más adelante obviamente en el momento en el que lo integremos con crimson pues podemos implementar un concepto que sea agenda de contactos donde la cuando yo le diga aquí para pues aparte de que yo pueda escribir me aparezcan los usuarios Pero qué usuarios los que tenga crimson vale Pero a la vez no quiero que esté integrado ferreamente con crimson sino que quiero que crimson le pase un Jason y mientras que alguien te pase un Jason con contactos Pues tienes contactos Y si luego coges esto y lo separas de crimson pues funciona como una aplicación independiente vale un poco intentando Buscar Pues cómo os diría yo un equilibrio un balance vale un una conveniencia que alun de alguna forma desarrollemos componentes que luego se puedan integrar entre sí cuando nos interese o que se puedan separar entre sí cuando nos interese vale Y que de esa forma pues seamos lo más dinámicos y lo más flexibles posibles Bueno pues eh con esto acaba el ejercicio de hoy de procesos y servicios en este caso comunicación de red con lo cual vamos a hacer 5 minutos de descanso