en esta segunda parte del ejercicio voy a demostrar cómo podemos usar bases de datos incrustadas con la versión lite de sql server incluida en webmatrix por eso voy a navegar hasta esta tercera pestaña hemos visto sitio hemos visto archivos vamos ahora a por bases de datos y dentro de bases de datos voy a agregar una nueva conexión a una base de datos del sitio estamos trabajando por tanto como vimos con sqlserver compact y agregó una nueva base de datos la base de datos recibirá el momento el nombre de datos punto sbf aunque evidentemente lo puedo cambiar voy a llamarla productos o tienda por ejemplo tienda sbf al hacer doble clic para saber a editar las tablas de la base de datos voy a crear una nueva tabla haciendo clic con el botón derecho justo encima de tablas y para ello lo que voy a hacer es crear el primer nombre de una tabla de sql server compact vamos a trabajar de la tabla llamada productos donde a continuación estamos definiendo el diseño de esta base de datos el diseño por tanto no son todavía los datos sino es la estructura que va a tener esta base de datos voy a poner un campo primero y de que es una clave primaria así que lo es y no permite valores nulo un campo fija - que ha aparecido la señal de clave primaria un campo llamado nombre el nombre del producto un campo llamado descripción y un campo llamado precio el campo de tipo de va a ser un campo entero el nombre va a ser un marchar un campo de tipo texto de tipo alfanumérico con 50 caracteres la descripción va a ser un campo de tipo alfanumérico con 50 caracteres vamos a poner unos cuantos más vamos a poner 500 y a continuación por último el precio va a ser un campo de tipo entero una vez que tenemos esto lo que vamos a hacer es guardar vamos a cerrar esta pestaña hay cambios sin guardar desea guardarlos por supuesto que sí tras lo cual comprobaremos como ya tenemos la tabla productos una vez que tenemos la tabla de productos podemos hacer dos cosas voy a pulsar con el botón derecho justo encima del nombre de productos y podré o bien pasar a la vista de datos o bien pasar a la vista de definición es decir cambiar la estructura de la tabla o bien eliminarla o bien cambiar su nombre como ya he definido voy a pasar directamente a la vista de datos y dentro de la vista de datos voy a empezar a escribir cosas por ejemplo el nombre de producto voy a poner por ejemplo guitarra acústica número 1 precio 300 por ejemplo salto al siguiente vamos a ver número 1 y ahora voy a vamos a pulsar enter vamos a introducir el segundo registro o piano de cola y no sé 1500 y voy introduciendo líneas en este caso bajo eléctrico y por ejemplo 400 vemos cómo estamos poblando la tabla con productos con registros una forma más la que podemos trabajar es cambiar de la definición a los datos la definición es la estructura de la tabla los datos con los datos estamos trabajando realmente con los datos contenidos dentro de la tabla más adelante estaremos ampliando mucho más la explicación acerca de sql y de la relación de sql específicamente de sql server con windows server 2012 bueno ahora que tengo una tabla lo que voy a hacer es llamarla directamente desde el archivo desde los archivos desde default 12s html dentro de la cabecera haré lo siguiente bar bebé creó una variable llamada bebida está veis pongo data veis punto y uso alguno de los métodos que tiene el objeto de está veis preparados para mí voy a usar en este caso open voy a abrir una base de datos que va a ser a tus abro no pues acabamos de crear una base de datos con el nombre tienda punto s df por tanto voy a abrir la base de datos llamada tienda punto y coma para finalizar de esa línea y a continuación todo aquello que me devuelva a la consulta a la mini base de datos a la base de datos de sql server compact y lo voy a almacenar dentro de una petición por eso va a petición es igual a vamos a ver se lee front y voy a escoger productos ya que recordamos que teníamos una bueno una base de datos llamada productos vamos a ejecutar de momento probablemente nos tendremos un resultado ya que únicamente lo que hemos hecho tenemos un resultado de antes es llamar a la base de datos y establecer una petición que es esto que he puesto aquí esto lo veremos bastante más adelante o perdón un poco más adelante y quería decir en la parte de sql server en windows server esto que vemos aquí es una de las cuatro peticiones básicas a una base de datos que podemos hacer que está soportado por supuesto a través de sql server donde las cuatro peticiones básicas son la de seleccionar la de insertar la de eliminar y la de actualizar en este caso estoy realizando una selección pero sea como sea lo que quiero ahora es obtener el resultado de la base de datos por tanto voy a hacer una tabla y dentro de la tabla dentro de trv y hacer lo siguiente tr esto que estoy haciendo es una tabla html y pongo por ejemplo el nombre la descripción y el precio vamos a poner el cursor aquí y el precio evaluamos el resultado de esta acción vemos como tenemos una tabla con nombre descripción y precios no lo vemos bien siempre podemos poner el border igual a 1 volver igual a un píxel y así al ejecutar de nuevo veremos mucho mejor cómo es esa tabla lo que quiero ahora por tanto es devolver el contenido de la base de datos y poblar la tabla con él por eso voy a bajar una línea después del tr voy a poner un for each voy a poner un forista igual que antes délfor y en este caso quiero que se dedique recordamos que antes el óryx lo que ha hecho es recorrer el archivo de texto en este caso el for each quiero que recorra la conexión a la base de datos que quiero que recorra la tabla de la base de datos y me devuelva su resultado vamos a ver lo voy a decir var línea no puede usar línea porque los adelantes por tanto parte del inning mmm la palabra está reservada y debe punto y voy a usar ahora query es una petición donde la petición que voy a hacer es la petición que he nombrado como medición con esto en principio ya he creado mi conexión a la base de datos lo único que tengo que hacer ahora es pedirle algo por tanto voy a decir que arroba línea debe saber la variable de belén bebé línea punto y voy a usar el nombre por ejemplo nombre ya que el nombre dentro de la base de datos es una de las columnas que he creado nombre descripción y precio repito de nuevo copio pego y ahora quiero poner la descripción y quiero poner el precio si todo ha ido bien y si no tengo ningún error cuando ejecuten obtendré una tabla donde tendré el nombre del producto la descripción del producto y el precio del producto lo interesante en este caso es que fijémonos como asps está conectando la base de datos sql server compact y lo está devolviendo a través del servidor cosas que pueden pasar por ejemplo errores que podemos cometer es selecto que evidentemente no existe y no existe de esta instrucción from productos y trato de ejecutar esta línea lo que voy a hacer es obtener un error en el servidor donde error analizar la consulta en este caso el error ha sido difícil de detectar ya que me está dando el error en bar de línea y realmente ahí no está el error está dando el error ahí porque falla al ejecutar la petición pero si falla al ejecutar la petición no es porque falle esta línea sino porque falla la línea anterior donde había definido la petición si devuelvo select en ese caso obtengo otra vez el programa en funcionamiento vemos por tanto como es importante es bastante interesante aprender algo de sql por lo menos las bases para poder diagnosticar los errores que puedan tener las aplicaciones cuidado debe línea punto nombre 2 este va a ser otro error tengo un error vamos a visualizarlo aquí y me dice que tiene un píxel no es un atributo válido para border este error me lo está dando aquí vamos a poner uno y probablemente este error desaparecerá vamos a ejecutar de nuevo el programa y comprobaremos en este caso como tengo otro error al nombre de columna nombre dos no válido porque no es válido nombre de columna nombre de dos no es válido por la sencilla razón de que si miro en la base de datos tengo nombre descripción precio o si quiero ir pero no tengo nombre dos por tanto cuando veamos un error como el que acabamos de mostrar en pantalla simplemente el error está diciendo que cuando llames a la base de datos tienes que llamar la base de datos usando sus nombres de columna correctos lo que quiere decir que no te puedes inventar nombres de columna hay otros lenguajes como por ejemplo php donde se llamas a una columna que no existe simplemente php no te devuelve nada en la pantalla a s&p lo que hace es fallar que hace es fallar saca una quizás molesta pantalla de error pero por lo menos te dice dónde está el error que has cometido y probablemente cómo puedes arreglarlo