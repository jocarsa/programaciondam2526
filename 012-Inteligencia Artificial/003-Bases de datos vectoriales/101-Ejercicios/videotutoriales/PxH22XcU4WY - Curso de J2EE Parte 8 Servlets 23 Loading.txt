y por tanto ahora lo último que me queda por hacer mirar es una pequeña petición a la base de datos la petición atención todos me estáis mirando a mí no a la pantalla lo que vamos a hacer con la petición es copiar y pegar el código trae cats que teníamos de ejercicios anteriores me voy a abrir mi provincia y voy a hacer lo siguiente lo que voy a hacer es crear una provincia cuidado en este caso me falla la conexión y si me falla la conexión es porque me hacen falta realizar atención mirarme la importación dejaba sql todo así que si tengo aquí errores me voy a arriba a la importación y digo import java punto sql punto todo y con eso si todo va bien comprobaremos como los errores han desaparecido bien mirada me conecto a localhost me conecto a provincias recordamos que había creado el usuario provincias y había creado la contraseña provincias la petición a la base de datos en principio es select all from municipios y ahora viene el bacalao digo donde no me acuerdo siempre vi dos las columnas de mis bases de datos donde código postal es igual más esto con comillas no hace falta porque es un entero más request punto get para meter y el parámetro que parámetro es pues el parámetro es código postal cuidado tengo que decirle límite 1 porque sabemos que van a haber un montón de duplicados y sólo quiero el primer resultado que me salga por tanto al final esto va a ser tan sencillo como decir lo siguiente rs get string y quiero devolver la población vamos a ver si ha funcionado correctamente ya sería raro que funcionara bien la primera pero vamos a probarlo voy a quitarle este mensaje spring line cuidado porque ya no es out in line out punto pelín line es cuando trabajamos con jsp en un servet es mensajes print line vamos a probarlo me dice que tengo un error vamos a ver dónde está el error lo mismo mensajes print line y si ya no tengo ningún error para el servidor ejecutó el jsp cruzo los dedos redoble de tambor en la mesa y he parado y no ha servido de nada pero no pasa nada porque este es el clásico error de que el servidor se me ha quedado un poco enganchado ojalá ya firmaría yo para que todos los errores fueran s y bueno vamos a conectarnos con la base de datos y a ver si nos devuelve algo en este caso tengo una base de datos que creáis que no va a ir rápida porque está en local pero tenían a ciento y pico mil registros así que quizás en este momento nos dé un poquito más de tiempo a ver el resultado del cargando bien como os decía voy a ejecutar estoy publicando entonces pongo un código postal 46001 salgo ha habido algún problema bien ha habido algún problema quiere decir que dime provincia no lo está cargando correctamente lo cual es raro pero ay sí por supuesto que sí en la prueba que he hecho antes me había dejado dime provincia 2 bien pues para el servidor que cabeza la mío para el servidor vuelvo arrancar la aplicación pongo un código de provincia 46001 y cuando salgo bueno no he podido conectar con la base de datos porque por el conector de mysql porque recordamos que para conectarnos a mysql necesitamos que java necesitamos que el proyecto tenga el conector de java en la carpeta correcta recordamos que este conector de java se ponía dentro de web content dentro de web y ene efe dentro del iva así que me lo voy a sacar de cualquier otro proyecto jsp conecta debe web content web y ene efe link me lo copio me lo pego y volvemos a probar esto sí que son los errores típicos normales y comunes del desarrollo de aplicaciones en java enterprise por tanto ahora pulso play si queréis voy a refrescar aquí y una vez más voy a decir 4600 1 y si todo va bien cargando valència habéis visto lo que ha pasado en la pantalla enciende un código postal que sepáis que no sé de valència 46 190 para la población y lo que voy a hacer ahora mira todos una pantalla atención fijaos que le cuesta un par de segundos buscar en la base de datos por tanto veis que pone cargando y después de poner cargando pone valencia alguien que sepa algo un código postal que no sea de valencia pero tres que 150 y yo te pregunto es correcto que es de alicante el código no vale pues ahí tenemos vale el buscador de códigos postales en funcionamiento luego ya permitirme que haga un detallito y os envío el código por correo y el detallito consiste en que simplemente me voy a internet y busco así a pelo loading gif y si buscáis loading gif aparecen ya un montón de gibbs ya hechos con el típico gif que da la vuelta entonces pues voy a el tamaño icono pues por ejemplo uno como ese compruebo que sea un gif animado voy a ver imagen a ver si se ve si está animado si carga si no pues voy a abrir dos o tres no es cero sí un poco grande verdad pero servirá y eso tarda en cargar sí pero no carga por tanto bueno ya te digo voy a buscar otro porque ese es el típico loading así que me lo guardo me voy al sistema de archivos me voy a bar me voy al live me voy en mi caso a tonka 7 me voy a web apps me voy a ruth me voy a hacer de provincias y en web content para ser un poco ordenados me creó una carpeta img me guardo ese archivo como loading punto gif y eso quiere decir que ahora me puedo ir a eclipse y en la función le digo que en lugar de cargando atención todos a la pantalla creó una etiqueta img src que entra dentro de la carpeta img y carga el archivo loading punto wifi por tanto esto lo que va a hacer lo he puesto lo que pasa es que no he refrescado por tanto me vendrá muy bien el pulsar botón derecho aquí para comprobar que se me ha creado una carpeta img y que contiene el archivo login porque ya sabéis que si lo pongo pero no refresco java enterprise no lo tiene en cuenta y aunque esté puede pensar que no está bueno vuelvo a tener otra vez el problema del servicio de colgado por tanto pues vuelvo a parar y vuelvo a recargar eclipse pero ahora veréis que bueno eso que habéis todo tantas veces por internet de que pedís algo y aparece el icono y luego carga pues es ajax vale y es algo que es relativamente fácil de hacer así que con este ejercicio no ha sido tan fácil pero básicamente enseña la estructura para copiar y pegar en cualquier otro proyecto que estéis hacer momentín comprobamos que carga correctamente no momento y mira cargo el proyecto público en el servidor y veréis por tanto que pongo un código postal de conciertos en la pantalla para pongo 4600 2 atención y aparece primero el simbolito y luego valencia vale 4600 3 pues primero el simbolito y luego valencia y es básicamente eso esto no lo podíamos hacer hasta ahora con la función resumida pero sí que lo podemos hacer con la función extendida