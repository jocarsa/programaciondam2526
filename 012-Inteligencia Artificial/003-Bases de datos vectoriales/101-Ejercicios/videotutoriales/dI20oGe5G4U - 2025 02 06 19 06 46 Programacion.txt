pues tal y como habéis visto vale tal y como estáis Pensando Pues efectivamente de lo que se trata ahora es eso vale de que yo ahora venga por aquí vale vamos a ejecutarlo recargamos Vale y vamos a verlo igual en J son a ver vale Y si yo ahora me voy a uni contact vale unic contacts eh A ver os cuento eh crm es un software que trata de la gestión de la relación con el cliente para saber qué comunicaciones han habido con cada cliente y En definitiva para mejorar los procesos de venta ya que dentro de los múltiples procesos de empresa que hay dentro de una empresa Pues un uno de los procesos propios del departamento comercial es el crm vale que es la gestión de la relación con el cliente como os digo de esta forma Ahora sí Fran efectivamente tal y como hos comentado Pues ahora que tengo esta información de estos son mis clientes y Estas son las comunicaciones que han habido con el cliente pues ahora sí que efectivamente vamos a empezar a hacer magia y vamos a empezar a presentar esta información de una forma eh entendible vale Cuál es el centro es el cliente una vez que coja cada cliente una vez que coja cada cliente Quiero saber qué comunicaciones han habido con ese Cliente por eso Lo importante en primer lugar es saber quiénes son mis clientes o sea el cliente es el centro okay por aquí vale Y ahora a continuación voy a buscar los emails bien entonces para ello voy a hacer lo siguiente vamos a ver eh clientes es igual a output de Unique contacts Y entonces digo for each clientes as cliente y voy a qué voy a hacer Pues voy a hacer una tabla vale vamos a empezar con algo sencillito y ahora luego igual hacemos algo más elaborado pero vamos a empezar con una tabla Así que a continuación Yo vengo y digo eco Table o sea literalmente una tabla eco Table lo estoy haciendo con php en bebido podría hacerlo con esto con la verdad es que podría hacerlo con jas estoy pensando y así separamos un poco la voy a hacerlo con jas vale lo digo porque este archivo ya es suficientemente complica como para ahora empezar a meterle más tablas Vale entonces casi que voy a hacer lo siguiente eh eco output vale eco output pero espérate porque eco J son encode de output Ok Esto me devuelve un jas vamos a verlo Ok perfecto con ajuste de línea quiero jas Pretty print Ok vale Y esto es lo que voy a enviar al Front por tanto si esto es lo que voy a enviar al Front pues esto lo voy a llamar Back y voy a crear un archivo nuevo Que de momento se va a llamar Index html vamos a intentar separar por capas para intentar hacerlo lo más limpio posible y doc type html que si luego tenemos que usar php pues usamos php vale pero aquí en el Head ponemos Body y aquí en el body pues pongo un Script ahora luego igual lo sacamos a un Script externo donde eh voy a decir fetch eh Back pun php punto then function y response y return response json y punto den function datos y console pun log datos vale y de esta forma ahora a continuación pues recargo por aquí vale recargo me voy a inspeccionar y me da un objeto fantástico Vale me da un objeto que tiene emails y que tiene Unique contacts y que tiene todo En js Vale entonces En definitiva haciendo esto Pues en cierta forma es como una especie de haceros Rony cuenta nueva en el sentido de que pues el este Script de aquí pues hace rastro hace todo lo que tenga que hacer vale Y después de hacer todo lo que tiene que hacer Pues en limpio me da un jas para que este Script de aquí pues en cierta forma haga un borrón cuenta nueva Y genere a partir de ahí la interfaz de usuario vale Así que una vez que tengo esto digo que creo una tabla digo que creo una tabla bien y una tabla Es que de hecho no porque tendré una sub tabla que tampoco es que esté mal pero no voy a hacer una tabla vale voy a hacer un Main voy a hacer un Main bien Y entonces voy a hacer lo siguiente vamos a ver dentro del Main Aquí voy a decir eh Let clientes es igual a datos punto Unique contacts datos de unic contacts o datos. unic contacts bien entonces ahora clientes. for each function cliente y entonces para cada cliente voy a decir aquí led principal es igual a document query selector Main Ok vale Voy a ver un poco y eh vamos a ver Let le título es igual a document create Element h3 por ejemplo vale eh título pun text content es igual a cliente se llama cliente sí literalmente cliente Vale y eh título punto No principal punto appen Child eh título y vamos a ver y si esto ha ido bien recargo Hola Y aquí tenemos cada uno de los clientes a los cuales de las personas a las cuales eh se ha enviado un correo electrónico vale a continuación lo que voy a hacer lo que quiero ahora es para cada persona averiguar Cuántos correos electrónicos le han enviado Eso quiere decir que vamos a ver voy a decir que led sección es igual a documento create Element section título es igual a Esto vale con lo cual sección pun appen Child título y principal appen Child sección y lo que ocurre de esta forma es que si me voy a los elementos en el Main tengo secciones y en cada sección tengo un título Vale ahora a continuación dentro de cada uno o de cada una de las secciones lo que quiero hacer es averiguar Cuántos emails se han enviado o se han recibido de esa de ese cliente vale si se han recibido será una cosa y si se han enviado Pues será otra cosa diferente vale vamos a ver vamos a ver Ah vamos a ver por qué Por vale vamos a primero aparecerá desordenado y luego aparecerá ordenado entonces a ver from y luego tú vale Okay vamos a por ello entonces aquí ahora digo Let correos es igual a datos punto qué punto emails y entonces digo emails for each email y entonces digo If email from If email punto from es igual a cliente a ver sí literalmente cliente en ese caso vamos a ver en ese caso digo vamos a ver Let voy a hacer una cosa voy a hacer un poco la bestia led contenido es igual es que claro Ah led artículo es igual a document create Element article vale podría hacer un template en este caso vale lo estoy haciendo a palosco igual luego lo convertimos a template Ah artículo innerhtml Me he cansado y le digo eh email.of más flecha email2 y ya está Vale Voy a poner la fecha email.to fecha más gu más email Ok vale Yo creo que más o menos ya así que le digo que eh dónde estás sección pun appen Child artículo vale de la misma forma If email2 es igual a cliente en ese caso digo así digo que la flecha va al revés ahora luego usamos algún emoji O algo parecido vale Y ahora vemos entonces si esto es cierto recargo si esto ha ido bien recargo no ha ido bien vale emails is not defined En qué línea en la línea emails is not Define correos Perdón es que de verdad emails no correos Así que vengo por aquí OK ahora error muy bien cannot ref Reading to Reading no es tú no es t es tú vale Ok En qué línea email tú Uh qué raro no a ver email tú si que o sea el email from sí que lo pillas y el email t no a ver qué raro no vale voy a quitar el email tú y ya está de momento email T vamos a ver okay Vale Qué raro no Entonces por qué hay el email t no debe tener alguna razón de ser me voy a consola me voy a emails me voy a emails me voy a emails y digo tú vale Lo que pasa es que no sé si es que tú es una palabra reservada de hecho emails 2. t toma O sea a ver más email pun tu + email.to si no funciona Ah ahora sí no sé que ponía antes Pero vale eh Ahora como veis Pues aquí estoy viendo que para un cliente concreto pues este cliente me ha enviado un correo pero yo no le he respondido aquí estoy viendo que esta persona me ha enviado un correo y yo le he respondido a continuación esto es al revés Ah no sí está bien vale no no está bien porque entonces claro vale esto es to Y esto es from Vale ahora sí okay y ahora tengo aquí que Fran Aquí teóricamente he recibido como un siguiente correo no lo sé vale Okay bien Por supuesto como os podéis imaginar ahora en un rato aplicaremos css y lo que decía Fran y Esto vale Ah Okay vale Perfecto entonces sí que tiene sí que es correcto hay un problema y es que los correos no están ordenados correctamente por orden vale cronológico Ok entonces vamos a ver vale aquí correos datos emails vale hay un short vamos a ver el short vamos a ver por aquí chat y dis frontend fantástico back please s emails esto on this Line order by date email Vale y eh Ya os digo que hay un comando que es short y en el short vamos a verlo es este de aquí es este de aquí voy a parar porque solo quiero Esto vale Y me vengo por aquí y digo led correos es igual a esto de esta forma ordenado por orden cronológico yo ahora vengo por aquí vale Y ahora sí tengo que primero Fran me envió un mensaje luego yo le respondí un mensaje y luego Fran me envió un mensaje Vale con lo cual en principio desde el punto de vista de la atención al cliente pues eh puedo marcar qué clientes me quedan por responder Y qué clientes no he respondido todavía vamos a darle un poco de formita a este proyecto vamos a dedicarle un poquito de css Vale y vamos a ver por qué Mm momentín bueno Vamos a darle la clásica formita Entonces esto por cierto lo podría meter a un archivo nuevo llamado eh correos punto js aquí cojo el Script lo meto en correos y aquí Script src correos. js Y así va quedando limpio bien y ahora digo heer Main vale a ver voy a poner nada a ver div ir contenedor y div y quiero un nav y quiero un nav vale vamos a ver yo tengo un servidor y tengo un dominio comprado efectivamente Y eh No no vale vamos a ver Es una muy buena pregunta La respuesta es que de la misma forma que yo he instalado en un servidor eh Apache y sql y que de son servicios vale hay una opción que es instalar un servidor de correo electrónico dentro del propio vps vale esa es una opción yo no la tengo activada vale Yo no tengo instalado un servidor de correo electrónico un día de estos Durante este trimestre podíamos instalarlo para ver para que veáis cómo es vale Yo lo que tengo es que tengo la opción B que tú tienes aquí indicada vale que es que yonos te ofrece sus propios servidores para gestionarte el correo electrónico con lo cual vale lo tengo así lo que pasa es que claro si me pongo el correo electrónico en mi servidor no hay ningún problema luego me tengo que instalar alguna aplicación o desarrollar yo una aplicación para consultar el correo electrónico lo que se llama un cliente de correo electrónico que no hay que preocuparse porque de la misma forma que existe por ejemplo php my admin existen aplicaciones tales como round cube que son client test de correo electrónico vale De hecho el round cube es muy típico es muy clásico podríamos hacer un round cube Durante este trimestre vale o sea que se puede hacer no lo tengo puesto así Pero podemos hacerlo perfectamente Vale entonces una vez que tenemos esto a ver un momentín vale vengo por aquí es el nav vale Okay y ahora un poquito de css Así que estilo.css bien aquí y en el Head voy a hacer title y jarsa Lemon chifon Vale y un link rel es igual a Styles sheet con href es igual a estilo.css bien eh ahora en el estilo me gustaría hacer un estilo parecido al de ayer vamos a ver el de ayer fue light Green el estilo me gustó bastante Entonces vamos a ver primero estilo Mira de hecho te Pillo ya la Fuente Okay vale el heer lo meto aquí header input nada no Main esto Main pero en mi caso esto es contenedor Vale ahora el nav eh Ok el nav lo quiero aquí y el se que en mi caso es el Main lo quiero aquí vale el background va a ser eh qué era Lemon chifon vamos a probarlo recargamos Okay Esto me gusta mucho vale Y ahora a continuación e Dónde está el texto se suponía que estaba el texto no he creado todavía el texto me voy a Index html y en el header digo h1 jarsa Lemon chifon pondremos el img que no está creado todavía img src Lemon chifon png vale Y no está creado todavía lo cual quiere decir que me voy a la carpeta de logotipos vamos a ver voy a archivar me voy a logos me voy a Lemon Sion abrir con el G vale me quedo con el trozo que me interesa Okay Vale eh selecciono invierto okay Ahora me quedo con este trozo Okay me lo exporto como Lemon Sion png Vale ahora cojo el png me lo llevo a Lemon chifon vale Y ahora a continuación en el código bueno ejecuto fantástico vale Y en el estilo le digo que h1 img es with a 60 píxeles y h1 me lo copio de aquí del estilo h1 es display Flex y ya está vamos a verlo okay Lemon chifon vale fantástico bien pues una vez que tenemos esto Una vez que tenemos esto voy a utilizar algún emoji vale para saber la dirección de del correo vale saber quién envía a quién ok a ver un momento vamos a ver un segn porque lo que voy a hacer probablemente es poner los clientes aquí a la izquierda y cuando un cliente que se me carguan las comunicaciones a la derecha vale Pero bueno de momento vamos a seguir por aquí vamos a ver e emojis emoji Arrow Vale entonces este es el emoji de la flecha a la derecha el código js de la flecha a la derecha y ahora quiero el emoji Arrow de la flecha a la izquierda Así que recargo vale el metet me voy a index charset es igual a utf8 vale Ok Muy bien una vez que tenemos esto Una vez que tenemos Esto vale pues como os digo voy a en lugar de ver toda la información en la misma pantalla lo que me interesa más a ver que ponga el chat aquí lo que me interesa más es pues cuando un cliente quiero solo ver las comunicaciones con ese cliente aunque también le podría interesar Ver todos pero bueno Vale entonces aquí en el nav voy a poner un ul voy a poner un li y en el L voy a poner todos vale Quiero ver todos los clientes pero ahora a continuación también lo que quiero aquí es ver solo los clientes que corresponden por tanto en el correos js clientes cliente for each Vale pues eh vamos a ver cliente Let navegación es igual a document punto query selector ul entonces Let elemento lista es igual a document create Element le eh elemento lista pun text content es igual a cliente y navegación appendchild es igual a elemento lista si esto es cierto aquí me aparecen todos y cada uno de los clientes a la izquierda para qué pues para que cuando yo haga click en ese caso a la derecha se me carguen únicamente los clientes que necesite por tanto Yo vengo por aquí y digo vamos a ver Vale y momenti Vale entonces cada elemento lista punto onclick es igual a function console pun log clic en elemento lista Okay Vale y clic en elemento lista y ahora al ejecutar clic en elemento Lista pues quiero ejecutar la función Quiero llamar a la función filtrar claro Qué es la función filtrar Pues el problema está en que la función filtrar tendrá que ser definida aquí Ahí está vale vamos a ver bar super correos vale super correos es igual a correos y entonces la función filtrar lo que va a hacer es esto vamos a ver ahora solo quiero vamos a ver filtrar por cliente a ver okay Vale filtrar por Cliente vale Así solo muestro los del cliente y ahora lo que hago es que el contenedor principal innerhtml es igual a nada vale vengo por aquí recargo OK Y si todo va bien me vo voy a Luis y algo no está bien correos not Define vale Por qué correos super correos vale Okay recargamos Vale cargo a Luis no sec is not defined Por qué sección Ah sección vale m correcto y con click No encontraría ese código al no estar creado sí no es literalmente como lo acabas de decir vale en html Hay un problema muy grande siempre lo hay con los elementos que se O sea no con los elementos que estaban creados estáticamente con esos no hay problema el problema está con los que se crean dinámicamente con eso son los difíciles de atrapar pero es literalmente eso por eso en cuanto creo un elemento le asigno un evento porque es la forma de en ese momento tenerlo Atrapado y asignarle un evento con un click no solo a un elemento sino a muchos elementos Así que sí es literalmente como lo has dicho Sí correcto Vale entonces un momentín ahora hacemos un resumen de todo esto vamos primero a dejarlo funcionando y ahora en la última hora quiero hacer eh có te diría yo algo más teórico vale un resumen un poco más teórico Entonces vamos a ver antes de ello eh qué me había dicho aquí que sección no existe vale No pasa nada sección no existe Pues ahora sección va a existir Hala qué sección no existe Pues ahora existe Así que recargo vale Y ahora quiero Luis tampoco vale e qué ha pasado no he hecho nada Luis Fran a ver qué ha pasado a ver Hola okay No espérate no no sección Ah sí muy bien y principal a ver un momentín Ok principal punto appen Child sección momentín Okay sección vale recargamos Okay vale Y ahora Luis pues me dice lo que ha pasado con Luis Fran pues me dice lo que ha pasado con Fran vale Y ahora ya pues obviamente lo que haría es empezar un poco a formatear y empezar un poco a darle Pues un aspecto más agradable por ejemplo en formato de tabla Vale ahora ya pues como te diría yo vamos a ver puedo decir lo siguiente y ya con esto empezamos a acabar Vale y digo vamos a ver okay No sección appen Es que esto es un artículo Entonces el artículo vamos al css vale Main article es un padding de 10 píxeles y quizás un Border bottom de un Pixel solid Grey Así que para que quede un poquito mejor así vale un poquito mejor o Grey o light Grey o sabes qué eh Lemon chifon igual el Lemon chifon es un poquito clarito para este ejemplo pero sí No se ve prácticamente nada vale Y light Gray Okay Vale eh otra cosa Ahora sí un poquito más elegante Vale ahora sí Y entonces yo a continuación vale Fran me ha enviado un correo pues entonces yo me vengo aquí a ver Ah mira sí es verdad vale Yo vengo aquí y digo eh Y digo Ay Perdona pero no había visto este correo le doy a enviar vale esperamos unos pocos segundos a que el servidor se actualice momentín vale Y ahora a continuación si me voy a la aplicación de joc elemon chifon pues recargo y ahora sí si filtro por Fran pues me dirá que clase @ jocsa tal Pues sí que le ha llegado a responder a esta hora de aquí a Fran vale eh No pasa nada porque el servidor esté fuera de hora el servidor suele estar en un usario diferente o sea que podemos hacer una corrección con la hora actual y ya está eso es lo de menos vale Voy a Añadir un poquito más de esito aquí vale entonces voy a decir que na bueno naul para empezar va a ser list Style type know pading peles margin 0 peles Y luego el na va a ser de background eh padding de 5 píxeles Border radius de 5 píxeles a ver qué pasa y vamos a verlo vale Así Ah y un margin bottom de 5 píxeles vale Y así pues aparecer un poquito más de padding 15 píxeles vale aparecen Pues los elementos como lista e Insisto que veo un panel de control inicial y ahora a partir de aquí pues Vale puedo ir filtrando para ver un poco qué es lo que está pasando con cada uno de los elementos vale eh luego pues bueno ya os digo puedo hacer algo como una tabla eh vamos a ver es que podría hacer un grid estoy pensando podría hacer un grid porque es una forma de hacer tablas bastante poco dolorosa relativamente vale entonces para ello de forma insisto lo menos dolorosa posible puedo hacer lo siguiente span vale momento que estoy pensando span bueno span ahora eh tú aquí por qué haces un más ah no porque aquí me hace falta Esto vale eh Y ahora hace falta esto muy bien eh esto Qué es no esto no hace falta vale Esto va Aquí eh No espérate Esto va Aquí y ahora Esto va Aquí Ah claro Espérate que es un article ostras pedrín vale Sí me sigue valiendo Vale entonces ahora vale me sigue valiendo Flex vale quiero space between vale Y ya Entonces article le pongo un estilo de flexbox Okay Se me descuadra un poco vale Uy Y este Por qué no va Qué raro hostias Ah sí espera no pero pero pero ostras con este no va Ah sí Uh madre mía Ay dónde estás código aquí porque claro ahora buah tengo que hacer todo esto vale Bueno pues hago así copio emoji este es email tú este es email from este es esto vale Y esto por aquí vale lo probamos bien esto tiene muy buena pinta un poquito se descuadra Pero bueno pero tiene buena Pinta y ahora hago así y eso tiene buena pinta eso tiene muy buena pinta vale perfecto vale bien pues una vez que hemos visto esto luego hay cosas que creo que me faltan vale porque yo creo que también podría poner el subject Aunque el subject probablemente será el mismo siempre pero no está de más vale entonces me cuesta poco aderezar el software con un spam span y eh email asunto y ya está es que tampoco tiene mucho más misterio vale spam por aquí spam por allá spam por aquí spam por allá porque ya que tenemos el asunto Pues nos cuesta poco vale Okay y voy a preguntarle al sistema si con flexbox puedo hacer que cómo te diría yo si con flexbox puedo hacer que las columnas sean siempre de la misma anchura vale flexbox columns eh equal with Vale entonces vamos a ver me suena que había un truquet Flex 1 eso es Guay Vale entonces en ese caso digo en el estilo digo Main article span y le digo Flex 1 si esto es cierto recargo Okay y muy bien y ahora hago así y veo que todo se alinea correctamente Y a partir de aquí pues como os digo vale una mejora más que podemos aplicar es que ahora mismo tenemos las contraseñas en claro es decir tenemos las contraseñas dónde estás Ah no esto es l vale quiero eh Lemon chifon vale en b. php tenemos la contraseña ahí no Mola vale sería Guay poner un archivo config jas que luego De hecho no irá al github por motivos obvios que luego podemos hacer un sample Jason quiero decir bien y por tanto ahora en el Back Pues pued bueno evidentemente aquí voy a hacer un jas y voy a decir esto es voy aegar dejármelo por aquí vale Y esto es Host name es dos puntos lo que sea vale coma username es dos puntos lo que sea no clase @ jocar.com.mx es Dame un do 3 d vale elimino esto y ahora a continuación en el Back digo lo siguiente digo config es igual a j son decode file get contents de config pun json y por lo tanto ahora digo hostname es igual condic no config es igual a config de hostname esto es config de username esto es password esto es config de password probamos si funciona recargamos no funciona algún error he cometido vamos a verlo algún error he cometido vamos a Back php cannot use object of type en línea 5 qué ha pasado J son de code file get content Pues no lo sé a ver momento php get Jason file contents vamos a verlo file get contents y J de code creo que lo hecho al revés no no file get contents json file y json decode como true que raro Pues si que sí que en principio lo hecho correctamente a ver voy a ponerle el coma true config js Eh sí que creo que lo tengo correcto a ver espera voy a esperar aquí cosas vale recargo Ah ahora sí vale Okay Vale ahora sí Okay bien y ahora con el config js pues eh voy a hacer un config sample json y voy a decir imap dominio.com Puerto y carpeta vale eh user es nombre @ dominio.com password es contraseña de la cuenta de correo vale Y por tanto de esta forma cuando os subo al github el Lemon chifon cuidado aquí Bueno me voy a cargar este archivo el de listado de carpetas porque tiene otra vez metido ahí dentro el las esto de conexión le doy a eliminar Ahora sí yo creo que ya lo tengo todo vale entonces ahora a continuación en el github lo que hago es que quito el js os envío el config sample vale Este ignoro y ya está Vale y eh commit inicial commit to Main Push origin vale Y ya está bien pues una vez que hemos hecho esto Digamos que ya tenemos un principio de aplicación en funcionamiento vale empieza a funcionar vamos a voy a parar un momento esta parte de la grabación