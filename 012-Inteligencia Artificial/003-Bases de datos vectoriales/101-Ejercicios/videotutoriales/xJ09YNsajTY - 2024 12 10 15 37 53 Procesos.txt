eh Me dejo esto de sec kulite por aquí más que nada para no entre comillas perder tiempo buscando la base de datos por ahí por la página web cuando la tengo ya descargada de algún proyecto anterior Ah De hecho ya sé dónde encontrarla dame un segundo que la voy a encontrar a ver vamos a ver si la puedo encontrar fácilmente porque ya sé en qué proyecto la he usado últimamente estoy ahí en la otra ventana estoy en el otro vale la otra ventana para que no me veáis vale esto por aquí y ahora dónde tengo esto Ah aquí ataques vale geol p a ver dónde hace referencia este archivo un momento porque estoy abriendo un archivo Bueno mira me lo voy a dónde me lo pongo Ah mira se está abriendo con claro geolog p no existe vale Okay Mira html sabes aquí mismo Hala Ahí vas bien pues ahora me voy a la carpeta html me he bajado un archivo geol kip que tengo de otro proyecto me lo pongo aquí ah eh Ah get country from IP Sí ya vale fantástico Pero esto De dónde viene esto es una función que viene a ver Útil no Bueno pues no lo veo ahora mismo no lo veo ahora mismo Entonces como no lo veo ahora mismo os lo busco y os lo os la Pasaré os Pasaré esa base de datos y Eh sí vale Y En definitiva podemos implementar eso Entonces qué tipos de bloqueo pueden haber pues veréis ya yo os propongo tres Y a partir de ahí vosotros cuando desarrollé la parte práctica de vuestra práctica es cuando podéis ampliar todos los que queráis entonces uno en el caso de detección de ataque global bloqueo completo de aplicación cuanto antes mejor quiere decir que si os fijáis poner aquí ataques quiere decir que si os fijáis yo el lo he puesto arriba del todo para que si hay un ataque No cargues ni el doc type vale No cargues absolutamente nada Solo Muéstrame un candado ahora en el caso de detección de un ataque focalizado en una IP concreta en ese caso bloqueo por IP es decir todas las peticiones que vengan de una IP concreta las bloqueas Vale ahora vamos a implementarlo Y por último en el caso de una sola petición sospechosa detección de la ejecución en ese hilo es decir si alguien me envía algo en un post que veo que tiene alguna palabra extraña pues en ese caso Bueno te machaco esa ejecución y ya está ahora por ejemplo si se dan tres strikes es decir si se da que una persona me ha enviado tres intentos seguidos sospechosos pues en ese caso bloqueo por IP ahora si he bloqueado a alguien por IP y detecto que ese alguien se ha cambiado de IP y se ha cambiado de IP eso de que alguien yo te bloqueo en una IP y automáticamente te cambias de IP eso no lo hace un usuario normal eso ya tiene pinta de un ataque global entonces escalamos a la parte de arriba escalamos al candado y en el momento en el que ponemos candado Nadie puede entrar Vale como ya os digo todo esto son medidas que tienen que ser acordadas si es posible por escrito con la organización empresarial donde estéis implementando la aplicación empresarial en el sentido de que Eh Pues cuando se bloquee pues que tengas por escrito la condición de que Oye si alguien intenta atacar el sistema se va a bloquear Y si la dirección de la organización te dice no esto de que hay un trabajador mío le aparezco un candado eso no quiero Que aparezca nunca pues entonces le dices Bueno pues que sepas que el sistema no se va a bloquear con lo cual tú confírmame por escrito que quieres que cuando el sistema detecte un ataque global aún así no se bloquee no es que el sistema le diga al hacker pasa y coge todo lo que quieras no aún así el sistema seguirá intentando que el hacker no ataque pero no contará con una medida de seguridad muy concreta que es básicamente machacar la ejecución vale bien entonces por ejemplo un ataque por IP vamos a simularlo Así que a continuación Yo vengo por aquí yo vengo por aquí un momentín y aquí digo eh blacklist php Y ahora aquí a continuación voy a hacer blacklist.txt bien a continuación en el blacklist XT voy a poner ips IP la mía Así que If config ynde estás No te veo aquí 2 192 168 1 21 con lo cual en blacklist php pues puedo poner de leer vamos a ver aquí php read txt Line by l txt contains IP directions and check If coincide Cómo se dice coincide en inglés equ to my IP Ok Hola alber Vale entonces vamos a ver vale vengo por aquí okay bien y bueno y digo and If is equal create Fil log.txt ya que estamos pues házmelo todo bien Entonces vamos a ver bien entonces copio código y aquí en el blacklist Ok vale esto es blacklist.txt Okay de momento me hará Ecos vale bien me vengo a localhost bar proyecto barra poder de la muerte barra cliente barra Inc en Inc voy a borrar el log txt l txt lo borro vale Y me voy a blacklist y dice IP not on the list pero ahora a continuación en este caso me estoy conectando por local Host pero a continuación 19 2 1 68 1 210 Es decir me conecto desde vale desde la IP me dice cuidado tu IP está en la lista Así que el archivo log txt ha sido creado claro el archivo log txt vale No pasa nada esto lo que voy a hacer aquí es que el log txt lo voy a cargar desde morir y veis que en morir simplemente lo que voy haciendo es ir cargando las condiciones de bloqueo todas las condiciones que yo quiera por eso digo que en esta parte creo que esto es muy No ya positivo para vosotros creo que es muy ampliable en el sentido de que veis que lo he estructurado en que yo simplemente compruebo que log existe o no existe y ahora sí existe es porque se cumpla al menos alguna de las condiciones que existan aquí lo cual quiere decir que podéis meter tantas condiciones como os de la gana vale bien Vengo por aquí y ahora me voy a local Host me voy a local Host me voy a Ink vale Y dice file not exist or is not readable vale Y creo que otra vez necesito esto okay recargo file not readable Sí pero vale porque Espera que cierre archivos porque blacklist loog file es igual a log txt no vale pero file not exist Ya sí Pero dónde estamos exactamente un momento y esto es Sí vale blacklist and Die Por qué si digo Ink blacklist dice your IP is not on the list vale pero sin embargo ahora digo claro no porque lo quiero ejecutar desde aquí file does not exist file exist así y si es readable file path es blacklist Qué cosas claro existe aquí y tendré que ponerlo aquí Vale ahora bien your IP is not on the list vale Así que a continuación digo 192 168 1 2 10 lock has been created Pero cuidado porque me lo ha creado aquí le doy a eliminar y ahora el lock lo voy a crear teóricamente ya está creado No claro ahí está aquí lock fuera vamos a verlo recargo y your IP is on the list lock has been created y ahí tenemos el lock vale Lo cual quiere decir lo cual quiere decir que el sistema ya está bloqueado porque se ha generado el log txt ahora obviamente me iría aquí a blacklist y quitaría todos los Ecos para no darle innecesarias pistas a quien sea quitamos todos los Ecos y el usuario únicamente ve lo que tiene que haber en este caso obviamente para simular esto pues lo que estoy haciendo es mi propia IP pero o sea yo puedo como ya os digo o bien crear un listado de ips prohibidas o bien también incluso crear un listado de ips permitidas es que si tú por ejemplo eres capaz según las circunstancias y según lo que sea vale de detectar que tienes un una lista de ips correspondientes a tus empleados y por las por los motivos que sean sabes que esas ips van a ser estáticas pues de la misma forma de la misma forma que aquí tenemos un blacklist pues podemos tener aquí también un wh list de tal forma que dices comprueba que la IP está en esta lista la IP está en esta lista pasas ahora la IP no está en esta lista entonces me generas el archivo log txt porque eso quiere decir que alguien está intentando entrar sin permiso vale quiero que quede muy claro al acabar la clase de hoy que esto que estoy poniendo no son más que ejemplos vale lo que quiero un poco evitar es eh entrar en los apuntes de la asignatura entrar en el esquema de la asignatura y un momentín que entre al punto correspondiente y llegar al punto correspondiente y simplemente decir eh chicos tenéis que programar de forma segura y vosotros diréis HM ya vale Sí pero eso En qué se traduce Vale pues quería en la clase de hoy pues daros al menos algunos pequeños ejemplos de código Seguiremos a lo largo de esta semanas porque fijaos que ya estamos en el último punto del temario con diferentes metodologías y diferentes alternativas para analizar En qué escenarios bloquear una cosa o bloquear otra y como os digo y con esto finalizo y me voy yendo ya hacia la clase de primero eh pues está muy en vuestra mano el proponer de la misma forma que veis que yo estoy proponiendo diferentes medidas pues vosotros proponer e implementar medidas alternativas de En qué escenarios bloquearía Y qué escenarios no vale bien recordad que hoy la tarde es un poco rara porque no podemos tener la clase de las seis de procesos y servicios segunda parte Así que nos vemos directamente a las 7 y nada y a las 7 continuamos de 79 con acceso a datos vale Así que ahora luego nos vemos