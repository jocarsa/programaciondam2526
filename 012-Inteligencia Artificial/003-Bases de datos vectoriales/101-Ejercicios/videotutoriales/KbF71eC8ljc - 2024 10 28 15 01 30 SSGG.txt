Buenas tardes e sí alguien me habla blanca Es que no sé si lo has hecho ya o si lo vas a hacer el tema de por ejemplo los entregables que tenemos que hacer de la del tema dos eh la otra vez cuando hiciste el tema uno fuiste explicando asignatura por asignatura lo que querías que más o menos te pusiéramos en cada par eso no sé si lo has hecho o lo o no A ver no lo he hecho todavía y entonces eh A ver no lo quiero hacer ah ya has dado toda parte tema dos ahora cre ya por el tres en todas sí sí sí muy probablemente Vale entonces un segundo porque eh lo voy a hacer vale probablemente no hoy y te digo Por qué en principio esta primera clase de hoy que es desde las 3 hasta las 5 eh acabará igual pues ya te digo un cuarto de hora o por ahí antes porque tengo una reunión con dirección para ver si tengo que modificar las fechas de examen para adelantarlas una semana o como mucho dos espero que sea una semana tampoco sé si eso afecta a los de primero O también a los de segundo o sea a los de primero Seguro que sí a los de segundo entiendo que no pero no si vais en pack Entonces como ahora mismo No sé exactamente al final Cuándo van a ser las fechas de examen si cuando estaban puestas o una semana antes no quiero acabar de cerrar digamos el entregable más que nada hasta no saber esa información porque junto va Lo que tenéis que entregar y la fecha en la que lo tenéis que entregar la razones porque este año los de primero debido a la aparición de la formación Dual tienen que acabar el curso tres semanas antes porque tienen que irse a prácticas de Dual en las últimas tres semanas de mayo Entonces como te digo eso quiere decir que ahora las 5 tengo una reunión con dirección para abordar ese tema entonces para ahora mismo ponerme con el Google Drive a decir lo que entra e igual a las 8 de la tarde os digo chicos lo que os había dicho a las 3 pues ya no vale para nada Pues para eso me espero la reunión de hora a las 5 y una vez que me digan o bien al final de la sesión de hoy o bien mañana en algún momento pero hacemos eso que comentas vale que es entrar en Pues eso en cada una de las asignaturas y lo mismo que hicimos con el tema número uno no indicar exactamente qué criterios de evaluación he Hola qué criterios de evaluación entran en cada entregable lo mismo que la otra vez no y deciros pues cuáles sí Cuáles no Cuáles en rojo estos no hagáis caso en este me tienes que entregar esto y esto otro y bueno ya te digo lo mismo que la otra vez vale Y cuando acabes la reunión entonces que volvemos a tener clase imago Claro esa reunión Yo calculo que durará 15 20 minutos es más que nada que me digan có lo han hecho en presencial para ver vamos a hacer nosotros estamos convocados tanto Lourdes en el caso de smmr como yo y ya te digo o sea durará Pues eso 15 20 minutos O sea que luego continu dejamos abierta la el zoom o por WhatsApp cl sí yo dejaré la abierta la sesión y simplemente en el momento en el que acabe vuelvo aquí al aula me conecto y ya está Vale gracias correcto nada vale pues vamos allá y Eh bueno la semana pasada vamos a ver la semana pasada en desarrollo de interfaces estuvimos creando un componente donde ese componente vamos a ver cliente vale vamos a poner por aquí escritorio pincho vale ese componente pues me servía por ejemplo para crear un buscador vamos a en primer lugar crear un buscador Y a partir de ahí pues insertamos ese componente además os acordáis de que anteriormente ya habíamos creado eh en el lado del servidor un componente de búsqueda vale por lo tanto Vamos allá eh vamos a recuperar el proyecto a ver un poco que cierre por aquí me voy a ir al editor eh aprovecho y os digo que sin tener mucho que ver con esta asignatura en concreto sino más bien con entornos de desarrollo este fin de semana he estado recuperando un editor de texto que usaba antes que se llama hedit está en Windows en Mac en Linux eh hedit es un editor que es similar en cierta forma a brackets en el momento en el sentido de que tengo un editor por aquí por la derecha pero aquí a la izquierda tengo el la carpeta de proyecto digamos vale no tiene más que eso ya sabéis que mi filosofía es intentar utilizar el software más sencillo que pueda y que realice la tarea no entonces me voy aquí a dam me voy aquí a segundo me voy a sistemas de gestión empresarial me voy a proyecto y aquí vamos a ver porque no puedo duplicar No pasa nada vale desmar los anteriores y Marco solo el qué y Marco solo el actual la semana pasada estuvimos haciendo algún ajuste estético sobre vale sobre el sistema de ejerción empresarial Así que ahora a continuación Ah me voy a dam esto Me lo cierro segundo sistemas de gestión empresarial no quieto eh desarrollo de componentes de hecho esto es una parte de lo que vamos a hacer hoy pero bueno proyecto Vale y 054 implemento un buscador ojo insisto en el lado del cliente porque en el lado del servidor ya lo tenía implementado Vale ahora tengo que hacer que funcione en el lado del cliente entonces para ello vamos a ver me voy aquí a implemento un buscador me voy a eh cliente me voy a escritorio me voy al superc controlador de hecho Vale y recordamos que aquí dentro de lo que es el comportamiento teníamos el Okay listado tablas vale columnas tabla es igual a esto y si os fijáis os acordáis aquí listo las columnas de la tabla llamo a un microservicio que me da lista de tablas quiero que el servidor me devuelva un jas eh para cada uno de los datos creo un elemento que es una cabecera de tabla vale por tanto lo que voy a hacer aquí en este caso es que estoy poniendo por aquí un columnas tabla pun Push dat Field es decir vamos a ver aquí estaba poniendo el text content dat Field Así que ahora lo que voy a hacer por aquí abajo es document create Element input vale así yao y creo un elemento de tipo input html Vale ahora a continuación vamos a ver Ah Perdona esto es campo vale campo es igual a esto y entonces cabeceras tabla appen Child elemento Vale pues elemento aquí elemento pun appen Child campo qué es lo que va a hacer esto Bueno pues espera Pongo aquí en el comentario en cada una de las cabeceras pongo un campo input para qué pues para buscar recargo momento vamos anterior y 054 implemento un buscador cliente y superc controlador Vale y ocurre esto ocurre literalmente esto bien Si en algún caso no cuadra no encaja no pasa nada vale ahora luego con estilo pues ya haremos para decir que eso sea display block o lo que sea vale pero eso ya es más tema de css que otra cosa Claro qué es lo que quiero que suceda Bueno pues que por ejemplo cuando yo rellene aquí cosas cuando yo rellene aquí cosas pues le de a un botón de buscar y el programa haga pl vale Y me busque o sea estoy implementando como ya os digo un buscador y os recuerdo insisto una vez más que si me voy al servidor Espera que tengo la vaya Ay un momentín porque Z espacio vale aquí servidor os recuerdo que en conexión deb ya tenía un public function Buscar os acordáis para qué hicimos el Buscar para eh el login que hacía dime si es cierto que en usuarios está este usuario con esta contraseña valeen que tengo í un pelo en la boca Vale entonces este mismo Buscar en el lado del servidor que ya tenemos programado es el mismo Buscar que quiero ahora implementar en el lado del cliente en el lado del cliente Si os acordáis vamos a ver tengo columnas tabla Bueno voy a poner un momentom voy a poner un botoncito de búsqueda para que entendáis primero visualmente lo que quiero hacer me voy a emoji eh find o Search o sabes Search la típica lupa Eh sí eh finder fantástico Esto es lo que me das eh zoom esto funciona un poquito mal vamos a ver emojipedia vale Search Ok magnifi Vale pues venga copy Y entonces ahora aquí en el código Let elemento create Element th Vale pues elemento text content es igual a lupa esto quiere decir en la última cabecera de columna la lupa vamos a comprobar si es cierto vamos a comprobar si es cierto no sé si veis ahí la lupa y además yo lo que quiero es que eso funcione Vale entonces para que funcione Pues yo ahora vengo por aquí y digo dónde estás elemento punto onclick es igual a function y vamos a buscar algo vale vamos console.log vamos a buscar algo hago clic vale Mirad hago clic y vamos a buscar algo eso pondrá en marcha el buscador claro qué ocurre Pues que aquí donde pone nombre Pues yo podré buscar cosas Pero más adelante aquí donde pone por ejemplo pues líneas de pedido en pedidos fecha yo querré que me aparezca un listado de elementos es decir no sé si el otro día lo hicimos aquí No todavía no lo hemos hecho Vale pues yo quiero que me aparezca un listado de las claves foráneas bien Vamos o clientes por ejemplo quiero que me aparezca un listado de los clientes Vale pues vamos a por ello bien clientes como decía pinchamos el botón Y ahora qué es lo que ocurre al pinchar el botón Bueno pues recolectamos los datos y los enviamos a la búsqueda Qué quiere decir recolectamos los datos Bueno pues 055 recolectamos los datos cliente esto fuera Uy fantástico soy un crack he cerrado vale 055 cliente eh supercol comportamiento Vale y colección Campos listado de columnas de tabla input vale Y dónde estás e a ver estado de columnas de tabla aquí cabeceras Esto es lo que quería vale Okay pues entonces de la misma forma que había hecho columnas tabla pues hago eh Campos búsqueda es igual a Ray si queréis puedo utilizar la misma nomenclatura de gu bajo para separar espacios Vale entonces yo ahora vengo por aquí y digo vamos a ver Campos búsqueda punto append punto Push Perdón append en python input campus búsqueda vamos a ver aquí campus input o sea pen Child campus búsqueda campus Bo queda punto leng men1 ok y Espera Vale y cabeceras tabla esto se queda igual Okay vamos a ver si esto es así me voy a la siguiente versión cliente superc controlador Vale y ya está bien Ahora a continuación qué es lo que quiero Bueno pues que cuando pulso el botón cuando pulso el botón console pun log Quiero recolectar el contenido de los campos Y entonces Yo vengo por aquí y digo vamos a ver pu búsqueda punto for each es decir Quiero recuperar el contenido de cada uno de los campos búsqueda de hecho Campos búsqueda punto No de Campos búsqueda men1 Okay punto set attribute placeholder coma y dat Field esto quiere decir atención todos a la pantalla que si todo ha ido bien no ha ido bien Vamos a verlo Dónde está set attribute vale Ok ese es el problema vamos a ver el set attribute campus búsqueda de Campos búqueda pun length-1 Pues no sé por qué ha fallado vamos a verlo can set properties of undefine vale o ya no no Espérate madre mía esto Qué es he puesto aquí triple anidación qué fuerte vale del -1 Ahora sí vale si os fijáis Mirad he puesto el placeholder con lo cual en ese pequeño placeholder pone nombre pone apellidos pone email pone dirección vale Y entonces ahora les digo eh led columna es igual a dis get attribute placeholder Let valor es igual a dis value entonces digo console pun log en el campo coma columna coma has puesto el valor coma valor y con eso vamos a ver si lo hemos capturado todo correctamente para ello recargo y digo nombre AAA apellidos bbb me voy al final le doy a buscar y dice vamos a ver dis get attribute dis attribute is not function lo he escrito mal this get attribute placeholder pues no sí aquí es campo no es dis sino que es campo vale venga nombre a apellidos bbb me voy aquí vale atención y dice en el campo identificador has puesto el valor ninguno en el campo nombre has puesto el valor AAA en el campo apellidos has puesto el valor bbb en el campo email has puesto el valor ninguno en el campo dirección has puesto el valor ninguno vale lo que está haciendo Ese botón es que está recopilando toda la información que hay en los campos y me la está devolviendo de momento en consola qué es lo que quiero hacer pues quiero formatear un Jason como siempre o sea me voy a ir al servidor a pedirle algo pues ya sabéis que voy a formatear un Jason porque al servidor para pedirle cosas en la metodología full stack que estamos siguiendo preparamos siempre hacemos lo mismo vale formateamos un Jason le enviamos json nos devuelve respuesta interpretamos la respuesta Así que yo ahora a continuación digo como siempre vale yo digo momento voy a hacer siguiente versión del proyecto Okay 056 eh Bueno creo mensaje y lo envío voy a ver si ya lo envío en esta versión cliente superc controlador comportamiento voy a cerrar esto de aquí y digo listado de columnas de tabla Sí y digo mensaje es igual a esto con lo cual mensaje de columna es igual a valor y entonces digo si valor no es igual a nada Es decir si valor no está vacío mensaje columna de valor esto qué quiere decir en el mensaje solo Ponme los campos que estén rellenos Vale ahora pongo comentarios y al final voy a decir console.log mensaje vamos a verlo siguiente versión del proyecto 056 cliente superc controlador eh nombre AAA apellidos bbb Y le doy Vale y vamos a ver qué ha pasado aquí no algo he hecho mal algo he hecho mal algo he hecho mal vale algo he hecho mal porque el console pun log va aquí va al final del todo vale Qué raro Ah sí no mensaje va antes mensaje se define antes se rellena durante y se saca por consola después vale entonces recargo a aa bbb le doy aquí Y si os fijáis me crea un mensaje que es un objeto que dice nombres AAA apellidos es bbb con esto ya lo tengo solucionado porque insisto Esto es lo mismo que hice con el login Y si os digo que es lo mismo que hice con el login quiero decir que me puedo lo que hice con el login y me lo puedo copiar y pegar Vale entonces vengo por aquí me voy al login en el log acordaos que formate un mensaje usuario y contraseña e hice un fetch al servidor vale fch Buscar tabla usuarios en este caso no va a ser usuarios y le envío el mensaje siempre lo llamo mensaje así que fetch me copio Esto me voy aquí fetch servidor esto Pongo aquí el cierre correcto y console pun log tabla eh Data Perdona y aquí donde pone tabla pongo más tabla que es el parámetro vamos a verlo madre mía tengo miedo Ah Oye un momento no hicimos un espérate no hicimos un Buscar Bueno vamos a verlo No lo hicimos eh servidor conexión de B un Buscar tenemos un Buscar puro pero no tenemos un Buscar relajado bueno no pasa nada vamos a ver si hacemos un Buscar relajado vale Mirad vamos a ponerlo en práctica a ver qué pasa recargo yo digo le doy aquí al final le doy a Play vale por que no he encontrado el post vale Por qué Pues no lo sé vamos a verlo estoy haciendo referencia a dos puntos barra servidor vale No dos puntos barra Okay vamos a ver ahora nombre apellidos Busco Vale y resultado ninguno resultado vacío ningún registro de la base de datos coincide con lo que tú has buscado Okay pero yo ahora digo no pero es que ahora Quiero buscar el apellido info @ jarsa perdon el correo info @jaru todos la pantalla le doy a buscar email info@.com.ar sanchiz 4600 país población Valencia me ha encontrado un resultado vale me ha encontrado eh un objeto ahora evidentemente como os podéis imaginar pues lo que tengo que hacer es ese resultado y ponerlo en la pantalla es decir hacer un carga tabla con ese resultado hay un pequeño problema hay un pequeño problema Mirad si yo busco por ejemplo jarsa vale mira yo aquí en lugar de poner info @ hoc carsa pongo jocars comom Y fíjate que hay unos cuantos jocars comom le doy a buscar y me dice que resultado ninguno Por qué Porque no está completo Vale entonces cuál diríais que es el problema si lo queríamos llamar así y cuál diríais que es la solución Por qué se produce eso y cómo lo podemos solucionar muy bien Qué le pasa a esa petición claro efectivamente vale tal y como habéis comentado Borja y dragos tienes que ponerle que busque Algo similar vale hay un pequeño problema o sea lo que veis dicho es correcto esa es la solución pero si yo me voy a conexión de B claro este Busca yo puedo cambiar la petición sql para que me busque algo parecido pero sí es un delimitador es una almohadilla vale es el porcentaje pero claro yo tengo un problema y es que este Busca me servía para hacer login Claro si no haría login con resultados parecidos Entonces sería un cachondeo porque cualquier persona podría entrar igual comp poner a y a cualquier persona entraría vale si ese es el problema Cuál es la solución crear un correcto vale Eso es lo que quiero que veáis eso es lo que quiero que entendáis que al final este conexión de B es un controlador ampliable vale que podemos trabajarlo como nos dé la gana y decimos Oye Buscar no sirve para login pero yo por ejemplo quiero uno que se llame Buscar similar o Buscar parecido Vale entonces yo me cojo el método me lo copio me lo pego lo llamo no se puede llamar igual vale obviamente lo llamo Buscar similar o Buscar parecido o Buscar como queráis vale Y entonces le digo Select all from tablas we eh petición es igual no clave like almohadilla vale Y entonces modificamos el valor o sea hemos modificado la claro no a ver Albert técnicamente Buscar ya es Buscar específico para qué cambiarle el nombre sabes esa máxima de la ingeniería creo correcto vale de si algo funciona no lo toques vale pero eh otra cosa es que si algo funciona no lo toques Pero hay otro principio de la refactorización que dice nombrar correctamente a los objetos vale o sea hay criterios a favor y criterios en contra no entonces eh aquí obviamente una vez que tocado el controlador Pues a partir de aquí eh Sí correcto vale Y a partir de aquí me voy al router en el router donde tengo Buscar pues hago otro Case me voy por aquí y lo llamo Buscar similar Y entonces conexión Buscar similar ahí lo tenemos Vale entonces si todo va bien vale Yo aquí he declarado un Buscar similar en el router he definido una ruta nueva llamada Buscar similar y por tanto ahora en el comportamiento Donde antes ponía Buscar ahora digo buscar similar siempre un poco con el esquema a ver qué stack este que stack es vale siempre con el esquema este en mente De que al final pues javascript le pide cosas a php y php le devuelve cosas a javascript y deben hablar un mismo idioma ahora siempre que habl en un mismo idioma no hay ningún problema en el sentido de que si tú Aquí pones Buscar similar en el router debe haber un Buscar similar Y si tú Aquí llamas a buscar similar en el controlador debe haber un Buscar similar siempre que esto se cumpla podéis extender el programa como os dé la gana tanto como os dé la gana de hecho veis que hemos partido en esta asignatura del superc controlador del año pasado pero luego lo estamos haciendo crecer un montón más vale con un montón más de situaciones Entonces ahora vamos a ver si esto ya funciona me vengo por aquí eh nombre pues no perdona email jarsa com vale me voy al final busco y me da dos resultados me dice que eh info @jaru sí sí es que claro Depende como nosotros consideremos la aplicación porque yo igual claro podría decir No es que quiero una búsqueda exacta sabes es que hay muchas formas de ser un Buscador de hecho sí sí enseñame todos los parecidos Sí lo sé lo que te quiero decir es que no es solo el porqué de ese problema no es solo un problema técnico sio es un problema de lógica de negocio de cómo los que han programado ese buscador o los que estaban por encima de esos han decidido Cómo tenía que funcionar ese buscador o funcionar o dejar de funcionar y ya te digo que muchas veces cuando los programadores programamos cosas no pensamos en el usuario pensamos en nosotros y en bases de datos y todo eso Pero bueno vale Y ahora vengo por aquí y 057 eh con la respuesta eh pueblo la base de datos y yo creo que esto va ser sencillo yo creo que Esto va a ser sencillo en el momento en el que superc controlador comportamiento en el momento dónde estás listado de columnas Aquí estás aquí console log tabla Esto me lo voy a tirar para arriba en el momento en el que tengo ya aquí una función creo recordar a ver Ah contenido de la tabla Vale pues mira voy a hacer esto voy a hacer esto eh voy a copiar atención eh voy a copiar listado de columnas de tabla Dónde está console log esto es aquí ahora sí vale hago así datos Y tanto tú como los que estáis en casa podéis empezar a gritar vale podéis empezar a chirriar de dolor por lo que acabo de hacer vamos a verlo 057 cliente superc controlador Vale entonces aquí pongo jocars comom le doy aquí a buscar vale Y me saca los dos resultados me saca como veis los dos resultados es decir el buscador funcionar funciona ahora qué acabo de hacer que no os ha gustado nada he hecho algo Claro y qué ocurre qué problema hay con que haya copiado a ver problema de momento ninguno porque ha funcionado vale pero claro nosotros ya sabemos que para que el código sea mantenible pues no debe tener repeticiones del mismo Cacho Porque si luego por lo que sea quiero modificar algo tendré que modificarlo dos veces en dos la redundancia hay que evitarla vale sabemos cuál es el problema la redundancia hay que evitarla Cuál es la solución a ese problema Cuál es una de las formas de evitarla es muy sencilla eh La respuesta es mucho más fácil de lo que parece vamos a verlo alguien es una técnica de refactorización muy clásica y muy sencilla insisto a los que estáis que no respondéis vale ahora veis que en cuanto la diga diréis pues si no tiene más misterio pues es muy fácil Mirad os lo cuento cuando no copio y pego cuando en cualquier software función de poblar tabla cuando en cualquier software en cualquier lenguaje un código se repite muchas veces la forma de encapsular ese código es mediante una función una forma muy básica es una función Así que yo ahora a continuación por ejemplo por aquí por ejemplo por aquí digo function puebl tabla la función Puebla tabla admite datos Y ahora a continuación Esas dos repeticiones que habéis visto vale aquí esto atención me lo corto y me lo llevo aquí y ahora llamo a Puebla tabla datos pero ahora aquí a continuación Ahora aquí a continuación Perdón cuidado me busco el otro lugar donde se repite que es aquí veis es el mismo Cacho de código Me cojo el código y pongo Puebla tabla de datos vamos a comprobar si funciona siempre después de cualquier refactorización y esto que hecho es una refactorización hay que comprobar si el código sigue funcionando correctamente o explota todo que también puede pasar de hecho suele pasar y no pasa nada vale si explota pues lo arreglamos y ya está así que cliente Así que super controlador bien ha explotado No pasa nada campo clave ya está vamos a verlo me dice que campo clave no reconoce la línea 205 en la línea 205 Por qué Pues porque campo clave yo lo cojo de arriba Vamos a verlo campo clave 205 dónde estás campo clave If clave es igual a campo clave cre que es campo clave a ver dónde está campo clave está arriba Ahí está y está arriba vale entonces no hay ningún problema A ver cargar datos tabla Ah sí sí un momentín porque yo ya tenía una función cargar datosa tabla correcto y campo clave Ah campo clave okay Vale pues entonces vengo por aquí y digo datos coma campo clave o sea te falta campo clave te paso campo clave No pasa nada yo te lo paso copio por aquí datos coma campo clave datos coma campo clave vamos a ver si ahora ya le estoy pasando ese dato que le falta recargo y en principio Parece que ya lo tenemos me voy a email jarsa busco y me encuentran los resultados de jarsa pero tengo una función aquí abajo que se encarga específicamente de encontrarme los campos correctos vale Y es una función que funciona tanto al listar una tabla completa como aquí como al darle a buscar vale bien pues vamos a continuar y una vez que tengo un buscador Ahora yo por ejemplo cuando vaya a pedir Es normal que en nombre yo tenga un campo de texto vale pero cuando yo le dé aquí a pedidos Claro en fecha yo lo que quiero es Buscar un listado o por ejemplo mira cuando yo en clientes nombre sí é no no Espera es que fecha igual os lía con el tema del calendario no cuando yo por ejemplo aquí quiera buscar clientes nombre no quiero un buscador esto es una clave foránea yo lo que quiero es que aquí me salga una lista me salga un Select con los clientes que tengo en la aplicación pero qué ocurre que una vez que haya hecho un Select primero vamos a hacer un Select yo a continuación lo que quiero es implementar el componente que hicimos el otro día en interfaces en desarrollo de interfaces que es os acordáis el Select con buscador que es el selecto guapo que hicimos el otro día vale o Mira por ejemplo si yo aquí quiero generar un nuevo pedido Fíjate que identificador vale inserta un nuevo elemento para la fecha lo que comentabas hace un momento vale pero claro inserta un nuevo elemento para clientes ahí yo no debo meter una clave primaria me debería hacer una un Select de clientes pero ahora veremos que el Select va a ser muy incómodo vale Voy adelantando el problema bien Vamos a por ello voy a crear una nueva versión copio pego 059 y Select en claves foráneas lo primero que tengo que decidir es cuándo aparece el Select en identificador no en fecha no en nombre Sí vale ahí debe aparecer un Select Cómo se si en ese campo debe aparecer un Select bueno Pues debería aquí tengo un listado de las columnas pero debería Ah no perdona en mi caso está aquí debería tener más información de El qué de los campos el servidor me debería decir Oye mira esto es un número entero esto es una fecha esto es una clave foránea claro no sí lo identificador tranquilo pero por lo menos que me ponga que es un número porque ahora mismo es un text Vale entonces para ello vamos a ver Me voy a ir a la base de datos me voy a ir a php my admin me voy a entrar como Root y no me acuerdo qué contraseña Le puse vale me voy a ir a crimson me voy a ir a aquí a sql y digo eh A ver clientes por ejemplo vale sql show columns from clientes a ver continuar Oh qué Guay Porque si yo hago esto Fíjate que no Solo tengo el nombre de los clientes sino que tengo el type y tengo si es key vale incluso Mira show columns from pedidos continuar fecha clientes nombre Ke mul con lo cual me dice Cuál fíjate incluso int date int pero es clave primaria o sea clave foránea yo no tengo algo de esto en el controlador A ver momentín espérate que te lo diga me voy aquí me voy al servidor me voy a conexión deb a ver m colum selecciona tabla a ver esto qué hace ah muy bien a ver eh aquí sql from quita from pedidos Esto me da no esto no me da Exactamente Bueno un momento si aquí he hecho esto por qué motivo ah Claro ya sé por qué lo he hecho vale Okay show Table name as tables vale listado tablas a ver esto es eh tables name in crimson no porque vale Select Table name vamos a todo vamos a ver Ah no no pues no tengo eso y lo voy a tener que crear columnas tabla Oye espérate aquí Sí columnas tabla Aquí sí columnas tabla vamos a verlo Ah ya lo sé vale muy bien Y si yo hago aquí me sale columnas tabla porque yo en el comportamiento yo en el comportamiento yo en el comportamiento lo que hago es únicamente esto de aquí vale únicamente el dato Field Pero qué ocurre Pues que si yo hago esto Si yo hago Select columns aquí from pedidos vamos a verlo Mirad sql Select columns from pedidos le doy a continuar y sí tengo el campo Field pero me está llegando más información Como por ejemplo el campo type esto qué quiere decir pues que si yo vengo aquí a comportamiento vamos a ver dat Field vale campus búsqueda Push perfecto y yo por ejemplo Aquí voy a decir aquí If dato type Por qué type veis Que no me lo estoy inventando sabéis que es una columna de la tabla vale a ver un momento int OK Y si le digo from clientes type bar charar vale Ok cato type javascript contains String includes vale si dato type includes barch en ese caso Campos búsqueda set attribute type es igual a texto Else If el If dat type includes int type number Else If dat type includes date type date qué es lo que estoy haciendo pues que cada uno de esos Campos sea realmente el tipo de dato que le corresponde vamos a verlo a ver si es cierto cliente superc controlador Vale y Mirad Oh un momentín identificador no dónde estoy aquí en comportamiento Sí vale console punto log voy a decir dato type okay no Qué pasa aquí es como que estoy en otra versión 059 Ah lo he puesto en la 58 vale Okay venga entonces cliente me da una rabia cuando pasa esto Vale pues simplemente aquí me lo paso aquí vale recargo y ahora sí fíjate que el campo identificador es un número entero pero el campo nombre es un campo de texto Mira email Bueno pero email no lo tengo o por ejemplo en pedidos Fíjate que el campo identificador es un número entero pero el campo de fecha es un selector de fecha vale pero clientes nombre como es un marchar pues es un campo de texto qué es lo que os quiere decir pues que no solo podemos identificar el tipo de dato sino que podemos utilizar el tipo de dato para mejorar el formulario por ejemplo aquí igual cuando cree un pedido también quiero que aquí en fecha me aparezca un selector y aquí en identificador me aparezca un número entero vale vamos a por ello aquí mismo Campos búsqueda vale Esto me extraña Campos búsqueda Push Ok Campos búsqueda elemento Qué raro porque en el formulario tiene que salir también igual vamos a ver columnas tabla datos for each listado de columnas tabla formulario de inserción vale columnas tabla Okay inserta un nuevo elemento para columna contenedor appen Child input Ahí está vale columnas tabla HM no me gusta datos colección Campos okay claro columnas tabla yo lo he ido Tejiendo aquí Dónde estás columnas tabla Ahí está Vale pues nada pues me hago tipos tabla es igual a una tipos tabla pun Push dato type y ya está Vale con lo cual columnas tabla for each input pues colección campo length type es qué pues es tipos tabla vale Y es Index of un momento javascript Mira espera columna coma index tipos tabla Index vamos a verlo si todo va bien si todo ha ido bien vale Ok pedidos y Ok vale ha ido bien identificador bueno Esto no ha ido bien curioso vale esto es una fecha vamos a verlo productos y productos vale precio Qué es productos precio es un Ah decimal claro decimal lo mismo es decir Estoy preparado para int pero no estoy preparado para decimal Bueno pues no pasa nada me voy Aquí sí de vez en cuando hace eso aquí okay Y digo Else If dato type includes decimal pues type number vengo por aquí me voy a productos me voy a precio y ahora sí me coge el type number vale Y ahí me coge el type number precio ahí No nombre descripción a ver qué pasa aquí me lo debería Ah type decimal espérate No claro le ha cogido ahí a la bestia vale se ve que le he pasado el dato la bestia entonces y Okay pues aquí esto no Ah aquí tipos Push text tipos Push number tipos Push date y tipos Push number ver recargamos cliente nuevo vamos a ver un momentín pedidos pincho vale Y a ver identificador es un número claro clientes nombre es un número porque clientes nombre es el identificador externo es decir cuando yo por ejemplo creo un nuevo pedido la Es normal que se la pueda poner aquí pero inserta un nuevo elemento para clientes Qué es clientes pues ahí me debería salir un listado de los clientes que tengo disponibles es decir no voy a poner aquí un número uno por qué Porque entonces me tengo que saber de memoria Cuáles son los identificadores de la tabla clientes sino que el sistema debe ser capaz de detectar automáticamente cuando un campo tiene que meterle un tipo de dato pero cuando un campo realmente es una clave foránea lo mismo que hicimos aquí realmente V esto mismo que hicimos Aquí bien pues ahora vamos a por ello copio y pego 060 y eh Select en claves foráneas Qué es una clave foránea Bueno pues si nos damos cuenta si nos damos cuenta correcto Ahí estamos las claves foráneas Beatriz son referencias a otras tablas y si nos vamos Aquí dónde estoy sql Select bueno eh show columns from pedidos vale le doy a continuar y yo puedo averiguar A quién pertenece Esa clave vale es una clave múltiple luego tengo por aquí claves luego puedo identificar cuáles de esos Campos deberían sacarme un Select y cuáles de los campos no deberían sacarme un Select vamos a por ello o sea os informo que el show colums es un sencillo show columns vale me saca un campo llamado Ke por tanto ahora sa ver có pongo una array llamado Ke pero no es que yo me haya inventado el Ke sino que el Ke viene de May sql Así que vengo por aquí y digo vamos a ver aquí y digo campus búsqueda o tipos tabla pues digo e claves tabla es igual a esto para cada una de ellas digo claves tabla pun Push dato de Ke y aquí es donde me diréis Pero qué es Ke pues Ke es una columna que me devuelve mysql que pone Ke y yo no lo controlo si pusiera kak yo pondría kak pero como pone Ke Pues yo pongo Ke Vale entonces pongo OK Y entonces le digo vamos a ver vale Okay Ok Okay momentín inserto un nuevo elemento vale input vale Ok Y entonces digo If claves tabla de Index no es igual a mul Por qué mul Pues porque ahí pone mul múltiple pero yo no elijo si pone mul o si pone des mul si no es igual a mul me metes un campo a pench contenedor momentín noen Child esto el campo els colección Campos vale els collección Campos Push create Element Select Place holder columna esto no Esto se lo puedo poner fuera aquí Esto va fuera vale vamos a verlo Y esto es 60 cliente superc controlador vale eh pedidos click y ocurre Esto vale daos cuenta que tengo un identificador tengo un campo de fecha pero en todo aquello que es una clave foránea me aparece un desplegable yo me voy por ejemplo a líneas de pedido inserto una nueva línea de pedido y me dice inserta un nuevo producto para productos nombre Hola inserta un nuevo pedido para pedidos Hola o sea dame quieres que te inserte un producto Dame el estado de productos no voy a adivinar yo el producto vale es una forma de hacerlo otra forma sería hacer un buscador Ajax yo que sé Hay un montón de formas vale pero una forma muy html vale una forma muy clássica es quieres que te inserte un producto sacame un listado productos para elegir vale vamos a hacer eso así que ya estamos detectando que es un campo ya hemos detectado que el tipo de dato ya hemos detectado que es una clave foránea Vale pues Ahora lo que vamos a hacer es meter un montón de inputs vamos a ver copio pego f2 061 input en perdón op quería decir options en Select Así que options en Select options and Select Vale y vamos a ver yo por ejemplo aquí para que tengáis claro lo que voy a hacer aquí Select y ahora Let opción es igual a document create Element option opción pun text content es igual a selecciona una opción y colección campos de colección Campos leng menos un esto da un poco de rabia pero es así eh punto appen Child y opción si hago esto lo que ocurre en la pantalla lo que ocurre en la pantalla cliente superc controlador es que me voy a pedidos inserto un pedido Y en lugar de aparecer un Select vacío pues aparece selecciona una opción y ahí obviamente pues lo que hary a continuación es sacar todas las opciones vale eh Me falta un poquito de css Pero bueno básicamente como os podéis imaginar el mismo css que le pongo aquí se lo puedo poner aquí y luego también os digo otra cosa Y es que luego lo que voy a hacer No sé si al final me dará tiempo en la clase de hoy pero bueno es reemplazar ese Select que tenemos ahí por el que estamos diseñando en la asignatura de desarrollo de interfaces vale con lo cual momento vale Cómo pregunto cómo diríais que ahora voy a poblar esa tabla algo una petición correcto A qué por Jason o algo vale Siempre es lo mismo o sea quiero sacar una lista de algo pues hago una petición por Jason y recupero el Jason y lo pongo ahí como O sea la idea Está en que siempre es lo mismo vale la idea Está en que veáis que sigo un método el método a el método b o el método c me da igual vale Pero sigo un método siempre el mismo para que veáis que al final la estructura de y las peticiones son repetitivas es siempre lo mismo vale quiero algo lo pido me lo devuelve en jas y ya cojo el jas y hago algo con el jas vale es lo mismo siempre igual entonces tal y como comentas yo digo eh fch fetch qué vamos a ver pues fetch me voy al servidor eh aquí fetch me voy al servidor le pido la operación eh qué era No sé no me acuerdo sinceramente no me acuerdo conexión de B bueno o la ruta es lado tablas no tabla pues tabla vale la operación es tabla y la tabla es y aquí a continuación viene la cuestión un momento eh claves tabla columna Vale y digo columna pun spit de gu bajo de a ver de c OK Vamos a verlo vamos a ver qué nos da punto den function response return response.js punto den function datos y Ah qué rabia me da esto también y console pun log datos vamos a verlo ya no sé en qué número estoy en 61 todavía vale recargo le doy clic aquí no le doy clic a pedidos sí es pedidos no bueno da igual le doy clic aquí selecciono una opción no algún error quizás Ah sí claro Perdón Mirad pincho aquí vale Mirad no sale nada pincho productos o pedidos vale o lo que sea en clientes nombre me aparece una lista de clientes míralos qué bonicos ahí están todos los clientes luego ahora qué es lo que comentabas pues voy a meter estos clientes en un jas Perdona ya estn en un jas los voy a meter en el formulario Y entonces digo vamos a ver y entonces digo datos punto for each para cada uno de los datos function dato Y entonces digo vamos a ver espera que te lo digo Espera que te lo digo Let opción es igual aument create Element Vale y colección Campos opción el problema es qué le meto O sea quiero decir si yo aquí pongo Hola Mirad si yo aquí pongo Hola recargo pedidos creo un pedido seleccion y pone hola hola vale Yo ahí lo que voy a hacer chat gpt javascript concatenate all properties from object into One String separated by esto y property Val a ver una forma que sea sencilla de hacerlo object values vale me Mola venga me Mola esto Mola Vale entonces le digo led cadena es igual a object values de dato y los junto con un guion de hecho con un espacio guion espacio y option text content cadena Esto va a ser muy incómodo vale va a ser muy incómodo porque yo ahora vengo por aquí yo ahora vengo por aquí me voy a pedidos me vengo aquí y Mirad Por qué va a ser incómodo porque hago así y el Select es gigantesco Claro pero solo el nombre solo lo que eso es difícil porque hay columna hay tablas que tendrán nombre y otras que no tendrán nombre vale me lo dejo de momento así no me preocupa que se largo porque luego con el componente que vamos a insertar como en el componente controlamos el css Pues igual podemos recortar vale otra solución sería de Oye no sé qué Campos tiene esa tabla pero dame los tres primeros qué tres los que vengan los tres primeros que sean sí correcto suele ser correcto o no vete a saber vale bien qué ocurre aquí vale aquí por fin Hemos llegado al problema que yo quería llegar y es que daos cuenta que es muy incómodo vale si yo quiero hacer un nuevo pedido y yo me voy a pedidos y yo le doy aquí clic Pues fijaos que si yo saco aquí pues es muy incómodo Buscar un cliente aquí dentro pero menos mal que en la asignatura de desarrollo de interfaces estamos desarrollando un buscador para precisamente aligerar Esto vale vamos a ver se puede hacer otra tabla con losos del cliente diferente a la del nombre Beatriz no te he entendido qué quieres decir con esa pregunta Abre micro si quieres o lo que quieras o escribe alguna extensión de la pregunta a ver hacer otra tabla con los datos del cliente s me refiero se me escucha sí se te escucha dimea todos los datos de del Ah el nombre pues hacer una con el nombre y después insertándoles la otra tabla donde tengas todos los datos Sí correcto se podría hacer entonces Fíjate que en este caso especialmente mysql tiene una fórmula para eso que son las vistas Entonces yo por ejemplo lo que puedo hacer es que en lugar de clientes me puedo crear una vista llamada clientes resumido o clientes breve donde básicamente esa vista sea identificador nombre apellidos ya está Vale con lo cual en lugar de beber de la tabla real de clientes Bea de clientes vista Y sabes qué no pasaría nada lo voy a hacer porque no me cuesta mucho eh Select Mira Select identificador coma nombre coma apellidos from cliente y ahora digo create View eh clientes resumido as todo esto de aquí vale simplemente hago una consulta sql el we 1 me sobra eh hago esta consulta creo una vista le doy a continuar Hola identificador no identificador vale le doy a continuar tengo ahora clientes resumido con lo cual podría beber de esa tabla con la ventaja de que el identificador lo Respeta a raja tabla es decir el identificador que tenga esta vista tiene necesariamente que ser el mismo identificador que tenga el cliente vale por tanto sí efectivamente Beatriz esa sería una solución que nos serviría pero ya te digo que no va a hacer falta dime y qué claro es lo mismo o sea da igual que tenga 200 que 200,000 porque habiendo hecho esta vista el identificador que tenga el cliente real es el mismo que tiene la vista Ah Ah no espérate Claro claro correcto vale Si tuviera dos en 2000 pues esto ya sería una locura porque aparecería ahí 200.000 vale Para eso sirve el buscador que hemos hecho otra cosa que os digo es que el buscador que hemos hecho es siempre mejorable porque tú dirás sí te va a permitir Buscar pero ya has cargado los en 2000 y eso quieras que no es transferencia vale podríamos mejorar se busca para que solo traiga resultados cuando tú piques y no traiga resultados hasta que tú no empieces a buscar por ejemplo Exacto Eso es en cuanto marques más de tres Entonces ya se conecta a la base de datos y te pide pero solo te trae a html la selección no los 200000 vale Sí correcto que otra cosa que os voy a comentar es que en un momento dado pues tendríamos que decir Bueno pero esto en Cuánta memoria se traduce pues lo cuantificar en el sentido de que en el buscador hay una pestaña llamada performance y otra llamada application donde en un momento dado Espera que incluso eso lo tenemos Aquí vamos a application aquí pero no vamos a performance no no Uy madre mía esto lo han cambiado qué fuerte aquí Network vale yo hago así y me dice mira ahora mismo aquí ahora mismo tu web ha traído 48 kb de resources vale de recursos Pues bueno pues está bien también y mira mira atención eh 48 kb me voy a pedidos y ya se han convertido en 74 kb y Cuanto más vaya pidiendo pues evidentemente más cas voy a ir cargando si después de hacer unos cuantos kilb o sea después hacer unos cuantos clics no he llegado a 100 kb pues Oye calma la cosa no va mal vale es decir 30 40 kb cada vez que ha un clic Pues eso no va a ninguna parte ahora si tenemos esos 200,000 claro eso irá creciendo si en un momento dado al hacer click gasto 2 megas en cada petición Espérate que eso sí que va a causar un ancho de banda y hay que arreglarlo vale claro escalando la aplicación Exacto Esa es la cuestión Bueno pues son y 20 vamos a empezar con tema de comentarios para que el código se quede bien comentado lo que hemos hecho hoy Entonces vamos a ver cosas que hemos hecho hoy Esto es título tabla no esto no lo hemos tocado hoy vale aquí creo esto de vacía las columnas Ah sí creo un vacío para almacenar los tipos de dato de las columnas de la tabla creo un array vacío para almacenar el tipo de clave de cada columna de la tabla creo un array vacío para almacenar los input del Buscador de la tabla Ok Vale ahora a cada uno de los campos del buscador les pongo un placeholder acordaos que un placeholder es la palabrita esta de ayuda que tiene el campo que ya cuando pinchas y empiezas a escribir desaparece la palabrita vale bien eh vamos a ver ahora a la Ray de claves le añado le sumo le Push le empujo el valor de la clave que viene de la base de datos y ahora atrapo o sea si el tipo de dato incluye marchar en ese caso el tipo de campo es marchar sí Ah y le sumo el valor correspondiente al array si el tipo de campo incluye entero si el tipo de campo incluye entero si el tipo de dato incluye fecha si el tipo de dato incluye decimal el tipo de campo es numérico no el tipo de campo es marchar no es text el tipo de campo es el sumo el valor vale el tipo de campo es date y el tipo de campo otra vez es number eh Hay una técnica de refactorización de la cual tampoco Ahora quiero hacer especial hincapié que dice que cuando una función se hace muy extensa daos cuenta que estoy dentro de cargar datos tabla y cargar datos tabla lo que está haciendo como veis es que hace un montón de cosas y dentro de un montón de cosas podríamos decir que este bloque de aquí hace algo concreto vale es una operación necesaria para que funcione el programa pero es algo concreto y diferente a todo lo que todo lo demás que hace la tabla con lo cual desde el punto de vista de la refactorización Yo diría que ese dato me está pidiendo extraerlo a una función aparte vale que habría que verlo porque eso quiere decir que el tipo de dato sería un parámetro de entrada y esto de aquí sería un parámetro de salida vale No lo sé no lo voy a hacer ahora pero un poco para que veáis cosas en el código que huelen que podemos decir aquí tiene pinta de que podría hacer esto bien Vamos a ver vale Y ahora el buscador creo una columna más en la tabla ahora le pongo un buscador lo añado a las cabeceras de la tabla cuando haga clic en la lupa vamos a buscar algo quiero recolectar Esto me lo puedo quitar ya creo un objeto vacío creo un objeto vacío y para cada uno de los input de búsqueda atrapo el nombre del campo atrapo el valor del campo Y si el valor no está vacío es decir si el campo no está vacío le añado el dato al objeto Para qué me sirve añadirle el dato al objeto para ahora realizo una petición al servidor y le paso el objeto Taca vale Y cuando me responde cuando el servidor me responde vuo la tabla con los datos que han venido del servidor vale Y recordemos que por aquí abajo recordemos que por aquí abajo he creado una función he creado una función creo una función para poblar el contenido de las tablas y creo una función para poblar el contenido de las tablas vale hoy vamos a desarrollar poco más pero igual sí que nos interesa ir empezando a refactorizar ir empezando a ordenar informción que está dentro de este proyecto Por qué Porque este archivo se está haciendo muy largo hace tiempo que se está haciendo muy largo y no es cómodo de trabajar Vale y Mirad estamos a final de octubre estamos Sí Prácticamente final de octubre nos queda noviembre nos queda diciembre nos queda enero y nos queda febrero es decir vamos est and 4 meses más que se dice pronto con respecto a esta aplicación eso qué quiere decir pues que así como en otras asignaturas vamos a ir de proyecto en proyecto vale en esta asignatura no el objetivo de esta asignatura es eh aguantar los 5 meses y medio con un proyecto que sea el mismo y eso es un compromiso porque tenemos que hacer el proyecto aparte de documentarlo vale que también tenemos que documentarlo tenemos que hablar de eso en otras asignaturas pero tenemos que hacer que el proyecto sea mantenible que sea utilizable que no llegue un momento que se nos haga tanta bola que digamos madre de Dios que yo no sé que hay aquí dentro hasta ahora hemos hecho eso con comentarios es una forma de documentar el código pero hay que utilizar otras fórmulas también por ejemplo Yo vengo por aquí y copio y pego y 062 y extraer a funciones extraer funciones a archivos Así que yo vengo por aquí y digo vamos a ver dónde estoy por cierto Okay Vale venga perfecto me voy a 62 me voy a cliente me voy a supercontrol y tengo comportamiento vale recordamos que tengo esto comportamiento y ahora vengo por aquí y digo Bueno dentro de superc controlador quiero tener por ejemplo una carpeta nueva llamada js y dentro de js por ejemplo quiero tener un archivo llamado puebl tabla Así que archivo nuevo Puebla tabla js y dentro de puebl tabla. js un momentín voy a cerrar aquí cosas por me lo pones aquí dentro de la tabla js voy a esto corto me voy a Puebla tabla y lo pego y ahora obviamente en el Index html en el Script Me cojo js barra puebl tabla. js así que vengo por aquí vamos a ver recargo siempre que hacemos una refactorización tenemos que recargar para ver si ha funcionado correctamente y no nos hemos cargado nada así que cliente superc controlador Okay Vale parece que en principio sigue funcionando correctamente pero en hemos acabado no hemos acabado porque en comportamiento teníamos la función llamada carga datos tabla así que me voy a js y digo carga datos tabla js carga datos tabla lo que va a hacer todo este código me lo llevo aquí que no te creas tú que sigue siendo bastante largo vale Y me quedó en comportamiento y en comportamiento tengo variables globales del programa Tengo el window load que llega ahí y acaba aquí y aquí por ejemplo Llama a carga de autost tabla de clientes con esto En definitiva lo que estamos haciendo como veis es que yo tengo el comportamiento pun js Y si el comportamiento js en un momento dado Llama a carga datos tabla Pues yo ya sé que si quiero averiguar más de cómo funciona ese carga datos tabla pues me voy a carga datos tabla y ahí tengo toda la información vale de esta forma lo que queremos En definitiva es reestructurar la información vale es eh Mira por ejemplo listado tablas vamos a verlo mira aquí yo qué estoy haciendo aquí pues tengo el na ul tengo vale el menú datos for each nombre de tabla elemento text content elemento attribute vale Ok esto de aquí todo esto de aquí lo que está haciendo es poblar menú de navegación cierto o no vale pues yo puedo venir por aquí y me puedo crear otro archivo nuevo que se llame poblar menú navegación punto js y poblar menú navegación Por cierto aquí en Index he cargado no interesante No pues espera antes de hacer nada más carga datos tabla ya sabéis que cada vez que se refactorizacion claro y si algo en algo hemos fallado no continuamos hasta no arreglar aquello que hemos fallado porque si no luego es un desastre entonces vengo por aquí al comportamiento y digo Mira es que todo esto tag trasca me lo corto poblar menú navegación function poblar menú navegación consume datos y por tanto Yo vengo aquí y poblar menú navegación consume datos envía datos perdón y entonces yo aquí vengo a comportamiento Perdona a Index html y digo que cargo la función poblar menú navegación y vuelvo a recargar todo sigue funcionando correctamente vale extraer a funciones es que me extraña que funcione todo la primera qui decir cuando algo funciona es como Espera estoy en el lugar correcto o sea esto debería haber fallado pero fijaos Mirad Cómo era hasta hace un momento el archivo comportamiento js y daos cuenta como es ahora vale o sea yo tengo aquí un poblar men en un navegación si en algún momento yo quiero averiguar qué es lo que hace poblar en una navegación pues me abriré el js pobl arme en un navegación Y averiguaré qué es lo que hace ese método vale o esa función o ese lo que sea y si digo Oye y exactamente qué hace carga datos tabla pues me iré a carga datos tabla y ya miraré ahí lo que tenga que mirar esta operación vale se podría hacer muchísimo más aquí en este archivo No mucho más vale porque esto ya es clic en ventana modal Bueno la verdad que esto sí que se puede hacer una función Sí pero claro como es como son eventos no quiero sacarlo a una función porque son escuchadores continuos si algo se hace en un momento dado se ejecuta en un momento dado sí que vale la pena sacar función pero es que algo que ya es una función en sí mismo on click claro meter una función No mejor que no se puede sacar a un archivo externo ojo y no encapsular una función pero ya te digo no quiero hacerlo tampoco vale Okay Ok bien y luego hay otra cosa que quiero hacer Vamos a ver eh Ahora copiar pegar 063 eh imports de javascript vale cierro por aquí me abro la siguiente versión cliente superc controlador y comportamiento vale Y ahora chat gpt eh javascript import another js file vale No navegador clásico vale No o sea en no dejs no no usando require No estoy Leno de js ya no aquí mm ya pero no vale eh veréis Cuando en javascript realmente estamos importando en cascada diferentes archivos realmente daos cuenta de que es javascript el que está llamando a una función externa Pero quién declara esa función externa pues es el html fijaos que aquí en el html Uy Espera que tendría que configurar la el tamaño de fuente es html el que está cargando diferentes scripts no Mola Vale entonces hay una forma más limpia más deseable más predecible vale con respecto a lenguajes de programación Y es que javascript si javascript quiere importar algo que no sea html el que lo importe que sea javascript el que lo importe vale con lo cual voy a momentín importo en la carpeta js importo pues carga datos tabla punto js a ver si esto no me peta porque depende del navegador en el que estemos igual puede petar carga datos tabla fuera lo quito de aquí recargo igual Peta eh aviso y PS y cliente y superc controlador Vale y Ok y error console vale carga datos tabla is not Define Ah espérate bien vale Y lo que está ocurriendo vale es que carga datos tabla is not defined Por qué vamos a ver js vale aquí fail to resolve module vale fail to resolve module momentín import not working y creo que en el módulo me faltaría un export o algo así en archivos marcados como módulos vale ya pero no puf den no es que esto no lo quiero eso también vale export Ok Y entonces me voy a carga datos tabla le digo export fun y a ver ahora no is not defined y esto me dice que no lo va a encontrar no vale No ya os digo esto lo Tendremos que dejar un poco en standby Ah es que el punto D no lo quiero y no quiero await no quiero importar eso nada voy a eliminar esta versión voy a eliminar esta versión cierro esto de aquí cerrar sin guardar y haremos importaciones aunque sea de otra forma vale vamos a ver extraer funciones Sí pues vamos a extraer alguno más aplicaciones no recursos humanos Ah sí superc controlador comportamiento Vale entonces de aquí de js podemos buscar cosas que sean Aquí está por ejemplo a ver listado de columnas lo que pasa es que esto luego utiliza cosas colección Campos de aquí no puedo extraer poblar menú de navegación no puedo extraer y pobl la tabla este ya es pequeño vale esta función por ejemplo no justificaría una extracción pero esta función sí Mira mira voy a hacer esto voy a hacer esto vamos a ver Mirad esto de aquí es una unidad funcional vale con lo cual si es una unidad funcional básicamente te doy tipo y me devuelves ese atributo no debería estar aquí dentro Así que a continuación Yo vengo extraer funciones archivos sí refactorización me cargo el 063 y Mirad atención superc controlador comportamiento no js carga datos tabla esto de aquí me está llamando para que cree una función nueva llamada eh Dame tipo dato o convierte tipod dato js cada archivo js tiene que tener solo una función dentro no puede tener tantas funciones como queramos pero por Claridad lo estoy haciendo así vale function convierte tipo dato creamos una función la función queé acepta vale la función acepta eh tipo y la función que devuelve return tipo devuelto vale algo así por ejemplo es decir acordaos que siempre soy muy pesado con esto con el tema de la caja negra vale lo que entra y lo que sale de la caja negra entonces me voy esa que cierre por aquí cosas para no equivocarme de archivo me voy a eh carga datos tabla me voy a convierte tipo dato y atención Mirad saco esto okay espera momentito corto me voy a convierte tipo dato Okay Eh ejecuto convierto tipo dato vale Y entonces digo convierte tipo dato es tipo con lo cual dato type Esto es lo que entra en la función vale If tipo bueno Esto da igual esto es un console If tipo If tipo y entonces digo led e qué me devuelves atributo mira led eh tipo de vuelto es igual a esto es igual a objeto vacío o sí vale Y entonces vengo por aquí y digo tipo de vuelto es igual a tipo es texto coma y ya okay Ya está Ah pues no no tipo de vos igual a nada tipo de vuelto es igual a texto vamos a ver tipo de vuelto es igual a number tipo de vuelto es igual a date tipo de vuelto es igual a number vale return tipo de vuelto Y entonces Yo vengo por aquí y digo Campos búsqueda de Campos búsqueda es convierte tipo de dato type y tipos tabla es convierte tipo de dato de type vale con lo cual ahora sí aquí me quito esto no me quito esto vale Y aquí únicamente si os dais cuenta en esta función lo que estoy haciendo es la conversión de cosas la conversión de una cosa u otra barchart es text int es number date es date decimal es number y aquí me estoy ahorrando el If Else If y le estoy poniendo directamente el campo que toca Vale ahora evidentemente vamos a comprobar si esto sigue funcionando si esto sigue funcionando me voy a esto Ok vale no me voy a convierte tipo dato aquí arriba mejor js convierte tipo dato imports proyecto refactorización cliente superc controlador y ya está Vale y sigue and Exactamente igual pedidos hago así tipo de dato fecha tipo de dato número Vale y todo qué ocurre Pues que yo antes había hecho un mapeo inicial pero este archivo este mapeo inicial que cubre únicamente cinco casos o cuatro casos claro se podría extender entonces si yo ahora aquí a continuación pongo otro Else If digo si includes Time en ese Camp en ese caso c cámbiamelo por Time es decir el campo Time de h o sea de mysql coincide con el campo Time de html Pero esto qué quiere decir que ahora convierte tipo datos solo hace eso con lo cual yo puedo ampliar esto todo lo que me hiciera falta o sea esto Podría tener Mirad voy a exagerar vale esto Podría tener este aspecto y no pasaría nada porque si yo entro en convierte tipo dato Ya sé a lo que voy ya sé que ahí solo hay eso pero claro esto mismo en la función de carga datos tabla Pues sería un cachurro así de grande en medio de una función que ya de por sí es grande Vale entonces En definitiva voy a deshacer esto y Time vale En definitiva lo que buscamos no es solo evidentemente el primer paso es ampliar las funciones del sistema Pero también de vez en cuando buscamos pues parar un poco vale parar un momento y decir Oye cómo va la cosa Vale vamos a refactorizar vamos a reordenar si hiciera falta Okay Muy bien pues como os digo Son 47 vale son casi las 5 vamos a aprovechar el cambio de clase para me voy momento a jefatura de estudios para consultar estdos los exámenes y pues ya os digo o ahora Luego o mañana por la tarde o cuando sea pues nos conectamos un momentín programaciones vale nos conectamos analizamos que estamos aquí vale analizamos que estamos ya pues acabando muchas unidades en desarrollo de interfaces se supone que vale en genera naturales ya acabamos esta semana estábamos acabando con lo cual pues empezamos ya a cerrar pues qué es lo que entra dentro de cada se supone digo Se supone porque efectivamente como ha comentado blanca de facto en muchas asignaturas ya estamos directamente entrando en el tema número tres vale bien Perfecto Pues nada Vamos allá para un momento la grabación y