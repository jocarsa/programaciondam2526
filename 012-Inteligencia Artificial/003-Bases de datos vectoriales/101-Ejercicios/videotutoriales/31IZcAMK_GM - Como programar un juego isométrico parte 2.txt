bueno para empezar por una parte tengo por aquí pues un personaje que he creado ayer sacamos uno de internet oye traído uno que es el que de hecho hice en la última parte del curso de blender que es un personaje pues que camina ahora lo queremos vale de hecho se acaba dos versiones de este personaje que es uno en color verde y otro en color azul para perdón un color uno en color verde y otro en color rojo para luego poder implementar el tema del protagonista y el antagonista y luego he creado por aquí que también lo he sacado como una imagen el terreno vale he creado un terreno entonces este terreno es el que vamos a estar usando como terreno para el juego los dos los he sacado como render eso quiere decir que los he sacado como imagen fija hay que tener en cuenta que dentro de los múltiples tipos de videojuegos que hay fundamentalmente a día de hoy hay dos tipos de juegos que son 2d y 3d entonces estamos empezando por juegos 2d entonces lo que hacemos es que aunque yo estoy trabajando con un programa 3d aunque haya creado los gráficos con un programa 3d pero al final los tengo que representar en una imagen 2d hay otro tipo de representación que es el pixel art mediante el cual se diseñan los personajes y los entornos directamente en 2d píxel a píxel vale pero en definitiva sea como sea de una forma o de otra pues yo tengo que poner digamos los dos en común le voy a cerrar el programa 3d porque el objetivo no es ahora empezar a hacer escenarios o ya lo he hecho el objetivo es que sepas que pues esto que voy a mostrar a continuación viene a parte y este alguna parte es este programa así que ahora cierro por aquí bien a continuación esto que estoy usando es una pequeña utilidad que tengo programada hace tiempo ya te lo explicaré no es el objetivo ahora mismo pero el objetivo que sí que tengo vamos a verlo mente que cierre aquí vamos a ver que tengo por aquí el personaje y el personaje con los que por ejemplo este es el ejemplo verde lo tengo en diferentes sprites cada uno de los sprites es una imagen y en cada imagen se representa al personaje en un ángulo diferente y en un ciclo de caminado diferente esto quiere decir que para un personaje por ejemplo en este caso yo tengo 64 sus imágenes para el personaje de color verde y para el personaje de color rojo tengo otras tantas sus imágenes entonces cargar 64 más 64 imágenes en un videojuego pues es cuanto menos incómodo sobre todo porque en un juego normalmente igual no hay dos personajes hay 20 personajes e igual hay props igual hay escenario igual hay un montón de otras cosas entonces empezamos a multiplicar cada cosa por 64 y al final el número de imágenes que tenemos cargar es algo prohibitivo entonces en videojuegos donde se usa mucho esto que te voy a enseñar que se llaman sprites sets los sprites sheets son hojas de sprites son pues eso imágenes que ya incorporan en una sola imagen todos los movimientos del personaje para que el videojuego cargue una imagen y no 64 imágenes y luego ya dentro del juego una vez que el juego ha cargado una imagen vamos a ir a buscar qué trozo de la imagen nos interesa vale entonces en este caso lo primero que he hecho es que tengo un programa que ya explicaré más adelante ese no es el objetivo ahora que me permite unir estas 64 imágenes en una sola imagen voy a la dispersión de estos momentos ht docs me voy a videojuegos vale ayer empecé a meterlo todo junto en la misma carpeta bien no es una costumbre muy buena voy a meter una carpeta y entonces pongo aquí personaje rojo punto png vale ahora voy a hacer lo mismo con el personaje verde copio por aquí me voy a me voy ht docs me voy a útil aquí en mi emerge esta es la utilidad que tengo programada la pequeña herramienta que tengo programada para convertir 64 imágenes diferentes en un sprite sip recargo un par de veces y ya tengo aquí esto convertido a una sola imagen y entonces personaje verde punto png y de esta forma ahora si nos vamos al videojuego y podemos ver como dentro de esta imagen pues tengo como te digo en una sola imagen las 64 imágenes del personaje bien ahora a continuación vamos a abrir de nuevo el código del juego por cierto que tengo por aquí en la rejilla a ver dónde la tengo aquí tengo el fondo png también lo voy a poner en esa imagen fondo png es una imagen como te digo que he calculado a partir de ese render vale a partir de esa escena 3d y es la que voy a utilizar como fondo del videojuego entonces en este caso pues continuamos el juego pero hoy este es el archivo que unen las imágenes en una sola y hablaremos de ese archivo vamos a ver el archivo de ayer bien y ahora y ahora pues vamos a empezar cargar cosas así que reemplazamos personajes uno por img personaje rojo por ejemplo vamos a verlo imagen rejilla bueno a ver aquí tengo un pequeño problema y es el siguiente ayer lo que hicimos fue cargar la imagen de fondo como una imagen en javascript y entonces esa imagen la estábamos imprimiendo la estábamos dibujando pues la imagen a imagen tengo imagen fondo de hecho el fondo también por ahí y estábamos imprimiendo en las dos bien esto es perfectamente posible especialmente cuando el entorno va cambiando que se puede dar en muchos casos pero curiosamente en el juego que vamos a empezar haciendo ahora no va a ocurrir así entonces es una pena estar cargando pues o sea estar dibujando y borrando el fondo constantemente cuando el fondo es que realmente no va a cambiar entonces lo que voy a hacer es que voy a eliminar estos dos elementos realmente vamos a ver lo que voy a hacer en este caso es que antes del canvas voy a dibujar un día de los de toda la vida vale y de fondo además muy recomendable mente voy a decirle al sistema que esto es deep y de contenedor y el contenedor va a contener tanto al dib fondo como al canvas ahora lo que voy a hacer es decirle al sistema que con tenedor coma fondo coma pienso voy a decirles qué posición absoluta y voy a decirles que todo 0 píxeles y eso qué va a hacer pues es lo que va a hacer es que los tres estén montados uno encima del otro es un poco el objetivo es decir el canvas va a estar justo encima del fondo también lo que voy a hacer aquí es decirle aquí al sistema que altura dinámica y la anchura dinámica no sólo se le aplique al lienzo sino que también se le aplique al fondo y también se la aplique al contenedor me voy ahora a localhost videojuego bueno no pasa nada ahora veremos que aparece el personaje del sprite vamos a ver dónde está claro es que nos otorga la imagen todavía pero que sí pero sobre todo lo más importante aquí es que pues empecemos a ver cómo empiezan a cargar digamos los elementos y ahora claro evidentemente lo que tengo que hacer es decirle al sistema que sobre fondo quiero que el background sea url y img fondo png entonces vengo por aquí vamos a verlo fondo un momento a ver si es que ha fallado la carga de la imagen me voy a el evento me voy a al fondo vale el problema es que es tan pequeño creo que todavía no se ve vamos a verlo pero esto por encima conocedor a seguir cuidado muy bien parece que no he cogido lo del tamaño el fondo no ha cogido el tamaño vale entonces voy a hacer lo siguiente voy a decirle que a estos dos guys 100% height 100% vamos a ver ahora sí y ahora voy a volver a devolver el fondo atrás y así tenemos que los personajes pues empezaron a moverse por encima del fondo otra cosa que puedo hacer otra cosa que quiero hacer de hecho es poner un fondo digamos como gradiente por encima del objeto a ver momento ahí vale perfecto eso es entonces ese fondo gradiente lo podría poner en programación hay veces que se tarda menos en crearlo en otro programa como por ejemplo el equipo vale entonces lo que voy a hacer en este caso es ponerlo en el gimp y ya está el momento que estoy abriendo el game simplemente para mostrar como sobre ese png transparente pues voy a mejorar y ha quedado aquí tengo me vale y entonces ahora qué voy a hacer es que voy a crear la nueva capa sobre esta nueva capa voy a crear un gradiente es este de aquí cojo uno de los gradientes de del programa voy a uno blanco y negro vale y por ejemplo hay a ver que lo haga recto vale bien y ahora bueno lo quería al revés de hecho así que le voy a invertir y ahora lo quiero menos fuerte entonces me voy a crear un color de relleno gris y ahora esto le bajó un poquito la opacidad este es un poco el resultado estético que va buscando entonces ahora lo dispuesto lo guardo como fondo jpg ya no hay razón para que sea un bebé de esperarse a un joven png quería decir vale ahora en el código le puedo decir qué quiero que la imagen sea fondo jpg espero esto fueran y armas de falta esto fuera ya no me hace falta y fondo punto jpg así que recargamos ahora sí tengo ya pues esa imagen de fondo incluso puedo quitar ya el borde que le habíamos puesto al principio para ver el canvas y ahora técnicamente ya no hace falta vale ahora mismo tenemos algo un poco extraño en la pantalla porque lo que está sucediendo voy a hacer un poquito más de zoom lo que está sucediendo es que bueno veo como una rejilla de 64 por 64 puntitos lo cual es normal lo cual es normal vamos a recargar aquí lo cual es normal porque si yo he cargado la imagen del personaje rojo realmente es una rejilla de 64 x 64 con lo cual yo lo que estoy haciendo es imprimir esa rejilla directamente en pantalla pero si yo ahora a continuación me saco el html5 canvas cheat veré que en la documentación del draw image imagen una persona nueva no bien veré qué como te digo en el image drawing tengo el draw image que como vemos tiene una sobrecarga en imagen x y alternativamente anchura y altura y luego tiene otra sobrecarga más compleja pero que sin embargo nos va a venir bastante bien que es en la imagen y luego el source x el source y el short swift el short height y luego el destination x destination y destination width y destination height esto quiere decir que yo ahora mismo tengo los cuatro parámetros debajo correctos pero me faltan los cuatro parámetros de arriba tengo una imagen que viene 2048 x 2048 píxeles y tiene 8 imágenes por cada bloque eso quiere decir que se sacó la calculadora 2048 partido 8 son 256 valència cada bloque son 256 píxeles eso quiere decir que yo puedo venir por aquí y cuando le digo draw image aquí donde tenemos ya estos cuatro parámetros voy a meter cuatro parámetros más entonces digo cero coma aquí no puedo meter comentarios porque estoy a mitad de una llamada a un método a lo cual no puedo meter aquí a continuación y ahora pongo 256 vamos tengo todas conmigo de que haya hacer toda la primera pero vamos a probarlo vamos a ver qué pasa así que recargo y pues mira por suerte pues voy a hacer toda la primera que se va a hacer y entonces lo que tenemos en este caso es que tenemos ya el personaje pues colocado en la pantalla voy a poner en lugar de 30 voy a poner 64 x 64 y así pues nos vemos un poquito más grande vale bien y así incluso aunque sea exageradamente grande ahora luego lo haré más pequeño déjame que ponga 128 más que nada lo que quiero que veas en la pantalla es que el personaje pues está ahí he cogido ya el cuadrito que yo quería pero el personaje no se mueve y de hecho la dirección tampoco es la que quiero entonces verás te cuento si yo saco el estrés it si yo saco el exprés y verás que de hecho estoy cogiendo ese trozo de allá arriba estoy cogiendo el trozo que empieza en 00 y qué vamos a ver al entonces ahora el objetivo es que yo para cada momento del personaje y para cada parte pues coja la equis y la alegría que me interesa como estás viendo y si no lo puedes ver en la pantalla por cierto que el personal el diseño del personaje es un poco lo de menos vale porque por ejemplo yo hoy estoy probando un personaje que tiene un solo ojo que lo quiero ver en un juego quiero ver cómo queda igual me gusta igual no pero si luego no me gusta lo que hago es reemplazar el sprite y ya está no hay que tocar la programación entonces como habrás visto en este sprite shit en horizontal tenemos la animación del personaje y en vertical tenemos el ángulo del personaje nosotros ya tenemos un ángulo ya tenemos un parámetro de ángulo pero no tenemos todavía un parámetro de animación entonces vamos a crearlo evidentemente como una propiedad de un objeto vamos a ver en este caso que si tenemos ocho estados de animación pues el personaje tiene que tener ocho estados de animación también vamos a comprobarlo nos vamos al código y vamos a trabajar con el código del programa otra cosa que tengo pendiente perdona que esté haciendo varias cosas a la vez pero así vamos organizando un poco el código es que cuando empiezas un programa un juego o el que sea programa que sea generalmente pues sueles empezar en un documento bien o en un mismo documento pero lo normal es que cuando el juego se va haciendo más complejo y el documento se va haciendo grande pues hay que ir separando lo en diferentes archivos entonces yo a continuación lo que voy a hacer es lo siguiente voy a crear un nuevo archivo lo voy a guardar en videojuegos bueno lo voy a guardar en una carpeta llamada js y lo voy a llamar personaje punto j s date cuenta que tiene la p mayúsculas lo cual va a querer decir que va a tener dentro de una clase esto no es obligatorio de javascript pero como ya lo habrás tocado en java pues digamos es una costumbre común en muchos lenguajes de programación que las clases empiezan con mayúsculas y las funciones los métodos empiezan con minúscula entonces eso quiere decir que yo ahora me vengo aquí cojo la clase personaje y me la llevo y me la llevo a personaje y luego evidentemente como te puedes imaginar no pasa nada por el error no es un error realmente y ahora como te puedes imaginar aquí en el script tengo que cargar el personaje srf js personaje punto j s porque si no le quito el código pero tengo que decirle dónde está ese código que le he quitado ahora a continuación vamos a verlo por aquí a continuación por ejemplo voy a crear otro archivo este archivo lo voy a llamar funciones es un archivo típico en cualquier proyecto son funciones de apoyo funciones punto js y dentro de este archivo voy a meter por ejemplo estas funciones ayudantes las meto aquí no te preocupes por los errores no son nada y por supuesto para qué voy a llamar a funciones js de vez en cuando tengo que recargar el código para comprobar que sigue funcionando esto que estoy haciendo realmente forma parte de una disciplina en programación que se llama la refactorización las refactorización es cuando tienes un programa que funciona pero no es muy cómodo no está creciendo bien y digamos que los reordenar entonces cuando re factorizar cada vez que mueves código de un archivo a otro pues tienes que luego recargar el programa para comprobar que sigue funcionando para comprobar que no te has cargado nada y luego pues bueno a partir de aquí puedo mover las funciones digamos cada una a su sitio entonces por ejemplo por irnos a un extremo puedo crear un archivo llamado condiciones iniciales js en condiciones iniciales punto j s voy a poner todo esto aquí condiciones iniciales js así que vengo por aquí y digo condiciones iniciales creo un nuevo archivo método la función de inicio voy a crear por aquí js inicio punto j s y ya sabes los arroyos no son nada y ahora en index corto esto que es el bucle creo un nuevo archivo lo llamo bucle punto j s y por supuesto no se me debe olvidar llamar a inicio js y llamar a bucle js y de esta forma tan curiosa si te fijas pues todo el código que teníamos hasta ahora centralizado en un único archivo pues ahora se ha quedado en inicio e inicio evidentemente pues ya se encarga de llamar a todo el resto del mundo recargamos comprobamos que el juego sigue funcionando exactamente igual es decir no hay cambiado el funcionamiento del juego lo único que he hecho es reestructurar los archivos de hecho incluso yo ahora podría crear un nuevo archivo y podría todo este estilo no pegaría en este archivo lo guardaría dentro de una nueva carpeta llamada css y estilo css como una página web realmente ahora dentro de index.html ya no es etiqueta style sino que es link wray es igual a esta el sit y sf no url es igual acs ese estilo punto css no es ni una cosa ni otra es h ref esto de me suena bien vamos a comprobarlo así cuidado porque el css trabaja en formato absoluto eso quiere decir que de cara a cargar las imágenes pues ahora tengo que hacer dos puntos barra abajo una carpeta entro dentro de la carpeta de imágenes y entonces cojo el fondo vale más allá de eso no tiene mucha más complicación bien ahora como te digo si miramos el código pues el código está bastante limpio podemos ver también recomiendo de cuando en cuando ir limpiando espacios innecesarios para que pues como veis el código se quede lo más limpio y lo más agradable y lo más legible posible no es fíjate que de un solo vistazo a este código pues se puede más o menos entender que aquí se define el personaje aquí se cargan funciones aquí se definen las condiciones iniciales aquí se define lo que es la función de inicio aquí se define lo que es la función de bucle y aquí ya empieza el juego vale tras el inicio ya va llamando a todos los demás y si yo ahora por ejemplo quiero actuar sobre el personaje pues yo me voy a ayudar personaje punto j ese vale yo voy a quitar esto y yo voy a ir directamente a cada archivo según corresponda antes de continuar te voy a decir que hay mucho debate entre los desarrolladores entre si se debe trabajar todo en un único archivo o si se debe separar en diferentes archivos hay defensores de una cosa hay defensores de la otra hay mira igual yo soy de la filosofía de que si funciona y eso es lo importante y que cada uno trabaje como más cómodo le venga vale porque hay veces que trabajarlo en un único archivo pues es un poco rollo porque tienes que ir revisando ese código de todo ese archivo en todo momento pero hay veces que separarlo en mil archivos diferentes hace que luego pues tardas un montón de tiempo en ir localizando qué archivo tiene la información al entonces que lo haya separado en diferentes archivos no quiere decir que yo sea parte de esa parte de la comunidad que dice hay que se pagaron diferentes archivos simplemente lo que he hecho es ilustrar cómo se hace vale pero tú ya eliges si no quieres trabajar en un único archivo o si lo quieres trabajar en archivos diferentes eso no va a hacer que el programa funcione mejor eso va a hacer que tú trabajes eventualmente más cómodo de una forma o de otra verás cuando yo pongo voy a sacar un poco la carpeta vamos a ver aquí cuando yo esté realizó los archivos que no tienen realmente por qué estar dentro de la misma carpeta es decir yo puedo tener una carpeta js y tener por ejemplo luego al lado otra carpeta llamada longaniza y en esa carpeta longaniza meter otros archivos js y se van a reconocer entre sí vale lo único que importa es que yo aquí los llame correctamente para que tengas la idea cuando yo digo script source js personaje punto j s lo que está haciendo el programa es cómo meterlo dentro de este archivo realmente me parece bien y me viene bien que puedas utilizar referencias estos lenguajes de programación como pueda ser java pero no es exactamente java es decir en java hay esto que es el import y el implemento y aparte los archivos tienen que estar dentro del mismo proyecto y tienen que tener el mismo name space porque si no lo van a ser reconocidos vale entonces esto en cierta forma es como esos archivos de proyecto en java pero es mucho más fácil que java siempre se ha dicho que java script de su lenguaje nacido para ser mucho menos potente que java y por tanto tiene muchas menos restricciones que en java por tanto en este caso es mucho más sencillo es simplemente tú llamas a la carpeta y el archivo y el programa lo carga y si hay otro archivo que no esté dentro de la carpeta no pasa nada no hay ningún problema no va a cargar igual y si hay otro archivo que esté en una carpeta que tiene un nombre diferente da igual también lo va a cargar exactamente igual vale por tanto siempre que se encuentra el archivo que se encuentra el archivo es lo único importante en ese caso no va a haber ningún problema y luego por otra parte quiero aprovechar también para eliminar estas imágenes que tenían por aquí que las usamos ayer pero ya nos vamos a usar entonces las voy a borrar directamente o bien puedo borrarlas o bien puedo hacer una carpeta llamada archivado porque quien quién sabe igual en un momento dado más adelante las podemos necesitar vale pero fíjate que vamos a ver el fondo jpg este fondo jpg que está el fondo que cogimos ayer pues no también ha archivado al es el objetivo como ves es que tanto desde el punto de vista del código como desde el punto de vista de la estructura de archivos y directorios el proyecto se quede lo más ordenado posible y entonces yo ahora a continuación te voy a decir una cosa yo soy una persona muy desordenada necesito has visto mi escritorio siempre está lleno de trastos pero si soy ordenado desde el punto de vista de la programación no es porque yo sea una persona ordenada que no lo soy sino porque no soy tonto es decir si yo hago un proyecto y lo empieza a desordenar tanto desde el punto de vista del código como desde el punto de vista de los directorios cuando el proyecto crezca será volver inmanejable y me resultará muy difícil de manejar y al final no perderé lo perderé porque llega un momento que diré minas que ya no sé esto por dónde meterle mano porque está tan desordenado que no sabe por dónde meterle mano vale entonces la idea es esta la idea es que soy ordenado y te invito a hacerlo por una cuestión de autoprotección por reclusión de que el tiempo que estamos invirtiendo realmente sirva para algo y el que sirva para algo quiere decir que no tengas que abandonar el proyecto a mitad simplemente porque sea un guirigay de código que no entiendas al final dónde está cada cosa vale es por eso que te voy a invitar a ser ordenado pero no porque sí sino porque realmente tiene un objetivo y es que luego te resulte más cómodo seguir trabajando en el proyecto bueno pues a todo esto nos habíamos quedado con el personaje y dentro del personaje nos habíamos quedado con la creación de una propiedad que es estado animación vale lo podemos llamar como queramos vamos a llamarlo estado por cierto luego creamos una barrita de energía pero bueno un momento vamos a crear estado voy a crear estado ánimo por que igualará luego creamos algún estado para una otra cosa entonces ahora no te preocupes por el error ya te digo es como si no estuviera digo this punto ánimo de punto estado ánimo es igual a cero ya sabemos que van a haber ocho estados empezando por el cero acabando en el siete no hay nada que diga que tengo que empezar de cero podría empezar en el 1 y acabará el 8 pero bueno ya sabes en programación pues en la gran mayoría de lenguajes se suele empezar en el 0 y no por una cuestión de costumbre más que nada y ahora vengo por aquí y digo vamos a ver y luego this punto estado anning + + y entonces digo si this punto estado ánimo es mayor que 7 en ese caso lo que va a ocurrir es que vista punto estado ánimo es igual a cero lo que va a hacer el programa es que le va a ir sumando le va a ir sumando le va a ir sumando y cuando llegue a 8 vuelve a 0 y cuando vuelve a 0 le va sumando le vaya sumando le va es un hambre y cuando vuelve a 8 lo vuelve a 0 vale de esa forma vamos a hacer una rueda y yo voy a utilizar ese parámetro ese estado ánimo para que ahora en el bucle pensara por qué tengo que hacer aquí es ir eligiendo el archivo javascript en el que quiero elegir según el qué parte vaya aquí donde tenemos cero acuérdate que el cero es la equis el este cero es la equis este cero isla y la equis era en la animación y la y era el ángulo de atrás mágico así que vengo por aquí y digo array personajes de i y punto estado ánimo era estado ánimo verdad y es que tengo ese problema vale que generalmente yo creo las estas yo creo las 256 las propiedades logró me acuerdo cómo se llama la propiedad que acabó de crear pero no ya verás como una especie de alzheimer rápido así que ahora vengo por aquí y si todo va bien vas a ver como los personajes están andando están caminando hacen no sé si me parece que hacen un pequeño extraño para iluminar hemos también el pequeño extraño se puede averiguar si me voy a bucle y le pongo por ejemplo 330 y le bajó la velocidad así es ves que no sé por qué pero sí sé es que el sprite está mal a ver si el sprite está mal es lo que menos me preocupa vale porque es una cuestión de denver pero si el sprite está mal el sprite está mal porque fíjate que al final de la primera línea black le mete el que no toca vale pero ya te digo no te preocupes en absoluto ahora luego voy a volver a sacar el personaje desde vender y ya está vale eso es vale luego hay otra cosa y es que si te fijas todos los personajes están caminando exactamente al mismo ritmo si te fijas en las manos y en los pies todos están caminando el mismo ritmo y eso no me gusta no me mola entonces eso se puede cambiar una forma muy fácil que es que dentro del personaje cuando yo vengo por aquí y le digo dónde estás aquí le digo dice estando anime es igual a cero pues le digo que no esto es más punto flor esa que puede ser contando con rounds a poder con flor y le digo x 7 vamos a verlo entonces esto lo que va a hacer es que ahora cada personaje va a nacer con una animación diferente y por tanto ahora si te das cuenta pues cada uno de ellos vale tiene su propio estado esto como te decía en la clase anterior es la ventaja de trabajar con clases la ventaja de trabajar con orientación a objetos ya que en otros tipos de programas no suelo utilizar tan asiduamente los objetos pero en programación de videojuegos trabajar con objetos es algo que realmente vale muchísimo la pena y eso lo que hace es que si yo le aplico por ejemplo un cambio a un personaje automáticamente se aplica al resto de personajes de igual que tenga 50 de igual que tenga asciende igual que tenga 2000 personajes porque automáticamente se les aplica bien ya tengo la animación del personaje ahora lo que quiero tener es el ángulo y el ángulo lo que hace es que fíjate que de igual hacia donde se estén moviendo voy a devolver un bucle va a devolver el ritmo original vale a veces da igualación de estén moviendo porque fíjate que es como que caminan hacia la derecha eso es porque tengo que cambiar tengo que controlar lo que estamos viendo dentro de aquí dentro de la y vale ahora vamos a ver ahora hay que sincronizar igual lo hacemos un poco a prueba error pero bueno no pasa nada vamos a verlo un segundo y ahora te lo digo personaje aquí está para tenemos cuatro direcciones entonces tenemos la dirección 0 la dirección de aquí la dirección 1 la dirección 2 y la dirección 3 a que corresponde cada uno de ellos sinceramente no lo sé ahora mismo entonces vamos a verlo uno de ellos corresponderá a este de aquí otro de ellos a este de aquí otro de ellos este de aquí y otro de ellos a este de aquí una cosa que tengo que decirte es que he preparado un sprite sit que como veis tiene ocho ángulos del personaje aunque nuestro juego tiene cuatro pero tiene ángulo cuatro ángulos baleares no pasa nada eso quiere decir que voy a usar cuatro tiras en lugar de las ocho y luego ya veremos cuando usamos las ocho vale pero no es ningún problema como suele decirse como dice el chiste más vale que sobre que falte vale entonces ahora como te digo lo que voy a hacer es lo siguiente vamos a ver me voy a bucle switch personajes a raíz de personajes de iu punto dirección y entonces digo en caso de que sea uno en este caso voy a hacer algo y luego hombre que es decir la clásica estructura switch vamos a sangrar lo correctamente esto no es posible esto va aquí no puedo meter un switch dentro de una llamada a un método que es 1 voy a poner y temporal y entonces digo y temporal es igual a cero vamos a verlo ya te digo que no lo sé si va a funcionar bien para lo corregiremos qué es 234 vale esto es 1024 y 1024 512 y entonces pongo aquí y aquí pongo y temp y ya está vamos a ver qué ocurre no creo que haya ser toda la primera es muy difícil saber momento no tiene nada de hecho vale en la consola no hay nada claro vamos a ver lo voy a poner aquí cero vale con ceros y voy a poner ya ves vale creo que es porque estoy pasando números enteros y aquí en el switch o lo estoy capturando como strange entonces no da correcto pues si está un poco vale no me está cogiendo los casos y ten y tem ahora había puesto yen sigue sin funcionar vale ok no da error voy a decir igual a 0 y el problema es que este switch no está entrando este switch no está entrando vamos a comprobar si es la dirección de dirección correcto así que voy a hacerlo con es igual a 1 en ese caso y luego acuérdate de 1536 que a mí se me olvidará era en que empieza a empezar a cero es obsceno pero 2 y 3 pero 512 mil 24 y quiero recordar que era en puede ser o qué guardo recargo vale pero una vez más no está entrando una vez más no está entrando porque todos los personajes caminan hacia el mismo sitio y si caminos perdón quiero decir que tiene la misma orientación de la cabeza fíjate en la cabeza y eso quiere decir que se ha quedado aquí con esto en blanco asiste y tem vamos a asegurarnos de que estamos usando la misma variable en todas partes vale vamos a ver estaba confundiendo la dirección con la dirección y eso me trick a la dirección isométrica es la que es 0 1 2 3 y la dirección es la que es 0 + punto pin más punto p por eso nunca funcionaba entonces me vuelvo al bucle y le digo dirección isométrica por cierto qué dirección isométrica la e debería llevar acento y bueno yo soy una persona que soy bastante ante acentos pero el nombre de las variables es recomendable no por el acento lo digo por un momento te lo preguntas pues que sepas eso si los personajes ahora mismo están girando y la primera cosa que veo que no me gusta digamos es que más que no me gusta es que no me cuadra es que los personajes no están denis o métrico en ningún caso es decir notificarles están hacia delante hacia detrás de izquierda o derecha me vengo aquí el finder me saco el personaje y digo claro es que la fila cero' 512.000 24 y 1536 tiene al personaje así vale no pasa entonces yo lo que voy a hacer ahora es decir que y tem más 256 vamos a por ello recargamos y ahora tenemos ya los personajes en isométrico ahora vamos a ver lo parecido al revés perdí van exactamente al revés o sea lo acertado pero al revés vale entonces bueno no pasa nada porque lo que vamos a hacer es cambiar los números a ver un momento no espera si es que me ha parecido que había alguno no están caminando revés vale vamos a ver entonces si están caminando al revés yo lo que puedo hacer es decir por ejemplo en personaje que pero más espero y le puedo decir por ejemplo en el mover aquí menos igual en lugar de que sume que reste vamos a recargar y ahora sí ahora ya los personajes pues van cada uno realmente como les corresponde vale ya tengo una serie de personajes animados que cada uno pues va a girar o haciendo toca ver esto es lo que te decía antes en cuanto a que una cosa es ver el personaje digamos él solito que ver un personaje él solito que es un cubo con un ojo pues que te diré yo me da un poco de grima pero ahora que los escribiendo todos juntos a la vez en la pantalla no sé me gustan más vale da la sensación que realmente esperaba a que iban a dar así que bueno vamos a continuar voy a hacer esto un poco pequeño para que pues el personaje esto quepa en la pantalla por cierto que esto es un juego que originalmente está pensado para que se juegue vamos a verlo aquí se juegue en una pantalla de 1920 x 1080 vale y luego lo colocaré un poco más arriba pero bueno ahora evidentemente como estamos digamos la fase de desarrollo pues lo que voy a hacer evidentemente es como te diría yo y trabajarlo con zoom ahora lo que quiero como te puedes imaginar es que los personajes pues no se salgan de la pantalla o no se salgan de la pantalla o que cuando se salgan por el escenario pues se caigan vale que es una de las condiciones de muerte que queremos implementar en este juego es decir generalmente en un juego y fíjate que hasta ahora hemos estado hablando sobre todo de programación vale pero ahora es cuando tenemos que empezar a hablar de lógica de videojuego entonces cuando hablamos de lógica de videojuego lo que llama gameplay tenemos que tener una condición de triunfo vale de ganar tenemos una condición de perder y tenemos condiciones positivas y condiciones negativas la de triunfo está claro es cuando consigo mi meta la de perder está claro es cuando pierdo el juego las condiciones positivas pueden ser ganar energía y las condiciones negativas en este caso pues nos van a quitar en el área para esto lo que voy a hacer en este caso es que en la parte de arriba de cada personaje voy a meter una pequeña barrita de vida entonces parece que tenemos un poco olvidada la instrucción fill rectángulo ayer empezamos trabajando con rectángulos fíjate que hoy fíjate en que se ha convertido lo que estábamos empezando ayer todos los rectángulos los hemos cambiado por imágenes y evidentemente así tiene que ser pero quiero demostrarte que el trabajar con imágenes y con formas básicas muchas veces nos va a ser de utilidad y esto lo vamos a hacer implementando por ejemplo una barra de energía dentro del personaje para ello en primer lugar le digo como te decía antes que aquí dentro de los parámetros voy a crear un parámetro de energía del personaje ahora el momento y ahora una vez que tengo la energía a continuación voy a hacer lo siguiente vamos a ver tengo el tiempo de nacimiento acordate que el tiempo era algo que cada personaje tenía el suyo propio y en la función de dibujar que está en el bucle aunque luego igual la cambiamos dentro del personaje ahora discutiremos de esto pero de momento está aquí entonces digo contexto punto feel style es igual a black contexto punto fil rect vamos a verlo pues personajes de x como personajes de y espérate que es la iso y la y por qué es isométrico muy bien y ahora un 10 los vamos a ver lo que sale si todo va bien ahora veremos unas barritas por encima del personaje perdón 256 no 128 centro 28 y en principio cada personaje debería tener allá arriba del personaje su propia barrita la barra ocupa todo el personaje igual es un poco innecesario entonces voy a hacer que esto sea la iso x 64 y que la barra ocupe 64 y así la barra ocupará un trocito del personaje no perdona 64 no 32 ok ahora como verás cada personaje tiene su barrita de vida y luego ahora a continuación voy a decirle qué contexto punto feel style es igual a green la barra de vida se suele hacer con verde como el personaje es rojo y gualda podríamos hacer con color rojo no lo sé da igual para luego siempre podemos cambiar esto vale eso es lo de menos entonces yo vengo por aquí y ahora digo lo siguiente contexto punto filtra ect esto es más 32 2 esto es más 2 y esto es 60 y esto es esto así que si todo va bien ahora verás una barrita verde dentro de la barra negra dentro de cada personaje y ahora lo que quiero por ejemplo simplemente para mover esta barra simplemente para comprobar que se mueve esa barra lo que quiero es decirle al personaje dentro del personaje por ejemplo pierde energía y entonces vengo aquí y le digo this punto energía igual a 1 y ahora vengo aquí le digo sí he estado a mi tiempo nacimiento porcentaje bien es igual a cero en ese caso pierde energía y pierde energía bueno esto no ok entonces si todo va bien si todo va bien si todavía ahora dentro de un momento perdon perdon que en este caso pierde energía cuánta energía tiene de inicio no sólo hemos dicho interesante entonces disputó energía es igual a 100 lo que le doy 100 de inicio entonces vengo por aquí vamos a verlo vengo a bucle y este 60 y lo multiplicó por disputó energía partido por 100 así que vamos a verlo despuntó energía array personajes de lobbies el 16 dentro del objeto si todo va bien en algún momento empezará a saber creo que se ha visto ya no exista y estás viendo como las barras se empiezan a perder energía no sé si ves como cada vez la barrita por la derecha es más negra vale entonces si va lento podría hacerlo más rápido pero eso hace que nuestros personajes en este caso los bots pues tengan ya digamos una condición de perder ellos pierdan energía por cierto que ahora que hablamos de todo esto llevamos un buen rato trabajando con personajes en epc pero claro probablemente queremos trabajar con nuestro personaje vale queremos trabajar ya con nuestro personaje protagonista así que vamos a crear el personaje protagonista vas a ver que de todas formas crear un personaje protagonista va a ser muy parecido a quedar los npc vamos a utilizar realmente la misma lógica vamos a por ello entonces por una parte si ya tenemos los personajes en epc ahora queremos el personaje principal esto quiere decir que en las condiciones iniciales lo primero que vamos a hacer es hacerlo más sencillo de todo va a ser el personaje pasarlo aquí por cierto qué imagen personaje uno voy a llamarlo imagen npc más bien igual npc1 voy a llamarlo imagen npc1 porque igual luego hay más n peces entonces ahora evidentemente en el bucle al dibujar imagen npc1 ok comprobamos que ese quien funcionando correctamente y seguimos trabajando bien ahora a continuación me voy a ir a condiciones iniciales y ahora sí la imagen personaje y va a ser el personaje verde muy bien ahora una vez que tenemos el personaje verde ahora a continuación lo que quiero hacer es trabajar digamos con sus propiedades en este caso con las propiedades del personaje verde dentro del bucle voy a dibujar vale técnicamente podría usar un objeto o podría no usarlo es decir que tengamos en cuenta que protagonista al final hay uno incluso aunque jugar en modo multijugador aunque jugará en red con otros jugadores pero al final en mi ordenador hay un protagonista que luego en otros ordenadores cada uno tendrá su protagonista eso quiere decir que técnicamente lo podría hacer a mano pero claro también es una pena que tengo toda la lógica desarrollada aquí del personaje es decir es una pena no utilizarla también es cierto que tengo por aquí una serie de cosas que realmente pues igual no voy a usar como la dirección aleatoria lo voy a crear de momento como variables y quizás para luego lo mueva dentro de un objeto entonces ahora vengo por aquí y digo propiedades protagonista bar os x es igual a cero bar post y es igual a cero por cierto que estoy sangrado pero por ningún motivo en concreto ahora y ya está realmente yo creo que ya está vale así que vengo por aquí y ahora dentro de lo que es el bucle una vez que he dibujado los personajes todo esto de aquí es para dibujar los personajes y luego también tenemos que como te digo siempre hay que ir eliminando saltos de línea que no valgan para nada más que nada para dejar con el código claro esto es de la raya no de la raíz uno a uno y ahora vamos con el personaje protagonista a ver momento donde tengo el micro configurado y micro configurado vale muy bien pues ahora lo que voy a hacer es contexto otro email aquí está imagen en el ps1 no esto va a ser imagen protagonista y ahora de acuerdo cómo se llama condiciones iniciales imagen personaje como te digo es que tiendo a olvidar mis propios nombres de variable esto vale no vamos a ver vale ahora hablamos del ángulo esto va a ser de momento cero esto va a ser pose x por seguir ya no esto va a ser post x esto va a ser posible ahora mismo no caigo por dónde está el 00 míralo ahí está vale entonces ahí de momento tenemos el personaje clavado vale ahora lo que quiero es que evidentemente pues el personaje tenga un ángulo y que el personaje digamos tenga una vida y tenga un todo de momento me voy a ir a condiciones iniciales bar estado animación es igual a 0 y en todo momento en el bucle ya empezamos con algo que no me hace mucha gracia estado animación más sí he estado animación es mayor que 7 en ese caso esta animación es igual a 0 ves esto es algo que ya no me hace mucha gracia porque mi mente empieza a decir esto tendría que estar en una clase y no directamente en el código del programa pero no más nada lo dejamos de momento ahí y más adelante siempre lo podemos mover a una clase y entonces ahora vengo por aquí y digo estado animación multiplicado así por 256 y tengo el personaje que se va moviendo ahora a continuación me voy a condiciones iniciales me voy a dar ángulo el ángulo es igual a 0 y ahora a continuación lo que voy a hacer es especificar le digamos al programa el movimiento del personaje para que lo veas claro primero voy a crear un movimiento econométrico en x y ya está y luego lo cambiaremos a isométrico vamos a verlo mal entonces acuérdate que en la clase anterior comenté que si te fijas todo lo que he hecho hasta ahora lo he hecho con javascript a palo seko pero para la gestión de eventos prefiero utilizar la librería de jquery libre de jquery no sólo se utiliza para gestionar eventos pero viene muy bien para gestionar eventos entonces me voy a jquery puntocom jquery o jay query como lo quieras decir morirás pronunciar me descargo el comprimido me lo descargo me lo guardo como vale y en videojuegos esto no es un archivo o sea si es un archivo js pero nuestro archivo js que creado yo es una librería entonces voy a crear una carpeta nueva llamada libre de librería y lo voy a guardar ahí dentro y eso quiere decir que yo a partir de ese momento me voy al archivo principal me cargo la librería y diego de la carpeta live quiero el archivo jquery 360 el que sea realmente y ahora eso quiere decir que ya tengo la librería cargada para el resto del proyecto y ahora dentro de inicio por ejemplo yo puedo aquí lo tenemos yo puedo empezar a llamar digamos a ciertas teclas cuando digo llamar a ciertas teclas lo que quiero decir es que para un videojuego tengo que pensar cuáles son los controles en este caso por ejemplo para este juego voy a usar w a ese de las típicas teclas y luego lo podemos cambiar ahora que decidamos esto no quiere decir que nos tengamos que dar con ello para siempre sino luego os puede cambiar siempre entonces ahora vengo por aquí y lo que voy a hacer es con jquery vamos a cogerlo por aquí y voy a con jquery el key 3 walker press o el que irá aún o lo que sea entonces cogemos el que brawn y con el que ir aun lo que vamos a hacer es atrapar al entonces que vengo por aquí y digo cuando sobre el documento punto que ayudaron y haga algo es decir cuando pulso una tecla entonces función y aquí es donde soy yo por ejemplo ahora hago con sole punto log vas a ver lo que está pasando si yo ahora vengo por aquí e inspeccionó recargamos entonces ahora toca una tecla debe traer la w y sale hay algo y nos dice en este caso vamos a ver nos dice por aquí no nos dice por aquí que w vale entonces si yo vengo por aquí digo if punto que por qué digo eh porque aquí puesto a esta misma es la que tiene que mirar como el java realmente es igual a w consuele punto love expulsado w una vez que he importado la librería jquery es cuando ves que aparece la sintaxis específica de jquery que en un primer momento te puede resultar un poco desconocida entonces el dólar es muy fácil de recordar cuál es su función dentro de jquery insisto en otros lenguajes que utilizan el dólar para otras cosas pero en este caso el dólar en jquery quiere decir selector osea quédate como que el dólar es una s vale y quiere decir selector entonces cuando yo encuentro dólar document sanz lo que seleccionó está dentro del paréntesis quiero decir que seleccionó el documento y sobre el documento voy a poner un evento voy a poner un escuchador lo voy a poner cualquier cosa voy a hacer cualquier cosa vale tal vez eso quiere decir selecciono el documento y luego el punto me indica el método que le voy a aplicar en este caso es que hay down entonces de lo que está diciendo es cuando sobre el documento pulso una tecla entonces ejecuta me esto que ves aquí vale ya te digo que jquery precisamente una de las cosas que tiene es que es uno de los frameworks predecibles cuando digo predecibles quiero decir que si aprendes la base ya puedes empezar a construir a partir de ahí vale entonces yo ahora vengo por aquí recargo y si todo va bien pulso la w y dice ha expulsado w pero si pulso las demás pues no ocurre nada vale eso quiere decir que ya puedo poner por aquí las teclas w s a b y por tanto y ahora vengo por aquí y digo esto es post y - - - creo que es pose y vale ahora claro si es que va al revés ya sabes que vale entonces luego la esposa x menos y luego la clave es pos x + + si hacemos esto recargamos y ahora empiezo a mover y vemos como el personaje se va vamos a verlo vemos como el personaje se va podría darle más caña es decir podría venir por aquí y aquí donde pongo condiciones iniciales voy a decir la velocidad es igual a 10 y por tanto en el inicio efe ciudad más velocidad y más velocidad si todavía bien recargo y yo tenemos y ahora vemos cómo el personaje empieza a caminar hay una cosa extraña hay una cosa que me está extrañando bastante ah vale claro digo no ya la dirección sí que evidentemente no he cambiado la dirección pero lo que me estaba empezando a extrañar era simplemente que yo no le había dado fíjate que le estoy dando x y lo está haciendo en isométrico y no recordaba haberle dicho yo que lo hicieran isométrico pero claro como he copiado y pegado sí qué lo estoy haciendo en isométrico vale así que si bien y ahora evidentemente pues tenemos que cambiar también la dirección tenemos que poner también la dirección así que vengo por aquí me voy a condiciones iniciales ángulo realmente más que dirección porque no es lo mismo para este caso ángulo es igual a cero así que dentro de inicio esto es ángulo es igual a cero voy a hacer marcos o voy a hacer ángulo es igual a 512 bueno estoy usando correctamente pero no pasa nada y ángulo es igual a 1536 y por tanto yo la vengo por aquí y en el bucle en la y le digo ángulo no sé si está bien no pero vamos pero casi así que ángulo más 256 así haber hecho ahí sí que va al revés es curioso y también va al revés la w es la s la w es la s eso quiere decir que esto será cero es realmente es que tampoco tiene por qué vale es ahora va correcta a ver me lo voy a apuntar que si no es una vida clave es la paz la es la s es la ve y la w va bien entonces ahora vengo por aquí el ave es la 1536 la isla s en el 24 la s es la de 0 entonces la ve la vez es hola es 1024 la s es 0 y la w va bien recargamos y bueno estaba bien a ver que recargue de nuevo esto le guardado esa es la única que si funciona exactamente igual mira sabes que me refiero a todas pero esla no la bueno no bueno es que depende como lo juegues claro si al convertir sea yo lo que estoy haciendo lo que quiero es que sabes cuándo pulso la valla hacia allá eso es como izquierda digamos pero si es como lo mire que también está bien como lo estás diciendo entonces doble s entonces esto es la a como la es cero al haber 512 ok esto es la w 512 al haber 1024 esto es la ve la b es 1024 y por tanto por descarte la de 6 mil 536 entonces w 512 s la 0 y la vez 1024 si todo ha ido bien ahora recargo y tengo ya que el personaje se empieza a mover como quiero ahora sí ok vale ahora hablaremos un momento lo de qué lo de que haga el este que estábamos viendo a su momento vale eso será meternos en blender pero más que nada para que lo veamos mejor pero por lo menos ya tengo el personaje que se mueve correctamente aparte de que el personaje es verde eso ya en sí lo diferencia del resto generalmente es otra forma de distinguir lo es dibujando un pequeño círculo vale esto ya como te digo es algo más personal entonces aprovecho por tanto para enseñarte la fórmula vale para dibujar un arco vamos a ver cómo mira vengo por aquí y html5 canvas elipse vale ahora lo que quiero es que los personajes estén dentro de los límites que estábamos hablando el otro día fíjate que en este caso pues ahora mismo los personajes no ven team ahora mismo los personajes tienen una equis y vamos a verlo de hecho morentín pero yo lo que quiero es que se me queden dentro de este espacio lo que voy a empezar a hacer es jugar este juego al tamaño original al que estaré jugando entonces para eso voy a maximizar lo voy a ponerlo al cien por cien y así pues un poco vamos a ir viendo el tamaño real bien en este caso estoy jugando el juego al tamaño real digamos lo que voy a hacer también es que voy a el gimp y ante este escenario voy a subir un poco el escenario una cosa así más o menos vale ahora a continuación lo voy a exportar como fondo 2 por aquello de que no me gusta eliminar cosas exportamos en el juego original vamos a ver vemos esto por aquí tenemos esto por aquí vamos en el código en las condiciones iniciales decirle que queremos no perdonar en estilo que queremos fondo 2 y así al recargar pues vemos como ya no sale el juego por aquí bien como te digo el principal problema que tenemos en este caso es que pero la las coordenadas no coinciden con las del personaje es decir acuérdate que tenemos dentro del personaje la función de colisión y pues la equis y la y según el navegador pero claro no es según el navegador sino según la proyección isométrica entonces en este caso lo que tenemos que hacer es lo siguiente vamos a verlo vamos a pasar esto por aquí esta condición de colisión la voy a pasar a varias líneas y entonces bueno esto estaba en anchura navegador ahora vamos a poner un poco pues las condiciones del terreno para ello voy a decir terreno x1 es igual a 0 de aumento terreno x 2 y 1 perdón es igual a 0 con sumar delante y ahora perrone x2 y terreno y 2 es igual pues 12 a 200 y 200 esto quiere decir que y ahora vengo aquí al personaje y digo nos vamos a ver si dices es terreno x2 terreno x1 perdón no pero no x2 terreno x1 terreno x muy perdida 0 y 2 y tm y 1 vale y yo ahora cuando creó al personaje vamos a verlo cuando creó el personaje le digo que el personaje tiene que ser creado entre la equis ley griega y la equis la y eso quiere decir que esto de aquí es más punto random por anchura navegador esto es por terreno x2 menos terreno x1 esa es la cuestión vamos a verlo un momento esto ha multiplicado más terreno x1 y esto mismo para la y eso qué quiere decir pues es lo que quiere decir por ejemplo vamos a comprobarlo vamos a demostrarlo es que yo voy a hacer una ventanita de 20 píxeles y si todo va bien ahora todos los personajes vamos a comprobar que no haya dado error sí pero donde he puesto yo aquí en personaje un personaje cometido un error cuidado con este doble multiplicación y dónde que reine en la línea 47 de personaje aquí y esto vale muy bien fíjate que ahora están todos allí en un pequeño cuadradito vale ahí lo tenemos vale de momento ok de momento hemos controlado la creación ferran a cristo terreno que es uno vale no sé por qué se me están saliendo porque yo he hecho lo que quiero es crearlos allí dentro es decir quiero que las condiciones iniciales esto sea por ejemplo 200 y 220 quiero cuadrar los hay el medio no muy bien sino porque aún así a ver esto es mil y estos 1.500 bueno nos vamos acercando valen estos 800 y estos 1200 venga vale y ahora pues lo mismo esto es 1200 y esto es 800 esto es al revés hola 800 la cuestión está en qué 1200 debería ser la x 2 voy a poner aquí 400 800 1600 se me van a ir para otra parte no sabía y otros tiempos y poco a poco los vamos moviendo al terreno le falta poco vamos a verlos es la x pues de 400 a 1200 2000 no lo sé creo que no bueno me valdría 1400 y luego no porque se me salen por el otro lado pero y luego de 200 a 1000 no nuestro de menos 200 a 600 eso ya empieza para hacer un poquito más vale incluso lo que puedo hacer es que se caigan por el acantilado ya está es decir que se caigan digamos en z y ya está tengo ya hay un tablero quiero comprobar sí si rebotan o qué a juraría que sí perfecto quiero comprobar si rebota no es que cada uno se está yendo realmente de su rollo si ya ha desaparecido un nuevo reto vale lo que puedo hacer son dos cosas para ver esto mejor tenemos varios tipos de herramientas uno de ellos es que al haber trabajado con personajes yo puedo desactivar lo de que cada poco tiempo vamos a ver aquí lo de que cada poco tiempo cambio de dirección de hecho sabes qué cambia dirección es decir eso podría estar en un método aparte estoy aquí no meter un método aparte lo pongo como cambia de dirección y de momento se queda quieto cambia dirección y luego aquí en el bucle lo que voy a hacer es que voy a poner el tiempo a cero para que el programa vaya rapidísimo y por tanto yo puedo a ver qué está pasando y efectivamente se me están escapando entonces ahora lo pongo a 33 y si están escapando es porque no está funcionando el colisionador entonces nos iremos al personaje collection es mayor que x2 menor que es 1 a ver mayor que terreno hay creados y menor que terreno iré a uno ahora sí vamos a ver vamos a lo de nuevo he desactivado la rapidez no tengo muy claros en este caso sí vale correcto no es ahí pero exacto como que se han quedado formando en el borde vale ahora sí que puedo saber por lo menos que se van a quedar correctamente en el sitio oye por cierto que sería un buen momento ahora que hemos hecho unas cuantas cosas hemos pedido unos cuantos gráficos y los gráficos son reales y todo eso para hacer un análisis de rendimiento como lo hicimos ayer así llegamos ayer a performance vamos a aumentar esto no creo que esté gastando muchos megas pero vamos a comprobarlo vamos a ver si es cierto la razón por la que no creo que esté dando muchos megas atrás gracias por hablar de eso porque ahora también me da pie para contarte otras cosas pero es porque los sprays realmente están bastante optimizados pero vamos a verlo vamos a guardar vamos a grabar si el nombre de la hoja de sprays sprite sit piensa hoja de spray después spicy no tiene mucho misterio y verás vamos a ver no espero que estemos gastando mucha memoria porque tampoco estamos usando muchos recursos mientras estaba sacando la gráfica mira allá arriba y la gráfica fíjate que de procesador vamos bien y eso que hay que tener en cuenta varias cosas en primer lugar por cierto si estoy trabajando todavía 33 y porque esto va tan rápido vale ahora sí vale pues estoy trabajando con un procesador ahora mismo en este ordenador tengo cuatro pero sólo estoy usando un procesador y fíjate que aún así sobra un montón y luego por otra parte y luego por otra parte en cuanto a memoria fíjate que aquí lo tenemos aquí el hit está yendo de 14 megas que es esta línea de bajo hasta 2 con 8 megas que es esa línea de arriba o sea que 28 megabytes todavía estamos en tiempos vale todavía estamos en márgenes muy aceptables habrá alguna cosa que te quiero decir y es que hay que tener en cuenta sin embargo que estamos trabajando para nuestro programa ahora mismo está cargando con personaje verde que ocupa 26 megas que no es moco de pavo que al final son 2,6 megas también te digo que esto es así porque el personaje verde tiene 2048 píxeles y esto quiere decir que si me acerco bereket que hay calidad cuando digo veré que hay calidad lo que te quiero decir es que si comparas el sprite con el juego que estamos jugando te darás cuenta de que lo estamos viendo de lejos ya podríamos ampliar el personaje y tendría calidad vale pero son 2,6 megas el fondo son 288 casas y ya está eso es lo único con lo que estamos cargando para nuestro juego ahora mismo en recursos gráficos está usando prácticamente 6 megas o si 6 megas para que te hagas la idea con lo cual no tenemos un gran problema de momento pero claro es que en un juego en cuanto empezamos a meterle cosas ahora a continuación una vez que este juego empiece a evolucionar empezaremos con los y sí los y si son y si le metemos no sé qué y si le metemos no sé cuántos y si en lugar de haber dos tipos de personaje hay cinco y si metemos recogí bless con vida y si metemos trampas pues evidentemente cada cosa que vamos metiendo pues es más memoria que vamos cargando vale lo cual no es malo quiero decir que si en este ordenador y fíjate quién es tornado en el que esté ahora mismo tengo muy poca memoria ram comparado con otros ordenadores pero espera que no lo puedes ver en momento un segundo no hay tampoco es aquí es tarde ahora mismo en el que estoy trabajando tiene 4gb de ram es una cantidad muy baja pero exacto el ordenador eso es vale pero son seis megas lo que ha gastado hasta ahora quiero decir que bueno entre 6 megas que ha gastado hasta ahora y digamos si tengo 4 gigas por 2 gb de memoria es la mitad de la energía del sistema pues tengo todavía y para jugar vale tengo todavía hay algo de margen entonces lo que te quiero decir es que recursos gráficos de un sistema hay que usar los que sean necesarios pero también siempre teniendo en cuenta un poco la carga del sistema teniendo un poco en cuenta qué es lo que el sistema de soporte le voy a hacer una cosa voy a en este caso hacer una pequeña micro pausa y esta micro pausa la voy a utilizar para arreglar el cabezazo ese que pegan los personajes también lo pega el personaje el bueno digamos y así un poco vas a ver cómo está hecho este personaje vale vas a ver cómo es un personaje 3d pero al final está volcado a dos de podemos a por ello vamos a cerrar esto hacer momento el navegador voy a hacer un momento el sprite shit valen voy a cerrar un momento a salgo de aquí bebé y blender vender es un programa exigente digamos cierro el bracket luego lo volveré a abrir y ahora voy a abrir bloomberg y verás yo lo que he hecho es un personaje que tengo animado que es este personaje de aquí es un personaje que tiene un ciclo de animación un ciclo de caminado muy clásico en videojuegos hace esto lo que hace es cambiar y luego lo que he hecho es crear una cámara que es esta de aquí es una cámara animada que le va pegando vueltas al personaje en la cámara lo que va haciendo es tomar diferentes ángulos del personaje bueno en este caso esta cámara genera una serie de sprites vamos a verlos generar aquí en escritorio me junta general esta serie de sprites que vamos a ver el problema es que empieza en el fotograma que ya él llama 01 vale y llega vamos a ver hasta el 0 8 y el 0 8 es cuando cambia al siguiente vale con lo cual yo lo que tengo que hacer es toda esta animación y moverla un fotograma hacia la derecha con cuidado un fotograma hacia la derecha y simplemente haciendo eso voy a corregir pues lo que antes me ha salido mal es simplemente lo que voy a hacer ahora eso sí es que voy a eliminar estos fotogramas guardo el proyecto miro qué es lo que ve la cámara y me voy a ir a render animation como te digo yo estoy trabajando con un programa 3d pero el programa 3d para volcar este personaje a un videojuego 2d pues lo que tiene que hacer es convertirlo a una imagen 2d si te fijas verás como ahora poco a medida que el programa vaya calculando pues va a generar nuevas imágenes esto lo que hace evidentemente es que a mí ahora mismo me da bastante igual el diseño del personaje sandra igual si tiene varios ojos me da igual qué colores tenga me da igual todo porque como ahora vas a poder comprobar a continuación yo simplemente estoy renderizando el personaje ahora a continuación le pegaré un cambiazo y en la programación del videojuego ni se va a enterar es decir va a acoger a los nuevos fotogramas y no va a haber ningún problema desde el punto de vista de programación y lo que veremos es que el personaje ya no pegará a ese cabezazo vale entonces como te digo yo una vez lo repito una vez más porque quien ha desarrollado varios tipos de juegos lo sabe perfectamente pero quien no pues no quiero que entiendas que lo que te estoy diciendo es que esta es la única forma de desarrollar juegos vale lo que te estoy diciendo es que esta es una forma de desarrollar juegos y luego como te digo una es por ejemplo el en éste el class of plants creo que ayer te dije clash of plants y te quería decir clash royale pero bueno 3 el clash of land es un juego que está hecho así es un juego 2d pero los gráficos son 3d al estamentos con un programa 3d pero luego están renderizados vale y luego hay otra filosofía hay otra metodología que es pixel art eres el pixel art es exacto es pintar juegos cuyo objetivo es que parezcan 2d es decir que parezcan juegos como hechos en los años 80 yo no te digo ni que sea mejor ni que sea peor sino que los resultados estéticos son diferentes y cada uno pues tiene que buscar el tipo de juego que más le acomode e incluso yo estoy usando un programa 3d para sacar un sprite que al final tiene un aspecto de 3d pero incluso se puede utilizar un programa 3d para sacar un aspecto 2d ya que las combinaciones son infinitas vale y como ya te digo déjame ver si tengo algún otro ejemplo de juego para próximas sesiones por ejemplo mira por ejemplo este es un ejemplo de un juego hecho por mí en formato plataformas por ejemplo este no es un disparaba con la no me acuerdo al aire sí exacto de hecho es que ahora mismo tengo que mirar las teclas que no será la equis pero este es un juego que además de ser de plataformas ahora esos dichos disparan y todo eso además antes de ser de plataformas es de terreno modificable con lo cual efectivamente está inspirado en el terrario en el sentido de que ese terreno no es inamovible sino que tú lo puedes ir ahora dando y puede decir crear nuevo terreno y puedes quitarlo vale entonces simplemente para que veas que no todas la estética de los juegos tiene que ser porque exactamente igual vale sino que se puede jugar con diferentes estéticas y no pasa nada ahora mismo pues estamos un poco atrapados como te puedes imaginar en la representación es que fíjate que el rato que ha pasado y hemos generado todavía 28 fotogramas y nos quedan por generar los 64 fotogramas del personaje rojo vale entonces aquí pues vamos a tener que hacer un poco como tendría yo una pausa no sé si quieres tomarte 5 10 minutos para merendar o lo que sea más que nada porque ahora tenemos que esperar a que acabe blend verde de renderizar vale el verde ya está entonces lo que voy a hacer ahora es que me voy a estos sprites y me los voy a llevar a la carpeta ht docs a útil a img los voy a pegar ahí y ahora bien el trap y ahora mientras hacemos esto como el personaje rojo no la cámara ay vale mejor asegurar que todo esté bien guardo render y animación ahora el personaje rojo y mientras tanto la cámara no cambiando sólo unos lo cambia a otro como realmente son el mismo sabes entonces no tengo por aquí me voy a útil recargo un par de veces hasta que coja la imagen ahí lo tenemos y si todo va bien vamos a comprobar como ya no sé ya no se cuelga digamos el último fotograma de cada línea sino que vemos como corresponde le doy a guardar la imagen no tengo 8 igual tengo las mismas ahora verás este es el personaje verde fíjate que tengo 1 2 3 4 5 6 7 8 y filas tengo 1 2 3 4 y abajo 5 6 7 8 si todo está bien lo único es que se había corrido todo un personaje yo hacia la derecha pero no he cambiado el número de personajes que tengo usa lo único que he hecho es mover el fotograma 1 hacia adelante y eso lo que ha hecho es corregir todo el desfase y entonces ahora nos vamos a escritorio nos vamos a rendir y es posible que rápidas no el verde pero si yo lo había borrado bueno vale por lo menos está reemplazando vale ok venga pues el momento vemos cómo está reemplazando el verde por el rojo al momento haremos lo mismo con la hoja de sprite del personaje verde incluso si queremos podemos probarlo ya en el juego más que nada para ver cómo el personaje verde el caminara bien a ver que recargue sí no sé si da la impresión de que es un cabezazo bueno pues ahora que tenemos esto ahora me voy a copiar todos estos renders dentro de la carpeta de box dentro de la carpeta de útil los pego quiero reemplazar vale y entonces ahora cargo útil más que nada con el objetivo de generar el sprite lo guardo como personaje rojo y vamos allá llegamos al videojuego voy a ir cerrando pestañas voy a ir cerrando blender también que es un programa que gasta bastante recargamos bien ahora es algo que me extraña estoy recargando intentando vaciar la caché me extraña que ahora haga extraños bueno me estoy fijando en ese personaje y ese personaje va bien pero sin embargo en otros movimientos de repente se un extraño hay algunos donde se lleva bien y otros que no de hecho ahora al ver el verde vamos a ver y ese va bien es curioso vamos a ver el sprite videojuegos personaje rojo alba sí bueno estar mal pero si estaba bien vamos a ver y los hemos sacado y los he machacado a la beca útil para el fíjate que no están ahí bien guardo yo pero igual es que no estoy guardando en la carpeta correcta pues parece que sí personaje rojo reemplazar me voy al personaje rojo fíjate no se reemplaza vale muy bien pues los eliminó el verde no lo tenía que haber eliminado el mismo solo el rojo me guardo el rojo no estaba guardando en la carpeta que no tocaba dentro de imagen y ahora por tanto claro que tengo hay un personaje verde ahora sí y este personaje irá aquí no las ojeras reemplazar el personaje rojo ir a la papelera y ahora recargamos el juego sí fíjate que ya no pegan que a veces raros y por tanto ahora el movimiento es mucho más suave vale esto que está ocurriendo si te fijas es porque verás es porque cuando yo hago más estrecho el canvas el programa no sabe qué proporción tiene que tener el escenario entonces hay un truco para esto que es decirle al sistema donde estás aquí brackets voy a ver brackets entonces una vez más como te decía antes eso es una gestión de eventos y la gestión de eventos es cuando la ventana cambie vale entonces lo que vamos a hacer en este caso momento agua sí ahora aquí hago esto grande esto fuera me voy al código y entonces el inicio porque es un evento de inicio lo que hago es que seleccionó a la ventana es decir cuando la ventana haga algo que es punto change que es cuando la ventana cambie así de sencillo y entonces lo que hago es ejecutar lo que en javascript se llama una función anónima que es una función metida dentro de el parámetro y ahora lo que voy a hacer básicamente es lo mismo que en condiciones iniciales que es copiar esto de aquí copio esto correcto siempre que en jquery veas un dólar básicamente lo que quiere decir es selección o lo que venga después y lo que venga después en este caso es windows dollar window wheel seleccionó la ventana y entonces a la ventana le pongo un escuchador que es un escuchador change y es cuando la ventana cambie haz esto que te voy a decir y entonces esto que acabo de hacer lo que hace es que cuando iniciamos el programa le da unas propiedades iniciales de anchura y de altura pero cuando se produce algún cambio en la dimensión de la ventana pues lo que hacemos en este caso es actualizar esas propiedades así que guardo recargo y ahora fíjate qué ahora algo así vale voy a hacer control mayúsculas r para ver si es que no se están actualizando enferme acoso en el change voy a decir con sole punto log aunque y redimensionando para saber qué exactamente estás haciendo algo rogózin no lo está cogiendo voy a recargar borrando la caché cambio la ventana ok vamos a ver qué puede ser vale no es el método change si no es el método risa es el método que se usa en formularios es risa es nos vemos así y hacemos así vale y ahora vamos a comprobar como si yo rescato la ventana los personajes no se deforman sino que siguen ahí sin ningún problema en su sitio vale y vemos como mi personaje pues también empieza a caminar mi personaje tiene un problema y es que si nos damos cuenta cuando yo hago clic en primer lugar da un paso y luego empieza a correr da un paso y luego empieza a correr da un paso y luego empieza a correr entonces esto es característico de los sistemas de eventos basados en javascript que lo que hacen es detectar la pulsación de la tecla y luego de la tecla ha sido sea contiene una pulsada entonces para modificar esto y ahora por último en la última parte de la clase de hoy nos dedicaremos a ir comentando código que no hemos comentado prácticamente nada entonces por ejemplo tenemos esto y no sabemos si el día de mañana nos acordaremos de que hacía esto lo que voy a hacer ahora es que dentro de aquí entre las condiciones iniciales voy a poner por ejemplo dirección entonces lo vamos a ver me voy a condiciones iniciales digo dirección es igual a 0 y ahora el inicio y ahora esto mismo document que app lo que va a hacer es decir a ver un momento que esto me lo copié como chuleta porque voy a necesitar ángulo es igual a 512 no dirección es igual pero dirección perdón 1 2 dirección es igual a 3 dirección es igual a 4 vale y ahora dirección es igual a 0 esto qué es lo que hace cuando pulsó la tecla activa las direcciones y cuando suelto la tecla la dirección se vuelve 0 o sea ninguna dirección y ahora en el bucle lo que hago es decirle efe dirección es igual a 1 en ese caso va a pasar algo lo que va a pasar esta chuleta me la llevo lo que va a pasar es esto si dirección es igual a 2 de hecho y esta tontería que estoy haciendo ahora verás que va a hacer que el personaje se mueva de un modo mucho más fluido esto aquí texto aquí esto lo podemos borrar y si todo ha ido bien vamos a probarlo ahora mueva al personaje y nos recibirás que ya no hace ese paso inicial que se mueve un poco rápido eso es lo de menos cuando digo que es lo de menos quiero decir que nos vamos a condiciones iniciales en la velocidad se lo cambió a algo estaba 10 0,2 demasiado poco 5 eso ya es consentir jugando ale con lo cual en próximas sesiones lo que vamos a hacer es pues que los personajes reconozcan al personaje bueno que vayan a por él detectaremos el contacto haremos que cuando un personaje malo toca el personaje bueno en este caso pierda energía el personaje bueno tendrá que buscar algo en este laberinto y tendrá que ir a por ello vale a temer haremos que cuando se meten por detrás que represente correctamente quien está por detrás y quién está por delante que ahora mismo si te fijas lo que está representando vale y como ves pues cada día vamos a ir avanzando un poquito más en el juego para eso para que tenga cada día más sentido y más finalidad está claro de los tres clases pues ahora hemos hecho el juego completo vamos a comentar un poco el código vamos a comentar un poco el código por qué eso como te decía antes de acabar vamos a ir comentando cosas dentro del código vale aquí introducimos las coordenadas mínimas y máximas del terreno en el cual se van a mover los npc no sé si copiado y pegado no vale el inicio este bloque de código define qué es lo que ocurre cuando el protagonista pulsa las teclas de dirección sweeting aunque luego me acaba de dejar de funcionar otra vez bueno esto ocurre muy bien para ti de expulsión las teclas de dirección y entonces aquí vengo y te digo cuando la ventana se re escala calculamos de nuevo las proporciones de los contenedores en base a la ventana ok personaje es que así como por ejemplo el inicio el código tiene una pinta solo del suelo de entrada ya dices vale parece que cada bloque tiene la definición de qué es lo que hace pues tenemos que hacer lo mismo vale entonces el movimiento del personaje vale el personaje va envejeciendo y luego esto actualiza la posición del personaje vale aquí indicamos que el personaje cambia de dirección no este comentario no está aquí este comentario tiene que ir aquí vale cambia dirección ahora bailan veamos actualizamos la el ángulo en rabia mes según leches según la nomenclatura de ángulos de 0 a 3 vale ahora en cuanto al estado de animación va cambiando de estado de animación para caminar y pierde energía pues pierde energía igualmente tendría que ser pierde energía no tenemos ok pues cada 100 segundos del personaje pierde un punto de energía y calcula las colisiones para allá poquito a poquito pues este código empieza a tener un poquito más de mejor pinta colisiona realmente tampoco mucho es lo que hace y dije energía pues tampoco voy a comentar que le quitó un punto quiero decir que no es necesario porque creo que eso se entiende solo aquí sí que en el constructor le podría poner le proporcionó unos valores de inicio la instancia y yo creo que más o menos ya lo empezamos a tener cargamos las imágenes vamos a agrupar comentarios introduzco la lista de los personajes correcto producciones protagonista coordenadas mínimas para los globos a todo el programa bien vale entonces la idea es dejarnos el código de una forma que si no lo tocamos hasta la clase de mañana pues cuando lo toquemos nos enteremos de qué está ocurriendo por ejemplo aquí los otros elementos de la rai vale muy bien entonces muevo el personaje dibujo al personaje ahora dibujo la barra de energía y ahora vamos con el personaje protagonista y esta es la garra de gracia si quieres incluso lo que se puede hacer este pongo por aquí una barra separadora y entonces en el personaje principal pongo otra barra separadora para que visualmente correcto para que visualmente podamos entender que desde aquí hasta aquí estoy trabajando con los npcs y de aquí hasta aquí estoy trabajando con el personaje principal para entonces todos son en definitiva estrategias eso entonces así cuando arranquemos de nuevo el código así cuando retomemos el código y cuando tengamos que hacer la siguiente parte del ejercicio pues no tendremos ningún miedo no tendremos ningún reparo sino que porque esto es un problema muy típico y muy característico de la programación es que cuando se empieza a complicar cada vez te apetece menos tocar el código porque cada vez se entiende menos entonces es importante hacer ese esfuerzo de que el código siga siendo entendible para que cuando digamos oye quiero hacer que el personaje suba a que de personajes se mueran ese personaje no sé qué pues siempre el código esté ordenado de una forma que nos apetezca meter mano dentro del código y sepamos dónde tenemos que tocar para conseguir hacer lo que queramos