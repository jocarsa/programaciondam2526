vamos a empezar a continuación con la parte del desarrollo de cliente Así que para la parte del desarrollo de cliente vamos a crear dos carpetas en lugar de una 005 voy a crear una carpeta llamada Api donde en esta carpeta es donde voy a guardar todo aquello que ocurra aquí es decir fundamentalmente lo que voy a desarrollar es esta parte de aquí pero esta parte de aquí necesitará una mínima conexión con el servidor desde luego no una conexión tan masiva como cuando php está embebido o cuando php lanza directamente html este caso no va a ser ese este caso no va a ser así pero sí que necesito una pequeña parte programada en este caso eh php Pero puede ser no de js puede ser eh punto n puede ser Java puede ser Eh python puede ser lo que quiera puede ser lo que se quiera en este caso lo voy a hacer con php entonces eh una vez que tengo esto Pues a partir de aquí lo que necesito vamos a verlo es eh A ver un segundin vamos a ver voy a cerrar todo y vamos a por ello Vale pues voy a crear como decía por una parte la carpeta Api y luego por otra parte voy a crear la carpeta cliente donde en la carpeta cliente pues crearé una subcarpeta llamada 001 proyecto y eh Y vamos a ver y estructura vale dentro de estructura voy a crear un archivo Index html el hecho de que sea un archivo html en sí mismo es una declaración de intenciones porque quiere decir que en ningún momento En ningún caso va a tener nada de php vale por tanto voy a hacer un doc type html voy a hacer una etiqueta vamos a mover un poco el micrófono html con lang es igual a s voy a hacer un Head voy a hacer un Body y voy a hacer eh Bueno aquí tendría que poner el título de la página pero el título de la página pues es algo que no tengo muy Oh muy acabado de pensar voy a poner ayuda y ya está de momento meta charset es igual a utf8 yo siempre para el naming he sido fatal Así como hay otras personas que lo primero que hacen al arrancar un proyecto es ponerle un nombre aún ni siquiera sin saber de qué va el proyecto pero a m me pasa todo lo contrario yo para el naming soy totalmente horrible entonces dentro del Body voy a crear un header voy a crear un Main y voy a crear un footer Pero esto va a ser únicamente para el Index html porque el Index html va a ser un documento totalmente estático es decir va a ser la página principal del proyecto va a ser la presentación Pero yo lo que quiero ahora es crear un nuevo archivo llamado preguntas html donde este archivo que por cierto va a heredar la estructura de preguntas o sea de Pues trabajar con el estilo básico vamos a verlo así que dentro del header voy a Bueno voy a poner h1 y voy a poner ayuda de momento y vamos a ver porque eso tiene que ser más una aplicación web que otra cosa así que aquí pongo ayuda y vamos allá vamos a ver vale local Host y proyecto vamos a cliente vamos a proyecto vamos a preguntas pun html bien y una vez que tengo esto vamos a poner un poco de estilo además en el Main dentro del Main Quiero poner pues por ejemplo qué quiero poner pues quiero poner un section y quiero poner Pues un aside por ejemplo vale Así que una vez que tengo esto ahora a continuación pues vamos a darle un poco de estilo vale vamos a por ello Así que eh vamos a ver proyecto Esto está aquí proyecto cliente y vamos un poco con la con el estilo Pero voy directamente con el estilo de las preguntas así que me vengo por aquí y vamos a crear una carpeta llamada css dentro de css voy a crear un archivo llamado preguntas css y en preguntas css Pues voy a hacer lo siguiente vamos a ver voy a hacer lo siguiente vamos a ver voy a decir que Body html es un background vamos a poner variables Root y voy a decir que fondo es rgb 220220 220 por lo tanto voy a decir que bar fondo y vamos a verlo recargo Pero cuidado porque ahora en preguntas html tengo que poner un link rel es igual a Style shit href es igual a css bar preguntas css vale vamos a ver Ok Ah creo que ya igual es que no lo estoy viendo pero creo que ya a ver pues no vamos a ver preguntas css background bar fondo Ah muy bien porque estoy en la versión 1 del proyecto vamos a la versión 2s del proyecto preguntas html ahora s bien y con esto ahora a continuación Pues voy a hacer lo siguiente voy a hacer que la parte de arriba tenga del 100% y un Border bottom de un Pixel solid rgb y voy a poner pues gris claro entonces Esto va a ser 250 y Esto va a ser bar gris claro Okay Vale y ahí lo tenemos también lo que voy a hacer es decirle al sistema que a todo le aplico un padding de Cero píxeles y un margin de cer píxeles Vale ahora mejor y por lo tanto y por lo tanto ahora vamos a verlo vale en la parte principal de la pantalla vamos a ver vamos a Index e a preguntas vale Y voy a poner un div ID o div Class contenedor Okay vale Así que aquí está la ayuda Okay Vale y el contenedor tendrá un wid de 10000 píxeles y un margin auto vamos a verlo recargamos vamos a ver qué pasa Ah vale Sí lo que pasa es que Ok voy a poner un margen de 800 píxeles porque para debugar pues no me cabe en la pantalla vale una cosa así bien Esto es la ayuda por cierto que en el body html voy a poner un font family de sans serif vale Y ahora a continuación Pues aquí dentro de lo que es el heer voy a poner e Pues un buscador Vale entonces aquí en preguntas aquí en el buscador voy a poner input type text y de buscador y vamos allá vamos a ver Ok bien a h1 le digo que heer h1 tenga un display in Line block Vale y por lo tanto aquí a heer h1 coma y header eh input inline display block y ahora a header input le voy a decir que pues tenga un padding de cer o cco píxeles vamos a verlo ahí perfecto vamos a ver qué más tengo input vale teóricamente es correcto vamos a decirle with de no sé 400 píxeles vale Y voy a decir que tenga un margin left de 20 píxeles y un margin bottom de 5 píxeles No lo sé para irlo cuadrando vale Bueno más o menos por ahí lo empezamos a tener ahora por aquí ahora luego por aquí pondremos un par de botones más pero de momento Quiero el buscador vale una vez que tengo esto ahora a continuación Este es el estilo del proyecto vamos a crear la estructura de la principal esto por aquí vamos a ver un momentín no a ver proyecto cliente estilo Vale pues Ahora digo estructura del cuerpo vale en la estructura del cuerpo aquí a continuación voy a poner lo siguiente voy a decir que todo esto va a estar también en un Deep Class contenedor vamos a por ello Entonces ahora vamos al proyecto 003 vamos al proyecto preguntas htm l vale Y entonces voy a decir lo siguiente en el css en preguntas voy a decir que Main nab va a tener un with de pues cuánto de no sé el 10% quizás no lo sé y un Border de un Border qué pues un Border write de un píxel solid eh solid gris claro y gris claro vale eh Box sizing Border boox y ya está vamos a verlo vale no se ve nada todavía porque probablemente vamos a verlo el Main no ocupa nada el body no ocupa nada el html no ocupa nada voy a decirle que H 100% le digo que Main tiene un High del 100% y por tanto el Main tiene un High del 100% también por lo tanto recargo así vale ahora ya vamos al Body vamos al Main esto es el contenedor bien Vamos a ver Main contenedor también tiene un High del 100% vale Y ahí ya tenemos Pues el elemento creo que igual es un poco pequeño pero bueno vamos a tirar un 20% No lo sé ahora veremos bien y a continuación una vez que tengo el Main na Pues voy a decir que luego tengo el mide voy a decir que esto es float left no sé por qué A ver float left Y esto es float left Y esto es Border left Así que recargamos vale Y por último tenemos el Main vamos a verlo tenemos el Main section que ocupará 6% no quiero que ningún Border vamos a verlo y ahí lo tenemos bien Entonces tenemos aquí la caja inicial vale una caja de navegación tenemos eh Por aquí el contenido principal y luego por aquí en la site vamos a tener información adicional bien esta es la estructura html estática que no depende de nadie es decir la estructura html que al final es así para siempre dentro de este archivo Y por último vamos a crear un footer vamos a aquí a crear un footer un pie de página Vale entonces vamos a ver así que foter y con el foter Pues voy a decir que background black color White voy a decir que with 100% H voy a poner 400 píxeles luego ya veremos queé metemos en el footer vamos a verlo proyecto pie de página preguntas pun html vale í abajo está el pie de página voy a poner min voy a poner píxeles y luego pues aquí dentro de lo que es el marcaje dentro del footer voy a poner también el Deep Class contenedor y aquí voy a poner de momento copyright 2023 José Vicente carratalá aunque técnicamente esto no va a llevar a ninguna parte porque más adelante lo que vamos a hacer es poner Aquí está Vale vamos a poner diferentes elementos de navegación dentro del footer Bueno pues una vez que tengo esto Una vez que tengo esto ya estoy en posición de empezar a pedir cosas cuando digo de empezar a pedir cosas quiero decir de empezar a hacer que en la búsqueda encuentre cosas aquí por cierto voy a hacer una cosa vamos a ver voy a decir que para alinear heer h1 a ver heeder h1 display block with 20% esto ya es otra cosa porque así Esto está más o menos centrado y cae justo aquí abajo y ahora aquí pondremos otras cosas tales como por ejemplo el inicio de sesión Vale pues una vez que tenemos esto ahora a continuación llega el momento de empezar a escribir javascript porque en la parte de programación en el lado del cliente la parte de javascript cumple una misión muy importante que es la siguiente vamos a decir que eh proyecto vale cargar preguntas al arrancar si yo no pido nada si yo no digo nada esto quiere decir cargo preguntas al arrancar preguntas punto html Y eso quiere decir que cuando yo cargo lo primero que quiero hacer es cargar preguntas en la pantalla pero claro cargar preguntas en la pantalla implica realizar una petición asincrónica conectarse a una Api obtener las preguntas y volcar aquí en la pantalla Así que vamos a por esta tarea que eh la primera vez que la vamos a hacer va a ser ardua pero luego realmente va a ser en gran medida copiar y pegar vamos a hacerlo así que vamos a por aquí vamos por aquí voy a crear una carpeta llamada js y dentro de preguntas voy a crear un Script src js bar preguntas js y evidentemente en js voy a crear una nueva carpeta no voy a crear un nuevo archivo llamado preguntas js y en preguntas js y ahora voy a intentar mantener el código lo más sencillo posible y esto a veces en javascript no es demasiado fácil window onload voy a decir que es una función donde en la función voy a decir que Cuando cargue la ventana eh va a hacer fetch vale Y ahora dónde va a hacer fetch Bueno pues va a hacer fetch a esta carpeta que se llama Api donde la carpeta Api Como he mencionado anteriormente la carpeta Api va a tener una serie de rutas o una serie de archivos o una serie de llamémoslo como queramos que se van a encargar de sacar información de eh de la base de datos y mostrármelo Jason así que por ejemplo Yo vengo por aquí y en la Api voy a crear un nuevo archivo llamado preguntas php el archivo de preguntas php va a hacer lo siguiente vamos a ver el archivo de preguntas Api se va a conectar en primer lugar Por cierto Api tendrá un archivo llamado config.php y el archivo config.php va a tener lo mismo que el otro archivo config ahora eh preguntas php vamos a ver aquí se me ha ido vale Y esto es lo que va a tener vale preguntas php va a tener esto va a tener esto voy a intentar mantenerlo lo más sencillo posible Select all from preguntas ya está vamos a por ello Así que una vez que tengo esto Pues a continuación voy a devolverlo en pantalla Así que vamos a ver Okay a ver un segundo a ver vale Y vamos a ver Vale pues voy a crear una Ray datos es igual a esto entonces voy a decir que datos de esto es igual a fila y al final pues eh J son es igual a jas en code de la fila o de los datos perdón y eco Jason si esto va bien si esto es cierto y ahora vengo por aquí me voy a la Api llamo a preguntas creo que me falta el include creo que dará error include config.php Okay Vale ahora preguntas y ahí tenemos las preguntas vale tenemos que el sistema cuando yo llamo a esta ruta me devuelve pues una serie de preguntas por ejemplo en el caso de que más adelante hayan muchas pues puedo decir por ejemplo Select all from preguntas Eh pues limit 20 order by identificador eh desk vale por ejemplo creo que lo he hecho al revés sí okay esto es limit 20 va al final otra cosa que puedo hacer es poner la consulta así order Buy limit 20 para que pues se entienda mejor a ver un momento y ahí vale Okay recargo La idea es intentar mantener los archivos de la Api lo más sencillos posibles evidentemente la intención es mantener todo el proyecto lo más sencillo posible por supuesto pero ahora lo que voy a hacer es bajar un nivel bajar dos niveles entrar en 005 Api y en la Api voy a cargar eh preguntas php Por qué Pues porque ese preguntas php me va a devolver Jason y fch de javascript pues es perfectamente capaz de procesar Jason Así que yo vengo por aquí voy a abrir un momento Ajax para abrir pues uno de estos Ajax de aquí el punto den pun den vale con lo cual me vuelvo al proyecto y digo punto den pun den en cadeno Vale y eh return response Y console.log datos Vale pues si esto es correcto yo ahora me vengo por aquí me voy a cliente me voy a proyecto me voy a preguntas Y si todo va bien tengo esto tengo un Jason que contiene dos preguntas con lo cual una vez que tengo un Jason que contiene dos preguntas Pues a continuación es cuando puedo ir a la siguiente parte que va a consistir en convertir Vale entonces no quiero detalles por cierto Vale pues jas J son a entidades html Así que yo ahora vengo por aquí y digo por ejemplo que vamos a cerrar esto y digo que en el 006 en el javascript for Let esto ya no hace falta Bueno lo puedo dejar for es igual a 0 Y es menor que datos. length y más eso era una y ahora digo Let artículo es igual a eh document create Element y voy a crear un Element eh article Por ejemplo no lo sé bien una vez que tengo esto Una vez que tengo esto ahora a continuación voy a decir vamos a ver document appen Child no document.get o query selector section en la sección quiero appen Child artículo Así que vengo por aquí recargo jas eh preguntas punto html vale Y si ahora vengo por aquí inspeccion veré que en la sección Aunque parezca que no pero en la sección ya hay dos artículos Y si hay dos artículos evidentemente Eso quiere decir que esos artículos pues salen digamos de esa parte que he creado vale salen de la parte que Eh pues viene del fetch que viene del Jason y por tanto va a ser javascript el encargado digamos de crear ese elemento bien pues a continuación en lugar de porque claro ahora tengo un artículo pero ahora qué hago con el artículo pues puf pues Esto va a ser complicada No pues en este caso lo que voy a hacer va a ser lo siguiente vamos a ver voy a crear una etiqueta llamada template así que voy a usar plantillas d html están pensadas precisamente para esto entonces voy a usar plantilla html Hay muchas formas de hacer plantillas evidentemente pero yo en este caso voy a utilizar la etiqueta template que es la forma oficial de utilizar plantillas entonces voy a escribir por aquí template y aquí en template voy a escribir article y aquí en article voy a escribir pues por ejemplo h3 vale h3 título de la pregunta vamos a poner aquí Time 1207 o lo que sea y voy a poner por aquí p texto de la pregunta lo interesante en este caso voy a decir que este template es ID pregunta lo interesante de este caso es que si yo ahora renderizo si yo ahora me voy al 07 y me voy a preguntas html no veo el template curiosamente el template está ahí el template está pero si nos fijamos el template es una etiqueta muy curiosa porque está diseñada para no renderizar y el template me da un document fragment Es decir me da un fragmento de documento que existe en la memoria pero que no existe en ninguna parte más que la memoria es una etiqueta como ya digo muy particular que no tiene ningún sentido esta etiqueta si no utilizamos javascript pero claro en este caso vamos a utilizar javascript para trabajar con esta etiqueta verdad Así que yo de esta forma Ahora puedo venir por aquí y dejo el template ahí donde está y hago lo siguiente me voy a js me voy a preguntas y digo vamos a ver digo que artículo ya no va a ser exactamente Por cierto aquí en el template he creado article sí menos mal perfecto Vale entonces digo artículo o plantilla vale plantilla es igual a vamos a verlo mín plantilla es igual a document.get Element by ID y esto Esta plantilla se llama pregunta voy llamarlo plantilla PR sias plantilla pregunta Vale ahora a continuación esto de hecho lo puedo poner fuera del for porque es común y entonces a continuación lo que voy a hacer en este caso va a ser ponerlo dentro entonces digo document punto get Element by noer selector se y voy a hacer lo siguiente vamos a ver appen Child y voy a poner la plantilla vamos a ver si esto nos funciona o tenemos que hacer un clone vamos a probarlo vamos a por ello y yo creo que ya vale vamos a probarlo recargo vale tenemos ahí el section tenemos ahí el template tengo la Side un momentín no debo estar no 007 vale no tengo ningún error de código Ok vale vamos a clonar el elemento vamos a ver y vamos a por ello vamos a ver aquí import node Ok template todavía será que no he cogido bien document query selector vale y vamos a probar esto vamos a ver vale vamos a importar el nodo Entonces esto es el section voy a decir lo siguiente led sección es igual a document query selector del section vale Y ahora para cada uno de ellos led importado es igual a document punto import node y voy a decir plantilla content y true bien con lo cual ahora a continuación vamos a verm importado vamos a ver un momentín sección pun appen Child importado vamos a verlo ahora sí tengo el título de la pregunta y tengo el título de la pregunta pero claro en el título de la pregunta pues como podemos imaginarnos eh Ahora yo quiero que en lugar de aparecer ese título de pregunta y ese título de pregunta pues aparezcan los títulos que realmente corresponden pero sobre todo lo importante lo bueno de esto es que esto al final es una plantilla y por lo tanto lo que hace el programa es utilizar la plantilla que yo le he facilitado aquí y esta plantilla la tengo en html y no la tengo en javascript lo cual hace que trabajar con plantilla de esta forma pues sea bastante más limpio Vale y bastante más eficaz ahora por supuesto lo que quiero es que la información de la plantilla se personalice para cada pregunta evidentemente así que 008 proyecto personalizar plantilla para personalizar la plantilla teóricamente Existen los slots hay una etiqueta que se llama slot pero es muy exper al menos En este preciso momento vale por tanto voy a trabajar con otra solución entonces la solución con la que voy a trabajar es la siguiente yo digo importado punto query selector y a ver un momentín y el query selector es h3 así que h3 punto text content es igual a datos de I punto qué pues punto No me acuerdo punto título será así que vengo por aquí y si ahora me voy al proyecto 008 voy a comprobar preguntas html voy a comprobar como tengo primera pregunta y segunda pregunta es decir ya no tengo una plantilla vacía sino que tengo una plantilla rellena con el dato correcto con lo cual ahora a continuación voy a hacer lo siguiente voy a decir que importado query selector Time es datos pun fecha he importado query selector p va a ser datos. texto con lo cual ahora recargo fecha y este es el texto de la primera pregunta y este es el texto de la segunda pregunta entonces vemos que tenemos una interfaz bastante limpia pienso yo para poder importar datos o sea poder utilizar una plantilla que la plantilla esté en html y no sea código y código En javascript lo cual aísla la lógica de la plantilla que siempre un poco lo deseable lo que intentamos hacer y luego la personalización de la plantilla lo podemos hacer mediante ese tipo de propiedades o como digo para el futuro pues la mozila foundation tiene preparada una etiqueta llamada slot pero que a día de hoy no es muy compatible vamos a ver eh Can I use slot Vale entonces vamos a ver slot Pues bueno pues eso pues como podemos ver eh No está soportado todavía en vamos a ver Dónde está hch Ah mira aquí vale menos mal pues pero cuidado claro Bueno soportado desde 2020 vale parece que está slot menos mal pero hay navegadores que como vemos pues todavía no interet Explorer evidentemente Por supuesto que no vale entonces La idea es un poco Esta bien una vez que tenemos esto voy a darle un poquito más de estilo Entonces vamos a darle un poquito más de estilo para las preguntas y al seleccionar estilo para las preguntas Pues voy a hacer lo siguiente vamos a ver vale me voy a estilo para las preguntas Ok me voy a css de preguntas y se article va a ser un box sizing de Border boox va a ser un padding de 20 píxeles No lo sé vamos a probar a ver qué pasa esto es 009 proyecto estilo vale me voy a preguntas html y bueno vemos que ahora está un poquito mejor formateado Voy a decirle que para cada uno de estos elementos pues tengan un poquito más de margen Vale entonces voy a decir que section article todo es eh margin top vamos a poner cinco píxeles y margin bottom es 5co píxeles así que vale un poquito de separación de momento me vale Y para cada uno de los artículos voy a decir un Border bottom de un Pixel solid y gris claro creo que es la variable que quiero así que dónde estás gris claro Okay pues bueno sí aproximadamente así vale con lo cual vemos que ya tengo por aquí pues la primera parte vale he conseguido cargar el archivo javascript no me ha quedado muy muy sobrecargado Vale qué es lo que quiero voy a poner una un pequeño comentario eh carga inicial de preguntas al abrir la página pero claro ahora ocurre que lo que voy a hacer es que cuando yo haga clic en una pregunta pues cambie Vale Voy a hacer lo siguiente voy a darle un poco de estilo y al darle un poco de estilo lo que pretendo Es que la gente entienda que puede hacer clic en la pregunta así que otra cosa que quiero por cierto en el css es eh vamos a ver un momentín se article vamos a poner font size de 11 pixels a ver vale eso me gusta un poquito más y voy a decirle que se article h3 voy a poner un color azul a ver el gimp Dónde está el gimp Aquí voy a poner un color azul bueno tenía antes un color azul de hecho en el panel de control estoy pensando entonces me voy al panel de control me voy a una de las variables fondo esta por ejemplo Vale y eh Me voy a preguntas css y voy a reutilizar ese mismo color enlaces para decirle que color es bar enlaces eh A ver parece que no ha funcionado section template article y h3 Ah pues sí que teóricamente ha funcionado Ah sí sí que ha funcionado no se ve pero sí que ha funcionado vale Okay correcto bien con lo cual tengo por aquí la primera parte que consiste como digo en crear un listado de preguntas en pantalla y ahora a continuación lo que quiero en la siguiente parte es que cuando yo haga clic en la pregunta pues me desaparezca todo esto y se me abra Pues otra parte voy a hacer una cosa eh vamos a ver las plantillas las voy a poner en alguna otra parte entonces voy a poner por aquí Di y de plantillas porque voy a tener varias saco el template de aquí Lo pongo aquí comprobamos que todo va bien comprobamos que todo funciona tengo un por ahí plantillas para no tocarlo vale con lo cual para solo voy a beber plantillas de ahí y ahora a continuación como digo pues lo que quiero es que por cierto en preguntas css cursor Pointer vale quiero que cuando ponga el cursor por encima pues aparezca un dedo como que es un enlace vale porque realmente va a ser un enlace pero no va a ser un enlace de html sino que va a ser un enlace gestionado por javascript Porque la idea que tenemos Es que esto sea pues una single page application es decir que sea una aplicación de navegación directa vamos a por ello bien pues a continuación lo que quiero hacer es poner algún tipo de identificador dentro de en este caso por ejemplo la pregunta para indicarle al sistema que pues cuando hago clic Quiero abrir la pregunta concreta y quiero abrir también sus propiedades específicas así que de esta forma vamos a hacer lo siguiente vamos a poner identificador 010 identificador cuando viene el Jason cuando viene el jas en principio trae vamos a comprobarlo si es cierto o no preguntas html en principio trae vamos a verlo preguntas vamos a devolver el console.log datos Y así podemos debugar un poquito entonces vengo por aquí me voy a console y veo que tiene el identificador Entonces si tiene el identificador pues ement es una oportunidad muy buena para pues poner directamente ahí el identificador por esto por este motivo voy a hacer lo siguiente voy a decir que vamos a ver importado vamos a ver Vale pues importado setattribute y voy a decir que el por ejemplo el name es igual a datos de I punto identificador digo el name cuando puede ser otro atributo Cualquiera podría crear un atributo personalizado set attribute is not a function vale muy bien Vamos a ver entonces vamos a ver por qué import node vale quiero Bueno quiero query selector article vamos a por ello recargo invalid Let momentín vale punto set attribute name caray name es igual a esto y to argument required set attribute name coma datos identificador esta igualdad va fuera vamos a dentro y si ahora me voy a los elementos Pues voy a comprobar que en el Main en el contenedor en el section tengo name 1 name 2 y En definitiva tengo pues cualquiera de los artículos identificado a través de su name esto quiere decir que ahora si hago clic en el título clic en el título sí clic en el artículo si hago clic en el artículo vamos a verlo preguntas html me voy al 011 clic en el artículo preguntas html y por lo tanto ahora a continuación en el javascript voy a decir lo siguiente voy a decir importado punto query selector article punto onclick es igual a function voy a decir console pun log has hecho clic vamos a probarlo cargamos eh cannot set properties of null bien vale vamos a verlo importado query selector article en principio parece correcto pero va a ser que no Entonces vamos a recargar vale click y sigue sin funcionar evidentemente vamos a decir h3 por probar Okay bien Entonces vamos a por ello vale hago así y eh vamos a ver vale voy a este vale vamos a ver y en principio vale query selector on click en principio debería funcionar correctamente on click es igual a function pero algo le está haciendo decir que no existe vale con lo cual crea los elementos cuando llega aquí no existe voy a hacer lo siguiente voy a hacer así vale click y ahora sí ha hecho clic vale Perfecto entonces una vez que tengo esto puedo el h3 puedo el article vamos a probarlo vale he hecho clic y ahora a continuación lo que quiero es tomar la propiedad entonces digo eh led nombre o led identificador es igual a disg attribute name has hecho clic console.log el ID es más identificador si esto es correcto hago clic el ids 2 hago clic el ID es un esto quiere decir que el programa ahora ya sabe que tiene que eh cargar un artículo no todos los artículos sino un artículo concreto que es el artículo que tiene el identificador uno y por lo tanto de esta forma en la siguiente parte del proyecto lo que vamos a hacer es cargar el identificador correspondiente dicho esto vamos a ver voy a hacer eh cargar artículo y para ello vamos a la versión 12 de este ejercicio nos vamos a preguntas y digo function carga ejercicio o carga artículo y vamos allá y voy a decir carga artículo con el parámetro pasándole como parámetro el identificador y el identificador una vez que tengo esto voy a decir lo siguiente voy a decir document punto Manía document getelement no document query selector seción punto innerhtml es igual a nada y con esto lo que estoy haciendo es vaciar completamente la sección proyecto vamos a por ello y preguntas html y hago clic y lo que ocurre de momento es que vacío todos los contenidos porque a continuación voy a cargar una sola pregunta De hecho voy a cargar tanto la pregunta como las respuestas a esa pregun Por supuesto que sí así que por lo tanto a continuación lo que voy a hacer es que necesito una nueva llamada a la Api para no pedir un listado de preguntas sino pedir una pregunta concreta y sus respuestas concretas Bueno pues a continuación voy a preparar en la Api otra eh otro archivo llamado pregunta y respuestas php Y este archivo de pregunta y respuestas php va a hacer lo siguiente vamos a ver dónde estás aquí vale vamos a decir Select all from preguntas y voy a decir Where identificador es igual a get espero un parámetro de URL llamado get ID vamos a hacerlo por URL vamos a hacerlo por parámetro get igual luego lo podemos hacer por post como queramos bien Ahora a continuación digo que vamos a ver Bueno vamos a hacer lo siguiente vamos a probarlo me voy a la Api me voy a pregunta y respuestas y digo ID es ig a 1 así que me da esto por aquí pero yo a continuación lo que quiero es eh poner reordenar reorganizar un poquito este jas Por cierto este jas lo voy a poner como jas Pretty print vamos a verlo Bueno más o menos a ver u Vale ahora sí bien entonces una vez que tenemos esto Una vez que tenemos esto ahora a continuación quiero sub organizar Esto vale entonces vamos a ver quiero decir lo siguiente vamos a ver contenido es igual a datos No ya está Vale contenido es igual a pregunta puntos datos con lo cual ahora digo que quiero codificar el contenido vamos a probarlo par error tenemos un punto y coma por aquí que falta vale Warning a to stram conversion pues vamos a poner otra vez js en code de datos vamos a verlo ahora okay bien y aquí esto fuera vale pero tampoco vamos a ver voy a decir un stringify vamos a ver porque si ahora hago así me quedo igual y vamos a ver esto lo convierto al revés esto se convierte en doble vale Y esto es sencillo estamos más o menos igual a ver ec contenido Okay Ah técnicamente Es correcto jas Pretty print Eco del jas pero me lo pone con estos elementos y vamos a verlo porque lo que quiero En definitiva es Añadir un elemento de array bueno donde puedo hacer lo siguiente a ver contenido de pregunta es igual a datos Y entonces ahora digo contenido esto ya es otra cosa Vale Muy bien pues una vez que tengo la pregunta a continuación vamos a trabajar con las respuestas Por cierto que ya que estamos podría indicar que el usuario Pues bueno sería un Jason realmente donde ahora haré una petición de momento vamos a poner las respuestas Así que vamos a por ello y ahora a continuación digo petición Select all from respuestas vale dónde vamos a ver php my admin vamos a ir al proyecto vamos a las respuestas preguntas título Vale pues we preguntas título es igual a ID con lo cual resultados es igual a esto While respuestas es igual a esto While fila respuestas punto fila y por tanto ahora a continuación digo contenido respuestas es igual a respuestas vamos a por ello recargamos vale perfecto Esta es la primera respuesta Esta es la segunda respuesta y aquí habría tantas respuestas como fuera necesario con esto por lo tanto pues ya tenemos una primera petición y ahora a mí lo que me gustaría ya que estamos sería eh tomar cada uno de estos elementos y pues hacer una sub petición para decir que por ejemplo pues usuarios usuario Pues dame directamente el usuario esto Podría tener su Peligro en el sentido de que pues claro en lugar de O sea si me da todos los datos del usuario Me podría estar dando datos muy sensibles evidentemente y no lo quiero Bueno pues vamos a hacer lo siguiente y voy a hacer una subp petición para que en el caso de encontrarse una tabla anidada pues me dé no el número dos sino que me dé el nombre del usuario y lo mismo aquí con las respuestas Vale entonces vamos a por ello para ello voy a hacer lo siguiente aquí en la Api vamos a verlo vale voy a decir si datos vamos a ver si fila Ah no vale claro estoy metiendo la Ray no puedo hacerlo directamente no puedo hacerlo directamente porque estoy metiendo el array de un solo golpe y no estoy mirando cada uno de los elementos otra cosa que puedo hacer es pues voy a hacer una cosa voy a meterlo de momento de golpe y más adelante creamos una segunda Api y lo hacemos de esa forma una cosa que puedo ir haciendo Es que voy a crear dos respuestas con lo cual local Host proyecto panel de control me voy a ir a la última versión en la última versión voy a crear para la primera pregunta para la primera pregunta en respuestas voy a crear una respuesta más eh para el usuario jarsa 2 para la primera pregunta esta es la segunda respuesta 2023 012 no sé cuántos le doy a enviar y así por lo tanto cuando hago esto Pues compruebo que la Api no solo me da una respuesta sino que me da un array de respuestas Vale pues vamos a localizar Este array Entonces me voy a clientes vale Y en cargar artículo por lo tanto aquí en preguntas una vez que he vaciado primer lugar vacío y a continuación Pues voy a hacer un fetch entonces hago un fetch vamos a verlo y este va aquí y este va aquí okay Entonces vamos a ver eh Quiero pregunta y respuestas Okay ahora plantilla es igual a esto sección es igual a esto datos pun leng no esta es la cuestión ahora con esta Api veo que vamos a ver pregunta y respuestas entonces led pregunta es igual a datos punto pregunta con lo cual a continuación digo lo siguiente tengo la pregunta y dentro de la pregunta de cero entonces dentro de la pregunta tengo una Ray que tiene cero elementos Vale entonces digo vamos a ver este for fuera este for aquí esto es un on click este no lo quiero ya no quiero el on click aquí Esto es lo que me sobra esto ya no tiene que ir sangrado y digo vamos a ver article set attribute un momento y aquí pregunta identificador pregunta título pregunta fecha pregunta texto Vale ahora sí yo creo que sí vamos a verlo me voy a me voy al proyecto me voy a la Api de cliente me voy a cargar me voy a preguntas html Y si hago clic en primera pregunta vamos a verlo quizás algún error vamos a comprobarlo sí eh syntax error unexpected token is not a valid Jason quién Ah Sí perdón porque preguntas y respuestas y ID es igual a identificador no le estoy pasando el ID de quién quiero preguntar vale venga recargo primera pregunta Vale y tengo ahí la primera pregunta tengo una pregunta que es una array y respuestas que es otro array con dos respuestas veo que la información me viene muy limpia y yo si estuviera desarrollando en el lado del cliente Pues igual no tendría ni que saber qué es lo que está ocurriendo en el lado del servidor lo que pasa es que sí que estoy desarrollando en el lado del servidor y por tanto sí que sé qu es lo que está ocurriendo vale pero podría no saberlo bien Ahora a continuación vamos a cargar las respuestas Y para cargar las respuestas voy a hacer lo siguiente 013 plantilla respuestas la plantilla de respuestas va a ser muy parecida a la plantilla preguntas vale Pero vamos a demostrar que podemos crear varias plantillas por tanto voy a crear un template voy a crear un plantilla respuesta en article voy a decir Class respuesta vale Y de esa forma demuestro que puedo hacerlo que puede tener tantas plantillas Como quiera entonces me voy al proyecto preguntas vale Y en el proyecto 13 primera pregunta Vale ahora a continuación voy a extender el javascript y al extender el javascript hago lo siguiente vale vamos a ver esto ya está claro ahora cargo las preguntas y ahora cargo las respuestas Así que vengo por aquí vale plantilla es igual a plantilla eh respuesta sección es igual a section vale respuestas es igual a datos respuestas y por lo tanto ahora digo for importado sí correcto for Let I es = 0 Y es menor que respuestas pun leng y más y entonces ahora Esto va dentro y digo vamos a ver respuestas de I identificador respuestas de I respuestas de y el título no hace falta el título no hace falta de hecho yo creo que no lo tengo vamos a ver qué tengo respuestas tengo el texto y la fecha y ya está pues respuestas fecha y texto vale Muy bien Entonces vamos a verlo okay en la en el template voy a quitar el título porque ya no me sirve la respuesta no tiene título vamos a probarlo a ver si funciona no funciona a plantilla has B s claro perdón porque led plantilla dos por ejemplo Vale y LED sección 2s entonces voy a decir que plantilla dos y en Sección dos no sección es lo mismo sección es lo mismo sección no tengo por qué redlar vale yo creo que ya Okay vamos a probar respuestas Ah datos sí datos respuestas a ver a ver dime datos Dame datos Ah Uh no eh pincho vale pregunta y respuestas console.log datos punto respuestas primera pregunta datos punto respuestas no sé por qué dice que no lo reconoce vamos a ir desbloqueando poco a poco Vale pues ya está entonces no sé por qué no reconoce respuestas a ver debe ser otro error en la línea 54 Ah respuestas Ah madre mía vale Okay está doble muy bien primera pregunta Y entonces aquí aparece primera respuesta y segunda respuesta como podemos ver De hecho las podemos organizar eh de forma incremental Entonces vamos a ver pregunta y respuestas voy a decir order by identificador eh desk para que al hacer clic en la primera pregunta pues aparezcan primero las respuestas Pues más recientes aunque no lo parezca por el identificador sí que lo es bien y ahora además pues lo que puedo hacer es que estas preguntas vamos a verlo un momento estas preguntas voy a trabajar el estilo vamos a ver y estilo de la respuesta Vale entonces en estilo de la respuesta voy a ir al css voy a ver la plantilla html plantilla respuesta Class respuesta entonces me voy a la Class respuesta y digo que pues padding left es de yo que sé 40 píxeles vamos a probarlo Así que vengo por aquí me voy a proyecto estilo me voy a preguntas punto html vale primera pregunta y veo que pues bueno ya tengo un poquito más de vale voy a poner no sé 80 píxeles por probar luego esto ya estéticamente hay que probarlo vale Pero que haya un poquito de imen y que quede claro que las respuestas Pues dependen de la pregunta bien con todo esto por lo tanto eh ya empezamos a tener una parte muy interesante que consiste en que como podemos ver pues eh estamos empezando a tener nuestra aplicación donde voy a recargar donde al cargar cada una de las preguntas pues se cargan cada una de las respuestas pero evidentemente en este caso lo que quiero a continuación es pues poder responder ser capaz de responder Bueno una condición muy importante para poder responder es estar registrado como usuario Así que a continuación lo que vamos a hacer es que eh nos podamos loguear como usuario vamos primero a hacer un evidentemente y luego haremos un Sign In es decir primero vamos a comprobar que el usuario pueda Iniciar sesión y una vez que hayamos comprobado que el usuario pueda Iniciar sesión también crearemos un formulario para que el usuario pueda Eh pues como te diría yo pues publicar elementos vamos a por ello bien pues en la siguiente parte del proyecto voy a crear una ventana modal Hay muchas formas de hacer esto evidentemente pero una de ellas es crear una ventana modal y para crear la ventana modal voy a hacer lo siguiente voy a ir a proyecto voy a ir a modal voy a ir a preguntas y en preguntas voy a crear por aquí abajo un div ID llamado modal El modal va a tener un div ID fondo modal y va a tener un div y de contenedor modal esto no va a ser exactamente una plantilla va a ser otra cosa porque yo ahora voy a ir al proyecto modal voy a ir a preguntas html y aquí en preguntas html voy a hacer lo siguiente vamos a verlo bien aquí en el modal voy a decir que en el css aquí voy a decir que modal es un with 100% un H 100% un background rgba 0.5 por cierto creo que el fondo modal no me hace falta creo que con contenedor modal ya tengo suficiente entonces hago esto y le digo que Pos absolute y top cer píxeles y left 0 píxeles y esto lo que hace es que si hago así veo que el fondo ha quedado oscurecido porque ahora a continuación voy a hacer lo siguiente contiene modal tiene un Wi de 400 píxeles un High de 400 píxeles vale Y ahora un Border Box sizing Border Box Vale ahora Quiero un position absolute un top del 50% un left del 50% un margin left de -2 píxeles un margin top de -2 píxeles un background White un Border radius de 5 píxeles y un Box Shadow de 0 píxeles 5 píxeles 10 píxeles rgba 0.3 quieto Qué pasa aquí bien recargo Hola Dónde estás no sé dónde está No será esto Espero que no sea esto vamos a ver dónde estás modal y contenedor modal vale venga recargamos y ahí tenemos el modal y lo que ocurre en este caso voy a decir que incluso Pues podría ser 300 por 300 con esto sería 150 y esto sería 150 vale Y ahora lo que va a ocurrir Es que este modal estará oculto por defecto esto quiere decir que display no porque ahora a continuación Por cierto este display known va Aquí Okay bien porque ahora a continuación lo que voy a hacer es crear dos botones en la parte superior así que voy a empezar con un botón de Iniciar sesión Y entonces al iniciar sesión vamos a preguntas y aquí voy a decir eh Button Iniciar sesión vamos a Aquí vamos a iniciar sesión vamos a preguntas html Vale y de momento ahí tenemos Iniciar sesión vamos a hacer que el input sea más grande vamos a verlo el input a ver dónde está el input debería estar en heer input Ahí está vamos a ver hasta cuánto podemos ampliarlo header input vamos a llevarlo ahí y luego 420 y luego va a tener un margin right aquí vale Ahí me empieza a valer bien pues Iniciar sesión es un botón y de iniciar sesión donde lo que va a hacer en este caso va a ser pues Mostrarme eh Ahora sí un template Entonces vamos a ver hago una nueva versión del ejercicio 17 template inicio sesión porque quizás puedo tener más templates y ahora voy a hacer lo siguiente aquí abajo voy a crear un nuevo template que se va a llamar inicio sesión y va a tener lo siguiente va a tener un input type text ID usuario input type text type password name contrasena y un buton ID Inicia sesión o envía inicio sesión entrar bien si hago esto ahora a continuación lo que quiero es lo siguiente cuándo vamos a verlo aquí en el js vale document.get Element no esto irá aquí en el onload document.get Element byid no me acuerdo Iniciar sesión punto onclick es igual a function console.log vamos a Iniciar sesión vamos a verlo 17 no 16 17 preguntas html hago clic y vamos a Iniciar sesión y por lo tanto ahora al iniciar sesión voy a hacer lo siguiente Ah document.get Element byid modal Style display es igual a block lo que va a hacer esto es que cuando le dé al botón de Iniciar sesión pues tendré el modal dónde ha ido el contin modal Pues no lo sé vamos a verlo modal Vale y contenedor modal dónde estás Ah display no espérate Por qué Porque aquí abajo se me ha quedado display know no puede ser esto está mal vale Okay Iniciar sesión ahí lo tenemos y ahora aquí lo que quiero es planchar la plantilla poner el template de la plantilla de Iniciar sesión Así que vengo por aquí por ejemplo aquí puedo poner h3 Iniciar sesión vale Yo que sé mismamente entonces y ahora vengo y aquí en el js digo lo siguiente aquí plantilla led plantilla es igual a inicio sesión plantilla inicio sesión con lo cual document.to get Element by ID contiene o contenedor modal y quiero esto aquí un momento Let import node y en contenedor modal aquí un momento contenedor modal punto appen Child y quiero importado yo creo que ya yo creo que ya vamos a verlo vamos a ver si funciona le doy a Iniciar sesión no Okay vamos a verlo un error Reading content vale un click muy bien en la línea 32 vale plantilla pun content plantilla inicio sesión vale Okay HM Okay plantilla document get Element by ID plantilla inicio sesión vamos a ver el error está en la 32 voy a poner un console punto log plantilla para ver qué está importando Iniciar sesión vale contento Ah muy bien es nul vale get Element by ID plantilla inicio sesión estoy en el 17 plantilla inicio sesión preguntas js plantilla inicio sesión vamos a matar un momento esto ejecutamos y ahora sí vale No sé por qué antes no ahora sí okay importado vamos a verlo Iniciar sesión ahora sí no me explico por qué ahora sí Y hace un momento no vale Iniciar sesión y ahora sí ahí tenemos el contenido bien una vez que tenemos esto Ahora pues evidentemente voy a formatear este inicio de sesión eh vamos a ver vamos a darle estilo al inicio de sesión 010 estilo del modal y vamos a por ello estilo del modal preguntas html vale inicio sesión y aquí en el css aquí SS contenedor modal claro veo que no tiene vamos a verlo un padding de 20 píxeles por ejemplo Así que Iniciar sesión Ahora tiene un padding bien Ahora a continuación contenedor modal todo lo que hay dentro voy a decir que tenga un Wi del 100% un padding del cer de cer peles un Box sizing Border Box un margin top de 20 píxeles vamos a verlo Iniciar sesión vale muy bien y ahora un padding de 10 píxeles ahí por ejemplo esto ya más bonito vale Y ahora a continuación una vez tengo esto pues lo que quiero es que cuando pulse el botón de entrar pues compruebe o sea vayamos realmente a Iniciar sesión de esta forma me voy aquí a preguntas y aquí ID usuario ID contrasena ID envía inicio sesión Pues voy a ponerlo Bueno voy a hacerlo en otro proyecto porque este es estilo del modal para no mezclar cosas así que 19 enviar datos de inicio de sesión y en el enviar de inicio de sesión vamos a ver voy a decir que cuando document get Element by ID haga clic en el botón envía inicio de sesión punto onclick es igual a function console.log iniciamos sesión vamos a verlo me voy al 19 me voy a preguntas pun html vale inicio sesión cuidado aquí un click vale por porque esto Solo puede existir cuando yo he importado la plantilla Okay entonces hago clic Ahora sí voy a Iniciar sesión Vale ahora sí y bueno una vez que inicio sesión Pues ahora digo Let nombre es igual a document get Element by ID usuario pun value Let contrasena es igual a contrasena value y digo console pun log envío más nombre más guion más contrasena inicio sesión a envío voy a enviar AAA y bbb y ahora a continuación Pues voy a hacer un fetch mediante el cual voy a hacer un inicio de sesión en el servidor y en el servidor Pues voy a preguntar si con estos datos puedo entrar es decir si existe un usuario que cumpla estos datos para ello me voy a ir a crear una Api así que voy a crear un nuevo archivo que se llame login php el login.php pues va a hacer lo siguiente va a decir Select all from usuarios Where usuario es igual a algo and cont contrasena es igual a algo ese algo va a ser un get usuario y ese algo va a ser un get contrasena Vale entonces yo ahora voy a decir lo siguiente voy a devolver un sí o un no entonces digo If fila es igual a esto en ese caso eco llave es Sí en caso contrario llave es igual a no puedo también validar mediante un Hash vale lo que sea entonces eh vamos a ver okay esto n ha falta con lo cual vamos a probar si esto va bien esto quiere decir que yo ahora voy a hacer un fetch voy a hacer un fetch en el cual mucho cuidado en el cual vamos a volcar esto llamo a login.php donde usuario es igual a algo and contrasena es igual a algo ese algo es Nombre ese algo es contrasena vale Y console pun log datos si esto va bien si esto va bien Uy Cuidado si esto va bien ya tengo un login estoy en el 19 inicio de sesión a envío vale Ok y vamos a ver qué me dice que is not a valid js vale vamos a verlo happi login Vale y digo and usuario es igual a AAA and contrasena es igual a bbb a ver qué me dice Vale pues se ve que me he dejado algún punto y coma login me he dejado dos puntos y coma nada más y nada menos vale Okay Entonces ahora digo a vamos a verlo expert property name Wow or One vale a ver vale vamos a hacer lo siguiente voy a invertirlo vamos a verlo ahora envío vale perfecto y ahora dice llave no esto quiere decir que si y ahora pongo diferentes nombres vale me dice llave es igual a No pero si ahora pongo jarsa le doy a entrar e llave es igual a no Claro porque había cambiado el usuario creo no me acuerdo vamos a verlo panel de control jarsa Ok esto de que me deniegue acceso a mi propia aplicación es un poco frustrante me voy a usuarios claro jarsa 2 ahí lo tenemos Vale pues lo devuelvo aquí a jarsa le doy a enviar y ahora desde aquí desde el panel principal pues inicio sesión inicio como jocars jarsa y me da llave es igual así y por ejemplo si ahora vengo por aquí y ahora Vengo por aquí y pongo otros datos pues me dice llave es igual a No pero si pongo joc carsa Y jarsa entonces me dice que llave es igual así es decir de alguna forma pues mediante la Api tenemos una forma como digo de Pues de loguear Vale y de comprobar que podemos Iniciar sesión dentro de la aplicación ahora qué vamos a hacer cuándo iniciamos sesión Bueno pues cuando iniciamos sesión voy a decir que 20 y acción de inicio de sesión pues lo que voy a hacer en este caso va a ser decirle al sistema vale que si aquí If datos pun llave es igual a s en ese caso pues voy a hacer lo siguiente voy a document modal display known es decir escondo el modal esto es un poco lo de menos que no 020 preguntas punto html inicio sesión jarsa vale cierro el modal y sobre todo Ahora lo más importante es que eh voy a crear una Cookie voy a crear una Cookie vamos a ver voy a crear una Cookie para este sitio Vale entonces voy a hacer lo siguiente vamos a ver voy a decir que document Cookie es igual a qué pues es igual a usuario es igual a más nombre más punto y coma y voy a poner el vamos a ver expires es igual a vamos a ver Bueno voy a quitar el spees no quiero spees en este caso vamos a quitar esto Vale y vamos a verlo así que si yo hago así estoy en el ya no me acuerdo dónde estoy en el 20 Okay inicio sesión Uy madre mía pasó aquí Ah por qué Ah vale porque me pone dos templates eso tengo que controlarlo muy bien vale venga perfecto carsa le doy a entrar llaves igual así y si me voy a resources application me voy a cookies y en local Host tengo usuario es igual a hok carsa vale me ha metido la Cookie Y a partir de aquí est la cookis sin codificar evidentemente por supuesto para hacer esto en real pues tendría que aplicar algún método de protección más elaborado que simplemente guardar ahí el usuario a las claras porque eso prácticamente está diciendo pirateame vale pero pues evidentemente con cualquier método de encriptación pues podemos codificar la Cookie o hacerla que no sea tan obvia o lo que sea bien esto por aquí Entonces ahora otra cosa que quiero hacer es que cuando cargo el modal aquí vale voy a decir que contenedor modal punto innerhtml es igual a nada Y eso lo que hace es Vaciar el contenedor modal para que ocurra Esto es lo que no tiene que ocurrir vale para que si hago así y luego vuelvo a hacer login pues me vacío vale una vez que tengo esto Bueno pues una vez que tengo esto Ahora ya es cuando por ejemplo lo que puedo hacer es que cuando inicie sesión pues por ejemplo en las preguntas y en las respuestas y todo eso pues ya puedo participar ya puedo poner respuestas hasta que no inicie sesión puedo ver pero no puedo poner respuestas evidentemente otra cosa que quiero hacer es lo siguiente punto den y digo Windows location es igual a Windows location lo cual quiere decir recarga la página Así que recargo inicio sesión vale le doy a Iniciar sesión y se recarga la página aunque no se haya visto pero así digamos nos aseguramos que vamos a la página principal ya con la cqui cargada y ya preparados para la acción bien pues vamos a continuar con el proyecto Entonces estamos trabajando con las respuestas en el sentido en el que cuando voy al proyecto cuando recargo el proyecto me voy a primera pregunta y dentro de pregunta tengo la pregunta y una serie de respuestas sacadas todas ellas evidentemente de la base de datos vale pero ahora que me he logueado vemos como el Host mi usuario es jarsa el usuario ahora mismo no tiene mucha seguridad ya más adelante hablaremos de la seguridad en el sentido de Pues que el dato no sea tan truc y que el dato vaya más protegido vale pero de momento tenemos el usuario completamente a las claras bien pues a continuación voy a sacar el código del proyecto vamos a ir a cliente dentro de cliente vamos a hacer la acción de inicio de sesión y ahora en el inicio de sesión Pues voy a por supuesto duplicar el proyecto para hacer una versión incremental vamos a ir a proyecto vamos a ir a cliente vamos a ir a vamos a ver a publicación de respuesta y en publicación de Respuesta Por cierto que voy a eliminar algunos archivos que ahora mismo no voy a utilizar vamos a ver más que nada para que no parezca que el proyecto es más complejo de lo que realmente es porque estoy intentando mantenerlo todo lo sencillo que puedo y Esta es una parte muy importante del desarrollo del proyecto pero En definitiva vamos a poner esto por aquí vale pero En definitiva como decía eh lo que voy a hacer ahora en el proyecto número 21 es comprobar aquí me voy a preguntas tengo la Cookie no tengo la Cookie vamos a Iniciar sesión vale Bueno ahora mismo de hecho me voy a primera pregunta me voy a Iniciar sesión entro y ahora sí al recargar tengo ya la cqui Y si tengo la Cookie es cuando Ahora puedo preguntar si tengo Cookie para bueno o bien responder a preguntas realizadas por otras personas o bien publicar mis propias preguntas cómo lo puedo hacer Bueno pues en el proyecto 21 en la parte de javascript me voy a preguntas y me voy a preguntas js y tengo la carga inicial de preguntas al abrir la página y tengo por aquí la carga de un artículo concreto con sus preguntas asociadas bueno que pongamos comentarios para tener una idea tener un recordatorio de qué hace cada uno de los bloques del proyecto Entonces en este caso como vemos Tenemos aquí respuestas Y aquí por ejemplo lo que voy a hacer vamos a verlo publicación de respuestas vale aquí donde pone sección appen Child importado vamos a verlo vale importado query selector 3 vamos a verlo sección es document query selector section Ahí está quiero venir aquí vale en el section tengo aquí artículos y claro en este caso igual no quiero crear un nuevo elemento justo al final vamos a verlo voy a ir un poco a vamos a ver aquí y voy a Añadir una pregunta Iniciar sesión tengo í Iniciar sesión y al lado de Iniciar sesión si ya he iniciado sesión voy a cambiar este botón por eh Añadir una pregunta Vale entonces vamos a verlo me voy a la interfaz de usuario Okay preguntas Vale tengo aquí el botón llamado Iniciar sesión Pues bueno lo que puedo hacer en este caso es decirle al sistema que vamos a verlo en preguntas vengo por aquí dónde está el fetch aquí está y digo compruebo el botón de inicio de sesión y en el botón de inicio de sesión voy a comprobar en primer lugar si tengo una Cookie puesta voy a comprobar si tengo si existe una Cookie vamos a verlo un momento y vamos a ver vale en este caso Necesito una función que me permita a ver puedo hacer lo siguiente console.log document cooki y lo que ocurre en este caso vamos a recargar es que me voy a la consola y en la consola me sale la Cookie que me dice usuario es igual a jarsa Pero cuidado porque si yo tengo más cosas Si ahora por ejemplo voy a crear una Cookie nueva prueba es igual a prueba Pues yo ahora recargo Aquí vamos a verlo y en sola vamos a ver que cuando yo pido document Cookie lo que hace es que me devuelve todas las cookies bien pues yo en este caso lo que voy a hacer es lo siguiente lo que voy a hacer es crearme una función personalizada mediante la cual dado que javascript al menos hasta esta versión no me da facilidades para atrapar Las Cookies confío tengo confianza en que esto cambie en los próximos años pues tengo que crearme una función personalizada para repasar las cookies entonces con esto a continuación dentro de javascript voy a crear un nuevo archivo vamos a verlo llamado funciones.js y dentro de funciones.js voy a crear una función llamada Busca Cookie o valor Cookie ya estamos mejor valor Cookie y tengo el identificador como parámetro paso el identificador qué es lo que hago ahora Bueno pues ahora voy a hacer lo siguiente voy a decir que bar eh todas las cookies bar no Let todas las cookies es igual a document Cookie y ahora lo que voy a hacer es repasar las cookies Así que led partido es igual a todas las cookies punto split con el carácter punto y coma Por qué Pues porque estamos viendo que el carácter de separación es el punto y coma y por tanto yo ahora digo for led y es ig 0 Y es menor que partido punto leng y + más y entonces ahora a continuación digo eh led partido 2 es igual a partido de I punto split con el signo igual que es este signo igual de aquí y entonces digo si partido dos de 0 es igual al identificador es decir si estoy en la Cookie correcta si estoy en la Cookie adecuada en ese caso return partido 2 de 1 con lo cual si tengo esto si tengo esta función de ayuda que me permite si yo le doy un identificador me devuelve el valor Pues ahora puedo volver al archivo principal voy a aquí preguntas Perdón voy a cargar el archivo de funciones Y entonces a continuación voy a decir que en preguntas js ya no me des el document Cookie sino a continuación quiero que me des el valor de la Cookie el valor de la Cookie del identificador usuario Entonces en este caso ejecuto usuario not Def vale vamos a verlo usuario Ah perdón usuario con es una cadena vale Y me dice que el usuario es jarsa vale con lo cual caso a continuación lo que voy a hacer es decir si valor de Cookie de usuario no es igual a nada en ese caso console.log el usuario existe vamos a comprobar si es cierto recargo y me dice el usuario existe voy a hacer una comprobación de seguridad voy a decir que el usuario lo voy a borrar delete Vale ahora hago como que no he iniciado sesión recargo bueno el usuario existe vale Por qué Porque no es cierto que no sea igual a nada bueno si el usuario no es igual a nada and el usuario no es igual a undefined vamos a probarlo ahora sí vale undefine Y el usuario eh No existe vale Y por tanto ahora le doy a Iniciar sesión inicio sesión y ahora sí me dice que el usuario existe vale recordamos que tengo una Cookie con un valor a las claras más adelante al aumentar la seguridad lo que haré es codificar algo más el valor de la Cookie pero de momento quiero tenerlo a las claras por Claridad didáctica más adelante ya lo encriptar o lo codificar o lo hasemos o lo ocultemos para aplicar algunas medidas de seguridad pero de momento lo tengo a las claras bien ya tengo esto por aquí lo cual quiere decir momentín esto realmente ha sido publicación de respuesta no esto ha sido comprobación de Cuqui bien con lo cual ahora duplico este proyecto y en el número 22 voy a hacer lo siguiente voy a hacer Vamos a ver bueno cambio del botón de publicación entonces en el cambio del botón de publicación voy a decir que si es cierto que el usuario existe en ese caso document.get Element byid Espera que te lo digo Iniciar sesión punto qué pues punto text es igual a Nueva pregunta por lo tanto ahora cambiamos vale de proyecto vamos al 022 vamos a preguntas vamos a iniciar sesión vale vamos a verlo OK Vamos a poner Inner html Ahora sí vale cuandoo voy a quitar el la Cookie aplicación Cookie quito usuario quito prueba ya que estamos vale recargo y me dice Iniciar sesión Pero si yo inicio sesión ya no aparece el botón de Iniciar sesión porque no tiene sentido porque ya he iniciado sesión y el botón que aparece es el botón de Nueva pregunta bien Además yo puedo cambiar el estilo del botón para decir que vamos a verlo para decir que creo un estilo llamado botón nueva pregunta y voy a decir que paving 10 píxeles background Blue color White Border zer píxeles Border radius 5 píxeles No lo sé vamos a verlo Vale entonces recargo y lo que haré en este caso es decirle al sistema que a ver aquí vale aquí Iniciar sesión innerhtml No pues led botón es igual a esto botón Inner html y ahora digo botón momento vale botón punto ad cl Class List punto ad y ya no me acuerdo cómo se llama la clase botón nueva pregunta con lo cual de esta forma recargamos y ahora pues cuando reinicio pues Ese botón tiene esta forma vale es decir agrega esa clase y ahora a continuación voy a hacer algo muy divertido y es que le voy a quitar el ID y le voy a poner otro ID vale a ver si me deja Yo calculo que sí que me va a dejar por lo tanto ahora le digo botón pun set attribute ID es igual a Nueva pregunta es decir he utilizado su ID para cambiarle cosas pero ahora a continuación le cambio el ID porque no quiero que sea Iniciar sesión Por qué Porque me llevaría a volver a Iniciar sesión no quiero que me vuelva a Iniciar sesión Vale entonces recargo Y si le doy a inspeccionar el elemento veré que ahora el ID es nueva pregunta y por tanto Eso quiere decir que al hacer clic a va me Uh Qué curioso y de Nueva pregunta me sigue haciendo me sigue funcionando como login Qué curioso porque se ha quedado con el elemento es decir Le cambia el ID No pasa nada porque lo puedo trabajar con clase pero ID nueva pregunta Vale pues bueno vamos a ver y a ver de qué manera a ver de qué manera vale si al botón de Iniciar sesión le he puesto a ver le he puesto un click vamos a ver vale pues puedo decir lo siguiente dónde estás botón punto onclick es igual a nul y le cambio la pregunta vamos a verlo hago clic Vale ahora es nul solo en este caso recordemos y ahora evidentemente pues voy a atrapar el comportamiento de crear una nueva pregunta por tanto ahora a continuación voy a hacer lo siguiente y voy a decir Let nuevo botón es igual o puedo hacer esto realmente botón es igual a document.get Element byid Iniciar sesión no nueva pregunta y botón pun onclick es igual a function console.log creamos una nueva pregunta probamos consola hacemos clic y creamos una nueva pregunta vale es el mismo botón pero lo estamos reutilizando para hacer esto otra cosa que podríamos haber hecho es en la interfaz de usuario crear dos botones y jugar a mostrar y ocultar un botón y otro quiero decir que este mecanismo que he utilizado pues no es que sea la única solución para este problema vale pero es una solución que en un momento dado pues se me ha ocurrido y que nos permite practicar con javascript y ver pues todo lo que podemos hacer con javascript vale Y ahora lo que quiero hacer es el formulario de crear una nueva pregunta desde el Front porque hasta ahora se puede crear a ver Esto está en funcionamiento no vale se puede crear eh nuevas preguntas desde el panel de control pero no directamente desde el Front con lo cual vamos a continuación a por ello Ahora vengo por aquí y vamos a ver y me voy a cliente me voy a crear la nueva versión del proyecto Y esto es eh nueva pregunta en el Front así que me vengo por aquí 023 vale Y aquí en funciones no en preguntas vamos a crear una nueva pregunta por tanto Let sección es igual a document query selector section sección innerhtml es igual a nada o sea vacío lo que haya vamos a verlo proyecto 23 preguntas html inicio sesión vale nueva pregunta vacío la sección y una vez que he vaciado la sección Bueno pues a continuación voy a Añadir un formulario para Añadir una nueva pregunta Añadir un nuevo formulario Pues bueno va a ser vamos a verlo si me voy a preguntas vamos a hablar de esto vamos a hablar del identificador de usuario título texto palabras clave categorías Por cierto y fecha será automática fecha el sistema pondrá la fecha automáticamente en base a cuá lo haya publicado necesito En definitiva título texto palabras clave y categorías vale vamos a ver porque a continuación voy a Añadir un contenido a ver un momentín Ahí está Vale y pues a ver okay porque hemos utilizado templates pero en este caso no es lo mismo en este caso no es un template a ver un momento Vale pues vamos a ver por aquí una vez que hemos vaciado la sección pues vamos a Añadir una serie de elementos es decir bar led entrada es igual a document create Element y voy a crear un elemento input entrada setattribute Pues type es de tipo text y entrada pun set attribute es ID y cuál va a ser el ID Pues el ID va a ser título Así que título bien una vez que tengo esto vamos a poner aquí punto y coma una vez que tengo esto voy a decir que sección punto appen Child y entrada vamos a comprobarlo vamos a comprobar que todo vaya bien pulso aquí pulso nueva pregunta y ahí tengo Pues un elemento luego estiz un poquito con css evidentemente para que quede Guay vale pero ente ahí tenemos eso ya por supuesto Pues podría poner también algo así como un placeholder o pues puedo también poner un vamos a ver Let texto es igual a document create Element p o h3 o lo que sea y texto pun iner html es igual a introduce el título o título de pregunta vale Insisto que si antes hemos visto Si antes hemos visto los templates vale recordamos que tenemos los templates para plantilla pregunta plantilla respuesta plantilla de todo vale pues podemos crear un template o podemos formatear algo con javascript yo eh soy más proclive a la filosofía de los templates pero como ya hemos visto templates para varias cosas Pues ahora lo que quiero es crear el formulario mediante javascript Para que veamos varias formas de hacer lo mismo vale Y así pues aplicamos Cuantos más principios mejor y así el ejercicio queda más rico no entonces sección aensa el texto lo digo porque alguien puede preguntarse Oye con lo que molaban los templates Por qué no usamos templates Pues porque ya los hemos usado y así vemos otras cosas entonces vamos a ver esto por aquí recargo nueva pregunta título de tu pregunta Vale ahora luego editamos más bien y ahora a continuación pues vamos a hacer varias cosas vamos a ver ahí es que estoy pensando luego en el estilo css Pero bueno siempre estaremos a tiempo Ok eh sigamos texto es igual a document create Element p entrada es igual a esto es contenido de la pregunta entrada es igual a text área type text no aplica en este caso yid es igual a contenido cómo se llamaba nsq se llama texto pues texto comprobamos que funciona nueva pregunta título de tu pregunta contenido de la pregunta vale Y ahora a continuación pues tenemos las palabras clave Vale pues texto entrada app and Child Okay vale texto entrada palabras clave entrada es igual a input type text y de palabras clave sección appen Child ahí lo tenemos Y por último bueno las categorías Bueno claro tengo las categorías por aquí Vale pues voy a poner de momento categorías texto app and Child categoría elige una categoría y entrada es Select type text no aplica ID categoría y a entrada punto appen Child A ver no led opción es igual a document create Element option op set attribute Val es general opción innerhtml es igual a general y por tanto entrada opción y sección appen Child entrada Au no quería cerrar qué rabia localhost barra proyecto no quiero el panel de control me voy a cliente preguntas html nueva pregunta elige una categoría y ahí tenemos general vale vemos como Pues bueno Esta es la forma antigua de crear elementos de forma dinámica mediante javascript probablemente hubiéramos acabado antes con una plantilla Pero bueno así como digo vemos un poquito de todo y ahora por último me queda crear un botón led botón es igual a document create Element button eh botón punto set attribute vamos a ver punto No punto nada Val es enviar y botón pun onclick es igual a function console log creamos una nueva entrada vamos a probarlo recargamos inspeccionamos pulsamos el botón nueva pregunta e cuidado porque me ha faltado sección appen Child botón nueva pregunta vaya ahí tenemos el botón pero vamos a ver valo enviar vale pues vamos a decir el value botón innerhtml Enviar Okay ahora sí bien y al hacer clic en enviar me dirá creamos una nueva entrada vale creamos una nueva entrada evidentemente eso requerirá que haga pues otra consulta a la Api para crear la pregunta correspondiente antes de ello antes de parar esta parte del ejercicio antes de avanzar a la siguiente parte hay una cosa que me gustaría hacer esto está metido dentro de la sección entonces voy a crear vamos a verlo dónde estás aquí eh led contenedor es igual a document create Element div entonces contenedor punto set attribute o classlist a también se puede hacer añado contenedor Y entonces ahora a sección no lo añado a sección añado a contenedor contenedor y por último sección punto appen contenedor qué es lo que hace esto Bueno pues lo que hace esto parece que tengo lo mismo pero no lo es lo que hago es que primero tengo una clase contenedor tengo un div con clase contenedor y el div con clase contenedor contiene a todo lo demás vale Y de esa forma es un poco más elegante para trabajar y ahora a continuación pues me voy al css y en el css pues digo que punto contenedor es pading 20 píxeles No lo sé Box sizing es Border Box e cuidado Qué pasa aquí ya tenía contenedor Ah pues sí ya tenía contenedor Vale pues no lo voy a llamar contenedor se ve que ya tenía contenedor Vale pues preguntas js Pues sabes lo voy a llamar contenedor interior ya está Entonces ahora copio y en css contenedor interior vale nueva pregunta ahora sí y ahora pues evidentemente ya tengo este eh este espacio interior Por cierto que a ver el tamaño de la letra Vale pues contenedor interior font size 11 píxeles vamos a verlo vale Y ahora pues un poquito de estilo contenedor interior input coma contenedor interior text área y digo with 100% padding 10 píxeles Box sizing Border Box vamos a verlo ahí e vamos a ver margin top 5 píxeles pero margin bottom 15 píxeles a ver qué pasa vale una cosa así también quiero vaya el input debería haberlo coj esto es un botón Vale pues lo pongo aquí abajo eh Select y Button ahí vale Y ya tengo el formulario para enviar un nuevo documento vale Ya tengo el formulario para pues Añadir una nueva pregunta el contenido de la pregunta las palabras clave la categoría a la que pertenece de momento es estático más adelante lo haremos Dinámico y enviar y ahora evidentemente una vez que le de a enviar pues lo que voy a querer procesar es qué es lo que ocurre en este onclick porque ese onclick como nos podemos imaginar pues va a generar una nueva pregunta va a publicar una nueva pregunta utilizando la app php Y de ahí pues continuaremos creando contenido dentro de la parte frontal de nuestra aplicación bien y antes de pasar a la siguiente parte del ejercicio voy a Modificar un poco el código porque hasta el momento he estado sobre escribiendo el valor de la variable entrada porque en principio cada vez que he añadido una nueva entrada como que me he olvidado de la variable he sobreescrito la variable pero claro acabo de caer en que ahora en cuanto le de al botón de enviar Pues voy a tener que recolectar la información de estos Campos entonces Claro si no tengo el selector disponible el identificador de la variable disponible para poder atraparlo Pues voy a tener que seleccionar por identificador o yo que sé vale por tanto Eso quiere decir que vamos a ver eso quiere decir que puedo reestructurar un poco este código y puedo decir que esto es entrada no esto es título por tanto tulo título esto y esto me lo puedo cargar no me hace falta ID Por qué Porque este es el id vale el contenedor appen Child entrada ahora vale texto led texto es igual a esto no me hace falta esto yen texto Ay cuidado vaya Eh pues bloque texto y texto vale palabras clave leed palabras clave esto Ok esto no hace falta palabras clave vamos a ver vale led categorías category esto no hace falta Y entonces categorías appen Child opción y vamos a ver y vedor a pensa el categorías y el botón ya está Vale esto quiere decir que yo ahora a continuación puedo crear una nueva versión del ejercicio aquí no puedo crear una nueva versión del ejercicio 24 enviar información y al enviar información vamos a verlo ahora y al enviar información me voy a ir vamos a verlo aquí y voy a hacer un fetch pues dos pun barra 005 gu Api barra y dentro de Api Pues voy a crear nueva pregunta php pero claro ahora a Nueva pregunta Le voy a pasar una serie de parámetros le voy a decir título es igual a algo and bloque texto es igual a algo and palabras clave es igual a algo and categorías es igual a algo qué va a ser este algo bueno pues este algo va a ser título punto Val bloque texto punto value palabras clave punto value y categoría punto value vamos a ver si esto es cierto aquí en 005 voy a crear un nuevo archivo llamado nueva pregunta. php y pregunta. php pues vamos a ver lo que va a hacer Pues mira Esto es lo que va a hacer Bueno o Esto bueno da igual esto mismo nueva pregunta. php esto fuera esto no devuelve ningún Jason y voy a decir insert into preguntas vales y digo nul coma y vamos a ver qué tenemos Aquí vamos a ver preguntas estructura tengo Siete Campos este es entero luego tengo marchar texto marchar número y date vale vamos a dejar el date ahí Vale entonces ahora esto quiere atrapar claro usuarios tengo que averiguar qué usuario es voy a poner el número uno de momento lo voy a forzar y no el dos voy a poner el dos de momento para forzar Vale ahora esto es get título por qu esto es get título pues porque aquí estoy pasando una variable de URL llamada título vale si aquí estoy pasando una variable llamada bloque texto Bueno pues eso quiere decir que aquí pongo bloque texto si aquí pongo palabras clave pues palabras clave si aquí pongo esto Qué es eh preguntas a la categoría a ver qué categorías tengo la uno voy a poner ahí un número uno vale Y ahora eh Por último Pues voy a poner aquí un date vale vamos a ver un momento a ver si tengo una fórmula rápida vale voy a esta fórmula rápida y cojo esta fórmula rápida vale date ymd que debe ser compatible con la sintaxis de date de mysql vamos a comprobarlo vamos a ver si funciona debe ser que sí pero vamos a probar hago así envío preguntas html vale inicio sesión Ok nueva pregunta vale y digo título prueba contenido de prueba palabras clave 1 2 3 4 categoría general le doy a enviar vamos a ver qué pasa vale categoría is not defined bueno casi vamos a verlo casi funciona por qué categoría is not defin categorías vale categorías venga otra vez recargamos nueva pregunta título de prueba contenido de prueba eh a b c d categoría general le doy a crear una nueva entrada en principio no se me devuelve nada porque no se me tiene por qué devolver nada pero porque no he pedido que se me devuelva nada pero yo me voy a preguntas y si todo ha ido bien pues vemos aquí título de prueba contenido de prueba a b CD y bueno el date no me lo ha cogido correctamente vale vamos a formatearlo correctamente porque no sé por qué no me lo ha cogido curioso a ver si yo me voy ahora a recargar título de prueba pero no me ha cogido correctamente Esto vale venga Yo supongo que para que se inserte correctamente aquí debe tener una comilla por aquí y otra comilla por aquí voy a probarlo nueva pregunta otra prueba otro contenido una otra tal vale envío okay recargo y ahora sí vale efectivamente le faltaba eso le faltaba tener eso correctamente bien una vez que tengo esto Pues bueno a continuación lo que puedo hacer es que cuando envío la pregunta si todo está bien Vamos a ver aquí abajo hago un fetch y en el fetch vamos a ver qué otros fetch tenemos por ahí den Vale pues en este fetch voy a hacer punto den para decir que cuando reciba una respuesta window location es igual a window punto location cual quiere decir que vale pues cuando creo una nueva pregunta tercera pregunta de prueba otro contenido palabras clave envío vale Y tenemos ya ahí se publica la tercera pregunta porque bueno Por una parte se había guardado en la base de datos y por otra parte pues lo que hago es recargar la página entera para que al recargar me vuelva a cargar las preguntas iniciales otra cosa que digo es que quizás podría no hacer falta vamos a ver si valor Cookie aquí lo que podría hacer es bueno meter esto dentro de una función que es carga artículos y así no haría falta recargar la página entera sino que ejecutaría una función de javascript y técnicamente sería más limpio Pero bueno no pasa nada lo dejo con window.location.url forma de salir que me queda es recargar la página cuando Pues muchas veces pinchar el la palabra digamos el icono en la imagen eh No la imagen sino la identidad corporativa del portal Pues debería una regla de usabilidad debería devolverme a la página principal Bueno pues voy a hacerlo y para ello voy a crear una nueva versión del ejercicio esta Va a ser sencilla y vamos a ver clic en identidad corporativa Vale entonces yo creo que al hacer clic en identidad corporativa voy a implementar esto que estaba comentando Más que nada porque esto del window pun location pues igual se puede considerar un pelín cutre entonces voy a hacer lo siguiente vamos a ver voy a crear una función tenía la función carga artículo Vale pues voy a crear la función carga artículos entonces la función carga artículos sin parámetro aquí vale la función carga artículos va a recibir todo este código de aquí todo este código de aquí okay Vale bien y por lo tanto cuando cargo la página ejecuto carga artículos Okay vamos a probarlo proyecto preguntas así que vemos que funciona correctamente y claro esto lo que hace es que cuando yo inicio sesión y creo una nueva pregunta pues no hace falta ahora que haga Windows location sino que puedo ejecutar car tículos Y esto es más limpio es más elegante que un window pun location vamos a verlo vale nueva pregunta Ah Ah envío claro cuidado porque me ha cargado aquí me ha cargado aquí los artículos Por qué Pues porque probablemente la función debería tener un sección le eches sección punto innerhtml es igual a nada Es decir vacío vale nueva pregunta meto una nueva pregunta y ahora ya me lo mete pero no he hecho un window pun location es decir no he recargado a hestia esto quiere decir que yo ahora lo que puedo hacer es que por aquí por aquí por ejemplo vale por aquí en el window load Pues voy a decir que e momentín voy a decir que document query selector y qué es esto de aquí esto cómo lo puedo seleccionar pues h1 punto onclick es igual a function y le digo carga artículos ya está Vale así de limpio y así de sencillo Así que recargo entro en un artículo pero si ahora pincho en ayuda pues vuelvo a la página principal vale tercera pregunta de prueba pero vuelvo a la página principal entonces vale la pena hacer funciones porque así luego más adelante pues puedo reutilizar esas funciones Tantas veces como me haga falta lo cual quiere decir que en este caso Mira de hecho este window pun location voy a hacerlo mismo Bueno este window pun location sí que igual lo dejo vale pero vamos a ver puedo crear diferentes funciones voy a hacer un proyecto de refactorización y en la refactorización voy a decir que por ejemplo las funciones de carga un artículo y carga artículos pues las paso a funciones las funciones de esto de Aquí vamos a ver Esto es inicio de sesión Pues voy a crear por aquí un function Iniciar sesión Y si todo va bien Al iniciar sesión le pongo todo este código y si todo va bien debería seguir funcionando lo que tiene la refactorización Es que después de hacer una extracción a función como acabo de hacer pues hay que comprobar que todo sigue funcionando correctamente claro vale Así que 26 preguntas html vale Iniciar sesión sigue funcionando todo Ok vale todo sigue funcionando correctamente que es lo que debemos comprobar bien y ahora vamos a ver Okay vale Y ahora Aquí voy a crear una función nueva pregunta donde lo que voy a hacer ahora es seleccionar todo esto hasta dónde pues hasta ahí Probablemente sí okay funciones nueva pregunta Y entonces ahora cojo nueva pregunta me voy a preguntas y aquí pongo nueva pregunta Vale o lo que puedo hacer es dejar el selector fuera vamos a ver okay boton un click Bueno lo voy a dejar ahí dentro vale Y así en preguntas Pues tengo Claro que tengo carga artículos tengo la función de Iniciar sesión tengo la función de Nueva pregunta tengo la función de carga artículos cuando hago clic en el h1 Y así pues la función principal digamos se me queda limpia y sé que todas aquellas funcionalidades que voy implementando pues tienen la forma de funciones vale de tal forma que pues este código es más legible y es más entendible yo haría una cosa yo haría una cosa Este on click lo voy a sacar fuera a ver aquí Iniciar sesión vale más que nada porque Iniciar sesión es muy confuso no se sabe qué es lo que hace pero claro cuando pulse el botón en ese caso Iniciar sesión vale eso creo que es un poquito más claro okay y aquí lo mismo lo que pasa es que no puedo hacerlo exactamente Porque si me voy aquí a Nueva pregunta Pues el on click no lo tengo hasta aquí abajo Vale entonces y lo tengo dentro de una estructura de control vale Por eso digo que eso es más delicado Pero bueno vale con lo cual carga artículos Iniciar sesión nueva pregunta y así tenemos pues una refactorización realizada que evidentemente como os podéis imaginar pues tiene como objetivo mejorar la elegibilidad del código porque el código se me estaba haciendo muy monolítico digamos muy grande muy largo muy estructurado muy difícil de leer o de mantener y con esto lo que buscamos es poco a poco pues a medida que el código va creciendo de complejidad pues irlo compartiment irlo encapsulando y de esa forma pues tener más control que el código sea más claro y que de Cara a futuro pues tenga una mejor mantenibilidad