vale voy a cerrar Esto vale voy a cerrar esto que es rollo correo electrónico cierro el servidor un momento y vamos a hablar a continuación de El concepto de base de datos a ver que no sea basada en sql que no sea relacional en estos días anteriores hemos estado hablando del concepto de qué ocurre cuando queremos hacer un mapeo entre un objeto y una de dato relacional y volver vale porque hay veces que se puede dar ese caso pero sin embargo hay otras veces en las cuales vamos a verlo por aquí también lo puedo ver en la planificación las programaciones en las cuales lo que necesitamos aprender aquí me estoy saltando un poco este punto para entrar ya en este punto vale son las bases de datos objeto relacionales y bases de datos orientadas a objetos entonces Claro en este caso ocurre además que las bases de datos puras orientadas a objetos no son muy frecuentes en el sentido de en el mercado en ofertas de empleo para entendernos pero sin embargo las bases de datos documentales que guardan muchas similitudes con las bases de datos relacionadas O sea orientadas a objetos sí que se están pidiendo bastante en ofertas de empleo y sobre todo nos permiten comoo te diría yo eh hacer un cambio de mentalidad con respecto a las bases de datos de tipo sql porque sql es como todo tablas y columnas y filas y registros y claves y todo eso y está muy bien Es decir las bases de datos sql nos permiten eh resolver un montón de problemas y yo siempre he reconocido que yo estoy muy esecu eliz vale es decir yo eh voy a programar cualquier aplicación y automáticamente en mi mente pienso en Tablas Por qué Porque llevo décadas pensando en bases de datos relacionales con lo cual quieras que no pues ya lo tengo integrado dentro de mi cabeza pero ocurre que vamos a descargar en mongodb Community pero ocurre que pues también debemos ser conscientes vamos a ver por aquí de que también existen otros tipos de base de datos vale No todo es sql No todo es relacional no todo son tablas vale hay otras cosas que podemos utilizar para gestionar datos entonces me voy a descargar vamos a ver no e aquí Download Amazon Linux no debian vale debian 12 porque no hay unun específicamente No pues Hala Descargar me voy a escritorio Ok 36 megas me parece poco la verdad Pero bueno eh vamos a ver Okay a ver more options Vale pues no vale pues vamos a venir por aquí vamos a aquí a escritorio vamos a modificación y eh server vale abrir con centro de aplicaciones Okay instalar vale vale Okay es pristo por un tercero y puede amenazar a su tema datos personales sí venga vamos a por ello usuario importante el hecho de que nos lo bajemos de una web oficial quiero decir que me lo estoy instalando con confianza porque me lo estoy bajando de mongodb.com O sea si fuera otra página desconocida pues evidentemente no vale instalado y esto me extraña porque yo no he podido instalar vamos a ver mongos no vale pues esto me extraña que me diga que me lo he instalado a ver sudo app install mongodb contraseña no e a ver ubuntu ahí y vale Y ya está entonces okay okay Ok vale Gen upg y curl creo que los tengo pero vamos a darle en Windows es mucho más sencillo eh Windows Simplemente te descargas un paquete lo instalas y ya está Vale importamos esto Okay muy bien vale Okay acepto Okay Vale ahora reload tranquilos porque como ya os digo en Windows esto descargas un paquete lo instalas y ya está Vale y ahora convi server Okay Vale descargando Ahora sí eso 32 megas no sé qué ha sido pero Mira de hecho estoy por quitarlo Ah encima Qué cosa más rara vale Okay bien Run Bueno voy a decirle mongos shell Okay vamos a ver Ah Wow connecting to y en principio conexión rechazada vale vamos a ver you limit vale Okay arrancamos el servicio Okay no vamos a ver en qué estado está Okay Vale ya sí Está arrancado bien y ahora no quiero pararlo no quiero reiniciarlo quiero mongos shell ahora que está arrancado quiero mongos shell vale test ya estamos dentro insisto correcto a finales primero utilizamos un poco el shell o sea amos un poco monb pero ya te digo lo utilizamos como una primera como un primer acercamiento vale como un decir e chicos existe Esto vale hicimos cosas nos conectamos nos desconectamos todo eso genial vale hoy se trata un poco de en primer lugar repasar qué era eso de mongos shell pero por ejemplo el año pasado lo utilizamos directamente conectado con nodejs que está muy bien que no te digo que no pero el objetivo de este año es conectar mongos shell con php conectar mongos shell con python conectar shell con todas partes y hacer un uso práctico de mongos shell el año pasado fue pues creamos una pequeña web comprobamos que funciona y ya está Vale Por cierto eh yo ahora mismo estoy ya en el shell lo cual quiere decir que puedo empezar a utilizar deb a través de línea de comandos pero claro utilizar deb a través de línea de comandos pues es un poco duro vale es como utilizar eh Como utilizar May sql con línea de comandos yo puedo decir ahora por ejemplo use empresa vale creo una base de datos empresa y switch to empresa vale pero digo pero claro aquí estoy ciego o sea tengo que conocer los comandos para trabajar mejor entonces aquí a continuación a ver un momentín no vale ahora a continuación a ver Esto me ha esto deb server Qué curioso vale eh Ahora quiero el eh Download eh db Compass Y ubuntu 2404 por cierto qué O sea esto no queda más remedio si un día nos tenemos que Conectar a un mongodb en un servidor vale pero de momento vamos a intentar evitarlo entonces mongodb Compass Download que es la graphic user interface vale Ah mira estaba aquí mismo estaba aquí sí vale deb Compass Download vale lo quiero para eh ubun 64 bits Okay en package lb vale me lo guardo y descargando y ya lo tengo Ok Aquí está voy a abrirlo con el centro de aplicaciones no esto aquí Dónde estás centro de aplicaciones aquí compas potencialmente inseguro sí venga instalar contraseña instalando instalado vale vamos a ver si lo tengo ya por aquí está el compas está abriéndose está aquí en vuestro caso simplemente recordaros que el compas viene ya por defecto en el paquete instalable de db para Windows vale con lo cual no tenéis que hacer nada Welcome to Compass vale Ok con lo cual add New connection voy a crear una nueva conexión y me conecto a mongodb local Host 2707 esto es voy abar local Host color no color da igual Green da igual bien y bueno y favorite disconnection vale porque va a ser la de por defecto siempre así que save and Connect y ya tengo por aquí el Compass con el cual puedo empezar a trabajar y puedo empezar a crear bases de datos bien en primer lugar voy a crear una nueva base de datos a cual Perdona conexión no quita no voy a crear una nueva base de datos Hola Estoy prendo botón eh Bueno pues aquí vale Y voy a crear una base de datos a la cual voy a llamar empresa no le llamo crimson porque vamos a empezar a hacer un poquito de testing vale Pero y voy a empezar a crear una Collection name llamada clientes Así que le doy a cree database y ahora a continuación yo puedo Añadir datos o bien añadiendo datos directamente vale insertando un documento o bien puedo el mosell y puedo insertar vale debe clientes fine Bueno pues esto me enseña los clientes pero no hay clientes Ahora mismo así que dentro de empresa voy a decir db pun clientes punto insert One y el cliente que quiero insertar vemos que pongo js no sé si lo veis ahí vale No sé si se ve pero digo nombre No nombre es José Vicente coma apellidos es no quieto es dos puntos carratala sanchiz y ya está Vale eh yo de hecho por aquí ya que estamos copio me voy a ir a brackets no me voy a ir a aquí dónde está ostras No tengo git voy a abrir gedit me voy a ir a eh acceso a datos voy a bases de datos documentales vale son las bases de datos objetos relacionales y orientadas a objetos estamos ahora en bases de datos documentales están aquí vale estamos aquí técnicamente vale bases de datos documentales nativas y voy a poner 001 insertar punto js porque es un J SW realmente fantástico cojo dime que copias no tío vale va Bueno pues enter Ah muy bien fantástico shell no responde compas no responde pues me parece fenomenal Vale pues Hala se me ha quedado frito con lo cual local Host empresa vale clientes pero en clientes nada con lo cual pues lo voy a hacer aquí voy a decir db clientes pun insert One y eh le digo en este caso que nombre es José Vicente coma apellidos es carratalá sanchis y ya está bien copio mongos shell pego quita pego Ahora sí bien he insertado un elemento con lo cual ahora me vuelvo a clientes dentro de clientes le digo refrescar Y compruebo como tengo un elemento vale claro qué ocurre pues que lo bueno que tienen las bases de datos documentales Es que yo puedo insertar lo que quiera Cuando digo lo que quiera 002 insertar complejidad con respecto a lo que hemos estado haciendo en las semanas anteriores de quieras que no pues hemos estado ahí sufriendo un poco con respecto al tema de la conversión a de objeto relacional las bases de datos documentales especialmente aquellas bases de datos que están orientadas a objetos Y en este caso un J son obviamente es un objeto y ahora vengo y digo pues Okay yo tengo correos no tengo uno tengo varios así que digo info @ josevicenteabadcoca pegar le doy a enter me vuelvo a clientes me vuelvo a refrescar y veo que tengo una Ray y no pasa nada me ha guardado una Ray y ya está y todo el mundo es feliz vale Pero y ahora vengo aquí a continuación y digo no 003 insertar más complejidad Y digo no es que los correos realmente son una Ray pero cada Ray es un objeto Y entonces digo eh tipo dos puntos personal un momento que quito esto tipo personal coma correo es igual a esto y esto es un objeto Vale y lo bajo para que se vea correctamente la jerarquía entre los elementos y ahora vengo por aquí y digo y ahora o sea meto un array que tiene un objeto y puedo meter lo que me dé la gana trabajo es info @hara3131 y puedo hacer absolutamente lo que me da la gana entonces eh lo que está claro en este caso es que las bases de datos documentales pues tienen ventajas vale la base de datos documentales por supuesto tienen debilidades con respecto a las bases de datos relacionales tienen algunas diferencias con respecto a las bases de datos orientadas a objetos Aunque tienen más similitudes que diferencias menos lo tengo que decir pero en ciertos escenarios concretos pues tienen evidentes ventajas y es que si tengo un tipo de datos complejo pues simplemente lo meto y ya está pero cuando digo que lo meto y ya está quiero decir que la base de datos reconoce lo que es un array y reconoce lo que es un objeto y luego más adelante me va a dejar iterar y me va a dejar meterme dentro de los objetos bien Ahora a continuación pues lo que quiero vamos a beber un poco más aunque ya se me está acabando Pues ahora a continuación lo que quiero ya he hecho el insertar pues quiero repasar un poquito el crud de las bases de datos documentales Vale entonces vengo por aquí y digo 00 eh listar registros vale para listar registros es db clientes. F y db clientes. find lo que va a hacer me voy al mongos shell voy a decir cls vale pongo punto find y me lista los clientes esto es como el Select de sql Pues aquí se llama file bien a continuación vamos a hacer más cosas 005 y em encontrar Vale y digo clientes find donde nombre es José Vicente y esto es encontrar Y en este caso me va a funcionar prácticamente Igual me encuentra como todos los he insertado como José Vicente pues me los encuentra a todos digamos vale bien Ahora qué puedo hacer a continuación pues lo que puedo hacer es también actualizar puedo eh actualizar puedo encontrar el primero encontrar solo uno primero vale puedo encontrar uno y es find One copio cls pego vale Y me encuentra uno el primero he hecho bien quiero update 007 actualizar 1 update donde el nombre sea José Vicente y un momento update One para poner la condición de búsqueda y la actualización y aquí está no pero espérate esto José Vicente coma set momentín que te lo digo sí set es nombre es igual a Juan esto es update One creo que no me dejo nada si queréis vamos a hacer así vamos a hacer así vamos a hacer así nombre José Vicente set por aquí el set bajará y ahora pues bueno como veis Ay no quito esto aquí y así nos aseguramos de que el número de corchetes es correcto el número de llaves es correcto me voy al Compass update One no A ver unexpected token qué te ha ocurrido ahí le falla esto por qué name Juan vale Ah Sí perdón perdón aquí esto aquí y set esto de aquí Estos son una y dos y ahora creo que ya vale shell cls pego Ok vale solo me ha actualizado uno recargo vale solo me ha actualizado este de aquí se sigue llamando esos de aquí José Vicente y luego también que sepamos que 008 eh actualizar muchos Tenemos también el update meni donde copio pego ahora todos los clientes se han convertido en Juan vale Y por último 009 eliminar un Pues voy a decir delete One y donde nombre es igual a José Vicente no hace falta que le ponga más condiciones copio mongos shell pego Ok deled count Ah no Claro Perdón es que nadie se llama José Vicente ahora se llaman Juan claro por eso el delit count me da cero Ok vale he eliminado uno con lo cual tenía tres clientes pero ahora le doy a refrescar y ahora solo me quedan dos vale esta primera pasada rápida es una Pues un refresco un recuerdito del año pasado Para que veamos que aunque las bases de datos documentales pues puedan tener claras diferencias con las bases de datos relacionales basadas en Tablas estas están basadas en documentos Pero podemos manejar y podemos gestionarlas y podemos trabajarlas sin ningún problema ahora con todo esto hemos trabajado directamente dentro de mongos shell pero yo ahora Quiero conectarme a mongos shell con cualquier lenguaje de programación porque por ejemplo yo podría lo que hemos hecho en la clase anterior es decir el cliente de correo electrónico y no guardarme los correos electrónicos en una tabla relacional sino que igual me los podría guardar en una base de datos documental ya que técnicamente cada correo electrónico es un documento vale bien No lo voy a hacer hoy pero ideas vale ideas que podríamos hacer bien pues ahora me voy a ir a python mongodb find One sabes algo así con lo cual me voy a idle me voy a idle voy a crear un nuevo archivo me voy a ir a bar W html me voy a ir a Adam me voy a ir a segundo me voy a ir acceso a datos documentales número uno me había quedado por el número no me acuerdo 009 vale pues 010 Buscar en con lo cual probablemente no tengo instalado el p entonces me lo voy a instalar Ah sí oh e Force a ver va python install packages así a ver No sí casi Ah mira qu bien valeo no para hoy pero para otro día okay Vale entonces ahora pip instal by vale Ok Muy bien una vez que hecho esto Una vez que hecho esto me copio Esto me lo pego conecto a mongodb hago un find One donde nombre es igual a Juan creo que es ahora imprimo el resultado y ya está es decir en primer lugar creo un cliente base de datos es cliente Cómo se llama esta base de datos creo que la hemos llamado empresa y la colección es en la base de datos el nombre de la colección que ha sido clientes Así que si todo va bien si todo va bien si todo va bien Vamos a probarlo f5 no Collection is not Def no es colección ya no lo puedo cambiar f5 y me dice mira he encontrado este registro que se llama Juan caratal sanchis con los correos info @ José viicente carratala no sé que no sé cuántos vale Esa Albert Esa es la pregunta vale Esa es la clave entonces eh A ver La idea es que en el momento en el que cuando estemos guardando algo tú veas que los datos que estamos guardando son tabulares eso es automáticamente una base de datos sql en cuanto veas que los datos que vas a guardar tienen pinta de ser filas y columnas eso es una base de datos sql si tú ves que los datos se disgregan Pero dices Bueno pero se disgregan pero como sabes hago un par de tablas algo un left joint y lo veo y lo tengo pues en ese caso vale sql sigue sirviendo ahora en el momento dónde estás en el que tú tienes un registro que dice Sí es que tengo una propiedad pero es que en otra propiedad dentro de la propiedad es una array dentro del array tengo un objeto y aquí dentro puede haber otros arrays porque aquí dentro podría haber en personal diferentes Correos en ese momento donde en mysql te puede empezar a explotar la cabeza es decir hostias cuántas tabl Cuántas tablas tengo que hacer aquí para guardar la información pues lo puedes hacer con mongodb un ejemplo clásico es una tienda online vale una tienda online un pedido es un pedido tiene un cliente y tiene una fecha pero a continuación dentro del pedido Hay un montón de líneas de pedido un pedido puede tener múltiples productos pues la idea Está en que eso eh técnicamente en sql pues hay que hacer Cuatro Tablas que si clientes que si pedidos que si productos que si líneas de pedido y empezar a hacer left joints y el left joint de una tienda online pues suele ser complejo en deb es un documento sabes Entonces por eso te digo que luego también eh Te digo lo mismo que estábamos comentando al principio de la tarde y es que al final también Ah no esto lo estamos comentando en primero que también depende un poco de la persona sentido de que eh Igual yo hay veces que hago tablas sql cuando podría hacer un deb porque que estoy muy acostumbrado y hay gente más joven que eh que como ha crecido se ha formado directamente con mongodb Pues claro todo lo hace en mongodb cosas que dices pero tío si es una tabla o sea para qué le haces un documento es una tabla sabes yo que sé también depende un poco de la persona que lo esté operando no Entonces ahora Yo vengo por aquí y digo vale esto ha estado bien pero vamos a ver algo que va a estar mucho mejor Yo vengo por aquí por re recuperar ejercicios de días anteriores Oye dónde está idel aquí vale Y yo ahora digo 011 insertar vamos a probar la inserción y en la inserción atención porque esto de aquí al final va a ser un diccionario yo digo cliente es igual a diccionario y digo Nombre es Juan Carlos coma apellidos es Jiménez García Ok tengo un cliente y a continuación voy a decir Collection insert One claro fíjate aquí es insert gu bajo One vale hay que acostumbrarse a las pequeñas particularidades de una de las apis en este caso pues cambia insert One con la o mayúscula por un gu bajo Pero bueno vale lo que sea colección insert One e inserto cliente vamos a ver Ok y reemplaza valor obviamente vale le doy print documento encontrado No es documento encontrado no y resultado en este caso resultado no me va a dar un campo encontrado pero me va a decir Ok oko o lo que sea Vale y error o no o nada que Mostrar vale f5 resultado insert One result object ID Tac atrás Vale entonces Yo vengo por aquí me voy al mongos shell No me digas que lo he cerrado No lo he cerrado me voy aquí a refrescar y veo que tengo a Juan Carlos Jiménez García vale con lo cual acabamos de comunicar correctamente eh una cosa con la otra vale acabamos de comunicar correctamente e caray estoy Me estoy acordando del principio de la tarde acabo de caer de que estaba haciendo la instalación de php con el php mail pero estaba en mi propio ordenador con lo cual sí que podía tocar la instalación de php en fin y caigo ahora mismo sabes da igual eh el caso esto hasta aquí ha funcionado pero ahora lo divertido es lo que viene a continuación 012 insertar independientemente de la complejidad y ahora viene lo bueno porque digo cliente es nombre voy a poner eh sabes David Manuel apellidos González e García vale y ahora atención Yo vengo por aquí y digo correos hago una lista y digo david@gmail.com coma David @hotmail.com vale Así que vengo por aquí inserto el cliente a ver un momentín Vale entonces vengo por aquí ejecuto f5 resultado insert One result me voy a amongo shell MB a Compass recargo y tengo que o sea he cogido un diccionario en python vale un diccionario en python le he metido una Ray y ya está y soy feliz y no tengo que complicarme y hacer todo lo que hemos hecho en semanas anteriores que tenéis que aprenderlo porque hay veces que en la empresa que sea os dirán No es que lo tienes que transformar al relacional Bueno pues ya está pues si lo tienes que transformar a relacional pues estas semanas hemos estado viendo có se puede hacer pero el caso es que yo vengo por aquí y ahora digo Espera 013 más comple gira todavía y ahora en correos pongo un array Y entonces digo eh personal no tipo personal coma correo dos punos david@gmail.com coma tipo trabajo correo David @hotmail.com y tengo una lista que tiene objetos y lo puedo insisto lo puedo complicar todo lo que me dé la gana y no pasa nada le doy a f5 se ha insertado recargo y tengo aquí una Ray de dos objetos y cada objeto tiene sus propias propiedades y por supuesto podemos hacer el camino de ida y podemos hacer el camino de vuelta es decir eh 014 eh seleccionar a todos y entonces vengo por aquí cliente esto da igual eh find y find De nada y ya está vale Así que hago así Ok not no F no es F f5 resultado pnon curs Enton ahora correrlo entonces digo eh aunque esto teóricamente sí que espera un segundo porque yo creo que se debería poder recorrer no no vale Okay Venga pues lo que sea así que voy a decir que eh for resultado for documento in resultado print a ver si ahora print documento f5 y ya está y ahí tengo todos los documentos incluyendo este último que he metido Y si os fijáis he recuperado el objeto tal cual lo había metido tal cual lo había metido con un dato más hay que decirlo con un ID vale os acordáis que en días anteriores nosotros habíamos tenido que meter un ID para luego poder recuperar el dato y poder enlazar una tabla con otra vale pues aquí yongo db automáticamente lo quieras o no te pone un ID un poco diferente a las tablas sql porque es un ID que no es relacional sino que es un Hash a partir de no sé qué puñetas cómo lo hace pero te hace un Hash pero te hace el Hash Vale y te pone el identificador y con esto por lo tanto acabamos de demostrar que si en algún momento dado en python necesitamos lo que estábamos comentando alber de cuándo utilizar Esto vale pues si yo hago lo que s Generalmente lo que sea muchas veces es un videojuego vale porque en videojuego se utiliza mucho como ya habéis visto la programación orientada a objetos y yo tengo que guardar eso en un có diría yo en una base de datos pues mongodb es la base de datos natural para guardar objetos vale bien más cosas hemos visto la conexión con python y hemos visto que no tiene ninguna complejidad vamos a ver la conexión con php porque en php estamos guardando mucha informción Entonces esto fuera Vale y deb php find all vale tenes que instalar la extensión de deb vale para php pero como os digo Aquí vamos a empezar a tener un problema vamos a ver p no pql Eh Esto Qué es no with sudo install php de B a ver si me dice que esto es posible que debe ser que sí bues no es que no sé que es pkl no s si lo tengo instalado vale Vamos allá Esto exit vale Clear le digo pegar pql orden no encontrada esto Qué es a ver un mín bueno primero voy a mirar primero voy a mirar un momento a ver si ya tengo eh php o sea el de B Vale entonces me voy a 015 hago un phpinfo.php y aquí en php info lo digo porque igual estoy peleando y ya lo tengo instalado No lo sé igual no y digo php info vale con lo cual ahora me voy a local Host me voy a dam me voy a segundo me voy a acceso a datos me voy a eh bases de datos documentales me voy a nativas me voy a php info Y eso es lo que tiene mi instalación de php ahora mismo Vale entonces por ejemplo tengo mysql ahora tengo deb no tengo mongodb Vale ahora está confirmado entonces install mongodb on php library m y ubuntu 2404 a ver si no a ver vale php es que no sé qué es no sé qué es pql pero voy a decir sudo app install pql pues no es que no sé qué es Ah composer vale pu qué rollo a ver momentín without composer quiero algo más directo y dale Sí pero ya lo sol no pero es que de hecho lo he instalado y pasa de mí pero bueno a ver eh What is pel vale muy bien install pel ubuntu okay Vale instalamos okay Vale ahora ejecutamos enil developer sí Yes code no quiero livon si Yes o qu Ay no va venga c encryption auto snapy sí Z va todo va venga Okay parece que mi ordenador vaya a explotar Bueno pues nada pues ahí estamos Bueno yo ahora mismo Sí correcto o sea yo estoy igual que sepáis por fin que sepáis que yo estaba flipando caracoles por la magia negra que estaba apareciendo ahí en la consola para decir para instalar un conector de sql o sea de deb Pero bueno Vale entonces eh vamos a sudo service apach 2 restart para que se dé cuenta de los eventuales cambios me vuelvo a ir al php info vale en el php info Ahora busco no sigue sin aparecer Muy bien pues como sigue sin aparecer vamos a esto en el archivo php.ini vale eh php.ini onun 2404 que estará en etc un momentín estará en etf estará en Apache Espera que te lo digo Ahí está fd php ls fd 8.3 Vale y CD apache2 y sudo eh Nano php.ini Vale entonces si no tengo la directiva Vale Voy a ponerla abajo del todo si no tengo la directiva que lo más normal es que no la tenga mira lo voy a poner la voy a poner por aquí okay vale okay No dónde estás aquí y pego extension vale control o guardar control x salir reinicio Apache recargo busco y deb vale Ya tengo mungo db instalado dentro de mi servidor ha costado un poco pero ya lo tenemos y ahora a continuación pues lo que quiero es ahora que ya lo tengo instalado es realizar una búsqueda y hacer lo mismo que hecho en python para comprobar que puedo php mongodb find all Así que ahora me voy aquí y me voy a archivo nuevo 016 Encontrar todos con php.php Okay vale esto ya lo tengo y aquí no esto teóricamente no I have already installed db extension ahí me puedo ir a la documentación oficial pero ay espera ya sí the vend aut no me n no me nome Pero bueno Ok Encontrar todos pego local Host base de datos es empresa nombre de colección es clientes y vamos allá y esto es lo que quería vale el punto fine quito para que veáis que se requiere mucho menos de lo que parece si usas composer and If I do not use composer vale Sí Ok eso ya está esto eso es lo que está buscando eh Para tener todos los documentos vale una formulación un poco raro no me gusta mucho vamos a verlo vale TV consulta vacía vale seleccionar base de datos es eh empresa. clientes Okay consulta iterar print r documentos vale Vamos allá a ver dónde puede estar esto no esto no esto Ay estaba ahí en el php info vaya vale segundo acceso a datos acceso documental uno encontrar Vale y ahí lo tenemos y ahí si os fijáis estoy encontrando Estoy recuperando eh todos los clientes voy a intentar simplificar la sintaxis 017 simplificar Y entonces Ahora vengo por aquí y digo seleccionar a todos Vale y digo with a syntax in this Style vamos a verlo Esto me gusta mucho más Esto me gusta mucho más creo que es una sintaxis más clara vale Fuera URL Es OK fuera empresa Es OK clientes Es OK vale punto find recorrer yo creo que así lo Vais a poder ver de una forma más clara yo creo vale muy bien eh ejecuto de nuevo el resultado va a ser el mismo Epa no funciona vale Ok por qué pasa no no a ver Ah no no es Driver manager vale es New deb Driver manager vale a ver No tampoco Ah no me fastidias A ver vamos a ver dónde está el error ejecuto Okay ejecuto no funciona vale la base de datos es empresa se llama empresa creo que sí empresa y clientes colección No es eso Bueno pues no pasa nada vamos a esto vamos a esta Aquí vamos a esta sintaxis y vamos a seguir con ella 018 insertar vale Y ahora al insertar yo lo que quiero es lo siguiente vamos a ver ahora con esta sintaxis quiero insert One ahí y ahí copio código luego esto podemos abstraer podemos crearnos una función propia pero la gracia de esto la gracia de esto Driver query vamos a verlo okay Vale ha insertado a Juan Pérez example edad 30 me voy al Compass en el Compass recargo y ahora veo que tengo seis elementos d tengo Juan Pérez example.com edad 30 de esta misma forma de esta misma forma ahora a continuación un momento que te lo digo ahora a continuación yo puedo complicar 019 complico la inserción Y entonces digo que email es igual a una Ray es Juan Pérez @example.com coma correo2 @pr presa.com ejecuto Esto me voy al 19 complico la inserción me voy al Compass no esto es esto no caray compas aquí recargo ahora tengo Siete documentos y vemos Que email es una Ray y dentro de la Ray tengo el correo un el correo dos y básicamente esto quiere decir que puedo meter absolutamente lo que quiera es decir la idea de esta clase la idea de la sesión de hoy es mostraros que tenéis disponible mongodb que es fácil de utilizar y que en un momento dado Vais a poder guardar todo lo que queráis de forma sencilla y ya os digo eventualmente prácticamente desde cualquier lenguaje de programación el año pasado Estuvimos viendo la conexión con node Más que nada porque bueno como al final mongodb trabaja con jas no de es javascript en el lado del servidor le enviamos Además desde la web con javascript Pues bueno pues digamos que la conexión más natural la conexión más sencilla es la de mongodb a través de no dejs Y a partir de ahí le conectas lo que quieras pero en la clase de hoy un poco para continuar digamos por dónde nos quedamos el año pasado pues lo que quería es mostraros que técnicamente podéis trabajar con mongodb con el lenguaje que queráis qué es lo que tocaría haccer ahora Bueno pues lo que tocaría hacer ahora es crear un superc controlador de mongodb en el sentido de que eh En un momento dado pues tengamos la capacidad con respecto a una base de datos de acoger tal y como hemos hecho estos días estas semanas más bien ya llevamos meses con ello eh pero de la misma forma aquí que hemos sido capaces de Pues de insertar y de guardar y de recoger y de hacer de todo con mysql pues poder reemplazar este mysql poder meter de B pero eventualmente para poder gestionar una base de datos en mongodb Pues nos hará falta como os digo actualizar los controladores vale por lo menos eso sí os tengo que decir que el concepto es el mismo el concepto está claro es decir yo aquí lo que voy a hacer básicamente va a ser duplicar esto y decir Vale pues quiero poder tener un de b y quiero que php o python o lo que os dé la gana se adapte para que el controlador me acepte tanto gestionar una base de datos mysql como gestionar una base de datos mongodb cualquiera de las dos vale Y ahora eventualmente javascript claro Depende de lo que envíe obviamente vale pues php o python redireccionará a mysql o redireccionará a mongodb una vez dicho esto Pues claro ahora lo que podemos hacer es crear un pequeño controlador que vamos a empezar hoy haciéndolo pequeño vale vamos a ver si hoy la clase la hacemos hasta y media aproximadamente para que pillis el concepto y a partir de ahí sabéis y os hacéis una idea de lo que vamos a hacer en próximos días Es decir l un momento que en crimson vamos a ver en crimson en dam en segundo en sistemas en proyecto en tooltip en servidor tenemos una clase llamada conexi db.php y sabemos que conexión deb gestiona todo vale sabemos que conexión deb pues tiene todos los métodos que sean necesarios para trabajar con la base de datos de hecho nos ha costado Pues un esfuerzo Mira tenemos ahí hasta lo de codificación vale nos ha costado un esfuerzo hacer este controlador pero a cambio sabemos que le enviamos un Jason al servidor y ya no nos tenemos que preocupar De nada vale sabemos que el servidor automáticamente sabe lo que tiene que hacer con ese elemento Vale pues lo que vamos a hacer ahora lo que vamos a hacer ahora desea guardar no desea descartar es que vamos a arrancar un pequeño proyecto que con la semana se irá haciendo más grande donde lo que queremos es crear Pues un una clase gestora vamos a ver para ello por aquí voy a crear un archivo nuevo 020 y clase gestora php en clase gestora digo Class perdón php y php digo Class cómo se llamaba antes pues se llamaba conecta db pues esta es conecta vale por ejemplo vale de esta forma voy de hecho a esto no aquí conecta voy a abrír mela y así un poco la tenemos en mente espera vale clase gestora private usuario servidor vale Bueno pues sí técnicamente el servidor es esto Bueno hay un aquí hay un constructor con lo cual creo un constructor Ya sé que igual os entra s síndrome postraumático de decir madre mía Ahora vamos a tener que hacer todo ese esfuerzo otra puñetera vez sí pero no porque eh Porque podéis digamos reutilizar el esfuerzo vale entonces vengo por aquí y digo Pues mira el servidor es la ruta del servidor Donde antes era eh local Host Pues ahora es mongodb local Host lo que sea usuario contraseña no aplica en este momento vale con lo cual fuera base de datos de momento con la que voy a trabajar pues la base de datos va a ser un momento no bueno igual va a ser empresa okay Y pues bueno ahora habremos la colección Vale ahora disc conexión mysql Connect no va a ser que no aquí esto en nuestro caso se llama dis cliente es igual a New mongodb Driver y le pongo el servidor usuario contraseña no hace falta base de datos Sí y conexión esto es conexión no dis Ah disc conexión discon y así lo llamamos igual para que nos aclaremos lo mejor posible vale esto es servidor Okay vamos a probarla me voy aquí espera esto lo voy a cerrar esto lo puedo cerrar ya esto Bueno ahora iremos a esto Vale ahora luego hago Push Y esto qué es esto creo que no lo voy a utilizar ya vale Okay pues me voy aquí clase gestora Vale y de momento no tengo error De momento todo okay Ahora a continuación Quiero un método Así que eh 021 método de seleccionar así que vengo por aquí y digo conexión db public function no sé public función eh Buscar no Eh listar vale Ya no es tabla se llama colección datos no quiero y claro ahora a continuación petición nada fuera fuera J en code ual luego me lo quedo Así que ahora esto nada conexión de B ya no lo quiero de momento vale simplificar No Encontrar todos Ok vale manager query Y entonces digo pego esto y digo query igual a dis base de datos dis base de datos punto colección Okay cursor manager execute query Y entonces qué pues vamos a ver y entonces digo resultado es igual a Ray vacío y para cada cursor como documento resultado de array es igual a documento return resultado pero claro me va a hacer falta esto js es igual a jas en code del resultado vamos a verlo Qué nervios vale No vamos a hacer mucho más en la clase de hoy porque básicamente haciendo esto yo creo que ya os hacéis a la idea de Hacia dónde va Esto vale Pero y ahora vengo aquí y digo eh espera momentito antes de nada vamos a probarlo y recargo y método y la página no funciona vale Ok qué puedo haber hecho mal pues aquí ostras as document has document as document ahí me falta un dólar y aquí me falta un dólar vale vamos a verlo OK ahora sí vale Y entonces digo instancia y digo conexión es igual a New conect y conect de momento no tiene parámetros de entrada de parámetros de constructor tiene un constructor Vale pero no tiene parámetros de construcción y ahora digo eco listar vale eco conexión llamo al método listar y le paso un parámetro que es clientes y ya está vale Así que ahora hago así recargo instancia no la Pina no funciona vale Por qué Pues no lo sé vamos a ver esto fuera okay esto de momento Es correcto lo luego por tanto es esto el problema vale voy a volver a poner lo que he hecho antes al principio del día de hoy a ver No aquí y php show errors vale esto okay Y esto fuera okay Vale undefined variable servidor ese es el problema en la línea 17 disc conexión es igual a servidor porque es dis servidor ahí está el problema y la solución vale probemos de nuevo recargo vale Y ahora desbloqueo esta línea recargo Ok vale vamos a verlo undefine variable manager Por qué Pues porque manager Aquí vamos a ver manager es esto es disc conexión execute query vamos a verlo Ok y ahí lo tenemos vale Pero cuando digo que ahí lo tenemos quiero decir que acabo de encapsular esto dentro de una clase de tal forma que luego puedo reutilizar la clase Tantas veces como quiera voy a demostrarlo para demostrarlo a ver un momento hoy de momento hacemos el método de listar vale en próximos días haremos Buscar haremos de todo a ver un momento vamos a ver ahora a continuación me voy al Compass y voy a crear una colección llamada productos en productos voy a Añadir un campo cls use prod no db punto productos vale punto insert One y voy a decir vale rápido en plan rapidísimo e nombre es igual a eh ordenador y precio es un número vale Ok ya está con esto se ha creado la base de datos la colección productos con lo cual si ahora vengo aquí al php y digo lame productos ejecuto y me lista nombre ordenador precio 543 vale para que veáis que realmente lo que estamos haciendo tiene sentido y es que toda la complicación la estamos metiendo dentro de la clase para que luego pues no nos tengamos que preocupar por esa complicación vale Ya que estoy he hecho el la el método de listar voy a hacer el método de insertar vale porque tampoco nos cuesta tanto y así quieras que no pues Oye lo tengo ya preparado e incluso quizás el próximo día el lunes que viene podemos empezar a integrar empezar eh porque esto le queda mucho por hacer pero podemos empezar a integrar este conector con crimson y de repente ver que en crimson no solo podemos guardar sql sio podemos guardar documentos si nos interesa donde nos interese Vale entonces vengo por aquí y digo 023 método de insertar entonces en el método de insertar Pues yo ahora voy a hacer a ver Class F public function insertar inserto en la colección y le digo los datos que quiero insertar Vale entonces me voy a insertar y ya está a ver namespace a ver moment namespace Espérate que voy a hacer unas cuantas cosas aquí vale name space es esto de aquí query es esto de aquí Driver Ah manager no pero el manager ya lo tengo vale name space ya lo tengo bulk es igual a esto de momento fuera vale documento Ok buk insert documento vale manager execute Entonces el manager vale el manager es la conexión disc conexión esto yo creo que no lo voy a utilizar me voy a insertar Ah Mira pues sí hay que fastidiarse Okay vale Y ya y return nada no tiene por qué rar nada return false o return cero bien Vamos a verlo porque ahora los datos que quiero que me meta es el documento vale Y ahora por ejemplo le digo documento Juan Pérez vale Y entonces digo conexión insertar donde en clientes quiero insertar el documento este documento algo me dice en mi cabeza que se me olvida algo pero vamos a probar método de insertar error vale valable manager línea 38 no es manager es disc conexión vale probamos Ok return cero vale porque he hecho un eco no tenía ni por qué hacer eco con lo cual ahora me voy a Compass donde sea que esté me voy a clientes en clientes tenía siete pero ahora recargo y tengo nueve y el último que me metido es Juan Pérez @example.com porque es el Juan Pérez que acabo de meter por aquí luego por lo tanto como podemos ver Estoy construyendo una clase a la que probablemente pues le queda todavía un poco vale a esta clase le queda actualizar le queda eliminar le queda Buscar le queda un montón de cosas pero os hacéis a la idea un poco de que lo que estamos haciendo es abstraer la complicación para luego poder utilizar esto para lo que queramos para luego fusionarlo con crimson o con lo que queráis vale porque os digo lo mismo que os he dicho en el resto de la tarde y es que el objetivo de hacer esto y de encapsular y de abstraer y de hacerlo agnóstico de crimson es precisamente para que si lo queréis lo fusionándose en modo standalone vale es decir la idea de encapsular y de hacerlo todo en capsulitas es que si os dais cuenta si yo me voy aquí y me voy a hacer una nueva me voy a dam me voy a segundo me voy a sistemas de ejerción empresarial me voy a proyecto y me voy a tooltip y me voy al servidor y me voy a conexión deb no sabe nada de crimson o sea conexión de B no está integrado con crimson conexión deb solo sabe que le piden una cosa y devuelve una cosa y ya está Vale con lo cual todos estos módulos están Sí correcto eh yo también te digo una cosa también te digo una cosa y es que si indag un poco acerca de ventajas y desventajas de no sql y de deb curiosamente eso que acabas de decir es a la vez una ventaja y se puede volver una desventaja es decir eh en estructuras de datos eso que acabas de decir se recibe el nombre de Estructura de datos de dientes de sierra lo que quiere decir que cada registro puede tener un número diferente de Campos y por tanto a diferencia de una tabla que cuando la ves desde lejos está completamente alineada en de B cuando lo ves de lejos es como dientes de sierra donde hay una irregularidad vale hay cada registro puede tener unos Campos entonces Claro Por eso te digo que eh yo ya te digo que no vengo a hablaros ni maravillas de may sq ni maravillas de B no de los dos para deciros que en de B O sea el mayele tú sabes porque lo has sufrido muchas veces que como la tabla tenga cuatro Campos como le metas tres la tabla no te va a el registro y como le pongas cinco tampoco te va a el registro vale Y eso en mysql da rabia porque a veces parece que May cuele te da un poco por culo vale porque dices o sea déjame vivir o sea déjame meter registros pero a la vez con el tiempo te das cuenta de que esas cosas a las que te obliga May sql luego te convienen porque luego te aseguran que tienes una base de datos homogénea y tienes una base de datos controlada y tienes una base de datos donde todo está correctamente estructurado vale por eso la desventaja de mysql el tiempo se puede convertir en ventaja en deb Pues claro el para empezar tú puedes meter como estáis viendo lo que quieras como te da la gana vale Pero a la vez luego cuando vas a buscar el hecho de que cada documento tenga una estructura o potencialmente tenga una estructura diferente pues puede ser una desventaja Vale ahora eh Ahora Albert mira en cuanto al sector esa pregunta es difícil de responder a O sea no dejes que te responda yo vamos a investigar un poquito vamos a ver diferentes páginas voy a empezar como siempre por trends Vale entonces mysql coma mira mysql como software Vale y deb vale B como aplicación vale a ver esto lo quiero en todo el mundo y esto lo quiero en forever and ever Y esto es lo que hay vale De hecho si quieres vamos a mirar los últimos 5 años último año eh leches aquí Entonces qué está ocurriendo Pues que si te fijas en los últimos 5 años pues my sql de hecho se ve mejor Aquí my sql poco a poco ha ido bajando era el rey absoluto y deb poco a poco ha ido subiendo Claro si extrapolamos esta gráfica Pues a día de hoy no están parejos pero extrapolando la Gráfica en el tiempo en el futuro pues veremos que puede haber un sorpasso cuándo No lo sé vale a día de hoy pues en volumen de búsquedas si te fijas más o menos pues viene a ser la mitad algo menos pero si miramos aquí por ejemplo pues donde May sql es 65 deb es 28 vale algo menos de la mitad claro deb es la mitad pero es que el volumen de datos de may sql es mucho con lo cual la mitad de mucho sigue siendo mucho Vale entonces claro a día de hoy a día de hoy mysql sigue dominando pero ya te digo Vale pero no lo veas así como quién domina o quién deja de dominar porque insisto o sea esto es como que May sql es un no sé sabes es un deportivo que corre mucho sí pero tiene sus particularidades vale tienes que saber manejarlo y debes como una furgoneta Vale entonces es como decir Oye con el tiempo qué será mejor un deportivo o una furgoneta Bueno pues yo te digo no lo ideal es que tengas los dos porque habrá veces que te aparecerá correr por la autopista y te pillars el deportivo pero habrá a veces que te interesará cargar más cosas y te interesará la furgoneta vale por tanto La idea es que los tengas los dos Entonces ya te digo o sea es lo que tú comentas o sea teniendo en cuenta que my sq utiliza muchísimo la mitad de muchísimo sigue siendo mucho vale otra cosa es que podemos Buscar más Fuentes más orígenes de datos vale estadísticas de uso mysql mongodb o Mira oye le vamos a preguntar a ch gpt estadísticas de las principales bases de datos usadas hoy en día a ver qué nos dice chat gpt Bueno mojando el internet para empezar vale May sql Pos sql Microsoft sql server db vale Y ya está o sea por ejemplo entre las 5 y ahora digo con porcentajes no sé a ver si es Aventura Mira Oh qué Guay no sabía que existía BB engines Vale pues mira vamos a ver entre las base de datos más populares pues tenemos Oracle mysql Microsoft sql server y por sql vale pero date cuenta de una cosa y es que al final Oracle mysql Microsoft sql server y po sql las cuatro son bases de datos de tipo sql lo cual quiere decir que sí vale cierto son cuatro bases de datos diferentes pero el lenguaje es el mismo vale con lo cual aprendes sql y tienes estas cuatro pero a continuación tienes de B vale con lo cual y bueno Y luego tienes ese quelite por aquí que ya sabéis que yo tengo mucho aprecio claro luego tienes por ejemplo elastic Search pero claro elastic Search con respecto a deb es 400 con respecto a 131 vale popularidad relativa evidentemente con lo cual La idea es que como ves y como puedes ver vale eh claro Exacto vale como ves en este caso pues sí unos 3 millones no son millones Eh Esto es un decimal o sea esto es un mil y pico pero es un índice de popularidad o sea es solo un índice pero sí pero se puede sumar vale Pero la idea es que sql sql domina vale Sí pero da igual pero se puede sumar o sea el concepto que estás utilizando de sumar es correcto vale pero sql pero la siguiente base que no es sql la primera es de B vale o sea que sí a día de hoy Pues fíjate si calculamos así en un momento pues 1317 + 17 + 799 + 654 Pues estamos hablando de 3787 contra 400 pero aún así O sea evidentemente está todavía por debajo de sql pero el primero que está ahí empujando empujándola todavía de lejos cierto pero el primero es de B Vale entonces al menos a día de hoy qué ocurrirá en el futuro me es difícil de saber sin embargo yo sí que te puedo decir una cosa y es que por ejemplo si yo comparo vamos a verlo de B contra redis contra snowflake no me lo va a seguro no porque hay un montón de cosas que se van a snowflex contra elastic Search Esto sí que me lo va a vale contra IBM db2 IBM d2 aplicación de b2 vale Y esto es lo que hay entonces si os fijáis de esa lista ojo o sea en los últimos 5 años daos cuenta que db2 podríamos decir que poco a poco va hacia abajo elastic Search debido a que se utiliza bastante en Big Data poco a poco va riscol pero la base de datos que va para arriba a día de hoy a día de hoy es de b y si lo miramos en los últimos No sé x años 20 años Vale pues eso o sea esto es db2 con lo cual pues como base de datos orientada a objetos Pues sí antes sí pero ahora ya no elastic Search Pues sí está ahí peleando redis está peleando Pero la Que de momento está ganando es deb vale Así que bueno por hoy poco más continuamos el lunes vale Seguiremos con crimson a ver si hacemos seguimos haciendo integraciones si seguimos haciéndolo crecer y vamos dándole buen aspecto y tal y nada y la semana que viene continuamos con esto con más clases vale Así que cualquier cosa vamos hablando por a ver un momenti momentom Espera espera Albert alber pregunta eh un ejemplo mezclar dos bases de datos en tu aplicación Pues mira sí correcto Exacto yo diría login usuarios clientes productos en sql Por qué Porque clientes es lo típico que tienes una tabla de clientes en Excel y productos es lo típico que tienes una tabla de productos en Excel ahora un pedido es un documento o sea un pedido es una cosa donde hay un cliente donde hay eh una fecha donde hay un número de pedido y donde hay una lista de líneas de pedido y cada lista y esa lista puede ser variable puede haber 10 líneas de pedido puede haber 100 líneas de pedido vale con lo cual todo aquello que sea un documento en un en una empresa de la vida real una factura un presupuesto un perido vale todo eso mongodb y todo aquello que en la vida real una tabla o un documento de Excel o una hoja de clientes todo eso sql vale claro por ponerte un ejemplo tenemos la aplicación y tenemos lo eso los usuarios y todo eso hay en sql esa información por ejemplo la metemos a un jas por ejemplo a una Ray y de ahí lo leemos mediante db para crear los pedidos en base a su usuario correcto por poner un ejemplo correcto lo leemos de sql y cuando tejemos el pedido en lugar de guardarlo de vuelta a sql lo guardamos en deb en vale Okay ya te digo eh o sea pero no te lo cojas como verdad verdadera o sea porque las combinaciones son infinitas cl se eso es un solo ejemplo pero las combinaciones que puedes hacer son las que tú quieras Sí si al final también lo puedes hacer todo solo con sql por ejemplo o sea correcto la idea y esto insisto no es una discusión objetiva sino que probablemente pues cada persona tendrá una opinión diferente Pero para qué usas utilizamos de b y para qué Us sql eso ya te digo que yo no te voa poder decir a y b es imposible vale porque cada persona tendrá una perspectiva de para qué escenario es utilizar una cosa o para qué escenario es utilizar otra no es mi objetivo todavía hoy eso vale o sea mi objetivo es eh refrescar hoy mongodb ir empezar a ir más allá de lo que fuimos el año pasado con deb y abrir os posibilidades vale porque igual tú ahora mismo pues te haces una idea de para qué te puede servir deb y para qué te puede servir mysql Pero el día de mañana entras a una empresa y la empresa te dice me da igual la idea que te haas hecho en esta empresa utilizamos deb para esto y May para esto otro y ya está y tú lo tienes que hacer así pero lo que yo quiero es que cuando llegue ese día cuando la empresa te diga no aquí los pedidos lo vas a guardar Con mongodb que no se te cara que no se te quede cara de y esto de mongodb Qué es porque a mí me han explicado sql pero no me han explicado mongodb vale por tanto mi idea es que tengáis herramientas la mano para que evidentemente enseñároslo todo es imposible porque el abanico de tecnologías es gigantesca grande pero si enseñaros las más tecnologías posibles para que cuando lleguéis a la empresa dentro de un orden te digan lo que te digan digas Ah Espera que esto lo he visto claro Sí para que te suene Sí eso es vale perfecto Venga pues nada nos vemos la semana que viene y continuamos metiéndole caña y en cuanto sepa algo de fechas de examen o de lo que sea pues os voy diciendo vale perfecto hasta la semana que viene venga hasta luego