Bueno pues vamos a trabajar con nodejs siendo que nodejs es una alternativa es una tecnología de las que podemos utilizar en el servidor para desarrollar en principio aplicaciones web pero técnicamente con nodejs se puede desarrollar una gran cantidad de aplicaciones de todo tipo bien en primer lugar qué es lo que necesitamos Bueno pues necesitamos tener node en nuestro ordenador para tener node en nuestro ordenador pues una cosa que podemos hacer es Descargar node Así que pongo node en Google me voy a node js y dentro de node js vamos a ver un segundo la versión que más nos convenga en este caso a ver segundo vale en este caso pues bueno como Vamos a aprender node y no me hace falta No me es imprescindible trabajar con la timsa versión de node pues recomiendo Descargar La versión que sea lts es decir la versión que es long Time Support que es la versión que pues en un momento dado más estabilidad me va a proporcionar Entonces si voy a aprender node pues sobre todo antes que últimas novedades pues me conviene esta habilidad Así que pincho estoy descargando en un momento se descarga está descargándose Vale entonces una vez que lo tenemos vamos a verlo una vez que esté descargado Aquí está lo que voy a hacer es abrirlo en carpeta voy a hacer doble clic y voy a arrancar la instalación de node js en esta en la que estoy ya tengo instalado node con lo cual Pues evidentemente lo más probable es que me diga que igual no lo quiero instalar sino que lo Quiero actualizar estoy diciendo next a todo vale importante el add to path esto es muy importantísimo que esté marcado en el momento de la instalación para que no de sea visible desde cualquier parte del ordenador Así que pincho next automáticamente instalar herramientas áreas tales como por ejemplo chocolati pues sí voy a instalar automáticamente herramientas Más que nada porque pues en no de ocurre como en otros lenguajes de programación que llevan un sistema de gestión de paquetes y pues viene bien puede venir bien que necesite herramientas adicionales Así que le doy a install y bueno y ahora evidentemente lo único que tengo que hacer es esperar a que pues se acabe de instalar correctamente node bien le decimos que sí a cualquier mensaje de advertencia de seguridad que pueda aparecer en mi caso yo creo Supongo que me ha quitado la versión que tenía antes Y me ha instalado la nueva versión lo cual es completamente correcto vale Y una vez que tengo esto es cuando a continuación ya puedo pulsar Finish y ya puedo empezar Eh mi trabajo con node Vamos allá así que bueno en este caso además me aparece eh herramientas para no dejs esto es parte de las herramientas que he pedido antes instala herramientas para nodejs con python con visual Studio En definitiva todo vale entonces voy a pulsar tecla para continuar pulso tecla para continuar vale quiero permitir que Power shell haga cambios en el dispositivo Sí vale Y ahora lo que esta haciendo es instalar chocolati y una vez que instale chocolati pues vamos a ver vale creo que me está actualizando python 3110 a python 3114 Pues bueno pues lo que haga falta y estas herramientas como comento pues puede que las utilicemos puede que no pero en todo caso no nos vendrá mal no nos va a molestar tener las herramientas instaladas vamos a ver vale está descargando herramientas para visual Studio esto como ya digo no tiene mucho misterio Es simplemente una cuestión de Descargar instalar herramientas en este caso Ahora parece que me está instalando el visual Studio Installer Bueno yo juraría que en este equipo ya lo tengo instalado pero Okay Vale ya se instalado dudo mucho que lleguemos a necesitar herramientas de visual Studio para los ejercicios que voy a hacer pero pues puede ocurrir que utilice alguna librería que necesite alguna librería que dependa de las librerías de construcción de c+ má de visual Studio por tanto pues como digo no está mal que lo que tenga instalado esto parece que engorrosa nada Simplemente hay que esperar a que acabe el proceso y no tiene mucho más misterio vamos a verlo en este punto pues simplemente hay que esperar un poco Mientras tanto una cosa que voy a ir haciendo Es que voy a entrar en la página de github y me voy a hacer un nuevo repositorio para todo el código que voy a hacer node pues node js está disponible bien creo un repositorio nuevo Esto no es obligatorio para eh Para lo que es el aprendizaje de no Djs Pero yo lo voy a hacer porque Bueno lo considero recomendable entonces a partir de aquí voy a abrir mi cliente de github y una vez que abro mi cliente de github Pues voy a clonar un nuevo repositorio me vengo aquí clono repositorio no js momento que recargo novedades Aquí está clono bien y por lo tanto ya tengo ahora no dejs clonado en mi equipo y lo que voy a hacer ahora es que mientras que el instalador acaba de instalar porque parece que está todavía en ello voy a abrir brackets se puede utilizar cualquier entorno de desarrollo cuál cualquier editor de texto para trabajar con nojs yo voy a trabajar con brackets entonces lo que voy a hacer Es que voy a abrir carpeta eh voy a documentos voy a github voy a no dejs y voy a seleccionar carpeta y esta Va a ser la carpeta en la cual voy a empezar a trabajar bien Mientras voy ubicando mientras me voy configurando un poco el entorno de trabajo lo primero que voy a comentar es que nodejs está basado en javascript por tanto lo primero que vamos a hacer a lo largo de nuestro aprendizaje de nojs es aprender que el lenguaje con el que vamos a trabajar la base de nojs es el lenguaje javascript pero una forma de concebir javascript un poco diferente a cóm la hemos concebido hasta el momento vamos a ver si vamos a ver si podemos acabar esto la verdad es que yo creo que ya podría ir empezando porque aunque la instalación de las herramientas esté a mitad yo creo que ya puedo poner node y En definitiva vale Aquí tengo node correctamente arrancado vale por tanto Eso quiere decir que técnicamente puedo ir empezando ya mientras que las herramientas se van acabando de instalar Más que nada porque para lo que voy a hacer ahora al principio no necesito las herramientas adicionales especialmente las de visual Studio entonces lo que voy a hacer a continuación va a ser en primer lugar antes de empezar a revisar la sintaxis específica de no dejs vamos a dar un repaso acerca de javascript Pero va a ocurrir lo siguiente vamos a crear una nueva carpeta 001 repaso javascript más que repaso voy a poner javascript directamente bien Y entonces ocurre lo siguiente voy a crear una nueva carpeta introducción y dentro de esta nueva carpeta voy a crear un archivo index.html.com hacemos lo siguiente doct type html etiqueta Head etiqueta Body vamos a hacer esto lang es igual a s title javascript para hacerlo lo más correcto posible meta charset es igual a utf8 vale Y ahora voy a hacer lo siguiente eh console Script Perdón Script console log técnicamente no hace falta ni console pun log voy a poner e bar suma es igual a 2 + 2 esto es javascript puro esto es javascript en la forma más pura en la que lo podemos concebir voy a ejecutar esto está en la carpeta de vamos a ver aquí en jhen no dejs vale entro aquí abro Index y ocurre esto voy a abrirlo como lo abro con firefox se puede abrir con Chrome da igual lo que queramos Vale y vamos a sacar el inspector y no tengo absolutamente nada porque internamente el sistema ha hecho una suma pero yo no he dicho que quiera sacar esa suma por ninguna parte absolutamente Vale entonces a continuación tenemos lo que llamamos las salidas pun html donde yo a continuación puedo poner console pun log suma y lo que hace el programa es que si ahora cargo el archivo dos a ver el archivo Do aquí será cargo el archivo do me dice que la suma es igual a 4 es decir en la consola como si esto fuera Java o fuera python o fuera c o fuera cualquier otra cosa en la consola ejecútela suma Solo que la consola es una parte del navegador bien Ahora bien javascript Hasta el momento para nosotros ha tenido una parte un componente que es el dom donde el dom es el document object model y esto quiere decir que yo pongo div es igual a destino y entonces digo document punto esto quiere decir que para javascript en el navegador el documento es un objeto muy importante el document object model es la forma mediante la cual desde javascript accedemos al documento html para hacer cambios por ejemplo eh document get Element by ID destino punto Inner html es igual a suma y entonces lo que ocurre Y entonces lo que ocurre es que cargo el dom y entonces no solo en la consola aparece 4 sino que en el propio documento aparece 4 vale Esto es lo que hemos estado trabajando hasta el momento y esto mezcla dos conceptos que son completamente diferentes en cuanto a javascript el primer concepto es el lenguaje de programación puro y duro es decir en este caso la realización de una suma aritmética un operador aritmético el una operación de asignación mediante el símbolo universal igual y la declaración de una variable y luego tenemos lo que en cualquier lenguaje de programación conocemos como una salida en este caso por consola javascript además es un lenguaje que como sabemos nace orientado hacia la web la concepción original de javascript es hacia la web y por tanto aparece esto que es el document object model que es como javascript maneja un documento html o un estilo css o En definitiva un entorno web con nojs el lenguaje con el que vamos a trabajar es javascript pero nos olvidamos de toda la parte del dom porque javascript tal y como lo vamos a trabajar ahora a continuación en No dejs no va a existir en el lado del cliente en un navegador web o no solo es decir puede existir ahí por supuesto que también Pero además va a existir en el servidor además va a existir en el lado del servidor y claro desde el servidor no podremos tocar el dom no podremos tocar el document object model ni hará falta tampoco realmente Así que para esto a continuación ahora voy a hacer lo siguiente voy a crear un nuevo archivo 004 eh consola js y este archivo no va a tener la extensión html sino que va a tener la extensión js ya que no va a tener nada de html va a ser un archivo javascript puro voy a poner console.log Hola mundo desde javascript este archivo tiene las mismas reglas sintácticas que hasta ahora conocemos para javascript no pasa nada por este error es un error falso eh debido en este caso a bracket que braet no está entendiendo que esto es un proyecto de node vale me dice que debería estar debería a ver qué me dice Bueno dice que es un expected que no se lo esperaba Bueno pues no pasa nada porque yo sí que lo esperaba entonces a continuación lo que voy a hacer Es que voy a arrancar un cmd recordamos que el cmd o sea pulso el botón de inicio de Windows pulso cmd y sale una ventana de estas de color negro puedo poner cmd puedo poner símbolo de sistema esta misma ventana en el mundo unix en Mac y en Linux recibe el nombre de terminal si estoy en Mac simplemente abro el buscador de aplicaciones y pongo terminal si estoy en distribuciones basadas en up puedo pulsar control alt y la tecla t y automáticamente sale una terminal o sea En definitiva quiero una línea de comando Y desde ahí es desde vamos a trabajar la ejecución de scripts en node entonces me dejo esta línea de comando por aquí abajo y de momento o mira de momento me la voy a dejar por aquí vale Y a continuación lo que voy a hacer Es que voy a navegar hasta esta carpeta o sea CD documents CD en mi caso github 2 es la carpeta donde estoy CD no de js es decir por qué he puesto esta carpeta Bueno pues porque en este ordenador concreto el ordenador en el que estoy ahora mismo en el disco duro c Hay una carpeta llamada aquí llamada users usuarios dentro de usuarios está José Vicente dentro de José Vicente está documentos y dentro de documentos está github 2 y dentro de github 2 Pues he creado la carpeta no dejs vale por tanto Pues esta ruta dependerá variará de tu ordenador dependerá de pues qué rutas tenga tu ordenador dónde hayas creado tu carpeta lo que sea vale Yo la he creado en este caso pues aquí usuarios José Vicente documentos github no dejs bien Ahora voy a hacer unir para ver qué tengo en esa carpeta tengo de momento la carpeta 001 javascript Así que CD 001 javascript lo de CD el change directory es igual en Windows en Mac y en Linux El Comando CD es el mismo El Comando dir cambia si estoy en Windows El Comando es dir si estoy en Mac o en Linux El Comando es ls o sea list directory vale como ahora estoy en Windows pongo dir quien estéis en Linux o en Mac es ls entonces CD change directory 001 javascript aggo dir vale CD 001 introducción agir y ahora veo que tengo por aquí eh un archivo que se llama lo acabo de crear 004 consola lo que voy a hacer es lo siguiente voy a poner node porque tengo instalado node Por cierto Cómo va el tema de la instalación por aquí pues sigue en ello ahora luego lo cancelaré creo que se ha quedado frito vale eh pongo node y pongo 004 y consola js yo lo he llamado 004 porque estoy intentando seguir un orden mientras realizo los ejercicios Pero puedes poner como sea que lo hayas llamado te recomiendo evidentemente que sigas mi misma estructura de nomenclatura de archivos Y así pues tendrás todo igual que lo tenga yo voy a intentar trabajar de la forma más ordenada y más organizada que pueda bien Así que si le doy node para invocar a node y el archivo que quiero ejecutar y pulso enter me dice hola mundo desde javascript Y esto es algo que no habíamos podido tener hasta ahora que era utilizar javascript para eh crear aplicaciones en consola y En definitiva si puedo crear aplicaciones en consola puedo crear aplicaciones de servidor que es lo que vamos a hacer Ya sé que esto que acabo de hacer parecerá poco espectacular porque podrás decir bueno todo este rollo que me has contado total para hacer un hola mundo desde javascript en la consola parece poco impresionante pero a lo largo de pues las próximas clases los siguientes vídeos vamos a ir viendo como realmente esto es mucho más espectacular de lo que parece de momento lo que hemos conseguido es hacer un console pun log Y eso sí lo que voy a dejar claro a continuación es que eh Me quito me elimino toda la parte del dom de javascript a continuación lo que voy a hacer es un necesario repaso de javascript en principio digo repaso porque pues se supone que ya conocéis la sintaxis y la filosofía y la estructura de javascript pero por si no es así o no la recordáis o no suena o lo que sea pues voy a hacer este repaso donde primero voy a explicar javascript para node y luego explicaré las librerías y las circunstancias específicas de node para ello voy a hacer una segunda carpeta esto es una carpeta no esto es un archivo Eh no quita voy a hacer una segunda carpeta 002 javascript y vamos a ver qué es lo que deberíamos saber de javascript para poder empezar a utilizar node yo a partir de aquí siempre eh realizo en la misma introducción no solo javascript sino a cualquier lenguaje de programación que es la siguiente en primer lugar voy a hablar de vamos a ver voy a hablar de en primer lugar salidas tendría que hablar de salidas y entradas pero las entradas me las dejo para más adelante bien eh tengo salidas a continuación hablaré de operadores una vez que hable de operadores hablaré de variables una vez que hable de variables hablaré de estructuras de control Perdona de datos estructuras de datos una vez que hable de estructuras de datos hablaré de estructuras de control una vez que habl de estructuras de control hablaré de funciones a continuación por último hablaré de objetos y quizás llegado ese momento Pues hable de librerías y ya está de momento y este sería el menú principal de repaso de javascript luego evidentemente Pues dentro de estas carpetas iré introduciendo más contenido quiero decir que dentro de estructuras de control pues haré 001 estructuras de bucle luego haré estructuras condicionales vale un poco lo típico lo clásico bien con esto por lo tanto voy a empezar diciendo que eh dentro de Aquí vamos a ver bueno la sintaxis es la misma que en javascript eso sí voy a crear un nuevo archivo aquí 001 consola js y ya hemos visto antes que tengo console log pues Hola mundo así que me vengo aquí CD dos puntos bajo de carpeta CD 002 javascript voy a poner esto en la mitad de la pantalla y esto en la otra mitad de la pantalla vale Y entonces ahora digo node 001 salidas vale no perdón 001 salidas okay Y ahora node Bueno voy a poner un dir voy a poner un Clear cls en Windows Clear en Linux y en Mac para borrar la pantalla cls en Windows Clear screen realmente y ahora a continuación voy a poner dir y voy a poner eh node 001 consola js y dice hola Mundo perfecto vamos a poner por aquí 002 advertencia js y voy a poner console warn console warar advertencia en la consola Así que punto y coma no de 002 advertencia vemos que también funciona advertencia en la consola perfecto nuevo archivo 003 error.js Así que console error esto es un error y vengo aquí node 003 error esto es un error vale por tanto para empezar vemos que las los elementos que conocemos dentro de javascript se mantiene luego también hay otro otra salida en javascript que funciona dentro de node y de hecho es muy útil que es el Table pun js Así que console Table de hecho Ahí tengo todos los consoles que puedo hacer vale console table y digo esto es una tabla Así que guardo punto y coma para acostumbrarnos node 004 tabla vale Y esto es una tabla hay que tener en cuenta que en principio voy a crear esto como 005 tabla práctica js eh voy a decir que agenda es igual a colección y voy a decir agenda de cero es igual a José Vicente agenda de 1 es igual a carratala Y entonces ahora por consola Sácame como tabla la agenda no de 004 no de 005 y vemos el poder de la tabla o sea vemos como realmente lo saca como tabla y dentro de lo que es la consola me hace una tablita con el índice y los valores y cada uno de ellos y todo eso Entonces vemos que Mola bastante vemos que el Table dentro de node nos va a ser de bastante utilidad para sacar valores por pantalla vamos a ver un momento a ver que estaba corriendo una silla vale Vamos a continuar bien y a continuación ya tenemos la salida vale Hasta el momento buenas noticias en el sentido de que pues todo aquello que sabemos de javascript pues lo vamos a poder aplicar nos hace falta un poco repasar y tener javascript fluido y tener javascript al día para Pues saber lo que vamos a hacer Voy a Por cierto hacer esto un poquito más grande Vale entonces ahora luego tendría que hacer la letra un poco más pequeña pero de momento pues la tenemos así de grande bien operadores vamos con los operadores vamos con los clásicos operadores no van a haber muchas sorpresas 001 operadores aritméticos Vale entonces en operadores vamos a nombrar esto bien operadores aritméticos Vale y dentro de operadores aritméticos Pues voy a hacer lo clásico 001 operadores aritméticos pun js y voy a poner console log y decir 4 + 3 vamos a verlo CD dir CD 002 operadores cd00 aritméticos dir entonces node 001 Y me dice si console pun log el operador aritmético de suma es el signo más bien Ahora console log 4 - 3 4-3 el operador aritmético de resta es el guion vuelvo a ejecutar me dice 7 me dice un es un poco hasta el momento como la consola del navegador solo que en este caso no hay navegador bien Ahora console pun log 4 multiplicado por 3 el asterisco es el operador de multiplicación ejecuto de nuevo es decir recurro al último Comando y el resultado es 12 console.log 4 entre tres el operador aritmético de división es la barra por tanto vuelvo a ejecutar el archivo y el resultado es 1.33333 Y tenemos otros operadores tales como por ejemplo el 4 porcentaje 3 que es el resto entero de la división vuelvo a ejecutar el Script y el resto entero de la división en este caso me da el número uno por lo tanto no hay sorpresas hasta el momento en cuanto a que los operadores eh aritméticos dentro de javascript son los mismos que ya conocíamos a continuación tengo los operadores de comparación vamos a ver operadores de comparación dentro de ellos vamos a ver comparación js y dentro de comparación Pues voy a hacer console.log console.log 4 es men 3 Es cierto que 4 es menor que 3 Bueno pues vamos a la carpeta CD A ver no dir c002 operadores de comparación y vamos a hacer un dir y vamos a hacer un no de 001 y me dice false no es cierto que 4 sea menor que 3 a continuación voy a hacer 4 Mayor que 3 Quiero saber si es cierto que 4 es Mayor que 3 Así que vuelvo a ejecutar este Script y me dice que es true Es cierto que 4atro es mayor que tres a continuación vamos con los menor o igual o mayor o igual Es cierto que 4 es menor que 3 o es cierto que 4 es igual a 3 No es cierto ni una cosa ni la otra con lo cual a continuación me dice false y es cierto que 4 es mayor o igual que 3 No es igual que 3 pero sí que es mayor con lo cual al ejecutar este Script me dirá false para el caso de 4 es menor o igual que 3 true para el caso de 4 es mayor o igual que 3 dicho esto a continuación vamos con los operadores de igualdad y desigualdad por tanto vamos aquí y digo 4 es doble igual que 3 Es cierto que 4 es Exactamente igual que 3 o es cierto que 4 No es igual que TR el negador en javascript es el signo de admiración así que ejecuto de nuevo y me dice es cierto que 4 es igual que 3 La respuesta es false Es falso No es cierto que 4 sea igual que 3 Es cierto que 4 No es igual que 3 es cierto que 4 No es igual que 3 vemos por tenemos operadores como con por eemplo voy hac lo sigiente Es cierto que 4 es igual que 4 cadena recordamos que javascript como Ah a continuación veremos en el siguiente apado es un lenguaje débilmente tipificado per es no decir que internamente no considere tipos de datos internamente javascript sabe o node mejor dicho que es el que interpreta javascript en este caso sabe que este dato es un dato numérico este dato es un dato de tipo cadena con lo cual vamos a poner esto es cierto que 4 es igual a 4 pues vamos a separar un poco ejecutamos Entonces es cierto que 4 es igual a 4 bueno la doble igualdad únicamente comprueba el valor por tanto cierto que 4 es igual a 4 Aunque 4 sea un número y 4 sea una cadena es cierto ahora bien Es cierto que 4 es ig a 4 y no solo quiero que compruebes el valor sino que además quiero que compruebes el tipo de datos Bueno pues el valor es el mismo pero el tipo de datos no es el mismo esto es un número esto es una cadena por lo tanto la validación la comparación Resulta ser falsa Estos son algunos de los operadores de comparación más comunes más conocidos luego Tenemos también vamos a verlos 003 los operadores de los operadores booleanos js donde voy a decir Es cierto que consuele pun log Es cierto que 3 es ig a 3 and doble ampers and 4 es = a 4 esto es cierto CD 003 superadores de comparación no de 001 y me dice true Es cierto que 3 es igual a 3 y que 4 es igual a 4 no solo sirve para esto un momentín voy a redistribuir un poco Esto vale No solo sirve para esto sino que es cierto que 3 es igual 3 y 4 es ig a 4 y 5 es ig a 5 voy a poner punto y coma recomendable ejecuto y dice es true ahora bien Es cierto que 3 es ig a 3 y 4 es = 4 y 5 Es ig perdón i5 es ig a 4 Bueno pues es falso con el operador and todos los todas las parejas de valores comparadas tienen que ser verdaderas para que la expresión en su globalidad de verdadera ahora bien a continuación tenemos el operador or dice lo siguiente voy a hacerlo con dos barras verticales Es cierto que 3 es igual a 3 o que 4 es igual a 4 o que 5 es igual a 5 Bueno pues es true ahora bien Es cierto que 3 es ig a 3 o 4 es ig a 4 o 5 es ig a 4 pues curiosamente sigue siendo true porque no es cierto que 5 es sea igual a 4 pero sí que es cierto que 3 es igual a 3 o que 4 sea igual a 4 es cierto que 3 es igual a 3 o que 4 es igual a 3 o que 5 es igual a 4 si yo ejecuto esto el resultado sigue siendo verdadero porque no es cierto que 4 sea igual a 3 No es cierto que 5 sea igual a 4 per sí que es cierto que 3 es igual a 3 y ahora si ya es cierto que 3 es igual a 2 o que 4 se igual a 3 o que 5 se igual a 4 Bueno pues entonces ya no porque si ninguna de las expresiones validadas de comparación son ciertas pues en ese caso el caso or no puede ser cierto bien Vamos allá Vamos a continuar eh Tenemos también voy a ponerlo operadores abreviados quieto nueva carpeta operadores abreviados no operadores abados los Necesito ver cuando veamos variables y en aquí y aquí también en variables vamos a ver creación de variables incrementos y operadores abreviados porque si no explico variables no lo puedo explicar todavía Así que vengo por aquí y voy a hacer lo siguiente voy a crear una nueva carpeta que se va a llamar 00 1 variables vale aquí en variables voy a hacer lo siguiente nuevo archivo variable global js y voy a decir bar edad es igual a 45 y por tanto en este caso javascript es un lenguaje débilmente tipificado yo pongo bar y lo que ocurre con bar es que el sistema pues automáticamente cuando interprete el Script sabrá si esto es pues un número una cadena o qué será en este caso es un número console pun log tu edad es d console.log edad bien con esto a continuación CD 0 CD punto Y ahora CD 003 variables CD 001 variables dir y node 001 variables me dice de tu edad es de vale trabajando de esta forma yo he tenido que poner la información en dos líneas diferentes Bueno pues lo que voy a hacer ahora es explicar el operador de encadenamiento js Por cierto aprovecho para decir que esto que he hecho aquí arriba es el operador de asignación es el operador que se encarga de asignar un valor a un identificador ahora explicaré a continuación Qué es un identificador bien en el operador de encaderamiento yo lo que voy a hacer es esto y decir que tu edad es de más edad más años entonces estoy utilizando el signo más el signo de la cruz que en javascript al igual que en otros muchos lenguajes de programación derivados de c sirve tanto para crear la operación aritmética de suma como para crear un encadenamiento en este caso estoy encadenando una cadena de caracteres con una variable numérica si ahora digo no de 00 dos me dice tu edad es de 45 años y no he tenido que poner varios consoles punto log porque estoy utilizando una un encadenamiento bien con esto por tanto vamos a ver un momento Ay que me acerque más vale con esto por tanto ahora a continuación voy a explicar los operadores de incremento y de decremento así que 003 incremento js copio pego y digo edad más lo que hace es sumar un valor console.log ahora tu edad no de 003 ahora tu edad es de 46 años por tanto como vemos poner más detrás de una variable lo que hace Es que le añade un valor lo que se llama en programación incrementar un valor elento si yo pongo edad menos y ahora a continuación vuelvo a poner la línea de console.log vuelvo a ejecutar tu edad es de 45 años al incrementar tu edad es de 46 años pero a continuación vuelvo a bajar a los 45 años vale una vez que tengo esto vamos a continuación a hablar de los operadores de eh los operadores abreviados porque hay veces la gente dice Vale entonces si edad más sube un valor más más sube dos valores no funciona así no existe en ningún lenguaje de programación que yo conozca el más más para ello voy a explicar los operadores abreviados js bien Y entonces voy a decir lo siguiente bar edad es igual a 45 voy a copiarme el console pun log vale Y les voy a decir edad más igual a un o dos por ejemplo console log tu edad es de X años vale con esto evidentemente lo que ocurre en este caso es que si yo ejecuto no de 004 pues tu edad es de 45 tu edad es de 47 como hemos visto como podemos comprobar pues la información se suma es decir ya no solo sumo un valor sino que puedo también restar un valor también puedo poner lo siguiente edad menos ig a 2 lo que ocurre en este caso vuelvo a ejecutar es que primero sumo dos unidades luego quito dos unidades los operadores abreviados no solo funcionan esto equivale a poner edad es igual a edad + 2 vale por eso se llama abreviado porque en lugar de poner toda esta estructura podría ponerla y funcionaría perfectamente pero se llama abreviado porque pues tengo que escribir menos tengo también operadores abreviados para cualquiera de las operaciones aritméticas por igual y partido igual así que ejecuto multiplicado por dos tu edades de 90 años dividido entre dos tu edades de 45 años como vemos los operadores abreviados pues eh me permiten eh trabajar me permiten eh trabajar con operaciones aritméticas de una forma bastante sencilla Por cierto que eh llegados A este punto caigo en que se me ha olvidado hablar de los comentarios que son pues elementos importantísimos imprescindibles en cualquier lenguaje de programación evidentemente también en javascript voy a ponerlo por aquí vamos a ver estoy en salidas javas scrip voy a poner por aquí eh una nueva carpeta 00 syntaxis dentro de sintaxis voy a poner una nueva carpeta llamada 001 comentarios entonces simplemente hacer un refresco de que 001 comentarios de una línea js voy a bajar CD No aquí cd00 aquí dir CD 001 vale Y entonces esto es un comentario de una línea pero cuidado Bueno vamos a ejecutarlo no de 00 un no sale nada en pantalla porque no tiene que salir nada en pantalla porque el comentario no sale en la consola sino que se queda en el código fuente pero cuidado porque esto ya no es un comentario y eso va a causar un error en javascript lo ejecuto y me da error vale me dice el Pero te lo Admito porque el pero podría ser un identificador de una variable Pero cuidado ya no lo sé interpretar vale por tanto eh Hay que tener en cuenta que hay que seguir a rajatabla las reglas de sintaxis correctas para javascript tenemos También por supuesto comentarios de múltiples líneas los comentarios de multilínea se abren con barra asterisco se cierran con asterisco barra esto es un esto sigue siendo un comentario no de 002 todo correcto pero cuidado porque esto ya no es un comentario Así que ejecuto Y una vez más me da error porque me dice que coge la palabra pero no sabe interpretar la palabra cuidado Vale por tanto en este caso hay que tener cuidado con los comentarios por supuesto sabemos que tenemos comentarios y hay que utilizarlos convenientemente pues según evidentemente la ocasión en la cual nos encontremos bien estábamos trabajando con las variables eh Vamos a continuar con variables 002 eh tipos de variables a partir de ecmascript 2015 a partir de las versiones de javascript 2015 tenemos tres tipos de variables por suerte que son las siguientes global.js Y entonces eh voy a hacer ahora mismo tampoco van a tener mucha diferenciación bar edad es igual a 45 edad es igual a 46 Así que console.log voy a la edad de por aquí tu edades de años tu edades de los años que sea vale salgo de aquí me voy a dónde estoy Pues no lo sé dir me voy a 003 variables me voy a 002 tipos de variables y no de 001 global tu edades de 46 años bien a partir de mcrip 2015 Tenemos también la variable local Tenemos también la figura de la variable led me permite especificar una variable que solo será visible a nivel de bloque ahora mismo todavía en el repaso que estamos haciendo de javascript es pronto para explicar led más adelante lo explicaré pero viene bien saber que a veces tenemos disponible la clásica la vieja y confiable variable global bar pero también desde 2015 tenemos la variable local led que a veces nos puede dar Buen juego para declarar cosas que no salgan de la estructura en la que estamos trabajando y también desde ecmascript 2015 tenemos la constante que en el ejercicio que voy a hacer ahora mismo parecerá un poco inconveniente voy a poner const edad es igual a 45 y a continuación voy a intentar redefinir edad pero claro como es una constante no de 003 pues va a dar un error porque me dice que he intentado asignar a una variable que es constante y si es constante por definición es que no puede variar las constantes en principio parecen inconvenientes porque para qué bloquearme con algo que no puede variar cuando puedo utilizar algo que puede variar y resulta que pues en programación informática regla general el uso de constantes es más eficiente que en cuanto a consumo de memoria y en cuanto ael de proceso que el uso de variables esto quiere decir que si sabemos que algo no va a cambiar a lo largo de un programa pues nuestro programa será mejor funcionará mejor será más consistente el código será más correcto si eso que sabemos que no va a variar lo declaramos como constante porque precisamente no va a variar bien Un ejemplo por ejemplo 004 el ejemplo de pi vale un ejemplo sería voy a por aquí un ejemplo sería const pi es igual a 3.141 lo que sea claro y ahora vengo aquí y digo Ok pi es igual a 4 Pues el valor de pi es de pi y le quito por aquí los años claro esto que he escrito aparte de que no funciona es un sin sentido en el sentido de que pi por definición es 3.14 15 y un montón de dígitos si yo le digo que pi es igual a 4 pu ya no es pi por definición por cierto que con respecto a buenas prácticas es bastante recomendable que las constantes se declaren en mayúsculas que el identificador de la constante esté en mayúsculas como hemos visto en el ejercicio anterior técnicamente funciona sin que esté declarado en mayúsculas pero es bueno Es recomendable que si declaramos una constante la declaremos en mayúsculas en javascript y yo diría que en prácticamente cualquier lenguaje de programación en el que estemos trabajando a continuación vamos a hablar también de que existen una serie de reglas de declaración de identificadores Qué es un identificador pues por ejemplo el nombre de una variable es un identificador el nombre de una función es un identificador el nombre de un objeto es un identificador los nombres digamos en un lenguaje de programación Así que vamos a crear una nueva carpeta 003 identificadores y dentro de identificadores voy a crear una un archivo llamado 001 reglas de identificadores js bien Así que digo bar edad es igual a 45 esto es válido bar edad es igual a 45 y tengamos en cuenta que esto equivale a dos variables diferentes dentro de javascript por tanto javascript es lo que se llama Case sensitive es decir es sensible a las minúsculas y a las mayúsculas bien También tenemos bar edad 2 es igual a 45 todo es válido cls dir eh Me voy a pino me voy a CD dos puntos dir me voy a cd3 dir voy hacer una cosa voy a mover esto aquí y esto lo voy a mover Aquí vamos a verlo vale Así que dir se sigue comiendo la línea pero bueno eh No de 001 Vale y todo correcto hasta el momento pero si ahora vengo por aquí y digo bar edad 2 es igual a 45 esto ya no es correcto he forzado en este caso eh un error vale Y me dice que unexpected number edad do no sabe qué es eso sí que es correcto poner edad gu b2 comprobamos como ahora funciona correctamente no es correcto en este caso poner edad gu2 porque el programa entiende que el guion es el signo de resta y por tanto no sabe interpretar eso vale por tanto este caso no es válido este caso no es válido otra cosa que no pued podemos hacer voy a matar un poco los casos no válidos para que no me creen error eh es eh Por ejemplo puedo no puedo poner uno edad es igual a 45 un identificador no puede empezar por un número pero sí que puedo poner bar e dos pun Dad es igual a 45 eso sí que se admite perfectamente vemos por lo tanto que hay una serie de reglas para establecer identificadores Y luego como en cualquier lenguaje de programación hay una serie de palabras reservadas que no puedo utilizar entonces las palabras reservadas que no puedo utilizar son las siguientes son vamos a verlo son bar por ejemplo bar global es igual a 45 Vale pues vamos a ver global parece que sí bar eh qué puedo decir cl bar por ejemplo o bar Será posible o bar const no puedo utilizar const porque const es una palabra reservada si me meto en Google si me meto en Google por aquí vamos a ver hay por ahí es palabras reservadas javascript vale Estas son las palabras reservadas que no puedo utilizar voy a copiarlas por ejemplo If o Catch vale o Else o delete o do o for vale voy a copiarlas palabras reservadas ahí las tenemos son las palabras que no puedo utilizar para declarar un identificador de una variable o de un lo que sea bien una vez que tengo esto ya a partir de aquí pues saltamos a las estructuras de datos yo siempre suelo decir vamos a ver nueva carpeta eh el caso de la agenda y entonces voy a poner eh 001 eh agenda con variables js Vale entonces yo ahora hago así No aquí no algo mal vale 001 agenda.js bien y ahora vengo por aquí y digo bar agenda es igual a José Vicente caray venga va José Vicente venga y ahora a continuación Bueno aquí bajo 00 no CD bajo c004 4 dir y dir 001 no de 001 y vale aquí lo tenemos y ahora digo console.log la agenda es más agenda bien Así que vengo por aquí y ejecuto la agenda es José Vicente hasta aquí bien pero el problema es y ahora digo agenda es igual a Juan y ahora me dice ahora copio ahora pego ejecuto y me dice la agenda es José Vicente y la agenda es Juan las variables están bien en algunas ocasiones en cuanto a que queremos que el contenido de la variable vaya variando pero hay veces que no queremos que el contenido V vay variando sino que queremos ir añadiendo más contenido por lo tanto para esta finalidad concreta pues una agenda no nos vale en el sentido de que cuando pongo un nuevo valor el valor anterior se borra yo no quiero borrar el valor anterior Yo quiero mantener los valores para ello tenemos una estructura que es la colección los arr los arreglos los conjuntos digamos así que 001 crear una colección js y yo a continuación vengo por aquí y digo agenda es igual a colección vacía una de las formas de declararlo es poniendo dos corchetes y a continuación digo agenda de cer es igual a José Vicente agenda de un es igual a Juan Así que voy a poner agenda es aquí esto no va a estar bien en el sentido de que vamos a verlo bajo cd2 vale dir Ok no de 001 vale la agenda es José Vicente la agenda es José Vicente coma Juan en este caso node me está haciendo el favor que no tendría por qué hacérmelo pero bueno de serialize una ray en una cadena porque esto es una Ray pero aquí lo he eh añadido después de una cadena yo creo que esto en el navegador web me daría error pero parece que no de como digo me está haciendo el favor de Eh ponérmelo Así que voy a quitar la cadena Vale y ejecuto y dice José Vicente y dice José Vicente Juan y vemos que al no obligar a serializar pues aparece que realmente pues es una Ray es un conjunto de datos bien esto quiere decir por lo tanto que yo ahora puedo ir añadiendo tantos elementos como quiera Jorge y si yo ejecuto veo como puedo ir poniendo elementos Qué cosas puedo hacer en una ray en una colección Bueno pues lo primero que estamos viendo Es que los array son colecciones mutables y yo puedo ir añadiendo elementos tantos como quiera otra cosa que puedo hacer 002 Push js puedo Añadir elementos así o bien puedo elementos voy a poner Table en lugar de poner en lugar de poner log no de 002 vale vemos como primero está José Vicente luego está José Vicente Juan luego está José Vicente Juan y Jorge yo me he preocupado de ir añadiendo poco a poco los valores vale a continuación voy a decir agenda punto Push y voy a decir Julia y esto lo que hace console pun table y esto lo que hace es lo mismo de antes lo único es que si yo declaro manualmente los índices yo tengo que saber por qué índice Me he quedado y tengo que poner manualmente el índice a continuación Pero si yo hago Push el programa automáticamente se encarga de calcular Cuál es el índice que viene a continuación otra cosa que tengo es el pop vamos a momentín esto no lo quiero vale Así que voy a guardar esto 003 pop js bien y voy a hacer agenda punto pop agenda. pop quita el último elemento de la Ray Así que console Table agenda ejecuto y vemos que vamos a verlo un momento agenda. pop vale un momento que creo que no lo ha ejecutado Okay tengo agenda pun Push José Vicente Juan Jorge Julia voy a hacer una cosa voy a quitar los consoles pun tables y a ver qué me queda vale Ah claro Caray no de 003 que estaba en el anterior es más lo he nombrado incorrectamente Vale ahora no de 003 pop y ahora sí vemos como ha quitado a Julia del final del de la lista y voy a devolverlo como estaba vale vemos que vamos a ver aquí me falta uno ejecutamos vemos que estaba José Vicente luego José Vicente Juan luego José Vicente Juan y Jorge luego José Vicente Juan Jorge y Julia Pero luego se quita Julia al hacer el pop otra cosa que puedo hacer es vamos a guardar esto es splice al hacer un splice agenda. splice y le digo Cuál es el número el índice y el número de elementos que quiero quitar Así que digo Quiero quitar el elemento cero que es José Vicente y solo quiero quitar un elemento o sea podría quitar dos elementos por ejemplo console.log agenda y ahora a continuación ejecuto y vemos como vamos a verlo así un momentín no de 004 Vale y vemos como el Push el pop perdón a quitado a Julia pero agenda pun splice ha quitado a José Vicente con lo cual queda Juan y Jorge e importante si José Vicente tenía el índice cero y yo hago un splice los índices corren Y eso quiere decir que Juan Ahora tiene el cer y Jorge que tenía el dos Ahora tiene el número uno vale esto es importante que cuando hago un splice no estoy Vaciando ese registro sino lo que estoy haciendo es eliminando ese registro y por tanto el resto de registros corren para rellenar los números en este caso porque estoy trabajando con una colección de tipo numérico ahora a continuación lo que voy a hacer en este caso va a ser eh trabajar también con ar raí eh cuyo índice no tiene por qué ser numérico puede ser alfanumérico por tanto voy a crear una nueva carpeta 003 colecciones alfanuméricas Esto está muy bien porque hay otros muchos lenguajes de programación que no tienen esta facilidad entonces digo eh pues por ejemplo colección Alfa numérica Y entonces digo lo siguiente yo voy a decir agenda es igual a una colección pero agenda de nombre en lugar de poner un número puedo poner una cadena de caracteres alfanuméricos agenda es igual a José Vicente agenda de teléfono es igual a 1 2 3 45 y agenda de correo email lo que sea es igual a info @ carratala comom si yo ahora digo console Table agenda podremos comprobar primero bajo dir cd3 dir no de 001 vale podemos comprobar que los índices ya no son números sino que los índices son elementos alfanuméricos claro evidentemente al hacer un Push pues ya no sería tan fácil hacer un Push o hacer un splice ya que no hay técnicamente un índice numérico vale pero sin embargo se admite perfectamente hacer esto además a continuación vamos a ver que existe el concepto de colecciones multidimensionales y vamos a ver también que existe el concepto de colecciones multidimensionales mixtas así que voy a crear por aquí una nueva carpeta colecciones multidimensionales Y entonces digo multidimensional js ks no js Así que a continuación voy a hacer lo siguiente voy a decir que aquí por ejemplo bueno da igual bar agenda es igual a colección de esta forma eh agenda de cero es igual a su vez y esto entiendo que va a ser difícil de entender es igual a su vez a una colección a una subcolección o si queremos llamarlo así a una colección de una nueva dimensión es una colección que contiene otra colección de esta forma agenda de cer de un Esta es la segunda dimensión Perdón agenda de 0 es igual a el nombre por ejemplo José Vicente agenda de cer de un es igual al teléfono agenda de cer de dos es igual al correo electrónico de esta forma yo ahora puedo repetir este esquema agenda de uno para Jorge es Jorge y para agenda de dos y para tantas agendas como quiera y esto es Juan y esto es Juan si ahora hago un console punto log un console punto Table perdón de agenda veremos que vamos a verlo veremos que cd0 CD 004 no de 001 Vale y vemos que tengo como podemos ver ahí pues los registros y las dimensiones y todo esto es decir podemos no solo es que podemos hacer eh arris multidimensionales Sino que además es algo Bastante conveniente es algo Bastante útil Eso sí si hacemos arris multidimensionales pues probablemente nos va a ser muy útil nos va a ser tremendamente útil mezclar el concepto de índice numérico con índice dimensional o sea con índice alfanumérico Así que vengo por aquí nueva carpeta 005 índices mixtos y en índices mixtos voy a crear un nuevo archivo 001 agenda mixta js voy a copiar este código en este caso voy a decir que esto en lugar de cero es nombre y esto en lugar de uno es teléfono y esto en lugar de dos es email Así que copio y pego y vemos como estoy creando una ray multidimensional en el cual estoy mezclando números para la primera dimensión y cadenas de caracteres para la segunda dimensión Y si Ahora vuelvo atrás y entro en 005 y hago no de 001 me encuentro con que tengo el registro cero el registro un el registro dos y tengo la columna nombre y la columna teléfono y la columna email y por tanto como podemos ver pues esta información está bastante más mejor ordenada digamos ahora bien si hablamos de estructuras de datos Y en este caso hablamos de arreglos pues inevitablemente tenemos también que hablar dado que estamos en javascript Tenemos que hablar de Jason se ha convertido en la forma estándar de organizar datos en documentos como intercambio y todo esto y Jason tiene una importancia muy grande dentro del ecosistema de no de js Por cierto que voy a organizar un poco reorganizar esta carpeta github 2 Ah no dejs vale entonces esto es javascript esto es estructuras de datos vale esto es 002 Ah mira sí colecciones vale Sí Ok claro 002 arise y entonces todo esto lo meto aquí porque entonces aquí a ver reintentar voy salir reintentar Ah sí porque tengo esto abierto vale Okay y ahora Aquí voy a hacer jas Ahora vuelvo a abrir brackets vuelvo a abrir el cmd Vale y vuelvo a navegar hasta la carpeta vamos a ver CD documentos CD github 2 CD de no de js CD no me acuerdo dir cd00 dir CD 002 dir CD 04 dir vale Y ahora jas entonces este de 003 ahora me vengo aquí ok y ahora aquí en array tengo lo de antes vale me vengo a Jason y vamos a ver qué es un Jason declaración de un Jason podríamos decir que el Jason de alguna forma es como una colección pero más a Ob bestia como una colección pero con más posibilidades entonces vengo aquí y digo bar eh I va a poner Jason lo que pasa es que no quiero que se entienda que es que el identificador tiene que ser Jason identificador puede ser el que se quiera Vale entonces voy a poner eh bar si esto es una agenda Vale pues una entrada de la agenda y entonces en lugar de poner corchetes porque corchetes definen eh una colección lo que voy a hacer es poner una llave la llave define un jas Y entonces voy a poner parejas de clave y valor donde van a trabajar de la siguiente forma nombre es dos puntos José Vicente Si queremos por Claridad lo puedo bajar de línea separado por comas y entonces digo edad o teléfono es dos puntos 1 2 3 4 5 si 1 2 3 4 5 es un número se puede quedar en número sin comillas o lo podría meter en comillas para convertirlo en una cadena da igual y ahora email doino @ josevicenteabadcoca y veo que pues me devuelve el nombre José Vicente teléfono 1 2 3 45 lo que sea vale vemos como me respeta en este caso el Jason es muy Guay Porque además se combina perfectamente con los arris en el sentido de que es un documento que puede tener toda la complejidad que necesitemos por ejemplo eh Yo vengo por aquí y digo vamos a ver ahora voy a poner 002 eh array dentro de Jason js y voy a decir que por ejemplo eh vamos a ver mm No lo sé Quiero poner algo que haya varios Mira email por ejemplo email creo que quiero que no haya uno quiero que haya varios pues email creo una colección y lo meto aquí dentro voy a pulsar enter para que se vea más claro y digo info @ara comom y jocars 2@gmail.com así que básicamente lo que tengo es un jas y dentro del jas tengo una Ray y no pasa nada y es genial y es válido y es todo correcto Vale entonces a ver por qué esto no aparece de aquí refrescar actualizar ahora Vale entonces me vengo aquí no de00 eh No de02 no lo he guardado en no02 dónde lo he guardado Ah sí míralo Ahí está Vale tengo una elemento Jason que tiene un nombre que tiene un teléfono y dentro del email tengo vale nuevos elementos pero es que es más yo a la vez puedo hacer 003 jas dentro de array y por tanto puedo decir que entrada no es un jas es una Ray de y ahora vengo por aquí y ahora vengo por aquí y digo que meto otra entrada en la agenda otra entrada en la agenda eh aquí me falta algo aquí me falta algo Esto no es correcto ahora sí Y ahora sí esto así hay que tener cuidado Eso sí vamos a intentar utilizar correctamente las sangrías Esta última coma sobra ahí vale console pun log esto ya no es una entrada esto es una agenda console.log agenda con lo cual a continuación esto es 003 no de 003 y veo que tengo una agenda que está compuesta a partir de js esto es muy importante especialmente en el mundo node para ahora luego combinarlo con la base de datos ya que la base de datos deb pues funciona mediante archivos Jason bien con esto por tanto vemos como pues la estructura de un Jason es muy flexible en el sentido de que se mezcla con array se mezcla con jases y nuevos array y puedo crear tantos niveles de complejidad como me sea necesario ual insisto es me da una gran flexibilidad para transmitir datos dentro de una aplicación cosa que es muy importante y me da mucho mucha potencia me da muchas posibilidades de Cara a almacenar información Gracias a lo cual como comento debido a ello pues la el tándem js y deb en bases de datos no sql es lo que le está tando cara a sql todavía no todavía la gran cuota de Mercado La tienen los las bases de datos sql pero desde luego Jason es un gran Aliado para las bases de datos de tipo No sql pero bueno ya llegaremos a ello vamos a empezar con el tema de estructuras de control entonces para trabajar con estructuras de control vamos a empezar con las clásicas estructuras de bucle y luego con las clásicas estructur condicionales en estructuras de bucle voy a poner el 001 for luego voy a poner el 002 While y luego pondré el 003 do While y luego en estructuras condicionales Pues voy a poner el 001 If y luego pondré el 002 els luego voy a poner 003 el If y luego por último pondré el 004 switch y así un poco pues vamos a pegar un repaso a las estructuras de control clásicas y tradicionales dentro de javascript por lo tanto vamos a por ello Vamos allá Vale pues vamos a empezar con la estructura de control for 001 for. js y entonces yo siempre suelo poner el mismo ejemplo yo digo bar dí es igual a 1 y digo no realmente no hace falta esto for bar técnicamente Debería ser led día es ig 1 día es menor o igual que 31 día más en la estructura de control for tenemos en primer lugar la declaración la inicialización en la finalización y el incremento y por tanto pongo console.log hoy es el día más del mes Así que si todo va bien Vamos a ejecutar esto CD baja CD 005 eh No dir sí CD 005 eh CD 001 y no de 001 y hoy es el día pues 1 2 3 4 5 6 7 8 9 10 11 12 y tal del mes Bien Esta es la estructura de control for luego también recordemos que la estructura de control for incremento no tiene por qué ir de valor en valor puede ser más igual a 2 y por tanto al ejecutar no de 002 pues Qué ha pasado damos igual a dos a ver MMM m No espera que no lo he ejecutado directamente no de 002 ahora sí vale hoye es el día 1 3 5 7 9 11 13 15 y así y luego también 00 esto es for decremento Entonces el for decremento pues puedo empezar en 31 puedo acabar en uno mayor o igual y 1 y día menos pues ejecuto no de 003 no eh cómo he llamado esto 003 no de 003 Ah Espérate Espérate porque no está bien nombrado tiene que tener la extensión js para que el programa lo entienda y aún así Ah sí Espérate que me falta un punto y coma vale No de 003 ahora sí Hoy es el día 31 30 29 28 27 25 lo que sea del mes esto En cuanto a la estructura de control foro luego Tenemos también ya sabemos la estructura de control While donde yo voy a hacer lo siguiente 001 wijs w. js Vale entonces voy a escribir While día es menor que 31 y aquí hay un problema y el problema es que si yo ejecuto esto CD 002 no de 001 me dice vamos a verlo vamos a ver el error Ah TACA Tac Ta me dice dia is not defined O sea qué es día Vale pues tengo que definir día definición inicial punto js Vale pues digo dia es igual a 1 si es posible bar dia es igual a 1 no de 002 y el problema es que me acabo de meter en un bucle infinito es un bucle Wi que no tiene la condición de finalización Bueno cuando esto ocurre pulso control c y finalizo porque el bucle While 003 condición de finalización js el bucle While dentro del bucle debería tener la condición de incremento Así que si todo va bien pues ahora ejecuto no de 003 y ahí tenemos ya el bucle correctamente funcionando siempre que explico esto parece que el bucle While sea un bucle un poco tonto porque hay que hacérselo todo Mientras que el bucle for Pues de entrada todo va bien pero el bucle While en la práctica tiene mucha más utilidad de lo que puede parecer vale dicho explicado así parece que el bucle for sea El bueno y el bucle While sea el tonto de la película pero ya veremos más adelante que no Y por último el bucle dowi 001 duwi js hace lo siguiente vamos a ver voy a el bucle no voy a hacer lo siguiente do esto de aquí While esto de aquí técnicamente debe tener un punto y coma Y entonces ahora digo lo siguiente console pun log todo Ok vale Y ahora digo bar dia es igual a 10 y digo Mientras que diaa sea menor que 5 console pun log todo Ok en un mundo ideal este código no se tendría que ejecutar porque el código solo se ejecuta mientras que dia sea menor que 5 pero hay un problema y es que el bucle do While la estructura de control do While primero hace algo y luego se pregunta si lo tendría que haber hecho y si la respuesta es negativa y si la respuesta es falsa en ese caso no lo volverá a hacer pero de momento una vez ya lo ha hecho Entonces ahora guardo bajo cd3 eh No de 001 y dice todo Ok es como Cómo que todo Ok si no deberías haber ejecutado todo okay Bueno pues el siguiente bucle no lo ejecuta pero ese ya lo ha ejecutado y ese ya no nos lo quitamos de encima continuamos con las estructuras condicionales Entonces vamos a empezar con la estructura condicional If voy a empezar poniendo el ejemplo que siempre pongo que es el siguiente If js Así que voy a poner bar edad es ig a 45 y siempre pongo que si edad es menor que 20 o 30 vamos a poner 30 en ese caso console log eres un joven esta estructura es importante en el sentido de que pues por primera vez hasta el momento permite procesar de forma condicional ejecutar de forma condicional código todo el código que hemos escrito Hasta ahora se ejecutaba Sí o sí ahora por primera vez podemos establecer una condición de ejecución condicional solo se ejecutará en el caso de que pues pase lo que sea bien Voy a tirar ha atrás CD dir CD menos dir CD 002 cd00 dir no de 001 y no se ejecuta nada para ello tenemos la estructura els Así que lo que voy a hacer en este caso es ponerlo aquí en els 001 els js vale Y voy a decir lo siguiente els console.log ya no eres tan joven por lo tanto vengo por aquí bajo f002 no de 001 y me dice ya no eres tan joven si esta expresión es cierta se ejecuta esto si esta expresión es falsa se ejecuta esto de aquí además eh También podemos realizar Eh bueno una serie de cosas vamos a hacer lo siguiente vamos a poner esto como 003 els If el If els vamos a actualizar els If renombrar entonces voy a decir bar día de la semana es igual a lunes y digo Si día de la semana es igual a lunes en ese caso console.log hoy es el peor día de la semana para ello por tanto Ahora hay una estructura que es el If que nos permite especificar otro caso verdadero si día de la semana es igual a martes Hoy es el segundo peor día de la semana y puedo repetir esto Tantas veces como haga falta hoy es miércoles con acento o sin acento como queramos jueves viernes sábado con acento o sin acento domingo y hay un caso els entonces voy a poner ya estamos a mitad de semana un momentín Espera espera ya estamos a mitad de semana Esto va aquí mañana ya es viernes Por fin es viernes el mejor día de la semana Parece Mentira que mañana ya sea lunes y yo no sé qué día es hoy o no sé qué has escrito pero no es un día así que ejecuto 003 no de 001 hoy es día de la semana pongo jueves ejecuto mañana ya es viernes y pongo longaniza ejecuto y dice yo no sé que has escrito pero no es un día de la semana vale Así que la estructura Else If nos permite atrapar diferentes casos verdaderos Y por último tenemos la estructura de control switch que es una estructura de control que básicamente es un resumen de Else If Y entonces digo var día de la semana Vale entonces voy a decir switch esto lo pongo aquí switch Ay venga switch día de la semana Y entonces aquí a ver espera switch día de la semana y voy a poner una cosa que se llaman cases voy poner una cosa que se llaman casos Case lunes cas martes cas miércoles cas jueves cas viernes qu sábado cas domingo y ya Y esto es default Vale entonces esto es dos puntos esto ent es dos puntos dos puntos vale default dos puntos y después de cada uno de los casos va un break porque si no irá ejecutando caso a caso break break y ya vale entonces si todo va bien Esto es lo mismo este corchete va Aquí correcto vale vamos a por ello CD dos puntos CD 004 no de 001 vale No sé que has escrito pero no es un día de la semana es igual a lunes hoy es el peor día de la semana con lo cual vemos que pues a Perdón aquí no vemos que el switch pues es como una especie de abreviatura como una especie de abreviación de lo que tenemos dentro del elseif bien a continuación vamos a hablar de funciones donde en javascript como en una gran cantidad de lenguajes de programación la encapsulación y la reutilización es una parte muy importante de la escritura de programas informáticos por tanto voy a crear una nueva carpeta 001 creación de una función y una vez que creo una función nuevo archivo voy a poner 00 no voy antes de crear una función voy a ilustrar Por qué hace falta una función problema vale Yo vengo por aquí y digo Index o 001 problema punto js vale Y yo ahora digo eh console.log me llamo José Vicente console pun log tengo 45 años y console.log mi correo es info @ josevicenteabadcoca me llamo Juan tengo 46 años mi correo es Juan @ lo que sea y yo vengo por aquí llamo Jorge tengo 47 años mi correo es Jorge entonces ejecuto Y técnicamente funciona pero este código huele mal en el sentido de que cuando un código se repite probablemente podríamos utilizar algún mecanismo dentro de los lenguajes de programación para poder reescribir este código y que sea más reutilizable para ello declaración de funciones voy a crear un archivo fjs que va hacer lo sigi función Saluda y esto que estamos viendo voy a poner punto y coma esto que estamos viendo Es la declaración de una función en javascript si yo simplemente defino la función precisamente por este principio de encapsulación eso no quiere decir que la función se va a ejecutar directamente porque lo que ocurre Es que la función eh Se guarda en la memoria esto quiere decir que yo ahora entro en 002 no de 001 y no ocurre nada en pantalla pero yo ahora 003 uso de la función yo ahora vengo por aquí actualizo el árbol vale Y ahora voy a llamar a la función esto es la declaración de la función esto es la llamada de la función CD 003 no de 001 me llamo José viicente tengo 45 y mi correo es info @josé carratala comom pero lo más divertido de esto es que yo puedo ejecutar esto varias veces y se ejecuta varias veces con lo cual con respecto al código original con respecto al código que tenía antes pues este código supone algunas ventajas este código me ofrece a vale me ofrece algunas ventajas además de esto voy a crear una nueva carpeta para explicar que vamos a ver varias funciones la función que yo he creado únicamente me sirve para saludar a José Vicente pero yo puedo venir por aquí y decir función saluda Juan me llamo Juan y ahora quiero saluda a Juan yo puedo crear tantas funciones como yo quiera pero claro hacer esto no de 001 no es vemos allí me llamo Juan vale No es especialmente cómodo no es especialmente escalable porque tendría que hacer infinitas funciones para saludar a infinitas personas Menos mal que existe una cosa llamada nueva carpeta 005 parámetros en las funciones por tanto voy a guardar esto parámetros en las funciones de la siguiente forma vengo por aquí y voy a decir saluda pero aquí voy a poner nombre es un parámetro que yo me invento para Esto está para esto están los paréntesis y ahora vengo por aquí me llamo más nombre Claro si yo ahora hago esto y yo ejecuto no de 001 me llamo undefine es decir tengo que poner un nombre me llamo José Vicente me llamo Juan me llamo Jorge así que ejecuto de nuevo Hola me llamo José Vicente me llamo Juan me llamo Jorge las funciones además admiten varios parámetros nueva carpeta 006 varios parámetros bien y aquí a continuación función yo puedo poner tantos parámetros como quiera nombre coma edad coma email tengo enaden edad mi correo es má email Así que José viicente 45 cominfo @ara comom Juan 46 juan@ara.mil.ar vengo aquí CD 006 no de CD 006 no de 001 y ahí lo tenemos Y esta es la ventaja que tienen las funciones Y es que puedo reutilizar código puedo personalizar el código puedo hacer un montón de cosas puedo hacer una barbaridad de cosas Eso sí con respecto a lo que acabo de hacer hay una cosa que no es demasiado limpia no se considera demasiado limpia la puedo hacer porque de hecho la he hecho y vemos como la he hecho pero una función no debería dar directamente una salida una función no debería poder ser capaz de escribir directamente en la consola para ello dentro de las funciones 007 return hay un valor especial instrucción especial llamada returno poner aquí 001 return pun js vale donde yo por ejemplo voy a decir cadena es igual a algo cadena es más igual te encadenó te encadenen por ejemplo contra barra n si quiero que baje de línea no hay ningún problema cadena punto igual tengo no sé cuántos años y pongo contra barra n si quiero que salte de línea cadena punto igual mi correo es no sé cuántos a ver espera que puesto doble No ahora he quitado los dos vale más contra barra n y ahora a continuación return cadena y esto es lo que debería ocurrir la función debe retornar algo así que cd2 puntos CD 00007 eh No de 001 no devuelve nada porque yo no he especificado por dónde lo quiero sacar Yo solo sé que cuando yo llamo a la función me devuelve este valor pero por dónde lo saco por la consola lo escribo un archivo dónde no lo estoy especificando pues console.log saluda saluda entonces ejecuto y ahora me llamo José Vicente tengo 45 mi correo no sé que no sé cuántos es decir eh la función no debe ser la que diga por dónde salen las cosas cuando yo llamo a la función y la función me devuelve algo en ese momento es donde debo especificar Por dónde sale esa información per eso no debería por buenas prácticas no debería venir especificado dentro de la función que si lo hacemos funciona y no pasa nada pero si no lo hacemos y lo hacemos bien pues mejor que mejor evidentemente bien y con esto Ya por fin vamos a los últimos dos puntos del repaso de javascript que son el trabajo con objetos y el uso de librerías al menos de las librerías básicas evidentemente entonces para trabajar con objetos en primer lugar diremos que los objetos son pues como una estructura que nos permite reutilizar código pero de una forma mucho más amplia de lo que nos permite una función Así que diríamos que un objeto es prácticamente la evolución de una función vamos a declarar Ob nuevo archivo no nueva carpeta 001 objetos vale esto fuera Okay Eh refrescar Okay 001 bien y crear un objeto Así que un objeto es digamos por ejemplo clase persona eh la palabra Class es una palabra reservada el nombre del objeto es el que nosotros queramos Así que a continuación lo que voy a hacer es poner un par de corchetes se parecen las funciones pero no llevan parámetros y ahora a continuación lo que voy a hacer es poner Eh bueno una cosa que se llama un constructor es lo que ocurre cuando el objeto nace entonces digo eh constructor Esto sí que tiene toda la forma de una función y pongo dis punto edad es igual a 0 Y esto quiere decir que cuando el objeto nace tiene C años vamos a verlo CD me voy a c001 y no de 001 bien no ocurre nada evidentemente Pero yo a continuación lo que voy a hacer es 002 crear una instancia porque yo ahí 002 instanciar lo que he hecho simplemente ha sido crear una clase en la memoria pero no estoy creando nada realmente con esa clase es como una construcción conceptual pero no es nada concreto no es una persona concreta en este momento es el concepto de lo que es una persona así que ahora vengo por aquí y digo persona 1 es igual a New persona quiere decir que persona 1 ahora recibe todo lo que tenga persona así que voy a poner console log y persona un vamos a verlo c002 no de00 un quieto Ah 002 lo he llamado Pues bueno pues Vale pues no de 002 bien y me dice que eh persona un es una persona y Su edad es de cero cuando creo una clase esto que veo aquí son eh los esto es el constructor es una función que se ejecuta automáticamente sin que yo la tenga que llamar cuando el objeto nace y eh luego por último pues esto que estoy viendo aquí es la edad del sujeto es una propiedad esto recibe el nombre de propiedad a partir de este momento yo puedo crear diferentes propiedades yo puedo crear tantas propiedades Como quiera entonces 003 nuevas propiedades Vale y 001 propiedades j vale Y ahora a continuación digo dis punto edad dis punto Perdón nombre es igual a nada de momento Okay entonces ejecuto 003 no de 001 Vale y nombre de momento es ninguno bien puedo crear tantas tantos métodos como quiera los métodos son funciones y métodos js Así que el constructor es una es un método que es del propio sistema Pero y ahora puedo decir saluda es eh console.log eso está mal ahora veremos Por qué eh Hola Me llamo más dis nombre más y tengo má edad vamos a verlo ahora digo persona un y ahora digo persona 1 punto saluda Aquí lo tengo muy bien ya lo tenemos por aquí Así que cd2 puntos c004 no de 001 y Hola Me llamo de momento nada y tengo c años bien yo aquí a continuación este objeto que he hecho está un poco mal y ahora a continuación voy a explicar por qué está mal y cómo podría estar mejor para empezar vamos a ver propiedades desde fuera 001 propiedades desde fuera vale Yo puedo hacer lo siguiente pued de que persona 1 pun edad es igual a 45 y persona 1 punto nombre es igual a José Vicente eso se puede hacer funciona CD 005 no de 001 Hola me llamo José Vicente y tengo 45 años por ejemplo pero no es muy limpio en el sentido de que aunque se puede hacer y de hecho acabo de demostrar que se puede hacer pero técnicamente cuando yo hago un objeto no solo importa la reutilización sino que también importa la encapsulación y que la información esté protegida por tanto de esta forma la forma ideal de proteger una propiedad voy a poner private dis edad creo que no me va a hacer caso a esto pero bueno Ahí Ah un momentín vale Sí pero no ya vale Okay vale la forma de hacer esto bien consiste voy a ponerlo por aquí en crear setters y getters vamos a ver setters y getters vale un momentín que voy a comprobar una cosa sí pero no da igual vale perfecto Vale entonces la forma correcta de hacerlo sería lo siguiente voy a poner set edad nueva edad y este código dice dis pun edad es igual a Nueva edad set nombre nuevo nombre dis nombre es igual a nuevo nombre de esta forma la idea no es hacer esto sino persona 1. set edad y la nueva edad es 45 persona 1. set nombre y el nuevo nombre es José Vicente de tal forma que yo en este caso estoy usando setters para algo entonces para escribir algo Perdón Así que ls cd6 no de 001 eh modle not Found vale un error vamos a ver Ah sí Perdón node 001 ahora Hola me llamo José Vicente y tengo 45 años pero las propiedades las he puesto de una forma más limpia que es escribiéndolas desde fuera un momento y vale a continuación vamos con los getters Y es que si yo quiero la edad pues me debería decir pues tengo no sé cuántos años o get edad vale voy a hacer getters vale Y si quiero la edad tendría que decir get edad console aquí viene el problema console log dis punto edad y get nombre dis nombre bien el problema de esto está el problema de este código está en que cuando yo creo una función yo no quiero o no es una buena costumbre que la función haga un console pun log de la misma forma cuando yo creo un objeto no es bueno que el objeto haga un console punto log por lo tanto ahora lo que voy a hacer es 008 y return js y lo que debería ocurrir es return Hola Me llamo return Este es mi nombre return Esta es mi edad es decir seguimos la misma lógica que seguimos con las funciones en el sentido de que vamos a ejecutarlo de 008 no de 001 vale no dice nada pero si ahora vengo por aquí y digo console.log persona 1. saluda a continuación un error vale saluda sí cuidado punto y coma debe estar aquí después vale Hola me llamo José Vicente y tengo 45 años pero ahora este código está más limpio en el sentido de que pues es un código que eh que realmente encapsula el código que hay dentro de la clase y lo llama tanto para modificar como para sacar cosas por pantalla de una forma mucho más limpia y mucho más escalable con respecto a cómo lo hacía anteriormente Y por último dentro de lo que es el trabajo con clases voy a recordar el uso de una función que es la herencia de las clases entonces herencia js las clases pueden tener una organización jerárquica Class animal en la persona es un animal entonces voy a decir constructor y voy a decir que el animal respira entonces voy a decir respira return Ya sabemos el animal está respirando para que la clase persona se entere de que es una clase hija de animal hay que poner una palabra reservada extends y a continuación animal y eso quiere decir que persona hereda todo lo que tuviera anteriormente animal vamos a verlo 009 no de 001 vale hay un error porque nos dice que masc super constructor Y es que si una clase hereda de otra Aquí tengo que poner s no me acuerdo si aquí o dentro del constructor vamos a verlo Pues dentro del constructor Así que en el constructor no eh No pongo s lo cual quiere decir que la clase implementa todo lo que tiene la clase superior En mi opinión esto no debería existir en otros lenguajes no existe Pero bueno no pasa nada así que hago así y ahora por ejemplo y ahora por ejemplo digo eh console pun log persona 1 punto respira Así que ejecuto el animal está respirando en principio pensaríamos que esta clase no debería ejecutar la función respira porque la función respira es propia de animal y no de persona pero persona extiende a animal lo cual quiere decir que todo lo que tenga animal automáticamente a partir de este momento lo tiene también la persona aunque no aparezca específicamente en su código bien y dicho esto Una vez que hemos pegado un pequeño repaso a la programación orientada a objetos vamos a dar un repaso también a las principales librerías eh librerías bibliotecas Eh vale En definitiva eh packs de funciones que vienen pre integradas con javascript Hay un montón de ellas hay un absoluto montón de ellas voy a utilizar las más básicas voy a poner dos como ejemplo eh que son la librería de fechas y la librería matemática porque son las dos clásicas que se utilizan prácticamente en cualquier proyecto entonces dentro de las librerías voy a crear una nueva carpeta 001 voy a poner librería matemática la librería matemática implementa algunas funciones que pues bueno no están por defecto en javascript Como por ejemplo el redondeo js Entonces yo por ejemplo quiero venir por aquí y decir bar nota es igual a 4.6 recordamos que en javascript el decimal es el punto Entonces ahora digo console log Y entonces digo math punto y aquí aparecen todos los métodos y las propiedades que tiene el objeto math es un objeto preconstruido dentro de javascript y voy a math punr de la nota y esto lo que hace voy a bajar bajar c001 no de 001 Vale y la nota 4.6 de forma natural redondea a 5 el tengo diferentes tipos de redondeo tengo por ejemplo el sale que es un redondeo al alza redondea siempre hacia arriba En este caso vuelve a redondear a cco y tengo también el flor que es un redondeo a la baja independientemente de que sea 4,6 vamos a poder comprobar como redondea a cu como redondea a la baja tengo también funciones por ejemplo de números aleatorios a mí me parecen super interesantes números aleatorios js entonces voy a decir bar aleatorio es igual a maz pun Random donde el maz pun Random es un número aleatorio entre 0 y 1 con decimales console.log aleatorio no de 002 vale Y me da un número me da otro número me da otro número vemos como me va dando números aleatorios y luego también dentro de la librería matemática Pues tengo también hay muchas cosas vale Hay muchísimas cosas pero también tengo por ejemplo las funciones trigonométricas iones trigonométricas pues bar ángulo es igual a 0 y ahora quiero averiguar Cuál es el seno y el coseno de 0 pues console punto log coseno y es igual a maz punto Cos de ángulo el coseno de 0 es igual a 1 no de 003 el coseno es 1 y ahora quiero averiguar cuál es el seno el sin el seno del ángulo 0 es 0 ahora a continuación el ángulo va a ser el valor de pi ma punto pi partido por 2 o sea 90 gr para 90 gr el coseno es 0 porque es 6,12 pero exponencial a la -17 O sea 0,00 0 170 y un 6 o sea prácticamente 0 y el coseno es 1 en javascript como en la gran mayoría de lenguajes de programación los ángulos van con estos van con caray con radianes no con grados sexagesimales con lo cual pues hay que utilizar el valor de pi recordamos que eh la circunferencia entera en radianes es 2 pi radianes por lo tanto pi Pardo por equivale a 90 gr sexagesimales y luego para acabar esta parte de librerías vamos a hablar un poco de la librería de fechas 002 fechas donde yo lo que voy a hacer de momento creación de una nueva fecha j voy a decir bar fecha es igual a New date y ahora voy a poner console pun Table madre mía cuidado con esto console pun Table fecha porque esto lo que hace 002 no de 001 cuidado porque Ah mira fantástico pues no me ha cogido todos los datos que tiene el fecha Bueno pues no pasa nada Pues console pun log el año es más fecha get full year Así que get full year esto es un método ejecuto el año es 2023 Vale pues el mes es get full month el día get date creo o date o day ahora mismo no me acuerdo vamos a verlo get date a ver qué pasa get full month Ah get month Perdón no es full month vale el año es 2023 el mes es 7 no es correcto el mes es 8o pero en javascript el tema de las fechas es un poco caos lo voy a decir los meses no empiezan en uno sino que empiezan en cero Pues claro empezando en cero estamos en el mes número 7 que para los seres humanos es el mes número 8 Así que get month más un ejecutamos Vale ahora sí Ahora la hora es get hours Por qué la las horas es plural y el mes y el día es singular Pues no lo sé es que es un poco caótico el minuto es get minutes y el segundo es get seconds Así que ejecuto y eh 2023 8 14 20 10 28 vale vemos que hay un montón más de cosas por cierto pongo fecha y hay un montón más de propiedades y de métodos que puedo utilizar es una barbaridad está super bien vale pero son dos ejemplos para ilustrar el concepto de que javascript pues lleva una serie de librerías predeterminadas lleva una serie de librerías preinstaladas que nos permiten Pues en este caso hacer cosas con el lenguaje de programación y nos permiten pues partir desde una base de una gran cantidad de herramientas para poder utilizarlas ahora ya por fin llega el momento de empezar a trabajar con node js propiamente porque hasta ahora hemos utilizado la base es javascript pero ahora a continuación lo que queremos es utilizar No ya las librerías que javascript aporta a node sino las librerías propias de node para ello por aquí recordamos que estamos en javascript vale estamos todavía en javascript para ello voy a crear una nueva carpeta llamada no dejs dentro de esta carpeta voy a crear otra subcarpeta llamada introducción Bien dentro de esta carpeta voy a crear por ejemplo una un archivo llamado bueno Esto va a ser por ejemplo prueba servidor y para ello ahora voy a hacer un archivo llamado 00 servidor js ación voy a hacer lo siguiente voy a decir que creo una variable llamada servidor vale Es importante saber el fundamento de javascript para entender pues Qué es bar que esto es un identificador y tal Y ahora voy a escribir require es una palabra reservada de no de js que nos va a permitir importar un módulo los no de js viene con una serie ya hablaremos de ello más adelante con una serie de módulos precargados para que los podamos utilizar Así que el módulo que voy a empezar utilizando en este caso va a ser un módulo llamado http una vez que tengo el módulo cargado a ver un momentín vale una vez que tengo el módulo cargado ahora a continuación vamos a ejecutar esto por cierto a ver Esto lo voy a poner aquí vale esto ahora veremos dónde lo ponemos porque me va a hacer falta el navegador ponos hac una cosa Esto aquí y ahora esto aquí vale yo a continuación digo bueno primero Voy a navegar vamos a ver CD CD 002 CD 001 cd00 01 CD 001 y node 001 servidor y no ha pasado nada no ha pasado nada pero no ha dado error que es lo que tendría que ocurrir O sea no tendría que dar error evidentemente Vale ahora digo servidor punto voy a hacer una cosa voy a ir incrementando 002 y crear servidor js vale Y ahora digo servidor creat server evidentemente servidor es una palabra que yo puedo elegir pero create server no lo puedo elegir y ahora voy a hacer poner por aquí function creo una función local de javascript y voy a hacer el request y el response lo que me piden y lo que devuelvo request y respon y ahora una vez que hago esto voy a ejecutarlo a ver si me da algo ya vale No me da nada Ok bien Ahora a continuación puerto de escucha js len y escucho en un puerto el que sea creo que en este caso tengo el shamp arrancado luego no parece que lo tenga arrancado Bueno pues voy a usar el puerto 80 va luego lo podemos cambiar eh Y la continuación Bueno vamos a ejecutar no de 003 vale bien Y esta es la cuestión y ahora el servidor de node se ha quedado detenido se ha quedado Atrapado Ahora vengo por aquí me voy a local Host me voy a local Host y punto vale Sí que tengo el shamp arrancado voy a cerrar shamp voy a cerrar shamp porque shamp me está usando el puerto 80 Vale ahora me voy al puerto 80 local Host vale Y aquí eh En este caso node está empezando a servir algo por el puerto 80 pero todavía no sabemos muy bien exactamente qué es lo que está sirviendo voy a parar el servidor para pararla por aquí y ahora me voy a hacer 004 servir contenido y lo que voy a hacer es lo siguiente y es result o sea request y result Vale tengo aquí result punto write Head 200 y sea voy a devolver un código 200 y digo content type el tipo de contenido que voy a devolver es texto barra html y ahora res.end Hola mundo desde no de js Vale ejecuto ahora el 004 y esto se queda detenido y ahora cuando yo recargo local Host me dice hola mundo desde nodejs con estas líneas de aquí acabo de crear un servidor web es así de sencillo es más y ahora puedo venir por aquí 005 consola js y además de hacer un res.end esto es una salida por pantalla aquí por qué no puedo poner voy a poner otro punto y coma aquí voy a poner console.log Alguien ha cargado la web ya que estamos voy a otro Puerto el paro cargo el cco 005 a ver qué ha pasado eh qué he escrito mal dónde estás Ah sí node 005 Ahora vale cargo local Host pero local Host no carga Por qué Pues porque ahora he especificado que la web está escuchando en el puerto 8080 Así que 2.88 y ahora dice hola mundo desde no de js y Alguien ha cargado la web recargo Alguien ha cargado la web recargo Alguien ha cargado la web vemos que con estas sencillas líneas de no de js he creado un servidor y además ese servidor lo que está haciendo es devolverme algo por pantalla e incluso si quiero Me puede devolver algo por el por la consola si por lo que sea quiero analizar qué es lo que ha ocurrido lo que sea bien esto eh cambi bastante las cosas con respecto a Apache es decir nosotros hasta ahora hemos trabajado con Apache que es un servidor multipropósito que es un servidor que lo tiene todo por ejemplo en Apache yo no me tengo que preocupar de escribir una cabecera porque la escribe Apache por mí en Apache yo no me tengo que preocupar de especificar el puerto de escucha porque hay un parámetro de configuración de Apache que se encarga de especificar eso eh en Apache yo cargo páginas html en node también las puedo cargar pero el comportamiento por defecto no es que Apache te lee una página html y te la pone en pantalla sino que Apache Perdón sino que node está especificando qué es lo que directamente se carga vale bien Vamos tengo por aquí esta primera demostración de que utilizando javascript ya tengo por aquí un primer servidor creado vamos a ver a continuación qué más cosas podemos hacer con nodejs vamos a ver voy a crear ahora dentro de introducción voy a crear una nueva carpeta llamada módulos y en primer lugar vamos a ver 01 módulo de fechas js al principio anterior hemos visto momentín voy a refrescar hemos visto que Hola a ver momento venga actualizar Bueno pues a ver voy a cerrar por aquí voy a brackets de nuevo vamos a ver vamos al node vale Okay node ahora sí vale Bien voy a el servidor que tenía anteriormente lo voy a copiar para no tener que escribir todo y lo primero que quiero es analizar esta librería esta función llamada require Es una función que nos permite cargar librerías predeterminadas dentro del sistema Así que yo por ejemplo voy a copiar esta línea y voy a poner fechas o fecha y voy a decir que quiero requerir datetime O sea hay una librería llamada http hay una librería llamada daytime vamos a verlo paro el servidor me voy a 002 módulos vale No de 001 Okay vamos a verlo node 001 Vale ahora vamos a verlo vale vamos a ver puedo elegir que quiero date Vale ahora sí Y entonces si importo la fecha de date Pues yo ahora lo que puedo hacer fecha actual js y vamos a verlo Vale y restr y Rest end y quiero fecha punto get fier por ejemplo es una función me vengo por aquí no de 002 fecha actual dónde estás file modu date vale mín Bueno si no lo que puedo hacer ya si no lo que puedo hacer es fecha es igual a New date y ahora sí fecha actual a ver qué ha pasado bueno Esto es que ha fallado Vale entonces cuál es el error vo a hacer un clier cls hola cls vale no da error pero al recargar entonces da error Entonces vamos a ver qué tipo de error es este chun String Ah number debe ser tipo de String pero se ha devuelto un número vale bueno Vale aquí ya empezamos a tener problemas que no solemos tener en javascript Pero no pasa nada porque lo que voy a hacer es encadenar esto a este número una cadena y ya está así que recargo y dice hola mundo desde nodejs año 2023 Pues vale ya está solucionado bien una vez que hacemos esto Una vez que tenemos esto a continuación vamos una vez que hemos hablado de los módulos vamos a hablar de la web no de js en gran medida 002 servidor web Si queremos utilizar no de js es para crear un servidor web aunque no solo se utiliza para eso sirve para más cosas con lo cual a continuación 001 primer servidor js voy a el servidor que ya tenía lo copio lo pego bien escribo contenido de tipo html y entonces a continuación ahora lo que voy a hacer es h1 H 1 paro el servidor me voy hasta donde está este servidor dir CD 002 servidor no de 001 recargo y vemos como lo que acabo de cargar es un h1 si lo queremos ver mejor podemos inspeccionar y veremos Cómo es un h1 y si no podemos ver el código fuente de la página y veremos Cómo efectivamente ha generado un h1 Pero esto es un poco raro desde el punto de vista en el cual tenemos un archivo javascript que genera código html hasta ahora teníamos un poco lo contrario hasta ahora teníamos un archivo html que contenía javascript pero ahora parece que lo tenemos un poco al revés eh luego aparte desde el punto de vista de la separación por capas veremos que Noe parce muy conveniente esto de mezclar javascript y html no pasa nada porque ahora a continuación veremos que esta es una forma de trabajar pero no es ni de lejos la forma más recomendable vamos a ver más cosas por ejemplo y ahora luego iremos avanzando un poco en todo esto por ejemplo cuando he hecho el repaso de javascript he hablado de salidas pero no he hablado de entradas porque he comentado que el tema de entradas las vería cuando entráramos dentro de no dejs y ya estamos dentro de no dejs así que vamos a hablar de entradas para ello me voy a crear un nuevo archivo y lo voy a llamar leer url.js y Dentro de este archivo Dentro de este archivo voy a copiar el anterior y voy a hacer lo siguiente tenemos el request Y si tenemos el request lo que voy a hacer es ver qué es lo que tiene Rest write y res.end del último mensaje va a ser request.url lo cual quiere decir parao este servidor siempre que para el servidor anterior no de 002 leer URL recargo y me dice barra porque estoy en barra vale si pongo ahí arriba Hola Me dice pues tu URL es Hola Y si pongo Adiós pues tu URL es Adiós Esta es otra de las novedades que es un poco interesante con respecto a lo que conocemos de Apache Porque si en Apache aquí pongo Hola es como que estoy cargando la carpeta Hola o el archivo hola. html pero en node no en node todo el rato estoy cargando lo mismo pero de alguna forma el request entiende que una cosa es una cosa y otra cosa es otra cosa Vale lo cual Esto me permite hacer lo siguiente voy a hacer una microweb eh leyendo las urls y vamos a ver cómo puede funcionar esto vamos a ver voy a guardar esto y 003 voy a llamar a esto microweb Voy a hacerme una microweb en un momento con no Djs Así que vengo por aquí y digo switch porque para eso tenemos la estructura switch rec URL y digo en el caso de que sea esto en ese caso res.end estás en la página principal y break recordamos que es recomendable es importante el break Class Case sobre mí y Case contacto estás en la página sobre m y en la página de contacto Así que paro cargo el 003 microweb Y entonces vengo por aquí estás en la página principal No pasa nada por el encoding me voy a la página de sobre mí estás en la página sobre mí me voy a contacto estás en la página de contacto y me voy a Hola y no carga nada vale De hecho se queda frito por tanto podría venir por aquí y poner un Case default y Case default Rest en página no encontrada guardo paro el servidor recargo página no encontrada cada cambio que haga eso sí tengo que parar el servidor y tengo que volver a arrancar el servidor si nos fijamos acabo de hacer una microweb hecha en node es así de sencillo es así de sencillo y es así de raro porque con Apache pues tendríamos que hacer una página de Index una página de sobremi html una página de contacto html pero en node no funciona exactamente así en node se crea una cosa que es esto de aquí que suele recibir el nombre de enrutador porque es el que decide las rutas que son permisibles en una página web y elige que me muestra en ese caso pero no funciona como Apache pero no porque sea mejor o sea peor sino porque tú Apache lo arrancas y pones un archivo y funciona y ya está pero en nodejs no hace nada si tú no le dices que lo haga o sea todo lo que hace node lo tienes que decir tú bien en este caso ya tengo una pequeña microweb y eh voy a hacer Vamos a ver un pequeño eh menú de navegación punto hjs Perdón vale Y ahora vengo por aquí y digo restr voy a usar el truco de las tres comillas Ah no aquí Vale entonces a ver Ah no perdón el truco de la comilla abierta que ya me iba yo a python vale Enton les digo nav Bueno hu directamente tampoco vamos a ser muy puristas Li a hre a Barra inicio y ahora barra sobre mí barra contacto paro el servidor anterior arranco este nuevo servidor recargo y veo que tengo estás en la página principal estás en la página sobre mí y estás en la página de contacto Así que En definitiva vemos como Bueno evidentemente estoy mezclando en este caso todavía ht con javascript es algo que no es una buena práctica pero lo estoy haciendo ahora más que nada para ilustrar el proceso de creación de servidores web con no Djs pero ya tenemos con no Djs con unas pocas líneas de código un servidor web es un servidor web muy curioso porque no sirve para nada más que esto que estamos haciendo no hace nada más que esto que estamos haciendo así como el servidor Apache es un servidor genérico que hace lo que sea que tú le digas y tú le echas muchos archivos html y automáticamente los reconoce node no en node solo hace lo que tú le digas que haga y no va a hacer ninguna cosa que tú no le digas que haga Por una parte hasta el momento hemos visto que podemos crear eh contenido para un servidor web directamente vamos a verlo un momentín a node js aquí servidor web vale desde las rutas leer rutas de URL Pero además aquí me dará debería haberme dado un error pero bueno porque el servidor estaba cargado Pero vale bien Pero además de todo esto yo puedo también leer parámetros de url y no solo puedo eh leer los parámetros que vengan en una página web sino que puedo leer parámetros de múltiples páginas web es decir puedo hacer las dos cosas puedo leer rutas y puedo también leer parámetros para esto voy a hacer lo siguiente voy a el primer servidor voy a 001 leer parámetros vale y a continuación voy a hacer lo siguiente vamos a ver vale Hola mundo desde node esto fuera y ahora quiero lo siguiente bar URL No es que no quiero poner URL porque está en inglés bar ruta es igual a require url y ahora sí entendéis que ruta es una palabra en español que yo he elegido y URL es el universal resource locator que es el nombre de la librería de nodejs para que veáis lo que podéis elegir y lo que no podéis elegir bien a continuación yo digo lo siguiente bar parámetros es igual a eh ruta punto pars y eh dentro de pars voy a poner request.url coma true y de aquí voy a poner punto query por lo tanto ahora a continuación Yo vengo a localhost y digo Rest end Ok vale voy a poner Ok bien y bajo eh dir 002 dir vale Y no de 001 bien recargo vale Y dice ok pero ahora a continuación lo que voy a hacer es lo siguiente r. wr tu nombre es más parámetros punto nombre y esta es la cuestión Esto es lo divertido Porque yo vengo por aquí paro el servidor recargo por aquí y tu nombre es undefined voy a poner aquí fuera paro recargo Pero si yo ahora vengo por aquí y digo a and nombre es igual a José Vicente Entonces me dice tu nombre es José Vicente de esta forma como podemos imaginar Este modelo de trabajo es completamente escalable leer varios parámetros porque yo entonces puedo venir por aquí y puedo decir que resr r. wr br y Rest write tu apellido o tus apellidos son parámetros pun apellidos con lo cual paro el servidor ejecuto el servidor recargo tu nombre es José Vicente tus apellidos son undefined pero pongo and apellidos es igual a carratalá Uy perdón carratalá sanchis y comprobamos cóm aparece correctamente en pantalla en este caso tanto el query del nombre como el query del apellido los apellidos por tanto hemos visto que ha sido fácil leer un parámetro pero es que leer varios parámetros va a ser igual de fácil vale Yo supongo que todos aquellos que vengáis de php o jsp o asp en estos momentos estaréis un poco como intentando Buscar la comparación el encaje de esto con lo que ya sabéis y sé que igual no lo encontráis o sea sé que estaréis diciendo ostras es que esto estoy intentando entenderlo pero no lo entiendo con respecto a lo que conozco y es así es cierto es normal es decir hay que abrir la mente con no Djs y hay que entender que no Djs es otra cosa es otra forma de funcionar con respecto a pues otros tipos de servidor web sobre todo basados en Apache o en Apache tomcat o en internet information Services de Microsoft etcétera es decir No dejs es otra forma completamente diferente de funcionar bien Vamos a continuar y no solo podemos leer parámetros de la URL sino que también si queremos podemos cargar html es decir no vamos a tener que escribirlo todo aquí tranquilos por eso porque no dejs por supuesto está previsto que podamos cargar html sin ningún tipo de problema así que vengo por aquí 001 servidor js y dentro de servidor js lo que voy a hacer a continuación va a ser pues cargar un servidor vamos a verlo voy a cargar un servidor por aquí no me hace falta en este caso la URL vamos a Uy que no vamos a verlo y dentro de la URL no quiero los parámetros tampoco vale vamos a quedarnos con lo mínimo posible y vamos allá a ver eh bar archivos es igual a require fs de file System lo cual quiere decir que ahora mi programa en node va a ser capaz de leer y escribir archivos Así que ahora a continuación lo que quiero es lo siguiente el Rest Wi Head Esto está claro esto lo tengo que tener vale Y ahora quiero lo siguiente vamos a ver vale quiero vamos a ver de archivos quiero read file el archivo que Quiero leer es Index o inicio html ya no tiene por qué llamarse y a continuación res write Data este Data de aquí y res punto vamos a ver ir Nada vamos a probarlo paro bajo c003 no de 001 Y si yo ahora recargo la web seguro que voy a tener un error porque estoy pidiendo el archivo inicio html pero yo no he creado el archivo inicio html con lo cual me dice vamos a verlo vamos a ver aquí servidor chunk argument y receive undefine vale o sea he recibido vamos a verlo en no dejs cargar html la línea 6 columna 13 línea 6 vale No hay nada que devolver Entonces yo ahora a continuación lo que voy a hacer Es que voy a crear un nuevo archivo Index no inicio html en inicio pun html Pues voy a crear un pequeñito doc type entonces html Head y Body Vale entonces es en el body voy a poner h1 Hola mundo desde node pero bien y aquí en el html voy a poner lang es igual a s y aquí voy a poner un title voy a poner node y voy a poner un meta charset es igual a utf8 más que nada para hacerlo bien para escribir un html que esté bien vale tengo que re arrancar el servidor porque el fallo ha sido tan fatal que se ha salido Así que recargo y dice hola mundo desde node pero bien Además cargo y veo que tengo todo el código con lo cual todo está correcto es decir como comentaba antes yo no utilizo node para que node escriba html Bueno A veces lo puedo hacer a veces es posible hacerlo pero yo utilizo node para crear un servidor y el servidor de node ya cargará las páginas que tenga que cargar vale por tanto En definitiva I lo que quiero que veamos es que Eh pues vamos a poder trabajar con página sin ningún tipo de problema Vale y vamos a poder cargar páginas de forma totalmente correcta es más eh voy a hacer lo siguiente vamos a ver Ah aquí vale cargar html y eh pequeña web en node Y entonces lo que voy a hacer con esta pequeña web en node es lo siguiente voy a cargar un nuevo archivo 001 servidor html htm no perdona js quería decir vale el servidor va a cargar esto pero voy a hacer un mix porque el Rest right Head lo quiero Sí o sí Y entonces ahora en la microweb voy a decir esto no menú de navegación Ahí estás vale Rest punto right esto lo meto en el servidor Ok y ahora switch cargo el switch y digo si esto es cierto cargame inicio html a ver Esto va aquí no esto espera esto qué es esto no sé qué es Pero esto no va aquí no sé si estaba antes no estaba antes vale Ah no estaría aquí No tampoco vale Okay res vale Y esto aquí con lo cual esto aquí y esto aquí esto Es sobre mi html esto es contacto html y por tanto ahora en inicio me vengo aquí Esta es la página de inicio e bueno a ver vamos a hacer bueno va esto lo voy a meter aquí esto fuera es una forma de trabajar no es la única Li vale Esta es la página de inicio y ahora sobr mí html esta es la página de sobrem y contacto Esta es la página de contacto vamos a verlo yo creo que ya vamos a ver si todo está bien porque con node nunca se sabe y eh CD bajo CD 004 node 01 cargo Hola mundo desde node esta es la página de inicio Hola mundo desde node Cómo quea mundo no esto no va Aquí Esto va fuera esto sobra paro arranco recargo inicio Esta es la página de sobre mí esta es la página de contacto y estoy cargando archivos html vale con esto lo que quiero decir es que utilizar node no está reñido con cargar archivos html es más debería hacerlo así porque lo que no es nada limpio es que eh dentro de un archivo de node haya a la vez código html y código javascript vale esto que acabo de hacer es mucho más limpio en el sentido de que el archivo javascript es el que según la URL que tengas te deriva a una página u otra y la página u otra pues ya carga directamente desde un archivo html que más adelante podrá tener javascript que más adelante podrá tener lo que sea que queramos que tenga vale por tanto eh vemos como poco a poco vale vamos avanzando y vemos como poco a poco pues cada vez vamos a ir construyendo páginas más potentes digamos con no de js Aunque en principio Pues estamos empezando evidentemente Pues poco a poco Vamos a continuar hablando esto ha sido servidor web vale vamos a eh hablar un poquito acerca de escritura de archivos Vale entonces en servidor web voy a crear una carpeta nueva llamada 05 archivos vamos a dejar un poquito de lado el servidor web Aunque ahora luego haremos un servidor web continuaremos el ejercicio que hemos empezado porque ahora en es ejercio anterior parece que es un poco cuando ya la cosa se empezaba a poner en marcha Vale pues vamos a pegar Aparentemente un salto atrás y ahora luego volveremos por aquí bien nodejs no tiene por utilizarse solo para crear servidores web no dejs se puede utilizar para crear cualquier otra cosa por ejemplo voy a trabajar el sistema de archivos entonces voy a escribir un archivo escribir js me voy a escribir js y digo bar archivos es igual a require file System y dentro de require file System a continuación voy a decir archivos punto appen file y voy a crear el archivo nuevo. txt a continuación le pongo Este es mi contenido Y por último voy a ejecutar una función de captura de errores function r que lo que va a hacer es si tengo un error throw r lanza el error y si no console log esto es el callback digamos esto es cuando es esto esté hecho en ese caso conso log misión cumplida si yo ahora hago esto veremos que bueno parao un momento el servidor me voy atrás Eh Esto Qué es c005 vale dir No de 001 Misión cumplida y no ha arrancado un servidor O sea no me voy a ir ahora al navegador porque no ha ido ahora para ir al navegador no hay ningún motivo para ir al navegador ahora lo que hago eso sí es que veo que ha aparecido un archivo llamado nuevo. txt y si veo que si pincho dentro del archivo nuevo. txt veré que aparece este es mi contenido bien tengo eh la opción como vemos de eh de escribir vale Y ahora a continuación lo que voy a hacer es append Vale entonces este ha sido escribir ahora a continuación quiero Añadir escribir vale si yo ahora a continuación ejecuto no de 002 abro el archivo y el archivo tiene Este es mi contenido vale lo que acabo de hacer es añadir contenido al que anteriormente existía voy a poner contra barra n y así Si ejecuto varias veces veremos Cómo va creando nuevas líneas en el archivo de texto Pero hay veces en las cuales lo que queremos es sobreescribir cuando queremos sobreescribir vamos a verlo un momento vale esto es aquí 003 sobreescribir js y una vez que tengo el sobreescribir lo que voy a hacer es poner un flag llamado W vamos a probarlo node 003 bien inválida Argumenta no okay No tampoco Bueno quiero escribir vale No va vale voy a hacer una cosa voy a aquí actualizar entonces para ello voy a appen file en lugar de appen file voy a write file Ahí está Esto es lo que quería así que este es mi contenido dos no de 003 cargo el archivo Este es mi contenido dos Ahora sí lo he sobreescrito Y por último Bueno voy a primero eliminar a renombrar Perdón entonces nuevo archivo renombrar js vamos a ver en este caso voy a el sobreescribir archivos. rename y digo nuevo txt se convierte en cambio pun txt Si hago esto no de 004 renombrar compruebo como ya no se llama nuevo txt ahora se llama cambio. txt Y por último voy a ejecutar un archivo llamado eliminar js y al eliminar pues lo que voy a hacer es esto de aquí pinchar en eliminar y voy a decir que simplemente Quiero unlink cambio txt no de 005 bien qué ha pasado a ver Ah no de 005 Misión cumplida y comprobamos como ese archivo ha desaparecido completamente Esta es la idea de que veamos có pues al final esta librería este no de js este entorno no solo sirve para crear un servidor web y servir contenido dentro de un navegador sino que puede servir también para otras muchas cosas Bueno pues vamos a ver para qué nos puede servir todo esto que acabamos de aprender Entonces por ejemplo una de las cosas que podemos hacer Vamos a ver que aquí pequeña web vale tenemos archivos pues vamos a crear 006 pequeña web con registro de sucesos Así que eh tengo la pequeña web y dentro de esta pequeña web lo que voy a hacer es repetir los archivos que había hecho anteriormente Vale entonces en este servidor lo que estoy haciendo lo que estaba haciendo Ya de por sí vamos a verlo CD do puntos CD 006 ls dir y CD no de 001 Vale y recordamos que teníamos esto bien inicio sobre mí y tal Vale pues Ahora a continuación lo que voy a hacer es escribir y para ello dentro del servidor ya tenía el require file System lo que voy a hacer es que cada vez que alguien haga algo vamos a ver archivos app and file cada vez que alguien pida algo yo lo que voy a hacer es que dentro de un archivo llamado registro. txt voy a poner pues por ejemplo la URL que han visitado Así que eh vamos a ver rec URL Ahí está de esta forma el que mi aplicación guarde archivos no está reñido con el hecho de que mi aplicación sea un servidor web en el sentido de que por supuesto para el servidor y lo vuelvo a arrancar recargo inicio sobre mí contacto y si ahora me voy a Aquí está a registro txt veo como estoy obteniendo un listado de los elementos que yo he visitado pues lo que voy a hacer por cierto es que vamos a ver en el archivo en el servidor voy a poner más contrabarra n para asegurar que baja de línea paro el servidor Misión cumplida lo voy a borrar porque ya está claro que Misión cumplida entonces servidor inicio sobre mí contacto a ver qué ha pasado a ver interesante registro txt está en uso o bloqueado vale en principio no debería voy a volver a probar vale recargo a ver inicio sobre mí contacto debe haber sido algún error temporal porque si no me lo explico vale Y me voy a registro y veo có está quedando registrado Pues todo aquello que está ocurriendo en el en la web es decir estoy viendo quién está visitando o qué páginas se han visitado y todo esto bien estoy viendo que el favicon lo carga lo solicita es un recurso que solicita en todo momento el navegador vale en este caso el navegador Chrome voy a ampliar un poquito el código voy a decir que vamos a ver si rec URL vale para esto están los conocimientos de javascript no es igual a ver que lo vea a favicon.ico en ese caso vale paro el servidor lo vuelvo a arrancar inicio sobre mí contacto sobre mí inicio me voy a registro y veo como ahora pues ya no se está guardando el favicon.ico porque realmente no es una URL sino que es un recurso que está pidiendo el navegador web y pues no es una web real vale lo voy a borrar voy a reiniciar Okay y Bueno tengo un tengo una página en la cual pues estoy utilizando el los conocimientos que tengo hasta ahora para eh poder crear una página web que además pues guarda una como te diría yo guarda algo de información vale vamos a ver más cosas vamos a ver más cosas vale vamos a ver más cosas bien Voy a ampliar un poquito este creador de registros entonces voy a pegar aquí registro completo y voy a hacer lo siguiente vamos a ver HM vamos a ver vale en el 007 en el servidor voy a requerir ruta es igual a URL y cuando guardo el archivo lo que voy a hacer es decir lo siguiente vamos a ver bar mm ruta completa es igual a ruta pars address com TR vale vamos a ver el pars es el request y por ejemplo puedo decir que quiero rutac completa Host más coma más rutac completa punto pathname más coma más rutac completa punto Search más coma más request URL vamos a probarlo no de 001 recargo vale a ver argumento URL String Muy bien Entonces esto lo tengo por aquí leer parámetros es ruta pun pars esto rec URL Esto es lo que me ha faltado rec URL vale servidor arriba recargo inicio sobre mí contacto Entonces si me voy a registro veo que lo que estoy haciendo es guardar no solo la información base sino cualquier otro tipo de información por ejemplo de la URL o incluso lo que puedo hacer es lo siguiente par fecha es igual a New date se me está yendo y entonces ahora digo fecha punto pues por ejemplo get full year más voy a copiarme esto get month que recordemos que va de c a un Pero vale sea a get date más get hours má get minutes más get seconds y esto lo que hace es que si ejecuto de nuevo el servidor Ahora me voy al registro y en el reg veré como ahora estoy guardando el año el mes la hora minuto segundo y la página que han visitado mis usuarios En definitiva la idea un poco lo que quiero que se vea es que pues todo aquello que estamos aprendiendo Pues evidentemente nos sirve para ir profundizando ir aprendiendo cada vez Pues más cosas bien vamos a con formularios hasta ahora podemos introducir información pero por ejemplo aquí en contacto Pues a mí me gustaría tener una página de contacto Vale entonces vamos a hacer lo siguiente vamos a crear una nueva carpeta aquí en servidor web y voy a llamar a esta carpeta formulario vale en formulario voy a hacer lo siguiente voy a crear un nuevo archivo llamado servidor punj voy a copiarme el servidor pero una versión mucho más limitada vamos a ver en Case esto de aquí vale Y Case procesa y este Case me lo cargo y el default no lo voy a usar y así simplifico esto fuera esto ya hemos visto lo que hace ruta completa nada archivos nada ruta por si acaso vale Y entonces digo lo siguiente si esto es cierto resr o Rest end voy a poner aquí res.end nada vale Rest wr y voy a poner una comilla abierta y digo forma acción es igual a procesa aces igual a procesa forma método es igual a post vale Y ahora input type text name pues nombre por ejemplo y para acabar input type submit vale Yo creo que ya y console.log voy a procesar el formulario Muy bien pues paro por aquí CD 008 node 001 servidor vale recargo No hay contacto Ok ha habido un error ha habido un error red is not defined red is not Define dónde en que en la línea 20 red no res vale Ya está OK recargo vale hay un formulario Así que Jose Vicente le doy a enviar y lo recoge procesa y procesa dice voy a procesar el formulario Vale hasta aquí bien entonces una vez que tengo esto lo que voy a hacer es lo siguiente ahora Esto me lo guardo como recibir datos. js Así que en el procesa además de voy a procesar el formulario lo que voy a hacer Es realmente procesarlo vale Así que aquí arriba voy a decir bar formularios es igual a require voy a utilizar un componente llamado formidable vale Así que ejecuto eh No de 002 vale Pero hay algún tipo de problema porque me dice a ver un momen Aquí está recibir datos me dice Bueno me dice que formidable no existe pero quiero que me lo diga vamos a ver Ah recibir datos línea 3 Vale entonces me dice que formidable no existe dentro de este ordenador entonces lo que tengo que hacer es voy a arrancar el mismo cmd u otro cmd Eso da un poquito igual vale pero voy a hacer lo siguiente voy a utilizar el gestor de paquetes npm el npm es el node package manager es el gestor de paquetes de node y por tanto lo que voy a hacer es node install formidable y por tanto al ejecutar npm install formidable el sistema lo que va a hacer es Descargar formidable y ya está vamos a ver 10 paquetes Ok Ok npm Minor vale esto son notices es decir se haido seis paquetes vale esto que vemos aquí son notices son mensajes no son ni advertencias ni errores con lo cual cierro por aquí por cierto que voy a poner por aquí npm inst mirable para dejar aquí La Chuleta puesta es un comentario evidentemente Así que ahora a continuación recargo y ahora sí ya tengo el formidable correctamente instalado bien una vez que tengo ahora el formidable instalado lo que quiero hacer es bar formulario es igual a New formularios punto incoming form Okay vale Y ahora lo que quiero es vamos a ver formulario punto pars del request y fun aquí y vamos a ver r coma fields coma files y quiero console log fields files no lo quiero de momento fields vale vamos a verlo paro el servidor arranco el servidor recargo el servidor José Vicente le doy a enviar y bueno en este caso me está devolviendo un J son vacío vamos a ver Me está devolviendo un jasón vacío cosa que tampoco me preocupa mucho tengo mtin tengo method po tengo Tex tengo nombre tengo fields vale vamos a verlo porque en principio voy a hacer una cosa en el encoding type no creo que sea esto pero en el encoding type le voy a pasar multiform Data paro el servidor arranco el servidor pongo José Vicente no me da nada console log fields El caso es que fields es un objeto y files menos todavía no vale pues vamos a ver porque puede ser Vale Voy a procesar voy a replantear esto entonces voy a no utilizar formidable Vale entonces De hecho aquí ok vale en procesa voy a hacer lo siguiente vamos a ver recr okay con lo cual voy a decir Let Data es igual que por cierto no he explicado lo de Led ahora lo explico ahora hago un break y digo eh led Data es igual a nada y digo request on que es uno de los eventos que tiene javascript en nojs en el lado del servidor Y entonces digo lo siguiente en el momento en el que hayan datos vamos a ver aquí voy a poner datos mejor para no confundir vale parte y es esto datos más igual aparte punto to String Y entonces rec on end vale coma función anónima y entonces digo console datos vamos a verlo paro recargo Ok José Vicente envío vale Y digo nombre es igual a José Vicente es decir vemos que ya estamos consiguiendo cargar los datos dentro de El formulario ahora por ejemplo podría decir cargar más datos recibir más datos donde por ejemplo podría poner input type nombre input type email name email Aquí voy a poner un br Aquí voy a poner un br y text área name mensaje textarea br y por ejemplo aquí podría poner asunto que acabo de hacer Pues un formulario de contacto asunto vale con lo cual vamos a verlo paro por aquí ejecuto el tres recargo y tengo eh José viicente este es un asunto info @josé viicente y este es un mensaje con lo cual envío y dice nombre es igual a José Vicente y asunto es igual a este es un asunto email es igual a info y todo En definitiva lo que estamos viendo Es decir si nos fijamos en este caso lo que está haciendo es prácticamente formatearlo como una URL y yo a partir de ahí lo que podría hacer es por ejemplo con alguna instrucción pues la URL y convertirlo a un jas más que nada pues eh para tenerlo en algún formato un poquito más limpio voy a 004 URL J son Vale entonces vamos a ver vale URL ajas Vale pues voy a bar procesador es igual a require query String y por tanto aquí en el console pun log voy a decir que bar cadena es igual a datos bar procesado es igual a procesador punto pars de cadena con lo cual console log procesado paro no de 004 no de José Vicente Este es un asunto mi correo envío y ahora por tanto como vemos pues ya nos devuelve un objeto con nombre José Vicente asunto Este es un asunto email info @josé viicente mensaje fas y realmente tengo lo mismo de antes vale Lo único es que ahora pues estoy o puedo estar un poquito más tranquilo en el sentido de que Pues digamos tengo la información en un formato que es bastante más seguro digamos me fío más del formato js que no de una cadena que vete a sa ver esa cadena luego que va a pasar con ella vale eh Por cierto que aprovecho para contar algo que antes se me había escapado que es el tema del LED el tema del bar con el led entonces voy a venir por aquí voy a venir por aquí voy a venir por aquí por ejemplo en el for mismamente vale Y voy a guardar este for con eh demostración variable led html no js en este caso Vale entonces cuando yo tengo una variable bar edad es = a 45 esa variable es visible en cualquier parte del programa Por ejemplo yo aquí podría poner bar edad a45 y ahora digo console.log mi edad es de más edad voy a volver ahí atrás paro el servidor eh paro el servidor cd00 CD dir CD 005 no CD 005 dir cd00 dir CD 001 dir Vale y node 004 vale vamos a ver un momentín no de 004 ahí vale Y dice mi edad desde 45 entonces lo que ha ocurrido en este caso es que si nos fijamos la variable edad ha sido definida dentro declarada dentro de un bucle dentro de una estructura en este caso un for podría ser una función pero sin embargo es visible desde fuera esto quiere decir que pues lo que ocurre aquí dentro luego o sea se declara como global dentro del programa y es visible desde todas partes y esto a veces nos puede interesar Esto no es malo yo no estoy diciendo en ningún momento que esto sea malo y ahora vengo por aquí y ahora digo 005 y ahora en lugar de poner bar voy a poner led y lo que ocurre c005 lo que ocurre es que me da un error porque me dice que edad is not defin Entonces cuando utilizamos la variable la declaración de la variable con led lo que ocurre Es que la visibilidad de la variable se restringe al bloque Donde ha sido definida lo cual quiere decir que es como que lo que ocurre en Las Vegas se queda en Las Vegas vale si la variable se ha declarado aquí dentro se puede utilizar ahí dentro pero no es visible fuera otra cosa es que si yo cojo led edad voy a 006 cojo led edad y lo coloco aquí fuera Entonces no hay ningún problema porque ha sido declarado a nivel de este bloque O sea a nivel global 006 vale no hay ningún problema Por tanto led no es que pierda la memoria sino simplemente led se fija en qué bloque está y esto sirve para objetos sirve para funciones sirve para estructuras de control vale se fija en qué bloque que está y únicamente existe dentro de ese bloque mientras que bar exista donde exista existe a nivel global y por tanto Pues muchas veces cuando estamos desarrollando un programa tenemos que pensar cuándo nos interesa una cosa y cuando nos interesa otra cosa diferente vale Bueno voy a seguir con el programa que estaba haciendo con el formulario y eh con el formulario pues lo que voy a hacer es integrarlo dentro del la web que estaba haciendo Entonces me voy a ir aquí en registro completo Voy a duplicar esto lo voy a llamar 009 y lo voy a llamar formulario de contacto en formulario de contacto yo ahora lo que voy a hacer Es que aquí en contacto vamos a verlo aquí en contacto Ah vamos a ver aquí en contacto Esta es la página de contacto voy a este formulario lo copio lo pego bien y ahora a continuación Ah procesa Vale pues tengo que escoger qué es lo que pasa en procesa tengo que crear una ruta llamada procesa y en procesa voy a hacer esto en procesa hago así y si todo va bien Esto bueno lo podía poner como bar Pero bueno da igual así solo existe dentro de este switch vale estoy pensando si me falta algo creo que no bien eh cd2 puntos cd2 puntos CD dos puntos CD dir CD 002 vale CD dir cd009 y no de servidor a ver Ah sí no de 001 servidor Vale entonces recargo no proceso todavía y tengo inicio sobre mí y contacto y si entro en la página de contacto pues puedo rellenar mis datos envío y a ver un problema vale un problema procesador not porque me hace falta el procesador que es el query String vale venga pongo el procesador Ok vuelvo a arrancar el servidor envío vale Y ahora sí tengo ya el asunto recogido por parte del servidor Por cierto en procesa debería enviar un res.end que si no se engancha a ver contacto vale José Vicente prueba envío bueno se sigue quedando un poco frito pero vale a ver res.en pues no debería quedarse frito pero vale Okay procesa estoy viendo si me falta algo pero parece que no vale bueno se ha quedado un poco frito pero bueno vamos a ver Por cierto el registro Okay procesa y ahora vuelve ahí vale muy bien Vamos a continuar y para continuar Ah quiero hacer que esta página sea un poquito más inteligente entonces para que sea un poquito más inteligente trabajando con algo así como un poco de plantillas Por decirlo de alguna forma Ah quiero duplicar el proyecto vale quiero duplicar el proyecto y quiero hacer plantillas de cabecera y pie de página Vale entonces yo lo que voy a hacer es lo siguiente voy a crear una plantilla puedo hacer una nueva carpeta plantillas y en plantillas voy a hacer un nuevo archivo llamado cabecera punto html y un archivo llamado pied página html y de esta forma el servidor siempre le pidan lo que le pidan bueno para empezar vamos a ver Okay voy a hacer h1 la web de José Vicente esto es un nav esto no hace falta esto es un nul eso técnicamente puede ser un heer Así que en el header lo que hacemos Es sangrar un poco la información vale luego puedo poner una Main y una vez que tengo la etiqueta Main puedo poner la etiqueta footer copyright 2023 José Vicente carratala Vale pues si hago esto lo que voy a hacer a continuación es lo siguiente Esto me lo voy a llevar a la O sea al archivo de cabecera Esto me lo voy a llevar al de pie de página y por tanto h3 esta es la página de inicio Esta es la página de contacto Oy que me he cargado el formulario vale Okay esto fuera h3 y en sobre mí pues a ver inicio Esta es la página de sobre mí bien con lo cual ahora paro cd01 no de 001 vale recargo Ah recargo pero no Ah sí claro por supuesto vale porque ahora en el servidor lo que tengo que hacer Vamos a ver es archivos read file plantillas barra cabecera html el rested no lo quiero Ah creo que ya sé lo que pasa vale archivos file plantillas pied página html El Rest pun end lo quiero aquí y no quiero el res.end en ninguna otra parte voy a intentar evitar mal utilizar líneas en blanco vale paramos recargamos Y si todo va bien recargo no A ver no estoy cargando la página correcta se ve plantillas y leches que lo he creado donde no debía lo he creado en el 09 vale venga muy bien esto a veces me pasa Okay vale paro vale formulario de contacto esto lo cambio a 010 plantillas Vale ahora plantillas tienen lo correcto y lo único es que elimino vale servidor vale lo intento dejar todo como estaba claro contacto Okay inicio no eler tampoco estaba Esta es la página de inicio el nav tampoco estaba Ahora sí y sobre mí esta es la página de sobre mí Vale ahora lo he dejado como estaba entonces CD 010 vale No de 001 vamos a verlo ahora sí la web de José Vicente un momento que pone esta es la página de inicio Ah muy bien vale perfecto porque me carga esto y luego me carga lo otro vale Y luego esto de aquí muy bien esta es la página de sobre mí Ah no carga nada esta es la página de sobre mí Y esta es la página de contacto vale Okay vamos a ver el código Okay vale lo que marca la diferencia es el tiempo en el que está cargando cada recurso vale con lo cual puedo hacer lo siguiente y es de decir bar html es igual a nada html más igual a Data creo que estamos igual creo que tenemos el mismo problema porque es un problema de cuándo carga vale puedo hacerlo siguiente entonces Rest wr el switch lo meto aquí dentro y luego meto esto okay vamos a verlo paro abro recargo inicio Esta es la página de inicio vale sobre mí esta es la página de sobre mí contacto Esta es la página de contacto vale Ahí ha fallado un poco pero bueno vale Okay muy bien vale bueno mejoraremos el código para que no de fallos al cargar pero bueno de momento por lo menos tenemos una plantilla de tal forma que si hace falta Pues yo puedo hacer por aquí un archivo llamado blog. html h3 Este es el blog de tal forma que me puedo ir a la plantilla lo cambio una sola vez aquí pongo blog y evidentemente cargo el servidor recargo y aparece blog pero si cargo servidor si cargo blog página no encontrada porque tengo que ir al servidor y decirle que en caso de que la ruta sea blog pues tendré que cargar el archivo blog. html recargo el servidor entro en blog y dice este es el blog vale con lo cual ya tenemos una página donde poco a poco vamos aplicando todo aquello que estamos aprendiendo Y evidentemente pues ahora a continuación tenemos que hacer que la página sea mejor vale que sea que tenga más funciones y que sea una página sobre todo dinámica vale voy a hacer una mejora sobre el código porque a ver inicio vale me preocupa sobre todo bueno el pier de página Vale pues vamos a bases de datos entonces eh yo a continuación lo que quiero es poder persistir todo esto en bases de datos y por lo tanto eh A continuación lo que voy a hacer Vamos a ver un momentín por aquí es que vamos a aprender a conectarnos a dos tipos de bases de datos eh tanto a mungo como a mysql y Eh pues una vez que sepamos es eso pues evidentemente lo integraremos dentro del ejercicio Por supuesto que sí así que voy a crear una nueva carpeta llamada 003 mysql y de esta forma Vamos a aprender pues dos tipos de tecnología Vamos a aprender a conectarnos desde nodejs tanto a una base de datos de tipo sql como a otra base de datos de tipo no sql de esta forma vamos a ver para empezar Pues voy a hacer lo siguiente voy a hacerlo todo desde aquí Así que nueva carpeta y vamos a ver vamos a conexión js lo primero que voy a hacer dentro de conexión 001 conectar punto js es que voy a ver si me puedo conectar al servidor para conectarme al servidor primero evidentemente tengo que tener un servidor mysql arrancado me dice que tengo el puerto 8080 utilizado y por tanto tomcat no va a arrancar No pasa nada porque no voy a hacer nada con tomcat pero sí que quiero Apache y quiero mysql por lo menos para ir aquí local Host ir a php my admin Vale y dentro de my admin aquí cuidado menos voy a hacer lo siguiente voy a crear un usuario cuentas de usuario Ahí va el típico error vamos a ver mysql selecciono todo reparo Okay todo parece que se ha reparado correctamente Ojalá que sea así me voy al servidor me voy a cuentas de usuario Vale entonces voy a agregar cuenta de usuario y la voy a llamar eh node en el servidor local contraseña node debe volver a escribir node voy a poner node js va no de js bien y ya está Vale vamos a decir que puedo hacer todo quiero create vale vamos a ver he agregado un usuario así que voy a hacer lo siguiente Primero me copio esto es 00 crear mysql pero claro mysql probablemente no está instalado paro el servidor bajo CD 003 cd00 dir no de 001 vale Y lo que me dice es No está instalado no se encuentra el módulo mysql así que npm install mysql bueno y lo tengo que hacer evidentemente Así que vengo por aquí npm install mysql okay principio ya vale fantástico bien pues una vez que lo tengo a continuación voy a decir bar conexión es igual a mysql create connection y meto un objeto aquí dentro y el objeto es Host 2 punos local Host coma user es eh No de js coma password es no de js con lo cual si todo ha ido bien conexión punto Connect fun error si error throw error si hay un error dime cuál es y console.log conectado si todo va bien Vamos a verlo dir vale No de 001 conectar y está conectado vamos a comprobar que es cierto voy a poner mal la contraseña pongo una contraseña que no toca vuelvo a recargar lo mismo y me dice error fatal Vale y acceso denegado lo digo porque se me ha conectado la primera y bueno no suele ocurrir porque siempre cometemos algún fallo de no haber creado el usuario o poner mal el Host o poner mal el usuario poner mal la contraseña vale siempre pasa algo así y en este caso pues no ha pasado y es un poco extraño Por eso digo quiero forzar un error para que veáis que si sale un error pues no pasa nada de hecho lo normal es que en vuestra primera conexión de No dejs sql pues os salga algún error bien el caso no es por desanimar pero es que suele ser así que a continuación voy a crear una nueva carpeta 003002 y crear base de datos y dentro de crear base de datos pues vamos a empezar a hacer una consulta crear 001 crear base de datos js por lo tanto en la base de datos lo que voy a hacer es copiar el código de conectar evidentemente y en Connect aparte de decir console.log conectado Pues voy a decir conexión query y en la query pues lo que voy a hacer ahora es crear una base de datos create database Eh pues cómo lo llamo Pues no sé no dejs mismo no de js porque estamos viendo que no hay ninguna base de datos que se llame así entonces vamos a ver no de js y ya está coma function error resultado y voy a decir si se produce un error en ese caso lanza el error y si no console.log se ha creado la base de datos si todo va bien subo un directorio 002 vale crear base de datos y no de 001 se ha creado la base de datos con lo cual ahora recargo Y si esto es cierto pues veremos que es cierto que se ha creado una base de datos llamada no de js vale perfecto si ya tenemos la base de datos ahora a continuación pues vamos a crear una tabla y para qué crearíamos la tabla Pues si tenemos Si sabemos que tenemos un proyecto donde hemos creado una entrada llamada blog pues vamos a crear las entradas de un blog por ejemplo Así que voy a venir por aquí nueva carpeta 003 crear entradas de Blog Vale y vengo por aquí y nuevo archivo 001 crear tabla js Y la verdad es que ahora lo que puedo hacer es copiar esto y pegarlo y Únicamente lo que necesito es modificar pues la petición Vale entonces voy a hacer una cosa voy a utilizar el truco de la comilla abierta Okay entonces voy a decir create Table entradas por ejemplo y voy a decir lo siguiente create Table entradas y voy a decir ID es un entero autoincremental y es primary key vale Este es el id ahora título es marchar y texto es text y tampoco mucho más fecha quizás fecha es marchar 255 y poco más tengo un ID tengo yo creo que está bien vale Voy a bajarlo para sangrar lo correctamente más que nada para verlo correctamente y yo creo que ya se ha creado la tabla Así que paro bajo 003 Sí vale Y eh No de 003 001 perdón okay hay un error muy bien Qué dice el error Ah no database selected Claro que sí por qué Pues porque aquí arriba database es no de js vale vamos a verlo ahora No tampoco a ver muy bien Bueno ahora la base de datos sí que está seleccionada pero hay un error Ah marchar fecha marchar ahí fecha marchar text estoy dudando ya está Vale entonces no dejs hay una tabla llamada entradas y si me voy a la estructura pues veré que es clave primaria autoincremental marchar text fecha marchar todo correcto vale con lo cual he creado la base de datos he creado el elemento Vale ahora a continuación Pues voy a entrar en el clásico ciclo crud para comprobar que puedo escribir Entonces vamos a ver bueno que puedo escribir que puedo leer que puedo hacer de todo En definitiva quiero comprobar que puedo hacer de todo con mysql con lo cual ahora vengo por aquí nueva carpeta 004 crud insertar quio inserta pues mismo vale vamos a ver bueno como nos podemos imaginar Esto va a ser una copia Y esto es crear registro punto js y Esto va a ser insert into entradas valius y voy a poner nul coma título de la entrada coma texto de la entrada coma 14 si esto va bien paro bajo 004 no de 001 se ha creado la tabla se ha insertado el registro más bien okay Vale pues vamos a verlo vamos a ejecutarlo de nuevo me voy a no dejs me voy a entradas y veo que hay título de la entrada título de la entrada texto de la entrada fecha Vale pues se han insertado tantos registros como sea necesario perfecto pues ya tenemos esto Vamos a continuar ahora a continuación lo que quiero es seleccionar Bueno pues para seleccionar vamos a ver mysql nueva carpeta crud seleccionar crear quieto vale 005 seleccionar registros no punto js vale Y una vez que tengo esto voy a decir Select all from entradas y dentro de entradas vamos a ver console log r result fields vale Y voy a decir console log result vamos a verlo así que paro cd00 CD 005 esto lo he hecho yo aquí muy bien registros vale cd5 No de 001 se ha insertado registro No estoy en el sitio correcto se ve selecto el form entrada Se ha insertado el registro eso no debería aparecer 00 c Cruz seleccionar Ah Espera que me está cogiendo Este vale node 001 Ahora sí vale Y veo que tengo pues en formato bueno es una Ray que a su vez es un Row Data packet que es un jas que tiene toda la información que necesito pues como podemos ver eh Ya nos estamos conectando desde no dejs a mysql para recuperar los datos de las entradas y evidentemente pues en versiones próximas del ejercicio pues lo que ocurrirá es que Sacaremos el contenido de la entrada y lo pondremos dentro de la página web pero todavía no vamos a hacer unas cuantas operaciones más y ahora iremos a eso bien antes de eso eh Me voy a Nueva carpeta vamos a hacer 006 nos quedan dos operaciones actualizar y Al actualizar Pues voy a el de crear registro lo voy a pegar en actualizar que es actualizar registro. js vale Y voy a decir update entradas set título es igual a título modificado Where ID es igual a 1 por ejemplo que sé Entonces se ha actualizado el registro eh CD bajo CD 006 Okay no de 001 se ha actualizado el registro Y si ahora recargo pues comprobaremos como en entradas aparece título modificado vale aparece correctamente el título habiendo sido modificado Y por último para un poco pues repasar la conexión desde no dejs a mysql pues eh vamos a crear una última carpeta 007 eh borrar o eliminar el actualizar registro me lo voy a guardar en borrar como borrar registro y al borrar registro Pues voy a decir delete from entradas weid es igual a 4 por ejemplo bajo 1 CD 007 no de 001 se ha actualizado el registro se ha eliminado el registro Y si ahora voy a no de js y voy a entradas veré que la última es la tres porque he eliminado la número cuatro Así que como podemos ver pues tenemos conexión desde no de js a mysql y En definitiva podemos hacer lo que queramos podemos conectarnos podemos crear podemos destruir podemos listar podemos hacer lo que sea desde node hasta mysql sin ningún tipo de problema ahora por supuesto lo que quiero hacer es eh conectar esto con mi propia página web Así que vamos a la propia página web y dentro de la propia página web dentro del Blog Pues bueno Esto claro No está activo el servidor lo que quiero ahora es fusionar los dos proyectos por lo tanto vamos a verlo Me cojo la última versión del servidor dónde estás aquí Uy servidor web dónde me he ido Ah aquí mysql lo voy a pegar esto es 008 y cargar blog desde mysql con lo cual ahora vamos a ver cargar blog desde mysql vale Voy a hacer lo siguiente vamos a ver aquí tengo el blog pero el blog es una página html Entonces yo lo que quiero es cargar desde Maya sql voy a hacer lo siguiente vamos a verlo en el servidor bueno para empezar seleccionar registros primero requiero mysql Okay siguiente me conecto eh vamos a esto vamos a decir que eso lo quiero únicamente en el caso del Blog vale porque no quiero que se me conecte la base de datos en ningún otro caso vamos a ver si esto es cierto vamos a ver si no he cometido ningún error me conecto y console pun log vale Ahí veo algo dudoso pero bueno CD 008 creo que servidor y base de datos no se van aar muy bien Ahora veremos vale no se van a llevar muy bien no se van a llevar muy bien porque esta conexión debe hacerse aquí vale Esto sí a CD a ver dir momento sí no de 001 vamos a verlo en principio el servidor ha cargado vale vamos a la página principal Esta es la página principal Ok este es sobre mí este es el blog vale al cargar el blog a cargado aquí el blog porque de momento está en un console pun log OK Y esta es la página de contacto bien Ahora sí Esto es lo que tenía duda porque la conexión a la base de datos debe realizarse En todo caso siempre al principio pero la petición a la base de datos solo es Cuando cargue el blog vale bien entonces ahora a continuación lo que quiero no es ya console pun log que eso técnicamente tampoco está mal tampoco molesta pero lo que quiero es. wr vale vamos a ver vale console.log fields bueno a ver va Vamos a probar Ok vale al blog esto son los fields Pero esto no nada No estos son los fields pero no Esto no es lo que me hace falta No vale ahora for I es igual a 0 Y es menor que result punto length y+ más y eh console log result de I vamos a ver Me estoy tirando un triple vamos a por ello recargamos y no Ya decía yo vale q curioso Qué curioso no es el error que me esperaba vale blog Okay Ah okay sí que ha funcionado Sí vale claro Ah pido contacto pido blog Ahí está hand Shake twice muy bien vale ese error tengo que mirarlo porque eh Me está produciendo un error Vale Voy a verlo porque en cuanto le pido otra vez lo mismo se queda frito vale Voy a verlo vale el tema está aquí entonces conexión punto Connect eso solo debe producirse una vez y conexión pun Connect conectado Esto va Aquí conexión Connect Esto va aquí okay Vale correcto conexión query esto lo puedo mover atrás y elimino los espacios en blanco y yo creo que ya hay un error ahí me dice unexpected caráter no ese error no es correcto vale recargamos conectado recargamos vale inicio sobre mí blog y no pasa nada porque me lo vuelve a sacar vale correcto Entonces si ya tengo el resultado de I Entonces ahora a continuación pues puedo poner puedo hacer lo siguiente restr voy a hacer un poquito de html aquí dentro no me hace mucha ilusión Pero bueno ahora para ilustrar pues servirá y voy a poner un una etiqueta article d html article voy a poner un h4 por ejemplo y pongo dos acentos abiertos y pongo punto título creo que es título Ahí está Vale luego pongo una etiqueta Time me haría falta un Time stamp Pero bueno pongo fecha Y por último pongo una p una etiqueta p donde pongo texto si todo va bien vale si todo va bien recargo y cuando cargo el blog Aquí tengo el título modificado tengo la fecha tengo el texto de la entrada y ahora Esto está saliendo desde mysql Así que vemos que no solo hemos conseguido conectar eh No dejs con mysql sino que lo estamos haciendo para algo práctico vale como es pues seleccionar una parte del contenido y Eh pues sacarla en pantalla es decir eh devolver contenido de mysql y e imprimirlo dentro de html Vale y ahora vamos con la gestión de B desde no de js entonces para esto en primer lugar lo que tenemos que hacer evidentemente es asegurarnos de que tenemos instalado en nuestro sistema eh si no lo tenemos instalado nos vamos a de b y descargamos vamos a verlo vale el Atlas no porque esto es en la nube No quiero Atlas lo que quiero vamos a verlo no pongo Download mongodb Esto sí vale es el mongodb Community server Download Es decir me quiero descargar el mongodb server como un mysql Server vale lo quiero en mi ordenador me lo descargo me lo instalo y a continuación una vez que está instalado voy a Uy parece que en este equipo no lo tengo instalado Qué raro cómo no lo voy a tener instalado Bueno pues me lo voy a descargar Qué raro que no lo tenga a ver compas no pues lo estoy buscando en este equipo y no lo tengo instalado así que bueno pues mejor todavía Así lo que voy a hacer es Mostrar el proceso de instalación Vale pues una vez que está descargado a ver vale Ahora cuando acabe de Descargar vale lo voy a ejecutar ahora veremos Por qué antes de este verano me dio algún problemilla que otro la conexión de con no dejs a ver si en las versiones que han sacado ahora pues han arreglado algo bien Vamos a ver vale de b7 Ok aceptamos a ver octubre 2018 vale bien la licencia quiero completo Bueno voy a hacer custom No pues lo quiero todo vale vamos a ver instalo MB como servicio S como user y ahora el service name es vamos a ver Ok acá un name vale el service name es deb acordémonos deb no me voy a acordar voy a sacarle Uy Cuidado Madre voy a sacar el wordpad lo pego es fácil pero seguro que se me olvida instal el Compass por supuesto o sea el Compass es como el php my admin de db O sea que por supuesto que lo queremos Así que next install el Compass digamos La brújula de es como el php my admin sin La brújula no vamos a ninguna parte Así que instalamos muy importante mantener activado el instalar el Compass porque si no instalamos el Compass gestionar Eh pues puede ser más difícil realmente la gestión la mayoría la voy a hacer desde node vale pero hemos visto por ejemplo en mysql Pues que en todo momento tenía ahí abierto el pH admin como ayudita Vale pues el compá va a ser igual compá no quiero proceder desde compas quiero proceder desde no dejs pero tener compas ahí al lado Pues siempre va a venir bien para comprobar que todo va bien Bueno pues poco a poco instalando Ojalá que de B con el compas venira con el sham pero no viene tampoco viene node por otra parte así que bueno pues como podemos ver pues no de nos lo tenemos que bajar aparte de B lo tenemos que bajar aparte en fin igual hay algún paquete por ahí que lo reúne todo No lo sé igual lo hay vale Pero yo lo que hago es descargármelo de forma independiente al menos de momento igual Un día alguien me descubre un paquete y a partir de ahí lo uso pero hasta que llegue ese momento pues lo instalo directamente desde los paquetes vale compa está instalando Compass está abierto se me ha abierto en otro monitor vale Y ya tengo el db instalado en mi ordenador bien y si todo va bien veis De hecho recientes Aquí tengo conexiones de junio por esto me extraña que me dijera que no tengo el mongodb instalado en mi equipo si yo he estado trabajando con mongodb antes de agosto Pero en fin Bueno lo que sea vale eh nueva conexión me Quiero conectar a acordémonos a local Host 27017 que es la el puerto así como May sql es 336 pues db es local Host 27017 vale me conecto okay garit Y si todo va bien Es que es raro porque eh tengo conexiones tórico de conexiones pero no tengo mis bases de datos de antes de verano tampoco las hecho de menos pero en fin lo que sea vale Bueno pues ya tengo deb instalado en mi equipo ya tengo el Compass instalado en mi equipo y ahora a continuación vemos que no es una aplicación web sino que es una aplicación de escritorio Vale entonces ahora a continuación Pues voy a crear por aquí una nueva carpeta llamada 004 mongodb y vamos a proceder poco a poco bien en primer lugar 001 comprobar esto Qué es nueva carpeta 001 comprobar libre Así que comprobación punto js Vale y digo bar es igual a require y e de B Okay Vale vamos a ejecutarlo salimos de aquí CD 004 CD 001 vale No de 001 y ya está Vale en principio tengo deb o sea tengo la librería previamente instalada si no hubiera sido npm install db y ya está Vale pero en este caso no hace falta porque ya la tengo instalada bien así que a continuación ahora lo que voy a hacer es crear una base de datos crear base de datos Y aquí en cre crear base de datos pues nuevo archivo 002 y pues creación js vale me copio esta línea Ok y digo bar URL es igual a mongodb dos punos barra localhost 2.27 017 O sea la URL que hace un momento ponía en Compass barra no de js o lo que nos de la gana es decir o aplicación o mi web o mi base de datos o mi lo que sea vale Aquí he puesto no dejs más que nada para decir Bueno estoy creando una base de datos que se llama nodejs porque la estoy creando desde nojs pero se podría llamar como quisiéramos entonces una vez que tengo esto digo punto Connect y digo me conecto a la URL y quiero un callback de error y base de datos y digo eh si se produce un error en ese caso throw error y si no console punto log base de datos creada y bueno y db Close Más que nada porque si no nos la dejamos abierta y no es una buena costumbre Entonces si todo va bien y no lo sé vamos a verlo porque la conexión con mungo siempre es más complicada que en mysql Pues nos vamos aquí 002 y no de 001 vale vamos a ver Ah sí Y no de 001 no Por qué ah no 002 se llama creación vale Okay error muy bien Vamos a verlo Connect is not a function vale Ah perdón esto es require punto client vale a ver ahora okay vale esto de vez en cuando me lo hace Ya decía yo que no iba a ser tan fácil Vale ahora Dentro de poco hará un Time out vale muy bien Ah pues vamos a ver Bueno voy a comprobar que no habrá ocurrido nada vale no se ha llegado a conectar Si se hubiera conectado lo hubiera hecho muchísimo Antes hay una alternativa que es usar mongus pero es que no quiero mongus a ver voy a probar a ver si puedo hacer esto funcionar y si no nos vamos a mongus Vale Voy a replantear un momento la cuestión y voy a hacer lo siguiente voy a dar una aparente paso atrás para vamos a ver Ah aquí Vale entonces Ah vamos a ver en la carpeta de no dejs no anteriormente lo que voy a hacer es lo siguiente me voy a ir a github me voy a ir a no de js me voy a ir a vale esta se va a convertir en la carpeta 5 esta se va a convertir en la carpeta 4 porque voy a crear una carpeta 003 sql en la cual voy a se agregar un poco la parte sql de mysql entonces de esta forma dentro de sql voy a crear eh tres partes principales vamos a ver dónde a ver por aquí dónde sql ddl dml o dcl vale Y por tanto vamos a ordenarlas en el mismo orden que hemos hecho dentro de mysql es decir vamos a ver creamos usuario vale que sería un create user Vale pues vamos a hacer por tanto primero un ddl nueva carpeta ddl luego vamos a hacer otra carpeta con dml 002 vamos a ver y Vale entonces eh Para ddl vamos a hacer un nuevo archivo llamado crear usuario sql mismo vale Y entonces lo que voy a hacer es que el crear usuario Lo pongo aquí para también crear usuario identificado vía mysql using esto y Grand all privileges técnicamente eso va en dcl así que no esto no así que dcl esto no va Aquí Esto va aquí dcl y Esto técnicamente va Aquí nuevo archivo dar permisos sql Grand privileges on todo a este de usuario require known with Grand option Max queries Max connections Max updates Max user connections y ahora sí vale Y por tanto ahora eh tengo crear usuario y tengo crear base de datos y lo que voy a hacer es esto crear base de datos crear base de datos pun sql Y si somos justos realmente tendríamos también usar base de datos en sql puro una cosa es crear la base de datos y otra cosa es usar la base de datos que es o se una cosa es crearla y otra cosa es entrar dentro de ella bien Ahora dentro de dml es cuando Aquí vamos a realizar las operaciones por un momentín porque tenemos también create table Entonces vamos a crear nuevo archivo crear tabla.sql el sangrado aquí ya es correcto y por tanto ahora dentro de dml vamos a hacer las operaciones scud que es 001 insertar voy a ponerlo como archivos a ver Ah no como carpetas 001 insertar 002 eh seleccionar actualizar 004 eliminar y por tanto ahora en inserción selecciono esta consulta 001 insertar sql y pego esta consulta Ah seleccionar no aquí seleccionar punto sql y en seleccionar voy a pegar esta consulta en actualizar 001 actualizar sql voy a pegar esta consulta y así un poco separamos lo que es la parte sql de lo que es la parte de node y 001 eliminar sql borrar y delete from entradas Where ID es igual a lo que sea vale con esto por lo tanto tenemos ya digamos una entrada a Bueno a lo que sería esta parte de sql antes de sql para node con lo cual a continuación voy a hacer lo mismo para eh trabajar con la parte de Eh Pues de antes de meternos en dentro de eh dentro de sql bien Entonces cierro esto por aquí vale Y sql my sql Vale pues de B esto se va a convertir en de momento la parte se porque en la parte se lo que haremos es de B con mongus finalmente vamos a usar mongus y voy a hacer 005 de B mono de B no de B para realizar una serie de ejercicios en los cuales estaremos trabajando específicamente con node vamos a ver bien Vamos a por ello Vale entonces vale en primer lugar voy a aquí de B vale voy a abrir el Compass vale Y el compas un momento que no me aparece instalado de nuevo Así que la estoy buscando directamente en el listado de aplicaciones sin el otro monitor vale de B compas aquí está Me conecto a mongodb local hor 27017 vale Ok y por lo tanto a continuación voy a introducir una serie de comandos en el shell que es esto de aquí abajo creo que no lo puedo hacer más grande settings enable mongos shell evidentemente pero no pero creo que no tengo ahora vale la opción de hacerlo más grande para que se vea mejor bien entonces eh voy a hacer lo siguiente vale voy a crear en primer lugar una base de datos sobre la cual haré una serie de demostraciones y luego crearemos una base de datos desde no dejs para aplicar al ejercicio que estamos haciendo así que dentro de mongodb voy a crear una carpeta llamada crear base de datos y dentro de aquí voy a crear 001 eh Bueno voy a poner crear base dedatos js Aunque técnicamente voy a poner use agenda por ejemplo voy a crear una agenda en este caso Aunque en este caso no voy a Mira voy a crear por ejemplo Bueno ya tengo el blog voy a crear contacto vale contactos desde la web bien entonces eh Ya tengo esto por aquí use contacto pero no lo voy a ejecutar directamente desde aquí sino que lo voy a ejecutar directamente desde aquí Entonces le digo use contacto de hecho voy a poner un punto y coma use contacto le doy a enter y me dice switch to db contacto Al decirle use contacto automáticamente aparece aquí la base de datos contacto y si recargo Aquí vamos a ver Ah sí vale he creado la base de datos contacto pero hasta que no cree una colección y hasta que no cree un registro no va a aparecer en este listado ok No pasa nada bien pues a continuación vamos a crear una colección las colecciones son lo que en mysql conocemos como tablas pero aquí no se llaman tablas se llaman colecciones porque de hecho no son tablas sino que son colecciones de documentos Así que vengo por aquí 002 crear colección de documentos crear colección Así que 00 crear colección js de sql no hace falta decir que como diríamos no hace falta decir que primero creo una base de datos Y luego creo colecciones sino que es automático entonces voy a decir db punto y lo puedo hacer aquí y luego lo copio db punto lo digo porque si hago aquí deb pues me aparece toda la ayuda Vale entonces voy a decir create collection aquí y voy a decir use contacto pues create Collection formularios Así que hago así coma voy a copiar esto y le doy a enter y me dice ok vale ha creado formularios voy a pegarlo Aquí vamos a hacerlo al revés a ver si me deja ah Entonces ahora tengo una base de datos llamada contacto y una base de datos o sea una colección de documentos llamada formularios voy a darle otra vez aquí ahora sí ya aparece la base de datos contacto y aparece la colección de documentos llamada formularios con lo cual si tenemos esto ya podemos empezar y vamos a comprobar a continuación como jas es realmente el mejor amigo de porque una gran cantidad de cosas que vamos a hacer se hacen creando y trabajando con jas vamos a ver así que vamos a lo que sería la parte crud entonces nueva carpeta voy a insertar un registro y para insertar un registro dentro de db voy a poner db punto db formularios punto y aparece todo lo que puedo hacer dentro de la colección de formularios por la i voy a encontrar una cosa que es insert One e insert many insert One para insertar un documento insert many para insertar muchos documentos o varios documentos más de uno pincho insert One y a continuación insert One es una función y la función tiene eh parámetros y los parámetros se van a ofrecer dentro del formato Jason entonces creo un Jason abro una llave ya un momentín pera Sí pero no por momentín porque me ha creado un elemento pero no quiero crear el elemento Y sí eliminar vale voy a hacer una cosa a ver voy a esto aquí nuevo archivo insertar un elemento js vale Y voy a hacer lo siguiente dado que tenía por aquí en alguna parte tenía por aquí cargar blog contacto en contacto tenía nombre asunto email y mensaje Vale pues vamos a utilizar ese formulario como modelo de datos de referencia y por tanto ahora voy a hacer lo siguiente por tanto voy a decir e nombre dos puntos José Vicente coma asunto dos puntos Este es un asunto Este es un correo este es el primer correo coma mensaje es Este es el cuerpo del mensaje y por último fecha es 0815 por tanto ahora copio esto lo pego aquí punto y coma Por cierto le doy a enter vale Y dice acn es igual a true y ahora viene una cosa muy importante y el inserted ID es este object ID Entonces el object ID es el como algo así como la clave primaria es la clave que ha insertado para este documento y ahora vamos a comprobar si esto es cierto o no nos vamos a formularios voy a hacer esto un poquito más pequeño nos vamos a formularios recargo pincho el botón de recargar porque cuando inserto un elemento desde el shell pues no aparece automáticamente pero no pasa nada le doy aquí a recargar y me aparece un documento y el documento tiene el ID que el sistema automáticamente le asignado no es un ID numérico sino que es un ID en forma de Hash y aparte del ID que le asigna automáticamente node que yo no lo controlo ni tampoco lo quiero controlar quiero que sea node el que gestiona ese identificador pero están mis Campos bien ya tengo por tanto la posibilidad de insertar un elemento ahora a continuación lo que quiero es insertar múltiples elementos por tanto voy a crear por aquí una nueva carpeta 004 insertar muchos elementos vale me vengo por aquí nuevo archivo insertar muchos js vale voy a hacer esto para aquí bien y entonces en insertar muchos voy a poner db pun formularios Voy a copiar esto Y en lugar de insert One voy a insert Many de hecho me copio lo que me copio lo que tenía antes para poner un insert manyi y también de lo que ha sido antes el repaso de javascript vamos a ver que el repaso de javascript es importante porque en un momento dado he explicado que se podían crear eh diferentes combinaciones de Jason y a Rise Bueno pues vamos a comprobar que esto es especialmente cierto también para de B porque voy a crear una array y Dentro de este array voy a crear muchos jotas Sones Así que copio y pego tampoco mucho más bien Este es el segundo correo este es el tercer correo este es el cuarto correo 15 bueno esto sería 16 17 18 y si ahora copio esto y lo pego dentro del mongos shell y si no he cometido ningún error le doy a enter me dice que los inserted ids son estos de aquí me voy a recargar en mongodb y compruebo como acabo de realizar un insert meni en el sentido de que he podido insertar múltiples documentos de forma simultánea bien Vamos a hacer más cosas ya tenemos la operación de insertar vamos a un poco apoyándonos en las operaciones crud de sql vamos a hacerlas parecidas vamos a buscar elementos por lo tanto para buscar elementos Vamos allá lo que voy a hacer es lo siguiente vamos a Nueva carpeta encontrar elementos bueno encontrar elementos ya los estoy viendo aquí pero esto es trampa yo no quiero verlos aquí sino quiero verlos en el shell es decir quiero comprobar que puedo encontrar elementos Así que para ello me voy a nuevo archivo 001 encontrar js y dentro de encontrar lo que voy a hacer es db punto a ver un momento db pun formularios y db pun formularios F y ya está así que copio pego y básicamente esto es un Select all es decir es un Select almohadilla es un dame todo lo que tengas pincho aquí le doy a enter Y compruebo como me aparecen en la pantalla el listado de elementos que tenía anteriormente luego he comprobado que puedo insertar pero también he comprobado como puedo hacer un Select bien No solo esto sino que a continuación también puedo encontrar con filtros Así que voy a decir que quiero encontrar solo uno y para encontrar uno que de hecho es el primero 001 encontrar uno js voy a este código pero en lugar de find voy a find One es decir Encuéntrame solo uno le doy a find One y me dice este es el primer correo O sea no solo me encuentra uno sino que además el que me encuentra es el que me da el que me devuelve es el primero de la lista Vale tengo ya esto por aquí con lo cual a continuación lo que voy a hacer es poder filtrar un poquito más encontrar con filtros a ver espera venga 007 encontrar filtros Vale y nuevo archivo encontrar con filtro Ay venga 001 encontrar filtro js vale Y voy a hacer lo siguiente db formularios find One pero en este caso voy a decir find pero en este caso voy a establecer una condición y voy a decir que la condición es donde asunto es igual a este es el segundo correo si yo ahora ejecuto esto podremos comprobar vamos a ver error Ah columna asunto Ah Sí perdón que esto es un jas esto debe ir dentro de un jas vale sí lo selecciono y me dice este es el segundo correo Es decir comprobamos como es cierto que puedo realizar búsquedas pero al realizar las búsquedas puedo utilizar lo que sería algo parecido al we de sql este we que en este caso lo que hace es que me permite especificar eh Qué es cuál es la condición mediante la cual voy a encontrar un documento dentro de la base de datos vemos por lo tanto que con pues no trabajamos con tablas sino que cada entidad dentro de una colección es un documento Jason y técnicamente podrían tener cada uno la estructura que quisieran es una de las ventajas de trabajar con jas Pero al final la mayoría de conceptos que vamos a cubrir dentro del trabajo con mongodb pues tienen evidentemente sus particularidades pero no son tan diferentes de aquellos conceptos que ya conocemos de sql el sentido de que tenemos insertar tenemos seleccionar también más adelante vamos a ver que tenemos actualizar tenemos eliminar y En definitiva no es tan diferente de aquello que ya conocemos bien pues vamos a continuar para ello voy a abrir el Compass vamos a ver y vamos por aquí vale B encontrar con filtros vale estábamos por aquí vamos a conectarnos recordamos que tenemos la base de datos llamada a contacto y dentro de contacto tenemos los formularios bien pues una vez que tenemos esto vamos a ver a continuación Ah vamos a ver un momento vale vamos a actualizar Así que nos vamos a Nueva carpeta 08 actualizar y dentro de actualizar voy a crear 001 actualizar 1 js y dentro de actualizar Pues voy a hacer lo siguiente me copio este de aquí arriba me lo pego aquí y digo esto por aquí vale Y digo deb formularios y digo update One y voy a especificar Por una parte qué es lo que quiero encontrar voy a decir asunto Este es el primer correo este es el criterio de búsqueda el criterio de encontramiento digamos o sea lo digo porque sql es Search query Language es lenguaje de peticiones de búsqueda pero en si nos fijamos el concepto en deb es que no buscas sino que encuentras vale parece una tontería solo un verbo Pero la idea es el concepto es bastante cambiante Bueno Este es el primer correo vale Y ahora a continuación pongo una coma pongo otras llaves y digo set dlar set y pongo otro J aquí dentro y digo por ejemplo pues fecha es igual a 2023 08 e 30 por ejemplo o 20 o 30 yo que sé bien Vamos a esto y si todo va bien y no me he dejado ninguna coma ahora a continuación abro por aquí el mongos shell Eh bueno primero use contacto para asegurarnos que estamos dentro de contacto y ahora db pun formularios update One porque me había salido y he vuelto a entrar eh Este es el primer correo set fecha 2023 vamos a ejecutarlo vale si todo ha ido bien vemos Que match count ha encontrado una coincidencia modified count ha modificado una coincidencia vale Y por tanto Todavía no he recargado en el primer correo veo que la fecha era 2023 0815 pero ahora recargo y veo que ahora en el primer correo la fecha es 2023 0830 vale con lo cual vemos cómo lo ha hecho correctamente y vemos cóm hemos realizado la operación de actualizar uno a continuación 009 y vamos a actualizar muchos me voy a actualizar muchos nuevo archivo 001 Actualizar js bien selecciono el código de actualizar Y en este caso en lugar de vamos a ver en lugar de actualizar vamos a ver voy a decirle update manyi Claro en el meni en este caso pues no hace falta incluso que le diga el criterio de búsqueda el criterio de búsqueda debe estar pero lo voy a dejar vacío y digo set fecha es igual a 2023 0801 Vale entonces voy a probar esto ahora veremos el set o el Ink voy a ejecutar esto por aquí ejecuto vale Y dice que ha encontrado cuatro Pero ha modificado tres porque el primero de los cuatro ya había sido modificado con lo cual ya tenía la fecha correcta Ahora mismo en la pantalla parece que no hayan sido modificados Pero si yo recargo aquí veré como ahora los cuatro elementos han sido correctamente modificados y ahora por último a continuación lo que vamos a hacer es decir lo siguiente vamos a eliminar uno para cerrar el ciclo clud nueva carpeta 010 eliminar 1 y me voy a aquí me voy a 001 eliminar pun js selecciono el de actualizar me voy a eliminar y voy a decir que quiero delete One y el criterio de búsqueda no voy a hacer el callback en este caso el criterio de búsqueda es donde title o Perdón donde nombre es igual a Ah nombre José Vicente Vale pues bueno asunto Este es el cuarto correo Vale pues asunto d de asunto Este es el cuarto correo Así que copio pego y me dice acknowledge true y deleted 1 veo que tengo cuatro documentos Pero si ahora recargo veré que ahora solo quedan tres documentos porque he realizado una operación de eliminación de tipo delete One y ahora evidentemente a continuación voy a hacer 011 eliminar muchos a ver un momentín renombrar y eliminar muchos vale creo un archivo llamado eliminar muchos js bien y eh copio esto de aquí pego esto de aquí y en este caso lo que voy a hacer es por ejemplo delete many donde Ahora sí voy a decir que por ejemplo el criterio de eliminación es nombre es igual a José Vicente pues hago así copio esta petición aquí no un momentín aquí la pego y acknowledge true todo correcto deleted 3 y esto quiere decir evidentemente que si ahora recargo en la pantalla veo como esta colección no tiene ningún dato porque acabo de hacer el delete many de esta forma vemos como a través de mongodb vemos que el lenguaje de consultas de mongodb dentro de que esto que estamos viendo Es el fundamento la base de mongodb pero conceptualmente no es muy diferente De sql que al final trabajemos con archivos Jason Pero tenemos bases de datos que tienen colecciones y las colecciones tienen documentos y los documentos pues queremos crear queremos verlos queremos eliminarlos queremos actualizarlos y En definitiva queremos hacer cosas que a la postre en muchos escenarios acaban siendo bastante parecidas a las cosas que queremos hacer con Eh Pues con cualquier base de datos de tipo sql o de cualquier otro tipo bien una vez que hemos visto esto vamos a trabajar la conexión con mongus vale voy a poner aquí directamente mongus y aquí en comprobar librería antes de empezar voy a poner y voy a poner require mongus ahora s puedo cerrar bueno no lo voy a cerrar por si acaso voy a dejar abierto vamos a ver no quiero sacar el cmd vale quiero vamos a ver qué es lo que quiero pues quiero el cmd aquí el código aquí y ahora lo que voy a hacer es CD documentos github 2 CD no de js CD cd00 vale Y ahora no de ahora ya no estoy en compas ahora estoy en no directamente no de 001 Vale y Oh W increíble ya tengo mongus Pues se ve que ya lo tenía instalado de antes si no lo tuviera instalado lado Pues evidentemente npm install mongus en principio sí que bueno lo puedo que puede que lo tenga instalado porque he estado trabajando estos meses anteriores con monus pero he reinstalado el node Pero bueno da igual lo que sea si no da error es que lo tengo correctamente instalado bien con lo cual ahora a continuación una vez que tengo esto pues lo que voy a hacer es vamos a ver crear también vamos a ver creación no esto fuera Vale onus ahora eh bar Http es igual a require http vale Y no Espera todavía no vamos paso a paso y ahora const URL o const conexión es igual a b dos puntos barra 127001 barra qué barra contacto vamos a conectarnos a una base de datos que existe porque la hemos creado anteriormente probamos vamos a verlo a ver un segundo t aquí vale y cd2 puntos c002 no de 001 002 vale bien y ya está en principio con esto lo que hacemos Es que hemos formateado únicamente una URL y ahora a continuación nueva carpeta 003 Conectar a base de datos y 001 00 venga 001 con.js creo esto de aquí copio esto de aquí y ahora a continuación digo mongus Connect Me conecto a la conexión y voy a pasar unos cuantos parámetros conexión coma vamos a ver use New URL parer esto es igual a true coma Us unifi topology esto también es igual a true con lo cual si esto ha ido bien punto esto se parece a dentro de javascript den fun y console log conectado a vamos a comprobarlo c003 no 001 vale Y conectado a ya está lo que antes nos había costado bastante más pues ahora como vemos nos ha costado bastante menos pero esto que he hecho es cierto esto que he hecho realmente ha servido de algo esto que he hecho realmente ha funcionado pues vamos a comprobarlo cierro y ahora a continuación me voy a ir a mongodb voy a insertar uno insertar un registro voy a copiar esto y lo voy a pegar aquí me voy a recargar vale veo bueno con uno me vale realmente Bueno voy a hacer el un y Eli Y así pues recupero los cuatro elementos y así desde mongus comprobamos si es cierto que tengo esos elementos en la pantalla vale para ello voy a crear una nueva carpeta 004 es recuperación de elementos de documentos recuperación js Vale y vamos a ver vale cojo el código de la conexión y ahora a continuación eh lo que tengo que hacer es especificar un esquema en los esquemas vamos a verlo yo lo que hago es lo siguiente yo lo que hago es prepararle preparar al sistema para decirle qué es lo que va a venir entonces digo const eh formulario esquema es igual a New mongus esquema y voy a especificar un jas que dirá nombre dos puntos String coma asunto dos puntos String coma mensaje dos pun String coma fecha puntos String si nos fijamos lo que estoy haciendo es crear un esquema que evidentemente corresponde con el modelo de datos del archivo con el que estamos trabajando tiene que ser así por supuesto una vez que he hecho esto ahora a continuación digo const formulario es igual a mongus modelul formulario coma formulario esquema es decir al formulario creo un elemento llamado formulario y le aplico Este modelo de datos que a su vez sale de aquí es como que estoy preparando a nodejs para que sepa lo que le va a venir Y entonces a continuación vamos a ver voy a crear una nueva carpeta 05 listado de elementos en pantalla y nuevo archivo 001 listado js me copio todo este código de aquí evidentemente y ahora a continuación aquí en el console log conectado a pues ya que estamos lo que voy a hacer es una petición voy a decir formulario punto vamos a ver punto find recordamos que el punto find en encontrar elementos es este de aquí vale por lo tanto lo que estoy haciendo en mongus es utilizar un comando de mongodb y a continuación una vez que he pedido Algo vamos a ejecutar esto ya que estamos esto es cd00 cd5 no de 001 vale conectado a Ok todo correcto claro he pedido Dame todos los formularios pero no he dicho por dónde los quiero sacar no he dicho qué es lo que quiero hacer Entonces para decirle qué es lo que quiero hacer le digo punto exec es decir ejecútela punto den Y entonces una vez que me lo hayas ejecutado voy a hacer lo siguiente function formularios y formularios momento tú eres de aquí vale Y tú eres de aquí perfecto y ahora a continuación lo que quiero hacer es poner pues console pun log y formularios y a ver qué pasa así que cierro recargo y aquí lo tenemos y como podemos ver lo que ocurre en este caso es que desde mongus me he conectado a al servidor me he conectado a mongodb he creado un esquema interesante importante para poder eh recuperar los datos en el formato correcto y a continuación hago un mongus Connect y saco por aquí información y luego la saco en pantalla vale con lo cual ya tengo una petición de recuperación en mongus luego que quiero hacer ahora es realizar una petición de inserción quiero ya no quiero hacer un punto find quiero hacer un insert One por ejemplo Así que para ello vamos a ver para ello voy a Nueva carpeta 006 insertar documento y en Nuevo archivo 001 insertar js me voy a listado copio pego Vale y vamos a ver y ahora digo formulario eh formulario punto fine pues no quiero punto fine quiero insert One inserto un elemento quiero punto insert one o vengo aquí vale insert One quito el punto y coma un momento formulario insert One sangro vale punto exec y claro punto den Pues el punto den tampoco me va a devolver demasiado es decir console pun log porque una inserción en principio Bueno sí que pod puede devolver algo puede devolver el acknowledge es igual a true vale pero voy a decir insertado así que si esto va bien salgo del servidor CD bueno el servidor es conveniente cerrarlo Pero vale ahora veremos Vale entonces vamos a ver no quita cd00 CD Ah no perdona CD 006 mongus cd00 6 insertar documento no de 001 vale hay un error vamos a verlo insert one no es una función vale vamos a ver formulario find formulario pun insert One no es una función vale Okay pues no me cuadra mucho que no sea una función pero vamos a buscarlo y vamos a ver no momento Vale y vamos a ver Ah bueno punto safe vale pues voy a decir lo siguiente vamos a ver okay vale esto es formulario Entonces es const nuevo formulario es igual a New formulario entonces en el formulario meto esto este es un mensaje desde node vale Y entonces ahora formulario saave a ver nuevo formulario pun save y ya está entonces nuevo formulario pun save function If r throw a y console pun log Ok muy bien Vamos a verlo a ver si Okay Vale da otro fallo pero ah save no acepta un callback vale Bueno pues nada pues no hay callback bien Ahora me dice exec no ok No es una función he insertado vale con lo cual ya tenemos el código de inserción salgo del documento recargo compas y si todo ha ido bien Este es un mensaje desde node hemos visto como gracias a mongus pues insertamos correctamente un documento dentro de la página Entonces qué ocurre con esto Bueno pues con esto lo que ocurre es que yo a continuación lo que quiero ya por último es insertar este ejercicio esta conexión con mongodb con respecto al ejercicio que estábamos desarrollando durante el curso Entonces yo durante el curso pues tengo por aquí un mysql que es cargar blog desde mysql pero por ejemplo cada vez que alguien me deja un comentario me deja un contacto en el formulario de contacto pues lo quiero guardar dentro de mongodb Por qué dentro de mongodb no dentro de mysql pues simplemente porque como ya he demostrado la conexión correcta con my sql Pues ahora a continuación quiero demostrar la conexión correcta con mongodb Bueno pues ahora a continuación voy a sacar en documentos en no de js vamos a ver en no dejs en a ver May sql voy a seleccionar cargar blog desde mysql lo voy a pegar aquí en monus se va a llamar insertar formulario bueno insertar formulario No espérate primero atrapar formulario Es que esto va a tener unas cuantas versiones del ejercicio Entonces vamos a ver atrapar datos de formulario eso De hecho no s si estaba en esta entonces me voy al servidor y digo que en el caso de en el caso de contacto procesa vale Ahí está console.log procesado Vale vamos a ejecutarlo 007 no de 001 servidor voy a abrir un navegador me voy a abrir un local Host técnicamente aplicación no a local Host 8080 creo que era Ah no ha dado un error vale ha dado un error porque no tengo shamp activado y no tengo May sql activado Vale pues Venga pues activamos mysql Vale entonces vuelvo a recargar node recargo por aquí vale tengo el contacto a Ah a y a vale Y dice nombre a asunto a email a mensaje a con lo cual yo a continuación lo que quiero es asegurarme de que puedo atrapar correctamente todos los datos entonces digo bar nombre es igual a procesado nombre y entonces digo console log el nombre es más nombre vamos a ver si esto ha funcionado hago así contacto a y a enviar y dice el nombre es a vale Luego parece que hasta el momento está funcionando correctamente evidentemente ahora a continuación pues lo que voy a hacer es bar bar asunto es procesado punto asunto bar email es igual a procesado imail y bar mensaje es igual a procesado mensaje puede ser bar puede ser LED en fin da igual voy a ponerlo como bar porque igual la información sale de este bloque bien entonces una vez que tengo esto y ya me he asegurado de que esto que tengo en la pantalla es lo que quiero ahora a continuación lo que voy a hacer es abrir otra ventana vamos a ver puedo hacerlo realmente con la opción de dividir ventana no me hace mucha ilusión Pero bueno aquí está Vale y voy a hacer lo siguiente aquí voy a tener que ampliar pantalla esto es el proyecto Y esto es vamos a ver y esto es insertar Vale entonces ahora a continuación esto es proyecto 008 guardar en mongus al guardar en mongus esto es el servidor esto es insertar y ahora hago lo siguiente copio mongus desde aquí hasta aquí la conexión es esto ostras ya tengo una conexión con mysql Pues bueno esto es conexión mongos vale me cojo el esquema del formulario Pues vale Okay creo el modelo y ahora aquí al crear el nuevo formulario dónde estás el profesar aquí vale me conecto yo creo que la conexión a mongus tendré que hacerla antes igual que la conexión con mysql conectado a Y entonces aquí abajo le diré nuevo formulario save y nuevo formulario no voy a ponerlo como const por si acaso luego guardo otro nombre es igual buf voy a poner nuevo nombre nuevo asunto nuevo email y nuevo mensaje nombre es igual a nuevo nombre asunto es igual a Nuevo asunto mensaje es igual a ostias un momento Cómo que Ah Es fecha Bueno aquí tengo un problema es que no me coincide el esquema Pero no pasa nada porque vale pues nuevo mensaje es igual a Nuevo mensaje aquí Perdón nombre asunto email es igual a Nuevo email y ya está Vale ahora sí Bueno pues yo creo que ya yo creo que con esto debería funcionar pero solo es una creencia solo es una sospecha por tanto vamos aquí salgo CD 008 no dónde estoy 008 atrapar datos desde formulario atrapar tengo que salir vale c008 bien no de 001 servidor vale causa un error vamos a ver Ah sí sí el error vale el error es que esto lo puedo cerrar ya Y entonces si esto es conexión mongus esto es conexión mongus Ahora sí vale vamos a verlo ahora ejecuto conectado a May sql vale conectado a todas partes bien y si todo va bien recargo la web de José Vicente me voy a contacto no Ah voy a contacto vale Y inserto pues AAA bbb inserto un correo y ccc si todo va bien le doy a enviar a ver si da algún error le doy a enviar vale dice insertado y si ahora me voy al compas y recargo si todo ha ido bien en formularios veo nombre AAA asunto bbb mensaje ccc me falta la fecha y me falta el correo electrónico vale Pero bueno pero vemos cómo se ha insertado correctamente Vamos a repasar eso Claro claro porque el esquema no está bien yo en el esquema había prometido un momento dónde está ese esquema dónde estás aquí nombre asunto mensaje fecha email Vale ahora sí que el modelo de datos coincide vuelvo a recargar me vuelvo a la web de José Vicente me voy a contacto y digo pues AAA bbb info fff le doy a enviar y si ahora me voy al compas pues recargo y en el al recargar Ahora sí AAA bbb fff y el email es info @josé viicente carratala comom por lo tanto Ahora sí vemos como Pues tengo una web que por una parte tiene una conexión a May sql vale sin ningún tipo de problema y luego por otra parte tiene una conexión a eh mongodb donde en este caso por ningún motivo en particular realmente Pues he utilizado la conexión de mys sql para leer artículos y la conexión de mongodb para insertar formularios de contacto podría haber sido al revés no es más que una demostración En definitiva Bueno voy a continuar haciendo algo que tengo pendiente hace un tiempo vale que es darle un poco más de estilo a este proyecto Así que 009 voy a darle estilo css Entonces al darle estilo css vamos a verlo por aquí bajo por aquí bien y por ejemplo aquí nuevo archivo voy a poner eh estilo css y lo que voy a hacer en este caso es que en el eh dónde estás un momentín en la plantilla en la cabecera Pues voy a decir que introduzco aquí Perdón en la cabeza introduzco un link rel es igual a sty sheet y hre es igual a estilo.css esto me va a causar algún problemilla vamos a verlo paro el servidor me voy a 00 no me voy al 009 vale No de 001 Ok bien recargo o inicio por ejemplo vale me voy aquí y bien en principio todo bien principio todo correcto vamos a ir a los elementos en los elementos veo que tengo la hoja de estilo opening New Tab estilo css Aquí empieza el problema y es que yo vengo por aquí y ahora en estilo lo podía poner dentro de una carpeta se da igual voy a poner eh Body y voy a decir e font family por ejemplo sans sherif y background rgb pues por ejemplo 220220 220 así que bueno cierro el servidor recargo por si acaso pero el tema es que no hace nada realmente Entonces en este caso lo que vemos es que el estilo css si nos fijamos no existe como tal vale no carga realmente ese archivo vale Tendremos que cargarlo nosotros para ello voy a hacerlo siguiente para ello dentro del servidor A dónde estás aquí dentro del servidor voy a crear una ruta a ver si me lo permite vale voy a decir el Case es fácilmente estilo css y read file estilo css paro servidor arranco servidor recargo vamos a verlo momento Vale y Head y estilo y Open New Tab vale Ah sí aquí vale el r. Wi sabemos que lo está cargando pero no lo está interpretando como css Vale pues vamos a ver a continuación eh Cómo podemos hacer que el node interprete correctamente los archivos css Aunque luego al final node no hará esto realmente node no nos servirá para esto pero de momento vamos a hacer que los interprete correctamente vale vamos a hacer lo siguiente Y es que Eh bueno primero voy a cargar archivos ya lo tengo vale Y si vamos a verlo y si es estilo css voy a hacer lo siguiente voy a decir qué vamos a ver refile estilo error Data y voy a decir Rest punto wr Head es 200 coma content type es texto bar css Esta es la cuestión y ahora Rest write Data vamos a verlo vamos a ver vale Ok paro el servidor arranco el servidor recargamos por aquí Ah Es se ha salido vale se ha salido vamos a ver right Head claro right Head porque los headers ya han sido mostrados vamos a decir end vale los headers ya han sido mostrados bien otra cosa que puedo hacer casi voy a hacerlo más sencillo es que en el propio en la propia cabecera voy a hacer una etiqueta Style y así Ahora luego veremos Cómo usaremos no de js para que nos devuelva archivos j y por tanto ahora voy poner algo sencillo como Body es font family es sanif y abrimos servidor recargamos servidor Ya lo tenemos ahí vale Y ahora a continuación pues podemos hacer algo sencillo Como por ejemplo decirle que background Gray y simplemente a continuación lo que voy a hacer es decirle que heer Main y footer va a tener un background White un with del 80% un margin auto vale un padding de 20 píxeles okay y ahora a continuación Pues bueno lo clásico sobre mí blog ahora aparece por ahí vemos como le damos un poquito de estilo para que tenga pues una presentación un poquito más agradable Vale y vemos como de esta forma pues ahora sí ya tenemos estilos aplicados a la web que estamos realizando dentro de node todo esto que hemos visto a ver vale todo esto que hemos visto para mí Está muy bien para mí es muy divertido pero realmente esto que hemos visto no explica Cuál es el poder de no de js es decir al final hemos hecho con nodejs lo mismo que podemos hacer con php o lo mismo que podemos hacer con jsp o lo mismo que podemos hacer con cualquier otro lenguaje de servidor entonces en primer lugar la demostración ha consistido en demostrar como no de js no se queda atrás Es decir si tú quieres montar una página web y quieres tener una parte de servidor la puedes hacer con no de js pero no dejs hace más cosas no dejs hace eh más de lo que pueden hacer los demás entonces voy a explicar el por qué Para empezar eh llegados A este punto voy aen voy a sacar un esquema voy a sacar un esquema y así explico mejor más visualmente qué es lo que quiero decir en el esquema tradicional en el paradigma tradicional de desarrollo de aplicaciones Especialmente cuando estas aplicaciones tienen una componente web vamos a configurar la página vale estas tiene el siguiente esquema Por una parte tenemos un momentín vale Por una parte tenemos html que es el lenguaje de la estructura esto no nos libramos esto es obligatorio html tiene que estar siempre sí o sí voy a pintarlo de azul porque el logo es azul pero solo por eso encima de html tenemos css que es la presentación y css va con html y es así y tiene que ser así voy a pintarlo de bueno de naranja o lo que sea Vale ahora en el paradigma tradicional aquí bajo d html seede poner un lenguaje de programación tal como por ejemplo php técnicamente pues también es azulete Y por último digamos que lo más normal es que pues php realice algún tipo de petición a una base de datos de tipo sql Voy a pintar un poquito la base de datos pongo el color del relleno el relleno lo quiero blanco por ejemplo o gris o lo que sea bien eh duplico Entonces duplico Bueno voy a dejarlo en cuatro discos vale Y esto representa la base de datos con lo cual php pues evidentemente lo que hace es que me estilo de trazo Quiero una flecha vale php escribe datos Y si es necesario php l datos Y hasta aquí esto está bien lo que acabamos de hacer técnicamente el ejercicio que acabamos de hacer hace esto mismo ya sea esto a ver un segundin ya sea esto mysql ya sea eso porque técnicamente también podemos Conectar a mongodb desde php de hecho técnicamente se puede conectar a mongodb desde prácticamente cualquier lenguaje lo que nosotros hemos hecho es hasta el momento es repetir este esquema pero en lugar de utilizar php hemos utilizado nodejs como lenguaje de servidor y no dejs De hecho en nuestro ejemplo literalmente se ha conectado a mysql y a mongodb y está bien y ha funcionado no podemos decir que no haya funcionado pero este esquema al final no nos proporciona eh un planteamiento seguro de Cara a futuro Vale entonces voy a exportar esto momento este esquema en propiedades de documento lo quiero res content vale Y esto lo voy a guardar en vamos a ver lo voy a guardar en no dejs 07 ejercicio full stack y voy a guardar Por aquí planteamiento tradicional vale planteamiento tradicional dibujo Ok y esto lo quiero exportar en vamos a ver lo quiero guardar como captura.png bien es un poco pequeño pero vamos a darle exporto vale reemplazar y ahí lo tenemos Vale pues si este es el planteamiento tradicional de desarrollo full stack el planteamiento moderno de desarrollo full stack es el siguiente que voy a explicar a continuación es más complejo pero a la vez es más seguro en ciertos casos el planteamiento consiste en lo siguiente Por una parte tengo H ML y css y siempre lo voy a tener estos dos van siempre en conjunto y no me libro de ellos ahora bien junto a estos dos junto a estos dos está la tecnología javascript que voy a pintar de amarillo Así que este texto lo voy a poner en negro y esto es lo que conocemos como el Front esto es las tecnologías que generan o que han generado el Front y ahora lo importante está en que no de js no genera dinámicamente estos elementos no los construye en cada petición si acaso los preconstruidas las páginas es algo que no vamos a hablar ahora mismo hablaremos yo creo más adelante sobre todo en la parte de angular de hecho esto que estoy explicando es un poco como el previo a angular Vale entonces javascript lo que hace de esta forma es que se comunica de ida y vuelta con no de js utilizando y ahora viene la cuestión utilizando el estándar js y de esta forma por lo tanto javascript envía información a node esto arriba esto abajo esto arriba y esto abajo y esto que estamos viendo Es la arquitectura de una aplicación full stack moderna aquí podemos cambiar no de js por cualquier otra cosa puede ser php puede ser asp puede ser jsp puede ser python puede ser lo que queramos absolutamente lo que queramos y aquí podemos cambiar la base de datos por lo que queramos puede ser mysql puede ser sqlite puede ser sql server puede ser Oracle puede ser o archivos xml vale puede ser lo que queramos o puede ser una combinación de lo que queramos no tiene por qué ser una cosa u otra en bases de datos pueden haber varias bases de datos a la vez pero sobre todo lo importante sobre todo lo más importante en este caso en este momento es especificar es indicar que eh la arquitectura de una aplicación consiste en separar completamente en la arquitectura de una aplicación moderna en separar completamente el cliente del servidor esta separación se produce de una forma completa y de una forma radical de tal forma que el servidor nunca toca al cliente y el cliente nunca toca al servidor de hecho gracias a esta arquitectura y gracias a este paradigma pues pueden haber personas que trabajan en el servidor y esas personas Nunca van a saber qué es lo que está ocurriendo en el cliente y puede saber y puede haber personas trabajando en el cliente y esas personas Nunca van a saber qué es lo que está ocurriendo en el servidor y esos dos equipos se comunican utilizando un formato de información común que el formato puede ser json puede ser xml puede ser txt puede ser csv puede ser lo que queramos se utiliza Jason porquees Claro técnicamente si me voy a conectar con javascript y me voy a conectar a no dejs que es javascript Y encima luego igual lo guardo en mongodb que es json que al final es javascript pues evidentemente parece que el jas es el formato más idóneo vale por tanto pongo esto aquí no como una obligación pero sí desde luego como una eh recomendación Así que esto que acabo de dibujar en pantalla eh es el Core del ejercicio que voy a desarrollar a continuación y sobre todo yo lo que creo Es que deberíais imprimir esta pantalla y esto lo deberíais imprimir y colgar en vuestra pared porque esto es el paradigma moderno lo que a día de hoy se considera moderno en cuanto a desarrollo de aplicaciones css html javascript sagrado cuando veamos angular veremos que aparecerá una tecnología por aquí adicional que se llamará typescript ya hablaremos de ello y luego en el servidor podemos cambiar no dejs por lo que queramos pero la comunicación de cliente servidor utilizando un intermediario como es Jason Esto es lo que a día de hoy se considera el estándar en desarrollo de aplicaciones full stack Bueno pues en base a esta a este paradigma de desarrollo voy a crear una aplicación que va a ser un chat y la razón por la cual voy a hacer un chat es porque eh es una aplicación que es difícil de hacer con php y con mysql por una razón muy sencilla si yo hago una aplicación de chat voy a guardar esto como eh voy a hacer ejemplo chat Eh php vale dibujo uno si yo hago una aplicación de chat con php y por ejemplo lo puedo hacer con esta metodología de desarrollo O sea no hay problema Por ello pero yo lo que tengo es que cada segundo tengo que hacer como mínimo una petición de lectura de Dime lo que hay en la base de datos dime qué es lo que la gente ha transmitido digamos pero claro eso quiere decir que yo cada segundo tengo que hacer una petición de lectura a la base de datos lo cual quiere decir que una petición por segundo un momento vale una petición por segundo es igual a vamos a duplicar es igual a 60 peticiones por minuto pero eso es un solo cliente del chat el problema está en que si nos vamos al servidor si suponemos por ejemplo que hay No lo sé 20 usuarios en el chat imaginemos una red social imaginemos un Facebook imaginemos un WhatsApp imaginemos un yo que sé vale o sea si por ejemplo hay 100 usuarios y 100 usuarios para una red social o para una aplicación de mensajería no es mucho en absoluto es más bien muy poco pues claro el servidor está recibiendo 100 peticiones por segundo pero el servidor está recibiendo 6000 peticiones por minuto imaginémonos qué es lo que ocurre cuando un servidor mysql recibe 6000 peticiones por minuto un servid mysql no está pensado para eso luego aparte es que mysql al final es un servidor que a menos que trabajemos con una tabla de tipo Memory el resto de tablas se guardan como un archivo en el disco lo cual quiere decir que son 6000 lecturas por minuto del disco pero es que si esto lo multiplicamos por hora porque esto es solo un minuto si el chat está una hora abierto entonces son 36 6000 peticiones es decir una barbaridad de peticiones que hace que al final Pues un sistema mysql colapse Por qué Pues porque mysql no está pensado para eso no está pensado para ese tipo de aplicaciones claro qué hacemos si yo trabajo con php pues no puedo hacerlo de otra forma porque php al igual que otros lenguajes de servidor es un lenguaje de tipo stateless es de ir sin estado php no guarda el estado lo más parecido que tenemos a guardar estados son variables de sesión y tampoco es una herramienta muy efectiva en este caso así que php cada vez que se ejecuta arranca el Script ejecuta el contenido cierra el Script y ya está Vale y se cierra y se olvida de todo lo bueno que tiene node Lo bueno que tiene node en este caso ejemplo chat node es que node es una tecnología con Estados node no arranca carga la página y se sale y se olvida de ti sino que node mantiene el estado en todo momento Y eso quiere decir que técnicamente puedo hacer una aplicación de chat sin depender de la base de datos sin depender de la base de datos quiere decir que si quiero base de datos puedo utilizarla nadie me lo está prohibiendo pero no dependo de la base de datos como ocurre con php Así que vamos a ver como no dejs no solo es que puede mantener un sistema de chat sino que es que de hecho en esa tarea es un ecosistema es un entorno de desarrollo que presenta muchas ventajas con respecto a otras tecnologías de desarrollo en el servidor y este es el proyecto que vamos a hacer a continuación Así que vamos a por ello eh voy a guardar Por aquí y en primer lugar voy a hacer lo siguiente vamos a ver voy a intentar hacer este proyecto lo más sencillo que pueda que no va a ser demasiado fácil pero bueno vale 005 eh proyecto chat vale Y aquí voy a hacer lo siguiente en proyecto chat voy a crear un nuevo archivo llamado servidor js y luego voy a crear un nuevo archivo llamado cliente html o por decirlo de otra forma esto puede ser el Front html y el servidor puede ser b. html por decirlo de alguna forma bien con lo cual ahora a continuación voy a hacer lo siguiente en el Front voy a hacer el chat más sencillo que pueda hacer para no distraer la atención para no liarnos con el javascript y este tipo de cosas vale Así que vamos a programar dentro de que la web sea estándar decir cumpla con los estándares de validación pero vamos a intentar que el código sea lo más sencillo posible Head Body y en el Head voy a hacer title chat ya está así de sencillo y eh meta charset es igual a utf8 Por cierto que si nos ponemos en plan puristas os diré que para hacer chats en no dejs existe un complemento que se llama socket.io que es para implementar una cosa que se llaman sockets Vale pero no quiero empezar con sockets ahora es decir antes como yo siempre digo Antes de correr hay que aprender a andar vale o sea antes de meternos con sockets si eventualmente llegamos a sockets pues vamos a hacer primero un chat normal con no dejs y luego eventualmente pues ya aprendemos cosas más avanzadas como sockets bien entonces vengo por aquí y eh A ver lo que voy a hacer en este caso vamos a ver voy a hacer un Main directamente dentro del Main voy a hacer un section que son los mensajes y voy a hacer aquí un form no voy a hacer otro section y voy a hacer un input type text y eh Y ya está y ID es igual a eh mensaje Okay bien Vamos a verlo mensajes vale okay Y ya y básicamente bueno y vamos al Back y vamos al back vamos a ver node plantillas servidor voy a una plantilla de servidor de ejercicios anteriores Y voy a empezar aquí a vaciar vamos a ver query String sí que lo quiero URL lo quiero archivos no lo quiero create server sí eh ruta completa bueno read file cabecera No quiero Esto vale por tanto pie de página fuera fabic con nada fecha nada vale Y ahora quiero el principal y quiero eh vamos a ver recibe puedo lo vacío voy a dejarme el archivo más básico posible recibe y envía y todo el resto de casos nada Incluso el default igual lo quito y todo vale Okay esto dónde se cierra Ok vale parece que todo bien Esto de momento no esto no y voy a hacer console pun log principal console.log recibe y console.log envía y así como digo vamos a intentar que el código del ejercicio se mantenga lo más sencillo posible bien Vamos a ver 00 eh cd7 CD 005 vale No de servidor no de pack Vale entonces me voy a local Host página inicial principal vale me voy a envía me voy a recibe y recibe vale veo aquí que estoy atrapando correctamente los tres estados de este servidor ahora este servidor vamos a verlo dónde estás aquí y documentos giub Uh node ec full stack vale proyecto chat sí vale estructura inicial paro intento cancelo Bueno pues da igual vale venga 06 y este 06 va a ser Mostrar página principal así que pues ahora sí al Mostrar la página principal en el servidor inicial lo que voy a hacer aquí en el servidor es el archivo creo que lo he cogido inicio html cojo esto creo que el archivo lo he quitado archivos re file vale archivos efectivamente parece que lo he quitado lo cual voy a volverlo a importar Okay Vale y eh paro CD 006 no de Back Vale entonces hago así Qué ha pasado Bueno vamos a ver chunk argument Ah sí debo cargar Front html vale cargo de nuevo aquí mensajes Ok Aquí está el chat esto es como digo es la página principal Por cierto esto es resend no. y mensajes y ya está vale Así que cada vez que yo escriba un mensaje lo que quiero es envi al servidor para ello voy a hacer lo siguiente vengo aquí a javascript vamos a ver vale Y voy a copiar y 007 enviar mensajes con fetch Y entonces esto es ID mensaje vale y pongo un Script lo voy a poner todo en el Front para crear cuantos menos archivos mejor y a continuación vamos a ver vale Y a continuación voy a hacer lo siguiente voy a decir cuando document Element by ID mensaje no Windows onload es igual a function o sabes qué voy a esto y me lo muevo aquí abajo y ya está Vale mensaje punto onpress on Ke K Down un mín vamos a ver vale down es igual a fun e y digo Si e punto K es igual a enter en ese caso console.log has pulsado enter vamos a Ok vale cd00 cd08 dónde estoy cd07 ostras a ver Front no esto no va Aquí Script esto aquí y en el Front aquí ostras aquí pego a ver vale entonces eh No de Back vamos a verlo dónde estoy CD 007 no de Back recargo Y si hago así y pulso enter si todo va bien dirá has pulsado enter vale con lo cual ahora a continuación vengo y digo fetch vamos a ver bar mensaje es igual a dis value fetch envía donde mensaje es igual a encode Uri de mensaje con lo cual si todo va bien lo que va a hacer en este caso es enviar a envía y qué es lo que hace envía lo que hace envía debe ser atrapar ese parámetro de la URL vamos a comprobar si realmente lo atrapa o no vamos a ver para esto tengo por aquí en no de js en el formulario no el no de js leer rutas de URL leer parámetros de URL Eso es lo que quiero Vale entonces parámetros es esto de aquí Así que Back parámetros es esto de aquí ruta que ruta Ah require URL vale ruta Ok y ahora console punto log parámetros mensaje vamos a ver si esto es cierto vamos a ver si esto funciona cierro recargo y digo Hola le doy a enter dice Has pulsado enter vamos a ver pero aquí no se ha enviado a ver si estoy en el sitio correcto a envía console.log envía he pulsado enter fetch envía Ah sí buo pero no fetch mensaje voy a hacer una cosa voy a quitar esto de momento cargo un servidor cargo aquí Ahí está envía vale envía y undefine entonces digo mensaje es igual a Hola hago así recargo tiki ti le doy a enter vale Y parece que si le pongo un mensaje no le gusta vale vamos a ver hago así Y si hago así he pulsado enter envía undefine vale me voy a envía no hace nada Okay hacer res.en nada vale envía no hace nada okay Y si digo mensajes igual a Hola vale a ver envía undefine perfecto leer parámetros ruta pun pars vamos a probar eso CD 002 no de vale interesante no de y Okay Ah vale and nombre es igual a José Vicente tu nombre es José Vicente vale bien en este caso ya sé lo que falla vale Okay Claro en este caso estoy haciendo un switch a una petición completamente eh completamente estática es decir si envía le pongo un interrogante ya no es envía Vale entonces lo que puedo hacer de esta forma es pasar los parámetros por post para eso Por ejemplo puedo hacer lo siguiente en My sql no dónde lo he hecho esto Yo anteriormente formulario de contacto servidor vale Y entonces en procesa Data Okay en contacto le digo esto Claro pero no estoy no lo estoy enviando por post lo estoy enviando como fetch vale puedo hacer lo siguiente vamos a ver If rec URL es igual a esto en ese caso pasa esto Else If rec URL es igual a recibe en ese caso pasa esto y Else If y ahora viene la cuestión y Esto va aquí y este break no va Aquí rec URL javascript check If contains includes no strp dónde estás Este repos no quiero includes aunque bien Es cierto que no de js creo que ya lleva creo que ya Lleva esto correcto entonces includes envía vamos a verlo así vamos a ver por recordar que no dejs sí que implementa correctamente este includes vamos a verlo dónde tengo esto parámetros no vuelvo 005 vale No de Back okay principal es principal pero está en un bucle vamos a ver esto acaba aquí y esto acaba aquí y esto qué es esto acaba no Esto está mal esto acaba aquí vale paramos recargamos local Host mm no está saltando pero vamos a quitar esto un momento vale copiamos paramos principal pero aunque dice principal Y si vengo aquí vo a deshacer esto le doy a recibe aquí dice recibe le doy a envía aquí dice envía es igual a Hola ahí ya no lo envía pero sobre todo es que se queda frito en todos los casos principal ejecuta principal archivo read file es Front lo tengo res.end voy a decir restr y aquí al final res.end nada paramos el servidor arrancamos el servidor estoy en la carpeta correcta No ese es el problema CD 007 es ese ahora estoy en la carpeta correcta No de Back recargamos vale principal no saca nada pero bueno recibe envía undefine y envía Hola Vale ahora sí lo único es que esto no me está dando nada principal cuando de sería restr Front html no devuelve nada lo cual es de momento extraño Pero vale Y ahora por lo menos le digo envía Perdón envía and mensaje es igual a Hola y mensaje es igual a Hola mensaje Este es un mensaje Este es un mensaje vale Ya lo tenemos funcionando nos falta saber qué ocurre Aquí voy a poner console log res recur a ver qué está lanzando eso vale cargo la página principal y me carga principal me carga esto de hecho me carga principal dice principal Lo único es que archivos rif file no me está sacando el archivo es lo único que no me cuadra vale vamos a asegurar de que todo está bien okay a una mala puedo poner aquí el código no me hace ilusión pero puedo poner ahí el código vale Voy a ver un momento A ver por qué puede ser bueno pues ya está lo único que he hecho es poner esta línea de If r thr r es decir si hay un error dímelo y el programa ha dicho Vale pues no hay ningún error y aquí tienes tu código en fin raro bien si yo aquí pongo Hola Y le doy a enter vale Ahí de momento pone Hola no nos preocupamos porque vamos a ver aquí en el Front aquí envía y mensaje es igual a más mensaje ok ent paro el servidor recargo aquí pongo Hola y entonces dice hola y si digo Este es un mensaje Dice Este es un mensaje y si digo Este es otro mensaje digo Este es otro mensaje Esto es lo que ya empieza a tener muy buen aspecto y ahora a continuación lo que quiero hacer es una cola de mensajes por tanto ahora que veo que puedo recibir mensajes lo que quiero es hacer un array de mensajes quiero hacer un array de mensajes para hacer un array de mensajes voy a hacer algo tan sencillo como lo siguiente voy a decir que bar mensajes es igual a Ray Ya está y a continuación voy a decir lo siguiente voy a decir que vamos a ver eh mensajes vale Aquí voy a decir que mensajes punto Push era una cosa muy divertida Y es que por qué no puedo utilizar Jason y puedo decir bar fecha es igual a New date y puedo decir eh fecha es vamos a ver bueno a ver fecha cuidado fecha Mi fecha es mi fecha punto pues get full year más Mi fecha voy a ponerlo abajo porque si no Esto va a ser un poco lío Vale mi fecha get full year get month get date get hours get minutes y vale Y esto es dos puntos y esto es aquí y ahora mensaje dos puntos y parámetros punto mensaje y ahora al final voy a hacer con Table mensajes y ahora es donde la cosa se empieza a poner interesante entro en el recargo vale no se puede tener Non js module files vale Ah sí no de Back Ahora sí bien y digo Hola enter y ahora aquí dice Bueno get full year y dice hola Uy madre mía porque yo lo que quería era A ver pues mira A ver eh bar fecha formateada es igual a esto de aquí a esto de aquí y esto es fecha formateada vale vamos a verlo ahora paro recargo digo Hola wow no a ver voy a hacer un console pun log paro recargo Hola fecha es no vamos a ver Mi fecha get date más es como que se me ha olvidado algo get date get minutes digo Hola Mira voy a hacer una cosa javascript date get apoc y ya está y así acabamos antes date Now es mi fecha punto Now date Now vale fecha formateada vamos a verlo ejecuto recargo Hola bien y qué me dice mi fecha pun Now caray pues date.now date getap date Now vale recargo Hola Ahora sí vale fecha pero yo ahora vengo por aquí y digo otro mensaje y otro más y vemos como lo que estoy haciendo es crear una Ray y en cada uno de los elementos de la Ray hay un Jason y eso lo estoy haciendo desde un único usuario pero la buena noticia es que lo puedo hacer desde tantos usuarios como quiera El caso es que el caso es que lo que a continuación voy a hacer es devolver los mensajes en pantalla por tanto ya tengo el ar de menajes Ahora quiero devolver a ray en pantalla y con esto lo que va a ocurrir al devolver a ray en pantalla es que en el Front voy a decir lo siguiente set bar temporizador es igual a set Time out recibe en 1000 fun recibe es algo Clear Time out temporizador y temporizador de nuevo el ble es decir quiero recibir mensajes y entonces lo que voy a hacer console log recibo mensajes paro bajo entro recargo en entro recibo mensajes una vez cada segundo estoy recibiendo mensajes y ahora a continuación y ahora a continuación y ahora viene lo bueno Vale ahora voy a hacer un fech fetch recibe den ejecuta den me lo das a ver javascript fetch den vamos a uno de estos no bueno este a ver uno más sencillo que no tenga aight A ver javascript Mira un momento vale then fun response es igual o return resp son y por tanto función response console.log response Qué hace esto Bueno pues lo que hace esto básicamente simplemente es que lo que quiero que me devuelva el back en recibe quiero que me devuelva los datos Así que a ver un segundo Rest wr Head esto lo quiero Aquí y ahora Rest Wi Head aquí es texto barra js y res.end y quiero los mensajes paramos arrancamos vamos a verlo digo Hola Bien Qué ha pasado aquí chunk instance vale un segundin un momento a ver vale al recibir no falla es al enviar cuando falla vale file to fetch Ah y de hecho ha fallado vale Okay file to fetch Qué dice invalid arch type en Okay Vale pero esto no vamos a ver en 19 res.end mensajes A ver pues voy a poner Hola is not valid J son Ahí estamos muy bien y si ahora digo Ah espérate claro res.end vale voy a decir mensaje es igual a Hola Uy a ver Bueno pues res.end mensajes igual a Hola okay vale expected property name on tal vale para hacer este jas este tiene que estar así vale mensaje hola Ya estoy enviando un mensaje ahora a continuación lo que quiero es convertir los mensajes en jas Vale entonces vamos a ver javascript array to json y digo js stringify y digo js stringify de mensajes paro recargo Y si todo va bien y si todo va bien A ver que recargue Vale tengo aquí unos mensajes pero si yo digo Hola Entonces por aquí aparecerá fecha y Hola Y si yo digo nuevo mensaje recargo Y entonces aquí abajo aparecerá nuevo mensaje lo cual quiere decir que ya estoy cargando correctamente los mensajes parece que no pero ya casi he hecho un chat para hacer esto bien Vamos a ver voy a devolver array en pantalla bueno Espera voy a devolver primero el array que sea cierto que lo devuelvo en pantalla me voy al Front Y entonces digo for bar I es ig 0 Y es menor que response length y+ más document.get Element by ID mensajes punto innerhtml es igual a nada entonces a continuación voy a decir más igual a response de I punto mensaje y le encadenó un br paro arranco digo Hola Y ahí aparece Hola qué tal estás Y ahí aparece qué tal estás Y esto empieza a funcionar como digo ahora pondré un poquito de estilo ahora quitaré los consoles pero básicamente ya lo empezamos a tener en marcha otra cosa que quiero hacer es borrar vamos a ver cada vez que pulso enter lo que quiero es document getelement byid mensaje punto value es igual a nada Es decir cada vez que por ejemplo pues quiero que se borre cóm estás Este es un mensaje de prueba vale veo ahí como En definitiva tengo el chat que empieza a correr correctamente y ahora veremos que este chat automáticamente es multiusuario sin que yo haga nada pero antes de ello como decía voy a darle un poco de estilo y para darle un poco de estilo pego un poco de estilo y para darle como digo un poco de estilo Vale ahora me voy al Front voy a dar un poquito de estilo por aquí y voy a decir mensajes es H 90 por A ver por qué mensajes Ah sí espera paro CD 010 no de Back Vale ahora por qué mensajes no tiene el 90 por de altura Pos relative vale absolute Ah sí claro html com Body es with 100% y H 100% Vale ahora esto es relative Okay mensajes voy a decir hola Ah quién está Vale Main a ver ahora sí venga y ahora simplemente lo que voy a hacer es que pues voy a decir uno 2 3 cu c pongo mensajes y al poner mensajes lo que quiero comprobar lo que quiero demostrar es que necesito que el mensajes tenga una propiedad overflow y scroll ahí Dónde se me ha ido Ah parece que es más grande vale with 80% Ahí está Vale perfecto y scroll top vamos a decir por aquí que cada vez que hago esto recibe vale mensajes punto scrolltop es igual a 10.000 millones de trillones de billones vale con lo cual digo Hola Esto es una prueba esto es otra prueba esto es otro mensaje y vemos que ya tengo un servidor de chat pero lo importante de todo esto es que hemos creado el chat y no nos hemos dado cuenta de que este chat automáticamente ya es multiusuario con esto lo que quiero decir es que yo vengo por aquí y pego entonces aquí yo vengo y digo yo soy el segundo usuario y aparece aquí y te digo Hola desde la ventana número dos y te digo Hola desde la ventana número dos y yo soy el usuario número uno y yo soy el usuario número uno y te digo Hola desde la ventana número uno y te digo Hola desde la ventana Número Uno Vale Esto es lo que está ocurriendo Y por supuesto ahora a continuación pues podemos darle un poquito más de estilo vamos a ver y estilo para los mensajes y podemos hacer Pues que los mensajes sean un poquito más bonitos vamos a verlos estilo para los mensajes vale quiero que esto de aquí sea una etiqueta así de tipo article y esto de aquí sea el cierre del artile con lo cual ahora en el css voy a decir que font family es igual a sanif y voy a decir que cada uno de los articles Pues tendrá un with del 100% un padding de 20 píxeles un boxing order Box un margin bottom de 10 píxeles un background rgb de 220 220220 un Border radius de 10 píxeles y vamos a probarlo CD 011 no de Back vengo por aquí Hola enter hola un error Vale qué error Qué pasa ha ocurrido un error eh can red properties a ver voy a recargar u Hola respons vale al 48 de4 cómo es posible que esto de repente falle voy a parar respon claro no tiene nada vale Voy a hacer lo siguiente en el Back voy a decirle que mensajes es igual a esto a fecha es igual a nada and eh dónde estás and mensaje es igual a nada porque me da que el error es ese response no unidentified unexpected identifier respon en la línea 48 ostras en la línea 48 Ah fantástico me falta un signo más muy bien vale pues pongo Hola Esto es una prueba Este es un mensaje Este es otro mensaje y por supuesto si ahora abro otro navegador con esto mismo Pues tengo exactamente lo mismo soy yo desde otra ventana y compruebo Y esta es otra prueba y de esta forma como vemos pues hemos hecho un chat no hemos tocado ninguna base de datos estamos trabajando con un servidor que es stateless Perdón que tiene estado que guarda estado y esto es lo que yo creo que no dejs en gran medida puede hacer por nosotros es decir lo que puede hacer es proponernos permitirnos crear proyectos de una forma terriblemente sencilla guardándolo en un array ese array se comparte entre diferentes ventanas y simplifica una de una forma muy grande las cosas con respecto al desarrollo en otras tecnologías Como por ejemplo php