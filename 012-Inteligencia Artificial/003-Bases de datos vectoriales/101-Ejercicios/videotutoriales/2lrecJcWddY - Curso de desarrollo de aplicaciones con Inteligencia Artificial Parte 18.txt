anteriormente hemos hablado de la visión estereoscópica ahora mismo estamos hablando de la detección del movimiento entonces cómo podríamos hacer el reconocimiento facial utilizando la percepción de la tridimensionalidad a través de una webcam bueno pues podríamos hacerlo de la siguiente forma una webcam no es estéreo una webcam tiene un único ojo pero si nos fijamos cuando hemos trabajado con visión en estéreo básicamente lo que hemos hecho es comparar un ojo con otro quizás lo que podríamos hacer en este caso es comparar un fotograma contra otro vamos a verlo a continuación vamos a ver quiero hacer una variación es curioso porque localhost e inteligencia artificial y quiero el ejercicio 1 entonces voy a hacer así index 93 o sea por qué entonces ejercicio 1 pero quiero clonar oficial el ejercicio 1 lo quiero crear para que se llame ejercicio 5 vamos a comprobar como ahora aparece como ejercicio 5 y ahora en lugar de dos imágenes lo que voy a hacer es dos fotogramas del mismo vídeo lo voy a tocar un poco y lo voy a decir cómo puedo una foto que desde aquí pues bueno yo creo que puedo hacerlo con quick time en plan a lo bestia nueva grabación de vídeo se activara la cámara eso espero vale y vamos a ver vamos a verlo a continuación no puedo fotos lo que sé que puedo hacer esto fueron es un giro un poco alavesa acaba de hacer dos fotos en estas dos fotos girón poco la cabeza volverlo a hacer vale vamos a ver lo cierro por allí ahora me voy al king voy a abrir estas dos fotos son como que he hecho como dos capturas 1145 esto es malo ok y ahí está la diferencia entre las fotos copio una foto el apego en la otra realmente no hay nada que cuadrar la verdad entonces voy a recortar aquí recortó 11 y ya que esto lo pasó a 512 por 512 y entonces no pasa nada y esto lo voy a guardar como izquierdo y esto lo voy a guardar como derecho en este caso el reconocimiento de profundidad va a ser un poco al contrario y es que lo que está más cerca a aparecer qué es lo que está más lejos pero no pasa nada derecho izquierdo ejercicio 5 imágenes el derecho izquierdo vale ya muy bien fantástico reemplazar como es el ejercicio 5 vamos allá vamos a recargar localhost de licencia artificial ejercicio 5 me he quedado en qué versión index 9 vamos a verlo en la recarga vale algo ha pasado así es que es izquierdo pec y derecho pk papelera derecho pero vamos ahora vamos allá y si todo va bien para lo que va a hacer es que si nos fijamos lo que está alrededor lo está detectando como blanco y la propia cara la está detectando como negra entonces lo que quiero en este caso es el contrario para lo que quiero es que lo que se mueva realmente ahí vemos qué el centro de la cara es lo que más está moviendo ahora cuando acabe con la cara vemos que el rededor no se mueve a ver por sí me parecía como que estuviera detectando el farolillo este por esto es curioso e a ver momento ejercicio 5 vale es efe derecho que en principio es correcto pero pues lo que necesito ahora mismo la parte de ella al fondo que es claro no está pillando miel correcto pero lo que necesito ahora mismo es invertir un poco la situación vamos a este ejercicio lo voy a convertir en ejercicio 10 y el ejercicio 10 cuando pinto phil recto en fil style voy a hacer esto para hacer esto y yo voy a hacer esto de esta forma recargo ahora voy a ejercicio 10 y en principio va a hacer lo contrario principio ahora lo que hará es dejar únicamente la cara ahora también lo que quiero es a distancia porque una cosa es que dar componente es igual a esto y así pongo componente lo toco una sola vez entonces esto es componente y esto lo voy a multiplicar por 10 para empezar para que no me dé colores muy blancos exageradamente blancos y ahí reconozca un poco la cara con la que estoy trabajando bueno la idea con todo esto es que evidentemente a continuación vamos a mezclar ejercicios porque lo que quiero es trabajar únicamente con aquellos píxeles que cambian que se mueven no quiero que me reconozca el fondo sino que lo que quiero es que el sistema reconozca únicamente aquellos píxeles como hemos hecho en ejercicio anterior que se estén moviendo de esta forma digamos que conseguiremos optimizar podría hacer la demostración con el gym otra cosa que voy a necesitar es que evidentemente este software sea más rápido más potente es decir voy a regresar a utilizar los cálculos porque por ejemplo para calcular una imagen vemos cómo le cuesta bastante y bueno en definitiva otra cosa que podría hacer es que en base a los píxeles atrapados y en base a la profundidad en lo que puedo hacer es generar un modelo tridimensional si tengo la profundidad y tengo el color puedo generar un modelo de una cara vamos a verlo primero lo que estoy haciendo es comprobar que realmente detecta correctamente el movimiento de los píxeles me está dando la impresión de que me ha detectado el bigote fenomenalmente bien y parece que tengo también las cuencas de los ojos entonces bueno y la idea es que el software está detectando correctamente en apariencia a los rasgos faciales sabes que tengo esto es cuando por ejemplo puedo utilizar toda esta información para y decirle al sistema cuando tiene que calcular y cuando no tiene que calcular más que nada para que no pierda tiempo calculando cosas que no tiene ningún sentido que calculé para esto vamos a hacer el siguiente vídeo una demostración en la cual voy a decirle al sistema que solo calculé aquello que se está moviendo en pantalla para conseguir esto de momento lo que voy a hacer es tocar esto con lo siguiente vamos a ver de momento esta imagen por aquí vale voy a tocarlas voy a el lazo voy a recortar únicamente el trozo que me interesaba eliminar los auriculares con los que estoy grabando lo estoy recordando un poco la bestia lo sé y eliminó el vino me quedo únicamente con ese trozo me quedo sin orejas pero bueno no pasa nada ahora me vengo a esta otra imagen vuelvo a recordar podría recordar lo mismo pero bueno voy a seleccionar nada recortó de hacerlo hacer otros recortes diferente aunque si esto podría recortar lo mismo tampoco pasaría nada pero vale ok clic recortó el corto y ahora no selecciona nada experto me voy a ir a alguno con derechos es nuestra izquierda pk era igual realmente cuidado y está mal escrito izquierdo pk esto es derecho pk reemplazar al reemplazo y ahora voy a decirle al sistema es un elemento es transparente no lo tenga en cuenta porque el ejercicio anterior hemos trabajado con elementos transparentes así que el escritorio ojo izquierdo y derecho no tengo en imágenes reemplazo vale y ahora en el código versión del ejercicio número 11 qué hacer con el sistema es decir lo siguiente lo que voy a hacer es que solo calculen en el caso de que el pixel tenga opacidad vamos a verlo calcula vale y ahora píxel a píxel ahí está temporal suma un momento y ahora digo lo siguiente en el dtm y por ejemplo en alguno de los dos realmente me da igual para cada píxel e amplitud cuadrado sí esto es tal estar aquí estar allí es trabajo vamos a ver pero esto me cuadra estos ejes 2 y 2 511 y 512 fuego doble estoy buscando aquí el punto en el que va píxel a píxel esto es lo que quiero rayet if dime punto y mide 3 es decir la transparencia vale es igual a cero o es menor que 200 tiene poca transparencia en este caso voy a hacer todo esto entonces esto va aquí y esto va a ver esto afuera y este donde acaba todo esto es para volver vale x esto es igual al radio esta nada y estoy con lo cual ahora desbloqueo esto dónde está el dim y dime qué vale y vamos a probarlo esto lo que va a hacer es que si teóricamente si no se encuentra un píxel ni se molesta en calcular vale vamos a presión la estación al contrario fantástico pues al revés y si me es menor es mayor que 200 correcto vale ahora fijémonos como lo que está haciendo es únicamente calcular lo que corresponde y no perder el tiempo calculando cosas que no tocan de esta forma ahora así lo que estamos intentando hacer es general bueno un modelo de profundidad que luego derivará en un modelo tridimensional vamos a verlo hay algún elemento todavía por ahí que coge la información pero bueno no pasa nada y ahora una vez que tenga esto evidentemente lo que quiero hacer es aplicarlo al ejercicio anterior al ejercicio 4 en el que somos capaces de aislar objetos en pantalla y somos capaces de bueno calcular un fotograma sobre otro y bueno esto sería para dejarlo un poco calculando ahora evidentemente el problema que vamos a tener es que en el ejercicio anterior la captura de fotogramas es de pues eso no sé dos fotogramas por segundo cinco fotogramas por segundo en cambio en este ejercicio un cálculo completo pues cuesta a tiempo cuesta algo de tiempo entonces hay una cuestión de optimización evidentemente inevitablemente hay una cuestión en la que tenemos que ver cómo hacer que el software sea de tiempo real en el sentido de que cuando la cara se mueva pues guarde los cálculos pero pueda continuar más allá pueda continuar más adelante voy a parar el vídeo y tenemos ya un primer software en el cual podemos crear una especie de cara en 3-d y a partir de ahí y a partir de ahí lo que vamos a hacer es combinar los dos ejercicios voy a hacer un pequeño juguete y bueno para hacer este juguete voy a guardar me esta imagen vamos a ver me voy a guardar en aplicaciones en mamá en hd dukes en vigencia artificial ejercicio 5 img y voy a guardar esto como feta punto png vale entonces dentro del proyecto voy a crear un nuevo archivo lo voy a guardar como visualizador estamos en visualizador punto html y voy a hacer lo siguiente va a empezar un ejercicio nuevo que realmente es un ejercicio subejercicio de lo anterior se puede aplicar a muchos otros por cierto y es un visualizador de imágenes 3-d un poco para ver qué es lo que vería el programa para que estamos haciendo todo esto va a ser un gambas con es igual a color wyss es igual a 512 hyde es igual a 512 píxeles este excepto y ahora algún script voy a necesitar una librería llamada jquery pajín a la foquita área aunque sigue calculando y así ahorramos recursos y bajar la librería jquery para automatizar un montón de cosas realmente abajo y esto lo tiene un ejercicio 5 me copió el nombre y así aquí un script src que es igual a esto vale ahora lo que voy a hacer es que voy a crear un canvas más resultado y en resultado voy a decir que cuando el resultado punto mangos move voy a ejecutar una función en la que voy a seleccionar algo de contenido entonces quiero comprobar si esto está funcionando asiste usted elige visualizador punto html ok con solo voy a poner un pequeño estilo dónde canvas border un píxel sólido gray y ahora cuando paso el ratón por aquí vemos como solo cuando lo paso por ahí el sistema dice ok esto lo que va a hacer es que yo ahora puedo venir por aquí y puedo decir lo siguiente vale con texto color es igual a document.getelementbyid color punto de contexto 2 d con texto zeta es igual documento efe con de elgeta y ahora hago lo siguiente para datos color es igual al contexto color e getty image data desde 00 hasta 512 nuestros z es igual a contexto z 1 y me trata desde 0,0 hasta 512 como a y vamos allá y ahora lo que quiero es lo siguiente si averiguar la posición y la z entonces consuele punto log y punto page x con más punto page ingeniera recargo cuidado que pasó faltó más vale entonces me dice de 500 y pico ahí me dice 6 530 entonces lo que necesito es el movimiento elemento que me da la e punto nada pues x esto es un top 1 punto efe betis - esto y esto es p y this punto la distancia a la parte de arriba vale vamos a verlo me falta un paréntesis aquí ahora algo así ok left creo que no es una función sino que es una propiedad es con sol el ojo page x lefrak notarán ver pues vamos a jquery d posición muy bien también pro sitio en punto left vale position punto left por sitio top muy bien vamos allá ok ahora esto me dice vale y ahora quiero que cuando oí 51 ahora creo que cuando el píxel está en el medio sea 0 entonces esto es 256 y de esta forma cuando el píxel esté en el medio será 0 y cuando se vaya yendo pues evidentemente se irá viendo hacia unos sitios u otros muy bien vamos allá ahora function dibuja time out dibuja un segundo esto realmente bueno sí dibuja y ahora digo la imagen en color es igual a new image imagen en color punto src es igual dónde estás visualizador img pues a izquierdo por ejemplo ing esquerra pk punto penal imagen zeta como llamado a esto zeta vale entonces lo que voy a hacer es contexto color punto draw email quiero dibujar imagen color en 0,0 y contexto z trimage quiero dibujar imagen zeta como 0,0 y entonces hago esto y actualizó los contextos y ahora recargo y ahora lo que quiero es que al pasar el pincel por aquí lo que el sistema haga sea mover poco a poco los píxeles vamos a por ello cada vez que ejecute de esto quiero ejecutar la dibuja y la función que dibuja vamos a verla en el siguiente vídeo ahora a continuación la función de dibuja lo que va a hacer es todos y cada uno de los píxeles y entonces la función redibuja va a dos parámetros qué son estos dos de aquí ni más ni menos estoy aquí el primero es la equis el segundo es la y mark x como bueno directamente x como genera así que se dibuja y agregó form bar y es igual a 0 es menor que a datos color punto data punto link y más igual a 4 realmente y ahora para cada uno de los píxeles de color lo que quiero es re dibujar los elementos y ahora vamos a ver quiero cada píxel y quiero mover lo quiere moverlo hacia arriba o hacia abajo según lo que haga falta nosotros hacerlo con canvas o con elementos estoy pensando momento estoy pensando a ver con qué me conviene max qué puedo hacer con miles de pequeños dips o lo puedo hacer en un canvas con dips es más sencillo con canvas es más eficiente así que es la eterna pelea entre sencillez o eficiencia a ver el momento lo piense voy a probar a hacerlo con canvas por cierto que tengo que decir qué bar contexto resultado es igual a documento punto get by resultado punto get contexto 2 d y dar datos resultados es igual contexto resultado getty image data de 0 a 512 ahora el resultado estoy cogiendo los datos resultados y ahora digo datos resultados punto dato es igual a datos color gato rey pero es una cosa pero bueno ay al desplazamiento de 15 es igual a equis bar desplazamiento y es igual a y entonces vengo por aquí y digo esto es más desplazamiento de x 4 x datos z un trato de cero pero nada vale más aunque llegarían por 512 x 4 por datos z a ver cuidado a ver esto lo que está haciendo si el correcto punto nata de vale porque yo creo que ella y lo mismo por aquí 1 2 d + 1 y 2 y cada vez que hago esto digo datos resultado es igual a datos color y ahora en contexto resultado punto put email data de datos resultado 0 vamos a verlo recargamos bien y si hacemos así vale empezamos a dibujar cosas no es lo que quería pero voy a hacer lo siguiente contexto resultado punto clear recta es de 0,0 a 512 ok momento nueva sí datos color aquí esto aquí y si datos color punto data de realmente esto sí más 3 es igual a cero o mejor dicho vamos a verlo ahí está empezando a poner no sé por qué no se ve el color porque solo se ve el color aquí extraño no se mueve realmente nada vamos a verlos así que parece que le cuesta calcular pero de alguna forma sí que responde voy a hacer una variación esto es visualizador 2 esto luego ya copiar y pegar para comprobar que funciona esto va a ser los 55 de momentos 0 pero ok visualizador 2 porque yo entiendo ahora esto es igual a 2 color punto data él paso 1 las dos pero veámoslo ahora cuando eso vale entonces la pregunta es por qué no porque no funcionaron quizás esto de aquí vamos a verlo para que ese desfase x es igual a v x datos z punto data y esta es la cuestión él bart es fácil x es igual a b y por datos z punto data esto es lo que quiero escoger el color que haya a continuación más despacio desfase de x claro esto vamos a partir por 10 porque igual es demasiado esto lo redondeo debe x 4 y oh en trozos por cuatro que es la anchura pues esto en principio debería funcionar pero bueno ahora veremos más uno probemos lo vale hasta el fandi find no está definido ok este diario creo que es el que ha causado el problema aquí dice que no está definido cuidado por esto debe y no está definido vive y sale negro aunque el sistema no era global venga y perfecta intento hacer algo no sale todavía pero está claro en el sistema y está intentando hacer algo por lo menos empieza a salir partido 100 esto empiezas a leer casi salía los seis partidos que aparecen muy bien vamos a ver bueno voy a eliminar la red contexto resultado punto direct de redibujado y dentro de poco saldrá por aquí cuando él quiera el resultado pero bueno la idea es que podremos ver la tridimensionalidad a la media de un agujero negro hay que decirlo pero en cuanto esto salga podemos ver la tridimensionalidad voy a probarlo