o la azul pero entonces bueno en este caso os diría que voy a cerrar dime precio voy a cerrar dime dirección voy a trabajar únicamente con factura jsp y ya sabéis que estamos hablando de javascript por tanto me voy a ir a javascript y voy a decir lo siguiente cuando sobre el documento cuando sobre cualquier parte del documento haga que app en ese caso voy a ejecutar una función que de momento ya sabéis siempre empiezo por poquito diga expulsado una tecla ha expulsado a una tecla lo que va a hacer es que cuando sobre déjame que para el servidor vamos a sacar servidores por aquí cuando la atención estoy ejecutando cuando sobre cualquier parte del documento haga clic en una tecla veréis atención que dice ha expulsado una tecla expulsado durante clara será el disparador para ejecutar el cálculo mirada tengo un pequeño problema vamos a verlo mirad precio tiene el y de precio 1 eso está muy bien pero cantidad tiene el y de cantidad 1 está puesto a mano no lo hemos puesto dinámico vale por tanto lo que voy a hacer es esto mirar de la misma manera que antes he hecho cantidad dinámico o precio dinámico pues voy a hacer ahora lo siguiente aquí cantidad más línea por lo que ahora mirada paro ejecutó y comprobaremos vamos a recargar y comprobaremos mirar como vamos a verlo bien como os decía comprobaremos como esto es cantidad 1 y esto es precio 1 pero en la siguiente línea esto es cantidad 2 y esto es precio 2 así que como os podéis imaginar el cuidado y total no puede ser total 1 otra vez en total tengo que poner total más línea para que se aprecie 1 cantidad 1 total 1 precio 2 cantidad 2 total 2 bueno hecho esto ahora manualmente atención lo voy a hacer para una línea para que lo veáis claro voy a decir esto lo bermúdez co y digo sobre total 1 ponme el código html correspondiente a sumar cantidad 1 punto text x precio 1 cantidad 1 es un aire precio 1 punto texto vamos a ver si era un error que debe dar un error porque dará un error por una razón muy sencilla porque estoy multiplicando dos cosas que básicamente son textos no son números pero ahora hacemos un pequeño cast lo ponemos como entero y ya está bien un momento que para el servidor vamos a verlo ahora bien se me ha enganchado el servidor así que voy a parar un momento eclipse vuelvo a arrancar vamos a verlos y si no he puesto una almohadilla efectivamente en total 1 como es una idea tendría que haber una almohadilla así que de la misma manera que se han olvidado la almohadilla en cantidad creo que así yo tendría que poner también en total vamos a arrancar y al arrancar veremos que este código va a funcionar sobre la línea 1 funcionará sobre la línea 1 por tanto a partir de ahí tenemos dos opciones o bien calcularlo manualmente línea a línea en las 15 líneas o bien buscar alguna manera automatizada de decirle a jan 10 o allá en 500 calcula me las que haya es decir ves línea a línea y calcula me las que haya bien como os decía bueno total uno efectivamente debe llevar un id así que ahora ejecutó la aplicación vamos a ver que nos da y mirad digo producto es ordenador portátil 800 cantidad es 2 mira ha funcionado de casualidad se ve que ha cogido directamente los textos como si fueran números si no hubiéramos hecho un entero ya está pero cuidado si ahora digo tres por ordenador de sobremesa y damos cuenta cómo no me calcula es total porque no me calcula ese total pues simplemente por qué aquí me he referido a total 1 cantidad 1 precio 1 lo que tendría que hacer que de hecho vamos a hacerlo ahora para el principio es calcular unas cuantas líneas de código ya es que me diréis oh madre mía repetir eso tiene mala pinta lo sé pero de momento lo que quiero es que os funcione y una vez que funcione nos preocupamos de reutilizar así que he activado el cálculo para las cuatro primeras líneas de la factura así que ahora recargo y ejecutó y mira a la atención como digo lo siguiente como digo ordenador portátil 800 x 3 2400 ordenador de sobremesa por 44 mil tablet por 5 a 750 y impresora por 1 es igual a 80 claro si intento hacer la quinta línea pues no funciona porque sólo he programado hasta la cuarta vale así que tengo esto por aquí lo que tengo es y os diría yo activado el código para las cuatro primeras filas ahora además quiero hacer lo siguiente mira cálculo para las líneas de factura y ahora atención cálculo de los totales creo que la base imponible creo que tiene ya un nivel vamos a verlo un segundo que os lo digo en total base el campo correspondiente a la base imponible se llama total base así que digo aquí arriba total base punto html y quiero que sea igual total 1 punto texto más total dos textos más total tres puntos texto más total cuatro puntos y así ya lo sé que diréis una manera un poco manual de hacerlo sí lo sé pero de momento que funcione así que paro el servidor y vuelvo a recargar y comprobamos vamos a ver si funciona como quiero un portátil que son 800 euros quiero dos ordenadores de sobremesa quiero tres tablets y quiero cuatro impresoras y si todo ha ido bien me vengo aquí abajo bien hay algún problema ahí porque fijaos que en lugar de estar sumando lo que está haciendo es encadenando si está encadenando ahí si tengo que irme al método par saint en javascript que lo que hace es convertir e intentar convertir al menos una cadena en un número dejadme que tienen un bacalao entre java y javascript de javascript parce inc que ya no me acuerdo si es con puntito o con paréntesis vale bien ya está pues entonces lo siguiente mirad le digo parce un ojo que la i es mayúscula del total 1 parce int del total 2 del total 3 parce y 4 y no olvidemos que sigue abierto paréntesis los tengo que cerrar por eso ahora guardo recargo ejecuto muy bien ordenador portátil espera que no ha cambiado wow debo tener vamos a ver tablet 2 ahora impresora 3 ordenador portátil 4 si todo ha ido bien ahora veréis que 3200 más 240 más 300 más 800 deberían sumar 4.540 con lo cual lo único que me queda es calcular el iva calcular el irpf y calcular el total si queréis para hacerlo fácil al principio asumir un iva yo lo tengo aquí como desplegable hacerlo sencillo calcular un nivel fijo el que queráis calcular un irpf fijo el que queráis y adelante