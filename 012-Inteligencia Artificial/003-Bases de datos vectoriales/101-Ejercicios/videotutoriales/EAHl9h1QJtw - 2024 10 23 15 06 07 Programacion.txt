pues como os decía me voy a ir a me voy a ir a idle y dentro de idel eh vamos a hacer una vez más una aplicación empresarial basada en un crud vale Pero hoy lo vamos a hacer de un modo que todo aquello que programemos por una parte sirva para practicar la asignatura sirva para el examen de final de primer trimestre y también sirva para proyecto intermod vale Así que la semana pasada nos quedamos haciendo Mira voy a mirarlo nos quedamos haciendo YouTube Studio tenido listas programación aquí vale 9 11 no 10 17 Okay las imágenes vale correcto bien perfecto y en el día anterior 10 17 y interfaces gráficas de usuario fenomenal Vale pues vamos allá voy a crear una tabla voy a crear una base de datos local Host php my admin y voy a llamar a esta base de datos voy a llamar la programación Vale entonces voy a crear una base de datos create database programación with user programación and password programación and Give all privileges to that user así que de esta forma yo ahora a continuación me abre un momento el editor de texto voy a crear un nuevo archivo lo voy a guardar dentro de primero dentro de programación dentro de dónde estás lectura escritura de información voy a hacer una cosa voy a poner por aquí una carpeta nueva llamada proyecto vale Y en Proyecto 1 voy a decir 001 base de datos.sql entonces de aquí cojo Esto vale de aquí cojo Esto me quedo estos datos Y ahora a continuación pues me voy a me voy dónde me voy aquí entonces pongo sudo mysql y u Root p vale contraseña password no un momen no Okay Vale pues sí Venga pues create database programación Ok create user programación identified by programación vale Grand all privileges to usuario y FL privileges vale Eso quiere decir que ya puedo ir a May sql y puedo entrar con el usuario programación y la contraseña programación y por tanto ahora dentro de programación pues puedo crear tablas voy crear una primera sencilla tabla llamada clientes Así que clientes cuatro sencillo vale lo más sencillo que pueda identificador 255 clave entera primaria es nombre es apellidos y es email vale Ya está la típica y tópica tabla que hemos creado un millón de veces Ok previsualizar tablas sql vale Y ahora a continuación guardo y creo una segunda tabla llamada productos típico identificador entero clave primaria autoincremental nombre del producto descripción del producto y precio esto es un marchar esto es un marchar esto es un decimal Vale 255 y e ya vale previsualizar sql Y lo meto aquí to Big precision Perdón 255 no 20,2 prev visualizo sql tiki pego vale guardo ahora a continuación ya tengo una micro aplicación vale una micro aplicación informática ahora digo vale para este estructura eh create 20 customers claro cuidado y igual lo que hace es que me da como una especie de listado Vale entonces and Give Me them as sql insert sentences Ahora sí Okay Más que nada porque así creamos una base de datos en funcionamiento lo antes posible hoy ahora para este ejercicio va a ser una base de datos sencilla en el sentido de que no me voy a liar de momento con claves foráneas y todo eso vale inserciones sino que como estamos en programación no me interesa ahora esas complicaciones vale solo trabajaremos en la asignatura de bases de datos de momento quiero tener Eso sí pues una muestra de código lo suficientemente grande Digamos como para que Eh pues me funcione correctamente bien ya está OK copio código me vengo aquí me no esto no me vengo aquí me vengo a sql voy a clientes voy a sql pego los clientes le doy a continuar y ya tengo 20 clientes dentro de Wow qué es esto no vamos a ver pero esto Qué es no eh clientes vaciar Eh me estás contando no eh with eh A ver fictional customers but with real names and surnames vale es decir no me pongas tan aleatorio y lo mismo voy a hacer con productos a ver and with spanish names and surnames venga bueno Mientras tanto en python vamos a ver Esto es el 003 Vale pues Ahora inserciones vale estoy esperando aquí a poner ahora me voy a idle y voy a crear el 004 bar W html dam primero programación vamos a poner esto en proyecto y 004 listado de tablas punto python vale analizando y bueno vamos a buscar por aquí mira ya sí pero Ah insert vale venga tengo por aquí Me cojo el código correspondiente este por ejemplo mira qué bien Me cojo el código correspondiente a la conexión mysql Aquí está importo mysql connector creo una conexión a la base de datos y un conector y ahora por ejemplo le digo petición es igual bueno Esto es programación esto programación Y esto es show tables y punto show tables vale Y ahora a continuación la petición es esta y Ah Espérate que no me devuelve Vale entonces registros es igual a cursor fetch all Y entonces digo for registro in registros eh print registro vamos a ejecutarlo vamos a verlo un momento porque Bueno sí puedo ejecutar ya vale Y me dice que tengo me dice que tengo clientes y productos vale Okay esto ya empieza a estar bien Mientras tanto Aquí tengo los sqls me voy a clientes me voy a sql me voy a pegar le doy a continuar y ahora sí esto tiene mejor pinta vale Y ahora a continuación y ahora a continuación Hola lo pego Aquí y ahora con respecto a productos vale Y ahora digo Now create 20 products related Pues no sé sabes y ya está casual cling vamos a esperar la inserción y Mientras tanto en nuestro programa de python pues tenemos que hemos creado un programa muy sencillo vale esto no era ningún misterio hasta el momento que lo que hace es que me muestra las tablas bien yo a partir de aquí lo que quiero es decirle que quiero que me lo muestre como qui que me lo guarde como diccionario vale quiero tener un listado siempre en formato de diccionario que al final se va a convertir en J son por tanto insisto hoy estoy en programación pero mi mente no está solo en programación Vale mi mente está en programación y ya va pensando que tenemos que hacer un proyecto inter modular que tenemos que comunicar varios componentes y mi mente está pensando que necesito una vía de comunicación existen múltiples vías pero jas es una buena vía vale por tanto en principio si no hay un análisis de pros y contras con respecto a otros formatos Pues siempre me voy a ir directamente a Jason vale Lo cual quiere decir 005 listado como diccionario que aquí en el cursor creo que era en el cursor o era en el fecho ya no lo sé dictionary es igual a true vamos a ponerlo ahí no era ahí así que es en el cursor Ahora sí vale lo que mientras que antes me estaba devolviendo una un conjunto de tuplas ahora me están devolviendo un diccionario vale esto es Guay de momento ahora a continuación yo digo vale Yo quiero 006 eh lo que me devuelvas quiero ponerlo poner en lista con lo cual yo digo vamos a ver Mira registros cursor fech Espérate porque es que igual ya es una lista print registros míralo si es que ya es una lista para qué quiero más vale con lo cual ahora lo que quiero es Eh bueno esto En un momento dado trabajarlo como Jason vale aunque esto ya se podría considerar jas son quiero decir con esto que si yo cojo esto y lo lanzo y lo extraigo pues esto directamente se va a considerar se va a retornar como un Jason Vale ahora una vez que tengo esto Me gustaría empezar a encapsular lo y digo que me gustaría empezar a encapsular porque lo que quiero es reutilizarlo cuando hablamos de encapsulación y anteriormente hemos hablado de encapsulación pues al final acabamos hablando de primero funciones y segundo objetos Vale entonces voy a ir pasito a pasito lo que comentábamos el otro día de cómo empieza un programa Y cómo continúa un programa Cómo empieza un programa así como acabo de empezar Es decir programando de la forma más directa y más sencilla posible ahora cómo continúa un programa Vale pues encapsulo en función Ay tengo ya la garganta y digo Death disculpad pero tengo la gargant Lena de mocos vale Def Dame tablas y entonces la función Def Dame tablas pues hace esto y claro cuando hablamos de una función pues ya no hablamos de un print sino hablamos de un return entonces Yo vengo por aquí y digo print Dame tablas y me da Exactamente lo mismo el resultado teóricamente es exactamente el mismo Pero el código no es el mismo vale el código no es el mismo porque este código está encapsulado está englobado Y eso quiere decir que más adelante voy a poder reutilizar la función siempre que quiera muy bien ya hemos dado un paso hacia delante vale Y es un paso que como os digo vosotros también en un momento dado antes o después pues Vais a tener que dar Pero vamos a dar más pasos hacia adelante porque ahora a continuación Oye a ver cómo ha ido esto a Aquí está productos a ver qué productos me ha creado eh inventor sudadera recusante de camiseta pero tío Quiz badun sandalias Ah espérate es que inventore es Ah es la marca yo digo me lo ha dado en italiano vale voluptatum sandalias husto camiseta Pues mira Sabes queé Me lo quedo Hala me ha hecho gracia lo de que esté en latín italiano o lo que sea así que le doy a continuar y ya está Vale y tengo ahí un montón de productos metidos dentro del aquí dentro de la base de datos Vale ahora a continuación voy a repetir pero ya sabéis que vosotros mismos en muchas ocasiones me habéis dicho que cuando repetimos algo pues es mal rollo vale es que no debemos estar repitiendo cosas lo cual es correcto entonces me vengo por aquí y digo 008 ahora hago dos funciones Y entonces vengo por aquí y digo Pues mira voy a crear una función que se va a llamar Dame o vamos a ver leer tabla por ejemplo leer tabla lo que hace es decir mysql connector y le digo show tables no Select all from clientes y me devuelve vale todo esto de aquí con lo cual yo vengo aquí ejecuto leer tabla ejecuto Y entonces tengo por aquí por una parte las tablas y por otra parte tengo por aquí los clientes Por una parte esto es Guay pero claro por otra parte Yo vengo y digo ostras espérate porque tengo dos funciones Pero estas funciones están duplicando la mayoría del código la conexión la están duplicando el cursor lo están duplicando Todo lo están duplicando Vale y Fran muy bien no exactamente vale se podría hacer si lo que pasa eh Te iba a decir que esa no es buena solución pero no solo te lo voy a decir sino que lo vamos a demostrar el por qué pero muy bien vale lo que quiero es que hagáis eso que digáis vale pues vamos a empezar a buscar mecanismos para no repetir así que 009 función de conexión Pero hay un problema y es el siguiente digo Def eh conector vale Def conector por ejemplo y digo conexión es igual a esto con lo cual claro ahora tengo un conector Pero qué hago exactamente con este conector vale Por qué Pues porque yo ahora a continuación ejecuto el conector de hecho ni siquiera hace print porque no devuelve nada Por cierto aquí puedo poner return true para decir que devuelva algo return true vale f5 Pero hay un problema y es que dice conexión is not defined Por qué conexión is not defined por la sencilla razón de que conexión está dentro de conector y por tanto tablas no reconoce conexión porque acordaos de esa frase que quiere decir que o sea bueno que dice que lo que ocurre en Las Vegas se queda en Las Vegas es decir lo que ocurre dentro de una función se queda dentro de una función y eso que es eh es cierto por regla general para muchos lenguajes de programación pero en python es especialmente cierto con lo cual Fran la cosa va por ahí vale No es exactamente eso pero la cosa va por ahí porque cuando tienes dos funciones y estas funciones comparten algo de código la solución es programación orientada a objetos vale la forma en la que muy probablemente muchos de vosotros Vais a evolucionar es primero programación estructurada o sea programación estructurada es programación directa de Pin Pam te pongo el código y funciona y punto ya está vale lo que hecho al principio luego encapsular en funciones o sea cuando ya has hecho el programa estructurado y te funciona y dices vale me funciona Pero esto no es reutilizable vale esto podría encapsular se de alguna forma luego encapsula el programa en funciones y luego si te encuentras que tienes muchas funciones que están relacionadas entre sí entonces programación orientada a objetos y ese suele ser el camino Muy frecuente por el cual no tú no tienes por qué empezar obligatoriamente como ocurre en Java programando orientado a objetos sino que tú programas estructurado y tranquilo que el código ya te pedirá que programa es orientado a objetos pero claro tienes que escuchar al código vale Y en este caso el código ahora mismo aquí me está diciendo hazme una clase vale Así que 010 crear clase y voy crear una clase Class llamada conector base de datos por ejemplo se puede llamar como queráis es lo de menos las clases acordaos que tienen un método llamado init El init tiene un self y las clases tienen propiedades Así que self connector self punto Perdona conexión es igual a Esto vale esto fuera y ahora atención todos a la pantalla vale Este paso es crucial si yo tengo esto fuera si yo tengo eh funciones car no me salía la palabra si yo tengo funciones y yo tengo una clase atención todos a la pantalla y miradme bien fijamente porque yo simplemente cojo las funciones le doy un tabulador y automáticamente estas funciones se han convertido en métodos de la clase así de sencillo vale por eso lo ideal es empezar estructurado pasar luego a funciones y si ya has creado funciones ya prácticamente tienes los métodos de la clase vale Solo tienes que colocarlos alinearlos y ya está se convierten en métodos de hecho Mira el cursor estoy viendo que se repite Pues el cursor si se repite Debería ser claro eso es lo que te digo vale Debería ser aquí una propiedad self pun cursor y cuidado Lo único es que hay que acordarse del self vale para diferenciar lo que es una variable de lo que es una propiedad caray Ok ahí y entonces yo ahora a continuación s desde luego de hecho fíjate es realmente lo que yo acabo de hacer vale que es empezar con más código empezar con un código menos suficiente Y luego ya refactorizar vale Y luego ya reestructurar organizar y fíjate que este código exactamente Ah sí correcto efectivamente Y luego evidentemente en el momento en el que estamos encapsulando y en el momento en el que estamos agrupando por supuesto que luego lo podemos meter en un archivo externo incluimos el Class conector de b y se me queda literalmente en una sola línea correcto vale eso es y es un poco la fusión poco a poco progresiva de todo aquello que estamos haciendo a lo largo de las clases en diferentes asignaturas pero sí correcto por supuesto Claro si yo no he creado una clase luego no puedo refactorizar porque luego no puedo llevarme el código a otro archivo externo Pero si yo he creado una clase tengo todo esto perfecto y preparado para llevármelo a un archivo externo eso es ahora lo hacemos Vale entonces vamos primero a comprobar que funciona Dame tablas Ok Vale pues yo ahora digo vamos a verlo un segn porque esto Entonces es self cursor y self cursor Okay vale Y entonces yo ahora digo conexión 1 es igual a conector bd Y entonces digo conexión 1 pun damet tablas eh print porque hace un return que es lo que debe hacer por cierto así que hago así f5 Ok t Ah Sí perdón self sí cuando convierto los métodos me hace falta poner el self como parámetro base esto no ocurre en práctica ningún lenguaje de programación pero en python Sí pero bueno Ya está nos comemos el self con patatas y ya está f5 y aquí lo tenemos claro esto quiere decir que en un momento dado no lo voy a hacer ahora pero ahora en un momento lo haré es que me puedo esto y me lo puedo llevar a un archivo externo y sobre todo este mismo archivo es el que me va a servir para luego poder solucionar cosas como ya veréis dentro del proyecto intermod vale pero ya llegaremos a proyecto inter modular ahora de momento estamos trabajando con la asignatura de programación bien eh la tabla ahora mismo es una función poco reutilizable desde el punto de vista en que siempre me saca la tabla de clientes no me saca ninguna tabla más que clientes vale No pasa nada porque 011 métodos con parámetros Entonces yo vengo aquí y digo más tabla y aquí arriba le creo un parámetro llamado tabla lo cual quiere decir que yo ahora puedo venir por aquí y decir Léeme la tabla de clientes y con la misma conexión Léeme la tabla de productos f5 y me da primero los clientes y luego me da los productos y yo simplemente he tenido que utilizar una línea no es como antes quebi tengo que hacer me conecto te lo pido dámelo devuélvelo hago un print hago un for vale no con esto yo simplemente ahora pongo una línea pongo otra línea y el programa ya ejecuta y reutiliza el código que sea necesario y este código Ahora sí es mucho más bonito y mucho más eficiente y más utilizable pero recordad y esto grabarlo a fuego Yo en ningún caso pretendo que escribáis esto desde el principio en ningún caso pretendo que penséis ya hoy directamente con objetos igual el segundo curso pues sí que lo querré vale pero hoy no hoy lo que quiero es que primero penséis estructurado en plan de que digáis mira que sea guarro pero que funcione vale Y una vez que funcione pues ya lo iré rehaciendo y reconstruyendo y reestructurando y refactorizacion más eficiente y más lo que queráis bien Además Ahora sí eh me voy a vamos a ver Esto es reutilizar no esto nada vale me voy a ir aquí me voy a ir a dam me voy a ir a segundo no perdon a segundo no me voy a ir a Primero me voy a ir a programación me voy a ir a proyecto de momento por aquí vale Y me voy a la importar vale Y en 012 importar Pues ahora no aquí proyecto perdon me ha salido proyecto 012 importar esto es Main vale se suele Llamar Main cuando hay varios archivos al archivo principal Esto no es un obligación pero es una buena práctica y eh ahora a continuación pues lo que hago vamos a ver Main Esto me lo corto Okay Vale creo un nuevo archivo esto lo pego Esto me lo guardo y se llama eh conector técnicamente por buena práctica conector db vale en python no es obligatorio que el número del archivo se llame igual que la clase en Java sí que es obligatorio Pero bueno es una buena práctica que lo hagamos vale Así que le doy a conectar y ahora a continuación por supuesto import o from conector db import all lo importo todo por si más adelante hay más cosas lo cual quiere decir que yo ahora hago así y fantástico vale Y funciona y ahora este código ya es mucho más reutilizable de lo que parece vale Ya lo veréis y digo que es mucho más reutilizable por la sencilla razón de que eh yo ahora a continuación lo que puedo hacer es a partir de un jas crear múltiples tipos de programa informático es decir puedo crear un programa informático en línea de comandos y puedo crear un programa informático con interfaz de usuario y puedo crear un programa informático en web Por qué pues por una razón muy sencilla porque el programa que he escrito hasta ahora no entiende de consola o interfaz de usuario o web el programa que he escrito hasta el momento lo único que hace es Tú dime lo que quieres y yo te doy un Jason Y qué haces tú con sjs tú sabrás lo que haces con sjs vale tú decides lo que haces con ese jas yo te doy un jas Y tú ya te apañar para saber eso cómo lo transformas o en qué medio lo pones vale por tanto por eso os digo que la pieza de Software que hemos hecho hoy piececita realmente Porque si os dais cuenta solo tiene el método de leer me falta el método de insertar y el método de actualizar y el método de eliminar vale que evidentemente ya es meter más código aquí bajo es decir Yo vengo por aquí y voy a apuntar los métodos pero simplemente para que os hagáis una idea de cómo luego crecerá esta clase no lo vamos a hacer ahora mismo y 013 apunto métodos vale Entonces cierro por aquí no me ha hecho ni caso fantástico vale cierro por aquí y ahora aquí en conector deb me abro con idel y ahora Aquí voy a hacer Def inserta tabla self y voy a poner de momento pass vale pass en python es obligatorio no puedes dejar un método Vacío con lo cual tienes que poner pass como mínimo o pass o print o return vale voy a poner return false y AC estamos ya que es un método Pues que devuelva algo Def actualiza tabla self y voy a hacer un return false que ahora mismo es false y más adelante ya retornará algo pero ahora mismo retorna false y eh Def que Def elimina tabla self y return false vale Y ya está esto por aquí y así os hacéis una idea de que sí s y yo sobre todo o sea queda bonito vale pero os voy a hacer una cosa que ahora mismo todavía no la podéis comprobar ya lo comprobaré con el tiempo ahora mismo estáis escribiendo vuestros primeros bloques de vale bonito es un código que tú lo ves y te enteras de lo que está ocurriendo ahí pero más allá de bonito o sea precioso es un código que tú abres ese código dentro de un año y simplemente evidentemente dentro de un año no te acuerdas del código que has escrito el año de antes y abres el archivo y de un vistazo te enteras de lo que está haciendo el código eso es un código precioso vale Y ese es el código al cual tenéis que aspirar un código que o sea cuando hablamos de bonito no hablamos de bonito en pro de la estética sino en pro de la utilización de la usabilidad de que el código sea utilizable y sea entendible y sea claro vale bien eh Como ya os digo la programación entada de objetos Pues de entrada es difícil que desde una página en blanco escribáis directamente clases porque es difícil pensar en programación orientada a objetos pero cuando empiezas a reestructurar tu código sí que fíjate que es una clase que tiene propiedades que tiene métodos y Si escribes correctamente el nombre de cada método Pues de un vistazo te haces la idea de lo que va a hacer esa clase vale bien luego también os digo que python nos ayuda a esto porque intenta hacer lo mismo pero con las líneas las menos líneas de código Comparado con otros lenguajes de programación y ahora a continuación os voy a hacer una demostración Vale entonces os voy a hacer una demostración en la cual voy a con esta clase Voy a crear un programa de línea de comandos crear un programa de web y crear un programa de eh interfaz gráfica y la clase va a ser la misma entonces me voy a proyecto copio y pego f2 014 programa de línea de comandos vale Entonces cierro por aquí de hecho ahora mira voy a abrir con idle Vale y voy a poner comandos punto python y simplemente quito esto porque digo es que me olvido de del conector porque yo sé que el conector está ahí dentro y no necesito saber más y ahora digo print programa de gestión de empresa print ya sabéis lo típico empezamos como siempre versión 0.1 por José Vicente carratalá Ok vale Y ahora print menú inicial vale print eh tablas Ok y ahora digo tablas es igual Perdón momentín voy a poner por aquí arriba conexión de B conexión 1 es igual a conector de B ya está Vale y ahora digo tablas es igual a conexión 1 punto No me acuerdo punto Dame tablas y entonces digo for eh tabla in tablas voy a poner Index y digo print Index más tabla vamos a ver un momentín f5 error Ah conector de B Ah conector bd Ok vale No mod llamado conector bd hombre queé me estás contando conector db espérate Entonces cómo lo he llamado yo conector bd Vale pues el nombre Debería ser consistente Ok venga bien menú inicial tablas name Index is not defined vale Ok entonces quiero un for vamos a ver Esto es Index of eh tabla creo que indexof no me va a funcionar correctamente dónde estás aquí python Index of Ah Index Ya está no es Index of es Index Okay Index is not defined ostras a ver cómo quieres que lo escriba Oh Ah sí vale Ok espera no venga mi lista índice de la lista vale tablas punto Index tabla Okay Vale no es un entero tiene que ser un str más eh guion más tabla venga okay Y ahora no puedo concatenar un diccionario vale con lo cual Aquí tengo que concatenar un tabla de vamos a ver Esto es un diccionario habla de tables in programación vale hago así y me dice selecciona voy a decirle Index + 1 vale selecciona clientes o selecciona productos Ok pues opción es igual a input selecciona una tabla y a continuación digo print has mosquito has seleccionado la tabla más opción vamos a verlo un ha seleccionado la tabla un vale perfecto de hecho un momento ha seleccionado a opción selecciona la tabla dos puntos espacio vale Ok bien y Vale ahora esto es voy a hacer versión nueva del proyecto bueno no lo acabo en línea de comandos va print ha seleccionado la opción un vamos a trabajar con la tabla más tablas opción -1 entero vale f5 clientes vale vamos a trabajar con la tabla clientes ahora a continuación qué hago Bueno pues de momento por ejemplo voy a crear otro menú que diga print ahora Escoge una opción print uno insertar registros print dos listar registros print 3 eh actualizar registros lo de siempre y print 4 eliminar registros Y entonces digo opción dos es igual a input selecciona una operación Y entonces ostias por qué Aquí se me va abajo porque aquí me falta unas comillas vale Y entonces digo If opción dos es igual a print insertaremos un registro elif opción 2s es igual a 2 y entonces digo print conexión punto listado tablas a ver espera dónde estás aquí leer tabla pero leer tabla de esa tabla de aquí leer tablas de no perdona Ay caray sí okay Y Okay Vale okay y elif opción dos es igual a 3 print actualizaremos un registro Y por último el If opción dos es igual a 4 print eliminaremos un registro vale con esto aquí nos acabamos de ahorrar todo el tema de Me conecto a base de datos Y ya está nos hemos centrado únicamente en el código y por supuesto Aquí voy a poner el clásico y acostumbrado While true donde f5 selecciono clientes qué quiero hacer con clientes quiero listar registros Pues ahí tienes tus clientes Ahora qué quieres pues ahora quiero trabajar con productos Y qué quieres de productos quiero listar productos Pues ahí tienes tus productos vale con esto acabo de hacer un programa el programa tiene pues como podéis ver el mismo aspecto que el programa que teníamos anteriormente vale que el programa de línea de comandos que teníamos anteriormente pero la diferencia es que toda la lógica de gestión de base de datos se ha metido en este conector creo una conexión le digo que Quiero leer una tabla y ya se encargará el programa de saber qué es lo que tiene que hacer a continuación vale Pero a continuación a ver un momentín correcto efectivamente en conexión uno llamo a una conexión en general y eso hace que se pone a mi disposición todo aquello que tiene la clase en el momento en el que digo conexión uno es igual a conector de B el programa sabe que yo a partir de ese momento podría llamar a cualquiera de estos métodos y luego a partir de aquí con método leer tabla llamo a Select y con método Dame tablas llamo al método show pero lo escribo o sea en un lenguaje más entendible para mí vale yo digo leer tabla de tabla el programa ya sabe que cuando yo le diga leer tabla ya sabe que me hará un Select y lo ejecutará y me devolverá los registros en formato diccionario y todo eso vale pero todo eso ya no hace falta que esté en el programa principal todo eso se ha quedado relegado a esa clase que además ahora a continuación y ahora viene la cuestión eh ahora a continuación vamos a poder reutilizar Vale hasta este momento hasta este punto hasta este minuto de la clase vosotros diréis bueno Vale venga lo hemos metido en una clase la clase está en un archivo externo hemos abstraído hemos encapsulado hemos separado en un archivo externo vale entiendo las ventajas Vale pues no entendéis las ventajas vienen ahora lo que ha ocurrido hasta el momento es solo una pequeña ventaja con respecto a lo que va a ocurrir ahora a continuación Así que ahora yo cierro estos programas y ahora es donde empieza verdaderamente la fiesta hago así 015 ahora programa de interfaz gráfica voy a crear voy a ir a comandos por ejemplo voy a guardar esto como interfaz Y entonces elimino todo esto conector un conexión un Pues sí eso me lo puedo quedar vale Y entonces digo aquí arriba from tc inter o import tk inter astec aquí digo ventana es igual a tk.tk f5 vale Y me aparece una pequeña ventanita eh ventana pun Mind Loop vale es siempre una buena costumbre no es obligatorio para desarrollar nidle pero sí que es una buena costumbre bien Voy a de ver y ahora a continuación vamos a verlo vale Y ahora digo lo siguiente Oh a ver tablas es igual a conexión 1 pun Dame tablas Sí correcto aparte masterclass en el sentido de que clases como estas son densas Pero yo siempre digo se está grabando vale o sea para ver en bucle en el sentido de que al final de la clase probablemente Vais a pillar el concepto de Por qué he hecho lo que he hecho pero de vale lo he pillado pero no sé cómo lo ha hecho Vale pues no pasa nada porque lo veis otra vez ya está que lo pillé bien entonces vengo por aquí y digo eh conexión uno Dame tablas Perdón Dame tablas Vale y vengo por aquí y ahora empieza lo interesante y digo for tabla in tablas eh tk Button en ventana text es igual a tabla de tables in programación Vale y punto pack y p x es ig a 10 y p y es ig 10 bien hago así ejecuto y me sale y ahora empieza el cachondeo y ahora me sale una ventana que tiene dos botones que son clientes y productos pero lo acojonante y ahora insisto lo voy a volver a repetir muchas bueno muchas veces a repetir una vez en formato web lo acojonante Es que yo he pedido conexión 1 deb he pedido Dame tablas y no he tocado la clase Espera que te lo digo no he tocado la clase conector de B no la he tocado para nada porque la clase conector de B no tengo que tocarla para nada porque correcto está reutilizando los datos anteriores Por qué Porque los datos son Jason y Jason es un formato totalmente agnóstico Jason no sabe si va a un programa de línea de comandos o va a un programa de interfaz de usuario o va a un programa web Jason no sabe nada Yo sé que lo voy a convertir en un botón o yo sé que lo voy a convertir en un print vale de esta forma daos cuenta de que la misma clase que me servía hace un momento para hacer un programa de consola me sirve para hacer un programa de interfaz gráfica esto hasta ahora no era así porque yo no podía o sea el programa de consola era un programa diferente y el programa de ventana era otro programa diferente y no podía era difícil vale Trozos de un programa Y pegarlos en el otro pero si yo encapsulo y yo hago librerías y importo las librerías la misma literalmente la misma librería que me sirve para hacer un programa de consola esa misma librería me sirve para hacer un programa de interfaz de usuario Vale pero no hemos acabado Así que ahora a continuación ahora luego por cierto comento códigos vale que estoy un poco haciendo que funcione y ahora luego en la última media hora comentamos código Ahora quiero que tenga un comando Ah Perdona que no pongo aquí versiones entonces eh command es igual a muestra datos y el comand muestra datos va a tener un lambda Pero bueno es que no a ver claro no no Perdona Fran espera esa es la cuestión Esa es la cuestión y es que por supuesto con todo esto que estoy haciendo la programación es abstracta Y eso quiere decir que si yo ahora me voy a la aquí y digo que creo una nueva tabla llamada categorías identificador entero 255 eh primario autoincremental y digo nombre de la categoría vale marchar previsualiza que editor nunca me muestra lo correcto pero vale eh base de datos crear tablas Ok creo la tabla categorías me voy al chat gpt me voy a sql yg inserta no sé sabes cinco categorías para luego vincular los productos o sea cinco categorías de ropa vale para que luego el programa tenga algún tipo de sentido no estoy haciendo ahora mismo eh join vale tampoco me interesa hacer join ahora mismo porque no estamos en bases de datos ahora luego entraremos en bases de datos evidentemente vamos a ver eso vale Y las categorías son Pues eso camisetas pantalones fantástico bien okay Vale Eh me vengo aquí pero no me vengo aquí me voy a inserciones eh No estas inserciones no son correctas no me voy a inserciones bueno Pues nada aquí me lo inserto aquí para que luego tengáis la memoria de todo lo que hemos hecho vale bien y ahora si yo hago esto Fíjate que Fran automáticamente pulso c y tengo categorías clientes y productos voilá vale Y si yo en la tabla Y esa es la gracia Esa es la forma en la que intento programar si yo amplío el modelo de datos en la base de datos no tengo que programar yo más en python sino que automáticamente se vale automáticamente se adapta automáticamente se actualiza bien Ahora a continuación Quiero un comando entonces para crear un comando voy a crear interfaz Más que nada porque si no veréis Cómo crece el proyecto digo command es igual a e A qué a Dame datos claro y aquí tengo que poner un lambda no os quiero explicar hoy todavía lambda vale lambda es una cosa que se utiliza para varias cosas entre ellas para llamar a funciones anónimas Y darles parámetros pasarles parámetros si no pudiera si no pongo la lambda no puedo poner parámetros ya os contaré esto más adelante lo que es bien y qué quiero pues quiero pasarle este Comando esto yo creo que me va a dar error pero a ver voy a bajar esto porque si no es un follón que al final no entendemos lo que está ocurriendo vale Muy bien Entonces ahora defino la lambda Perdona defino la función Def Dame datos acepta un parámetro tabla y print te voy a dar los datos de la tabla vamos a verlo creo que he escrito mal lo de la lambda esto nunca se ha cerrado ostras Pues yo creo que sí Ah no aquí vale Okay categorías Ah pues mira sí lo he escrito correctamente pero no de la tabla y de la tabla más tabla y categorías fantástico pues no lo he escrito correctamente vale pero productos y productos casi lambda momentín que tengo un error ahí en la lambda error un momento OK Sí variables no en el momento vale que o sea usaron el valor final que es lo que no quieres o sea que no es lo que quieres correcto bien Ahora a lambda t Ok Esto es lo que necesito vale Ya decía yo que esa lambda me sonaba mal Ok pongo esto por aquí y no osent de momento lo que es que lo que son las lambdas más adelante os lo cuento entonces f5 categorías vale Te voy a dar los datos de la tabla categorías clientes te voy a dar los datos de la tabla clientes y productos te voy a dar los datos de la tabla productos vale Pero ahora lo bueno ahora lo divertido Es que voy a poblar los datos para poblar los datos interfaz 3 voy a decir que a ver eh Aquí voy a decir texto es igual a tk textbox en la ventana texto punto pack es pad x = 10 pad y ig 10 vale Ok vamos a verlo no textbox no es textbox y Qué es eh python textbox eh Ah punto text vale Okay venga punto text m text Okay Vale y pasa esto Qué es lo que yo quiero pues lo que yo quiero es que cuando pulse categorías haga catlon y aquí me ponga todas las categorías cuando haga clic en clientes pues quiero que vale me ponga los clientes vamos a verlo vengo por aquí interfaz 4 y digo Dame datos pues quiero conexión 1 a ver datos es igual a conexión 1 punto Dame tabla de la tabla vale Sí Luis efectivamente de hecho eh Este programa informático es probablemente el mejor de los que hemos hecho pero no porque tenga interfaz de usuario sino porque estamos separando completamente la lógica de la interfaz de usuario de la lógica de la gestión de los datos pero sí me lo suelen decir efectivamente vale y ahora le voy a Sí lo sé ya he cogido que era por eso sí y ahora digo eh global texto es cojo el texto y lo meto aquí dentro esto es una particularidad de python Pero bueno es que eh vamos a ver sí no no Fran no es que yo insisto y lo vuelvo a insistir es que ese no es el objetivo vale Yo en ningún momento he dicho que el objetivo sea ponerlo de cabeza por qué yo lo sé de cabeza porque llevo años haciéndolo y Llevo años haciéndolo Y te iba a decir día a día Pero sí O sea día a día y cuando haces algo día a día pues al final es que aunque no lo quieras te lo aprendes de memoria Vale entonces pero para llegar a este punto yo me tiré unos cuantos años copiando y pegando código y con recortes míos de código preparados por mi ordenador para copiar y pegar y componer vale o sea que claro lo que pasa es que como veis que yo hago plique y voy escribiendo código de memoria pues y sobre todo porque por ejemplo si yo estuviera en casa pues tendría otro ordenador al lado con bloques de código para copiar y pegar y vosotros no lo veríais pero estoy en tame con lo cual no tengo otro ordenador tengo aquí uno al lado pero lo tengo ocupado con zoom y con el chat y no lo O sea no lo puedo utilizar para escribir código y ya veis que cuando quiero escribir código Por otra parte me voy a chat gpt que también me estáis viendo que lo estoy haciendo en Prácticamente todo momento O sea que no te frustre vale o sea estamos empezando el objetivo no es hacerlo de memoria pero Fran el objetivo sí que es comprenderlo empezar a comprenderlo vale si lo empezáis a comprender yo estoy tranquilo bien entonces ahora le digo texto config y le digo a ver si cuela que creo que no va a colar text es igual a datos Creo que no va a colar vamos a probarlo le doy a categorías no ha colado Ah Dame tabla No dame tabla Dame ya no sé me está diciendo quieres decir Dame tablas y yo digo ostras Pues no lo sé igual Sí igual no creo que no pues sí va a ser que sí qué cabrón hasta me averigua el aquí el nombre del método vale f5 categorías pero no Ok dame tablas Ah wow A ver momento un momento eh conexión Un dame tablas tabla ostras me ha dado error en este dato datos t Table sin programación Oye voy a Ah igual es una tupla print tabla a ver click y no categorías Dame no Perdona perdona es que no es Dame tablas que se me ha ido la pinza ahí no sé dónde estoy ya Yes esto fuera no es Dame tablas es le tabla o algo así leer tabla Ahora sí Ahora f5 categorías Vale ahora unknown option test vale Sí ahora sí que tengo el error que esperaba Eh Esto me lo pongo aquí en chat gpt y le digo el error está aquí error is here vale Okay insert perfecto Esto es lo que quiero fantástico de hecho esto lo iba a hacer después con lo cual aprovecho y lo hago ahora que es primero borro lo que sea que tuviera el texto y Ah inserto los datos como String fantástico pues esto muy bien Si yo hago así f5 le doy a categorías y categorías está vacío vale a ver le doy a clientes y tengo los clientes le doy a productos y tengo los productos le doy a categorías y está vaco no s por qu se ve que he metido el insert pero no lo he llegado a copiar entonces error en la consola sql insert me voy a copiar código me voy aquí continúo y ahora me voy a python y categorías Hola a ver un momentín cómo puede ser posible categorías Ahora sí vale Y me devuelve clientes y me devuelve también no sí desde luego a ver Fran esto ahora mismo simplemente es un volcado es un vomitado de eh de una serie de registros por supuesto interfaz 5 vale Yo ahora puedo venir por aquí y decirle vamos a ver eh datos Vale pues global no perdona global nada texto formateado es igual a esto y entonces digo eh for dato in datos vale Y entonces digo texto formateado más igual Ah no y ahora forato in datos un mín momentín python list All properties of object vale Ok pero no aquí Ok esto es Y entonces digo propiedades es igual a dir de dato Y entonces digo for propiedad in propiedades digo momentín print no texto formateado más igual a propiedad H dos puntos más eh dato de Propiedad y más contra barra n y al final por ejemplo por aquí para cada uno de los datos print y pues por ejemplo un separador vale muy visual Creo que así funcionará Vamos a darle categorías y no eh dato propiedad qué pasa más igual más ig texto dato propiedad a ver si es dato propiedad Okay Eh qué pasa aquí dato propiedad vale Ok Vale dict has no attribute propiedad un momentín vamos a ver y error is así claro intenta acceder una propiedad que no existe y es Ah el get attribute vale Ok vale pues esto bueno va no esto no hace falta me lo ha metido en un try Catch pero en un TR ex pero no quiero el trp entonces valores igual a esto texto formateado es igual a esto ch gpt me ha recomendado un trp parece muy bien la recomendación no la voy a seguir pero para un futuro pues estaría bien seguirla así que me voy a categorías e Ah Sí perdón y texto punto insert texto formateado Ahora sí vale le digo y aquí qué pasa y aquí Qué pasa texto formateado más igual que el print se me va de las manos más igual y contra barra n vale hago así mea Hala qué me dices qu está ocurriendo aquí no no a ver texto formateado más es igual a esto a ver Espera esto voy a poner print texto formateado porque de repente me he quedado flipando a ver categorías Pero qué no no esto no vamos a ver primero voy a quitar esto no creo que sea esto no texto formateado es igual a nada para cada propiedad texto formateado más igual a esto no me hace mucha ilusión esto propiedad más igual más valor más contra barra n Ok not type a ver voy a decir print propiedad y print valor Ah print valor y print propiedad Ok Class diccionario a ver cl diccionario Y esto es un Class No aquí error vamos a ver valor get attribute no es siempr ca de texto no tengo muy claro que sea el caso pero un momentín lo formateamos ya os digo que formatear los o de menos pero así por lo menos que se quede más bonito Bueno dale con el TR pues va vamos a hacer el TR Okay a ver no madre mía throws a lot of text instead actual Data voy a copiar el texto y así le paso lo que hace Ah muy bien vale eso sí vale Uy for clave in dato items categorías Ahora sí vale categorías con su clave y valor clientes con su clave y valor productos con su clave y valor Vale y un poco para que veáis que luego lo de formatearlo y ponerlo en un lenguaje más humano y eso que esto tampoco es la leche del diseño quiero decir que esto al final es un bloque de texto pelado que esto habría que ponerlo en una tabla de python de tk inter pero todavía noos he enseñado tablas en tk inter quiero decir vale pero el resultado así se entiende mejor vale el resultado a nivel eh programación lo que viene a querer decirnos es que hemos utilizado la misma clase de conector de base de datos Y si os fijáis aquí en el código no pone nada de mysql Porque todo lo de mysql está aquí dentro de conector deb y el mismo esfuerzo que hemos desarrollado para el programa de consola ese esfuerzo lo hemos reutilizado para el programa de interfaz de usuario pero ahora viene la tercera y última parte de la clase que es que voy a hacer lo mismo pero con flask para caray para crear un programa vía web Vale entonces ahora a continuación me vengo por aquí me voy a eh 016 servidor web vale Y en servidor web aquí me guardo interfaz 5 vale bien en servidor web me voy a interfaz 5 me voy a guardar esto como web 1 y digo lo siguiente esto fuera todo bueno el tk inter fuera y todo lo demás fuera menos el conexión 1 conexión un se queda Ahora me voy a conector de b y digo rápidamente python create flask server to serf Dame tablas and leer tabla los otros métodos Pues ahora mismo no tienes ningún sentido porque no hacen nada Vale entonces instalamos flask creamos este no vale Este no hace falta porque lo voy a importar Dame tablas el programa ha creído que lo quiero meter dentro vale No pasa nada Y entonces digo from flask import flask j sunify y request esto no vale from flask import flash j unify y request app es flask y ahora Esto me lo salto Esto me lo salto y ahora creo rutas y digo Dame tablas y leer tabla String tabla u Mira qué Guay me ha puesto hasta el parámetro Así que si todo va bien Ok Ok Ok vale pongo en marcha al servidor lo cual quiere decir que tengo que ponerlo en marcha desde línea de comando CD do punos cd2 puntos CD bar CD w cdw CD html CD dam CD primero CD programación CD proyecto eh CD 016 vale python 3 web 1 python 3web 1. python Estoy escuchando en el puerto 5000 y ahora a continuación me voy a local Host 5000 el local Host 5000 de entrada no me da nada Pero si yo digo Dame tablas me da Oh name the base no define Perdón es que es conexión un conexión 1 y conexión 1 ahora paro el servidor arranco el servidor recargo y me da en formato web un jas con las tablas y si yo ahora a continuación digo leer tabla eh es barra sí es barra clientes pues me da los clientes Vale y tengo esto mismo tengo otro programa de python pero que en este caso está cogiendo el mismo Jason que me devuelve conector deb pero lo está lanzando a un servidor web para qué pues para que yo ahora obviamente en lugar de hacer la interfaz de usuario utilizando tkinter Pues a la interfaz de usuario utilizando html y css vale voy a hacer un momentín voy a hacer un momento de 5 minutos de descanso