lo primero que vamos a hacer para este proyecto es crear una carpeta de proyecto sí que Mirad estoy en la carpeta HP dogs vaya voy a arrancar el poder hacer zoom en la pantalla Mirad ahora estoy en la carpeta ht dogs estoy en la carpeta web Apps es decir estoy dentro del Sam y lo que voy a hacer aquí dentro es una carpeta nueva una nueva carpeta llamada Proyecto 1 dentro de esa carpeta Proyecto 1 es donde iré creando la subcarpetas que vaya necesitando de momento yo sé que necesito una carpeta llamada bebé pero es más os voy a decir otra cosa en esta para este proyecto quiero enseñaros y luego dejaros para que os podáis Descargar el proceso de incremental de archivos por tanto lo que voy a hacer es crear una carpeta llamada número 1 carpeta 1 dentro de proyecto uno voy a crear la carpeta número 1 por qué Porque a medida que vaya avanzando el proyecto voy a crear la dos la tres la cuatro y así luego podréis ver como un histórico de cómo se ha ido creando el proyecto aparte de que lo tenéis grabado en vídeo pero tendréis los archivos de paso a paso bien dentro de la carpeta número uno Ahora sí atención estoy en htdox web Apps Proyecto 1 número 1 dentro de esa carpeta número uno voy a hacer una carpeta que almacenará las bases de datos que podéis llamar como queráis pero que yo voy a llamar bebé por Claridad voy a empezar ahora empezaremos con bases de datos con el Security voy a empezar contando muchas cosas a la vez primero que voy a contar es conviene Llamar a una carpeta que va a contenidos bueno en principio conviene llamarla así por Claridad pero no conviene llamarla así por seguridad por qué Porque si alguien se pone a probar a ver si piratea tu web es un clásico decir Oye a ver si tiene carpeta TV y a ver qué encuentro en la carpeta de B vale por tanto podríamos Llamar mis bases de datos mis bebés mis lo que sea incluso algún nombre que no tenga nada que ver con las palabras base de datos para que la gente no pueda llegar a esa carpeta vale pero de momento hoy para fines docentes la vamos a llamar bebé esa carpeta ahora mismo está vacía la carpeta bebé por tanto lo que voy a hacer es ahí dentro crear una base de datos la base de datos que vamos a empezar usando hoy es una base de datos en formato sqlite la base de datos sqlite es una base de datos ligera rápida y potente no es tan segura Como por ejemplo mysql pero tampoco es tan pesada tampoco es tan dificultosa de usar por tanto vamos a usar esta base de datos como base de datos ligera para desarrollo rápido y para tener un primer contacto con las bases de datos php en la mayoría de ocasiones ya viene preparado para trabajar con ese culite hace falta instalar una extensión pero tanto si usáis el Sam como si subís la aplicación a un servidor de la sociedad a un Hosting comercial Prácticamente todo el mundo tiene instalado la conexión de php con sqlite Por tanto la manera original La queremos al final de trabajar con bases de datos es a través de programación php pero cuando estás aprendiendo la primera vez que empiezas a aprender base de datos es un poco estaba aprendiendolas directamente con programación y está mejor usar un programa que terminó la visual te enseña a gestionar bases de datos Y cuando ya sepas de qué va el tema Entonces no trabajas con programación Así que lo que vamos a hacer En definitiva es descargar un software a continuación que nos permitirá tener una interfaz gráfica para trabajar Mucho mejor mucho más fácil las bases de datos en ese culite lo que voy a hacer por tanto es empezar Descargando un software que me permite gestionar estas bases de datos de manera visual hay un software que a mí me gusta mucho que se llama adminer voy a entrar en Google voy a poner adminer fijaos que dice el primer enlace adminer.org Data base management in single page free fire es decir gestión de bases de datos en un único archivo php lo cual está muy bien a día de hoy diréis Bueno no veo la diferencia pero una vez empezamos a profundizar con base de datos veréis que tener este sector en un único archivo es algo bastante cómodo voy a hacer clic dentro de adminer.org veréis que os lleva a la página principal del proyecto donde tenéis un enlace de descarga aquí está y lo que voy a hacer es Buscar enlace de descarga momentín que deshaga el zoom Download veo aquí el botón Download en este momento en el momento de grabar Este vídeo tenemos la versión 334 del 7 del 3 del 2012 bien el 3 de marzo hago clic y a continuación si voy a la zona de Download puedo elegir que voy a descargar puedo elegir Descargar el 334 si lo descargo solo en inglés son 208k si lo descargo todos los idiomas son 355k O sea que es que tampoco van en una parte y luego para más adelante aunque tampoco lo vamos a usar tenemos el adminer para mysql pero recordar que voy a mostrar para el Security con lo cual el de mysql hoy no nos hace falta vamos a descargar el primero adminder 334 con todos los idiomas hago clic con toda probabilidad de ir a la página de source.net en principio mi descarga debería empezar automáticamente si no haré clic en ese Direct link desde el principio en pocos segundos de empezar y ahí lo tengo ya está iniciando está descargando y ya lo tengo lo que voy a hacer ahora probablemente se me ha descargado en descargas lo tenéis en la carpeta de usuario descargas Mirad atención lo voy a copiar voy a mostrarlo lo voy a copiar me lo voy a pegar me lo voy a pegar no en cualquier lado sino que lo voy a copiar lo voy a pegar Perdón en la carpeta de B os acordáis la carpeta de B que habíais hecho pues o bien lo corta y se lo pegáis o bien lo copiáis lo pegáis y ahora ya por último lo que voy a decir es que por comodidad Es que este archivo se llama adminer 334 pues yo lo voy a llamar simplemente Mirad voy a editar el nombre para llamarlo adminer punto php y así cuando lo llame desde la URL será mucho más fácil llamarlo y reduciré bastante la probabilidad de error una vez más voy a acabar Este vídeo diciendoos que adminer es un programa con el que vosotros Vais a poder gestionar bases de datos también cualquier persona que entrara podría gestionar vuestras bases de datos por tanto Generalmente en un proyecto php lo que se hace Es cuando acabas de desarrollarlo quitas upminder para que no cualquier persona pueda entrar o si no lo quitas por lo menos lo renombras con un nombre que solo tú conozcas para que nadie pueda entrar a esa interfaz de gestión si ya lo tengo copiado en el sitio si ya no tengo copiado en la carpeta correcta fijaos voy a mirar en qué carpeta estoy atención Mirad ht dogs web Apps proyecto uno bebé Pues ahora voy al navegador y pongo la palabra mágica pongo localhost para decir que quiero ir a mi propio servidor web Apps barra Proyecto 1 barra bebé barra adminer punto php larga Pero bueno poco a poco acostumbraréis Y si todo ha ido bien y él está encendido y aparte está encendido cuando haga Así cuando pulse enter si he puesto bien la ruta llegaré a la pantalla de login es decir estaré ejecutando ese Script de adminer tras lo cual se medirá vale Yo soy adminer así que dime a qué base de datos quieres acceder es un motor es un gestor de bases de datos es una interfaz de gestión de bases de datos que admite varios tipos de bases de datos como vemos por defecto admite mysql admite ese culite 2 postre sql Oracle y Microsoft sql diréis Oye salvoracle todos los demás llaman algo sql bien sql quiere decir searchquery Language o lenguaje de peticiones de búsqueda y es un lenguaje bastante estándar que nos permite crear bases de datos eliminar bases de datos introducir registros Buscar registros Borrar registros actualizar registros Lo bueno que tiene aprender sql es que una vez aprendes sql prácticamente ya sabes trabajar con todas las bases de datos que trabajen con sql cada base de datos tiene pequeñas variaciones en el lenguaje alguno trabaja con puntos otro con comas otro obliga a cerrar con punto y comal al final otro no pero son pequeñas diferencias vale por tanto sql es un lenguaje que conviene aprender porque una vez lo aprendes una vez ya lo tienes para prácticamente cualquier motor lo que vamos a hacer nosotros y esto que he dicho de hecho lo Vais a comprobar de trabajar de ese culito a trabajar con mysql prácticamente es lo mismo vamos a trabajar con ese colite 2 que es el que mejora está soportado en php5 atención sqlite 2 y no ese culite 3 por tanto voy a elegir el circulito 2 y a continuación haré login voy a hacer login y os vais a dar cuenta de que ese culite 2 no tiene contraseña no tiene usuario y contraseña por tanto al hacer login simplemente entra dentro de la interfaz de administración Esta es una de las diferencias de Security con mysql hasta que no digas usuario y contraseña lo vas a entrar lo cual hace que es más seguro es más estable pero también Es más pesado de configurar porque hasta que voy a introducir usuario y contraseña no vas a poder hacer nada ese culito En cambio es Quítame la página y vamos directamente a desarrollar Aunque luego evidentemente la aplicación es más insegura que con Myers bien no tenemos una base de datos todavía lo primero que vamos a hacer es eso está un poco es poco español es ingrese nueva base de datos vale que es lo mismo que crear nueva base de datos Así que vamos a hacer clic ingresar una base de datos y vamos a elegir un nombre para nuestra base de datos el nombre es el que queramos que el que queramos evidentemente sin espacios evidentemente sin ñes ni acentos y debe acabar con la extensión punto bebé de Data beige por tanto yo voy a hacer una aplicación que va a ser Mira voy a llamar a esta base de datos t2t no t4t porque voy a hacer una aplicación que se va a llamar tools for teachers hay herramientas para profesores y por tanto la base de datos la voy a llamar t4t la base de datos se tiene que llamar igual que la aplicación no Simplemente lo he hecho por Claridad el nombre es el que vosotros queráis pero a continuación tengo que poner punto db la base de datos tiene que tener la extensión punto de B si ahora pulso guardar atención incluso guardar mi base de datos ya está creada claro me dice Mirad atención base de datos t4t.tv nueva tabla no existen tablas como van a existir tablas Acabo de crear la base de datos bien Ahora paso por él solo quiero antes de acabar Este vídeo que comprobéis que si he creado la base de datos t4t.tv ahora en vuestra carpeta db existe un archivo llamado t4t o como sea que coincide con el nombre que habéis puesto es decir al crear una base de datos adminer ha creado esa base de datos en el en la estructura de directorios por vosotros no la tenéis que tocar Ni se os ocurre eliminarla simplemente quiero que comprobéis que está ahí porque a continuación vamos a estar trabajando dentro de ella evidentemente si acabamos de crear nuestra primera base de datos lo que vamos a hacer a continuación es crear tablas dentro de la base de datos si la base de datos es la máxima unidad de organización el siguiente es un nivel es la tabla la base de datos contiene tablas ahora mismo nuestra base de datos no contiene ninguna tabla no existen tablas evidentemente la acabamos de crear para crear una nueva tabla simplemente hacemos clic ahí en el enlace nueva tabla tras lo cual atención va a aparecer este formulario crear tabla donde se nos piden dos cosas primero el nombre de la tabla y segundo cada una de las columnas de la tabla llegado a este punto es cuando tenemos que empezar a planificar ahora mismo es difícil planificar porque todavía no sabemos ni qué le vamos a pedir a la aplicación ni que nos puede dar básicamente lo que tenemos que hacer aquí es prever qué datos vamos a necesitar Que guarde la base de datos si nos equivocamos si por lo que sea nos sobran Campos o por lo que sea nos faltan Campos luego se puede modificar esta base de datos para Añadir y para quitar como poder se puede pero Alzheimer no es excelente en eso en modificar bases de datos es excelente crear es excelente gestionar pero no es modificar por tanto en Alzheimer y en ese culité es recomendable acertar a la primera cuando veamos php my admin para trabajar con mysql es un sistema más pesado pero también es más maleable en cuanto que en cualquier momento puedes cambiar lo que sea yo suelo recomendar este consejo es un poco como una gran animalada vale pero suelo recomendar el dicho de más vale que sobre que falte me veréis que muchas veces en mis bases de datos en las tablas pongo los campos que yo creo que voy a necesitar y luego pongo el campo extra 1 extra 2 extra 3 estará 4 porque siempre manejando una aplicación me doy cuenta de que quería guardar más cosas de las canciones que recibo parecía por todo me dejo como unos Campos ya preparados para usar Así que lo primero que vamos a hacer en esta aplicación y yo os diría que esto que voy a hacer se hace prácticamente cualquier aplicación es crear una tabla llamada usuarios donde cualquier usuario podrá entrar en esta aplicación y registrarse por tanto usuarios y a continuación lo que voy a hacer este es el nombre de la tabla es en el nombre de la columna voy a especificar qué datos qué columnas va a guardar esta tabla el primer dato que voy a guardar es evidentemente usuario será el nombre con el que el usuario se registre el segundo dato será la contraseña que haya elegido no pongáis contraseña poner contraseña o contraseña con NY o lo contraseña con N y latina o lo que queráis voy a poner contraseña lo que sí que es importante es recordar lo que ponemos aquí porque luego desde php llamaremos a los datos de la base de datos con este nombre contraseña a continuación voy a crear un campo Yo sé que vosotros ya está y ahora que me hace falta más pues me hace falta más datos en esta base de datos en esta tabla porque a continuación voy a poner una columna llamada utc la columna utc yo la pongo prácticamente en todas las tablas utc es la cantidad de segundos que han pasado desde el día 1 de enero de 1970 que me permite saber ese usuario cuando se creó por si llega un usuario y me dice oye Es que mi usuario no me lo cree yo o me lo cree la semana pasada O tal Esto me sirve para saber diciendo la verdad o no hacer cuando se creó su usuario siguiente un campo llamado IP cuando se creó este usuario desde que IP se creó alguien te dice no crea de un usuario en tu aplicación entonces pues mira igual no ha sido tú pero Alguien ha creado un usuario con esta IP vaya hay que guardar esa información segundo Perdón tercero el navegador por el navegador que estaba usando es el usuario cuando se registró por primera vez y ahora hay otros Campos que podemos poner a veces habéis observado como cuando hago clic fuera de la tabla se añade automáticamente un campo más ahora voy a Añadir algún campo más como por ejemplo y esto ya depende de vosotros tengo el usuario tengo la contraseña tengo el nombre de este usuario no tengo el email este usuario no lo quiero tener depende de vosotros verdad depende de vosotros los datos que queráis recoger de ese usuario yo como mínimo le voy a decir que me diga su nombre su apellido y luego ya el usuario elegirá los apellidos o uno y quiero recoger también el email por tanto veis que aquí tengo estos Campos y a continuación lo que voy a hacer que ahora paso por ahí es poner cuatro Campos extra por si acaso luego decido que quiero recoger más datos extra 1 extra 2 extra 3 y extra 4 fijaos que la tabla que parecía que no iba a ser mala cara de usuarios y al final tiene unos cuantos Campos para recoger datos a continuación vamos a hablar de los tipos de datos y de la longitud en tipos de datos lo que hacemos elegir Qué tipo de datos va a alojar ese campo en mysql Hay un montón de tipos de datos que podemos alojar en el circulito como veis siempre estoy diciendo que son datos simplificados tenemos únicamente la posibilidad números enteros real números reales más complejos un campo numérico un campo de texto y un campo de Blog un campo de burbuja donde podemos meter muchos datos me recomendación solo si estás seguro que un campo va a contener números solo en ese caso le pones integer para todos los demás casos le ponéis texto si no lo sabes ponen todos texto usuario evidentemente va a ser texto contraseña va a ser texto utc es la cantidad de segundos que han pasado cantidad de segundos es un número en principio nunca tiene que ser una fecha por tanto utc voy a dejar en integer IP atención las ips tienen números pero también puntitos entre los números por tanto es texto Si tienen puntitos es texto que he cambiado el campo que no era la IP text navegador texto evidentemente el nombre texto apellido texto veis Prácticamente la regla es ponerlo todo en texto y a continuación incluso los extra porque no sé para qué los voy a usar por tanto igual no los uso esto el diseño de bases de datos es fatal verdad Porque alguien me diría no es horrible estás creando un espacio que no vas a usar No es cierto técnicamente la aplicación iría más lenta esto es como siempre el desarrollo tienes que intentar prever Cuál va a ser la carga de tu aplicación si mi aplicación en lugar de usar que te diría yo voy a decir algo por decir 5ks para cada registro usa 6 Cash lo que tienes que pensar es cuánta gente con mi aplicación porque eso es para un registro Cuántos registros se van a usar y para el final la diferencia es 50 porque la base de datos ocupe de 50 a 60 megas pues Oye si no la va a usar mucha gente y al cabo de un año la base de datos puede ocupar 50 a 60 megas me da igual que ocupe 50 que ocupe 60 o sea tres Campos extra me vale la pena esos 10 megas de más si de repente la aplicación la empieza a usar mucha gente y la cosa pasa de usar 500 a 600 megas entonces Bueno ya son 100 megas de base de datos eso ya es importante si la aplicación la empieza a usar muchísima gente puede llegar incluso a ocupar de 500 Gb a 600 GB que una base de datos ocupe 100 gigas de más quieras que no sigues importante vale por eso Si yo sé que esta base de datos va a estar sometida a mucha presión y a mucho tráfico la optimizaré al máximo si yo sé que es una aplicación que igual no usa mucha gente pues tal una cosa es lo que realmente yo no lo sé yo lo creo vale Yo creo que no la bolsa de mucha gente y luego al final igual hay avalancha pero siempre estamos en juego de hacer conexiones el campo longitud me permite definir Cuántos caracteres se van a guardar en cada uno de los campos una vez más voy a repetir muchas veces más vale que sobre que falte si yo tengo muchos caracteres posibles y luego uso menos no pasa nada si yo he puesto pocos caracteres y luego lo acepto más veré que las cadenas me cortan vale veré que la información que introduzco se me corta Así que yo recomiendo al principio si no sabemos todavía exactamente qué vamos a introducir poner un valor sobrado Quiero que pongáis en cada uno de los campos 255 caracteres una longitud posible de 255 caracteres Que prácticamente para todo lo que va a guardar esta tabla de esta aplicación será suficiente y una vez que lo tenemos vamos a sacar nada más de lo siguiente vamos a pulsar sobre guardar se me ha quedado un campo vacío bajo No pasa nada cuando ese culite crea la base de datos todos los campos que se han quedado vacíos los quita automáticamente pulso guardar y fijaos como ahora ya existe una tabla llamada usuarios dentro de la tabla de usuarios puedo atención visualizar Su contenido que ahora mismo me dirá que no existen registros porque acabo de crear la tabla puedo mostrar la estructura puedo modificar la estructura Aunque no me deja hacer muchas cosas y puedo crear un nuevo registro Así que a continuación vamos a empezar a trabajar con esta tabla de esta base de datos voy a hacer una nueva tabla para enseñar Cómo se borran tablas por tanto hago clic aquí en Nueva tabla aparece el formulario mi tabla o mi table campo 1 campo 2 entero 2 y 2 cuarto tengo ahora dos tablas como podéis ver mi Table y usuarios supongamos que ahora quiero eliminar una tabla para eliminar una tabla tengo que ir Primero aquí arriba al nombre de la tabla fijaos aquí arriba tenéis las migas de pan que me dice que estoy en el Security 2 servidor t4t.tv haciendo hay clic en p4pdb aparece en la cantidad de tablas que tenéis si yo selecciono una tabla por ejemplo voy a seleccionar mi table no hagáis clic porque entraríais dentro de ella sino que selecciono aquí yo puedo optimizarla yo puedo vaciarla o puedo eliminarla en inglés vaciar struncate para ser igual o lo tenéis en inglés y eliminar el Drop así que siempre que veáis vaciar o truncate equivale a no eliminar la tabla pero eliminar sus datos Y siempre que veáis eliminar o Drop equivale a perder tanto los datos como la estructura de la tabla si yo pulso eliminar por supuesto confirmación Está seguro sí y como podéis comprobar acabo de eliminar una tabla de la base de datos a continuación voy a seguir trabajando con usuarios por tanto voy a hacer clic dentro de un usuario lo primero que voy a hacer por tanto es empezar creando un nuevo registro os voy a decir que en sql hay cuatro operaciones básicas que es inserción modificación selección y borrado inserción me sirve para crear nuevos registros borrado evidentemente me sirve para borrarlos actualización me sirve para no borrarlos sino modificarlos cambiar un dato del registro y selección es un proceso con el cual simplemente miro lo que hay otra cosa que os voy a decir es que Mirad si yo por ejemplo atención le doy a visualizar contenido hay una línea que siempre pasa muy inadvertida que es la que menos inadvertida tenía que pasar que es esta línea de aquí inadvertida porque veis que os dice algo pero no entendéis lo que os dice y pasáis de ella pero esa línea cuando yo visualizo contenido realmente lo que estoy haciendo es seleccionar todo de la base de datos usuarios con un límite de 30 elementos eso es sql Lo bueno que tiene adminer y con pH me ocurre igual para mayor sql es que cada operación que hagáis vosotros manualmente os la va a traducir a sql por tanto cada operación que hagáis fijaos lo que pone ahí de las cuatro operaciones Select es la operación de selección es la operación que te permite ver cosas en pantalla Bueno pues voy a crear un nuevo registro evidentemente tengo una base de datos vacía y Quiero crear un primer registro por tanto hago clic en este enlace nuevo registro aparece un formulario y yo simplemente tengo que rellenar Así que tenéis que rellenar pues lo que os pide para ese usuario yo voy a crear un usuario con contraseña houcasa el utc no lo puedo saber más adelante lo pondrá automáticamente el programa ya lo veréis pero no lo puedo saber por tanto voy a poner 0 en IP voy a poner cero siempre que no sepa algo pongo un cero navegador voy a poner cero nombre esto ya lo sé cómo se Vicente apellido a ratalá Y si queréis ponéis allí el segundo apellido email@hotcard.com y extra 1 extra 2 extra 4 de momento los voy a dejar sin nada son campos de por si acaso Mira atención Ahora quiero que miréis la pantalla pulso sobre guardar y cuando pulso sobre guardar lo que ha hecho el programa vaya no me lo he dicho lo que ha hecho el programa es una operación de inserción a insertado un nuevo elemento Así que mostrando Cómo se lee pero realmente ha hecho un inserto cuando yo tengo un elemento cuando yo ya tengo un primer elemento dentro de esa tabla yo puedo hacer varias cosas Si lo quiero eliminar la canción pincharía aquí y pincharía el botón eliminar a lo voy a eliminar de momento si lo quiero clonar simplemente realizaré una clonación duplicaría el elemento si lo quiero modificar atención hago clic en modificar y puedo modificar los datos por ejemplo voy a dejar un apellido Solo cuando acabéis evidentemente pulso al guardar y veis ya lo he modificado y ahora una cosita un truquete de mayberg modificar con el tiempo se convierte en algo Bastante pesado porque cada vez hay que pinchar entrar salir del formulario hay un truquete que es que si quieres modificar algo haces doble clic en lo que quieras modificar y se convierte en un campo editable doble clic ojo ya lo he modificado vale Y ahora qué ahora Cómo puedo decirle Ya está ya he acabado con este botón llamado guardar actualiza los cambios vale por tanto tenéis ya como veis la posibilidad de seleccionar los campos de la base de datos insertar nuevos Campos actualizar los campos y borrar los registros realmente más y los campos si ya tenemos una primera tabla lo que voy a hacer ahora es crear nuevas tablas y un poco prever que voy a necesitar en esta aplicación por tanto Aunque más adelante haremos planificación con papel con diagrama de flujo y todo eso de momento vamos a pensarlo un poco de cabeza yo tengo usuarios ya tengo mi tabla de usuarios esta Va a ser una aplicación donde un profesor que es un usuario podrá crearse varios cursos cada profesor verá solo sus cursos al entrar y luego en cada curso voy a poder meter alumnos y luego para cada curso voy a poder hacer hojas de asistencia Así que yo voy pensando yo voy hablando en voz alta y al pensar voy Sabiendo qué tablas voy a necesitar por qué ya tengo una tabla de usuarios que equivale a profesores en este caso he dicho que cada profesor puede tener varios cursos Así que hago clic en nueva tabla y voy a hacer una tabla llamada cursos y a continuación voy a poner nombres a las columnas una columna sería por ejemplo el nombre del curso Ey sin espacio como mucho si queréis guiones bajos pero si podéis ponerlo todo junto mejor otra columna imprescindible que esta se le olvida mucho a la gente es la columna que me permite relacionar esta tabla con la tabla de profesores yo no puedo poner un curso sin especificar a Qué profesor corresponde ese curso porque si no luego no podré distinguir no podré filtrar no puede decir a este profesor muéstrale sólo sus cursos y no los de todos los demás Así que profesor en principio ya estaría lo que pasa es que ahora ya sabéis que voy a hacer una tabla llamada utc cuando se creó ese curso una tabla IP y una tabla navegador tengo las costumbres de crear siempre esas Por qué pues tú Imagínate que esta aplicación la empieza a usar mucha gente de repente un día soporte técnico te llamaba profesor que dice Oye es que en mi panel hay un curso que yo no he creado que igual tienes razón pero por lo menos tienes un registro de Mira yo no sé si tú lo has creado Pero alguien lo ha creado este día a esta fecha a esta hora con esta IP y con este navegador y decir Ah sí creo que me fui yo vale En definitiva todo lo que hagáis en una aplicación tiene que quedar registrado si por lo menos pensáis no pero si no pasa nada Es que no habéis programado vale al final siempre pasan cosas por tanto el tema es tenerlo todo registrado y luego porque no mis Campos extra uno extra dos extranjero Y extra 4 extra 3 y extra 4 yo tengo la sensación de que en esta tabla algo se me está olvidando para luego del desarrollo veremos si se me ha olvidado algo se me olvida algo tengo los campos extra nombre del curso evidentemente va a ser de texto profesor evidentemente va a ser de texto utc va a ser entero y p va a ser texto navegador va a ser texto extra uno va a ser texto extra 2 va a ser texto extra 3 va a ser texto y extra 4 va a ser texto y voy a poner en cada uno de ellos una longitud de 255 empezar desde abajo para que no me moleste el pop Ya lo tenemos cuando ya lo tenemos pulsamos sobre guardar y ya tenemos la siguiente tabla creada voy a continuar voy a crear más tablas hemos dicho que cada profesor podía tener varios cursos en tu panel de control bien ya tenemos varios cursos ahora cada curso puede tener alumnos por tanto Crea una tabla llamada nombre de la tabla alumnos qué va a tener esta tabla primero nombre segundo apellido tercero curso al que pertenece curso cuarto profesor al que pertenece porque hace falta poner el profesor porque dos profesores pueden tener un curso que se llame igual pueden ser de dos centros de formación que por lo que sea tengan un curso que se llama igual no puedo poner solo curso ni solo profesor tengo que poner los dos para identificar y ahora una vez más IP utc navegador y los campos extra 1 extra 2 extra 3 y extra 4 los campos ya sabéis nombre es texto apellido es texto curso es texto realmente todo es texto menos utc ips texto utcs entero navegadores texto y así con cada uno de los campos y luego dentro de la extensión poner a todos 255 y una vez lo tenéis guardais Y tenemos ya nuestra tercera tabla creada en la pantalla y ahora tengo un framework tengo un marco de trabajo mínimo para trabajar tengo profesores tengo cursos tengo alumnos con eso qué puedo hacer un montón de cosas puedo hacer exámenes puedo hacer ejercicios puedo hacer en este caso lo que voy a hacer una aplicación que luego transformaré en aplicación para móvil para marcar asistencias para cuando un profesor entra en clase no tenga que una hoja de firmas marcar las firmas que luego se pierden y tal sino que lo puedo hacer de manera electrónica cada vez que entre que diga tanto marcados el que no ha marcado y que luego por ejemplo al final de la formación diga Quiero ver estadísticas Quiero ver quién ha venido cada día Quiero ver cuáles selecciones una base de datos por tanto por último dentro de esta base de datos no dos últimas gran dos tres tablas voy a crear una nueva tabla que voy a llamar asistencias y voy a empezar voy a marcar simplemente los siguientes Campos voy a marcar alumno el alumno que asiste o no el profesor del cual depende ese alumno el curso fijaos que realmente te falta con el alumno profesor y curso si un alumno cuando se ha registrado ya depende de un profesor o de un curso realmente no porque tener en cuenta que un alumno puede ser matriculado en varios cursos o que se puede dar la coincidencia de que un alumno esté matriculado en varios centros no yacen dentro de un mismo pero que al final este en la plataforma si esta plataforma lo usan varios centros entonces son cosas que en un principio puedes pensar que no pasan pero luego de repente te encuentras qué pasan y de repente encuentras que tu base de datos no está preparada para eso le tienes que modificar Así que este base de datos es piensa mal y acertarás vale piensa en lo peor que te pueda pasar y diseña tu base de datos según ese lo peor que te pueda pasar que luego no pasa pues Oye no pasa nada tienes ya la base de datos diseñada pero luego pasa está preparada Ahora sí da igual lo mal que pienses Porque siempre pasa algo que no habías tenido en cuenta qué se va a hacer Y a partir de ahí vamos a marcar curso Perdón vamos a marcar IP vamos a marcar utc vamos a marcar navegador y vamos a marcar un campo llamado asistido será igual así o será igual a No asistió esa clase sí o no y mis Campos por supuesto extra 1 extra 2 extra 3 extra 4 porque 4 y no 8 Pues por qué no podríamos poner 8 o 6 o 10 o cada uno de los que crea convierto esto evidentemente a text todo menos el utc y luego por supuesto dos cinco 255 caracteres para cada uno de los campos guardo y ya lo tengo y voy a hacer una tabla esta tabla es prácticamente como la de usuarios que os recomiendo que hagáis en todas y cada una de las aplicaciones que hagáis va a ser una tabla que se va a llamar logos logs son registros los logs se van a encargar de registrar cada movimiento que se haga en el portal veréis esto ya lo he hecho en cada tabla no está registrado cuando se crea un alumno y cuando un alumno accede y cuando un profesor crea un curso pero con log se trata de que cada vez que alguien haga clic en cualquier parte de la plataforma eso quede registrado por varios motivos los principales dos son por estadística y por seguridad pero un momento dado no puedes perder el control de tu aplicación y que alguien te pregunte Oye cuántos habitantes tiene tu huevo al día y tú yo que sé vale con los logs tú registras todo lo que pasa y en un momento dado puedes hacer una petición a base de datos y decir Quiero saber cuántos han accedido desde las 12 de la noche hasta las 12 de a las 12 de anoche a las 12 de la noche y te dice pues tienes tantos clics tienes tantos usuarios únicos y por lo que sea quieres decir Pero quiero saber de esos Cuántos entran con Mac Cuántos entran con Lino Cuántos entran con tal por esta vale la segunda razón es por seguridad un día llega un usuario te dice Oye es que me ha volado mi cuenta de usuario y tú dices quién te la ha borrado Pues en los blogs quedará registrado todo lo que todo el mundo haya hecho vale Así que a menos que sea alguien sepa mucho y haya sabido borrar sus huellas Pero bueno eso es un poco Inevitable Así que los logs voy a empezar poniendo utc y ahora permitidme que duplique un poco Voy a poner anio anillo es año pero no puedo ponerme araña Así que pongo año lo de ponerle ahí latina os podéis imaginar porque es verdad que si no la pongo queda un poco mal pongo mes pongo día pongo hora pongo segundo todos los datos no están contenidos ya en el utc Sí pero en la tabla del suelo duplicar pongo IP pongo navegador y pongo usuario para saber si el usuario que ha hecho clic está registrado o es un usuario externo y luego por supuesto mis campos de extra 1 extra 2 extra 3 extra 4 y luego todo va a ser texto menos el utc y todo va a tener 255 caracteres con lo cual al crear esta base de datos prácticamente mi base de datos habría quedado desbozada y ya Podría empezar a programar tengo ya una base de datos como veis que contiene alumnos contiene existencias contiene cursos blogs y usuarios otra cosa que os voy a decir antes de continuar es que el proceso de desarrollo que voy a seguir en este ejercicio es primero Dinámico y luego estático eso qué quiere decir que para este ejercicio voy a hacer una aplicación que primero funcione aunque sea súper cutre visualmente y luego la estilizaré hay otro proceso de desarrollo que es primero estático y luego Dinámico hace una aplicación en html que tenga la estructura que sea muy bonita pero que no funcione y una vez que la tienes visualmente entonces la pones en funcionamiento entonces Le pones php y ese culite o mysql para que funcione Qué es mejor en cada caso pues depende de lo que quieras por ejemplo tienes un cliente al que le prima más el que te dice Oye primero Quiero ver cómo se ve esta aplicación y luego ya continuaremos trabajando pues en ese caso suele ser mejor Primero estático luego Dinámico pero si es una aplicación que estás desarrollando tú y dices Mira me da igual lo que cómo se vea pero de momento tengo en la cabeza lo que quiero que haga pues en ese caso no empiezo en html fss empiezo directamente haciendo que funcione aunque sea fea y luego ya le darás estilo con html y css voy a crear un segundo paso para este proyecto y para eso lo que voy a hacer es lo bueno que tiene de usar Ese culite es que voy a usar voy a llegar a Proyecto Uno voy a copiar la carpeta 1 de atención Mirad copia pegar y tengo la carpeta uno copia esa carpeta evidentemente la voy a renombrar a dos y dentro de esa carpeta 2 voy a continuar trabajando por eso atención Mira todos a la pantalla he copiado he pegado he creado un duplicado lo he renombrado bien pero ahora en el navegador ya no le puedo decir que estoy trabajando en la carpeta ahora tengo que decir ojo ahora estoy en la carpeta dos porque si no os puede pasar que me hace hacer modificaciones no veis los cambios porque estáis todavía en la carpeta anterior esto lo voy a hacer varias veces durante el desarrollo cada vez que cambio de carpeta cambiáis tanto en el directorio como en edit como a continuación ahora ya aquí por fin voy a sacar el headit porque voy a empezar a programar voy a meter dentro de la carpeta 2 arranco y voy a hacer lo siguiente mirada dentro de dos voy a poner en la carpeta raíz en la carpeta por defecto que tiene la carpeta raíz no tiene nada normal y Mirad ahora voy a crear nuevo documento lo voy a guardar como y me voy a ir mira todos la pantalla me voy a ir al disco duro local a la carpeta Sam a ht dogs a web Apps a Proyecto 1 a la carpeta 2 y ahí voy a crear un documento nuevo llamado index.php No sé si este documento va a tener php o html por eso le pongo php y así puedo hacer lo que quiera index.php se lo recargo atención a la pantalla veréis que ya aparece en blanco lo cual quiere decir que estoy trabajando con este archivo guardo recargo mirar estoy trabajando con este archivo os voy a contar a continuación un truco que me contó ayer un alumno y que creo que debéis conocer todos ese truco y es que me dijo que si te vas a editar en hebit y te vas a preferencias y te vas a editor resulta que hay una opción aquí abajo dentro de editor que se llama autoguardar archivos cada x minutos lo cual viene bastante bien porque así te lo guarda automáticamente por tanto entrar y autoguardar cada un minuto aún así tendremos pulsar control S de vez en cuando para guardar pero por lo menos de vez en cuando guardar automáticamente pulsáis por tanto y comprobáis que estáis trabajando con el mismo archivo a la izquierda y a la derecha voy a empezar por tanto creando el archivo index.php el archivo index.php sería la bienvenida la decir Oye ya estás en esta aplicación Qué puedes hacer en esta aplicación puedes hacer dos cosas Si ya tienes un usuario introduce tu usuario y tu contraseña y entras a tu zona privada directamente no tienes un usuario regístrate Y entonces podrás entrar a tu zona vale por tanto voy a hacer un pequeño html mini archivo html que dirá tendrá un Body esto lo hago un poco por limpieza y dentro html voy a poner un texto h1 lo pongo didix y nada más adelante Lo pondré que se llame t4t y en h2 voy a poner tools for teachers guardo recargo compruebo t4t for teacher no voy a utilizar nada más y ahora lo que voy a hacer es introducir una nueva etiqueta que no os he enseñado pero que os la enseño ahora es una chorrada es la etiqueta hr es horizontal rull hace una línea horizontal por tanto pongo hr Mirad y lo que hace en la pantalla básicamente es esto una línea horizontal la hr me sirve cuando estoy esbozando aplicaciones para separar zonas de una manera muy ruda digamos Así que voy a hacer ahora un formulario Incluso el formulario voy a poner un parágrafo ya tienes un usuario bueno el parágrafo lo he metido antes del formulario ya Tienes usuario accede y ahora lo que voy a hacer porque aquí me he rayado Esto ni esto es Body ni lo de abajo html esto es Y esto es body y ahora sí voy fenomenal ya puedo empezar a trabajar ahora dentro del foro voy a poner recordáis dos cosas el action que es quién va a procesar ese formulario login.php un archivo que no existe todavía y voy a crear a continuación y se van a login encargado de tomar nuestros datos comprobar si existen en la base de datos Y si existen darte acceso y si no existen negarte el acceso En qué método lo voy a usar si no digo nada por defecto usaré el método post recordáis esto es más seguro ya que impide trucar el formulario y ese formulario va a tener básicamente dos Campos un campo de tipo texto con el name usuario y el Place holder introduce tu usuario y un campo también de tipo texto no en este caso password de tipo contraseña password lo tengo que poner pero luego en name puedo poner lo que quiera voy a poner contraseña es no introduce tu contraseña input type de tipo submit evidentemente el botón de enviar guardo recargo vamos a ver qué aspecto tiene esto ya Tienes usuario accede usuario contraseña enviar puedo poner lo que quiera evidentemente al enviar me dice que no es historia login lo que estoy haciendo es el formulario bien ya tengo esto por aquí podría ponerlo a línea seguida podría ponerlo cada campo arriba del otro me da igual así es una cuestión de maquetación no afecta la funcionalidad Y por último voy a poner aquí otro hr y voy a poner una etiqueta a que me llevará a Nuevo usuario punto php diré no Tienes usuario Haz clic aquí guardo recargo y veo que tengo el título el subtítulo ya Tienes usuario formulario de entrada no Tienes usuario entonces Haz clic aquí te vas a poder registrar hago clic aquí evidentemente me lleva un objeto que todavía no existe a continuación vemos como derivados de este formulario de entrada tengo que crear dos páginas más una para que el usuario que existe se pueda lograr y otra para que el usuario que existe se pueda que no existe se pueda registrar a continuación por tanto me voy a ir a esa carpeta y voy a hacer la calculadora voy a Proyecto 1 voy a carpeta 2 y voy a hacer dos nuevos archivos botón derecho archivo nuevo el primero se va a llamar login.php es decir si aquí he puesto login.php Aquí tengo que ponerlo en punto php porque es lo que el programa Va a encontrar y voy a crear otro nuevo archivo para más adelante llamado nuevo usuario punto php si aquí he puesto nuevo usuario php aquí pondré nuevo usuario php es decir login voy a poner texto plano aquí validaré si tu usuario existe cuarto y el nuevo usuario aquí podrás crear un nuevo usuario atención todos la pantalla Mirad he creado estos dos archivos y ahora si ya tengo un usuario pongo envío aquí valedares de usuario existe y con este no Tienes usuario Haz clic aquí pues aquí podrás crear un nuevo usuario lo que estoy haciendo primero son los huecos con los que voy a trabajar y ahora voy a empezar a rellenar contenido y ahora empieza lo bueno voy a darle contenido a login.php lo primero que hago es crear un archivo llamado php este archivo de login suele ser un archivo de paso quiere decir que prácticamente ni lo vas a ver sino que en un microsegundo va a los datos va a procesarlos va a ver si existen en la base de datos y te va a decir sí o no entonces mira lo primero que voy a hacer recordáis es cazar es capturar los datos que vienen del formulario por tanto digo el formulario me había llamado me había dado un campo usuario y un campo name contraseña así que post Main nombre usuario es igual a poste usuario y lo meto en la variable usuario de php y contraseña es igual a post contraseña más cosas Si el login es satisfactorio yo crear una variable que diga bien has entrado Pero cuidado si a continuación voy a la siguiente pantalla esa variable la he perdido recordáis que las variables se pierden de pantalla como las guardo con variables de usuario las variables de usuarios recordar que requieren dos cosas Una arrancar un session y dos crear valores de usuario vale por tanto el sexo en estar siempre tiene que estar arriba del todo y ahora es cuando voy a realizar una petición a la base de datos las peticiones a la base de datos desde php tienen la siguiente estructura primero realizo una conexión es igual a sqlite - bajo Open y aquí pongo dentro del paréntesis y dentro de las comillas el nombre de la base de datos atención la base de datos está dentro de la carpeta bebé por tanto lo que voy a hacer es escribir db barra p4t punto db es decir completo la ruta completa de la base de datos con eso lo primero que hago es abrir la base de datos y permitir que a continuación realice una consulta es igual a paréntesis y dentro de unos paréntesis voy a ejecutar una consulta una petición a la base de datos yo no quiero insertar un nuevo usuario yo no quiero modificar los datos de un usuario ni quiero eliminarlo yo quiero seleccionar los usuarios quiero seleccionar usuarios y preguntar a la base de datos selecciono los usuarios Hay alguno que tenga el mismo nombre y el mismo usuario el misma contraseña que lo que se ha introducido en el formulario Sí pues entonces una acción No pues entonces otra acción vale Así que la consulta es Select selecciono todo es asterisco Chrome usuarios de acuerdo qué usuarios tenían qué tal las tenía creo que se llama usuarios y en principio el punto y coma Al final nos da una buena costumbre de si ya tenías punto y coma ya lo sabes un poco lioso pero hay que escribirlo Así es este punto y coma es de sql y este punto y comas de php por eso está bien poner punto y coma comillas punto y coma pero yo no quiero seleccionar todo de usuarios Yo quiero seleccionar todo de usuarios sea igual comillas a usuario and contraseña sea igual comillas contraseña qué escrito yo aquí quiero seleccionar aquellos registros de la base de datos donde el usuario y la contraseña coincidan con lo que he enviado en el formulario no quiero seleccionarlos todos quiero que me los filtres estoy haciendo una búsqueda quiero tratar solo el usuario coincidente si lo hay entonces podré ejecutar el código que va a continuación si no entonces se medirá en pantalla no existe ese usuario que has introducido vamos a comprobarlo en la siguiente línea voy a procesar esos datos de la base de datos y voy a poner que el resultado es igual a sql guión bajo fetch guión bajo array de la consulta donde en la conexión voy a ejecutar la consulta Qué hace ese culito de guión bajo fetch guión bajo a Rain lo que está haciendo es la consulta y convertirlo en una matriz recordáis otro día de las matrices aquello que te permitía ver una variable con múltiples índices el otro día lo hacíamos para una agenda hoy no hacemos para una base de datos que al final la agenda podría estar una base de datos lo que haremos ahora es mediante un bucle While vamos a ir uno a uno barriendo todos los elementos de la matriz todos los que haya Aunque en principio debería haber uno debería haber únicamente uno pero bueno usamos esta estructura de control While por eso lo que voy a hacer es paréntesis el código que voy a ejecutar y digo mientras haya elementos en la matriz esto es mientras fila sea igual a ese culite voy a poner aquí ese culité vale Esto sí que es ese culité guión bajo fetch guión bajo arrayado arriba he puesto ese culipecuary y abajo puesto ese culité voy a atrapar elemento del resultado y voy a decir usuario realmente no voy a decir sesión una variable de sesión usuario es igual a fila usuario la variable de sesión contraseña es igual a fila contraseña Y por último voy a poner eco tu usuario existe fuera del While lo que voy a hacer es por último cerrar la base de datos ese quite guión bajo Cloud en la conexión Y por último voy a poner eco tu usuario no existe ya lo voy a comentar lo que he hecho esto que veis aquí es la estructura de control para conectarse a cualquier base de datos ha costado de escribir pero a partir de aquí la voy a copiar y pegar por toda la aplicación la misma estructura siempre Primero me conecto a la base de datos segundo le pido algo a la base de datos tercero ejecuto la petición y cuarto lo que he hecho aquí en este bucle While es decirle que el resultado de esa petición me lo meta dentro de una raíz y pueda hacer cosas ahora voy a decir una cosa aquí voy a obtener el resultado de la matriz si esta petición devuelve un resultado cero si no hay ningún usuario que cumpla Esa condición realmente nunca voy a ejecutar bucle While recordáis el bucle White los ejecuta si se cumple la condición de ejecución por tanto vería directamente tu usuario no existe si esta petición arroja un resultado entonces me dirá tu usuario existe y ya que tu usuario existe Es decir se considera que has hecho bien el login además escribe un par de variables de sesión llamadas usuario y contraseña para que a partir de ese momento se te recuerde tu usuario allá donde vayas porque vamos a ir unos cuantos sitios ahora vamos a probar si funciona este momento vale de cruzar los dedos y comprobar si funciona sino como tuve ningún error al fin miles de cosas pueden haber pasado guardo recargo por si acaso y digo ya Tienes usuario recordamos que tiene un usuario llamado ojocarsa voy a cargarlo bebé adminer usuarios tengo aquí a ver si funciona venga y pongo hokarsa hokasa envío tu usuario existe tu usuario no existe es normal vale Por qué Porque yo le he dicho aquí que ponga tu usuario existe y a continuación le he dicho pon tu usuario no existe Luego parece que ha salido mal Pero ha salido bien Ahora lo importante lo que realmente me importa es volver atrás inventarme un usuario y ver qué dice y dice tu usuario no existe si el usuario no existe nunca se llega a ejecutar el contenido del bucle While luego Aunque parezca que no ya tengo una estructura de control que me va a permitir hacer algo lo que voy a hacer ahora es hacer que el usuario puede ser una puerta estelar digamos voy a hacer lo que se llama en html una redirección que desde una página automáticamente vayas a otra y por tanto voy a escribir lo siguiente Mirad y esto de hecho me voy a escribir una vez y a partir de ahí me lo voy a ir copiando y pegando en todas las aplicaciones voy a poner eco y voy a escribir una etiqueta meta de html que dice http guión equip igual a Uy no tengo que escribir dos o bien si yo voy a escribir ahí es mejor refresh hacer una cosa voy a escribir con comillas sencillas y así puedo usar dentro las comillas dobles refresh content es igual a otra vez comillas dobles 0,1 URL es igual a index. php vamos a ver si funciona haga lo que haga volver a la página inicial En cuántos segundos en 0 segundos de acuerdo recargo vamos a ver escriba lo que escriba de momento parece que no se me devuelve a la página inicial Sí porque me falta aquí escribir Vaya un error la etiqueta de cierre si no la etiqueta meta no la pilla bien vamos a volver a probar me ha devuelto a la página inicial tanto acceda correctamente como no hace la correctamente la cuestión es que ahora Gracias a esta etiqueta meta puedo decir tu usuario no existe guión volviendo a la página inicial en 5 segundos aquí le pongo un número 5 guardo recargo escriba lo que escriba envío volviendo a la página inicial en 5 segundos es un registro incorrecto 5 segundos han pasado y ahora me copio esta este eco y si la cosa ha ido bien Entonces no voy a Index voy a por ejemplo escritorio punto php escritorio principal de la aplicación de estos cursos tus alumnos tu información recargo en 5 segundos No eso será en cero y digo si pongo un usuario incorrecto tu usuario no existe volviendo a la página inicial en 5 segundos pero si tu usuario es correcto me va a dar un error porque esa página no existe todavía escritorio punto php hopksa objeto no localizado voy a completar esta aplicación con un archivo nuevo escritorio punto php que diré felicidades esta es tu zona privada vamos a volver a probarlo tools for teachers enviar felicidades pero si introduzco algo incorrecto me dirá tu usuario no existe volviendo a la página inicial en 5 segundos bien Voy a repasar la conexión lo que hace es abrir una base de datos conexión ya que estoy en ese culite dice ese culite guión bajo Open Abre una base de datos en ese culite y No abras cualquier base de datos sino abre la que yo te estoy diciendo dentro del paréntesis a continuación viene la consulta una vez que has abierto el armario qué quieres sacar del armario qué quieres hacer en el armario quieres sacar ropa quieres meter Ropa quieres cambiar la posición de las perchas qué quieres hacer pues yo le digo quiero seleccionar es quiero algo del armario quiero seleccionarlo todo de dónde porque en un armario tengo perchas tengo cajones tengo cajoneras tengo estanterías con qué quiero trabajar quiero seleccionarlo todo de la tabla usuarios no quiero ni alumnos no quiero el looks quiero trabajar con los usuarios aquí arriba el la base de datos aquí abajo lo llevo la tabla y poco a poco como veis voy especificando más de General a particular que es lo que quiero seleccionarlo todo de la tabla usuarios pero ojo donde se compra una condición esto es como abre el armario y hoy es que tengo el día azul vale Quiero ver cuáles son todos mis pantalones que sean de color azul Entonces le diría quiero seleccionar todo de pantalones donde el color sea Azul Por tanto estoy ignorando todo lo que sea verde rojo negro todo lo demás el Where es una cláusula condicional quiero seleccionarlo todo donde el usuario sea yo para el usuario donde el color sea azul donde lo que sea y ahora le digo Aquí a continuación mis condiciones donde el usuario en la base de datos sea igual al usuario que yo he traído recuerdas fíjate variable usuario es esta variable usuario que yo he creado aquí arriba y la contraseña es igual a esta variable contraseña que yo he creado aquí arriba lo que os puede causar un poco de confusión ahora mismo y es normal es que esta primera palabra hace referencia a la columna en la base de datos Y esta segunda palabra hace referencia a lo que tú has traído del formulario por tanto donde en la columna usuario existe un usuario que se llame igual en el formulario y donde la contraseña sea igual a la contraseña que yo he escrito en el formulario lo cual equivale si yo en el formulario hubiera dicho qué color de pantalones quieres azules equivaldría a seleccionar todos los pantalones que cumplan la condición que sean Azules lo que he hecho por tanto dentro de esta línea vamos a hacer muchas más condiciones la base de datos ahora lo veréis es una selección pero de selección no me la muestra en pantalla todavía sino que yo tengo en la cabeza que yo quiero pantalones azules los barrios y digo Vale mi mente ya no ve patrones rojos solo de patrones azules ahora voy a ver cuál cojo ahora voy a ver qué hago con los pantalones por el momento lo que hago es estar viendo solo los azules el resultado Esta es la línea que un poco puede costar más de comprender es como que ya he visto los pantalones y hago la mano para cogerlos vale el resultado es en esa conexión ejecuta la consulta es como diciendo hasta ahora yo había pensado lo que quería pero no había abierto normal todavía Vale ahora abro el armario con resultado lo que hago es ejecutar esa petición y yo ejecuto esa petición Y qué hago con esa petición yo qué hago meter todo el usuario en una tabla en la pantalla o si existe el usuario cargar unas variables con ese Wild lo que hago son encuesta bastante de entender es recorre uno a uno los elementos de la base de datos Y mételos en una matriz llamada fila Por qué Porque puede haber un usuario o puede haber 10 resultados pantalones azules Pues igual puede haber uno en mi armario o puede haber 10 Así que cárgalos todos en una matriz como el otro día la agenda que podía tener múltiples entradas vale por esto es lo mismo en este caso lo que estoy haciendo Dentro de este bucle While es cargar un par de variables de usuario decir tu usuario existe y decir ves a escritorio punto php las variables de usuario las he escrito para que la aplicación recuerde que ese usuario está registrado en el sistema ese usuario accedido correctamente ahora te voy a decir una cosa yo pienso pero el armario en mi caso voy a pantalones y digo cuando no al armario y encuentre un pantalón azul lo voy a descolgar y me lo voy a poner yo creo el armario y no hay ningún patrón azul qué hago nada No descuelgo ni me pongo nada porque si no he encontrado lo que buscaba vale luego tendré que hacer otra petición luego en mi cabeza pensaré Bueno si no quieres si no hay pantalones Azules y no puedo descolgar y ponerme un pantalón que no existe Pues realizaré otra petición de Bueno voy a buscar pantalones rojos y volveré a repetir la operación Pero lo que quiero que entendáis es que si el resultado de Select no da ningún resultado si no hay pantalones azules que yo voy Buscando el While no se va a ejecutar porque la ejecución del While depende de que hayan oído resultados a consulta último tú cuando coges un pantalón de tu armario te dejas armario abierto puede ser pero te juegas a bronca vale por tanto lo que haces es ya has obtenido lo que querías pan cierra el armario ese culito de Close ese culito lo que hace es lo que ha abierto lo cierro php en principio cada vez que acaba una ejecución de un Script automáticamente cierra lo que hay abierto pero es una mala costumbre dejar que php cierre las cosas por ti por tanto en esta última línea lo que hacemos Es cerrar esa conexión a continuación ya tengo por tanto una aplicación que si pongo correctamente mi usuario y mi contraseña me lleva a felicidades esta es mi zona privada Así que lo que voy a hacer ahora teniendo en cuenta que ya tengo un acceso a una zona privada que depende de la existencia de un usuario en la base de datos lo que voy a hacer es si queréis lo probamos otra vez verdad no cuesta nada hemos comprobado como mirar el usuario con contraseña AAA pulso tu usuario no existe antes de empezar vamos a comprobarlo volviendo en 5 segundos para atrás Pero si yo ahora voy a alumnos o a usuarios y creo un nuevo registro usuario AAA contraseña AAA utc bueno cuidado al puesto 3 ass 0 y p0 navegador cero nombre cero apellido cero y el cero o lo que sea bueno Y si ahora es un usuario que es un hombre es cero pero por lo menos existe la base de datos por tanto ahora se introduzco AAA y pongo a aa envío y me dice Felicidades esto es una privada O sea comprobáis que está usando realmente la base de datos para esto bien lo que voy a hacer ahora es escribir el típico mensaje ya hemos comprobado como podemos funcionar pero vamos a comprobar sesión usuario vamos a ver usuarios nombre bien atención mira voy a empezar a usar he cargado mi usuario y mi contraseña pero es que además voy a crear una variable de sesión que se va a llamar nombre igual a fila y no va con el guión bajo fila nombre punto y coma incluso verdad entrando en modo vago puedo copiar y pegar antes de ahora voy a entrar en modo vago nombre apellido era apellido o apellidos Esto es lo que suele causar errores en sql apellido No tengo hoy el día teclado vamos a comprobar como era el nombre y apellido por tanto lo que he hecho atención aquí es crear una variable de sesión no es que van flotando todo el rato por arriba llamada nombre y apellido para qué Para que en la zona de escritorio pueda decir php arranco me acerco para que lo veáis bien y digo eco bienvenido o bienvenido punto para encadenar sesión nombre punto un espacio punto session apellido incluso porque no y encadeno con una etiqueta br Esto va a funcionar No por qué Porque me falta arriba sesión estar session Start en cada una de las páginas que vayan a usar variables de sesión comprobamos guardo recargo entro y entro como jocarsa o casa bienvenido José Vicente carrera Sánchez cómo has sabido mis datos los ha sacado de la base de datos ya que estamos aquí ya que hemos visto el sesión Start vamos a ver el sesión destroy Por qué no poner aquí a hr creo veo a hr a y Pongo pulsa aquí para cerrar tu sesión y aquí va a ser un archivo llamado matar sesión punto php guardo recargo bienvenido aquí para cerrar tu sesión pulso me lleva a matar sesión que evidentemente no existe todavía y por tanto tengo un error qué voy a hacer Pues voy a ir al sistema de archivos voy a crear un nuevo archivo matar sesión que va a contener dos pedazos de código muy sencillos que van a ser php voy a decir sesión y un bajo destroy destruir la sesión Olvídate de las variables de usuario Ah perdón una cosa muy curiosa para matar una sesión antes hay que verla arrancado si no dice no sé que tengo que destruir exactamente punto y coma y a continuación voy a hacer una redirección en login voy a hacer voy a copiar esto eco meta index copio pegotado sesión Vale ahora vuelve la pantalla inicial comprobemos si funciona guardamos recargamos ponemos por aquí para atrás pulsa aquí para cerrar tu sesión voy a recargar pulsa aquí para cerrar tu sesión matar sesión algo ha pasado porque Ah sí claro porque de hecho 5 segundos efectivamente le voy a decir que el lugar 50 segundos para que lo haga automáticamente otra vez o carsal envío bienvenido a continuación vamos a hablar del problema clásico de las comillas y las dobles comillas dentro de php que es un problema que también tendremos en javascript el problema es el siguiente yo aquí tengo para abrir esto lo voy a explicar aquí lo suyo para cualquier cosa en php tengo aquí que el eco se ha abierto con unas comillas sencillas y tengo aquí que el eco se cierra con unas comillas sencillas Qué hubiera pasado si en este refresh que está dentro le pongo comillas sencillas Pues que el programa creería que este eco empieza aquí y que acaba aquí Porque si comillas sencillas abren comillas sencillas cierran un truco para ello Es decir si el eco lo abres con comillas sencillas dentro del html usa las comillas dobles que te den la gana porque las comillas dobles nunca pueden cerrar las comillas sencillas y viceversa bien Por eso lo que estoy haciendo es si he puesto fuera comillas sencillas dentro pongo comillas dobles y viceversa pero ahora supongamos que por lo que sea por lo que sea yo estoy obligado a poner comillas dobles y aquí comillas dobles si os fijáis que estas comillas dobles me rompen la cadena y estas me las rompen para solucionar eso que también es un caso clásico existe una cosa que se llama el carácter de escape el carácter de escape es en lugar de poner dentro comillas pones contra barra comillas de tal forma que le estás diciendo que eso es unas comillas pero no son comillas de cierre sino son comillas dentro estas son de escape contra barracomillas contra barra comillas de esa manera solo de esa manera puedes usar dentro comillas dobles y fuera comillas dobles sin que las de dentro te cierren a las de fuera y comprobamos como guardamos cerramos recargamos y funciona Pero insisto esa es una solución fijaos que funciona perfectamente pero yo siempre que puedo hago el truco de comillas sencillas comillas dobles si no tengo preferencia no hago siempre php comillas sencillas dobles sino que en cada caso si html he puesto comillas dobles pues en ese caso en php comillas sencillas y viceversa voy a trabajar con la versión 3 porque bloquear esto como una versión y lo que voy a hacer es irme a la carpeta número 2 atención carpeta número 2 copio pego dos copias ahora esta se va a llamar tres y así sé que si me equivoco por lo menos puedo volver atrás pero cuidado si habrá llamado a esta carpeta 3 Ahora aquí en el headit tengo que cerrar todo lo que tengo porque en el gel lo que tengo hace referencia a la carpeta 2 el gerente automáticamente no se entera de que es una versión más subo arriba recargo entro dentro de la carpeta 3 y ahora vuelvo a trabajar vale Si no se me pongo confuso porque estoy haciendo cambios pero no los veo qué está pasando aquí simplemente acordaos de cambiar de carpeta y aquí en el navegador cambio también en la carpeta 3 vale nueva carpeta en el navegador y ahora voy a empezar haciendo cosas hemos dicho que cuando un usuario accede entonces bienvenido una cosa Esto no es muy esencial bph pero vamos a aprender pequeños truquetes a la vez que empezamos a desarrollar aplicaciones un usuario listo y cuando digo listo digo en el mal sentido de la palabra listo vamos a ver listo vale Con la s larga dice Oye y si me meto directamente y aquí loco y pongo escritorio punto php sin pasar por caja eso se llama una debilidad mi aplicación tiene una debilidad vale Y es que cualquiera se sabe la dirección puede entrar directamente sin loguearse y empezar a realizar todos los tropicio que quiera lo que voy a hacer a continuación es proteger mi aplicación verdad número uno cuanto da igual lo que la protejas la gente siempre encontrará algún hueco para entrar Vale No hay ninguna aplicación perfectamente cerrada lo que tienes que ir es cortando agujeros intentando la gente no se pueda colar lo que voy a hacer en este caso voy a abrir otra vez esto es escritorio punto php y lo que voy a hacer ahora sí es una estructura de control If y voy a decir que si se da una condición en ese caso solo en ese caso se ejecute este código Qué condición sería en el caso de que la sesión haya sido iniciada así que solo si y sed lo conocíais y set es que exista Es como decir existe dentro de paréntesis la variable de sesión usuario es decir si la variable de sesión de usuario tiene valor es que alguien se ha registrado y solo entonces me muestras este código vamos a verlo Else el que estamos aquí el qué pasa en caso de que sea falso os acordáis eco tú eres esto Incluso le puedo meter una redirección para que se ha intentado colar en 5 segundos vuelva a la casilla de inicio vamos a ver si funciona si yo me he registrado si está puesta la variable de sesión de usuario me lleva aquí pero si yo he cerrado mi sesión Y si yo he cerrado mi sesión en principio Se ha perdido la variable y ahora intento entrar dentro de escritorio punto php me dice tú eres un poco listo vale una media de protección para que solo aquel o sea solo aquel que tiene una variable de usuario es aquel que ha metido un usuario y contraseña es así ese sí quiera que en cualquier momento pueda acceder Porque de todas formas no estoy registrando vale pero solo aquel que pueda entrar el que no tenga usuario y contraseña si intenta entrar no podrá ver nada en el escritorio Ah pero todo lo que estoy haciendo no estoy registrando antes de que pase más tiempo vamos a hacer ya un registro bien para eso el registro lo voy a poner prácticamente en todas partes y siempre que pongo algo en todas partes o es una función o es un include entonces externamente voy a hacer un archivo que se llame Love punto php este me lo podría copiar de hecho siempre uso el mismo lo hice una vez hace muchos años y lo voy copiando a otras aplicaciones que hago pero lo voy a hacer ahora de nuevo vamos a hacer un archivo que se llamen lo pondremos en todas y cada una de las páginas que creemos para que cada vez que un usuario pase por una página de aplicación quede registrado Hala php y lo que va a hacer este php es un php ciego y mudo no saca nada en pantalla simplemente de fondo no metiendo cosas en la base de datos quiero que haga algo en la base de datos así que bueno primero lo que voy a hacer es año es igual no utc es igual a la función de con la y con la u mayúsculas Perdón esto lo tenéis otro día en la documentación de php ahora la sacaré porque no recuerdo todos de memoria año mes día hora minuto segundo año hora minuto segundo voy a revisar Pongo aquí php bate y quiero guardar el mes con número el mes con número numérica mes con ceros iniciales es la m minúsculas quiero guardar el día con número me lo habré pasado el día del mes con dos dígitos con ceros iniciales de minúsculas la hora creo que era H mayúsculas formato de 24 horas con una hora con ceros iniciales la H el minuto creo que era la m no perdón Creo que era la y minutos con ceros iniciales y el segundo segundos con ceros iniciales la s lo que he hecho en este archivo de por tanto es empezar a preparar las variables con la función date a continuación quiero capturar datos como por ejemplo el usuario cierto Bueno aquí no hace falta poner sesión Start porque ya lo podría haber puesto antes ahora luego lo pongo en Index lo que sí que voy a hacer aquí es capturar la IP y el navegador del usuario Por eso voy a decir que la variable IP es igual a voy a poner una arroba para que no de error a veces da error si no la puede capturar quiero que sí la ropa es para decir que si algo da error no nos hace en pantalla Vamos allá y voy a poner get en es decir coge una variable de entorno donde voy a decir Remote guión abdr quiero capturar la dirección remota y además voy a crear otra variable llamada navegador que es una variable de entorno yo creía que estaba escribiendo Sí parece que está escribiendo server y voy a el http guion bajo user_agen lo que hago es el navegador voy a de hecho el sistema operativo el navegador y la versión de cada uno de ellos a la vez muy divertido Entonces ya tengo yo creo todas las variables que quiero usar como mucho querría usar también que el usuario es igual a la variable de sesión llamada usuario si existe hecho esto ya tengo todas las variables preparadas y ahora lo que tengo que hacer es guardarlas en la base de datos voy a login y me voy a copiar vilmente la estructura de control para la base de datos me voy a lo y la voy a pegar la voy a pegar y la voy a modificar Cómo la voy a modificar bien empecemos conexión Quiero abrir la base de datos que está en la carpeta de B llamada 3 T 4t punto TV modifico esto no la misma base de datos bien consulta quiero insertar no fuera borro borro que te borro hasta aquí quiero insertar un nuevo elemento dentro de la base de datos y pongo insert tinto x recordáis la tabla Love valius y a continuación tengo que escribir los valores de la siguiente manera paréntesis y comillas y esto es lo peligroso para cada uno de los valores como es peligroso lo voy a hacer poco a poco me voy a la tabla de log y miro en primer lugar Cuántos elementos tiene lox cuento 1 2 3 4 5 6 7 8 9 10 11 12 13 y 14 tengo que contar también los extras y ahora aquí pongo uno dos tres cuatro cinco seis siete ocho nueve 10 11 12 13 y 14 huecos si la tabla tiene 14 huecos y yo le intento meter 13 elementos va a fallar si intento meter 15 elementos va a fallar le tengo que meter exactamente el mismo número de elementos he usado comillas dobles fueras fuera he usado comillas sencillas dentro perdón y ahora lo que voy a hacer es encadenar Cuál es el primer dato estos también lo que viene es muy difícil no porque sea difícil conceptualmente sino porque hay que tener mucho cuidado Qué es lo primero que le haya dicho a la tabla utc por tanto Vengo al primer hueco y pongo variable qtc segundo hueco el año pues pongo variable año tercer hueco el mes variable mes el día la hora el minuto el segundo y ahora por el segundo va la IP el navegador y el usuario la iPhone y el usuario y si todo ha ido bien he puesto su usuario si todo ha ido bien al final me quedan 1 2 3 y 4 huecos vacíos Luego parece que la cosa va bien Igual me he equivocado ahora me lo dirá al ejecutar pero parece que de momento la cosa va bien este Script php lo que hace es insertar algo en la base de datos hace falta que me diga algo en pantalla no hace falta que lo ejecute pero no hace falta que me diga nada en pantalla por tanto lo que voy a hacer es eliminar el While no me sirve yo no quiero meter nada en ninguna matriz simplemente quiero cogerlo metelo en la base de datos Y ya está no me digas nada bien guardo recargo y ahora sí mira lo que tengo que hacer es ir a todas y cada una de las páginas y asegurarme que todas y cada una de las páginas tienen primero si no lo tenía esta no lo tenía si tienen perdón si no lo tienen un seso en estar y a continuación un include que es log.php qué hacía los punto php que hacía include incluir otro archivo Llamar a otro archivo os acordáis como de la fecha Vamos allá lo voy a separar en varias líneas simplemente por ordenación y ahora una vez más voy a copiar el include y lo voy a pegar en todas partes en el escritorio lo pego en el log luego no mismo no puede lograr mismo lo pego login Index en escritorio matar sesión Pues venga también por qué no lo veis lo voy pegando en todas partes para qué Mira atención ahora mismo la tabla de logs está vacía pero si todo ha funcionado bien lo que voy a hacer ahora es entrar a la página inicial solo por entrar ya debería haber cosas en logs bien no existen registros será que ha fallado ahora vamos a verlo otra vez si pongo aquí jocarsa hijo Carso envío mostrarlos y en principio no existen registros luego tengo que ir a y revisar donde me pueda ver equivocado insert In To looks value vamos a ver dónde me puede haber equivocado para detectar dónde puede estar el error lo que voy a hacer es Desactivar algunos elementos por ejemplo IP y navegador y usuario los voy a Desactivar de momento y voy a decir que IP igual a cero navegador igual a cero usuario igual a cero ejecuto compruebo Y de esa manera lo que voy haciendo es comprobar ir descartando dónde puede estar el error en este caso sigue sin registrarse luego en ese punto No está el error vamos a comprobar que en Index tengo sesión Start y tengo include log punto php p hago lo puedo hacer también Mirad aquí arriba decir Hola para decir realmente estoy vinculando el archivo correcto guardo y dice hola luego Sí parece que lo está vinculándose bien qtc Date un date m de ID en principio es todo correcto y p igual a cero ese culite Open insert intolox values voy a hacer una cosa voy a hacer una cosa voy a copiar esta línea de consulta que es la que más frecuentemente me va a dar problemas la copio la pego bajo y esta de aquí la comento la desactivo y ahora voy a hacer otra vez 1 2 3 4 5 6 7 8 9 10 11 12 13 y 14 guardo recargo bien y en esa línea no está el error en esa línea no está el error porque estoy insertando registros vacíos y no los coge vale veis poco a poco lo que estoy haciendo es ir eliminando donde puede estar el error Así que si no está en la consulta tendría que estar open existe la base de datos t4t voy a decir lo siguiente eco consulta guardo recargo insert value ese valor este valor de aquí porque los tres últimos valores son 0 porque yo he desactivado Aquí estos valores pero si los vuelvo a activar los vuelvo a activar guardo recargo y ahora me dice que me reconoce mi IP me reconocen el navegador me reconoce el sistema operativo y tengo al final no tengo usuario un dos tres y cuatro huecos vacíos Así que en principio la consulta es correcta Pero de alguna manera no está localizando correctamente la base de datos bien efectivamente el error es que aquí estaba todavía en el número 2 voy a cambiar la carpeta 3 y ahora en la carpeta logs probablemente veré que ya estaba registrando cosas verdad todo el rato estaba registrando cosas con lo cual simplemente en una cuestión de tener cuidado y cambiar en la URL había cambiado aquí pero no había cambiado aquí muy bien perfecto Pues nada puedo borrar ya esto y puedo comprobar como el sistema ya está empezando a registrar los accesos de los usuarios fijaos en este caso como estoy registrando tanto el utc que es la cantidad de segundos que han pasado desde el 1 de enero de 70 como el año el mes el día la hora Newton segundo y la IP en este caso como estoy haciendo desde mi propio ordenador es dos puntos uno y Incluso fijaos el navegador y el sistema operativo que estoy usando usuario si no estoy registrado no se me registra pero que cuando estaba registrado sí que se pilla el usuario y luego los campos extra Que de momento no me sirven para nada pero sabéis que sí que me van a servir para algo porque yo me acabo de dar cuenta de que estoy registrando una serie de datos puedo registrar cada usuario en cada momento digamos qué navegador estaba usando Y qué pendía pero no qué página estaba viendo la página de inicio estaba viendo la página de escritorio estaba logueándose No lo sé Me falta una variable Por eso tengo los campos extra todavía tengo hueco para hacer lo siguiente Mira voy a crear otra variable más llamada URL la variable url será igual a la tengo por aquí será igual a bueno de momento voy a poner página para comprobar que funciona y a continuación la extraer voy a poner URL fijaos como ahora el campo extra 1 Será algo así recargo fijaos como ahora en el campo extra uno tengo el valor página con lo cual a continuación lo que voy a hacer es sacar ese valor de una variable de entorno y poder capturarlo en la pantalla una cosa ya que estamos antes de acabar Mirad lo bueno de estos datos es que fijaos que tengo por ejemplo la captura del utc la captura del año la captura del día del método del segundo Y a partir de aquí voy a hacer búsquedas Como quiera por ejemplo Quiero buscar solo aquellos accesos que vengan de la IP dos puntos uno pues Busco donde la IP sea igual a dos puntos uno y fijaos como filtro Y a partir de ahí puedo empezar a filtrar lo que sea puedo empezar a filtrar qué resultados tenía este usuario tal día en el último día Cuántos usuarios han entrado del usuario Cuántas veces han hecho clic Alguien que ha entrado y luego ha salido o ha entrado y ha hecho 10 clics vale a partir de aquí parece que no pero con las bases de datos podemos extraer todo el contenido que haga falta Cómo podemos exportar y Cómo podemos importar datos desde almiyer tanto desde almiyer con ese culité como desde php Miami en mysql vamos a poder exportar y por tanto importar datos sin ningún problema pero nos tenemos que restringir a los formatos el programa nos da no os preocupéis porque Mirad si yo realizo por ejemplo la selección tengo tanto exportar como importar Y si yo le doy a exportar digo exportar por las opciones de importación prácticamente iguales le voy a exportar digo que quiero mostrar o archivo o comprimido digo archivo en qué formato En sql qué aplicación tenéis que abrir archivos sql ninguna verdad Pero si saco aquí veréis que existe el archivo csv separado por comas csv separado por punto y comas y tsv separado por tabulaciones este formato para mí es maravilloso vosotros igual no lo habéis oído nunca pero tanto Excel como openo fiscal soportan el formato csv voy a realizar una exportación a mí me gusta mucho el formato csv con puntos y comas exporto donde lo guardo me lo ha guardado en me lo ha guardado en descargas veis tengo ya unos cuantos csv portavoz digo me lo guardo en Shan por tenerlo un poco ordenado más que nada me lo guardo en un web Ups me lo guardo el proyecto 1 en carpeta 3 en dv lo voy a guardar ahí que es un csv si lo abro con gedit es esto es una base de datos separadas con en este caso punto y coma y diréis vale Y qué hago yo con eso no puedo hacer nada sí que podéis hacer porque si lo habréis con Excel o con calc debería tener Yo por aquí como programa más recientes libro fiscal como todos sabréis libro fiscal es como Excel pero del openoffice o del libreoffice que es la suite de ofimática gratuita si yo abro libro fiscal que equivale a Excel bien veis la misma interfaz archivo abrir me voy a la carpeta del proyecto Sam h2x Proyecto 1 carpeta 3 bebé abro logos punto csv y me dice bien cómo lo quieres importar con punto y coma el espacio no hace falta delimitador de texto veis punto y coma porque antes no sería coma le digo aceptar y fijaos que tenéis los datos en una tabla de cálculo para hacer lo que queráis con ellos Si os Mola trabajar mejor con este y de la misma manera que puedo exportar datos evidentemente si voy a la base de datos y pulso importar veréis que acepta el formato csv con coma csv con punto y coma y tsv yo siempre recomiendo antes de importar realizar una exportación Porque si tú importas tú cómo sabes el formato que tiene el archivo que estás importando Es imposible que lo sepas Pero si tú has realizado antes una exportación el programa te está chivando el formato vale por tanto yo Ahora solo tengo que venir aquí y decirle voy a poner uno dos tres cuatro cinco seis siete ocho nueve 10 11 12 13 y 14 elimino todo lo demás pero el formato ha quedado lo archivo guardar como me lo guardo como lox 2 Y si ahora voy mantener el formato actual Y si ahora voy aquí y le digo importar selección archivo Esto está aquí un poco rollo Cada vez me podría hacer un acceso directo 3D logs 2 abro csv es especificar el formato importo y mirar cómo la tenéis Espera que estoy realizando una búsqueda tenéis 1 2 3 4 5 6 7 8 9 10 11 12 13 14 soy capaz de sacar datos de la base de datos y de importar datos siempre que me apetezca usando un programa como Access o como Excel o las alternativas de software libre incluso podéis hacerlo a mano picando un archivo de comas y puntos y comas a mano pero bueno en este caso solo recomendar a principio Excel y cuando ya controlas pues a mano ahora vamos a hacer un ejemplo Y es que ya hemos visto antes que podemos ordenar según condiciones Por ejemplo yo quiero ordenar donde el navegador sea Chrome Así que digo donde el navegador sea igual a Chrome Esto me va a dar fallo me va a dar que no existe ningún registro porque en sql el signo igual es una igualdad absoluta en la línea tiene que poner Chrome exactamente Ni más ni menos que Chrome en realidad no ponía Chrome ponía un montón más de cosas pero si os fijáis puedo desplegar el igual y poner menor que mayor que tal cual Pues hay un modificador que se llama like porcentaje light porcentaje es contiene donde la línea contenga la palabra Chrome se hará pulso enter comprobaréis como ahora me está localizando todos aquellos elementos que tengan la palabra Chrome contenida dentro de tal pero claro pero podéis preguntar muy bien yo tengo los registros pero tengo que montarlos manualmente Aunque ahí ponga 11 registros pero me gustaría que el programa me los contara no me lo sacara sino que me dijera hay tantos para eso fijaos que hay una parte que se llama Mostrar y dentro de mostrar yo puedo tener yo puedo acceder a funciones tales como por ejemplo count contar average promedio contar distintos máximo o mínimo Entonces si digo quiero contar el número de ips de personas que han entrado con un navegador Chrome muestro y me dice count IP igual a 11 en este caso sqlite esto se podría haber hecho desde php pero ese culite tiene funciones ya integradas ya implementadas lo cual en este caso nos podría venir fenomenal en un futuro para generar un Script php que me generará estadísticas y que me diga cada día Cuántos de Chrome han entrado Cuántos de firefox han entrado Cuántos de Windows han entrado Cuántos de marcado y así dentro del log voy a hacer Vamos a ver dentro del log voy a hacer la posibilidad de que la URL coja exactamente la página en la que estoy trabajando que esto antes la había dejado como página simplemente página me voy a hacer dentro de URL es poner lo siguiente voy a poner variable en el servidor que server y voy a poner en URL request y un bajo Uri es decir la dirección que hay arriba en la página de esta manera si hago así y recargo y entro a mi Love y me entro a mi panel de control fijaos que si voy a logs no solo me dice dónde he entrado Vaya tengo dos páginas sino que fijaos que incluso me dice la página que estaba visitando en cada momento vale captura tu usuario captura tu navegador captura tu IP e incluso captura la página que estaba visitando para insisto llevar un control y ver una estadística para que sea algo pasa tú sepas en cada momento que ha pasado en el pasado valga la redundancia bien sigamos a continuación ya que ya he acabado el sistema de loxe lo que voy a hacer es crear una nueva iteración del proyecto voy a copiar voy a pegar versión 4 y ahora me aseguro que esa versión 4 la esté usando tanto en el headit recargo como en el navegador evidentemente en este caso a ver si ya no me confundo tanto en un sitio como en otro tanto en el en la URL como en arminder bien Vamos a ver yo accedo como mi usuario Y qué tiene mi panel de control de hecho fijémonos que nos falta todavía hacer el registro de usuarios nuevos pero vamos a hacerlo por lo menos vamos a hacerlo de que un usuario pueda meter cursos lo que voy a hacer es si este es mi panel de control voy a escritorio punto php y voy a empezar a poder meter cosas así que me hago un hueco aquí y escribo Qué cosas puedo hacer eco Quiero crear una app voy a poner el eco con comillas simples y así puedo usar comillas dobles en html a ybr y esto lo copio varias veces porque quiero poder hacer un nuevo curso poner una firma pasar lista digamos y ver estadísticas tres funciones por ejemplo que puedo tener hacer un nuevo curso irá a Nuevo curso punto php que no existe ahora lo voy a crear pasar lista irá a pasar lista punto php y ver estadísticas irá a estadísticas punto php guardo recargo de momento lo que tengo es esto son tres enlaces recordar que esta aplicación la estoy empezando en modo Dinámico es decir en modo feo pero funcional y más adelante lo convertiré en modo estático es decir con html css que todo quede bonito hacer un nuevo curso no funciona pasar lista no funciona y ver estadísticas no funciona porque evidentemente estoy llamando archivos que todavía no existen pero ahora voy a hacer que exista por tanto creo nuevos archivos nuevo curso punto php pasar lista punto php y estadísticas punto php vamos ahora por tanto a hacer un nuevo curso por tanto abro nuevo curso php y nuevo curso php es un formulario realmente por tanto voy a Nuevo curso y digo formo forma esa etiqueta debería poner la etiqueta html Body todo eso pero me lo voy a saltar venga no me la Puedo saltar Sí me puedo soltar action y digo crear nuevo curso punto php que no lo he hecho todavía medzone igual a post y ahora empiezo a meter cosas ahí dentro lo que sí que está claro es que debería meter php y session crea nueva crear nuevo curso punto php input type y atención name nombre qué parámetros input type para enviarlo br qué parámetros tenía la base de datos la tabla de cursos tenía estructura nombre del curso lo que yo estoy poniendo profesor esto es el usuario luego aquí nada utefenada y penada navegador nada vale perfecto ya lo tengo guardo hacer un nuevo curso ahí lo tengo Hey input type submit Ah claro es que he puesto mal las comillas y por eso no me lo coge vale Y ahora en Play holder pero escribiéndolo bien escribo introduce el nombre del curso guardo recargo introduce el nombre del curso con el botón de enviar esto lo llevará a crear nuevo curso Que de momento evidentemente no existe pero que a continuación voy a crear si ya tengo en este caso el formulario que me permite crear nuevo curso lo que voy a hacer ahora es el Script HP que introduce ese curso en la base de datos mira y ahora me voy a cómo se llama esto a Nuevo curso crear nuevo curso punto php crear nuevo curso punto php lo cargo sabéis que crear nuevo curso es una inserción es tomar los datos del formulario insertaros en la base de datos de qué me suena a mí eso yo lo he hecho antes lo he hecho en los logs por tanto una vez más voy a hacer un copy page y modificar así que me voy a lo y me voy a copiar todo este código así con toda la cara me lo pego un nuevo curso y digo primero sesión estar segundo qué datos estoy pasando curso es igual a sesión no perdón a post curso pero es que un momento el usuario es igual a la variable de sesión usuario que es el profesor la fecha no va a hacer falta porque fijémonos que en la base de datos en la en cursos no estoy pidiendo tantos datos Solo estoy pidiendo utc O sea no necesito ni segundo ni mes ni día solo utc me lo quedo Eso sí la IP y el navegador sí que los necesito Así que esos me los quedo y ahora simplemente cuento atención 1 2 3 4 5 6 7 8 y 9 Pues ahora digo uno dos tres cuatro cinco seis siete ocho y nueve y voy comparando Qué es lo primero que se pide nombre del curso es curso lo segundo que se pide es quién es el profesor el usuario Cuál es el utc es decir cuando se ha creado este curso en el utc Quién es la ip o sea cómo es la ip de quién lo ha creado Y qué navegador tiene y cuatro Campos vacíos vamos a comprobar si funciona muy bien ahora antes de insertar lo que vamos a hacer Efectivamente es comprobar la conexión la base de datos la misma pero la tabla No insert intologs no quiero meter una base de datos Qué pasaría si intentar meter esa información la base de datos no funcionaría porque eso tiene no me registros el nox tiene 14 registros como no es igual da igual que sea más pequeño más grande no entra Pero le digo que lo meta en cursos insertar en cursos esos valores vamos a comprobar si funciona Ah y ya que estamos si ha funcionado bien que me redirija a la página principal de todas formas lo que voy a hacer es No redirigir todavía porque si cometo algún error como me redirige no me da tiempo a ver el error así que hacer un nuevo curso cómo se llama este curso prueba envío no aparece nada en la pantalla en principio suele ser buena señal si ahora voy a la tabla de cursos comprobaré como hay un curso de prueba del profesor jocarsa ya que es el nombre de usuario que tenía registrado veis Para qué sirve las variables de sesión no tengo que decírselo que soy yo porque ya Recuerda que estoy registrado lo he hecho en este utc con esta IP con este navegador y de momento no estoy usando los campos copiar y pegar es copia de pegar ahora siguiente voy a hacer más cosas voy a meter un par de cursos más y bueno ahora sí que podría poner la redirección Así que voy a cargar login y voy a cargar la redirección que me devuelva al escritorio copiar y pegar eco vamos a comprobarlo nuevo curso segundo envío me devuelve a la página principal pero si voy a cursos y miro los registros Me declaro tengo prueba y segundo ya tengo un formulario html que lo coge lo del formulario lo mete y me devuelve a la pantalla inicial voy ahora a trabajar con el enlace pasar lista lo que hace es llevarme pasar lista existe pero está vacío estaba aquí Primero me va a decir vale De qué curso quieres pasar lista pues lo que voy a hacer es lo siguiente estoy ahora en pasar lista punto php Pongo aquí Hola comprobar es que paso lista y dice hola bien Ya estoy en ese archivo ahora voy a escribir lo siguiente Mira te voy a hacer otra vez un copia pega php lo que quiero realmente es meter la lista de cursos que tengo disponibles para mí en un Select un campo selecto que me los muestre en un desplegable pongo fuera de php pongo Select no es más fuera de php con un informe action igual a pasar lista Dos punto php método igual a post y digo Select name curso os acordáis que el Select era para poblar una lista desplegable y como no forma y ahora se le recordáis que tenía opciones tenía opción las opciones son las desplegables Mirad atención a solista veis un desplegable pero no tiene opciones yo lo que quiero ahora mediante php es hacer que ese desplegable se publique con la lista de cursos Y es más con la lista de mix cursos no la lista de otros cursos de otro profesor o de otros usuarios de la plataforma Por eso yo ahora me voy a login y copio pego copio y pego y digo vamos a empezar a modificar ese culité Open debe 3434t c4p3 como tres tristes tigres consulta selecciona todo de cursos ojo de cursos donde el profesor sea igual la variable de sesión usuario es decir No solo uso el usuario para registrarme en la aplicación sino para que a partir de ese momento todos los datos que me dé estén filtrados me den solo los míos porque mi aplicación en un momento dado para ver miles de profesores y cada uno con sus cursos lo veis vale Ya está casi hecho esto me voy a asegurar que profesor existe en cursos existe profesor porque a veces lo puede llamar profesor usuarios pero usuarios Vete a saber y ahora aquí en el While digo eco option value oxxon y ahora digo fila curso y aquí digo fila curso vamos a ver si funciona básicamente lo que hace esto es sacarme una opción de la lista cuyo valor es el nombre del curso y que pone os acordáis que el oxxon se va a ponerlo dos veces el value y el contenido repasar los vídeos html y veréis que era así y guardo recargo vamos a verlo no me lo coge vamos a ver pasar lista algo ha fallado Bien voy a quitar el profesor o el profesor cuando algo falla vamos descartando pasar lista no funciona Ah mira funciona hay dos elementos pero no sale fila curso fila nombre del curso lo veis fuente de problemas muy frecuente nombre del curso vuelvo y ahora curso prueba y curso segundo voy a recuperar el web recordáis el were que lo acabo de quitar Where profesor es igual a Claro claro sesión usuario Por qué no funciona el sesión porque no he hecho sesión pasar lista o pasar lista me dice los cursos que hay y ahora quiero que comprobéis como poco a poco Aunque vamos a entrar unas cuantas veces más pero poco a poco conseguimos que el usuario no necesite la base de datos si ahora hago un nuevo curso de php envío y será voy a pasar lista puedo seleccionar el curso de php para pasar lista es decir vais alimentando la base de datos una pequeña demostración más antes de cerrar este vídeo si ahora hago aquí un curso yo como administrador puedo entrar a la base de datos y digo el curso de php por lo que sea ya no pertenece a casa pertenece a jocarsa 4 si yo ahora saco la lista de cursos curso de php ya no aparece en esa lista porque el sistema detecta que no pertenece a mi usuario sino que pertenece a otro usuario llamado fucarsa a continuación lo que voy a hacer es proceder a crear la carpeta número 5 Dentro de este ejercicio por tanto dentro de web Apps vamos a ver dónde estoy dentro de ht-dox dentro de web Apps dentro de proyecto uno voy a crear un duplicado atención copia y pego la carpeta 4 la llamo carpeta 5 y esa carpeta 5 es la que voy a cargar tanto en hebit como en el navegador local Host Proyecto 1 voy a cargar no 5 directamente voy a cargar la carpeta 5 a partir de la cual voy a empezar a crear nuevas partes para esta aplicación lo que voy a hacer a continuación si ya tengo un usuario voy a continuar programando partes del programa vamos a ver que tenía por aquí voy a hacer un nuevo curso vale ya tenía la capacidad de nombre de curso sin embargo cuando hago un curso todavía no tengo la capacidad de meter usuarios dentro de ese curso meter alumnos dentro de ese curso por tanto me hace falta vamos a ver la base de datos en bebé HP voy a cargar la base de datos que tengo por aquí alumnos donde cada alumno tiene la capacidad Mostrar estructura de tener nombre apellido y curso asociado y profesor bien pues voy a hacer lo siguiente vamos a ver voy a crear nuevo enlace dentro de escritorio voy a crear un nuevo enlace que se llamará matricular alumnos que llevará al archivo nuevo curso php no más alumnos punto php guardo recargo tengo ya ahí matriculada alumnos evidentemente pulso matricular alumnos y me lleva a ninguna parte porque he llevado un archivo que no existe todavía por eso lo que voy a hacer es crear un archivo nuevo más alumnos punto php si ahora pongo matricular alumnos ahora ya aparece en blanco porque estoy cargando un archivo Que de momento está vacío le pongo Hola guardo y vuelvo a ir ahora es decir es una pequeña comprobación pero recomiendo hacerla siempre para comprobar que estáis trabajando realmente sobre ese archivo a partir de aquí lo que voy a hacer es seleccionar los cursos que tiene ese usuario y elegir a continuación poder pasar lista vamos a por ello voy a hacer un formulario y acercarme voy a hacer un formulario recordar estoy trabajando a pelo sin maquetación una vez que esté el programa en funcionamiento es cuando apariencia recordad que esto se llama empezar en Dinámico y luego convertirlo en estático y recordad histórico y luego combinar bueno dentro del forma digo action es igual a Añadir alumnos recordar intento evitar la ñ pude y el método es igual a post y ahora digo input type Tex y atención name qué datos voy a pedir del alumno pues lo que voy a despedir por ejemplo el nombre guardo lazo apellido y poco más realmente vamos a ver la tabla que me dice la tabla de alumnos realmente tiene el nombre apellido curso y profesor evidentemente en este caso curso no hace falta porque lo voy a poder sacar de una lista Select y profesor tampoco va a hacer falta porque es el usuario activo de hecho en pasar lista recordar que tenía la posibilidad de extraer directamente los cursos que tengo disponibles por tanto lo que voy a hacer mirar es ir a pasar lista voy a pasar y voy a copiarme este Select porque ese Select me va a permitir en más alumno especificar En qué curso estoy matriculando cada alumno vamos a comprobarlo y de hecho un momentín voy a poner un Place holder te dirá nombre del alumno y aquí voy a poner copio pego el alumno interesante el que recordéis que al principio es conveniente Para no perder los datos de la sesión está guardo que cargo vamos a ver que tenemos puedo hacer nuevo curso puedo matricular alumnos y para cada alumno poder especificar su nombre sus apellidos y el curso en el que se está matriculando ahora además ya que estamos Bueno podemos simplemente copiar y pegar este código para especificar que queremos poder introducir varios alumnos voy a ahorrar espacios Y de esa manera si aquí pongo un br voy a hacer Voy a hacerlo lo Bestia y luego evidentemente podré cambiarlo podré reducirlo si yo aquí pongo varios vrs o varios elementos podría ser un formulario donde podría insertar varios alumnos a la vez en este caso voy a insertar 6 y eso sí lo que tengo que hacer para cuando hagáis multiformelarios Es que este no se llame nombre y este nombre porque entonces el formulario que lo procese Y cómo va a saber Verdad que qué usuario es cada uno Bueno pues lo que voy a hacer aquí es simplemente decir que Esto va a ser nombre uno Esto va a ser apellido 1 y Esto va a ser curso 1 Esto va a ser nombre dos apellido 2 curso 2 Y de esa manera me estoy asegurando unos identificadores Únicos cuando vaya a procesar el curso 4 5 y 5 6 y 6 para cuando el siguiente procese vaya ahí el 6 está en correcto para cuando el siguiente Script procese el registro de sus archivos evidentemente no nos olvidemos de poner un botón submit para que esto se pueda enviar alguna parte Así que al final después del Select voy a poner un input para que aquí al final aparezca un botón de enviar en el que si yo relleno lo que sea de momento me llevé un archivo que no existe evidentemente es el ahora es meter al usuario dentro de la tabla de datos a los alumnos por tanto voy a trabajar con el archivo llamado Añadir alumnos que no existe lo creo Añadir alumnos punto php doble clic y voy a usar el crear nuevo curso para copiar y pegar porque crear un alumno es como crear un curso por eso copio pego y voy a ver a continuación mira curso 1 es igual a post curso 1 y digo nombre uno es igual a post nombre 1 y de repente apellido 1 es igual a post apellido utc IP navegadores navegador y en usuario voy a dejarlo como está porque recordar que en este caso el usuario es el profesor Entonces yo ahora digo abro la base de datos fijaos que en la mayoría voy a eliminar espacios si queréis porque el código queda un poco feo cuando tiene espacios de más a veces hay que insertar espacios para separar trozos por ejemplo en este caso voy a insertar espacios para es una reacción variable lo que no hay nada pero básicamente ahora voy a decir que inserto dentro de alumnos voy a ver qué datos tiene alumnos dentro de unos tengo nombre apellido curso profesor bien pues voy a poner pongo nombre uno apellido 1 era apellido o apellidos No lo sé por tanto voy a ver aquí vamos a verlo aquí se llama apellido 1 curso será curso 1 y ahora a continuación qué tengo profesor es usuario IP utc y navegador usuario IP C navegador y luego tengo cuántos Campos vacíos cuatro Aquí tengo dos porque faltan uno y dos vamos a ver si funciona guardo pruebo la aplicación y digo creo un nuevo curso que es el curso de web Ups envío ya he creado un nuevo curso será matricular alumnos veré que el curso de web Apps está en la lista Así que digo matrículo al alumno Juan López momento solo funciona primero en el curso de huevas envío si todo ha funcionado bien Ahora voy a registros alumnos y tengo a Juan López del curso web Apps con el profesor jocarsa porque es el usuario que está registrado con la ip1 utc 0 navegadores este de aquí y los campos extra de momento están vacíos Ya tengo por tanto el primer usuario por tanto lo que voy a hacer ahora lo voy a dejar esto desactivado Aunque ahora lo activaré bueno lo voy a activar ya venga es decir que copio todo esto lo pego seis veces más adelante veremos un proceso que se llama refactorización con la refactorización lo que hacemos Es ver dónde hemos hecho código duplicado ver qué simplificaciones podríamos hacer y realizarlas de momento en un principio escribimos código duplicado y más adelante refactorizamos 1 2 3 4 5 y 6 bien atención Y ahora yo aquí pongo nombre uno pues nombre 2 curso 2 y aquí pongo nombre dos apellido 2 curso 2 usuario es el mismo ip es el mismo nombre de tres probablemente estaréis duplicando estrés detectando ya que existen duplicados que para qué los quiero declarar otras veces sí para recordar que eso es la parte de refactorización y 4 5 y 5 6 6 bien ya tengo por aquí esto y ahora esto lo que va a hacer es bueno darme un pequeño problema Por cierto veréis si yo le creo digo voy a matricular alumnos en un curso y creo al alumno Jaime García en el curso de web Apps yo la envío ha funcionado todo correcto el problema está en que en la base de datos si ahora recargo comprobaré que tengo en este momento todavía 6 James García vale en este caso lo que tengo que hacer Bueno fijaos voy a seguir corrigiendo hay una cosa que se me olvida corregir nombre uno es igual a por sombra uno pero aquí también tengo que poner el dos curso dos tres cuatro cinco seis diez ya funciona pero no todavía va a cometer un error vuelvo a no vuelvo atrás matrícula alumnos en el curso de web Apps este se llama Jaimito Martínez envío y el problema ahora está en que si yo visualizo la base de datos si yo veo registros de alumnos me ha creado Jaimito Martínez Este es el primero que he pedido pero me ha creado cinco más vacíos claro sabéis Qué pasa es que el formulario está enviando 6 usuarios y este Script lo que hace es meterse usuarios entonces claro que el usuario es tan vacíos a mi problema el programa no sabes están vacíos o no méteseis De esta manera Por tanto Vais a ver este es un problema muy típico y Vais a ver una manera muy sencilla de solucionar este problema básicamente el problema se soluciona con estructuras de control en este caso If vamos a pensar un poco con lógica lo que le vamos a decir es el usuario está lleno el nombre está lleno ejecuta la inserción en la base de datos el usuario está vacío el nombre de usuario no la ejecutes primero lo pensamos lógicamente y luego lo implementamos y así que ahora decimos mira Y si una estructura de control y tono corto y lo pego aquí si lo que envío por con nombre uno no es igual a nada veréis no es igual a nada Eso quiere decir que es igual a algo que es esto lo que estoy diciendo aquí es Sin nombre no es igual a estar vacío equivale a estar lleno veis pues haciendo esto voy a copiar y pegar en cada uno de los demás nombre tres nombre cuatro nombre cinco y nombre 6 y ahora lo que voy a hacer es poner las consiguientes llaves de apertura y de cierre voy a hacer un poco de sangría como veis para poder separar una cosa de otra ya que si no el código puede ser un poco lioso en el último bien si todo funcionado correctamente Mirad Ahora vuelvo a ejecutar articular alumnos y en el curso de web Apps yo matriculo ahora a Javier Martínez y los demás están vacíos Así que si ahora envío y voy a la tabla y refresco los resultados fijaos ahora bien Algún error ahí porque Javier Martínez de momento no aparece y no está en la columna siguiente vamos a verlo post Nombre que nombre uno verdad nombre uno nombre dos nombre tres nombre cuatro nombre cinco y nombre 6 vamos a probarlo ahora matricular alumnos matrículo a Javier Martínez las dos primeras con mayúsculas fíjate me ha salido así envío y ahora voy a la base de datos recargo y tengo ya ahí a Javier Martínez pero no tengo cinco registros más vacíos vale Y por tanto lo que voy a hacer ahora lo que voy a hacer ahora es pasar lista por tanto paso lista pero el problema se pasó lista es que tengo que elegir bueno el curso que del cual voy a pasar lista pues va venga paso lista vale esto es pasar lista punto php me hace falta un botón de enviar por eso input guardo recargo tengo ya el botón de enviar este Select tiene nombre sí curso verdad pues voy a hacer lo siguiente dónde lo estoy enviando a pasar listados punto php pasar listados existe no lo voy a crear yo ahora pasar lista 2 punto php va a tener lo siguiente pasar listados punto php es un Select lo que quiero es sacar los datos de alumnos y asistencias bien pues vamos allá voy a buscar algo que tenga un Select pasar lista esto tiene un Select Sí pues me lo copio pasar lista va a hacer lo siguiente cojo esto copio pego y hago aquí un formulario antes formulario después todo lo que no sea php lo saco de la etiqueta php forma método igual a post action igual pasando lista punto php y ahora aquí lo que hago es decir selecciono todo de alumnos web curso es igual a curso no olvidemos bien al principio nada más empezar se puede abrir una etiqueta de php cerrarla y luego volverla a abrir sin ningún problema vamos a ver y ahora eco fila nombre punto br vamos a ver si ha funcionado pasar listado Quiero ver los alumnos del curso de web Apps envío y me dice que está Juan Jaime Jaimito y Javier y me lo he dicho correctamente porque fijaos que Bueno realmente están todos no los de prueba no me los ha dicho no me ha dicho los alumnos del curso vacío verdad bien ahora además lo que voy a hacer es crear una tabla voy a crear una table de Wii igual al 100% High da igual Border igual a 1 va a ser una tabla un poco fea de momento pero por lo menos me sirve para ver correctamente que he hecho una tabla y ahora aquí en este eco digo TR pb nombre apellido bebé diréis en qué idioma está hablando este y voy a marcar un input de tipo check de tipo checkbox con el name vale cuidado con el name fila nombre que he hecho vamos a comprobarlo a ver si ha salido bien vamos a ver algún error hay Quiero ver el curso de web Apps si no dice nada es que he cometido algún error y el error vamos a buscarlo aquí me falta un punto parece que no hay ningún error más vamos a comprobarlo cargo y ahora tengo aquí como veis los alumnos que corresponden a ese curso donde puedo marcar las asistencias para un día concreto de cada uno de los alumnos Ahora evidentemente lo único que me quedaría por hacer es poder enviar esas asistencias y guardar la base de datos que alumno asistido a clase cada día desde ello voy a enviar voy a poner un montón de input type de tipo submit el botón de enviar sale con la palabra enviar porque yo pongo un input type submit entonces lo que hace es detectar automáticamente el idioma del navegador si el Chrome que tengo está en castellano podrá enviar pero si el Chrome que tengo está en inglés pondrás un mit por eso es muy recomendable que en el summit pongáis value y en el value con lo que quieras pulsame y me envías guardamos recargamos y pone pulsa y me envías vale por eso no digo que pongáis me envías pero que pongáis value igual a enviar Aunque al final ponga a enviar De todas formas pero por si alguno de tus usuarios cae con un navegador Bueno veréis lo que he hecho fijaos es poner una lista de firmas pero como yo distingo que este check está asignado a este usuario y no a cualquier otro usuario por la sencilla razón de que al checkbox le he puesto name fila nombres es decir si ahora miro el código comprobaréis reenvío el formulario comprobaréis Cómo pone input type checkbox name de tal manera que asocia ese checkbox a cualquiera de los usuarios voy a hacer una cosa voy a vaciar la base de datos de usuarios y voy a hacer una prueba real os voy a pasar lista vamos a ver la voy a eliminar los registros voy a eliminar los cursos y voy a hacer una cosa me voy a la pantalla inicial Yo soy el usuario que va a hacer un nuevo curso y el curso se va a llamar web Apps con mayúsculas este antes no existía matricular alumnos del curso web appspace con mayúscula vale nombre y apellido nombre y primer apellido y Miguel Ramón Juan Miguel Juan Ramón del morado Pedro Cosme Espera que te he puesto un espacio de más García Iván Andreu muy bien envío y esto quiere decir que si yo ahora voy a pasar lista selecciono un curso del cual paso lista y aparecen vuestros nombres y apellidos aquí vale Y puedo pasaros lista a cada uno de vosotros la cuestión está en que pulsa me envías pasar lista 2 te envío pasando lista punto php que no existe Bueno nos vamos a hacer que exista pasando lista punto php Qué es pasando lista es una inserción escojo vuestros datos y los meto en la base de datos pero ahora lo que tengo que hacer es delicado porque yo ahora no solo tengo que meter un usuario en la base de datos si no tengo que ese usuario comprobar si existe sacar su nombre y sus apellidos de otra base de datos y complementarlo vale o igual no hace falta No lo sé vamos a ver asistencias que tengo la existencias en asistencias Mostrar estructura a alumno pues lo voy a marcar directamente vale es una inserción Así que crear nuevo curso copio pego aquí tendré un problema que solucionaré más adelante que es Cuántos alumnos puede tener un curso el tema del máximo que hablábamos antes bien curso como paso yo el curso ha desaparecido aquí no hay rastro del curso Bueno pues hay una cosa que se puede hacer que es que en un formulario Mira la atención en un formulario yo puedo hacer un campo input de tipo escondido value name curso value post php eco post curso y cierro php esto vamos a comprobar que sigue funcionando pues envío vale sigue funcionando y ahora lo que voy a hacer dentro de pasando lista punto php es decir que el curso es igual al curso el usuario en este caso sigue siendo sesión usuario vamos a tener utc sigue siendo utc IP sigue siendo IP usuario lo tengo duplicado para que lo quiero y ahora voy a hacer lo siguiente conexión ese culité Me conecto a esta base de datos e inserto dentro de asistencias y me hace falta obtener el alumno es igual a post y para esto me hace falta en pasar lista decirle que name es igual no name es igual alumno vamos a ver esto alumno value es igual al valor no estoy muy seguro de esto vamos a ejecutarlo insertar en asistencias los siguientes valores alumno profesores usuario curso es curso ips ip utc es utc navegador es igual a navegador en asistido lo voy a dejar en blanco y luego me hacen falta dos Campos más coma vamos a ver si esto funciona bien recargo marco asistencias me devuelve el escritorio Y si ahora me voy a asistencias que ha grabado pues ha grabado que el usuario hokarsa el alumno vacío ocasa web Apps ha asistido al curso bien en este caso no estoy cogiendo correctamente alumno vamos a ver por qué name alumno claro post alumno tiene que coincidir vamos a volverlo a hacer pasar lista del curso de web Apps marco 2 pulsa me envías y ahora registro en asistencia muy bien José está llegando ha llegado el primero todavía pasar lista el curso de web Apps vamos a hacer que Pedro haya asistido pulso a mí me envías revisamos la base de datos y vemos que Pedro ha asistido a partir de ahí lo que tenemos que hacer recordáis Tenemos una lanzada tenemos un alumno que se registra tenemos que poder hacer a continuación que seis alumnos puedan entrar a la vez en la base de datos de asistencias lo que vamos a hacer ahora es descargarnos el ópera Mobile emulator para simular un teléfono móvil con ópera Mobile dentro de nuestro ordenador y para eso si no tenemos esa dirección Mirad voy a abrir Google y voy a poner atención en Google voy a poner ópera Mobile emulator que me llevará evidentemente directamente a esta página a partir de esta página lo que tenéis que hacer es pulsar este botón e instalar opera Mobile emulator es software gratuito con lo cual no tenéis que piratear nada ni poner licencia y tal veréis que tiene descarga tanto para Windows como para Mac como para Linux Así que hacéis clic descargáis instaláis y una vez lo tengáis arrancado una vez lo tengáis instalado lo arrancáis vamos a arrancar todos la misma máquina por tanto voy a arrancar el ópera Mobile emulator tras lo cual aparece esta ventana en la que se me ofrece elegir una configuración de dispositivo móvil voy a arrancar por ejemplo un HTC deshare realmente me da igual cualquier navegador voy a elegir una resolución donde puedo elegir por ejemplo 480 x 800 en modo retrato podría elegir cualquier otra resolución voy a elegir también una densidad de píxel y elegir si el input es con toque con keepad o con tableta voy a elegir toque elegir un teléfono por tanto elijoyer acepto los parámetros por defecto y pulso sobre launch tras lo cual aparecerá puedo minimizar esto la primera vez que aparezca tendré que aceptar el uso del emulador y a continuación por tanto lo que voy a hacer es otra vez mantener el código voy a repartir el espacio el código a la izquierda el emulador a la derecha por cierto que el emulador admite las mismas direcciones aparte de poder Navegar hasta cualquier dirección externa me permite Navegar hasta cualquier dirección interna Mirad por tanto puedo poner para continuar nuestro trabajo localhost barra web Apps barra Proyecto 1 barra 5 que es donde nos hemos quedado Oye cómo Dónde están los botones de zoom Mirad para hacer zoom porque a mí por defecto Me parece muy pequeño como en cualquier teléfono móvil doble clic y hace zoom Y a partir de ahí aparecen los clásicos botones de zoom menos zoom más tras lo cual vamos a hacer la parte de html y css este proyecto pero directamente simulando lo para una web para teléfono móvil vamos a empezar con la pantalla inicial donde vemos que tenemos una maquetación que es de todo menos una maquetación optimizada para teléfonos móviles lo que voy a hacer es optimizarla para que se vea correctamente en un navegador Por eso voy a cerrar todos los archivos donde estaba trabajando voy a hacer un estilo Que de momento va a ser interno que más adelante se convertirá en externo Por eso voy a abrir index.php y para poner estilo lo que voy a hacer es lo siguiente me hago hueco realmente no me hago hueco después del session Start porque el sesión está recordáis que tiene que ir lo primero de todo tengo html tengo gel y dentro del Head voy a poner aquí una etiqueta de estilo la cuestión está en que más adelante si tenemos por ejemplo php por aquí Tendremos que sacar el estilo del php o si lo ponemos ponerlo dentro de un eco ahora lo veréis estilo de tipo texto barra css a partir de Aquí vamos a tomar una serie de decisiones Como por ejemplo background Black el fondo va a ser negro las aplicaciones móviles hay algunas Esto no es un consejo general lo voy a hacer ahora igual luego cambio de idea y todo pero hay más aplicaciones con el fondo negro y aplicaciones para PC por tanto le voy a decir que el background va a ser Black y el color va a ser White vamos a ver cómo se ve cada cosa que hacemos lo que hacemos un momentín es actualizar ahí Perdón estoy en voy a pasar ya a la parte 6 H de docs y así en la parte 6 trabajo con css web Apps Proyecto 1 paso a la carpeta 6 y ahora me aseguro que estoy trabajando con la carpeta 6 tanto aquí como aquí Proyecto Uno barra 6 vamos a verlo vamos a ver cómo se ve algo claro por favor Cómo puedo yo poner esto sin especificar A quién me estoy refiriendo html coma Body por eso no funciona entonces estaba diciendo no sé qué está haciendo Pongo aquí guardo recargo Y si ahora recargo la página Ahora sí veo como empiezo a aplicar bien más cosas a continuación lo primero que tengo que hacer es hacer los elementos más grandes o bien decirle al Body que es más pequeño with por ejemplo de 400 píxeles guardo recargo veo que el with lo he hecho de 400 píxeles pero esto sigue sin ampliarme el tamaño por tanto lo que voy a hacer voy a poner 100% es empezar a estilizar diciendo que atención h1 por qué porque tengo aquí un estilo h1 le voy a poner un fondo de 72 píxeles Por qué Porque es que hay cuatro t me sobra un montón de espacio en pantalla recargo y aún me sobra una barbaridad por ejemplo pongo 150 píxeles guardo recargo hemos ahí como lo voy maquetando poco a poco le voy a decir que text a Line es igual a Center le voy a decir que margin es igual a 0 píxeles y que paguen es igual a cero píxeles y así de esa manera veis lo tengo ya lo voy maquetando en pantalla es como poco a poco se parece más a una aplicación móvil problemas aplicaciones móviles es que el lenguaje visual no tiene nada que ver con una aplicación para web esto en una en un navegador web sería una verterada Pero esto mismo en una aplicación móvil tiene más pinta de aplicación móvil Vamos allá tool for teachers bien pues marqueto ahora h2 y le digo que phone 6 es más me lo voy a copiar y pegar le voy a decir que el phone 6 será de y que nada más vamos a ver cómo queda tool sportiches quizás un poco más pequeño empieza a jugar 60 píxeles cada vez guardo recargo y veo insisto Cómo va a quedar en un terminal móvil a partir de aquí lo que voy a hacer ahora es quitar las barras o por lo menos estilizarlas y desde luego Si quieres voy a empezar estilizando los campos veis Qué raro queda bien hacer lo siguiente voy a poner input y en los inputs voy a poner un estilo input type text y voy a poner ID o Class es igual a input para ahora decirle que todo aquello que sea de class input que tenga lo siguiente Mirad ahora veréis cómo se transforman veis los fuegos campos de formulario Vais a ver en qué se transforma voy a decirles que with es igual al 100% hype es igual a 72 píxeles Border radius es igual a 15 píxeles borde es igual a cero píxeles solid White vamos a ver cómo se ve esto Mira cómo se empieza a ver lo veis introduce tu usuario 100 píxeles el font size va a ser de 100 píxeles prácticamente esto ya se parece mucho más a una aplicación terminal móvil falta hacerlo de lo del zoom que no me haga zoom pero poco a poco veis ahí ya va saliendo más cosas introduce tu usuario vamos a hacer lo mismo para contraseña Así que Class input Aquí vemos Class input br para bajar de línea introduce tu contraseña cuidado voy a poner un margin de 15 píxeles para de esta manera separar los campos pero es más Vamos allá voy a decirle al programa que por ejemplo text Shadow es igual a 40 píxeles recargamos a ver si se ve no veo el texto en este caso probablemente Será porque ópera no lo soporte bien No pasa nada Ahora voy a decir también que paguen es igual a 25 píxeles Para qué para que haya un poco más de margen lo veis al escribir un poco más de margen entre el campo y el texto botón de enviar lo mismo le voy a dar una idea el input type submit Y de igual a botón enviar y a la maqueto que lo que tenga botón enviar tendrá la siguiente sí es igual al 100% High es igual a 100 píxeles font es igual a 100 píxeles veis ahí pedazo de botón de enviar pero es que ahora le voy a decir más borde es igual a un píxel solid White borde radios es igual a 30 píxeles Y background es igual a rgb 200,255,200 que equivale a un color verde clarito veis como voy estirando y es más le puedo decir que quiero un padding de 25 píxeles para que me haga más distancia 25 píxeles no me lo ha hecho voy a hacerle un hype de 150 píxeles Ahora sí y ahora le digo incluso que le pongo un margin led de 20 píxeles guardo recargo veis como centro poquito a poquito el botón de enviar marginal tengo ya maquetado tanto lo que sería la primera parte de mi web up con Campos suficientemente Grandes como para que el usuario pueda pinchar para acceder a y no equivocarse para pequeños el único campo que me queda minúsculo es este de aquí fijaos que incluso ni con el ratón casi puedo acertar aquí podrías crear un nuevo usuario bien pues lo que voy a hacer una vez más es en el H red decirle Y de igual enlace nuevo usuario y aquí decir enlace nuevo usuario que será igual No sé Oye low el color que decidáis para que se convierta en un hipervínculo text decoration no con 100 píxeles y Tex a Line Center guardo recargo no Tienes usuario cuidado se me ha quedado ahí abajo a partir de ahí me viene bien estos simuladores para si yo hago así evidentemente voy a ir hacia abajo pero debo evitar en la medida de lo posible tener que hacer que el usuario baje hasta abajo del todo así que elijo que quiero hacer Pues igual elijo repelar un poco porque tengo aquí tres t4 t tengo aquí tool for teaches pero me sobra un montón de información y en el móvil no puedes cobrar Nada igual esa línea es la que le falta y bajo pues digo Bueno t4 t voy a decir que el h1 flote a la izquierda por qué Porque explota a la izquierda se llevará al texto verdad y ahora digo tools for teachers voy a decir que aquí en el hr no sé si os acordáis en pedir que la cosa explotaran que nativo Style Clear voz hace que dejen de flotar las cosas guardo recargo bien ahí lo tenemos no Tienes usuario Haz clic aquí casi ya estamos Tools teacher lo voy a bajar un poquito para eso voy a h2 y le digo tu margin top va a ser de 100 píxeles no sé vaya se resiste no parece que quiera pero se resiste tu margento va a ser de 200 vale Ahí hay algún otro problema Pues algo que puedo hacer para hacer un poco de trampas me va a permitir voy a hacer un poquito de trampa es meter un vr ahora y mete unos cuantos vrs y lo bajo manualmente no es una trampa muy recomendable para todos los casos pero ya es una trampa Al fin y al cabo puede corregir unas cuantas cosas por ejemplo el hype aquí le faltaba una G Al hype de los formularios Perfecto ahí los tenemos ahora lo que tenemos que hacer es corregirlos 150 píxeles y luego este margin efectivamente no me funcionaba el margin porque tengo aquí un Martín cero píxeles que tendría que hacer si quiero que el top sea de 200 píxeles diría que margin led de 0 margin Drive de Cero y margin botón de cero Y de esa manera Tengo cuatro márgenes independientes ojo cuidado ahora se va a ir muy abajo porque ahora he hecho el truco y el margin evidentemente si el marching ya funciona voy a quitar el truco consistente en los varios vrs bien qué ha pasado aquí casi que me voy a dejarnos varios y le voy a quitar este margin h2 margin top de cero píxeles voy a dejar el truco y así casi que mejor porque me había quedado bien maquetado y lo que haré ahora evidentemente es empezar a trabajar con elementos tales vamos a ver no tiene usuario Haz clic aquí enlace nuevo usuario por ejemplo voy a decir que el phone size sea de 70 píxeles voy a ir probando hasta cuadrarlo en una línea y ahora un texto a Line Center bien se pueden poner imágenes texto Line Center lo he puesto y no me funciona y no me funciona Porque el wift no es el 100% bueno aún así se resiste ahora luego veremos Por qué se pueden poner imágenes de fondo de formularios se puede poner perfectamente lo voy a hacer en este caso es sacar un programa que se llama el gimp que es como Photoshop pro de software libre que nos permite crear imágenes os permite Editar imágenes permite crear imágenes durante la formación sacaré tanto el gym que se parece a Photoshop por Libre como inca Scape que se parece a illustrator todo el software libre tú también se pueden hacer evidentemente con Photoshop y con Pero en cuanto ha degradados voy a hacer un degradado de 32 por 32 píxeles no voy a hacerlo de 150 por 150 píxeles una de las ventajas que tiene aquí es que tiene una cantidad de degradados increíble yo hago así y me sale una biblioteca de degradados bastante buena de donde voy a elegir por ejemplo call Steel hago con destil y hago así y hacer así al revés me preparo un degradado le puedo preparar una capa de color blanco por delante para que con opacidad pueda controlar aire transparencia y ahora me voy a guardar esto dentro evidentemente de la carpeta de proyecto Sam h2 web Apps Proyecto 1 carpeta 6 en estos momentos hago una nueva carpeta llamada img imágenes y la guardo como degra botón punto png si ahora vuelvo a la programación en el enlace nuevo usuario no en botón enviar voy a decir que el background es url img barra de grabotón.png si ahora recargo comprobaré como ahora el botón tiene un degradado concretamente el degradado que diseñado no solo se pueden meter imágenes de fondo a los botones de enviar de hecho veréis incluso que cuando lleguemos a javascript el botón submit dejará de existir ya que nos vemos nuestros propios botones completamente personalizados pero ahora de momento lo que vamos a hacer es ver como también se puede poner imágenes de fondo en los fondos de los formularios por tanto voy a volver a gin para luego haremos más detenidamente sobre game y mirar voy a hacer lo siguiente voy a hacer un archivo nuevo de 16 x 16 píxeles hacerlo rápido ahora luego voy a explicar poco a poco Cómo funciona esto del gin que es un programa muy importante muy interesante para hacer cualquier cosa de web y voy a pintarlo de color blanco y voy a usar el lápiz con una escala de un píxel Voy a pintar con Pixel negro y digo ahora empieza a pintar por aquí 1 2 y 3 pues 1 2 y 3 y pinto 1 2 y 3 Perdóname que lo haga un poco manual esto se podría hacer más automatizado creando líneas pero 1 2 y 3 ya no he tenido suerte Bueno sí Igual Sí aquí da igual porque ahora voy a recortar y voy a establecer un patrón cuando yo creo un patrón para un fondo teóricamente creo que es aquí teóricamente debe repetirse el principio debe ser igual no se repite no pasa nada no era ahí no pasaba un pincel más abajo debe ser una persona porque cojo el lazo cojo eso lo arrastro o lo corto lo pego lo que te pego un pincel más abajo y ya está y ahora esto lo fusionó con la capa debajo y ahora puedo continuar pintando y vamos a ver una cosa así más o menos el problema es que en este patrón no se repite si os fijáis si hago guías por ejemplo ostras sí que se repite Ah pues sí que se repite ha sido casualidad bueno Vale ahora lo voy a hacer más grande es claro la imagen por ejemplo a 128 por 128 le digo interpolación cúbica y ya tengo por tanto un degradado y ahora además lo que voy a hacer es aplicarle un pequeño filtro desenfoque gaussiano entonces son truquetes luego hablaremos de ellos un filtro gaussiano a continuación lo le aplico un brillo contraste vamos a ver si se sigue repitiendo así parece que sí esto es eso de ahí no parece que no pasa nada voy a volver a como estaba te voy a decir que hago la imagen más grande 128 por 128 sin interpolación ninguna vale escala ahí voy a hacerlo un poco más pequeño perdonadme que dude Vale ahora sí esto lo guardo como fondo input Y si queréis para que no sea tan machacón le voy a hacer una capa por arriba donde le voy a poner una capa de color blanco y así tener un degradado pero tampoco se interpreta tanto con el texto guardo y ahora por supuesto puedo ir al input y decirle que en input form me copio este background url y le digo fondo no me acuerdo cómo lo había llamado a fondo input guardo recargo y ahí tenéis se ve si no me acerco el degradado veis con la imagen de fondo hay una cosa que quiero ver si me funciona que suele quedar muy bien en los inputs que es poner un Box Shadow Espero que ópera me lo pille de 0 píxeles 25 no 50 píxeles Black pincel a ver si lo pillan Sí muy bien veis una sombrita dentro de voy a ponerlo en lugar de 40 píxeles de 20 píxeles y así parece como que el formulario está como en relieve está como metido hacia adentro