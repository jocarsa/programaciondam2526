y bueno en la sesión de Hoy empezamos la parte de decidí punto js por tanto lo primero que os voy a decir es que este software es una librería de javascript para poder trabajar con Canvas 3D Entonces lo primero que vamos a hacer es entrar dentro de free punto js que encontramos dentro de free js.org desde donde vamos a poder descargar la librería y desde donde vamos a poder empezar a utilizarla así que por tanto me voy a ir ahora mismo estamos fijaos por la free punto js Release número 75 así que bueno Al igual que en jquery Y al igual que en cualquier librería debemos estar pendientes a las novedades que van saliendo a las diferentes relisis que van saliendo y las pues novedades que nos traen cada una de ellas por tanto en este caso pues pinchamos en Download Tenemos aquí unos cuantos ejemplos que iremos viendo Pero por qué es pesadito vamos a verlo va No claro efectivamente Entonces vamos a ht dogs voy a ir a crear una carpeta llamada free punto jjs en el punto y voy a guardarme el free js Master que como podemos ver a día de hoy pues acaba ocupando ahora mismo unos 157 megas sin embargo ni de lejos la librería entera ocupa 157 megas sino que ahora cuando la descargamos veremos que la librería igual son 100ks 200ks y el resto son archivos de ejemplo librerías de apoyo librerías alternativas que tenemos bueno no en este caso es te lo bajas todo y ya está si entras En github qué pasa bien si entras en github tienes la lista completa de archivos que contiene la distribución y en github es donde puedes descargar exactamente aquello que quieras pero si pinchamos Download veréis lo que ocurre Es que hace años otra descargabas el free punto js y el ceip punto js tenía lo mínimo con lo cual en cuanto querías hacer algo más allá de lo mínimo pues tenías que volver aquí y volver a descargar y preguntar qué es lo que faltaba y tal con lo cual ahora han cogido la filosofía de decir no yo te doy lo máximo y tú ya a partir de ahí dentro ya verás que te coges o que sí no haces lo que quieras o haces lo mínimo o haces lo máximo o haces un término intermedio o lo que sea así que después de unos pocos segundos Pues el 6.js acaba de descargarse en nuestro equipo con lo cual vamos a verlo vale con lo cual lo podemos mostrar en carpeta lo que voy a hacer ahora es extraerlo llevamos un poco a revisar qué es lo que tenemos claro son 160 megas comprimido descomprimido evidentemente será bastante más igual Son 300 megas o por ahí Entonces vamos a verlo fijaos descomprimido Pues estamos hablando de 279 megas pero yo entro dentro de la carpeta free punto jsmaster y lo primero que voy a ver es que tengo el proyecto completo de github tengo el repositorio completo de Hub me voy a src y dentro de src fijaos que free punto js Son 8k free Legacy son 23k pero claro luego tengo aquí librerías para dar y tomar tengo librería de animación tengo librería para trabajar con audio tengo librería para trabajar con cámaras tengo librería que únicamente tiene el núcleo como está eso está Guay sí ahora vamos a trabajar con ello según entonces tengo aquí el free punto js dividido en librerías también lo que quiero que veáis es que tengo un archivo llamado tri.js y uno llamado free punto legacy.js que es el Antiguo No al contrario Legacy es el legado y el legado es la versión profesional es la versión antigua es una más cool por tron Legacy Pero vale el Legacy es el Antiguo vale por eso fijaos que el Antiguo es el que ocupa 23ks es decir tenía más cosas ahí metidas mientras cada día que pasa lo que están haciendo es Descargar más el punto js dejarte lo pelado y todo aquello que quieras te lo tienes que importar lo cual a la larga no es mala filosofía hoy va a hacer que nos cueste un poco arrancar vale Pero a la larga no está mal Entonces vamos a ir a examples Porque además como podéis comprobar solo la carpeta examples pues me ocupa 251 megas esa es la razón por la que este archivo ocupa tanto y lo que vamos a hacer en este caso es revisar un momento la carpeta de examples Mirad atención fijaos que yo por ejemplo tengo así effect y tengo el prefijo Canvas tengo Canvas Canvas Canvas css 3D Ahí va esto a mí me suena fs 3D tengo mis Miscelánea tengo Ray tracing tengo software y al final tengo un montón de archivos de webgl web gl webgl Bueno pues esto que estáis viendo Es otra de las ventajas de trabajar con free punto js y es que flip.js tiene internamente varios tipos de motor de render incorporado Eso quiere decir que yo por ejemplo puedo usar webgl yo creo que la gran mayoría de las veces usaremos webgl web gl equivale a Open gl en la web equivale a más calidad pero también más uso de recursos Pero qué pasa si alguna vez tengo algún dispositivo un móvil un ordenador un lo que sea que no tiene aceleración gráfica por webgl todo lo que haya programado en free.js no me servirá no la realidad es que yo En aquel momento cambiaré de webgl a Canvas y podré comprobar como mantengo todo el código pero el lugar de renderizar en free punto js con aceleración lo que hará es renderizar muy buenas lo que hará es renderizar sin aceleración en un Canvas 2D Bueno voy a empezar Por cierto soy azul vale voy a empezar y voy a hacer lo siguiente Mirad lo primero que quiero es dentro de esa carpeta free punto js que Está fantástica Sí porfa Gracias Que Está fantástica no te digo que no Mira me voy a ht dogs me voy a free js donde ahí tengo toda la carpeta pero quiero un ejemplo y quiero destriparlo vale Así que atención todos a la pantalla voy a crear un nuevo documento de texto y voy a crear un archivo llamado cubo punto html de momento vamos a empezar con html Aunque por supuesto esto Más adelante se puede combinar con php vale Pero hoy de momento para empezar trabajamos con html y por tanto lo que quiero ahora es cargar dentro del editor de código quiero cargar tanto Mirad el archivo cubo punto html que por supuesto está vacío como archivo que encontramos dentro de examples llamado Canvas Geometry cube que es simplemente hacer un cubo de geometría Sí hoy no Pero más adelante sí que nos va a venir muy bien jquery al final lo mezclaremos todo al final tendremos html con javascript puro con tripunto js con jquery con php con base de datos Y con todo pero hoy para empezar únicamente trabajamos con esto bien pues fijaos por tanto que yo en este caso lo que voy a hacer es Este ejemplo pero lo voy a destripar un poco porque digo madre mía qué es esto que para hacer un cubo Mirad a la pantalla que para hacer un cubo en primer lugar tengo que declarar un montón de variables y luego es que hacer un cubo es todo esto de aquí vale pues realmente no realmente realizar una sencilla operación de crear una primitiva es algo más sencillo que todo este código por eso me parece fantástico que reviséis todos los ejemplos pero tampoco resultéis cuando veáis alguno porque como cualquier ejemplo de documentación que vemos siempre son ejemplos bastante complejos así que por tanto voy a hacer lo siguiente en cubo html en primer lugar me creo un html con un her este html aparte de un Head también tiene un Body y por tanto lo primero que veo dentro del Body es que se cargan una serie de scripts estos scripts los podemos encontrar dentro de Bill dentro de renders Vale pues vamos a hacer lo siguiente Mira la atención Vamos allá miradme me voy a esa carpeta a ver me voy a ht dogs me voy a free js y misión hoy es haceros una introducción lo más sencilla posible a free punto js por tanto yo me voy a los ejemplos examples y digo lo primero que necesito es el propio free punto js pues digo esto está bajando una carpeta está en free js Master esta en build la carpeta build y está en un archivo que se llama free punto ming.js y el archivo atención free.mint.js ocupa 466ks vamos a ver hoy de momento vamos a trabajar con el paquete completo este flip punto en punto js Son 486 Cash y tiene un montón de las otras librerías que antes vemos por carpetas lo otro que veíamos antes es para cuando trabajemos en modo experto es yo no quiero cargar 400 casi 500ks de cosas que no voy a necesitar cuando sepamos que tiene y que no tiene y vayamos a un proyecto que yo diga Oye para qué voy a cargar 400 500ks cuando puedo cargar 20k si sé lo que quiero y sé lo que no quiero pues en ese momento haremos eso pero hoy que estamos empezando pues lo que quiero es cargarlo todo por si acaso Así que mira me copio este archivo me lo bajo a esa carpeta y creo una carpeta llamada Live de librería y lo pego ahí vale me he creado una carpeta Live y he pegado el archivo free punto ming.js a continuación de js renders Es decir de la carpeta js de la carpeta dónde estás ahí jsjs de examples me voy a js madre mía lo que tengo aquí pero esto es una pasada tengo un montón de cosas ya hechas Vale pues vemos que estoy en free y js examples js y me voy a renders renderizadores toma ya porque tengo un Canvas renderer que es el que vamos a empezar a usar tengo un css 2D tengo un css 3D tengo un css 3D estéreo render para verlo con gafas tengo un proyector es una librería común tengo un render con Ray tracing que eso no nos dirá nada hoy pero Mola mucho poder calcular sombras más precisas reflexiones de espejos y todo eso ojo tengo un rey tracing con workers los workers tengo un software render y tengo incluso esto es muy Friki un renderizador en svg que para ciertos tipos de juego en plan inken Paint en plan pintura puede venir muy bien así que En definitiva lo que voy a hacer es que sí tipos de dibujo animado digamos entonces me voy a copiar Por una parte el proyector y por otra parte me voy a copiar el Canvas render punto js así que por tanto me copio el Canvas render y el proyector me los bajo a la carpeta free punto js y me los pego dentro de la carpeta live así que por tanto lo que acabo de hacer es aislar de toda esa maraña de archivos me he aislado los archivos que ambas render proyector js y free punto ming.js que es lo que voy a hacer los voy a cargar así que dentro del Body se puede se vuelve perfectamente sí sí entonces hago una etiqueta Script y digo src es igual en primer lugar siempre la librería maestra free punto ming.js a continuación podéis cargar cualquiera de las otras yo voy a cargar primero la librería cuidado está en la carpeta Live no nos olvidemos voy a cargar en primer lugar dentro del ir proyector punto js y voy a cargar también dentro del IP la librería Canvas renderer Cuidado con las mayúsculas punto js estoy en la carpeta ht2 de Sam no tengo el Champion instalado técnicamente el Sam no es necesario para free.js pero si lo arrancáis mucho mejor así que arranco el champ me voy a Chrome y me voy a localhost free js y arranco cubo punto html arranco inspecciono voy a inspeccionando evidentemente este Script de momento no tiene porqué dar ningún error porque lo único que he hecho es cargar librerías Así que vale simplemente tengo ahí librerías cargadas voy preparando el Script y ya está sigo por tanto y ahora continuó dentro del ejemplo tengo aquí un Script tengo aquí un Script tengo aquí un Script madre mía que Script más grande vale Y lo que voy a hacer por tanto es ahora empezar a copiarme unas cuantas líneas de este Script atención todos a la pantalla Mirad voy a crear un Script miradme primero y luego lo copiáis voy a dar tiempo ya os digo que la clase de hoy es una clase de fundamentos por tanto lo que me interesa es con fundamentos queden bien asentados no voy a correr especialmente Aunque parece que voy a correr no voy a correr nada entonces en primer lugar bueno si vale tengo una serie de declaración de variables iniciales bien pero sobre todo lo que estoy haciendo aquí es Llamar a una función init y a una función llamada animate que es init y que es animate pues init es condiciones iniciales y animate es Loop la misma lógica que hemos estado usando hasta ahora Así que llamo a la función init y a la función animate pero claro como os podréis imaginar tengo que declarar la función init y tengo que declarar la función animate Así que guardo y recargo y evidentemente al recargar aquí en la pantalla no ocurre nada y en principio tampoco digamos Pues tengo ningún error porque simplemente lo que he hecho es Llamar a dos funciones ejecutar dos funciones vacías y aquí no ha pasado nada a continuación dentro de la función init la función inicial veo como se declaran ciertas cosas por ejemplo dentro del container en este caso es un documento punto create Element Deep eso qué quiere decir pues que voy a crear un elemento llamado did dentro del propio documento esto estas dos líneas mira nos van a permitir en la función inicial simplemente declarar una variable que equivale a crear un nuevo elemento dentro del documento con el y Deep o sea con el tipo de etiqueta bim Y por último ejecuto la petición en el documento body en el cuerpo del documento añado una etiqueta hija que es justo esa etiqueta que acabo de definir arriba así que por tanto si ahora guardo y recargo comprobamos como inspecciono y al inspeccionar dentro del Body comprobaréis que aparece un dip Ahí va ese dip de dónde sale si no está pues ese edit proviene de javascript lo que quiero ahora por tanto es seguir con las siguientes líneas esto realmente no es Canvas eso realmente es javascript Pero lo que sí que es Canvas es esto creo una cámara y esa cámara es una nueva cámara en perspectiva todo esto que vemos aquí es empezar a profundizar en la Api de free punto js podéis cargar una free punto perspective Camera porque antes habéis cargado la librería free punto js y la librería de proyección así que me copio la cámara y digo Si un momento esto ahora veremos Vale entonces la idea Está en que yo a partir de aquí digo tengo una nueva cámara que tiene una cámara en perspectiva a partir de aquí aparecen unos ciertos parámetros Tendría que ir a la Tendría que ir a la documentación de js para saber qué quiere decir cada uno de nuestros parámetros Pero no pasa nada os lo digo yo este parámetro 70 es la apertura al igual que en Blender es si la cámara está muy abierta o está muy cerrada en este caso 70 me está diciendo que la cámara está abierta a 70 grados a continuación viene la proporción en este caso es el window punto Inner High partido el punto el window punto Inner with eso no es tri.js esos javascript es la anchura por la altura esto quiere decir que la ventana de la cámara va a respetar la proporción que tengas en el navegador lo cual Bueno me gusta y luego por último tenemos esto de aquí que son los clipping kleins de hecho creo que tuvimos algún problema con los clipping kleins en Blender en su momento los clipping Plains es a partir de donde recortas no puedo ver nada que esté a menos de una unidad un centímetro y no puedo ver nada que esté más allá de mil unidades de mil centímetros pero vosotros diríais bueno Vale pero tú cómo puedes saber qué parámetro es cada uno de estos Bueno pues yo porque me los de memoria pero vosotros lo podéis consultar en la documentación en un momento dado si tenéis duda entonces en la documentación veréis que me voy a free punto js docs free punto js perspective Camera y llegaréis a free punto js documentation referencia perspective Camera y dentro de perspective Camera es donde Vais a entrar vamos a verlo aquí es donde Vais a entrar y tienes el constructor los cuatro parámetros son el fob que es el fill of View la apertura que os he dicho antes sí el frustoom es el fondo de la cámara Pues como el ccd de la cámara Entonces el Camera aspect ratio la anchura por la altura el nier el near Play el plano cercano de recorte y el fair play quiero decir que en este caso pues yo a medida que vayamos trabajando o sigue diciendo unos cuantos parámetros tendréis Ya que tú no sabes de memoria donde los puedo consultar yo pues os iré Siempre os redireccionaré a la documentación oficial que encontramos en free punto js Perdón ceyjs.org/dox almohadilla referencia y dentro de la referencia ya tenéis para cualquier cosa cualquier librería O sea no os vais a acabar la librería aquí tenéis para un buen rato de librería Pues ahí lo tenéis todo bien pues tengo una nueva cámara y a continuación copio otra de las líneas que es la línea de la escena Entonces le digo Ah sí antes de ello Perdona cuando yo creo una cámara esa cámara dónde está Pues esa cámara está en 000 Así que mira la atención todos mis manos si yo creo una cámara en 00 y la caja está en 00 Que veré interior de la caja vale por tanto si voy a crear una caja y Quiero ver la caja tendré que alejar un poco la cámara cómo voy a alejar un poco la cámara con estas dos líneas que tengo aquí entonces Esas dos líneas son si la cámara representa si la variable Camera representa a la cámara es cámara punto propiedad punto position punto x tengo posición tengo rotation y tengo scale posición rotación y escala Así que en este caso digo de la cámara qué Cámara pues la cámara que aquí arriba acabo de declarar de la cámara Quiero variar su posición y quiero variar su posición x atención todos alargar el brazo derecho vale eso es x subir el brazo izquierdo eso es y no es Z y ahora el brazo derecho sí hay que transformar y ahora el brazo derecho moverlo hacia adelante eso es Z vale lo digo porque en muchos programas de cada 3D esto es x esto es Y esto es Z pero Aquí no aquí derecha es x arriba es y no Z y hacia adelante es Z por tanto en este caso yo le estoy diciendo que la cámara en x la muevo por ejemplo 100 y ahora le digo que la cámara punto position punto ahora luego lo cambiaremos esto punto Ah perdón y lo estoy moviendo en y hacia arriba 100 y ahora Z lo estoy moviendo en 500 Yo igual ahora luego lo muevo menos 500 Pero vale de momento 500 eso qué quiere decir pues que me hago así y digo igual estoy moviendo la cámara 100 hacia arriba 500 hacia delante vale No muy buena de hacia el lado entonces Camera posición Z vale ahora mismo si este es el centro y la cámara está allá está mirando hacia adelante por eso ahora luego la giraremos hacia en 180 grados para que mire hacia el centro en la z positiva eso Entonces ahora digo escena es igual a New free punto sin vaya esto de New me suenan objetos entonces digo voy a comentaros esto digo creo una cámara modificó la posición de la cámara digo ahora creo una escena Y por supuesto porque no siempre es buen momento para guardar recargar y comprobar Que de momento no tenemos ningún error tampoco tenemos nada en la pantalla pero no tenemos ningún error repasando las dos líneas anteriores las dos líneas que hay en init yo digo en primer lugar creo una variable y le preparo no ejecuto preparo la creación de un nuevo dip en el documento fijaos que he puesto en mayúsculas lo de preparo Por qué Pues porque ahora os digo ahora efectivamente ejecuto la creación de ese dip como hijo A pensar del Body punto a él en el body añado un hijo añado una etiqueta que no es sibling que no es una etiqueta hermana sino que es una etiqueta hija quiere decir que está dentro del Body vale por tanto esto se podría haber puesto en una sola línea Fíjate que podría haber cogido esto de aquí cortarlo y ponerlo dentro de container Pero bueno se entiende mejor si lo ponemos así claro como te puedes imaginar creamos un elemento di porque luego crearemos ahí dentro de Canvas Y por supuesto guardamos y recargamos para comprobar que evidentemente sigue sin dar error muy bien y por tanto ahora de hecho fijaos que incluso el documento de ejemplo tiene un mini comentario ahora es cuando realmente vamos a crear un cubo daros cuenta que todo esto que he escrito ha sido para nada realmente ha sido para inicializar sí que prepara una escena vacía una escena nueva algo que era innecesario dentro de 2D pero es necesario dentro de 3D porque al final como ahora veréis todo se añade finalmente a una escena ahora veréis bien Por tanto yo digo lo siguiente Ah venga no esto nos lo vamos a saltar pero vamos pero mil Entonces ahora creo un cubo entonces crear un cubo es crear una geometría que tiene 200 por 200 es decir un cubo que tiene 200 unidades de largo por 200 unidades de alto por 200 unidades de profundo y esto ni se os ocurra esto no la verdad es que para hacer un ejemplo es bastante complejo qué diríais que está haciendo eso por cada cara está añadiendo un color hexadecimal aleatorio Eso es decir lo que está haciendo básicamente es darle un color diferente a cada una de las caras me parece fantástico pero para un primer ejemplo no porque no sea que entendáis que es que si no haces un favor no vas a poder hacer una caja no en absoluto Pues mira ahora mismo me pillas eso no sé por qué lo hace primero en mí y luego en i+1 no me importa ahora mismo entonces Pues sí parece que sí porque efectivamente va cada dos y como va cada dos a este y al siguiente me da igual vale material bien creo un cubo creo un material antes de asignárselo al cubo Así que digo bar material es igual a New punto free mesh basic material donde digo claro atención vertex colors es igual a esto de aquí no no fuera fuera esto es muy complejo verdex colors es esto de aquí que había hecho antes vamos a ver Freddy punto Face no quiero algo mucho más sencillo quiero algo mucho más sencillo materials mesh basic material le pongo un color y ya está parámetros color bien Dame un ejemplo posible sí bueno es que la sintaxis creo recordar que es llave color dos puntos y este es el color blanco Pues voy a poner rojo ff0000 sin el punto vale poner eso si todo ha ido bien si todo ha ido bien recargo y no tendré todavía de momento ningún error vale Así que poner un mes basic material Y a partir de ahí Y a partir de ahí poner un color en este caso de color rojo claro yo he creado una geometría que es un cubo he creado un material básico que es de color rojo Pero en ningún momento todavía y asignado el color al material así que eso lo voy a hacer ya me empezáis a poner cara de ya son muchas líneas para no haber hecho nada Bienvenidos a tri.js bien entonces ahora digo mira ahora digo Ok y con esto se acaba esta parte ahora digo creo realmente el cubo le aplico el material y lo añado a la escena por eso necesitamos crear una escena entonces digo cubo es igual a New punto mes donde añado la geometría y el material a esa geometría le añado ese material le doy un poco de posición a la y ahora he creado una escena para ahora decir a la escena le añado el cubo un poco rebuscado pero os acostumbraréis el plano me lo voy a saltar las estadísticas Me las voy a saltar hoy Esto no me lo voy a saltar que es el renderizador porque esto es lo que realmente va a hacer la magia saltándome la parte del plano porque hoy solo queremos un cubo no queremos todavía más objetos Ahora me voy a toda esta parte de aquí que es el render Es realmente crear un render crear un renderizador es decir renderizar toda esta geometría por tanto me voy a copiar todo esto creo yo vamos a verlo ok no todavía no Así que ahora creo un renderizador y le aplico lo que hemos programado hasta el momento pego y al final se cierra un poco el ciclo porque Mirad pone container punto a pensal que es container pues container es justo esa variable que hemos declarado al principio que era la que tenía el Dif que añadíamos al Body Así que si todo ha ido bien espero que haya ido bien veo que me está poniendo un set Clear color 0xf0f0 f0 que diríais que es eso Pues que el fondo parece de color gris entonces guardo y recargo Bueno me lo ha puesto negro Pero vale pero todavía estoy viendo algo con lo cual fijaos Que de momento tengo algo en la pantalla de momento tengo un Canvas y dentro de ese Canvas hay algo de información 3D no la puedo ver De momento ya lo sé fantástico pero ya empieza a ver algo de información 3D dentro de ese Canvas y por lo menos he creado un Canvas Por cierto eso es el inspeccionáis si queréis veréis un Canvas ahora la cuestión está en que me voy a ir a la función animet voy a crear una función alternativa render todo esto de aquí Mirad todo este bloque de líneas me lo voy a saltar porque eso ahora no lo quiero todo este bloque de líneas lo que está haciendo realmente es trabajar con Qué pasa cuando redimensionas la ventana y Qué pasa cuando mueves el ratón No quiero eso vale por tanto lo que quiero es directamente esto que Vais a ver quiero renderer punto render Quiero renderizar la escena usando esta cámara y dentro de animate quiero request Animation frame animate y quiero simplemente render no quiero nada más porque ya tengo bastante Mirad esto es un request Animation frame Que fíjate tú qué casualidad llama a la misma función animate así que qué función diréis que cumple eso como nuestro cliente como nuestro set Time out pero en versión free.js vosotros ponéis eso y no os tenéis que preocupar De nada más del Loop la librería ya sabe como lopear lo que quiero eso sí es que en cada iteración quiero renderizar podría haber puesto esto aquí dentro mismo pero bueno lo pongo ahí dentro Así que vamos a comprobar si se empieza quizás tal vez Ojalá haber algo en la pantalla por tanto guardo y recargo y Mira tú por dónde que me aparece un cubo en pantalla ahora sí me aparece el fondo este gris que debía aparecer antes no sé por qué antes no aparecía Bueno yo veo un cubo y vosotros me diréis eso es un cubo porque tú lo digas porque de momento parece más una caja roja un rectángulo rojo que un cubo Bueno pues ahora veréis no se ve Sí yo también lo pensaba Pero bueno ahora veremos porque igual se ha movido en la otra dirección ahora lo vemos pero de momento lo que quiero que veáis es lo siguiente atención esto que tenéis en la pantalla sí que es un cubo Aunque parezca un rectángulo miradme todo sobre la pantalla porque ahora veréis que es sencillo que es mover rotar y escalar objetos así que dentro de donde Pues dentro de cube voy a decir atención línea 30 en mi caso cube punto rotation punto y lo voy a rotar en eje vertical es igual lo siento en radianes más punto pi que son 180 partido por 4 Así que guardo y recargo o vaya Esto sí que empieza a tener pinta de cubo eso sí que se ve que tiene algo de tridimensionalidad lo que he hecho simplemente es en el eje y es decir en el eje vertical rotar el cubo 45 grados Así que efectivamente Vamos a disfrutar un poquito de este bucle de render que realmente es un Loop para empezar un poquito a animar pero atención Mirad para ello voy a hacer lo siguiente en primer lugar dentro de las condiciones iniciales voy a crear una variable llamada Root y que voy a inicializar a cero es decir la variable Root y de momento vale cero por ello cuando al cubo lo roto le digo cube rotation y ya no va a ser más punto pi dividido entre 4 sino que va a ser Root y lo cual evidentemente guardo y recargo y me da el cubo rotado a cero no hay problema Pero dentro de animate lo que voy a hacer ahora es lo siguiente Mirad dentro de un email le digo y más caro rotti griega más es muy fuerte Entonces no me firro y más igual más punto pi partido 100 por ejemplo vamos a decir eso por lo que ahora digo cube rotation y es rock y actualízame la rotación del cubo Al actualizar la rotación del cubo vamos a guardar y recargar y comprobaréis como únicamente por hacer eso pero importante meterlo dentro de la función animate lo que está ocurriendo es que cada vez que pasa por aquí le añade más punto pi que son 180 grados partido por 100 es decir 1.8 grados sexagesimales actualiza la rotación de la y finalmente pide un nuevo fotograma y renderiza donde renderiza es simplemente me renderizas la escena con la cámara y lo que tenemos finalmente en la pantalla por tanto es un cubo rotando en el eje y se me ha olvidado decir al final que eran las líneas estas diagonales que si os fijáis aparecen en la pantalla Mirad estoy con el Canvas renderer entonces con el Canvas render que recordad que es el renderizador de baja calidad no se ven correctamente las caras cuando son co sino que tiende a aparecer eso te lo dibuja el render tiende a aparecer unas líneas blanquitas que te diferencian cada polígono que te delimitan cada polígono por tanto eso desaparecerá completamente cuando trabajemos con webgl renderer pero aparece siempre que trabajamos con Canvas render es un fallo si quieres llamarlo así del parece del antialias pero Sí vamos a verlo A ver vamos a darle un poco de colorido a la cosa pero es que no quiero hacerlo con el foro vale yo lo voy a hacer a mano Entonces cuando digo a mano lo que quiero decir es que vamos a ver como esto se va a complicar mucho a lo largo de los días quiero que hoy tengáis una introducción que de hecho esto se quede hoy grabado en un archivo llamado cubo punto html tal que más adelante cuando se complique la cosa podáis abrir este archivo y podáis un poco entender qué es lo que ocurría ahora mismo por eso este archivo de geometría de crear cubo no me gusta o sea es fantástico vale Pero no me gusta porque tiene mucho más de lo que necesito al principio entonces Mirad entonces aquí parece que se entienda porque claro Yo vengo aquí digo No me digas que para hacer una caja voy a tener que hacer un bucle for realmente no Y sabes que hacer un bucle for realmente para una caja que tiene seis caras si fuera un dodecaedro o un bt2 a ver edro que dura 100 caras pues Vale hago un foro pero para algo que tiene seis caras yo sabes que prefiero hacer algo así me voy a crear un cubo y ahora digo y ahora coloreo cada una de las seis caras entonces para esto digo Geometry punto faces Empiezo con la cara cero porque el número de caras Al final es una matriz y digo punto color punto set x Pues mira no vamos a ver Bueno sí va o lo tiran hexadecimal venga va setex que iba a cogerlo con rgb que también se puede rgb que es mucho mejor que el hexadecimal Pero bueno hoy hexadecimal Así que vengo aquí y digo 0x fff ff Perdón ff0000 esto Qué es la cara 1 es roja Ahora vengo aquí atención por eso prefiero hacer esto antes que un Ford ya habrá tiempo para hacer un Ford y digo Geometry faces de uno atención color 00f00 eso qué color es 0 ff0000 no es rojo verde azul vale Por tanto la cara 2 es verde vamos a complicarlo un poquito bien Por qué no mientras sea un código que sea decimal válido ahora digo 0000 ff ahora eso qué es Azul la cara 3 es azul de hecho si queréis puedo ya mirarlo puedo ya ejecutarlo así que recargo la página vale todavía no vamos a verlo Geometry punto faces punto lo que sea vamos a ver qué me falta en este código Ah sí claro y el vertex color es igual a Face colors ahora actualizo eso vale pues voy a acabar las tres siguientes caras la cara 4 la cara 5 la cara 6 y digo Mirad en la siguiente cara digo Tú eres fff00 Esto es rojo más verde esto es magenta Entonces lo siguiente es 0 fff que creo que es amarillo y esto Es ff00 ff que creo que es 100 si no abrimos un momento el game y lo podemos ver muy fácilmente Así que vengo aquí y ahora digo claro evidentemente el lugar de decir atención color 0x ff0000 que es rojo pues le digo evidentemente color es igual a verdex colors es decir el color del material va a ser los colores de los vértices que hemos definido aquí arriba free punto Face Colors Así que guardo y recargo ahora os pongo el código un momento guardo y recargo Ah vale Ah por eso estaba de dos en dos porque son triángulos Ah Es precioso bien entonces Mirad para eso Entonces Oh guau y encima Espera uno dos tres cuatro y cinco momentina vale no pasa lo mismo son por triángulos pero sabes que yo vengo aquí y digo Vale pues 6 7 8 9 sí 10 y 11 dime y ahora fijaos ahí como tengo triángulos por cara si te separa los triángulos Exacto lo que hay entonces vengo aquí y digo Vale pues vamos a hacer caras enteras ff0000 esto es 0 ff0000 aquí pongo 0000ff a ver me sobra un cero cero ff ahora doble f 00fff sí y le va cambiando Sencillamente y ahora ff00 ff y por tanto con esto lo que habremos conseguido es colorear correctamente cada uno de los lados del cubo si a esto le añadimos una rotación en otro eje por ejemplo el Z va rotación Z es igual a cero Pues luego puedo ir a la rotación Z y le digo cube rotation en Z es igual a Z con lo cual ahí lo que voy a obtener es una rotación en tres dimensiones que es mi objetivo para la clase de hoy hablaremos algo más ahora que tenemos este ejercicio técnicamente os voy a decir que vuelvo Qué pasó Aquí técnicamente os voy a decir que ampliar este ejercicio realmente puede ser relativamente sencillo Mirad atención Este es un cubo y yo por tanto ahora lo que voy a hacer es crear un segundo cubo así que por tanto esto es un bloque atención esto de aquí es un bloque que va desde aquí hasta aquí con eso os quiero decir que ahora está desde creo un cubo hasta sin punto y con esto finalmente lo que quiero deciros es que me puede llegar a ser muy fácil hacer lo siguiente Geometry pues bar segundo cubo es igual a free punto Box Geometry voy a dejarlo de 200 y ahora digo claro No quiero las caras bar material es igual bar material bar segundo material O sea no nombre es igual y le digo color dos puntos 0 x ff0000 es decir color rojo de aquí del basic material y ahora digo ya la digo cube copia todo esto de aquí digo cubo 2 es igual a un New free punto mes donde le asocio el segundo cubo con el segundo material y ahora digo cubo 2 como 2 punto posición punto x es igual a cero cubo 2 punto position punto Y es igual a cero y cubo 2. position punto Z es igual a cero así que sin add cubo 2 voy a ordenarlo un poco si todo ha ido bien Por tanto con ese bloque de código lo que acabo de hacer es simplemente Añadir un segundo cubo digo creo una nueva geometría de cubo crea un nuevo material y género una malla tridimensional Así que al guardar y recargar Vais a poder comprobar como efectivamente tengo un segundo cubo dentro de la pantalla sin ad cubo 2 y por tanto ahí tenemos un segundo cubo que por qué no en lugar de ser un cubo podría ser un plano cómo puede ser un plano pues Mirad si yo digo que es 200 por 2 por 200 veis ahí como si tengo una caja que tiene 200 unidades en x 200 unidades en y que recordad que es la verticalidad Perdón dos unidades en y 200 en Z tengo un suelo de color rojo que quiero un solo más grande pues tengo 2000,2,20 2000 Así que guarde recargo vaya se me ha salido de la pantalla voy a poner va voy a poner 400 es que si se sale demasiado la pantalla no se ve ahí y tengo ahí un suelo más grande no no ya y qué Porque lo que está ocurriendo es que en ese caso la caja está por debajo y al estar esta caja que va rotando por debajo está debajo del suelo pues en ese caso se ve el suelo de hecho fíjate que ahí en ese fotograma ahora mismo justo está por encima y ya está y no pasa nada pero cuando la Arista del cubo se mete por debajo del suelo Pues ves el suelo también te digo que si os fijáis Mirad vibra un poco si os fijáis empieza a recalcular y de repente ahí hace Black lo veis Mirad la cara Azul ahí veis como hace un clack eso es Exacto es un fallo de redibujo del Canvas el Canvas os lo digo ya tiende a cometer muchos errores de redibujo El web gl no comete ningún error bueno hemos creado dos cajas vamos a crear más objetos tripunto js mañana estaremos viendo cómo traer archivos o bj por ejemplo modelados en Blender pero hoy vamos a estar trabajando con primitivas entonces una cosa que quiero deciros es que digo Bueno si existe Box Geometry Pues igual También existe es filler Geometry Así que atención voy a grabarlo en el siguiente vídeo ahora a continuación vamos a hacer una esfera Aunque finalmente os lo digo ya la mayoría de nuestros juegos no partirán a partir de cajas y esferas sino que partirán a partir de geometrías importadas un programa 3D pero hoy para empezar vamos a decir que vamos a documentación y vamos a mirar a objetos 3D y dentro de objetos 3D vamos a verlo por aquí tengo filler Así que tengo es fear Geometry de hecho me voy a extras geometría claro entonces daos cuenta como básicamente tengo el radio de la Esfera el número de segmentos de la Esfera el número de segmentos en vertical el número de los segmentos en horizontal si no lo sabéis lo tenéis ahí incluso con sobrecargas Así que vengo aquí y digo bar geoesfera es igual a New punto free punto a New Perdón free punto fierre Geometry donde los parámetros mínimos son el radio los segmentos de vertical y los segmentos de horizontal entonces bar materialesfera es igual a un mes basic material de color 00ff00 aquí de hecho creo que me sobra un cero por tanto digo esfera es igual a New free punto mes geoesfera materialesfera así que por último digo sin punto a y añado la Esfera claro cuidado esta esfera estará en la misma posición que el plano vamos a verlo geoesfera materialesfera un radio de 5 No lo sé vamos a poner el ahí tenemos la Esfera vibra un poco a la vibra un poco porque el programa está calculando donde la pone así que yo para trabajarla mejor Mirad voy a poner esfera punto position punto x es igual a 300 Por ejemplo que estoy haciendo lo que estoy haciendo es mover la Esfera hacia un lado no se ve muy bien mañana estaremos poniendo luces y cámaras bueno va igual lo pongo Ya vete a saber Entonces no se ve muy bien pero fijaos que si yo ese 32 lo bajo a 8 y 8 la calidad de la Esfera ahí veréis no sé si veis Cómo se poliniza no lo veis pues no pasa nada lo pongo al 4 y no sé si veis ahí como sea poligonizado la Esfera por tanto ese parámetro segundo y tercero de la Esfera a lo que se refieren realmente es a la calidad de la geometría de la Esfera nosotros hasta ahora Estamos trabajando con un material llamado basic material entonces la idea de este basic material es que es un material que no reconoce ni luces ni sombras el sombreado que decías antes por tanto probablemente Vais a disfrutar más trabajando con una escena sombreada para ello por tanto atención todos la pantalla voy a hacer lo siguiente no quiero tocar esta escena la damos por concluida y ahora quiero hacer un duplicado por tanto copio y pego y voy a llamar a esta escena sombreado así que por tanto guardo el archivo llamado sombreado vamos a ver lo muy bien vale guardo el archivo llamado sombreado abro el archivo llamado sombreado y así lo que voy a hacer es trabajar con una copia de este archivo con una copia del archivo sombreado una copia del archivo cubo y únicamente voy a variar los materiales Así que lo que voy a hacer en este caso vamos a verlo ahora os lo digo lo que voy a hacer es cargar el archivo llamado sombreado punto html Muy bien pues en este caso por tanto vamos a ver en este caso por tanto lo que quiero ahora es cambiar el mes basic material vamos a verlo el mes basic material por un lamber material vamos a documentación vamos a materials vamos a basic material no vamos a un lambert material en material como ves tiene un poco más de tridimensionalidad porque tiene brillos y Sombras por tanto esto quiere decir que vamos a ver sí OK Pero no quiero nada de todo esto vale me voy a la caja me voy al cubo Y en lugar de decirle mes basic material acordaos que estoy en sombreado punto html le digo mes lambert material en el segundo cubo le digo mes lambert material y en el tercer cubo le digo mesh lambert material Bueno vamos a verlo así que recargo en la pantalla bien Vamos a ver falta la luz todo aquel sombreado que yo dibuje en la pantalla como os podéis imaginar va a depender de la existencia de una luz entonces para trabajar con la existencia de una luz tengo que previamente crear una luz para crear una luz voy a buscar por aquí light voy a crear por ejemplo una Point Lite que es la luz más sencilla example Lights on Lights por ejemplo ahí vale Quiero ver el source muy bien y crear una luz es más sencillo de lo que parece aquí está voy a crear una luz a continuación creo una luz por cierto Crea una luz antes del renderizador después de la Esfera creo una luz sí no es obligatoria en este caso pero es muy recomendable para lo que haremos en futuros días y digo lo siguiente mirada vamos a verlo Sí pero aún hoy funcionaría pero más adelante con las cosas queremos más adelante no entonces light 1 es igual a New free punto Lite y los parámetros que tengo son estos los parámetros que tengo son vamos a ver son el color hexadecimal la intensidad y la distancia y eventualmente puedo crear un cuarto parámetro que es la caída en este caso por tanto tengo un ff0040 que es rojo clarito tengo una intensidad de uno y tengo una distancia de atenuación de 50 añado la luz recargo en la pantalla vamos a verlo Bueno claro a ver también es que no hace nada porque estoy con canvas pero bueno vamos a verlo está en 000 Así que digo light 1. position punto y es igual a 300 y otra cosa que te digo otra cosa que te digo es que el 50 Se lo voy a poner a cero porque así le quito toda la atenuación ahí pero no sé si veis voy a poner esto como a 600 no sé si veis que las caras que están hacia arriba aparecen como iluminadas y las caras que están hacia abajo no están iluminadas la Esfera no está muy bien sombreada la verdad se ha dicho guardo y recargo vale Pero eso es más un fallo de Canvas que otra cosa pero quiero que veáis creo que se ve ahí arriba esas caras que empiezan a aparecer por ahí como vale el point light está ya iluminando a la caja y al plano déjame que haga una cosa light 1 punto position punto Z es igual a menos 600 Vale pues no al revés 600 Vale entonces poner esto poner light uno posición y600 creo que ya me acuerdo porque mira José Luis esto es x 0 positivo y 0 positivo Z 0 positivo entonces por eso estoy poniendo la posición de la Z en 600 y por la luz viene hacia mí y al venir hacia mí ilumina realmente las partes frontales de esa cara de ese cubo la Esfera es la única que no sé por qué que es probablemente efectivamente Vale pues esto es el objetivo que quiero conseguir para hoy pero no va venga quiero conseguir otro objetivo no la luz es un objeto infinitamente pequeño la luz es un objeto virtual si no ponemos una geometría que represente la luz no veríamos la luz es como en Blender efectivamente eso es no quiero que acabe el día de hoy sin que hayamos visto un poquito de cómo renderizar esto en webgl así que por ejemplo yo ahora me vengo al archivo principal me duplico sombreado y lo llamo sombreado web gl en este caso por tanto este ejercicio me sirve para enseñaros para ilustraros lo terriblemente sencillo que es en free punto js cambiar de un renderizador Canvas a un renderizador web gl cómo lo vamos a hacer cómo lo podemos hacer es muy sencillo simplemente por supuesto abro sombreado webgl y vengo por aquí es Geometry vengo por aquí vamos a ver dónde está el render aquí con lo cual en la línea donde declaró el render simplemente tengo que cambiar una palabrita simplemente tengo que cambiar de free punto Canvas render a free punto web gl la W la g y la l mayúsculas y ya está Así que ahora sí ya está así que simplemente pongo web gl sombreado web gl recargo y claro hombre no un poco no se nota mogollón No sé si veis que por ejemplo la Esfera que se queda negra ahora veré por qué pero la Esfera ya no está ya es que algo he hecho yo mal Pues igual recarga sombreado webgl pues ya te digo que esto debe ser algún error que he cometido yo cei.mesh lambert material color azul guarde recargo ahora se me ve mejor es algún error que estaba cometiendo yo en la pantalla vale pero fijaos como con este lamber material unido a una luz unido a webgl cambiar el color de la Esfera de azul a rojo y Mira tú por dónde que le he metido un cerdito más siempre vamos a ver en la clase de hoy lo primero que quiero hacer en este caso va a ser usar la librería de carga de modelos obj sacados desde cualquier programa en este caso Blender por tanto vamos a entrar dentro de la carpeta free js voy a crear si no te has descargado porque estás en un equipo nuevo la librería pues descárgate el frío js Master Igual que ayer y en este caso voy a hacer un nuevo archivo y este nuevo archivo se va a llamar Index punto html Index no voy a dar obj html porque precisamente vamos a cargar la librería de carga de obj este archivo obj.html lo voy a abrir con edit y una vez que lo abra con edit vamos a cargar para empezar las tres librerías que usamos ayer las librerías que usamos ayer si os acordáis son las que tengo dentro de la carpeta Live tengo Canvas render tengo proyector y tengo free punto js por tanto hago el archivo html este archivo tiene un Head este archivo tiene un Body y dentro del Head o dentro del Body voy a crear un Script uno en primer lugar para cargar la librería que está dentro de la carpeta Live con el nombre free punto min.js y copio y triplico la línea para cargar las librerías proyector punto js y las librerías Canvas render punto js como mínimo las tres que usamos ayer pero hoy además quiero usar la librería de carga de objetos en formato obj esto por tanto lo voy a conseguir si entro dentro de free punto js Master free punto js Master examples entonces dentro de examples voy a cargar una vamos a ver geometría vamos a buscar aquí obj exporter obj no exactamente Vale pues eso descarga vale geometría Esto no es geometrías y lo que voy a hacer ahora es Buscar dónde está el vj tengo aquí una serie de librerías tengo el obj loader web ahí está vale en principio parece que no quiera ir pero me da igual porque yo sé que lo voy a usar vamos a ver he cogido Este es el problema he cogido el webgl loader obj que está el DJ sin mtl hoy más adelante usaremos el de obj con mtl que ese es mucho mejor porque si haces un material en Blender te lo respeta el punto js No tienes que redelarlo en el punto js pero hoy para empezar voy a cargar el archivo que tenéis dentro de examples llamado webgl_loader_obj lo cargamos en el editor así que por tanto lo Cargo en edit y digo Mirad atención y digo esto depende de una librería que ayer no usamos y que por tanto no teníamos incluida que es una librería que está dentro de la carpeta js dentro de la carpeta js dentro de la carpeta loaders dentro de la carpeta loaders madre mía lo que tenéis aquí esto en un año madre mía lo que tenéis aquí esto ha mejorado una barbaridad Fíjate que tienes el obj loader tienes el fbx loader pero mira te acuerdas lo que os decía antes del hdri tienes el hdr cute texture tienes el mtl loader tienes el stl loader y el svg texturas en tga vrml es un montón de cosas un montón más de las que había antes Bueno hoy vamos a empezar con la más sencilla que es el obj loader y por tanto el obj loader lo voy a cargar lo voy a pegar dentro de esa librería Live es decir la librería donde ayer pusimos el free punto ming el proyector el Canvas render Bueno pues hoy pongo también el obj loader punto js y como os podéis imaginar el mi archivo original o bj.html lo que voy a hacer es cargar esa librería Así que Liv y lo llamo obj loader.js si todo ha ido bien también lo que voy a hacer es recargar digo localhost barra he arrancado el champ creo que no arranco Apache y digo free js/obj.html Y si todo va bien comprobaréis como no hay ningún error pero claro cómo lo va a ver Bueno pues claro lo que quiero que hagáis es que hagáis esto no para comprobar si hay un error de javascript que no puede haber un error de javascript sino para comprobar que no os da error la llamada a ninguna de las librerías porque eso querrá decir que las estáis llamando correctamente es decir que las habéis copiado correctamente en la carpeta Live y que las estáis llamando correctamente desde la parte de inclusiones lo que voy a hacer ahora es Mezclar un poco código del que hice ayer con código nuevo de hoy Entonces voy a cargar el último archivo que hice ayer que es sombreado webgl y voy a derivar el siguiente código atención os acordáis ayer del sombreado webgl recordamos que llamábamos a una función init y una función animate pues llamo a una función init y una función animate recordamos Cómo definíamos la función init y dentro de la función init lo que hacíamos era cargar un montón de cosas Bueno pues acabo de cargar el sombreado webgl y ahora simplemente voy a trabajar con todo igual menos con la parte de creo un cubo Así que la parte de crear un cubo Crea una esfera cree una luz bueno la luz que la quiero así que todo pero ahora voy borrando las variables no así que me quedo con el código que hicimos ayer creo una cámara modifico la posición de la cámara creo una escena creo una luz y creo un renderizador la función animate elimino todas las rotaciones de ayer con lo cual la escena me queda como estáis viendo en la pantalla que es un poco lo mínimo para ponerlo en funcionamiento a hacer el punto js que es en primer lugar vamos a ver en primer lugar creo un contenedor a continuación creo una cámara a continuación creo una escena a continuación creó una luz y por último creo un renderizador son conceptos más complejos que cuando trabajamos en 2D pero es que trabajar en 3D es persé más complejo que trabajar en 2D al menos la librería js nos lo automatiza Bueno pues todo esto es igual que ayer pero la novedad en este caso está a ver que ponga aquí un punto y coma la novedad en este caso está en usar un obj usar un cargador obj es decir si yo ejecuto esto que es esto es igual que ayer si yo ejecuto esto en principio comprobamos como no tengo ningún error y simplemente tenemos en el console el lanzador de la versión de free punto js el número 75 vale correcto Pues ahora lo que voy a hacer es del archivo webgl loader obj html voy a llamar a la librería para cargar un vj claro a continuación tendré que crear un vj Bueno pues de ese archivo webgl loader obj Mirad vamos a leerlo un poco leerlo conmigo digo tengo el container tengo la escena tengo la ambiental una luz ambiental esa la vamos a dejar estar tengo una direccional ya hablaremos de esto de más luces tengo una textura de momento no quiero textura Vale entonces la función xhr nada no quiero nada Vale y mech loader nada no quiero nada quiero el modelo Así que para trabajar con el modelo voy a hacer lo siguiente me copio desde esta línea que pone model hasta esta línea que ponemos de los acordáis cuando en el colegio hacer los trabajos a doble línea para que ocuparan más Pues claro qué Manía de poner aquí doble línea vale por tanto lo que voy a hacer en este caso es que me copio el model me lo pego en obj vamos a verlo como que primera todas las raya s no hasta las rayas porque en estas rayas fíjate esto es el webgl render eso ya lo tengo Entonces es estas primeras rayas de hecho se puede ver por la sangría Ah vale No cuadra Sí pues tengo el container tengo la cámara tengo la escena tengo la luz pues ahí el objeto y ahora dejadme que elimine unas cuantas líneas porque si no esto ocupa artificialmente mucho espacio y tengo un free punto obj loader que en este caso está llamando a un archivo obj que evidentemente no existe ahora creo yo un archivo obj y está llamando a un Child material map Vale pues yo lo que quiero es decirle Child material vamos a verlo claro para ello tengo que definir un material define un material como el de ayer os acordáis del ambert Vale pues me vengo aquí y digo atención y digo bar lo voy a poner aquí arriba bar mi material es igual a New free punto material con color rojo por tanto ahora digo chail punto material es igual a mi material lo único que falla ahora de hecho vamos a comprobarlo recargo en la pantalla vale managers Define Ah sí vale Quién es el manager sí así no me digas vamos a ver el manager para manager a loading manager No es otra cosa Vale pues cargo el manager que eres el manager yo te lo pongo el manager es una nueva librería para asegurar La carga progresiva del archivo bj vale Entonces ahora sí o en progress o dónde estás si ahora me pide un progress y el on progress vale Mirad un progress son simplemente un par de funciones Así que voy a poner función on progress que está vacía y una función on error que está vacía Pues sí vale ahora sí que ya he cumplido todos los prerrequisitos y el único error que me aparece que ahora es el error correcto y esperable es el error de Bueno tú me has dicho que me vas a pasar una vj y no me has dado ninguno bj perfecto Pues ahora vamos a darle uno vj al sistema como lo único que me falla ahora mismo es que no le he dado el obj que le iba a dar pues me voy a abrir Blender en un momento me hago un vj y os lo envío así que me voy a Blender lo borro todo creo en este caso un Monkey voy a hacerlo pequeño porque si no igual a veces en free punto js sale gigante Entonces lo exporto y lo voy a exportar en formato obj evidentemente otros días usaremos el fbx lo exporto en vj y luego exporto en C en champ en ht dogs en free js me voy a crear una nueva carpeta llamada o bj y lo voy a guardar como Susan que es el nombre de este objeto Susan punto obj con lo cual ahora podremos comprobar Mirad como en la carpeta del proyecto Hay una carpeta obj que contiene Susan obj y para otro día no para hoy Susan punto mtl que es la definición de los materiales ahora simplemente lo único que voy a hacer es que en la línea que en mi caso es la línea número 33 donde yo estoy diciendo de la carpeta obj de la subcarpeta mail02 voy a cargar el archivo mail02 Pues no le digo de la carpeta obj voy a cargar el archivo Susan punto obj que es el archivo obj que yo realmente he dicho que voy a usar Así que ahora por tanto bueno daos cuenta como pone object posición y es igual a menos 95 ahora veremos eso pero de momento lo que quiero es simplemente recargar en la pantalla y comprobar Cómo teóricamente atención teóricamente ha cargado el mtl y el obj ha cargado el Susan punto obj pero claro no se ve en la pantalla porque no se ve en la pantalla pues ni idea entonces hay que ver ahora que la cámara probablemente no está enfocando al punto donde está el objeto voy a decirle position y es igual a cero a ver si empieza a aparecer y ahora por alguna parte por ahí empezar a aparecer vale tienes eso es vamos a ver ahora que el objeto no aparezca no es demasiado extraño puede ser debido a muchas cosas Entonces yo lo que voy a hacer es decir lo siguiente vamos a ver object punto position punto Dime qué espera offset punto position punto Z es igual a cero igual lo que no has probado es object punto scale punto x es igual a 0.01 of punto y es igual a 0.01 y escala Z es igual a 0.01 vale dónde está ese objeto por aquí parece que no está pero estará vamos a ver la cámara está en y 100 z500 Dónde estaba el objeto de ayer el objeto de ayer de hecho esfera posición x300 un sitio en x-300 no pero este es el objeto que hemos vivido Ayer Nada ese nada así que bueno por aquí por alguna parte aparecerá la cámara le voy a decir un juego de 180 y aún así tampoco parece que quiere aparecer Entonces ya os digo que en alguna parte está porque cargado está pero ahora tenemos que hacer Que aparezca en pantalla tenemos que cuadrarlo exactamente en la pantalla vamos a ver cámara posición y voy a decirle nada Vale pues ya podrías aparecer Vale pues voy a ir variando hasta que consiga Que aparezca lo que ha ocurrido en este caso es que el objeto era muy pequeño vale por tanto hasta que no lo he escalado a 100 no aparece en pantalla esto es muchas veces el problema de decir punto js que cuando importas un objeto nunca puedes saber si es demasiado grande o demasiado pequeño entonces lo que he hecho simplemente es poner el objeto en la posición x y z en 0 la escala x la escala y la escala Z lo he subido a 100 y 100 cada componente y simplemente a la cámara le he dicho que tenga un fill of View de 90 para poder abrir bastante el campo y poder ver bastante dentro de la pantalla Así que si os fijáis tengo ya por ahí un objeto cargado en pantalla que además es de color rojo porque le había puesto el material y Porque además es de tiene el sombreado por la parte de arriba porque le había puesto una luz en la parte superior si queréis de hecho ahora puedo cambiar la escala a mil simplemente para comprobar como en la pantalla Pues empieza a aparecer o 500 y así un poco para que veáis como el objeto empieza a aparecer en pantalla yo creo que también sería muy divertido igual que hicimos ayer para que veáis que realmente Estamos cargando un objeto en formato obj el hecho de hacer lo siguiente Mirad me voy al principio y al principio digo bar rotación y es igual a cero bar rotación Z es igual a cero para hacer lo mismo de ayer para ahora hacer que en animate yo diga object esto va a ser más complejo Pero vale No creo que me haga caso hoy object punto rotate punto y es igual a Root y más igual a más punto pi partido por 100 como ayer creo que no me va a hacer caso porque esto no es tan sencillo como crear una caja pero vamos a probarlo recargo bien objective en la línea 72 entonces efectivamente el Alien 32 me dice object is not Define yo digo como que objetive vamos a ver Aquí estás entonces claro eso es ese es el problema Entonces yo vengo por aquí y por arriba voy a hacer un intento de convertirlo en variable global digo bar object Así que guardo y recargo Pero vale nes rotate No es rotation objectísimas simplemente para declararlo vale Y en este caso efectivamente ahí me dice no puedo rotarte algo que no está definido vale por tanto ya os decía yo que en este caso no es tan sencillo como cuando creas un cubo es decir aquí yo podría rotarlo vale la cámara sigue efectivamente Pero cuidado si roto la cámara no pasará exactamente lo que crees Sí no no no claro él es que es una mezcla de mover y rotar Mirad atención si yo vengo por aquí a Blender pero Espera que no es tan sencillo pero lo vamos a hacer evidentemente entonces me voy a crear una cámara la pongo solo quiero demostrarnos aquí en la pantalla el concepto Mirad esto no quiero ni lo hagáis Solo quiero que miréis Vale ahora mismo lo que tenemos es esto lo que tenemos quitado aquí lo que tenemos Es que la cámara apunta al mono Pero qué pasa si yo le quiero dar una vuelta a la cámara vale Yo no puedo rotar solo en Y perdón en Z porque lo que hago es esto yo no puedo rotar solo la cámara mover solo la cámara porque entonces lo que tengo es esto así que realmente es una mezcla de mover y derrotar algo que sería pues si muevo aquí pues a la vez habría rotado ahí y así Bueno la verdad es que sí entonces Mira vamos a verlo Entonces yo digo vale renuncio a la rotación y yo aquí arriba digo atención digo bar Camp Rock y es igual a cero y esto Me permite decir lo siguiente Camera punto rotation punto Y es igual a cam Root Y por último digo can Rod y más igual a más punto pi partido 100 y ahí no sé si me acabáis de ver Mirad ocurre justo lo que os decía justo lo que os decía en Blender lo que ocurre Es que la cámara estaba fija y lo que estoy haciendo es girar la cámara claro ahora evidentemente además de girar la cámara tengo que mover la cámara qué ecuaciones conocemos que nos permiten mover un objeto haciendo un círculo no no tan difícil seno coseno Así que a continuación voy a complementar esta función de rotación con el seno y el coseno de la posición x y de la posición Z para que la cámara mientras se va rotando también vaya moviéndose de la misma manera que he rotado la cámara también tengo que posicionarla por eso arriba voy a crear un par de variables más barcam postx y Bart post Z porque en serie punto js es Z no es Y sí hay que hacer ahí el cambio de ejes Así que digo lo siguiente mira realmente es sencillo pero hay que afinar la posición en la rotación y digo Camera punto position punto x es igual a más oferta de primavera a más punto A ver no espera más punto quería decir vale muy bien vale vamos a verlo vamos a ver muy bien es el más punto cost de campus x todo esto lo multiplico por cuanto déjame que te lo diga un momento que me vaya de ahí porque 500 Campos x por 500 vale y ahora Camera punto position punto Z es igual a más punto sin por Campos x realmente también por 500 vamos a ver Camp Rock y es igual a Campos x y ahora Campos x más igual a más punto pi partido 100 vamos a verlo no sé si funcionará Creo que no va a explotar yo creo que de vez en cuando de casualidad se verá el mono esto es la z Camp Rock y que ambos necesitan en principio todavía no lo usamos sí voy a anular la rotación sí sí sí campo sitio en Z es igual a eso de ahí con lo cual está quieto eso claro Ay Ese es el programa A mí tampoco es 9 vale Sí es que averiguar ahí la posición concreta va a ser un suicidio entonces lo que haremos Mañana es rotar el objeto vale porque rotar la cámara puede ser un poco traumático vale voy a anular esto por lo menos tenemos la cámara rotando vale Y esto de momento por aquí teniendolo ya en funcionamiento después de que habéis arreglado correctamente muy bien tanto el SIM y el Cos que estaban al revés como las variables que estaban a cero que había que declararlas a cero lo que voy a hacer ahora es crear una serie de elementos para que podamos componer un ajedrez así que por tanto me voy a ir a Blender bueno es que no sé qué me decía al final porque tomas una cosa y tú me has dicho otras pero bueno mérito de todo el mundo de haber arreglado la rotación de la cámara Vale entonces lo que voy a hacer ahora por tanto mirar es lo siguiente voy a dibujar una serie de objetos para hacer un pequeño ajedrez por tanto me voy a cilindro lo pongo en este objeto lo voy a modelar un poco por tanto quieto aquí Bueno no es mi día hoy me voy a Face y hago por ejemplo una cosa así alguna cosita así fácilmente le pongo una icoesfera lo pongo en y coincidiréis conmigo Eso tiene pinta de peón geométrico vale luego también te puedo decir que Oye le ponemos unos cuantos objetos más un toro eso ya es pro efectivamente Y vamos a verlo un momento lo subimos duplico otro para estar en la parte de abajo y tenemos ya hay un peón completamente Pro vale por tanto lo que voy a hacer es pasaros este modelo y este modelo lo que quiero es importarlo dentro de esta escena así que me voy a ir a file me voy a ir a export me voy a ir a obj exportó esto dentro de esa carpeta free punto js/obj con el nombre de peón y este objeto es el que vamos a meter en la siguiente parte del ejercicio en la siguiente parte del ejercicio voy a crear un archivo nuevo llamado ajedrez punto html y este archivo ajedrez punto html a este archivo ajedrez punto html le voy a derivar le voy a poner todo el código que tenía en obj punto html así que por tanto ahora voy a cargar el archivo ajedrez punto html evidentemente el archivo ajedrez punto html lo que hace es cargar el mismo código pero ahora voy a empezar cambiando Susan punto obj por Peón punto obj y al cargar ahora Peón bueno evidentemente Vais a cambiar también la escala lo tenía a 500 pero por lo menos lo veo en pantalla por lo menos puedo decir Ah está muy grande o está muy pequeño lo hecho es cambiar la posición del objeto la escala del objeto perdón a 50 para que cool un momentín ahora verás todo lo cool que puede llegar a aparecer porque llega un momento en el que digo Bueno ahora quiero que haya varios peones más Ahora quiero tres peones por tanto en este caso voy a hacer lo siguiente a ver atención que voy vamos a ver bien Me cojo el modelo y Melo atención y Melo duplico pero en este modelo le digo que la posición x es igual a 10 no sé si 10 será mucho que sí él el perdonar el manager no realmente no también un segundo Aquí voy a poner 50 el manager no hace falta mi material no hace falta el loader sí que hace falta 100 en x y el on progress y un error tampoco hace falta vale con lo cual ahí minimizamos código y efectivamente muy bien tenemos ahí nuestra primera fila de dos peones dime Sí luego ya lo tiene para cargar cualquier modelo de hecho Fíjate que lo usa dos veces me dice cada uno de los objetos que ha cargado vale Sí ahí podemos quitar el barloader y de hecho sí por qué no podemos también ahorrar esa línea que qué ahorradores que os veo hoy bueno la idea Por tanto ahí es que Mirad aparte de que declare que funciones a ver qué voy si yo tengo que declarar una fila de 8 peones porque en el ajedrez al principio hay 8 peones porque digo claro duplicar este código por 8 es un poco rollo verdad Entonces no costaría mucho en este caso aquí elimino este segundo modelo Y en lugar de crear un segundo modelo a mano Mírame voy a decir for bar x es igual a cero x es menor que 800 menor o igual que 800 x más igual a 100 y lo que voy a hacer es meter ese loader punto load dentro de un bucle for para permitirme repetir 8 veces es el loader creo que lo voy a repetir 9 bien lo que he hecho es que el loader.load hasta el om progresión error lo he metido dentro de un bucle for para que se repita 8 o creo que se va a repetir nueve veces y por tanto ahora en la posición x le pongo x con lo cual si todo ha ido bien un momentín vamos a verlo Ah mira por ahí empezar a aparecer interesante por ahí empieza a aparecer sí bien pues ir copiando Sí pero vale x partido 10 sí me está dando la sensación vale me está cargando todos los modelos pero solo Sí pero solo me muestra el último o están todos En el mismo sitio no debería ocurrir Así que voy a decir px pxx bien Es raro pero está ocurriendo no es un cubo que he puesto yo al principio mira es un cubo que he puesto yo aquí segundo cubo simplemente para comprobar que aparece un cubo en la pantalla como punto central px menor o igual que 800 px mayor o igual que 100 o sea más igual lo que quiero es esto mirar me voy a hacerlo yo un segundo no hagáis vosotros nada ahora lo que quiero es esto lo que quiero es tener un loader punto load donde yo digo Tú eres cero tú eres Cien Y si ahora sigo duplicando tú eres 200 y así con cada uno de los peones tú eres 300 y así con lo cual lo que debe aparecer es una fila de X peones en pantalla la idea Por tanto es intentar ahorrar todo eso escribiendo Mirad escribiendo un bucle for así que voy a hacer una cosa por postx o px o Peón x es igual a cero Peón x es menor que 8 Peón x más y digo esto es Peón x por 100 si todo ha ido bien debe aparecer ahora mismo ninguno fíjate aparece solo el último un momento miradme si no me está dejando funcionar voy a hacer una trampa muy sucia pero la trampa que haremos muchas veces sí ya puedes decir Oye ajedrez lo cambio a php aquí cargo ajedrez php aquí cargo a ajedrez php y ahora ese bucle for en lugar de hacerlo en javascript voy a hacerlo en php así que por x es igual a cero x es menor que 800 x + igual a 100 cuidado aquí Mirad php cierro llave y ahora digo php eco x si todo ha ido bien ahí tenemos toda la retahíla de 8 peones funcionando eso porque a veces insisto esa trampa La Ley muchas veces ese bucle for cuando tiene que repetir muchas veces un objeto en lugar de repetir lo que es lo que tenía que hacer porque daos cuenta que he hecho el mismo bucle for pero en php el javascript falla porque cree que estoy dibujando un objeto pero una cosa muy importante quiero que seáis conscientes atención mirarme a la pantalla averiguarlo mira quiero que seáis conscientes De que al haberlo hecho en php realmente lo que ha ocurrido en el código lo que ha ocurrido en el código Mírame es que se ha multiplicado como si yo lo hubiera escrito a mano lo que pasa es que no lo he escrito a mano sino que ha sido automatizado mediante php atención acordaos de abrir el Foro de hacer el eco de la x y de cerrar la llave no os olvidéis de cerrar la llave básicamente yo estoy asumiendo que cada ficha digamos está a 100 no parece demasiado mirarme a 100 se tocan las bases de los peones por tanto voy a decir que en lugar de más igual 100 voy a poner más igual 150 hasta 800 no Mira voy a poner aquí 1200 puede ser perfectamente entonces ahí lo que ocurrirá es que los peones están más separados estamos suponiendo por tanto que la altura de la anchura de cada cuadro del ajedrez es de 1200 entonces yo voy a poner ajedrez para medir Qué distancia hay de unos peones a otros peones Entonces yo digo 1.200 2.400 3.600 4.800 6000 no 5 los 3456.000 eso qué quiere decir pues que mirarme yo ahora me voy a duplicar todo este bucle php me lo duplico aquí abajo y digo la posición Z es 6000 con lo cual si todo ha ido bien Vamos a verlo claro no se ve nada no se ve nada claro la cámara exactamente Mirad si yo pongo estos elementos a 6000 la cámara recordamos que tenía un recorte de mil y por tanto están pero no salen en la pantalla voy a poner que la cámara tenga un recorte de 10.000 y por tanto ahí hay lejos Vale Sí están pero lejos Pero bueno según la distancia tienen que estar ahí dime abrir la campanita Mira la cámara hacia atrás bien tirar la cámara hacia atrás atención todos la pantalla miradme se hace de la siguiente manera he duplicado la estructura de control en php Ford y en posición Z le he puesto Entonces si tengo un punto de vista demasiado fugado y por tanto da la sensación ahora veremos si se errónea o no de que los peones están muy lejos Mirad lo que voy a hacer es que atención la cámara position x y la cámara posición Z dentro del animey que lo multiplicamos por 500 lo voy a multiplicar por 5000 lo cual mira lo cual alejará a la cámara cuando va rotando Pero cuidado se alejó la cámara cuando va rotando quiere decir mira que todo se ve más pequeño entonces para ello para que no pase esto lo que voy a hacer ya no se ve raro pero eso que lo que voy a hacer es que la anchura de la cámara en lugar de 90 será 30 la apertura de la cámara ahí lo veréis mejor ahora aparecerán por ahí bien Lo único es que una vez más parece que el recorte sigue siendo insuficiente claro atención si yo sumo la cámara está lejos de 5.000 y las fichas están a 6000 son 11.000 pero la cámara tiene un límite de 10.000 Pues nada 100.000 y ahí veréis Cómo aparecen perfectamente ahí veréis como cuando aparecen por allí aparecen perfectamente Vale pues Mirad voy a hacer yo el código voy a hacer yo el código en este caso lo que voy a hacer es hacer un ajedrez entero aparte ahora voy a hacer también las piezas en 3D para pasarnoslas y lo que quiero en el resto de la clase de hoy es que hagamos todo el ajedrez así de sencillo pero para ello voy a hacer lo siguiente en primer lugar voy a modelar las piezas en primer lugar me voy a volver a Blender me quedo este objeto Está bien me lo quedo en otra capa pero sabes que también lo que quiero es quedarme este objeto Mirad lo duplico lo muevo a la capa esta de aquí y este objeto si lo selecciono y lo escalo mira voy a hacer una cosa vamos a ver este objeto fuera ahora el Peón me voy a asegurar que esté ubicado en el suelo Vale entonces ahora lo duplico y lo muevo a otra capa porque lo muevo a otra capa Pues porque escalo en Z y ese va a ser el Peón Perdón ese va a ser el alfil escalo en x lo meto ahí dentro hago una booleana y digo operación booleana la booleana es una operación que me permite quitar este cubo le digo diferencia aplico elimino y me queda ahí el hueco del alfil además Por qué no puedo crear una ecoesfera y le pongo Ahí la puntita del alfil el que más alto no es más alto que el Peón hay claro entonces a partir de aquí digo Vale pues este es el alfil lo duplico lo pongo en otra capa y digo claro nivel Pro entonces duplico aquí capas en el Blender de toda la vida entonces le digo Aquí cilindro un cilindro de 12 Por ejemplo así que quieres ver el caballo me quieres provocar hay que quieres jugar que tengo muchos años efectivamente entonces hago la torre e instruyó por aquí y digo cojo unos cuantos elementos que había cogido y ahora extruyo y ahora los centros evidentemente y ya tengo la torre ahora duplico otro objeto yo roja así vale entonces esto es la torre Qué más hay el alfil la torre el caballo bien La Reina del Rey vale vamos a ver para hacer la reina llevamos calentando para el caballo Sí eso es cierto entonces selecciono todo escalo en Z he hecho un cubo por aquí he hecho voy a hacer otro cubo ahí y ahora le aplico un subdivisión surface y digo a partir de esta cara extruyo a partir de esta cara extruyo y esto que es el río la reina el rey Vale entonces ahora selecciono todo duplico muevo a otra capa creo otro cubo vale le añado subdivisión surface voy modelando y digo la reina tiene ahí como un borlón y ya está reina no sé bien Y por último que me queda el caballo Vale pues para hacer el caballo y cuidado muevo a esta capa vale para hacer el caballo directamente me voy a cargar casi todo bueno Perdona así 20 de capa si quería que se hace polígonos entonces me voy a crear un cubo que está en 00 le digo subdivisión me lo pongo por aquí abajo y digo Pues mira el caballo pero Sí todo esto déjame que lo suba vale el caballo suele ser de hecho en el ajedrez una cosa así tiene un poco de base hay bien y luego cuidado y luego esto lo escalo en x voy girando excluyo a partir de aquí muy bien para eso es la cresta del caballo luego también la parte del morro está como retirada pero no olvidemos que esta es la forma fundamental del caballo porque luego tengo una serie de herramientas fantásticas en Blender que son las herramientas de escultura digital por tanto Yo vengo al modo esculpir le digo que quiero el modo de Din topo Vale y vamos allá así que quiero simetría creo que tengo simetría sí perfecto y digo a partir de esta parte Quiero mover Quiero grabar para sacar como las orejas del caballo elín topo no tenían topo pues no se está notando nada Pues le voy a poner tres píxeles no sé a veces que tengo que ahora vale con Skull roll Fíjate que ahí es cuando se está haciendo más pequeño con lo cual Pues ahora puedo el puedo hacer así Ay ay Menos mal que de vez en cuando tengo por aquí el Smooth a la derecha bendito es move radio o mucho mejor bien con lo cual Pues voy haciendo por ahí el caballo tiene como un cráneo más grueso con lo cual cojo Sí por ejemplo te lo iba a decir bien una cosa así vale luego siempre puedo hacer un poquito de Smooth Bueno le digo un poquito de schoolro les digo pues a ver el ojo del caballo está por aquí el ojo del caballo haría una cosa así y luego creo que tengo Cris a Gris muy bien ahí perfecto para hacer como el ojo del caballo la arruga vale una cosa así Uy madre mía sí se ha visto alguien resurrección os acordaréis del momento en el que sale ripley diciendo Mátame Pues el caballo estáis haciendo lo mismo Vale entonces vale una cosa así voy a darle un Smooth y poco más y ahora voy a darle un poco de Skull para el típico dibujito este de la cresta de dibujito idealizado evidentemente ahora la crem efectivamente y hago vale No sé caballo bueno aceptamos barco aceptamos caballo como animal acuático Dónde está aquí sustraer y ya bien Así que ya tengo por tanto ya tengo por tanto los objetos Así que ahora lo que voy a hacer es empezar a exportar Este es el Peón que lo cambiaréis con respecto al otro porque este está subido Así que le digo export obj selecter Y esto es Peón sobre escribo esto es alfil esto es Torre esto es Bueno aquí es 3D no esto es rey esto es reina Y por último esto es caballo fijaos que Es lógico Ay Es lógico que me meto en la carpeta obj y veréis que por tamaño Pues el caballo ocupa 3 megas Mientras que el alfil ocupa 114ks 106 Karts la reina 355 Es decir depende de Los polígonos que tienen pues lo que vamos a hacer ahora es meterlos dentro del juego de ajedrez a partir de aquí voy a replantear el posicionamiento de las piezas diciendo asumiendo que mi caso yo voy a hacer esa Asunción que el punto cero es este punto de aquí en el medio con eso cuando roten las piezas veréis que no rotan tan desfasadas Porque ahora mismo teníamos como el punto cero aquí el tablero rotaba a partir de este punto cero Así que voy a contar Cuántas posiciones de 1.200 tengo que bajar para irme a los peones vamos a verlo voy a quitar el php mirarme un segundo voy a quitar el php Sí y digo sabes qué Mirad y digo lo que quiero es que casi lo hagáis ahora a mano tengo un php ahí ahora está a 0 y por tanto guardo y recargo lo que quiero ver ahora es que aparece el Peón en cero pero el peor no debe estar en cero el foro le borró también así que también te digo que en el ajedrez hay piezas negras y piezas blancas pero piezas rojas hombre puede haberlas pero Sí así que digo bar material blanco es igual a New punto material de color blanco pues es fff y bar material negro es igual a Pues también yo que sé entonces vamos a verlo Pero bueno ahora hablaremos de eso entonces me voy a echar el material como que este Peón blanco o negro blanco pues material blanco Así que guardo y recargo vamos a verlo Hola a ver Ah muy bien es mi luz que es roja entonces me voy a la luz y efectivamente tengo la luz roja entonces ffff muy bien pues ahí objeto blanco Entonces ahora Mirad ese Peón no está bien lo que quiero que veáis miradme en la pantalla es que cada vez que veáis esta imagen sacaros una imagen como esta para ayudaros cada vez que veáis una imagen como esta debéis saber que esto es x esto es Z y el eje superior es y porque en Tri punto js trabajamos así esto es x y esto es Z Así que vengo aquí a Z y le digo a ver 600 menos hemos dicho 1200 sí 600 3000 voy a ver ese error entonces aquí de momento voy a poner menos 3000 y ahora voy por ahí muy esperado vamos a ver si coma bien De momento tengo ya el Peón ostras lo veo un poco lejano Pero bueno ahora vemos Voy a poner Menos 300 tampoco bueno a ver y ahora por tanto lo que voy a hacer es que me hago otro peón y le digo este segundo peón está en x Pues voy a poner 150 a ver hay es que era 1200-200 120 no 150 yo que sé no me acuerdo cuando era ya pero bueno 150 Así que ahora como os podéis imaginar claro este Peón Mirad vamos a verlo este Peón en x tendría que estar a 75 este A menos 75 en x hay porque así están centrados con respecto a la cajita y eso quiere decir que ahora voy a hacer lo siguiente para ahorrar un montón de líneas miradme lo que voy a hacer Es que voy a unir todas las posiciones y escalas dentro de una misma sí es más la escala voy a decirle 50 la escala creo que sí creo recordar que o escalé 50 no nos han hecho como pequeñísimos Bueno pues Oye pues no pasa nada no no voy a ponerlo aquí todo ha rejuntado y ya está para esas líneas para no tocarla con lo cual Así que esto es la posición y la escala A menos 75 Y así pues cada Peón que haga me ocupará mucho menos por tanto voy a ir dibujando peones hay 8 así que sí un ratito y digo 65 más 150 para luego poder cambiar primero para que esté centrado el tablero en la pantalla que no rote a partir de un extremo sino que rote más centrado y aparte para poder poner el resto de piezas porque el foro sirve para los peones pero no sirve para el resto de piezas Bueno pues momentín cálculo 65 más 150 es igual a 225 Así que dos cinco menos dos cinco ahí tengo cuatro peones o 29 no es nada lo voy a hacer yo y ahora paso el código me gusta I like it entonces copio estos otros otra vez y digo 225 más 150 375 Así que 375 y tengo ya 6 peones con lo cual me falta por aquí 375 + 150 tengo por ahí ya 8 peones pero ahora lo que voy a hacer es generar los 8 peones más con el material negro así que me copio este bloque de 8 peones y lo pego Aquí voy a decir bloque de 8 peones negros esta parte de aquí arriba es el bloque de 8 peones blancos y por tanto ahora Digo vamos a verlo digo Z Menos 300 pues z300 300 300 y 300 De qué material Pues de material negro Así que material negro si todo ha ido correctamente ahora tendré una fila de 8 peones de color blanco y otra fila de 8 peones enfrentados de color negro así que por tanto ahora lo que voy a hacer va a ser simplemente subir un poco más la cámara para que los enfoque un poco desde arriba y os Pasaré esta escena para que acabemos de poner el resto de fichas en las posiciones correspondientes vamos a ver entonces la cámara voy a cerrarla un poco más Vamos a ver la posición de la cámara estaba a 5000 yo la pongo a 2000 por tanto olvidado Ahí está mucho más cerca ahora la cámara vamos a ver la cámara le digo Camera position punto y es igual a voy a empezar con 200 no sé si veis ahí como era la cámara está un poquito más subida y por tanto pues está bastante mejor cámara 500 voy a probarlo bien ahora estás demasiado arriba una rotación eso es entonces Camera rotation En qué eje claro antes la hemos rotado en el eje y pues Z es igual a más punto pi partido 10 no lo sé Hoy va no era Zeta era claro es que ahí son dos ejes a la vez y x Wow qué Guay no y la verdad es que Mola bastante no está chulo bien no exacto no pasa nada efectivamente lo que voy a hacer es posición y es igual a 200 era y con eso tenéis ahí ya para trabajar correctamente el cubito Este dejádmelo ahí en el medio vale que os sirve un poco como a punto de referencia y ahora lo que quiero es que detrás de los peones metáis el resto de fichas y digo Bueno pues por ejemplo Sabiendo esto de aquí pues ahora digo ahora quiero meter por ejemplo que te diré yo mira algo facilito una torre Así que vengo por aquí me voy al final y digo peón y digo Torres para meter las cuatro Torres me copio el código Torre cargo Torre punto vj y le digo que va a estar en x - 525 Z vamos a verlo y si todo va bien fijaos como ahí tengo ya una torre al lado de los peones ahora lo la cámara se me ha subido otra vez que extraño así se me ha subido Qué cosas y no sé si lo veis ahí como tengo una torre negra en la esquina detrás del Peón o sea en la posición correcta así que por tanto ahora continuó y digo quiero otra Torre más 525 y ahora duplico estas dos Torres para decir menos 4,50 menos 450 de color blanco material blanco y material blanco Así que guarde recargo Y si todo ha ido bien pues tengo ahí las dos Torres negras y las dos Torres blancas y continúa al lado de la Torre que va no el alfil va protegiendo a los reyes entonces vale el caballo entonces lo que voy a hacer ahora va a ser otra de lo mismo pero con el caballo Así que esto eran las torres pues me duplico esto me lo pego Y estos son los caballos ahora os vuelvo a pasar el código ya finalizado del todo caballo Bueno lo paso con caballos y digo posición x calculadora hasta la calculadora 525 menos 150 es 375 pues miradme 375 3 7 5 375 por supuesto el objeto no es la torre es el caballo ahora puede ser que cuando le dé a recargar tarde un poquito más en cargar porque el caballo recordar que era la pieza más pesada Así que si todo ha ido correctamente recargo Ay Ay veis lo que ha pasado vale pero carga faltaría rotar los dos caballos negros vale pero cargan vuelvo a cargar Mirad y veis ahí van cargando Pero esto es muy interesante eso es muy interesante porque antes hace un par de años el tri.js hasta que no cargaba todos los objetos no aparecían en la escena ahora es el loader que me decíais antes ese manager es el que gestiona que te va metiendo los objetos conforme van cargando con lo cual está bien Bueno pues nada pues finalizo verdad finalizo con los alfiles y con Los reyes de Las reinas entonces lo que voy a hacer ahora es que me copio los caballos los llamo atención ahora sí alfiles y digo alfil cargo alfil por aquí y alfil por aquí a 375 menos 150 me quedan 225 así que 225 Y si todo ha ido bien Aparte de que los caballos también en cargar pero fijaos como tengo ahí los cuatro alfiles en el sitio vale Así que voy a hacer lo mismo voy a el rey por ejemplo ya me dejo la reina copia los alfiles me voy al rey Rey cargo el rey Rey 225 menos 150 es igual a 75 y por tanto al guardar y recargar fijaos ahí como ya tengo todas las piezas del tablero preparadas para trabajar preparadas para que luego evidentemente en la parte de abajo les pongamos unos cuantos rectángulos es decir el tablero Pero sabes qué es que poner el tablero realmente no es muy complejo porque probablemente con un bucle for Eso sí un bucle for hecho con php ya sabemos que con javascript nos da problemas pues podemos generar el tablero cómo lo puedo hacer Bueno vamos a verlo en el siguiente vídeo pues acabamos con el tablero tiene la dificultad Mirad de que las piezas son alternas por tanto Yo vengo y digo ahora lo siguiente Ahora cuando acabo de poner los reyes del ajedrez hago una estructura de control Ford pero ya sabéis que lo voy a hacer en php así que php por x es igual a Claro si no Pero espera es que sí es igual a menos 450 no menos 525 punto y coma x es menor o igual que 525 x + igual a 150 es decir el incremento php fierro el bucle for a no lo abro pues debo abrirlo y ahora pongo un cubo Así que digo cubo por aquí bar como lo llamo ficha tablero sí es un cubitos Entonces le digo que es de 150 por 20 está bien y ahora le digo a la y0 correcto no correcto está un poco elevado pero ahora digo eco x vale habiendo hecho esto Por cierto el color Cuál es este rojo perfecto para empezar vale bar ficha tablero sin al ficha tablero no no a ver cubo 2 Vale pues ficha tablero va aquí y aquí va el cubo 2 Así que guarde recargo vale al respecto en la línea 418 Este es un problema de php vamos a verlo En qué línea me ha dicho Ah muy bien cubo posición y es igual a cero vale bajo eso es que si me lo pone junto Pues mira br me r pero tampoco claro br contra barra n Ahora sí bien y por tanto Dime la contra barra de agua la contrabarra n lo que hace es forzar un salto de línea pero de código no de html en pantalla bueno simplemente Aquí he fallado en que esto es X Y Z así que ya tengo ahí todas las fichas de una fila déjame incluso hacer esto es 140 por 140 simplemente para que veáis donde acaba una Y dónde empieza la otra lo veis me acabaron de empezar la otra la ley por último Y por último para esta parte que os voy a pasar de código como os podéis imaginar un tablero de ajedrez básicamente es un doble bucle for hasta que solucion donde digo y no realmente es Z y le digo posición Z es igual a Z Así que si todo ha ido bien madre mía Qué nervios si tú te ha ido bien tenemos ahí un tablero no cuadra perfectamente no pasa nada es la Z la que está fallando Qué curioso Ah sí claro y la z le digo menos 525 menos 75 450 ponía cinco dos cinco menos 75 450 pues va de menos hasta 450 Y si todo ha ido correctamente Ahora sí tengo un tablero de ajedrez todo rojo eso es lo que tenéis que solucionar que sean blancas y negras Consecuentemente vale Pero bueno no tiene tampoco ningún problema va que va a haber resuelve bien porque fijaos que lo que voy a decir es lo siguiente Mirad vamos a ver te digo contador cuidado php contador es igual a cero por tanto ahora digo php si contador porcentaje 2 es igual a cero en ese caso pasa una cosa si no pasa a otra y lo que va a pasar aparte de que contador más lo que va a pasar si esto es súper trampa esto ya es el colmo de las trampas lo que va a pasar es que segundo material es igual a negro segundo material es igual a blanco si esto ha ido correctamente que no las tengo todas conmigo si he extraído correctamente pues ya tengo ahí un tablero de ajedrez donde con un simple contador he ido cambiando las fichas de blancas a negras Pues ahora si os paso el código para que lo podáis analizar y a ver qué hacéis con el ajedrez Bueno pues el objetivo hoy para empezar es trabajar con texturas pero aplicar texturas no es tan sencillo como aplicar materiales a objetos 3D no Ya por el código que hace falta sino porque requieren que los objetos tengan una cosa llamada canal de mapeado y el canal de mapeado no es algo que se trabaje no se puede trabajar desde ceri.js ni desde cualquier engine si no es el modelador el que nos tiene que dar el canal de mapeado en el Canal de vapeado por tanto conceptualmente es lo siguiente yo puedo tener un objeto 3D digamos que empiezo con algo tan sencillo como una caja y yo le aplico por ejemplo una textura Así que voy a por ejemplo voy a V paterno la típica textura bien Por ejemplo esta Pues esa va a ser que no Entonces vamos a no sé una como esta me da igual guardo la imagen por ejemplo en el escritorio y la aplico al objeto por tanto me voy a este objeto le aplico un material a ese material le aplico una textura es de tipo image cargo la imagen me voy al escritorio me voy a esa textura abro la imagen y ahora quiero verla en la pantalla vamos a ver con material bien fijaos lo que pasa voy a bajar un poco esta luz para que podáis ver bien lo que pasa qué está pasando Pues que la textura se ve bien por esta cara pero qué ocurre por esta cara de aquí creo que ahora lo veréis sí Bueno ahora se ve mejor lo que ocurre Es que la textura no está preparada para verse por esas caras y lo que ocurre por tanto es que la textura tal y como llega a ser la Gráfica tal y como llega ahí al límite es como que se estira es como el que se expande no tengo ni idea que pasará en la cara debajo Así que en la cara debajo parece que se ve correctamente al revés pero correctamente Entonces por qué realmente el cubo se tendría que ver por todas las caras igual es esta la proyección correcta o hay otra proyección que pueda ser más correcta No hay una proyección correcta sino que tú tienes que definir cómo quieres realizar esa proyección Pues esa proyección de cómo se visualiza esa textura en ese objeto es lo que se llama mapeado y el mapeado no lo podéis tocar desde ningún engine desde ningún framework únicamente desde el programa modelador 3D que sea eso sí evidentemente todos los programas modeladores la capacidad de hacer esa operación llamada mapeado bien en el caso de Blender Por ejemplo yo me voy ahora por ejemplo a un menú llamado V editing y vengo ahora a entrar dentro del modo edición pulso la tecla u y con la tecla u yo puedo decir por ejemplo que quiero una proyección cúbica si yo elijo una proyección cúbica para este elemento fijaos como se distribuyen las caras de manera que cuando yo vuelvo a modo objeto y aunque ahí no se vea correctamente me voy a default y le digo a la textura que ahora no quiero que me generes coordenadas de mapeado porque yo he creado una textura V yo he creado un mapeado UV y por tanto podemos comprobar como tengo un mapeado donde la textura se aplica en todas las caras y esto no es más o menos correcto que lo que tenía antes eso simplemente es diferente de lo que tenía antes hay veces en las que me podía interesar que la textura atacara desde arriba y cayera hacia abajo y hay veces en las que me puede interesar que la textura venga desde cada una de las caras pero En definitiva lo que os quiero decir es que un objeto antes de ser exportado a free punto js o a cualquier otra parte tiene que tener mapeado si el objeto no tiene mapeado no se extrañáis de que apliquéis la textura que apliquéis no se vea en el objeto Por qué Pues porque simplemente el objeto no tendrá información de cómo debe aplicársele esa textura para el ejercicio de hoy por tanto voy a modelar una pequeña nave espacial vamos a poner la textura así que ya sabéis la nave que hago siempre Por tanto edito la cara Vamos a darle un poquito de subdivisión hago así vamos a darle un poquito de simetría no la veo simetría mi error bien Así que en el eje x correcto pues hago así escalo en Z hago así creo un par de rotores que hay y extruyo y escalo Y tenemos un modelo 3D pero el problema es que este modelo 3D ahora mismo no tiene ningún tipo de mapeado y por tanto si yo lo intento exportar y Le intento aplicar un material con textura podremos comprobar como la textura nunca se aplicará correctamente qué es lo que necesito pues una vez más necesito volver vamos a ver bueno las alas un poquito más gruesas en efecto volver a este a esta ventana de V entro en modo edición selecciono lo que quiero mapear mapeo por ejemplo como cubo y ya luego podemos empezar a discutir Cuál es el mapeado más correcto para cada objeto pero la cuestión es mapearlo de alguna manera y yo ahora por ejemplo podría aplicarle a ese material una nueva textura que sería de tipo imagen cargo la misma imagen que veía antes simplemente para comprobar que de alguna manera a este objeto se le está aplicando algo de mapeado bien ahora por tanto ahora que ya sé que este objeto está siendo mapeado correctamente es cuando ya puedo venir a file puedo venir a export puedo elegir el formato obj y puedo decir que en C en champ en HD docs free js en obj quiero guardarme este objeto llamado nave punto obj lo que vamos a hacer ahora es simplemente importar el objeto dentro de free punto js y aprender a colocarle No ya solo un material sino también una textura Bueno pues ayer nos quedamos primero arranco el champ evidentemente ayer nos quedamos con la idea de que habíamos generado un archivo en formato obj entonces este archivo lo tenía puesto aquí dentro de la carpeta ht dogs dentro de la carpeta free js y había puesto el archivo dentro de la carpeta obj con el resultado de haber generado un archivo obj llamado nave punto vj y su archivo correspondiente de material llamado nave punto mtl bueno la idea de este par de archivos por tanto es que la nave.vj que si queréis puedo abrir con edit no solo contiene la información tridimensional de los vértices es decir es un archivo ascii no es un archivo binario se puede parchear sin demasiado problema y como veréis Mirad contiene tanto la información de bueno Quién ha generado el archivo contiene la información de dónde está su archivo mtl si es que lo tiene contiene la información de este objeto Qué nombre recibe y por tanto contiene la información Mirad de cada uno de los vértices que contiene y de cada uno de los vértices de texturizado que tiene es decir la información geométrica y la información de mapa de texturizado contiene también los vértices normales que vértice Está hacia un lado y hacia otro y por tanto finalmente las caras las fases que están cerradas dentro de cada tríada de vértices pero como podéis ver este archivo contiene geometría contiene información de mapeado pero no contiene información acerca del material porque el material y su textura están dentro del archivo mtl dentro del archivo mtl que ocupa 300 bytes únicamente tenemos evidentemente pues ha generado este archivo Cuántos materiales contiene este archivo el nombre del material y a partir de ahí como decía la luz ambiental la luz difusa la luz especular el que emiter que en este caso no emite nada el acuerdo que era Y tenemos por aquí el mapa de KD si KD es el color difuso pues map kb es un mapa que va ubicado en el Canal de color difuso y en este caso por tanto este mapa pues es el que ayer cargamos que igual luego volvemos a cargar entre punto js no os digo que no pero el caso es que hoy mi objetivo de hoy no es realmente trabajar con este archivo mtl eso lo haremos en próximas sesiones donde trabajaremos con el plugin de objmtl mi objetivo hoy es cargar únicamente el archivo obj y texturizarlo dentro de free punto js No su texturizado de Blender sino texturizarlo entre y punto js Bueno pues lo que voy a hacer ahora por tanto es que me voy a crear un nuevo archivo y lo voy a llamar lo voy a llamar mapeado y luces punto html este archivo de mapeado y luces realmente va a tener el mismo código que ajedrez punto php Así que voy a copiar el código que tenía en ajedrez punto php lo voy a pegar dentro de mapeado y luces y simplemente Mirad simplemente voy a hacer lo siguiente vamos a ver dentro de mapeado y luces que recordamos lo que acabo de hacer es copiar y pegar el código que había dentro de ajedrez punto php voy a descargar voy a eliminar todo el bloque de 8 peones más las torres más los caballos más los alfiles más todo el mundo me voy a dejar únicamente un peón para tener ya el código para cargar en la nave espacial evidentemente Así que borro todos los peones borro las otro bloque de 8 peones del otro color borro las torres borro los caballos borro los alfiles borro los reyes que había puesto cuatro copias y ya está vamos a ver borro bueno el tablero también por qué no el tablero hasta el php y tengo por aquí un cubo este cubo 2 era el cubito Ah no hasta aquí cómodos y hasta php ahí estás Vale pues Me he quedado únicamente por tanto con las siguientes definiciones Por una parte la rotación y la rotación de la cámara Esto sí que lo sigo necesitando tengo la llamada a las funciones inicio y animación tengo la declaración de la función de inicio y tengo la función de animación y por tanto simplemente lo que quiere decir es que quiero cargar nave punto obj nave.vj quiero que esté en 0 quiero que esté en el centro la escala no sé que me voy a encontrar voy a poner 111 y a ver qué sale y yo creo que ya Así que si todo ha ido bien ahora simplemente lo que hago es sacar el navegador saco el navegador me voy a localhost Barra free js barra mapeado y luces punto html bien tengo ahí el cubo No veo la nave espacial veis que el cubo va dando vueltas no se ve mucho pero yo os lo digo está dando vueltas no veo la nave espacial pero al parecer tampoco tengo ningún error de no encontrado por tanto esto debe querer decir que simplemente la nave espacial es un poco pequeña Así que voy a poner escala 10 guardo recargo y veo ya la nave espacial aparecer pero pequeña por tanto digo escala 100 quizás ahora igual es un poco demasiado grande pues no Mira está bastante bien Así que como podéis comprobar ahí tengo la nave espacial que previamente habíamos modelado en Blender por supuesto de momento no tiene texturizado Pero porque simplemente tengo un mes lambert material así que a continuación una vez que hemos importado la nave lo que voy a hacer es aplicar el texturizado simplemente lo que quiero ahora es recomponer un poco la textura aplicar la textura a este objeto para ello por tanto lo que voy a hacer es recuperar la demo que abrimos el primer día porque creo recordar que la demo que abrimos el primer día el ejemplo que abrimos el primer día tenía ya el código del texturizado me voy a examples me voy a webgl Geometry obj creo que era obj y dentro de bueno el buscador de Windows haciendo de las suyas Entonces vamos a ver web y gl loader obj aquí está vale lo voy a cargar y creo recordar que en este ejemplo Mirad estaba el código aquí está estaba el código de el cargador de textura entonces simplemente Mirad lo que voy a hacer es cargar una textura vamos a ver aquí está louder punto load vale y digo me voy a mapeado y luces recordamos que teníamos aquí el Peón que ahora es la nave el loader.load Vale pues dentro del loader punto load voy a cargar también una textura Así que con la misma lógica y arriba de elloader punto luego para cargar una nave lo que hago es loader punto loade para irme a texturas para irme a realmente la carpeta obj y cargar un archivo jpg así que qué archivo jpg voy a cargar lo que queráis entonces me voy aquí al Chrome y lo que hago por tanto es que no sé decirme una textura un tipo de textura la queráis metal me ha salido por ahí los reyes del metal Entonces vamos a cargar una textura y claro por eso digo Mira voy a esta que es así rollo suelo industrial y todo eso así que cojo esa textura insisto la que queráis me da igual la que cojáis y lo que voy a hacer es que la voy a pegar dentro de la carpeta de Sam dentro de ht dogs dentro de free js frío js dentro de vj y la voy a copiar como textura por ejemplo textura punto jpg Bueno pues eso quiere decir que yo ahora puedo venir y le digo que Quiero llamar a textura punto jpg textura imágenes igual a imagen textura Niza necesita actualización es cierto vale dejo todo eso como esta y Simplemente no mentin aquí con esto acabo a ver aquí vamos a ver el mapa y el material Sí claro cuidado me hace falta esta línea bien ok una que dice bar textura es igual a New free punto textura Y por último digo vamos a ver material map ahí está ya el material map es igual a textura vamos a ponerlo vamos a ver vaya se ve que justo el mapa que he cogido pues no es válido Porque da un error Así que voy a otro mapa de hecho igual voy a el mapa que cogí el otro día donde estaba Pues creo que era este de aquí Vale pues lo voy a poner en la carpeta correspondiente voy a llamarlo textura 2 lo llamo textura 2 lo recargo bueno vamos a ver en qué objeto tienes el problema al respecto Line exit Bueno pues de momento copiar eso y ahora nos vamos a aplicarle la textura al objeto voy a pasar esa textura por el gimp para ver si la puedo limpiar y por tanto abro el gym en este caso pulso control o me voy a la carpeta de Sam de ht dogs de free y js me voy a obj cojo no sé la primera textura otra cosa que os voy a decir Mirad es muy importante aprovecho que abro la textura en gym para en primer lugar decirle escalar la imagen y pasar la imagen a una Potencia de 2 esta imagen ahora mismo primero no tiene la misma anchura qué altura y segundo ni la literatura son potencias de dos entonces me voy a escalar la imagen le digo 512 por 512 o 1024 por 1024 lo que queráis y además la exportó archivo exportar como no sobreescribir sino exportar como textura 3 y al exportarlo como textura 3 es cuando ahora lo voy a importar como textura 3 yo creo que después de hacer esto bueno a ver hh game 28 lo que sea Bueno qué interesante esto ya no debería dar fallo voy a probar una cosa voy a exportarlo con png lo exportó con png lo llamo con png luego algo está pasando aquí con el loader punto Low voy a ir a free js y lo que voy a hacer es cuando creo el material pues decirle que directamente tenga el material así que js material with texture Aunque eso lo tengo ahí en un ejemplo eso lo tengo aquí realmente o sea punto com barra código barra no barra alumnos barra Carlota por ejemplo miro el código y aquí ahí mismo lo voy a tener bien Vamos a ver material 01 Ahí está vale y por tanto en el material blanco por ejemplo en lugar de decir color fff pues pongo map dos puntos y texture textura claro cuidado para eso tengo que haber primero declarado la textura Vamos allá bien lo que he hecho por tanto es primero declarar la textura eso se queda así igual y ahora dentro del material blanco Donde antes el material blanco poníamos color dos puntos y un código hexadecimal Pues en este caso pongo en lugar de color pongo map y le digo que el mapa es la textura esto ha sido con un lambert realmente yo lo hacía con un basic Pero bueno vamos a verlo así que recargo bien al expectadline png esto ya me empieza a escamar bastante bien Vamos a ver al expectadline png en la línea 340 y en la línea vale 340 voy a cargar otra vez el jpg vale por tanto el error es el mismo y ahora lo he hecho de una manera que no me debería dar error bien el error es el mismo exactamente el mismo error Así que es que en expectadline quiere decir que se ha encontrado una línea no esperada en el archivo y eso es interesante Claro claro vamos a verlo vale voy a hacer esto a ver si me deja obj textura 3 Bueno lo he cambiado a este código y así es como parece que lo tengo funcionando vale por tanto mirar lo que quiero que hagáis es por tanto para crear el material ahí fuera de momento aunque estás deprecated Aunque es un método desfasado pero ya lo actualizaremos digo textura 1 es igual a free punto image utils punto cargar textura punto la textura que quiero cargar a continuación defino el material donde en lugar de un color le pongo la textura y simplemente a continuación pues procedo con la carga del objeto con total normalidad en una escena de 3D se supone que no podemos ver nada si antes no tenemos una luz de hecho en esta escena tuvimos que crear mirar una luz para poder ver algo en pantalla la cuestión está en que yo he creado una luz la tenéis aquí arriba Vamos a ver dónde estás Luz aquí tenemos una light 1 que es una free Point el freepoin light ya te está diciendo que es una luz de punto es una luz de una bombilla de hecho fijaos que he creado una luz que tiene un color de iluminación ahora a blanco el otro día lo pusimos rojo que tiene una intensidad de uno voy a cambiarlo a 10 puede ser Sí claro que sí es lo que quiero ves que es mucho entonces recargo y fijaos como ahí el objeto está quemado lo cambio a dos quizás para tener un poquito vale un término medio cero es la caída en este caso lo que he hecho es poner la caída a cero para decir que no quiero caída que quiero que la luz sea infinita pero una sola luz muchas veces no es suficiente para iluminar toda una escena si os fijáis solo tenemos un objeto rodando en pantalla y ya esa luz es un poco insuficiente vamos a ver qué otras luces aparte de que puedo crear tantas Point likes como quiera pero vamos a ver qué otras luces tenemos dentro de free punto js Hay una que no me gusta Pero reconozco que de vez en cuando es útil que es la ambientlite la ambienlight es una luz ambiental que me sirve precisamente para rellenar todas estas zonas de color negro que a veces me pueden quedar es más que me suelen quedar por tanto me voy ahora vamos a cerrar por aquí me voy ahora a free punto js ambienlight me voy a la documentación y veo que una ambienlight lo que quiero es ver sus parámetros una bien light tiene muchos menos parámetros que una luz normal Así que simplemente aunque creo que se puede sobrecargar vamos a verlo aunque simplemente lo que voy a hacer es lo siguiente vamos a ver Esta es una creo una luz puntual y esto de aquí es creo una luz ambiental Así que ahora voy a decir luz ambiental es igual a New free punto ambientlive también like donde la a y la l son mayúsculas y a continuación digo Cuál es el color hexadecimal pues digo 0 x voy a poner fffff que es un color blanco ambiental Esto va a ser peligroso va a ser peligroso bueno y luego sin punto a luz ambiental evidentemente Esto va a ser peligroso en cuanto a que mira ahora tenemos una luz muy fuerte ambiental es decir tenemos una luz muy marcada Bueno pero tenemos ahí la luz ambiental nos ayuda por tanto como veis a rellenar la escena de iluminación tiene el fallo como ahora luego hablaremos de que es una luz demasiado genérica y de hecho ni siquiera proyecta sombras vamos a hablar un poco de otro tipo de luz que tenemos que es el foco y hablamos un poco también de las sombras pero si quiere hablar de las Sombras inevitablemente tengo que poner algún tipo de plano bajo para que me proyecte esas sombras Así que lo que voy a hacer a continuación como te decía antes es reciclar ese cubito que tenía ahí el segundo cubo que tenía ahí muerto de risa que ocupa 20 y 20 Pues le voy a decir 220 200 para tener un suelo Pero mira con 200 todavía no tengo un suelo Así que voy a poner 2.000 2.000 2020 2000 ahora sí Oh vaya parece que esa cajita está en la misma posición que la nave Bueno pues cubo 2 posición y menos 200 vamos a verlo Ahora parece que sí quizás un poquito menos 100 Ahora sí vaya bueno supuestamente el material fijaos es muy duro supuestamente es un material lambert de hecho lo es pero la luz ambiental es la que está haciendo que no se perciba Por tanto la luz ambiental la voy a cambiar a un valor gris oscuro que es oscuro como que pues gris oscuro como 40 en lugar de fffff 40 y así vosotros creas tú a ver os voy a quitar Ah no parece que es la vale parece que es la luz de spot ahí la que da el problema bien he quitado un momento la luz ambiental estoy trabajando ahora con luz ovni Y qué veis en los bordes que veis en los bordes del plano veis que el rojo es más oscuro veis que el rojo es más claro en el centro del plano y es más oscuro en el borde del plano por qué Pues porque Bueno si yo tengo una bombilla aquí pues ilumina más en esta parte de la mesa que en la parte alejada de la mesa pero una bombilla no deja de iluminar en todo el entorno es una bombilla que yo pongo en un escenario me ilumina en todo el entorno vamos a ver por tanto un tipo de luz un poco especial llamado Spotlight la Spotlight es una luz de foco es una luz donde tú específicas que queda iluminado y que no queda iluminado lo que quiero hacer ahora es cambiar atención todos cambiar la luz de tipo Point Lite por una Spotlight Pero antes Quiero consultar la documentación para ver qué parámetros tiene porque como os podéis imaginar tiene que haber un parámetro que es Hacia dónde enfoca la Luz entonces pongo free punto js Spotlight y veo aquí Spotlight vale vamos a verlo y dice es una luz de punto que puede proyectar sombra en una dirección lo de las Sombras importante por eso quería que por eso quería crear el suelo Vale pues digo lo siguiente vamos a verlo voy a la luz de tipo point light que tenía y la voy a cambiar por una Spotlight Así que cojo la que tenía de point light y la cambio por una Spotlight la Spotlight vemos como únicamente te está pidiendo el color por tanto desactivo estos parámetros ahora le pongo la posición es la misma que antes eso no hay ningún problema pero la diferencia ahora es que le digo Spotlight cast Shadow true lo cual quiere decir luz proyecta me sombra no Spotlight sino light 1 que es como yo la he llamado ahora hablaremos de esto ahora os voy a presentar estos parámetros que es el shadowmat with y height cuidado nombramos correctamente a la luz y luego bueno tenemos el Shadow cameranier El Shadow camerafar y el Shadow camerafo voy a dejarlo así Por supuesto Siempre hablando de la luz número uno siempre hablando de la luz número 1 y ya está así que si todo ha ido bien Vamos a verlo dejadme que me concentre si tú Aquí está si todo quedó bien nada nada Ángel bien y distance y Ángel valelangel va Bueno vamos a probarlo así vale parece como que quiera Shadow caminar is now Shadow camela Pero no pasa nada esto de momento no está proyectando mucha sombra vale Voy a hacer lo siguiente voy a usar el constructor vale constructor blanco intensidad 3 distancia mil o cero el ángulo vamos a ver el ángulo es más punto pi partido vamos a ver es partido 2 vale parte 2 es 180 más partido 4 y yo creo que ya Así que guardo y recargo bien ahí lo tengo lo único es que Quizás vamos a ver desactivo esto ahí vale Lo único vamos a verlo light posición z6 vaya Qué curioso Ah vale está allí muy bien vale lo único es que me gustaría estar viendo sombras ya en la pantalla no estoy viendo sombras porque las sombras además hay que activarlas dentro del propio renderizador por tanto para ello vamos a Shadow Map ahí está la sombra no sé si se ve la sombra Vale entonces a viewsors Vale entonces me falta activar un parámetro que es el siguiente vamos a ver esto de aquí Shadow McQueen Shadow my height bien light Shadow my y en el renderizador Así que en el renderizador un momento que lo hago yo os lo pongo y pan aquí vaya bien bien bien vale también Pues venga también hay que poner esto un segundo vale Y ahora es object punto cast Shadow es igual a y más recibe Shadow hay que fastidiarse es igual a true por tanto Ahora vengo al objeto y le digo Vengo al cubo y le digo el cubo 2 también puede proyectar sombra y el cubo 2 también puede recibir sombra ahora ya debe estar así que guardo y recargo todavía no hay algo que le falta pero bueno de momento copiar eso y vamos a empezar a trabajar con eso porque desde luego es algo que finalmente hay que hacer he puesto varias cosas en el código en primer lugar lo que he hecho es que la escena en el render al render le ha añadido estos dos estas dos líneas que dice render punto shadowmap.enable es igual a true donde le estoy diciendo al renderizador Oye renderizador tienes que soportar mapas de sombras a continuación especificado qué tipo de mapa de sombras voy a usar que en este caso tengo ese tipo de mapa de sombras ya veremos Cuántos tipos de mapa de sombras hay que hay tres o cuatro por tanto con esto lo que hago es capacitar lo que hago es avisarle al renderizador de que en un momento dado le voy a pedir que me proyecte sombras pero sin embargo esto de por sí no hace demasiado Porque además a cada uno de los objetos que intervengan en la simulación les tengo que decir tanto que el objeto punto cast Shadow es igual a true como objeto punto es igual a true es decir ese objeto emite sombras y ese objeto recibe sombras lo mismo también con el propio objeto cargado en la pantalla que es el objeto en este caso en la nave espacial Y por último en la luz le he dicho si el renderizador soporta sombras y el objeto soporta sombras tanto para emitir como para recibir por último en la luz le he dicho esto de aquí light 1.cast Shadow es igual a true y ya está vamos a quitar esto y todos estos parámetros que veis aquí y que podéis copiar bien en este caso lo que he hecho es poner un cubo arriba para comprobar que el cubo sí que está emitiendo sombras por tanto podemos ver claramente como es la nave la que no está proyectando sombras ahora veremos el Por qué bien pero antes de ello hay un par de parámetros que os quiero comentar pero ff,2 vamos a aumentarle un poco de intensidad ahí hay un par de parámetros que os quiero comentar que son los parámetros importantes atención miradme que son los parámetros de shadowmap with y Shadow Map height entonces fijaos que este parámetro está a 1024 vamos a ver qué es lo que ocurre voy a bajar la velocidad de la cámara por tanto esto partido 2000 voy a bajar la velocidad de la cámara vale Y por tanto mirar ese Shadow map with y shadown map High que está a 1024 lo voy a pasar a 32 y vamos a ver qué pasa en la pantalla decidme que veis en la pantalla ahora no veis nada pero que Vais a ver ahora que veis en la sombra algo raro un residuo efectivamente si me fijo en la sombra veo que tiene como más pixelada efectivamente eso es exactamente lo que ocurre en cuanto empieza a ver la sombra veo que exactamente lo que ocurre es que está como megapixelada no es el anti alias sino que es que realmente la sombra está pixelada si queréis verlo mejor ahora se ve mejor lo veis ahí veis si queréis verlo mejor puedo pasar de 32 a 16 pero será peor todavía sube un poquito la velocidad igual desaster efectivamente el salón es un parámetro muy importante para vosotros porque es el que controla la calidad de la sombra pero también como os podéis imaginar tiene su influencia en el rendimiento del motor Cuanto más calidad tengas las sombras más lento Va a ir el motor claro yo puedo cambiar esto por ejemplo a 2048 y puedo cambiar esto a 2048 Y en este caso como solo tengo una sombra lo va a aguantar perfectamente pero tengo que tener en cuenta que el motor puede ir más lento fijaos en este caso que la he cambiado 2048 Y La Sombra es perfecta pero evidentemente a Costa de consumir más memoria no sé Incluso si esa memoria ahora mismo se notaría vamos a comprobarlo es que depende del tamaño del objeto depende de la distancia a cámara 512 a partir de 512 suele estar bien Pero te digo que depende mucho Mira me voy a aplicaciones por nombre Chrome vale mira aquí está entonces me está ocupando 73 megas Vale ahora lo voy a pasar a 32 y sí ocupa unos cuantos megas recargo con 32 y 32 vale sigo en 73 megas bien vale Y ahora lo que voy a hacer es pasar a 8.192 que consideraríamos que es el margen superior no deberíais pasar de 8.192 porque muchas tarjetas gráficas a día de hoy no soportan más De ese tamaño y wow habéis visto Pues bueno Exacto eso es lo que quería que vierais Mirad recargo Wow vale ha tardado un poco y ahora Cambio a 32 por y fijaos como no tarda nada lo habéis notado ese tiempo Vale pues En definitiva si ya notáis ese tiempo con una sola luz y una sola caja imaginaos que pasa cuando tengamos una escena más compleja vale por tanto no os voy a recomendar ni de lejos ponerle sí sí sí no quería que decías que ya se empiezan a oír con una cajita solo los ventiladores sí efectivamente un poquito bueno y ahora vamos a ver pues qué es lo que le pasa a esta escena para que el objeto no proyecte sombra Vale pues la solución ha pasado por decirle que es el Child el que debe proyectar sombras y no el objeto por tanto en este caso este object shadows lo muevo de aquí y lo pego aquí es el Child Por tanto así como el Child le decimos que tiene un cierto material pues es también al Child al que le decimos que tiene que recibir y que tiene que proyectar sombras y por tanto en este caso vamos a ver cómo tenemos ya la proyección de sombras no solo desde la cajita que hemos puesto arriba sino también desde el propio objeto y de hecho no sé si os fijareis como incluso también la nave está recibiendo sombras de la caja que tiene justo encima Bueno pues una vez que tenemos esto solucionado en la siguiente parte de la clase quiero hablar un poco de interactividad es decir tenemos objetos en pantalla tanto primitivas como objetos nuevos tenemos materiales tenemos luces tenemos sombras Y tenemos animación tenemos una cámara moviéndose pero a mí ahora lo que me gustaría Es que yo pudiera mover la cámara yo pudiera definir el movimiento de la cámara por ejemplo con las teclas de WS a b que yo me pueda mover por la escena para esto por tanto vamos a combinar lo que ya sabemos con esta escena dejadme que mute dejadme que pare dejadme que inactive los el código para hacer que la cámara se mueva Por tanto la cámara se me queda más o menos en el centro de la escena y ahora lo que voy a hacer es detectar la pulsación de las teclas como hemos hecho en tantos otros proyectos anteriores para decirle que la pulsación de las teclas lo que tiene que hacer es mover la cámara en mi esfera Así que Mirad ahora lo que voy a hacer es aprovechar el código de cualquier otro proyecto pero claro el código de cualquier otro proyecto también quiere decir en qué proyecto hemos usado por ejemplo toque de tecla multijugador por ejemplo Vale pues vamos a ver multijugador mismo me voy a multijugador y digo en primer lugar jquery si voy a usar toque de tecla jquery lo muevo a la carpeta Live de mi proyecto a continuación en el multijugador cargo el archivo Index punto php Y por supuesto cargo Mirad cargo la librería jquery en live cargo la librería jquery y voy a decir lo siguiente cuando el documento esté ready Bueno mira lo tengo aquí todo preparado cuando el documento estéreody esto lo pongo aquí cada vez que pulso una tecla invoco al guardador Eso no eso hoy no más adelante Sí pero hoy no vale creo que estos son las flechas pues va Vamos a las flechas tengo 38 39 40 y 32 no esto es crear un bloque Claro Pues bueno no sé si os acordáis de los números de tecla pero Claro pero ahora necesito el movimiento de abajo Ah vale pues el de arriba 37 me falta muy bien Ah izquierda vale Perfecto pues Mirad lo que digo es que la cam postx es decir vamos a ver si le digo arriba pues en ese caso digo aquí Campos Z más si le digo abajo si le digo abajo Campos Z menos si le digo que quiero a la derecha Campos X + + Y si le digo que quiero a la izquierda Campos x menos más menos vale si todo esto ha ido bien bueno el temporizador no lo quiero me quedo Únicamente con esto que básicamente es un Script que se queda escuchando a cuando yo toque una tecla y cuando yo tengo una tecla Pues me va a hacer el movimiento de la cámara apretado vamos a ver un segundo dame un segundo también un segundo y por tanto ahora le digo can position x es igual a Campos x y campo sitio en Z es igual a Campos Z si todo ha ido bien Ahora guardo y recargo y ahora Pero además que haga así y ahora no sé si veréis como hay como estoy moviendo ya el juego un momento en que estoy en medio de la nave Exacto estoy en el cubo de Exacto la de esa es así habló zaratustra ostras de quién era Wagner No lo sé en fin entonces Aquí voy a poner para que se mueva un poco más rápido más igual 10 menos igual 10 no me acuerdo ahora mismo de quién era Dash faratustra es de no vale así O sea no eso es de nietzsche no es Niche vale Y ahora strauss Johann Sebastian es que hay varios strauss la familia entonces ahora recargo Y si todo ha ido bien daos cuenta voy daos cuenta como ya me puedo empezar a mover por la escena ahora voy para ahí lo tenemos ahora mismo podemos comprobar Cómo no podemos rotar la cámara entonces rotar la cámara teniendo en cuenta Mirad que yo ya tengo una variable llamada Root y pues yo digo Bueno pues cuando pulso la tecla Cuál es el lado izquierdo derecha 37 y 39 Muy bien pues digo roth y Rod y menos igual 10 y 39 rock y más igual 10 ruty con lo cual si he cambiado Mirad esas dos variables Ahora puedo venir aquí abajo atención y decir Camera rotation y es igual a Root o camrot no sé y creo que es Así que Mirad atención guardo y recargo vale vamos a ver dónde estamos Ahí Ah vaya cuidado cuidado no no Claro es que 10 es mucho es que estaba pensando en grados sexagesimales pero no son grados son radianes vale por tanto en este caso pues voy a poner más punto pi partido 10 No ya nací 10 son 18 grados voy a poner 20 que aún así tampoco está mal entonces son nueve grados efectivamente Entonces sí vamos a verlo pero bueno 9 grados ya es algo entonces roto y mirar ahora hago así y quiero que comprobéis como estoy rotando vale efectivamente eso es entonces mira voy a ponerle 40 Vale entonces de hecho lo tengo al revés creo bien es al revés pero ahora hago así fíjate me muevo en una dirección que no tiene nada que ver con mi punto de vista hago así vale Ahora sí es al revés pero bueno pero si ahora giro de lado sigo yendo en la misma dirección sigo yendo no no no es que es esto es el over Flow que no tengo overflow y quieras que no pues bueno tampoco vendría mal que dijera un poquito de overflow un poquito de flow sabes un poquito de flow aquí entonces digo html coma Body le digo overflow hidden Y así pues no me molestarán el scroll de la página vale Ahí lo tenemos bien Por tanto Bueno aparte de que le voy a dar la vuelta a todo le voy a decir que todos los signos están mal Entonces esto es menos esto es más Y esto es más con lo cual ahí sí que puedo empezar a operar atención todos en la pantalla porque ahora simplemente lo que tengo que hacer es recordar nuestros conocimientos de trigonometría para movernos en juegos 2D y veréis que todo eso que hemos hecho en juegos 2D a lo largo de esta semana os vais a ver que no lo hemos hecho para nada lo hemos hecho para algo entonces yo voy a decir lo siguiente voy a decir vamos a ver Camera punto position punto x es igual a Campos x creo No claro muy bien Vamos a ver yo digo can postx es igual a Campos x más punto coseno vamos a verlo de Root y ahora digo Campos y Campos Z quería decir es igual al valor anterior más punto sin de rotación y si esto ha ido bien No lo sé vamos a verlo así esto ha ido bien Ahora giro la cámara y yo diría que yo perfecto porque hago así perdón y calma acá sí por esto de aquí claro vale vamos a ver Y es que esto de Aquí lo tengo que poner lo tengo que poner a Dios lo tengo que poner en el momento en el que toco cada Tecla Solo cuando toco cada Tecla Sí pero es que solo voy a tocar cuatro teclas diferentes Mira vamos a verlo hago así ahí no me muevo vale no no está perfecto no sí no pillar rotación eso es vamos a verlo no no Sí claro más puntocom no no es el problema es que estoy avanzando muy poco Bueno vamos a probar cínicos va Vamos a probar a invertirlo vamos a descartar esa opción que puede ser eso no es peor Sí eso también es muy interesante No simplemente cambia la posición Z es igual a Campos Z y la de X así que bueno lo que falta por afinar es esto de aquí Ah claro claro vale Sí sí Mira ya está claro es Campos Z por el seno a ver y Campos Z por el coseno de griego vamos a verlo ahora sí vamos a partirlo por 10 la verdad es que sí que ostras siempre siempre haga lo que haga bien haga lo que haga me voy vale claro ahí es donde tengo el problema Entonces un momentín afino ese código y os lo paso Exacto Entonces ahora simplemente en el en los movimientos hacia atrás hacia adelante pues voy a hacer más igual y más igual lo que he hecho es Campos x es menos igual a el seno de la rotación y Campos Z es el coseno con lo cual ahora si os fijáis ya puedo guardar el de cargar me puedo ir hacia atrás y podemos comprobar como me estoy yendo hacia adelante y hacia atrás en los ángulos correctos tanto de movimiento en x como de movimiento en Z y ahora puedo pegar un paseo y puedo ir por aquí y puedo ir por aquí y puedo ver la parte frontal Uy que oscuro que está esto no Entonces igual lo que hago es recuperar un poquito esa luz ambiental que tenía por aquí vale Y así recargo Y así pues bueno tiramos un poquito hacia atrás y veréis como la parte frontal de la nave un momento en que vaya navegando la parte frontal de la nave pues ya no está tan oscura sino que tiene pues un poquito de luz ambiental para ver un poquito pues no ver lo negro digamos sino verlo un poquito Pues en su dimensión en la sesión de hoy vamos a aprender tanto cosas nuevas como pues cosas aplicadas al 3D pero que ya conocemos de veces anteriores Entonces vamos a entrar dentro de la carpeta voy a entrar dentro de free y js voy a entrar dentro de ht dogs voy a entrar dentro de vamos adentro y js vale Voy a buscar un momento Pointer y aquí está veréis por eso os decía la semana pasada no os líes mucho a trabajar con el ratón y a mover ratón porque lo que vamos a hacer mirar es trabajar con un archivo que tenemos dentro de la librería dentro de las librerías de controles que es el pointerlock Controls fijaos que dentro de examples dentro de javascript tenéis ahí insisto lo vamos a ver durante estos meses tenéis una barbaridad de cosas pero tenéis una carpeta llamada Controls donde yo puedo por ejemplo tener controles para primera persona controles para volar controles para ratón controles para orbitar sí controles para trackball controles para vr esto es lo bueno que tiene usar una librería que al final y más una librería como tri.js que no acaba de salir sino que lleva ya unos poquitos años cada vez tiene más éxito digamos entre los desarrolladores Y eso hace que cada vez tiene más librerías Vale pues hoy quiero usar una librería llamada pointerlock Controls Así que Mirad me voy a copiar esta librería Me la voy a pegar dentro de la carpeta Live donde os acordáis ya tenía por aquí esto y vamos a abrir el ejercicio del otro día el ejercicio donde estamos trabajando con movernos con las flechas el otro día hicimos un cálculo manual de trigonometría Bueno pues os decía no os liéis mucho más con ratón porque el pointerlo control Lo que va a hacer es automatizarnos todo esto para nosotros dentro de la carpeta principal El otro día estábamos trabajando Con qué Cuál es el último objeto con el que trabajamos mape luces No pues voy a crear un archivo nuevo al que voy a llamar pointerlock punto html y este archivo por internet Bueno voy a hacer lo siguiente mira lo que voy a hacer por tanto vamos a verlo lo que voy a hacer es cargo puente reloj por aquí cargo mapeado y luces Por aquí y en primer lugar voy a derivar voy a volcar todo el contenido de mapeado y luces lo selecciono todo lo copio y lo pego dentro de pointerlock y lo pego dentro de pointerlock punto html no está de más También aparte de que arranquemos el champ no está de más que entremos en un navegador y pongamos localhost barra free js barra y pointerlock punto html simplemente para comprobar que al menos de momento tenemos lo mismo que teníamos el otro día y para comprobar si es posible que no tenemos ningún error a las flechas muy bien y aquí tenemos como vemos el otro día la nave espacial muy bien lo único que he hecho por tanto es en primer lugar copiar todo el código de mapeado y luces punto html y pegarlo directamente dentro de pointerlock punto html lo que quiero hacer ahora como os podéis imaginar en primer lugar es cargar la librería de pointerlock Así que digo src es igual a Live y cargo el archivo aquí en live llamado pointerlock Controls punto js lo pego aquí recargo en la pantalla y compruebo como evidentemente por supuesto pues no debe generar ningún tipo de error lo que voy a hacer ahora va a ser simplemente Desactivar bueno Perdona Desactivar no es compatible pueden convivir vamos a ver voy a buscar Pointer voy a buscar el ejemplo de pointerlock aquí está vamos a ver cómo se carga el pointerlock Mirad para ello por tanto para ello por tanto vamos a ver la verdad es que lo puedo usar aquí mira dentro de pointerlock cuando por ejemplo digamos que creo el segundo cubo es decir antes de aparecer en el render lo que he hecho es que me he puesto en la línea que en mi caso es la 117 cuando acabo de poner el cubo y antes de poner el render que ahí se acabaría la función de inicio Bueno pues ahí le digo que quiero un nuevo pointerlock Controls que está espera que te lo digo No mentira ahí No lo voy a poner dame un segundo que encuentre ahora sí vale No hay Sí justo donde os he dicho ahí pongo Controls es igual a New free punto pointerlock Controls de la cámara añado a la escena el control punto get object Y a partir de aquí añado lo siguiente que es la detección de las teclas que me van a servir para poder moverme en esta plantilla ya lo tenéis estoy abriendo el Miss Controls pointerlock que lo tenéis dentro de examples estoy dentro de Miss control pointerlock le digo bar key Down le digo bar que ya pues acopio todo el código añado listners y en principio ya está lo voy a copiar lo pego he copiado Mira por una parte los controles y justo debajo está el key down ojo que se cierra aquí y está el que Jack ojo que se cierra donde pone llave punto y coma además como ya sabemos que el código original del tripunto js Pues tiende a tener muchos saltos de línea también para clarificar el código Me parece muy bien pues lo que hago vale es ahorrar unos cuantos saltos de línea muy bien así que guardo recargo me dará algún error calculo vale no me lo ha dado en principio bien pero vamos a continuar pero de momento tampoco funciona porque tengo que acabar de configurar el pointerlock vamos a verlo Espera que te lo digo no porque el que hace Ya lo tenemos aquí Entonces lo que necesito es esta parte de aquí pointerlock vale todo esto lo voy a meter al principio Entonces el pointerlock lo que hace es detectar si tu navegador Que prácticamente cualquier navegador a día de hoy tiene pointerlock tiene esa capacidad Espera que te lo digo Espera que te lo digo Espera que te lo digo un segundín madre mía voy a copiar todo esto lo pongo en las condiciones iniciales y ahora os lo paso esto las condiciones iniciales vamos a guardar y cargar vale me sobra alguno déjame que lo ponga en uno nuevo vale esto es unid que se acaba a no este y se acaba aquí acabar Aquí acaba este If lo que estoy viendo por tanto es porque aquí hay un punto y coma cuando hay un punto y coma es porque hay una función muy bien vale parece que me falta parece que me falta esto de aquí el recuento interlock voy a volver a copiar esto lo tengo hasta aquí lo pego lo lanzo vale instrucción si es notifine y me falta definir las instrucciones y me falta poner instrucciones y de instructions que por cierto tiene que estar arriba no abajo Y ahora os comento que es lo que he hecho en cada caso volvemos recargamos vale Ahí lo empezamos a tener y simplemente ahora me falta el código que me permita atrapar el ratón una vez que haya Atrapado El ratón es cuando podré empezar a moverme con libertad usando estos pointerlock controles lo que ha añadido está en las siguientes zonas Mirad Por una parte tengo algo de código que he puesto desde este separador o interlock hasta espera hasta este separador pointerlock que está dentro de El document ready está aquí y aquí vale luego por otra parte también he añadido una serie de instrucciones por último he añadido al final del todo este bloque de aquí el primero que ha añadido que es control es igual a New free punto pointerlo Controls de la cámara con las teclas correspondientes y poco más porque el resto de controles ya se actualizan otra cosa que también os digo es que voy ahora a Desactivar la el control de flechas que hicimos el otro día porque el control de flechas un poco machaca al control de flechas que tiene el Pointer los controles Así que el control que hicimos el otro día el key down lo voy a mutear porque me da pena borrarlo también os digo que como el proyecto dio es una copia del otro día pues tampoco pasa nada porque tenemos el código guardado del otro día así que Si volvemos al 3D vamos a ver ahora voy Si volvemos al 3D Bueno lo primero que puedo observar Es que ya me puedo mover con el ratón me falta moverme con la cabeza O sea me falta moverme perdón con las flechas quería decir vale pero poco a poco ya tenemos algo en pantalla vamos a verlo esto por aquí Ok correcto las pero creo que será porque tú no has desactivado el código de las flechas que hicimos el otro día o sí pero yo ahora justo después he desactivado el código del key Down claro entonces vamos a ver voy a continuar ya os digo voy a continuar copiando y pegando algo de código vamos a verlo para el siguiente ejercicio que quiero hacer casi vamos a acabar antes haciendo al revés haciendo que la montaña vaya a Mahoma en lugar de Mahoma la montaña Así que voy a hacer lo siguiente Mirad voy a el Miss Controls pointerlock me lo voy a llevar a HP dogs y js lo voy a llamar por interlock 2 me lo voy a abrir con el editor ya sabéis es el Miss Controls pointerlock que tenéis dentro de free punto js abro pointerlock 2 y claro ahora tengo que satisfacer todas las dependencias quiero decir con esto que este archivo depende del archivo free punto ming.js Bueno pues eso está en leap depende del archivo js Controls pointerlo Controls Vale pues eso está en el libro Entonces si todo ha ido bien si todo ha ido bien Ahora cargo pointerlock y con lo cual puedo empezar a partir de ahí con la siguiente parte que os quería enseñar que es la parte de carga dinámica de objetos Así que confirmad que habéis creado este archivo llamado pointerlock 2 punto html que podéis entrar y salir del pointerlock lo que hace es ocultaros el cursor y permitiros moveros libremente por el espacio y al pulsar escape salir y aparece esta pantalla de bienvenida esta pantalla de introducción que te dice un poco cómo debes jugar al juego esta escena tiene ya creadas unas cuantas cajas nosotros ahora de hecho lo que haremos es empezar a Añadir nuestra propia geometría entonces para comprobar que podemos Añadir nuestra propia geometría fijaos que en este caso tengo un bucle for Aquí sí que parece que quiere funcionar correctamente y la malla en este caso digamos que en este caso se están creando 500 cajas vale con lo cual la posición de las cajas viene definida precisamente por el más punto Random sí bien ves es una malla Entonces se habló Blender por ejemplo y creó un objeto mira Yo vengo a Blender y creo un cubo entonces este objeto tiene una consideración Dual en estos momentos y es que por una parte es una malla una mes y por otra parte es una primitiva de Maya una malla finalmente es un conjunto de vértices Unidos por aristas encerrados por caras eso es una malla en este caso esta caja es una primitiva Porque tú cuando la creas no necesitas decirle vértice a vértice que es cada cosa sino que directamente ya lo sabe una caja es una primitiva una esfera es una primitiva un cilindro es una primitiva pero no todas las mallas se crean a partir de primitivas sino que tú por ejemplo te puedes crear una malla manualmente vértice a vértice cómodo no es pero si lo sabes hacértelo porque no te lo puedes hacer Mira por ejemplo vengo yo aquí déjame que me cree un objeto de prueba déjame que lo mueva un poco ya ahora sí lo muevo entro y digo mira y digo me hago un vértice aquí y un vértice aquí y un vértice aquí y un vértice de aquí y ahora me cojo estas caras déjame que eliminen estas y ahora vengo a estas caras y mayúsculas F Perdona F y las cierro yo me he hecho un plano con creando y me yo manualmente los vértices pero ahora vengo aquí y digo mira y uno más entonces ahora cojo estos dos vértices y digo Qué pasa si cojo estos cuatro y le doy a la f Pues que me cierra una cara y ahora creo y uno por aquí madre quieto y uno por aquí y uno por allá dónde están yo que sé Vale pues los muevo al sitio los muevo al sitio los muevo al sitio los muevo al sitio y digo y con estos de aquí Me cierras una cara y con estos de aquí Me cierras otra una caja patatera evidentemente y con esto me cierras otra y con esto me cierras otra y yo al final lo que tengo es un cubo paradero pero he hecho a partir de vértices entonces lo que he hecho antes es crear un cubo a partir de una primitiva lo que hacíamos el otro día es era igual a free punto js.v.js ya lleva primitivas Pero por qué no ahora voy a ver pero por qué no también te puedes crear tu propia geometría vértice en el caso del código que tenemos ahora mismo Pues si me fijo fijaos que tengo una free punto material donde lo que estoy haciendo básicamente es definir Cuál es la posición x y z de cada una de las mallas y por aquí arriba tengo freebox Geometry pero en este caso el free punto mes en lugar de haber estado creado por una caja podría haber estado creado por la definición igual que están creando la definición manual de cada uno de los colores de los vértices podría quedar crear la definición manual de cada una de las líneas para qué te imaginas que podría servir esto Pues mira supongamos que hago un videojuego en el que tengo una isla sabes rollo Minecraft pero mucho más realista os acordáis cuando hicimos el juego isométrico ese horrible juego que tenéis olvidado y borrado de vuestra memoria e hicimos un generador de terreno os acordáis que en primer lugar hicimos un generador que cogía a bloque y lo movía arriba y abajo y luego yo os pasé el código de un generador que miraba los bloques que tenía alrededor y suavizaba para tener montañas y tener vallas y tener lagos Pero cómo sería esto aquí ya no tenemos bloques como el isométrico aquí tenemos mallas poligonales Pues en un momento dado tú por ejemplo podrías definirte vértice a vértice como es un terreno y decir me hago una rejilla de vértices vértice lo quiero subir y lo Quiero bajar y luego con esos vértices quiero cerrar una malla poligonal por eso lo que quiero decirte es que no es lo más común tener que trabajar con mallas verdes y a vértice sin embargo es muy bueno que en un momento dado sepáis que podéis hacerlo en el 95% de vuestro tiempo lo que Vais a estar haciendo es o bien modelar vosotros en un programa 3D o bien que un grafista modele por vosotros en un programa 3D e importando directamente aquí los modelos pero en un 5% de las veces también conviene saber que vosotros paramétricamente proceduralmente podéis generar aquí modelos dentro de 0.js a una caja o lo que sea vamos a comprobar que podemos meter aquí nuestras propias cosas por tanto Yo vengo aquí y digo Mira mi material es igual a New free punto bueno el fondo no está mal No yo prefiero de momento el lambert ahora te digo lo que es el phone ahora saco un momento la Wikipedia no entiendo y te digo las diferencias especular nada no no esto nada y digo color es igual a 0 x fff0000 o sea color rojo ahora digo momento un momento que te lo digo un segundo no os lo vais aquí y digo mi geometría es igual a New free punto boxiquiometry punto 2020 me vale Así que ahora vamos a verlo ahí está y ok mesh es igual maya es igual a New free punto mesh donde cargo mi geometría y le pongo mi material y ahora digo que de momento al menos de momento esta caja va a estar en cero esta caja va a estar en cero Y esa caja va a estar en cero Así que options punto de la malla y ya está si todo ha ido bien un momento déjame comprobarlo Ah muy bien Espera bien Maya Maya y Maya muy bien así que recargo Y si todo ha ido bien pues Aquí tengo una caja de color rojo que está puesta Claro está metida medio en el suelo vale Ahí va tú fíjate el terreno como es Fíjate que ese terreno es aleatorio de hecho ves Ese recorte de la caja por si ahora recorto recargo Fíjate que el recorte de terrenos diferentes y recargo y el corte de terrenos diferente por qué Pues porque en este ejemplo hay el terreno hay está es generado mediante un algoritmo aleatorio bueno de momento poner esto simplemente lo que quiero vale se comprobéis que aparte de los objetos que haya no te digo que no pero podemos crear los nuestros propios antes de ir con la siguiente parte vamos a bajar un poco sobre lo que es el concepto de lambert de fondo y de Blind y de otros tipos de material que hay en free punto js y en cualquier otro programa de infografía 3D entonces mira Yo vengo por aquí si yo abro Maya y en este ordenador creo que no tengo el Max bien instalado si abro el maya y hago un nuevo material veréis que uno de los materiales de hecho el que viene por defecto en maya es el sombreador lambert entre el estudio Max que aquí no lo puedo abrir Me acabo de acordar está el sombreador Funk hecho en maya creo que también está el phone estoy abriendo un momento Aquí está OK fuera vale yo creo vengo por aquí creo un objeto polígonos creo una esfera y ahora le quiero poner un material con lo cual vengo aquí a Windows a rendering editors vamos a verlo dónde estás por aquí y anime hecho en rendering editors y le digo que por ejemplo creo un hypershare es como un hiper editor de materiales dentro de malla con lo cual Fíjate que ya tengo por aquí lambert uno y yo incluso puedo pulsar botón derecho y quiero decir que quiero crear uno nuevo y del uno nuevo pues este puede ser en materials no te rayes aquí materials pues fijaos que puedo poner anisotrópico tengo lambert tengo phone tengo otro que se llama Blind y luego tengo otros específicos como el Ocean shader que estas especifico de malla tengo el stingray que es uno que quiere ahora implantar autodesk Si lo consigue uno pues ya veremos pero En definitiva lambert phone son diferentes patrones de sombreador en primer lugar vamos a meternos dentro de free punto js materials ya vamos a la documentación y dentro de materiales también lo tengo igual en la documentación dentro de materiales tengo materiales tales como por ejemplo lambert o por ejemplo phone tengo materiales como materiales de línea para hacer juegos en plan dibujado a mano y mediante plugins puedo meter más tipos de materiales lo primero que os voy a decir es que la palabra material es incorrecta la palabra materiales falsa realmente la palabra correcta es sombreador shader lo iréis muchas veces a partir de ahora la idea Está en que un material es una porción digamos de realidad que tiene color que tiene rugosidad que tiene masa que tiene resistencia a la torsión que tiene una serie de propiedades físicas que nosotros no vamos a poder simular ni de lejos dentro de cualquier programa 3D lo que nosotros tenemos es un algoritmo informático llamado shader llamado sombreador que simula un material pero simula únicamente el aspecto del material vale por eso aunque ahí veáis que pone basic material realmente material es una palabra alias para decir shader sombreador ahora bien si yo vengo por ejemplo y digo phone shader Wikipedia encontraréis que el sombreadophone no es de 3.js sino que es común y básicamente corresponde a una persona llamada Buy tú on phone que en un momento dado en los años 70 en el 73 dijo pues mira A mí se me ocurre que de un material si pongo esta formulita represento la difusa la especular que no se representa en el lambert y por otra serie de parámetros Como por ejemplo el relieve y esto con estas estructuras matemáticas parece un material pero luego por ejemplo tengo la merchading Wikipedia Bueno listo como un algorit también me vale Aquí tengo phone tengo guro tengo bling phone tengo Cup torrents que se está entre Studio Max tengo lambert tengo orden nayarbling tengo phone también entro en la página de lambert y básicamente pues una vez más Esto está inventado bueno porque obedece a la ley del coseno de lambert vale originalmente por esta persona descrito en 1760 y luego pues vendría a alguien y lo convertiría en matemático o sea en un modelo matemático informático En definitiva Qué es phone y que es lambert pues son diferentes maneras de interpretar un material cada manera diferente tiene unos parámetros o tiene otros parámetros y por tanto cada modelo del sombreador es bueno para representar un tipo de superficie u otro tipo de superficie vale de momento por tanto trabajamos con lambert que es un modelo que espera que he medido aquí de pestaña que es un modelo que no tiene ya Que de momento no quiero trabajar con reflectividad No quiero trabajar con un modelo digamos que me dé más de lo que realmente necesito pues os preguntaba Cuántos modelos habéis usado en los deberes de este fin de semana Simplemente porque al final os tenéis a la idea de que cuando metes cinco o seis modelos 10 modelos Oye Igual hasta 20 modelos pues tú simplemente vas duplicando líneas de código vas cargando archivos obj y ya está pero claro llega un momento que puedes empezar a pensar Bueno pero cuando haga un videojuego digamos ya vemos lo profesional pues ahí pueden haber 100 objetos diferentes 200 objetos diferentes yo me voy a morir ahí escribiendo líneas de código para cargar archivos obj pues La respuesta es que no lo que quiero enseñaros en la clase de hoy es la versión tridimensional de algo que hemos hecho hace pocas semanas os acordáis que hace pocas semanas os enseñé a con un código php Eso sí tiene que ser php no puede ser html ver el contenido que tenía una carpeta y poblar en un juego 2D todo lo que tuviera esa carpeta os acordáis más o menos os acordáis Exacto Pues sí no pero no pasa nada ponga la traducción html del php hay trucos Exacto Entonces lo que vamos a hacer es precisamente el no tener que preocuparnos de empezar a nombrar objeto a objeto de los objetos que estén en una carpeta sino que php va a automatizar ese proceso por nosotros No eso Tendremos que hacerlo con Blender ahora vamos a verlo primero mirar el ejercicio y luego veréis la cantidad de variaciones que puede tener el ejercicio dime vale el movimiento del Ratón vale en este archivo Mira se captura en varios lugares yo Por una parte lo que hago Dentro de este ejemplo Es que creo una Aparentemente variable y dentro de esa variable le digo que hago un pointerlock dentro del documento pointerlock Element es el documento estándar el perdón es el elemento estándar el elemento que tendría que estar soportado teóricamente por todos los navegadores a día de hoy sin embargo como los de mozilla son un poco especiales los de mozilla hasta que se convierta en el estándar tienen su propio elemento pointerlock que es moth pointerlock Element y los que usan el navegador web kit que en este caso es Chrome y el Safari son webkit pointerlock Element Así que dice asegúrate de que Hub pointerlock te devuelve positivo en el caso de que detecte que tu navegador que tiene pointerlock Element el estándar o bien pointerlock Element el de firefox o bien webkit pointerlock Element el de webkit a continuación tú dices si esto te ha devuelto cierto en ese caso vamos a hacer unas cuantas cosas si esto no es cierto aquí al final del todo vale cojo la llave me bajo aquí al final de la llave y digo si esto no es cierto en las instrucciones pongo tu navegador parece que no soporta el pointerlock bien De hecho no sé ahora mismo si este Internet Explorer que tengo aquí lo soporta Espera que te lo diga a ver si hay suerte no eso George browser dassensing tus aportar pointerlock Api porque internet Como tantas cosas en la vida pues va un poco a su rollo vale Y no soporta todo lo que soportan los demás bien eso en el caso falso en el caso verdadero yo lo que hago es decir lo siguiente cuando pointerlock change cuando cambie el estado de pointerlock que es el estado de pointerlock Pues mira yo vengo aquí cuando yo no cuando yo estoy viendo mi cursor es pointerlock falso pointerlock es Me bloqueas el Pointer Me bloqueas el cursor cuando yo hago aquí y entro esto es pointerlock verdadero cuando yo escapo esto es pointerlock falso Por cierto que este mensaje de pulsa es para mostrar el cursor es un mensaje que me provee el navegador yo no lo puedo controlar Vale entonces en este caso lo que hago es decir Bueno pues si es cierto que el pointerlock está en el elemento y el elemento es el body porque lo tienes aquí arriba en este caso si es cierto que me vas a bloquear el ratón en ese caso me activas los controles y en ese caso de controles en enable es igual a tu controles es una variable ahí arriba en caso contrario es que está saliendo si esto no es cierto en ese caso me desactivas los controles esto es fíjate que yo muevo El ratón y no muevo el cursor porque este es Controls es igual a Falls Fíjate comento y ahora recargo entro vale Y ahora salgo ves como sigo moviendo el fondo Por qué Porque acabo de comentar con otros Universe Entonces yo no te digo ni que lo hagas ni que no lo hagas yo te digo esta línea hace esto porque no un juego dado te puede interesar que cuando yo salga no pueda hacer nada más efectivamente o que cuando salga pues se vea un poco como se sigue moviendo la cabeza aquí realmente el pointerlock change automáticamente Sí esa maravilla detecta por ti cuando has hecho el clic no tienes tú que definirlo manualmente digamos Vale entonces seguimos por aquí abajo entonces digo vale bueno por último una un poco de programación defensiva si el pointerlock da error pues en ese caso en instrucciones no pongas nada vale instrucciones es igual a nada el pointerlock coge automáticamente no no eso sí eso sí que está por ahí un momento no entiendo sí no en este código no en su librería que es esta de aquí exacto No aquí no lo busques No mira mira yo aquí tengo el si mueves hacia arriba realmente es esto de aquí es el key down es decir por qué tengo mapeadas la W la a la s y la d Pues en este caso el sistema me permite mapear las teclas que yo quiera pero lo importante Mira es que Qué es move Forward pues muy Forward es una variable que me proporciona el pointerlock Controls que es muleff pues es una variable que me proporciona el pointerlock Controls es decir todo esto de aquí realmente viene definido el comportamiento del pointerlock sale la implementación eso está en el navegador pero el comportamiento viene definido por esta librería que es pointerlock Controls que yo puedo cargar No es que sea demasiado extensa sino que prácticamente hace lo que hicimos nosotros el otro día es decir trabajar con el movimiento x el movimiento y calcular algún seno Y algún coseno por ahí que estará calculando no lo estoy viendo ahí bueno rotación Euler vale también y eso con lo cual si quieres buscarlo Probablemente lo vas a encontrar por ahí sí pregunta sí no no vamos a ver la cámara la hemos creado nosotros a valerse la hemos creado nosotros normalmente por aquí en la función inicial tengo Camera que es igual a New free punto perfectic Camera igual que nosotros la creamos el otro día con lo cual yo ahora digo que Controls es igual a un free punto pointerlo Controls en la cámara O sea la cámara automáticamente se convierte en un jugador primera persona lo coge efectivamente es algo parecido realmente igual efectivamente pero está ahí metido dentro de pointerlock Controls efectivamente vale sí bien Eso es lo que llevo meses que cuando usas Pues si vas a estudiar esto desde el punto js Imagínate lo que Vais a estudiar en un real en Unity Este es un punto medio Este es un punto en el que estamos usando una librería pero todavía podemos meter bastante de nuestro código Pues cuando llegamos a un real será un paso más allá será un gran framework donde tienes todo librería y meter nuestro código será bastante complicado pero a cambio tendremos un montón de cosas divertidas dime si hace falta sí o comentar por aquí al en el lateral ya no no y tenías hacer proyectos street.js x mess y lo tienes en la cabeza y por mucho que lo tengas en la cabeza luego igual llega verano esas un par de meses sin tocarse y en septiembre esto sí me acuerdo de cómo iba esto pero de memoria no vale o sea si son muchas cosas así y lo que voy a enseñaros a continuación por tanto es un método de poder automatizar la carga múltiple de objetos carga múltiplo de objetos que no os impide luego vosotros poder cargar manualmente objetos y poder mover manualmente objetos O sea no limita en absoluto Mirad dentro de mi carpeta atención me voy a crear una subcarpeta llamada escenario además si esto es el archivo pointerlock 2.html me voy a crear un documento nuevo llamado Pointer lock 2.php ya que lo que voy a hacer a continuación requiere un poquito de php por supuesto ahora voy a abrir pointerlock 2 punto php y le voy a pegar el código de pointerlock 2.html lo que hago por tanto es que copio y pego el código de pointerdoc pointerlock 2 punto php ha recogido el código dentro de derivado de recibido de por interlock 2.html lo que quiero ahora por tanto es traer el código que usamos el otro día para cargar uno bj Mirad atención me voy antes del render me vengo aquí y ahora digo Ahora vengo aquí y cargo mis propios objetos de manera automática abro php Y preparo algo de código en php Dónde estaba el código que hicimos el otro día para revisar un directorio pues no me acuerdo vamos a ver por fecha de modificación free y js plataformas objetos no para hacer muy bien el muy bien Ahí estás Entonces me voy a Index punto php y efectivamente Ahí está y digo en pointerlock 2 punto php digo directorio cuál es escenario no escenario lo he cogido de el proyecto detén el que era el perot el archivo Index punto php y este Index punto php es el que tenía esta parte de aquí en la etiqueta Main el que la que cargaba todos los memes de la carpeta memes generados Vale pues digo el directorio es escenario y ahora digo escanéame el directorio y digo para cada uno de los archivos para cada uno de los archivos eco // bajo y digo barra bajo archivo quiero Que de momento aparezca como un comentario Alex mira como diciendo para qué es esto no no es que me acabo de crear una carpeta específicamente para este fin llamada escenario para comprobar como la vamos poblando poco a poco podría haber sido la carpeta DJ Sí claro por supuesto entonces me vengo ahora a Blender hago un archivo nuevo y digo me dejo solo una caja me dejo solo una caja ahora pongo el código otra vez y atención exporto en vj exporto en obj en escenario y esto se llama caja punto obj Quiero el mtl no pero no me dejas right materials No quiero right materials caja punto bj y ahora sí Todo ha ido bien os pongo el código aquí hasta el código ahí si tú te ves bien recargo pero evidentemente cargando el archivo php y si me voy al código efectivamente hay que mirar el código para comprobar si ha funcionado de momento si me voy al código lo que observar es que si todo ha ido bien dice caja punto obj y punto y dos puntos efectivamente vale Así que hago un contador y aquí le pongo muy bien contador más y le digo solo sí contador Es mayor que 1 solo en ese caso ejecutame este código bien con lo cual guardo recargo y vemos como ya no está el punto el dos puntos sino que esta caja o bj lo que es lo mismo digo ahora voy a cargar el objeto ese de ahí ahora voy a cargar el objeto caja obj sabes que es lo divertido pues lo divertido Es que yo ahora vengo a Blender dando un segundo Ahora vuelvo a poner el código Yo vengo a Blender y digo Sí pues nada Ahora quiero una esfera Así que exporto el obj y esto se va a llamar esfera y ahora que quiero un cilindro exporto o bj y lo llamo cilindro Y por último voy a poner un toro y exporto en obj y lo llamo toro y lo que ocurre por tanto es que si ahora recargo podremos comprobar que dice ahora voy a cargar el objeto caja punto obj ahora voy a cargar el objeto o cilindro punto vj ahora voy a cargar el objeto esfera punto obj y ahora voy a cargar el objeto toro punto obj eso que quiere decir Que de momento Únicamente con un comentario pero ya soy capaz de que el programa se vaya esa carpeta revise todos los objetos que hay y me diga exactamente cuántos hay y para ahora a continuación hacer alguna operación con ellos por tanto ahora si ya estoy comprobando como puedo entrar dentro de un directorio y dentro del directorio revisar objeto a objeto voy a recuperar el código que hicimos el otro día el código que tenemos dentro de era obj html no sé el que carga un archivo bj o bueno me ha pegado de luces mismo voy a cargar mapeado de luces pues me voy al código de mapeado y luces tengo por aquí el código que carga una textura ahora cargamos la textura también y digo lo siguiente vamos a verlo bloque de 8 peones no puede ser esto no me voy a ir a ajedrez Bueno quiero uno pero que luego realmente va a ser varios mira ahora verás vale mira voy a esto os acordáis del ajedrez el Peón Más que nada porque en el Peón veo perfectamente dónde empieza donde acaba no me acuerdo Tampoco porque al principio hicimos un Ford hicimos un bucle de 8 peones bien entonces mira me cojo ese ajedrez Le digo Bueno mi material es igual a este material de aquí vale Así que me voy a pointerlock 2 ahí está mi material es este mi material rojo ya que estamos y digo copio el Peón se va a llamar peón lo pego aquí vale en principio parece que no ha funcionado pero os digo yo que sí a cuidado porque además vamos a ver el archivo del Peón atención miradme el archivo del Peón tenía comillas sencillas si el archivo del Peón tiene comillas sencillas quiere decir que en php voy a usar comillas dobles para no colisionar y ahí comillas dobles Ya sé que parece que da error pero realmente no da error entonces vengo aquí y ahora digo quiero de la carpeta obj cargar el archivo punto sin el obj y el material va a ser mi material rojo si todo ha ido bien un momento no os mováis esto lo quito me va a dar error evidentemente porque me hace falta el loader bien porque en este caso headit no está interpretando correctamente estas comillas cree que aquí estoy todavía dentro de javascript no se ha dado cuenta de que realmente estoy dentro de php por la misma razón de que no me está coloreando en apariencia correctamente el la variable php esto igual lo cargas notepad Plus o en otro editor y lo abre bien o no pero eso me da igual lo que me importa no es el coloreado lo que importa es lo que detecte el servidor lo que interprete el servidor Bueno me ha dado error del loader por tanto como os podéis imaginar tengo que cargar el loader Entonces le digo manager es este de aquí Espera que busque aquí cosas digo manager es esto lo voy a poner aquí para que lo tengáis todo junto y luego louder on progress y un error vale si todo ha ido bien Yo creo que sí recargo vale free punto obj loader is nota constructor toma ya vale En qué línea en la 343 que no eres un constructor Ah claro muy bien porque no es un constructor Pues porque ajedrez punto php atención salud estaba preparado para recibir el v.j loader pero esa librería o bj-loader la tengo que cargar también en mi proyecto tenía el serim de Punto ming y el pointerlock pero no tenía lo bj-loader por eso me dice que no es un constructor Porque no reconocía como constructor vale recargo Y si ha ido bien bueno me dice que no reconoce los objetos pero eso es ya porque tengo un pequeño fallito de código y es que no es vj sino que es escenario Así que finalmente si todo ha ido bien material rojo es no define entre 5 es mi material rojo muy bien vale con lo cual si todo ha ido bien aparte de la caja la habéis visto ahí veis aparte de la caja veo que ya empiezo a tener una serie de objetos en la pantalla aparte de que esa caja roja es la que había creado yo aquí arriba la de mi material que todos tienen un poco de rollos Dime ya quitada Espera que sí Ah es que están en el suelo vale Si no pasa nada déjame un segundito ahora pongo el código déjame un segundo entonces digo dónde estás son check Pero espera hay eso es pues object punto position punto Y es igual a 20 lo nuevo creo que no hay es más están arriba así no pues claro es que la escala de Esto vale me decías Sí claro que tiene las normales mal calculadas normales los vectores normales verás si me voy a aprender un momento resulta que cuando yo hago un cilindro Ahí está esa cara parece que está apuntando hacia mí pero realmente está apuntando al revés por tanto en Blender da igual que una cara esté hacia fuera o hacia adentro porque finalmente tú la ves por los dos lados pero ni en free punto js ni en un real ni en Unity ni en cualquier engine eso pasa así por tanto simplemente Tendría que ir a Blender y asegurarme que esa cara está bien volteada está por el lado correcto Sí no te preocupes por eso hay en Blender hay un comando que es ver normales pero también te digo que eso no es una cosa vuestra sino que es una cosa de los grafistas vale Pero aún así os enseñaré a controlarlo para que cuando trabajáis con una fiesta se puede hacer un grafista a tus normales están volteadas vale bien la idea Está en que yo cuando reviso una carpeta puedo hacer lo que quiera con esa carpeta Entonces yo por ejemplo ahora voy a deciros Imagínate que dentro de escenario si no queréis que las posiciones de los objetos sean las que Blender os diga sino que queréis vosotros mismos poder identificar esas distancias yo digo Vale pues por ejemplo me creo un archivo llamado caja punto posición la extensión posición Me la acabo de sacar yo de la manga entonces guardo este archivo lo abro dentro de headit y digo hola o digo mira tu posición será 10,20,30 Imagínate que tiene esas coordenadas Así que guardo pero claro cuidado que diréis que tendría Ahora sí intento ejecutar este código un error Por qué así en el navegador recargar porque hay un archivo que no puede tratar como objeto entonces vengo por aquí vivía aún así ha habido suerte inspecciono consola hay un error y ahora sí lo he cogido bastante bien y dice este archivo es una pero os digo trata bastante bien en cuanto a que no se ha parado el juego que podía haber separado Sí Exacto pero muchas veces no tiene tanta Bueno ya veréis pero vale Ok yo lo que necesito ahora por tanto es decir lo siguiente vamos a ver en este pointerlock 2.php lo primero que voy a hacer Cuando cargue un archivo es que ahora voy a cargar el objeto y digo nada digo antes que nada voy a comprobar si el archivo es un obj o no entonces para ello digo lo siguiente extensión es igual a archivo str replace reemplazo el Perdona explode quería decir explode php explode vamos a verlo dame un segundo delimitador y String Perfecto entonces es explode coma y el String de 1 la extensión por tanto me va a dar que cojo el nombre del archivo que es Caja punto obj y le digo explota Melo en una matriz con el punto marca El antes y el después y quiero quedarme con el después matriz 1 el 0 es el antes el uno es el después así que digo solo si es cierto que la extensión es obj contador Ok aquí solo si es cierto que la extensión es igual a obj en ese caso cargo el objeto damos Bueno ahora arreglaré llaves recargo ya así A veces echa de menos Sí y daros cuenta como Mirad lo veis ahí como ya no tengo el error Por qué Pues porque lo que estoy haciendo es en cuanto te encuentres un objeto que no tiene la extensión vj de ese objeto pasa simplemente quiero únicamente quiero que me cojas los objetos que tienen la extensión obj primera prueba superada ahora lo que quiero en el siguiente vídeo es decir Bueno ya además cada objeto que cojas Mira si al lado tiene un archivo llamado posición con lo cual si no tiene posición pues Pon la posición que tú creas conveniente pero si tiene posición ponle la posición que realmente debe tener el archivo déjame que esto ahorra un par de líneas y ahí lo tenéis ahora lo que quiero es comprobar aquí en la posición si es cierto aquí me hago esto pim pam y ahora digo ahora compruebo si es cierto que hay un archivo de posición entonces vengo y digo lo siguiente vamos a ver php check y file exits que es básicamente exist eso file existe eso les digo entonces digo si es cierto extensión no perdón explode de archivo de 0 a ver punto posición entonces digo atención entonces digo eco este archivo tiene posición vamos a verlo vamos a ver si funciona le doy a recargar no tiene errores veo el código Fuente Y si veo el código fuente y todo ha ido bien vamos a verlo digo caja obj digo cilindro bj momentino lo copiáis ahora voy vale caja obj cilindro obj esfera obj y toro obj Y si todo ha ido correctamente vamos a ver espera que te lo diga escenario caja caja posición no me ha dicho nada vale vamos a ver sí Claro pero tiene posición espera no que me falta un puntito claro recargo momento recargo cilindro dame un segundo caja posición Ok vale Y ahora lo que quiero comprobar es si es cierto que dentro de escenario barra Explore Ahora sí Mirad fijaos que en la caja pone este objeto tiene posición y ni en el cilindro ni en la Esfera ni en ninguna otra parte pone este archivo tiene posición es decir lo que hace esta estructura de control es comprobar si es cierto que hay un archivo de posición que tiene el mismo nombre que el archivo obj es decir se va a la caja y dice es cierto que si tú te llamas caja hay un archivo que se llama en escenario caja punto posición Sí pues vamos a hacer algo con ello No pues Entonces no vamos a hacer nada con ello porque no tienes posición vale Y por tanto eso me va a permitir especificar la posición manual de esa caja un momento acabo el código os lo paso y saltamos la parte de práctica pero Mirad veis la caja donde está ves Dónde está con respecto a sus compañeros vale lo veis bien pues ahora un momentín php Ruiz txt contents realmente aquí aquí aquí pero he esperado un vale el archivo que quiero abrir es este lo quiero leer en modo lectura no quiero escribir vale eco Fried y ahora digo valores es igual a esto y voy a poner mil por tanto Ahora vengo y digo x es igual a separado es igual a Explorer con la coma del valores y ahora digo x es igual a separado de cero y es igual a separado de uno y z es igual a separado de dos lo cual me permite Finalmente y al final de toda la jugada decir eco object position x es igual a x object position y es igual a y object position z es igual a Z si todo ha ido bien un momentín dejadme comprobarlo si todo de bien recargo vale Y me dice atención ahora le bajo la línea object posición x es igual a 10 object position y es igual a 20 object position etcétera es igual a 30 comprobamos como atención todos a la pantalla comprobamos como efectivamente le había puesto 10,20,30 Vale pues simplemente lo único que me queda esto lo bajo simplemente lo único que me queda a punto y coma vale le voy a recargar y quiero que veáis como la caja está por ahí donde está el resto de objetos igual sí es verdad vale así Qué pasa por aquí porque estáis aquí abajo Claro Sí es que les he quitado a todos el resto vale Si no pasa nada de momento dejarlo así os acordáis que antes lo había subido todos 20 Pues eso lo he quitado lo he movido Vale pues lo había puesto aquí abajo bien os voy a poner aquí arriba y es igual a 20 y así lo tendremos de vuelta vale daros cuenta que tengo esos tres objetos ahí pero la caja está en otra parte la caja la he movido con lo cual bueno en principio y ahora os dejo copiar y con esto pasamos ya la práctica pero en principio digamos que somos un poco esclavos En principio de la posición que nos da Blender para los objetos pero realmente no es cierto porque o bien mediante código o bien mediante una micro base de datos porque esto no deja de ser una base de datos en el sistema de archivos podemos decirle manualmente a lo largo de estos días siguientes vamos a poder decirle la posición de cada objeto el material de cada objeto la textura de cada objeto el comportamiento de cada objeto es animado no es animado tiene material o no tiene material vale vamos a poder editar un montón de propiedades del objeto que nos hayamos casado con php no quiere decir que vayamos a perder control sobre nada más bien al contrario vamos a ver qué es la velocidad en este proyecto la velocidad evidentemente como te puedes imaginar es la velocidad que tú vas a caminar Entonces en este caso cuando ponemos velocidad automáticamente se le está asignando una nueva instancia de un elemento llamado vector free quiere decir que en ese momento velocidad ya no es una variable sino que es técnicamente un objeto que hace las veces de matriz y hace las veces de matriz porque vector free va a tener ahora tres elementos de posición tres elementos de rotación y tres elementos de escala si quieres verlo mejor también te digo quiero decir tú dices tú no dices esto y nosotros no lo creemos pues no Simplemente pones free punto vector free te vas a la documentación y podrás ver exactamente los vectores que los componentes que tiene un vector free vale en este caso como te puedes imaginar x y z más una serie de métodos ya que como te pues es un objeto bien Por tanto ahí simplemente inicializo un vector me vengo por aquí abajo y digo si es cierto que puedes saltar tu velocidad en y propiedad del objeto es igual a 350 yo digo demasiado voy a poner 150 Así que vengo aquí recargo y ahora podrás comprobar como salto menos vale salto menos pero muy rápido ahora vamos a tocar eso también vale con lo cual aquí lo que hemos tocado es la altura inicial la velocidad inicial vale con lo cual me vengo por aquí abajo a la siguiente aparecen de velocity y ahora ya nos vamos al animate es decir a la función de Loop y digo la velocidad x es menos igual a la velocidad en x por 10 por Delta El delta es un factor de hecho lo tienes aquí vale pero básicamente este 10 es mi velocidad Así que momentín vale si muforward mira que me da rabia los shifts y las llaves voy a poner la y es para el Salto entonces de momento quiero moverme recargo fíjate ahora lo rápido que voy lo ves vale con lo cual ahora digo sí está encuentros lo control espera aquí hay valor estaba esto estaba a 100 muy bien Adiós vale realmente vale Y con 20 Fíjate que de repente me muevo más lento no sé por qué le he puesto 200 es más rayado Pero vale aquí lo que estamos haciendo ahí lo tienes de hecho es especificar la fuerza de la gravedad y por tanto en este caso cuando salte cuánto va a tardar en bajar ves que salta muy rápido baja muy rápido pues yo digo la fuerza de la gravedad lo que voy a hacer es ponerla a dos si la fuerza de la gravedad baja de 9.8 a 2 te podrás imaginar que ahora El Salto efectivamente vale eso es lo que hay claro la masa en este caso viene fijada para todos los objetos a 100 lo cual es muy interesante porque eso quiere decir que si es un parámetro que ahora mismo está ahí suelto yo lo que puedo hacer en este caso no es por objeto es por jugador yo lo que puedo hacer es hacer que la masa esté en un archivo txt en el sistema de archivos no lo voy a hacer ahora pero simplemente para deciros que con lo mismo que he hecho Bueno si yo por ejemplo peso 100 kilos Pues digamos que en la luna salto así pero si yo peso 1000 kilos pues como te puedes imaginar falta de menos Entonces si guardo recargo Y fíjate que si peso 1000 kilos pues Puedo saltar menos con la misma fuerza vale Así que lo voy a dejar en 100 sigue pero no tu pregunta no entiendo la pregunta dime Sí claro está sí sí sí Espera que te lo digo claro eso estoy viendo a ver Espera esto aquí se lo está diciendo Mira vamos a hacerlo no pasa nada no os preocupéis Sí eso Mira velocidad entonces velocidad de momento es un vector pero lo importante es que yo vengo ahora al final hasta ahora no es una cámara hasta este punto ahora mismo No es una cámara es un vector es un vector con múltiples componentes ahí abajo ahora verás hasta este punto es un vector hasta este punto es un vector pero vengo aquí abajo mira Translate y digo de los controles toma el objeto que es el control es el pueblo control es los controles y digo Translate x velocidad su x trasládamelo a su velocidad y translándolo a su velocidad Z vale Y por último digo si posiciones menor que 10 o sea no te puedes caer Más allá de 10 velocidad es igual a cero es una colisión manual con el suelo si todo ha ido bien y yo creo que sí necesito todo bien guardo recargo y me puedo seguir moviendo y el juego sigue funcionando Exactamente igual aunque le haya cambiado el nombre a la variable pero sobre todo lo que tienes que entender es que hasta este punto velocidad no es nada de la cámara es simplemente un vector tridimensional por ahí flotando en el espacio y en este punto es donde dices la posición de la cámara es el vector este que estoy usando todo el rato en la clase de hoy hay dos cosas que me gustaría ver que son dos cosas que van a mejorar bastante aquello que podemos hacer con free punto js lo voy a hacer en una escena nueva vacía y luego lo implementaremos lo añadiremos el ejercicio sobre el que estábamos trabajando ayer entonces si me voy a la carpeta en la que estoy trabajando si me voy a Sam si me voy a ht dogs si me voy a la carpeta free punto js y me voy a los ejemplos me voy a los ejemplos me voy a hacer y jsmaster me voy a ir a examples y dentro de ejemplos veréis que no vj vamos a verlo expoter no expoterno vamos a ver lo primero que quiero buscar es un archivo llamado mtl que es este de aquí que es webgl loader obj con mtl y esto viene a profundizar un poco en lo que hablamos ayer y luego hay otra cosa hay otro archivo que quiero mirar animo que es en animación es decir que es el Cómo podemos cargar archivos animados dentro de Blender Bueno pues lo primero que vamos a hacer por tanto como os digo es abrir el archivo llamado webgl loader o bjmtl gracias en este caso no me está cargando pero lo que voy a hacer es cargarlo con el champ encendido vale Ahí está lo que he hecho por tanto mirar es simplemente abrir este archivo y lo he abierto con el webgl loader obj mtl y lo he hecho y mira lo abierto con el Sam con el sample encendido con Apache y poniendo el local Host porque en cuanto empecé Sí es que en cuanto empezamos a hablar de texturas y modelos y tal Es que fíjate que le da doble clic y no se habría hasta que no lo habréis con Sam hay cosas que no se abren bueno con este modelo Vamos a aprender unas cuantas cosas pero antes de ello Mira antes de ello lo que quiero es comprobar que me voy por aquí a vamos a verlo me voy a mail02 abro la ubicación del archivo Y fíjate en este caso que tengo el archivo mail02 que tiene la extensión obj y luego tengo el archivo mail02 que tiene la extensión mtl recordamos que el archivo mtl es un archivo que podemos abrir con edit vamos a verlo y fijaos como si abro el archivo mtl Pues básicamente el archivo mtl Define una serie de materiales que han sido trabajados dentro de un programa como por ejemplo Blender 3D esas texturas que tengo aquí si os fijáis corresponden la primera de arriba corresponde a el pelo del personaje Las de abajo corresponden a la ropa del personaje ahí lo veis con el traje con la corbata y todo lo demás más ahí lo tenéis vale más todo eso de ahí las manos más evidentemente la cabeza ahí tenéis la cabeza de ese personaje y por tanto lo que quiero hacer en este caso es cargar directamente el archivo de este personaje para ello Bueno tengo aquí un bin.js que tiene pinta de ser el personaje en modo binario bueno para eso lo que quiero hacer es lo siguiente Mirad quiero copiarme vamos a ver voy a abrir la carpeta de free punto js Jam ht dogs me voy a free js me voy a crear una carpeta llamada texturas y en texturas hago lo siguiente me copio el archivo jpg me copio el archivo mtl y obj me copio el traje jpg y me copio la cara jpg así que copio y pego y sobre esa carpeta veréis que tengo básicamente los tres jpgs y tengo el archivo que por defecto ahora mismo de momento tiene la extensión mtl Déjame ver un momento el archivo mtl que está cargando realmente el archivo mtl Pues si lo Cargo en un programa como headit vamos a comprobar fijaos que está cargando ostras poner JP Ah sí vale Sí Ok bien entonces fijaos que está cargando map KD está cargando ahí realmente un archivo con la extensión jpg recordamos que es k a ka es el color ambiental cabe es el color difuso ks es el color especular y luego tenemos mapas de iluminación el factor difuso y el mapa sobre el que se va a aplicar un mapeado además si cabe es color difuso la Cano es de color evidentemente no me acuerdo de que era ahora los busco pero si la k de la B es de difuso mapa kb será un mapa sobre qué canal sobre el canal difuso vale en este caso lo que me está diciendo es que esto es la definición de un material donde Aunque el color difuso parece que tiene un gris intermedio más bien clarito Pero existe un mapeado por encima que está cargando ese archivo Muy bien pues lo que voy a hacer a continuación por tanto va a ser cargar ese archivo obj con mtl me voy a triple js creo un archivo sabes que no vamos a hacerlo sobre el documento de ayer estoy pensando vamos a ir a abrir el documento os acordáis pointerlock 2 punto php vamos a plantar el medio de la escena al personaje es de texturizado así que por tanto me voy a frey js abro el archivo pointerlock punto js me vengo por aquí abajo y ahora abro también para extraer el código el archivo lo tenéis aquí el webgl loader obj mtl es decir abro también este de aquí abro el webgl loader obj mtl Y si bajo porque digo vamos a ver esto qué es pues digo container document Body Apensar Camera es que todo esto ya lo tengo escena tengo luz ambiental bien tengo luz direccional bien tengo un o en progress bien vale tengo un loader de DS loader no lo vamos a usar Vale y tengo por aquí por tanto tengo por aquí por tanto un mtl loader que se va a Añadir al obj loader que ya teníamos anteriormente por tanto en este caso vamos a verlo vale Mirad voy a copiar desde aquí del desde el mtl loader hasta ahí abajo copio desde el bar mtl loader en mi caso Y supongo que el vuestro también en la línea 90 hasta la línea 107 Ya que en la línea 107 es donde acaba esta función Así que copio todo esto me lo llevo a pointerlock punto php y por aquí donde cargaba objetos vamos a verlo vale por aquí donde cargaba objetos de momento antes del render justo antes del render pongo ahora cargo un archivo con obj y mtl y lo pego estoy justo antes del render cuando en tu archivo puede php veas que tienes el render Pues justo antes metes el archivo ahora cargo un archivo con obj y mtl de hecho permitidme que ponga un separador y Así veréis exactamente dónde empieza y dónde acaba y lo que tengo es esto en la pantalla acordaos que estoy justo arriba antes del render antes de ejecutar este código y que evidentemente nos dé error simplemente tener en cuenta que en el archivo original evidentemente atención se está usando no solo el archivo obj loader el obj loader lo tenía ya yo creo que sí vale No solo está usando Mirad el obj loader sino que además se está usando el mtl loader por tanto en este caso me voy a ir a buscar el mtl loader está en la carpeta examples en la carpeta js en la carpeta louders y voy a encontrar que por la m tengo el mtl loader Así que lo copio y lo pego dentro de la carpeta live Y por supuesto lo añado Así que copio la línea del meter el lauder y en mi archivo pointerlock lo que voy a hacer es cargarlo entro dentro de la carpeta Live y cargo el archivo mtl loader.js me bajo y si ya he cargado el mt loader me voy a este pedazo de código que acabo de copiar y pegar y mirar qué veo que no me acaba de hacer ilusión pues lo que veo es que está cargando la versión del archivo mtl con el dds pero ese creo que no es el que yo tengo me voy a texturas y veo que he copiado mail02.mpl no mail02 guión bajo dds punto mtl Así que lo que voy a hacer es quitar estas letras y quedarme con el archivo mail02.mpl si todo ha ido bien Vamos a verlo Digo vamos a ver el set pad es la carpeta texturas el setbeis URL es la carpeta texturas el set pad es la carpeta cuidado texturas mails no la carpeta texturas es la carpeta texturas y en principio creo que ya lo tenemos sed Paz o bj posición y menos 95 cuidado con eso añado a la escena del objeto vamos a ver si al menos no da error claro cuidado porque está en y -95 igual está abajo del suelo ahora veremos pero por tanto lo pongo por aquí recargo en localhost pointerlock2.php compruebo que no esté dando error aquí no compruebo que no esté dando error me voy a consola interesante vale vamos a ver de momento bueno El caso es que el caso es que por ahí tengo el personaje con lo cual parece que muchos nos dan si es un tiburón sabes No pasa nada pero de momento Bueno pues vamos a ver errores de la misma manera que el personaje aparece metido en el suelo porque es muy grande en cuanto a escala Pues eso quiere decir atención todos a la pantalla miradme que en otra exposición y como habéis visto le ponéis 0 y el personaje aparece metido dentro de la escena pero atención también os digo que le podéis decir object punto scale punto x es igual a 0.1 y aún creo que me quedo corto así vale entonces y z con lo cual guardo recargo y fijaos que el personaje pues lo tengo por ahí un poco con lo que he metidos en el suelo vale por eso por el terreno si con una variable pero con una línea no se tendría que mirarlo creo que no Entonces una cosa muy divertida Es que luego si queréis podéis hacer un Ford Random para que os aparezcan miles de personajes metidos por ahí en el entorno Bueno vamos a profundizar un poco más sobre la exportación de obj y mtl porque diréis vale esto es muy bonito en cuanto a que pues cómo te diría yo este personaje pues ya venía en el ejemplo pero como género yo mi ovj y mi mtl pues vamos a ver que realmente es muy sencillo atención todos a la pantalla vamos a abrir Blender vamos a ir un momento Blender yo y todos no porque este acto premiado de Rebeldía como ha sido venga abrir Blender que lo que voy a hacer muy sencillo lo primero que quiero mirar es que a ver miradme recover vale no lo primero que quiero cuando habréis Blender Mirad es que los tres elementos que aparecen por defecto los eliminéis o sea selecciono todo con la tecla a y luego borro con la tecla suprimir ahora una vez que os habéis asegurado que no hay realmente nada en la escena quiero que le deis a create cube quiero que creéis un cubo entonces este cubo por defecto no tiene material no tiene ningún tipo de material vamos a comprobar que esto es cierto si despliego esta persiana de parámetros y veo que tengo por aquí un botón llamado material Entonces el botón de material comprobamos que está vacío qué opción Me da evidentemente me da la opción de crear un New material un nuevo material así que pinchamos en el botón new en el botón New daros cuenta que mira aparece un difuus un kdd Ahí va y aparece nuestro amigo lambert bueno es nuestro amigo pero no es amigo de Alex es su enemigo Entonces si pincho aquí Fíjate que tengo otro sombreadores como por ejemplo oren nayer que es el derivado de oro en nayarbling tengo toon para hacer dibujos animados tengo minerd para hacer cerámica y cosas parecidas y tengo fresnel para hacer metales así que de momento voy a dejar lambert y voy a pinchar en el color blanco para cambiar a otro color de material así que pincho en el color blanco y seleccionáis el color que queráis en este caso por ejemplo azul en este primer ejemplo por ejemplo azul el color especular atención quiero que lo cambiéis sigue cogido antes azul pues lo cambio a verde quiero que veáis que en la bola de material todo el objeto es azul menos esta piquita de luz que es de color verde justo del color verde que yo he especificado emiter en principio nada transparencia nada mirror nada porque no se va a llevar no se va a trasladar con lo cual vale Ya está ya he acabado vamos a llevarnos esto un momento cómo se llama este objeto este material Perdón se llama mi material Y cómo se llama este objeto vamos a verlo Mírame pincho aquí transformo y aquí abajo donde pone ítem o ítem que pone cube pues se va a llamar mi cubo Esto no es obligatorio pero ahora veréis porque os hago hacerlo Bueno tengo un objeto le he aplicado un material y he cambiado un par de colores en el canal difuso y en el canal especular Así que ahora lo que voy a hacer es que me voy a file me voy a export me voy a exportar un archivo obj materials Ok y nos vamos a hacer a ht dogs nos vamos a pam pam nos vamos a free js no lo veo feliz js nos vamos a texturas mismo y lo guardo como cubo punto vj Y le doy exportar obj vale le doy y me comprobáis que en esa carpeta os ha creado un archivo llamado obj y un archivo llamado mtl entonces lo que quiero a continuación es abrir el archivo cubo mtl con un editor de texto y podremos comprobar como tengo un New mtl un New material créame un nuevo material que Cómo se llama el material mi material por eso le he puesto nombre observo que el KD veis como el KD tiene un montón de decimales y de hecho si os fijáis tiene mucha más componente azul que verde y rojo porque el material es más bien azulado pero si me voy a la ks veré que tiene más componente verde que roja y azul porque el especular lo hemos puesto de color verde lo que quiero que comprobéis finalmente es que cada parámetro que tocamos en un material al final queda reflejado en el archivo mtl Muy bien pues a continuación voy a repetir el código me vuelvo a de vuelta a pointerlock punto php todo este bloque lo voy a duplicar así lo duplico para Palo Seco lo duplico y ahora evidentemente en lugar de mail02 punto mtl le digo que quiero cubo punto mtl Y en lugar de mail02.bj le digo que quiero cubo punto obj y lo que ocurre si recargo en la pantalla es que comprobaréis o sea que Escala va a salir es que comprobaréis igual está gigante a este enano va puede ser Ah claro Es que además también le he dado el 0.1 en escala Vale pues voy a ponerle 10 y 10 de escala guarde recargo efectivamente vale si os fijáis ahí ya tenéis el cubo pero lo interesante faltaría haber especular Pero bueno me haría falta una luz para eso lo interesante lo que quiero que veáis es que como os diría yo no he tenido que decirle como hasta ahora el material con el lambert o el phone o el basic o en lo que sea yo le digo no tú eres el objeto tu carga es el material y yo ya he definido el material en Blender no quiero tener que volver a definir el material entre punto js por tanto esta es la gracia del obj mtl lauder Y es que hay veces que nos interesará cargar un objeto sin material y ponerle material en ceip punto js Pero hay muchas otras veces en las que nos interesará que el objeto ya venga con su material del programa modelador 3D os voy a preparar una escena completa para poder trabajar y por tanto lo que voy a hacer ahora es lo siguiente atención voy a abrir el web gl loader colada aquí frame pero lo importante es que lo voy a aislar en una nueva carpeta Htc js que voy a llamar animación dentro de la carpeta de animación voy a traer el colada aquí frame realmente no quería vale muy bien Creo que lo he destruido fantástico Entonces lo voy a volver a extraer Sí pero no pasa nada es volver a extraer el ZIP y una introducción el archivo se llama colada loader Animation js Master está en examples en colada pero os lo voy a preparar escolada aquí frame Sí es que os voy a preparar un paquete claro entonces mira el frijota ese Por cierto no la carpeta se debería Llamar animación vale voy a llamar a este archivo animación con claves y este archivo de animación con claves realmente me exige otros muchos archivos por tanto Crea una carpeta llamada lead y digo a ver tú realmente qué necesitas pues digo tú necesitas el free punto ming eso evidentemente así que el free punto ming ahí lo tienes pero luego necesitas Animation halder keyframe Animation y colada loader un montón de cosas por tanto me vengo aquí a freír js me vengo a examples me vengo a js me voy a cargadores en cargadores vemos que tenemos un montón de ellos pero me voy especialmente a colada y encolada cargo Animation handler y keyframe Animation y este lo pego dentro de champ HD dogs free js animación Live y ahí los pego también me está pidiendo el cargador sencillo de colada loader el 2 no el uno así que cargo el número 1 y me pide también el detector y las estadísticas esto no lo voy a usar Pero bueno vamos a cargarlo también entonces abro el detector y las estadísticas que están en js Lips stats Así que copio pego y ya tengo por ahí las librerías si ya tengo por ahí las librerías ahora evidentemente las actualizo Así que digo que esto se va a cargar desde la carpeta Live desde la carpeta Live desde la carpeta live desde la carpeta Live desde la carpeta live desde la carpeta Live además de todo esto me está pidiendo vamos a verlo me está pidiendo por aquí por alguna parte creo recordar el archivo dae Entonces esto está en pam.dae Vale pues me voy a examples models quién será colada pan porfa pan punto dae y lo que hago es copiar realmente toda esta carpeta copio toda la carpeta llamada pan y la pego dentro de esta carpeta vamos a verlo a ver que vuelva y perfecto Vale entonces lo que he hecho es copiar toda la carpeta pump con el archivo tanto el archivo dae como las texturas que en un momento dado pues parece que hacen falta vale por tanto una vez que copiado todos nuestros archivos por supuesto actualizo la ruta hacia el archivo ahí lo tenemos y una vez que ha actualizado la ruta del archivo comprobamos que no hay en principio nada más que actualizar con lo cual todo esto debería funcionar correctamente así que me voy a cargarlo me voy a free punto js animación y animación con claves punto html bien si todo ha ido bien Por tanto vemos como aquí tenemos reconstruido el modelo pero digo reconstruido el modelo en un formato que os lo puedo pasar en un formato que ahora os lo puedo empaquetar y os lo puedo enviar al correo para jugar con este archivo así que por tanto así que por tanto ahora para por aquí vamos a hablar un momento de animación y vamos a hablar del concepto de fotogramas por segundo porque es un concepto muy importante para animaciones un concepto básico e importantísimo Mirad para explicaros este ejemplo no hace falta ni que hagáis nada en pantalla simplemente con que me miréis suficiente entonces yo voy a crear un objeto como en este caso una icoesfera y cierra porfa Entonces para ello lo que voy a hacer Es que voy a grabar y voy a decirle que al final Bueno al principio esta esfera está aquí y al final esta esfera está aquí lo que ocurre por tanto es que he generado una animación y cuando yo reproduzco esta animación muy rápido es decir si yo voy a la animación poquito a poquito Perdona he dicho poquito a poquito que no he dicho Bueno voy a ir uno a uno he dicho poquito a poquito Pues fijaos que si reproducimos la animación fotograma Nosotros somos capaces de ver cómo la Esfera tiene una posición concreta en cada uno de los fotogramas pero cuando estos fotogramas se reproducen a una velocidad suficientemente elevada nuestro ojo humano queda engañado y percibe cree Piensa como que hay una sensación de continuidad una sensación de animación cuando no es falso lo que está ocurriendo es que el programa nos está mostrando muchos fotogramas seguidos delante de nuestros ojos la cuestión está Incluso fotogramas se muestran a una velocidad concreta en este caso en Blender por defecto me voy por aquí a para que te lo digo está por aquí el fotograma por segundo Pero bueno Estaba por ahí lo contrario playback con scrubbing no bueno está por ahí vale pero la velocidad por defecto es de 25 fotogramas por segundo 25 fotogramas por segundo es una velocidad suficiente pero no excelente Entonces menos de 15 fotogramas por segundo no se recomienda porque a partir de ese momento el ojo humano empieza a ver el truco y percibe como que no es una animación sino que es una secuencia de imágenes por encima de 15 el ojo humano queda engañado ahora bien hay varias velocidades de fotogramas por segundo en televisión y en cine a nivel mundial por ejemplo en Europa trabajamos los 25 fotogramas por segundo en Estados Unidos trabajan a 30 fotogramas por segundo y en cine se trabaja a 24 fotogramas por segundo dicho esto también os digo que con la con los nuevos formatos digitales es posible tirar vídeo a más fotogramas por segundo Por tanto hay películas que se están empezando a grabar en lugar de 25 a 50 en lugar de a 30 a 60 Y en lugar de 24 a 48 por ejemplo El Hobbit está grabada a 48 fotogramas por segundo en lugar de 24 la pregunta por tanto es el ojo humano nota Esa diferencia pero Qué entendemos por notar que entendemos por apreciar y también hay que tener en cuenta que el ser humano no es un iPhone de Apple que he hecho un ser humano hechos mil millones de humanos sino que cada humano tiene unas características y cada humano tiene unos ojos y además cada humano tiene una educación en los ojos quiero decir hay gente que tiene el ojo entrenado por ejemplo un fotógrafo y hay gente que no y por tanto le da igual entonces así de repente sí que se nota más fluidez en una película que está grabada a 50 que en una grabada a 25 en el mundo Gamer en el mundo de los jugadores esto de los fotogramas por segundo ha avanzado mucho más rápido que en el cine por qué porque tu televisión no puedes de repente cambiar todas las televisiones del mundo de 25 a 50 pero en el mundo Gamer básicamente son tantos fotogramas como TV de por si el juego por tanto además en el mundo de los juegos todo ocurre Generalmente mucho más rápido las cosas se mueven en pantalla mucho más rápido que en una película por ejemplo en una serie y ahí es donde se aprecia mucho más se aprecia mucho mejor la diferencia entre 25 o 50 60 o si hace falta 100 fotogramas por segundo también te digo que hay mucho tiquismiquis en mi opinión porque claro es que hay gente que dice no es que si no sea 60 yo no puedo jugar es que si en lugar de 650 yo Lo noto y no puedo jugar así inaceptable Entonces yo cuando digo la palabra inaceptable digo a la nanete Vuelve a casa a tus papás saber sigue jugando a tu juguete y ya cuando llegues al mercado laboral ya me cuentas lo que es inaceptable o lo que es aceptable Entonces ya te digo que notarse se nota la diferencia de calidad de 50 a 60 fotogramas por segundo No lo sé igual Es que yo me estoy haciendo viejo y mis ojos ya no ven tanto fotogramas por segundo pero es que a mí me da completamente igual jugar a 50 fotogramas por segundo que a 60 fotograma por segundo es más eso es más incluso ya daría yo me daría yo por pesado Ya me iré colocando los dientes Si todos los juegos los que jugarán fueran a 50 vale Pero bueno también quiero decir yo soy yo y el mundo Gamer es el mundo Gamer y por tanto también verás que hay gente que se gasta mil cinco mil seis mil euros en estaciones de trabajo específicas para jugar a jugador y también hay gente que se gasta el dinero y Oye pues igual gracias a esa gente la industria de la tarjeta gráficas funciona me parece fantástico pero claro pero también hay gente que dices a ver yo si me gasto 600 euros en una envidia 980 es porque la voy a usar para trabajar o sea yo suelo de pensar en gastarme 600 euros en una 980 para jugar a juegos para poder pasar de 40 fotogramas por segundo a 60 fotogramas por segundo a mí me ocurre un escalofrío por la espalda Pero bueno yo soy yo evidentemente hay gente que sí que se los gasta me parece fantástico vale bueno no no cuidado porque eso es lo que se llama un montaje en paralelo sli en el caso de nvidia entonces hay que tener en cuenta que los sli solo funcionan Si el juego que estás ejecutando Está programado para soportar sli Claro claro No evidentemente es lo mismo que habéis visto con los workers un programa no está preparado para usar múltiples núcleos Si tú no lo programas específicamente Pues de la misma manera un programa no está preparado para usar múltiplos gráficas Si tú no has declarado que el programa vaya a poder usarlo tarjeta gráficas Sí bueno soporte para sli tiene que poner pero básicamente cuando tu pinchas una tarjeta gráfica desde el punto de vista de programación hablo más de c que de javascript por ejemplo la tarjeta gráfica tiene el ID 0 Entonces si tú no te quieres complicar tu programa es una aplicación que tenga tarjeta gráfica y le dices Búscame el Hardware con id0 y ya está porque tú dices para programar ahora para multimetraje de gráficas no píllame ahí de Cero y eso quiere decir que la tarjeta que el usuario es que el usuario haya pinchado en el slot pci Express esa he salido de cero modelo x o modelo y pero es el id0 claro si un programador se preocupa únicamente de programar núcleos una tarjeta gráfica en el momento en el que tú pinches una tarjeta en otro pci Express y por tanto el sistema le asigne el ID de Hardware número uno o sea el acero es la primera la 1 es la segunda el juego no va a reconocer esta tarjeta gráfica porque el juego siempre va a la dirección de memoria de Hardware y de 0 Y a partir de ahí los núcleos de la Gráfica tiene que ser un programador que haya cogido el programa y haya dicho no no primero Sácame el count Sácame la cuenta de ides de Hardware y te dice vale 0 y 1 vale cuenta es igual a dos a fantástico entonces la que tengo dos tarjetas lo he detectado mediante la programación Vale pues cuando hago el cálculo x lo que hago es que se cálculo lo divido por la mitad del cálculo lo tiro al Hardware y de 0 la mitad del cálculo lo tiro al Hardware y de 1 es más o menos con los workers un poco más complicado vale porque es un dispositivo el Hardware ID que dentro a su vez tiene movillón de núcleos pero básicamente el mismo concepto desde el concepto de que depende de lo que estás haciendo porque tú igual lo metes en sli para decir una gráfica lleva los gráficos y otra gráfica lleva la lógica depende es que hay miles de maneras de programar paralelismo pero lo que quiero deciros que al igual que los workers no es algo que el sistema haga automáticamente por ti sino que tiene que haber se le ocurrido al programador que se puede programar con otras circunstancia para que tengas la idea algo tan A ver no te digo Tan brutal pero tan implantado como Blender que no es un programita que han hecho un par de días que bueno yo unos cuantos años Pues en Blender no puedes usar sli emprender lo han programado en su momento en sistema pero para usar una tarjeta ostras acuda Qué susto para usar una tarjeta gráfica y en Blender ocurre que si metes una segunda tarjeta gráfica no lo reconoce Por qué Pues porque en su momento hicieron el código para una tarjeta gráfica y ahora dicen ahora rehacer todo ese código para tener en cuenta Mira me cago al lado No lo sé pues ojalá pero quiero decirte que no es cosa de promitas Pequeños sino que un programa grande que en un momento dado igual hace 4 o 5 años apuestan por esto En aquel momento no se les ocurre apostar por o sea tener en cuenta lo que haya más tarjetas gráficas en el sistema y ahora dicen Bueno ahora que está funcionando ahora vamos a rehacerlo a la tirambre con lo cual yo para Blender nunca me compré en un sli sino que Tendría que ir a una tarjeta gráfica potente pero por ejemplo entre estudio macs con metal Ray pues tener estudio más comment del Rey sí que pilla esa ley de tarjetas y te aparecen listadas en las tarjetas para renderizar o sea cada programa según lo hayan programado reconoce o no reconoce quién me iba a preguntar algo la pregunta en este caso es digamos un juego No ya un programa que tiene x años sino un juego que parte a día de hoy si tiene contemplado digamos el sli La respuesta es que evidentemente por regla general no es decir no hay una manera de esto no hay una manera de programar juegos estándar a día de hoy yo te voy a decir una pregunta y ya sé que me vas a decir que no tiene nada que ver pero quieras que no sí que tiene y es que porque no has enseñado evidentemente pero el máster of castells Está programado para sli no evidentemente vale tú dirás pero cogeréis es que no nos han enseñado a detectar por Hardware workers de tarjeta gráfica vale pero supongamos que os hubiera enseñado eso Entonces por esa razón no todos los juegos a día de hoy soportan sli luego también te digo otra cosa Y es que el soporte para sli requiere más inversión en desarrollo al final Como ya estáis viendo no es algo que hoy os vaya a contar y que me tengáis que creer sino que es algo que estáis viendo en vuestras pantallas cuando desarrolles un juego Cuanto más código metes más probabilidad de fallo ocurre Entonces al final tú tiendes a desarrollar cuanto menos código mejor para que haya menos piezas que puedan fallar Claro tú como desarrollador llega un momento que dices vamos a ver este juego para que no hablo ya de juego de navegador Incluso si más gente de juego de PC para qué target de jugadores entonces voy a este juego igual voy a vender por 20 euros es un juego pensado Para que no haga falta mucha tarjeta gráfica tú te haces un perfil de gamer Y tú al final dices vamos a ver cuánta gente tiene un sli en casa te pregunto cuánta gente lo tiene Tú me dirás yo que sé yo te digo yo tampoco lo sé tendríamos que hacer un estudio de Mercado pero vamos a inventar un número cuánta gente diría que tiene un sli por ejemplo de tus colegas cuando quien tiene un sli vale alguien conoce por aquí alguien que tenga un sli creo que un amigo mío tiene uno vale con lo cual vamos a suponer que lo tiene Cómo Sí el 20 y el 25% de la población española tiene un sli Si eso fuera cierto uno de cada cuatro amigos tuyos tendría un sli en 25% . No lo sé habría que estudiarlo vale Pero podemos hacer diferentes supuestos si yo como desarrollador encuentro que es cierto que un 25% de la población Gamer tiene sly digo hombre por un 25% por una cuarta parte Venga pues Tendremos que meternos a programar en sli pero claro si hago el estudio Y en lugar de un 25% me sale que uno de cada 20 jugadores Y todavía Creo que me estoy arriesgando demasiado pero en fin uno de cada 20 tiene un sli yo digo por uno de cada 20 me voy a matar yo a programar un sli que me voy a morir y que las probabilidades de fallo van a aumentar por 10 con respecto a programas de tarjeta gráfica a tomar por saco si es algo que va a disfrutar uno de cada 20 y encima yo voy a tardar más en programar pues no ahora si yo no soy un desarrollador independiente sino que soy Epic games soy blizzard soy la leche y estoy programando un juego de millones de dólares y tengo 200 tíos metidos en el desarrollo del juego porque Oye si hace falta contrato a un tío o a dos tíos para que 8 horas al día 5 días a la semana estén programando el sli porque este no es un juego independiente sino que es un juego que te cagas de importante de los que luego se venden a 60 euros en el centro comercial y de los que luego se venden decenas de miles de unidades sobre el primer día pues en ese caso sí que lo programaría en sli pero la decisión Del sli por tanto es como tantas otras decisiones en diseño de videojuegos Y es que tú al final tienes que hacer un balance entre los recursos que tienes y el lanzamiento que esperas hacer Quiero decirte con esto que tú por ejemplo como desarrollar independiente no puedes tomar las mismas decisiones que toma blizzard cuando saque el siguiente mega juego o que sea o que tome activision o que tome trey Art o que tome cualquier gran productora de juegos porque no te las puedes permitir Vale cuando llegue ese momento evidentemente sí que te las puedes permitir Por eso digo que no hay una manera estándar de programar un juego no se puede decir que a día de hoy todo el mundo porque insisto no es una cuestión ni siquiera de desconocimiento porque cualquier programador que sepa programar videojuegos le das la de nvidia de cuda no te digo en una tarde pero en dos o tres tardes te la ampollas Y dices Ah pues mira Esto no es tan difícil no es cuestión de eso Si no es una cuestión de que programar ya pasar a programar directamente con cuda complica bastante la lógica de tu programa programar encima con multicuda complica un huevo más la programación no es que la gente no sea capaz mentalmente de hacerlo sino que dice Guau meterme en este berenjenal con las probabilidades de que de fallo que tiene que dar esto probabilidad de fallo equivale a más tiempo equivale a sacar el juego más tarde y dejar de ganar dinero por un pringado que tiene ahí una doble tarjeta cuda me cago lo saco Así cuando tenga más pasta ya sacaré la versión 2 y Ya veré si meto eso o en la 3 no lo sé experimentos en casa con cuda todo lo que quieras meter en un juego ni de coña no con multicudano con cuda el multicuela lo he leído en la Api pero como en casa no tengo dos tarjetas gráficas iguales Ni dos puertos pci y tienen que ser dos tarjetas gráficas que aparte de ser iguales tengan la platita para el cuda no O sea lo he leído en la Api pero no lo he programado yo ahora pruebas con la lápiz de cuda básicamente es como lo que habéis visto de los workers para la Bestia con lo cual es algo que dices a ver para hacer una calculadora está o toda la tarde arreglando fallos de cuda colgar no me quiero imaginar para sacar un juego entero en cuda con lo cual el día que alguien me diga Oye no que te pago año y medio a 8 horas al día a 3.000 euros al mes para que estés implementando el cuda en este juego yo tendréis vamos a por el cuidado pero mientras tenga que sacar un juego que diga yo me lo hizo yo me lo como y el cuda no es imprescindible pues no mi opinión pregunta no no porque ahí sí que lo gestiona el sistema ahí con workers O sea tú usas workers y el sistema distribuye carga entre los X porceladores diferentes sí sí Pero insisto depende con Qué tecnologías y tu pregunta es mucho más buena de la que pienses en un principio porque nosotros ahora mismo estamos trabajando con web workers que son workers en el navegador Eso quiere decir que nosotros no trabajamos lo que se llama close to metal como la Api de amd O sea no trabajamos directamente al procesador nosotros trabajamos contra el navegador trabaja contra el sistema operativo y el sistema operativo es el que trabaja contra el Hardware es más Incluso un nivel purista podremos ver que el nivel del sistema operativo trabaja contra las librerías y las librerías trabajan contra el Hardware Eso quiere decir que nosotros estamos a un nivel bastante alto de abstracción Y eso quiere decir que nosotros particularmente no nos tenemos que preocupar porque nosotros trabajamos contra el navegador y entre el navegador el sistema operativo ya están pre programados Para repartir cosas entre los diferentes núcleos curiosamente Si en lugar de programar juegos a tan alto nivel programamos en fe puro ocurriría al contrario Entonces programando en un lenguaje mucho más puro como c ahí es donde nosotros no habría sistema operativo ni habría navegador que abstrayera eso por nosotros sino que iríamos directamente contra el Hardware y ahí evidentemente tendríamos que hacernos nosotros el detectar cada uno de los ideas de Hardware de cada procesador es curioso Porque podríamos pensar que es al revés Porque podríamos pensar que al estar a un nivel más alto y a un nivel más abstraído estamos más limitados en ese concepto y resulta que no es que estemos limitados que realmente sí que lo estamos sino que en este caso el navegador y el sistema operativo nos protegen nos dan todo eso por nosotros mientras que si bajamos un lenguaje mucho más bajo como c entonces tú lo que estás haciendo aquí con lo cual ahí te lo tienes que hacer tú es curioso el Qué tipo de tecnología Sí ahí ya ahí dependemos específicamente de cómo nos saquen el lápiz de en este caso los workers quiero decirte con esto Claro que no es algo que decidamos nosotros hacer no hacer sino que por ejemplo hasta el año 2010 no habían workers en javascript con lo cual tú quería usar multinúcleo no podías había unos cuantos trucos pero no podías relativamente en el momento en el que sacan los workers es cuando a partir de ese momento podemos pero estamos limitados en cuanto a Que de momento no han sacado workers para has visto no sé si te ha pasado porque igual no nos ha aceptado No lo sé Pero has visto que Cuando entras en Facebook sale un cartelito Cuando entras en Facebook en la web que te dice quieres activar las notificaciones de escritorio te ha pasado esto alguna vez Vale pues si aceptas tú estás trabajando en el ordenador O sea estás trabajando tu rollo y de repente serán una notificación que dice fulanito te dice hola y tú dices si no estoy en Facebook eso es porque has aceptado las notificaciones de Facebook eso qué es eso es un servicio Y eso parece una chorrada pero en programación de aplicaciones empresariales es muy importante Cuál es la diferencia entre un proceso y un servicio un proceso es un programa es un hilo de procesamiento que tú lanzas específicamente un servicio es un hilo de proceso que se queda allí esperando se queda durmiendo se queda ejecutándose constantemente tú no lo has pedido y tú no lo ves de hecho pero él está ahí ejecutándose constantemente Entonces cuando Ocurre algo ese programa Despierta y te dice algo en este caso por ejemplo el champ lo podemos ejecutar como servicios Es decir para que cada vez que arranque el ordenador sin pedirlo se ejecute pues eso es algo que la gente llevaba pidiendo muchos años y en 2012 dijeron pum servir service workers para html5 Pues claro hasta el día que no lo sacan pues no lo podemos usar por tanto el día que saquen workers gpu para html5 ya te digo yo que ese diario es el primero que diga vamos a ver aquí qué se cuece sabes pero de momento no puedes buscar esto que te acabo de decir en Service workers sin tener que hacer que el navegador te lo abstraiga o sea sin perder tú el control sino decir no yo te voy a decir cuántos núcleos cuda quiero usar Porque ahora mismo los núcleos de procesador los podemos controlar nosotros pero los núcleos de aceleración gráfica no lo gestiona automáticamente el sistema cada vez que yo estoy haciendo esto cada vez que yo cargo un archivo en free punto js es free punto js y sobre todo el navegador el que está usando la aceleración gráfica de tarjeta gráfica pero yo digo yo quiero poder controlarlo Yo quiero poder editar el código que dice si tengo una tarjeta gráfica con 500 núcleos quiere usar 100 quiere usar 200 o no quiero usar ninguno o quiero usar dos tarjetas gráficas Ahora hasta ahora mismo no puedo motores Eso me alegra mucho que me lo preguntes porque por ejemplo en un real engine un real internamente sí que está preparado para soportar tantas fotografías como haga falta de hecho un real engine o sea todo lo que tengas por medio ahora bien lo pilla el motor intenta tu llegar al código que aprovecha ese multiproceso podrás pero Prepárate para bucear en c++ quiero decir no es una parte de la Api que esté abierta los desarrolladores No es que está cerrada porque te dan el código fuente entero del programa pero no hay por ejemplo una instrucción cuando a ver su real que es aprovechar equis núcleos de tarjeta gráfica sino que eso es parte de la parte de abajo de un real Hay cosas como por ejemplo proyectar luz coleccionar con pared toco aquí se abre una ventana que eso es facilísimo de hacer con un real pero la parte de editar la aceleración gráfica de un real ya te digo ya lo veremos cuando lleguemos y verás que es prácticamente imposible llegar que es lo bueno insisto eh realmente bueno lo bueno y lo malo que tiene un real que hay cosas que aquí pues todo lo que es por ejemplo voy a una ventana y la abro pues lo haremos a base de código y tela mientras que llegaremos a un real y gráficamente diremos pues Mirad pongo ahí un rectángulo digo cuando toco el rectángulo sobre la ventana y diréis como la mogollón pero cuando queremos bajar a hacer cosas que un real dice que no se supone que tenemos que saber que poder hacer pues ahí te cagas vivo para hacerlas mientras que aquí tenemos mucho más control No digo que sea bueno ni malo sino que hay que evaluar ventajas y desventajas Entonces vamos a acabar este ejercicio estoy en animación con claves punto html y lo que quiero en este caso es ya no trabajar con este colada que viene por defecto que está fantástico como demostración pero quiero comprobar que yo puedo meter mis animaciones yo puedo crear animaciones para ello en primer lugar hablo Blender si queréis lo pruebo y hoy os lo paso y si no lo hacéis vosotros eso ya me da igual pero lo primero que voy a comprobar Es que tengo exportación para colada y a ser posible que la exportación para colada tiene la opción no pone nada de animación vamos a ver vamos a verlo por ahí vale vamos a ver Ok entonces lo primero que voy a hacer por tanto mirar es crear un cubo Así que creo un cubo y lo voy a animar por tanto para animar a este cubo simplemente activo el botón de animar le digo en este caso que roto esta pieza digamos así y al final del todo roto la pieza Sí así cuánto lo he Derrotado No lo sé 630 no me gusta como valor entonces 360 por 2 7 20 Eso me gusta bastante más así que le doy a Play y comprobamos como tengo una animación basada en claves sobre este objeto de caja bien pues también te digo que probablemente es gigantesco vale porque recordamos No lo sé no es que no pero acuérdate del colada que he importado ahora que estaban con mega minúsculo No lo sé pues ahora lo exportamos de nuevo y ya está Entonces le doy a file export colada me voy a donde están los históricos a pump No sí Pam sí no me voy a animación me voy a Pam ahí sí y guardo esto como caja Así que exporto el archivo de colada me vengo aquí al código y le digo que el archivo dae lo quiero sustituir por el lugar de pan punto dae caja punto dae Así que guardo y recargo bien canorset propertir visible of and Define entonces estoy en la línea 125 claro muy bien y digo model get object by name Camera y cam Target Camera con lo cual evidentemente necesito tener en este caso en la escena un cam hay Camera por tanto me vengo aquí creo una cámara la pongo por aquí o digo Mira ya está ahora verás digo a la cámara le digo alinear no dónde estás alinear active cámara tu View ahí Ahora sí bien Esto se llama este objeto se llama me habéis dicho se llama cam I Camera y ahora me creo un objeto ficticio me creo un objeto empty que se va a llamar cam Target Camera que es el punto hacia el que apunta la cámara pim vale después de haber hecho esto vamos a ver si ahora sí me voy a pan me voy a caja sobre escribo le doy a recargar vale cannotrid property Time Of null vale la línea 165 Así que 165 a ver Animation vale Ah muy bien muy bien Me dice que no O sea el null es que no reconoce animación vale Si no ahora Igual me abro Maya y lo abro con malla pero bueno a ver file export colada en pan y digo vamos a no recto vamos a ver caja exportar colada ya que lo que quiero en este caso x que me exporte la animación Vale ahora sí pero el 125 me vuelve a decir visible 125 es cam hay Camera y el cam hay Camera cancher TV cama y cámara 125 cam hay Camera voy a hacer una cosa Vale tengo ahí eso y teóricamente por aquí por alguna parte podría aparecer ya el modelo animado pero claro ahora o es muy grande o es muy pequeño vale por tanto lo que voy a hacer en este caso es que lo voy a hacer más grande vuelvo a exportar no Porque ahora mismo vamos a verlo ahí ahora mismo es que el objeto era chiquitisísimo y Simplemente no se veía correctamente en pantalla dime culpa mía porque como estoy ahí ves como estaba animando Pues esa clave no debía haberla creado vale No pasa nada déjame que haga un momento Claro porque yo lo es escalado mientras estaba animando Vale entonces bueno simplemente me voy al grave editor elimino la clave de escala las claves de escala de hecho son estas de aquí y ya está Ah muy bien fantástico ahora Ah No claro es que estas no son vale vamos a ver esto fuera afuera Fuera fuera fuera me quedo solo con la escala eliminó ahora sí que rota con lo cual exporto colada exporto a pan exporto como caja y comprobamos como ya tenemos un objeto rotando en pantalla bien os voy a pasar este archivo de Blender para que lo podáis trabajar cuidado Hay un problema notáis que yo había rotado en lo que en Blender es en Z pero lo que en Blender es Z en free punto js es otro eje diferente voy a ver si tengo algún parámetro de exportación por aquí que me permita invertir Los ejes que va a ser que no transformation type nada con lo cual tendría yo ahí que invertir Los ejes dentro de dentro del Blender bueno os voy a eso eso es lo que te decía entonces Os voy a guardar esto como caja animada y así os lo paso y podéis jugar con ello save Blender y ya tengo por ahí eso y venga vamos a hablamos un poquito de post procesado vamos a hablar del post procesado vamos a empezar el procesado con un efecto muy divertido llamado deplur que es el blur de profundidad entonces me voy a abrir js me voy a crear una carpeta llamada Dove dentro de esta carpeta llamado es donde voy a este mtl no voy a copiar aquí el Dove me lo copio me lo pego ahí y ahora atención porque qué es lo que me está pidiendo esta escena Pues esta escena fijaos me está pidiendo por una parte el free punto ming.js Vale pues vengo aquí ya HP free punto js me voy a seguir js máster bueno de aquí Perdona antes de eso de librería el framing js lo puedo copiar de aquí me está pidiendo de shaders me está pidiendo de examples js shaders sombreadores y Fíjate lo que hay aquí hay de todo vale me está pidiendo el copy shader y el bosque shader el copy shader y el bosque shader versión 1 me está pidiendo de postprocessing Fíjate todo lo que se puede hacer en Post procesado se puede hacer un Bloom un como un Destello del sol un boque que es lo de el desenfoque de profundidad el puntearlo el compositor de efectos que es un súper compositor el película de cine anti alias máscara render pase bueno puedes guardar los pases puedes hacer lo que quieras ahí dentro godrise el árbol que la luz pasaba por bajo el árbol y tal no Qué efecto lens flores Sí eso estará alguno está segurísimo dentro de ese punto js no no no madre mía sí sí Exacto Entonces render pass shader pass Mask pass y pass así de repente pa toma librerías Así que ahora me voy a detector esta Ya las tengo realmente entonces me voy a js me voy a Lips me voy a dar esta no sé para qué sirve ahora mismo la verdad yo tengo que mirarla y ya está Y por último me voy al Live y cargo el detector no lo tenía aquí no lo tengo en animación lo tengo el detector y el stats vale Así que después de haber hecho todo esto os acordáis lo que os dije hace unos meses de cuando lleguemos atributo js todo cargar librerías y cargar librerías pues os lo dije cuando estuvimos hablando de lo de empezar a separar en archivos js externos en fin no os acordáis pues Hala en los vídeos estará entonces me vengo por aquí me voy a Dove cargo 2 y lo que hago ahora es evidentemente pues cargar librerías Así que live bien que yo creo que sí no está cargando o qué O sí vamos a ver claro donde está cargando los modelos ya sabéis lo que os digo aquí no texturas vale bueno no lo sé vamos a ejecutarlo a ver qué pasa así que le digo localhost barra free y js/ html bien Algún error quizás tal vez Hola errores me falta el castillo muy bien solo el castillo Qué curioso que solo te falta el castillo Pues bueno vale Sí entonces Bueno pues me hago una carpeta llamada jpg y con respecto al modelo original a ver texturas Freddy js máster examples texturas pero cube suedes Royal Y esto es lo que hay es básicamente las caras de un cubo o sea en lugar de poner una esfera como reflexión ponen un cubo como reflexión un entorno de cubo entonces vengo por aquí le digo dos le digo jpg cargo esas imágenes y por supuesto le digo que la ruta es jpg así que si todo ha ido bien recargo por aquí vale Y ahí lo tenemos Vale pues si ya tenemos esto os paso el paquete por correo electrónico y lo abrís bueno Pues si tenéis esto en pantalla Mirad voy a cargar voy a asegurarme que estoy cargando el archivo correcto js2 atención cargo este vamos a revisar un poco el código y bueno veremos que tenemos vamos a ver Mirad tengo inicio tengo una variable pues profe sin que se inicia como una matriz o sea cuidado porque ahí voy a meter una matriz bien tengo el documento Element documental una cámara en perspectiva la posición en z hasta aquí ningún misterio tengo una nueva escena tengo un nuevo renderizador hasta aquí ningún misterio tengo un pad para meter archivos jpg ningún misterio una textura de cubo para el quium material para el cubo del fondo ningún misterio una esfera de geometría tampoco ningún misterio Fíjate que de hecho mira tengo un radio de uno lo podemos variar vamos a jugar un poquito pues pongo dos y recargo y tengo esferas más gigantes entre ellas le digo que quiero 0.2 y fijaos que tengo esferas pequeñitas entre ellas vale simplemente para que comprobéis que efectivamente podemos tocar parámetros y unos parámetros tienen su significado en la escena pero sobre todo lo que donde empieza el asunto es en init pues processing no es más que una llamada a una función donde tengo por aquí una función llamada Espera que te lo digo init post processing entonces en init Post processing básicamente creo un render pass que es un New free render pass tengo un buque pass que es básicamente el efecto de postproceso concreto para trabajar con el foco y con la apertura Mirad le doy a apertura está a 0025 voy a poner 0.1 así que guardo y recargo y ahora veréis como hay mucho más desenfoque lo veis si no lo veis le doy aquí a uno y lo que comprobaremos es que hay un desenfoque lo veis brutal veis el desenfoque brutal ahora pongo el render pass es el que abre cualquier tipo de render pass que crea a continuación es básicamente como decir Oye te voy a meter efectos efectivamente eso es lo que dice entonces guardo y recargo Y fijaos que ahora bajándolo a 0.01 pues que así elimino ese efecto de boque por tanto que es este efecto de buque Pues el efecto de boque es cuánto vas a desenfocar hay una cosa que me encanta que es el Focus es quién está enfocado entonces fíjate que yo lo cambio a 0.2 por ejemplo está muy desenfocado el 1 el Focus es Cuál es el punto de enfoque lo que está enfocado es lo que está lejos o lo que está enfocado eso que está cerca Pues si yo el Focus por defecto porque está a uno pero hay veces que te puede interesar enfocarlo de lejos entonces lo cambio a 10 y fíjate espera me ha pasado Fíjate que lo cambio a 10 vale menos que delicado que estamos Ah vale Sí Espera espera la leche sí sí pero voy a empezar a estar un momento Sí psicodélico lo sé vale a ver 1.1 vale 0.9 ahora sí 0.8 Fíjate que lo que está enfocado es la bola aquella que está en el medio no sé si veis que las bolas que están a esa altura están enfocadas las que están más cerca están desenfocadas Y las que están más lejos también están desenfocadas por tanto es que le pido al revés en este caso menos es más distancia lo que tenemos por tanto es que estos parámetros de aquí son los que controlan finalmente son los que controlan realmente cantidad de desenfoque punto de enfoque y el Max blur evidentemente es desenfoque máximo en este caso lo importante en este caso mira Es que tengo un compositor que depende del render si yo quito este compositor nada ocurre entonces Fíjate que acabo de explicar el compositor Fíjate que quito el compositor y el programa dice Valentín alguien fallará Espera rendero 3.07 claro Es que aquí está llamando al compositor eso pero realmente podría haber desactivado esa estoy pensando Vale ahora no da error y yo simplemente lo que hago es Llamar a la función como en cualquier otro proyecto que hemos hecho hasta ahora un momentín la animación por ejemplo al final del todo al final del todo al final del todo eso hay render eso es sí sí Mira esta es la escena con el post procesado calculado pero sin renderizarlo al final Y esta es la escena donde yo le digo no yo no quiero renderizar directamente yo no quiero que los modelos 3D y las texturas me los renderices directamente yo creo que los modelos las texturas antes de renderizarlos se los envíes al compositor el compositor lo va a procesar y entonces me lo renderizas con lo cual es importante para que Ok a ver que hay que desactivado algo más por arriba pues por ahí haber desactivado os está no nos está ejecutando ahora veremos pero Ah vale es que no he guardado ahora vale es importante no solo aplicar no solo capturar los efectos sino que también decirle al programa que quieres usar un compositor de efectos en la primera parte de esta clase vamos a hablar del concepto de mapa de relieve y mapa de desplazamiento entonces me voy a abrir en este caso Blender y Bueno voy a abrir un objeto por ejemplo voy a abrir una esfera voy a crear una esfera de cualquier tipo y lo primero que tengo que hacer como ya sabéis siempre es mapearla quiere decir darle información correspondiente al mapeado darle información para que la Esfera sepa Cómo se le que tiene que aplicar una textura para ello por tanto lo que hago es que me voy al espacio de V editing entro dentro del modo edición pulso la tecla u Y en este caso le voy a decir que quiero un spiller projection una proyección esférica ya que evidentemente para este objeto es la que mejor se adapta Bueno después de haber hecho esto por tanto Pues a pulso la u le digo qué tipo de proyección quiero en este caso es una proyección de tiempo esférico pues lo que hago en este caso es que vuelvo al modo de objeto y me vuelvo a interfaz de usuario por defecto para poder aplicar una textura bien lo que voy a hacer ahora por tanto es que me voy a ir a crear un material ya hablamos ayer o ante Ayer no me acuerdo de que cuando tú creas un objeto de nuevo no tiene material Sí voy a ir por el mtl entonces pincho New y creo un nuevo material en blanco Cuando digo en blanco quiere decir que tiene una difusa blanca que yo puedo cambiar a verde yo puedo cambiar a rojo yo puedo cambiar azul y como veréis cualquier cambio que hago realmente se representa sobre el objeto hasta ahora también hemos visto dejadme que suavice un poco la Esfera también hemos visto que puedo en lugar de aplicar color plano puedo aplicar texturas así que de que os gustaría que fuera este objeto vale venga Así que para ello por tanto voy a water texture me voy a ir al a Google y por ejemplo vale voy a hacer que sea de agua entonces me guardo la imagen podría ser cualquier imagen esa es la gracia y cojo esa textura me voy a texturizado es decir este botón es el de material este botón es el de textura no tengo ninguna textura Así que pincho el botón New pincho el botón New y con el botón de Open con el botón de abrir voy a abrir esa textura que habéis visto que pues tenía en el escritorio bien bueno no estáis viendo nada en la pantalla pero no pasa nada porque le digo Quiero ver el material o por lo menos quiero ver la textura vale Ahí todavía no se ve pero no os preocupéis Porque si renderizo aquí si renderizo claro el problema es que no tengo todavía nada a ver vale si renderizo pues fijaos ahí que podéis ver perfectamente la textura aplicada sobre el objeto la textura aplicada de manera esférica luego incluso puedo seleccionar el objeto Hola cógelo vale no lo coges pues ya lo cogerás aquí puedo el objeto si no Ah ahora Bueno si he salido vuelta a entrar y ha vuelto a aparecer que es lo que debería ocurrir Pero en fin bien le puedo decir incluso que quiero que el mapeado sea UV correcto me gustaría verla también en el material que puñetero vale a ver si me admite por aquí el parámetro de shader shading texture solid vale no me lo admite Así que voy a hacer lo siguiente me voy a V editing entro en modo edición es un estornudo y a continuación lo que hago una vez estornudado es seleccionar la textura con lo cual ahí me vuelvo al modo objeto Y ahí sí que en la interfaz por defecto ahora Ya veré la textura aplicada en el objeto le podría decir que en size quiero 33 y 3 vamos a verlo vale Y a partir de aquí bien Vamos a la influencia de color momentín vale déjame que lo vea esto renderizado perfecto vale fijaos que el parámetro que he puesto de 33 y 3 se aplica pero únicamente cuando renderizo no sé si veis que ya hay más solitas de agua vale No pasa nada también lo que puedo hacer es volver a v editing y decirle que esto quiero que esté más pequeño vamos a verlo default ahora sí muy bien y yo esa textura la acabo de aplicar como textura difusa es decir la acabo de aplicar como una pegatina como un vinilo que está aplicado encima del objeto pero lo que quiero que sepáis de lo que quiero que os deis cuenta es que esta no es la única manera de aplicar una textura se puede aplicar de muchas maneras diferentes lo que hemos hecho hasta ahora por tanto es aplicarla en la texturización difusa pero un truco consiste en hacer lo siguiente Creo un spot déjame que cree un spot le digo que quiero ver material Hay muy bien pongo ahí el spot veis como realmente no tiene ningún relieve ves como realmente se ve que la Esfera está plana Vale pues yo ahora puedo esa textura de hecho incluso aunque ponga renderizado vale se ve que no tiene ningún relieve vale Yo ahora puedo esa textura y decirle No es que esa textura no va al Canal de color su influencia la influencia de la textura no va en el Canal de color sino que va en un canal llamado normal entonces lo que ocurre en este caso de hecho luego el normal lo que puedo hacer es rebajarlo no tiene por qué tener tanta fuerza qué estoy haciendo en ese caso con la con el mapeado Mira mira que estoy haciendo en ese caso con el mapeado pues atención y escuchar las palabras que voy a decir lo que estoy haciendo es que el mapeado simule que hay relieve pero realmente no hay relieve es un truco es mentira Si os fijáis en el borde del objeto veréis que el borde sigue siendo perfectamente plano Aunque aquí parezca que hay pequeñas curvas pequeñas brechas pequeños montículos deformidades Realmente si os fijáis aquí arriba veréis que no hay ni una deformidad pero claro este truco el truco del relieve es un truco muy barato y muy conveniente en videojuegos porque nos permite simular que hay relieve sin que realmente yo tenga que subdividir la geometría tanto como para que hubiera ese tipo de relieve por tanto el primer concepto que os presento esta mañana es el concepto de mapeado de relieve que es un mapeado que es falso Pero bueno muy aparente En definitiva como podéis observar y simplemente lo que he hecho es textura en lugar de ponerla en color difuso la pongo en relieve normal otra cosa que os digo Estoy haciéndolo así Simplemente para demostraros Cuál es el efecto del relieve porque vosotros me diréis Oye esto no se puede aplicar en difuso y en relieve Pues claro que se puede aplicar Ese es de hecho la idea entonces pulso aquí color y veréis que tenéis la textura tanto en el mapeado de color como en el mapeado de relieve doble de Gracia sí efectivamente debe ser lo mismo entonces este es por tanto el primer concepto que ahora veremos Cómo aplicamos dentro del free punto js pero el segundo concepto del que ayer te hablaba tanto y ahora verás por qué es el mapeado de desplazamiento hay otro mapeado un poco más particular un poco más especial que es el mapeado de desplazamiento el mapeado desplazamiento Que fíjate que lo tienes ahí bajo es un mapeado que hace esto que estás viendo en pantalla el mapeado desplazamiento sí que realmente de forma la geometría esto es sin desplazamiento esto es con desplazamiento El problema del desplazamiento es que como verás necesita muchos triángulos necesitan muchos polígonos para poder deformarse correctamente por tanto verás que si yo tengo esta esfera que como habéis visto al principio en wire frame tiene pocos polígonos Pues el resultado del desplazamiento Pues bueno Vale es aparente se nota pero no es que sea muy espectacular ahora si yo voy al objeto y le digo no no yo lo quiero subdividir Pues fíjate que si los subdivido eso es el desplazamiento déjame que lo rebaje un poquito verdad bien momentina Voy déjame que relaje un poquito y le pongo la textura de color vale Ahí y ahora un poquito más vale Y ahora pongo la textura del agua entonces eso es lo que sale lo que os podríais dar cuenta de lo que os podéis dar cuenta es que cuando coge un color claro saca una Arista hacia arriba de hecho lo podéis ver ahí arriba cuando coge un color más oscuro No tan claro hace un valle hacia abajo Lo cual quiere decir que por ejemplo para crear un agua del mar si ahora no lo aplico sobre una esfera sino que lo aplico sobre un plano Pues a la verás Lo que pasa déjame que elimine la Esfera voy a crear un plano voy a hacerlo grande pero claro Bueno voy a mapearlo ya sabes siempre hay que mapear y pam Bueno un grafo me valdrá en este caso vale Y más grande vale bien entonces Fíjate que le doy aquí a renderizar vale Espera le aplico el material de aplico El material de agua y tengo esto de aquí sí hicieron uno por el foco lo quiero precisamente para que me ilumine un poco el entorno vamos a ver lo pongo el material déjame que tiene el foco un poquito más hacia arriba vale y digo mira Este es el objeto solo con difusa Este es el objeto ahora con relieve Fíjate lo que ocurre con relieve con el agua del mar claro evidentemente déjame que me acerque un poco evidentemente si Además del agua de la geometría de relieve le pongo el agua del mar Pues fíjate como Mola más todavía Pero qué es lo que ocurre si tendría que buscar una No es que ahora Busco otras y verás que me la mogollón Entonces qué pasa si pongo en displace Pues si pongo en displays date cuenta que en principio no ocurre nada porque no ocurre nada porque no ya porque si hago un plano efectivamente porque es plano Pero porque es un plano que tiene un solo polígono ese es el problema Claro si yo vengo aquí y le digo que quiero aplicar un subdivisión surface para que nos está haciendo redondo momento le digo sí porque me está subdividiendo como con la nave espacial si una caja se convertía en una esfera Pues un plano se convierte en un círculo pero no pasa nada porque le digo que quiero subir a w eso es vale Pero no pasa nada le pongo unos cuantos más y ya está Entonces le digo esto le pongo x subdivisiones me voy a renderizado Y fíjate que ahora el renderizar Espera que sólo ponga esa textura Fíjate que ocurre esto Fíjate que al desplazar lo que está ocurriendo con el desplazamiento eso bien espera Porque si nos vamos a internet vas a poder comprobar Sí Espera vas a poder comprobar que vamos a ver displacement y sabes que Ocean más que water hay una cosa así por ejemplo vale Así que empiezo a buscar texturas como estas texturas un poco más especializadas y digo Pues nada Me cojo aquí esa textura déjame que la coja aquí cojo Walter displacement Y fíjate como si le doy la resolución suficiente aparecen como las olas del mar cuál dirías que es el problema voy a bajar un poquito la cantidad cuál dirías que es el problema Pues que estoy generando una barbaridad de polígonos y ya sabes que generar una barbaridad de polígonos Es peligroso para lo que es el vale el rendimiento efectivamente además lo que acabo de hacer ahora fíjate Es que le he dicho desplazamiento más relieve y el desplazarse y el desplazamiento más el relieve lo que hace es mejorar ahora pues hay que afinarlo mucho y bueno ahora lo que tendría que hacer por tanto ahora demasiado poco bien Ahora lo que tendría que hacer por tanto es poner una nueva textura cargar ahora espera esta es la anterior vale cargar ahora la textura de antes azul bueno la tenía por ahí la tengo aquí ahí y esa textura va a color Bueno pues también queda curioso sabes Ah no Espera que cargadora que no tocaba bueno queda curioso Porque fíjate que lo más oscuro está de color negro pero parece más como hielo que agua de mar y ahora lo que hago como te decía es que Ah Vaya pues no pero es la buena de desplazamiento pero sí No ya pero ahora Quiero la de color claro la azul y ahora Ah pero me ha cambiado las dos tendría que hacer ahí un multimaterial vamos Sí de una con el color de la otra vale eso era un poco la idea Por tanto esto es lo que estáis viendo cuando yo por ejemplo pongo una demostración como esta en una demostración como esta lo que está ocurriendo aquí en displays Es que fíjate que esta es la geometría original Fíjate los pinchos esto que estás viendo aquí es el mapa de relieve esto que está haciendo aquí normal cuando veáis normal equivale a mapa de relieve está a 0 Esta es la geometría apelada con lo cual yo vengo aquí y le estoy poniendo un mapeado de relieve ves como salen los pinchos por allá arriba ves cómo salen los pinchos ves cómo sale toda esta geometría Pero es mentira fíjate como si miramos el borde del personaje te darás cuenta como realmente no sufre ninguna deformación eso es la textura de relieve que queda insisto muy aparente que parece que esté hablando mal de la textura de relieve pero en absoluto esperar leves fantástica pero si además al relieve lo complementamos con desplazamiento Fíjate que ahí en desplazamiento sí que se deforma la geometría hay en desplazamiento sí que realmente salen digamos los pinchos tanto ahí como ahí vamos a ver por tanto a continuación como implementar esto dentro de fijs y para ello voy a empezar creando la más sencilla de las escenas que podamos y para ello Mirad voy a hacer lo siguiente vamos a ver Me voy a ir a la carpeta a Sam ht dogs me voy a ir a free js y me voy a crear un archivo llamado normal Map punto html este archivo de hecho de normal map va a derivar de uno de los archivos que hicimos el primer día que es cubo punto html O sea quiero lo más sencillo que pueda tener en pantalla por tanto me voy a edit dentro de edit lo que voy a hacer vamos a verlo vale dentro de edit lo que hago es que me voy a bueno abro un cubo vamos a ver un momento vale me voy a cubo me voy a abrir normal punto html y que teníamos en cubo Bueno pues lo que teníamos en cubo si os acordáis será que dibujaba un cubo os acordáis Esto vale pues lo que quiero simplemente en la pantalla es un duplicó el código de cubo a normalmar punto html No creo un cubo sino que quiero crear una esfera Así que creo una esfera y digo geometría es igual a New free Geometry donde recordáis que el primer parámetro es el radio el segundo parámetro son los segmentos en horizontal el tercer parámetro son los segmentos en vertical por tanto quito el box y le pongo un spinner geometric le quitamos el basic material porque os acordáis que lo veis sin material es un material sin sombra ni luz y pongo o bien un zoom material o bien un lamber material así que voy a un lamber material y le digo en este caso que color es igual a cero x ff0000 o sea color rojo así que bueno digo esfera es igual a New free punto mesh a la que le añado la geometría y el material y le digo bueno esfera position y es igual a 150 por ejemplo elimino la rotación y ya está el segundo cubo no lo quiero fuera ya la tenía por aquí fuera y ya está así que si todo ha ido bien no lo he añadido pues muy mal por mi parte porque fíjate que el Slim punto a sigue siendo del cube con lo cual efectivamente tengo que añadirlo de la Esfera no del cube entonces muy bien perfecto Así que ahora lo ejecuto Lo abro con Chrome bien tenemos de momento esto en la pantalla voy a comprobar si tengo que utilizar algún error y un error Excuse no define en la línea 46 pues efectivamente lo que voy a hacer es quitar esto de aquí vale con lo cual madre mía si todo ha ido bien pues me quedo con una esferita con un radio de dos Vale pues dejadme que le ponga radio 20 y la veremos más grande igual le pongo radio 120 y la veremos un poco más grande Alguien me puede decir que era exactamente estas líneas que tengo aquí porque estoy en Canvas perfectamente entonces en el render en lugar de decirle que quiero un New Canvas renderer le digo que quiero un New webgl render Así que guardo y recargo y ya no veo las líneas pero Alguien me puede decir por qué veo la Esfera completamente negra si le he dicho que sea de color rojo porque no tengo ninguna luz entonces tengo que crear una esfera pero a continuación también tengo que crear una luz y esto lo tengo por ejemplo sin ir más lejos en el ajedrez ahí tenía un Point Bueno eso me servirá vale Así que Espera que te lo voy a decir a ver me copio estas líneas las pego en Normal map y por tanto digo light 1 es igual a un New free punto Point Lite o sea una luz puntual le digo que la posición en y es alta la posición en Z es alta y ahí lo tenemos con lo cual si todo ha ido bien pues lo que quiero tener en la pantalla es justo esto que es básicamente pues una esfera digamos que tiene que estar es de color rojo y que tiene una luz de color rojo situada en la parte superior voy a cambiar el material a un material phone Más que nada porque el material lambert está muy bien Es un material muy sencillo De hecho me extraña que te falle antes en lamber que el phone porque el fondo es más complejo Así que cambio el lamber por el phone comprobamos como tenemos ahí la Esfera Sigue estando de color rojo pero si nos fijamos en el material del phone comprobaremos que tiene una serie de mapeados perfectamente disponibles para aplicarle nosotros que os diría yo estamos rozando estamos arañando la superficie del material lo único que hemos usado hasta ahora es el color de la geometría pero sin embargo hay un montón más de maneras en las cuales yo puedo aplicar un mapa o una textura en este caso Estoy buscando las siguientes líneas Mira estoy buscando ahora para el principio de la clase las líneas de Boom map las líneas de normal Map que veréis que es parecido pero no es igual las líneas de displacement y para la segunda parte de la clase para resolver la pregunta del césped trabajaremos con Alfa mapa Sí para lograr entonces me voy a ir por tanto a ver cuál es la diferencia entre Boom map y normal map veréis esta diferencia la puedo ver fácilmente en Google viendo que cuando se me está preguntando por un mapa de relieve se me habla de un mapa de grises entonces pongo Ocean texture displacement Y veréis que cuando hablo de displacement o hablo de Van siempre me van a aparecer texturas basadas en blancos y negros pero en el momento en el que yo pongo Ocean texture y pongo normal Map aparece otro tipo de texturas muy especiales que son ese tipo de texturas que muy probablemente habréis visto en algún videojuego si habéis visto lo típico de por los recursos de cómo está hecho este personaje o cómo está hecho este escenario y probablemente habéis visto esa textura y habéis dicho estas de azul para qué será pues es para hacer el relieve en modo normal Así que lo que voy a hacer ahora va a ser colocar esa textura pero la voy a colocar en modo de mapa de relieve por tanto en primer lugar voy a seleccionar una textura en primer lugar de relieve es decir de grises y digo Ocean texture displacement selecciono esta mismo por ejemplo y lo que hago a continuación es que me la guardo dentro de la carpeta Sam ht dogs nos vamos a free y js y nos vamos a verlo pues por ejemplo me voy a crear una nueva carpeta llamada relieve dentro de relieve dejadme Que guarde esa textura como con el nombre de relieve se va a llamar en este caso relieve punto jpg una vez que tenemos este relieve punto jpg lo que quiero es cargar ese relieve dentro de mi escena para ello una vez más abrimos un proyecto anterior que hayamos realizado Como por ejemplo puede ser el de obj os acordáis la nave espacial Vale pues abro la nave espacial y recordamos como en la nave espacial teníamos vamos a ver no esto es Susan eso es a segundo cubo Sí pero sus años el chimpancé no tiene textura donde cargábamos mapeado y luces Sí señor muy bien punto extra entonces me vengo por aquí y digo textura es igual a cargar esa textura os digo lo siguiente vamos a ver bueno Esto lo puedo dejar así vale me voy a normal antes de crear el material digo bar textura relieve es igual a free punto loadsture y le digo la carpeta es relieve y la textura es relieve punto jpg en relieve cargo relieve punto jpg y ahora lo que hago es que siguiendo la documentación del phone le digo Boom map le digo Boom map sabes que esto lo puedo dejar así dos puntos y textura relieve Así que si todo ha ido bien Vamos a verlo y no ha dado algún error que seguro que da alguno vale me dice lo siguiente me dice fallo al ejecutar esto de aquí Ah sí porque lo estoy ejecutando directamente ya sabéis que lo tengo que ejecutar a través de Sam a través del localhost porque si no me dice que no carga la textura Así que arranco Apache cargo a través de localhost vale Y no sé si os fijáis no sé si se ve decirme si se ve que ese objeto ya no es rojo perfectamente rojo sino que por una parte el color rojo le está dando esa apariencia Pero por otra parte la textura le está dando ese efecto de relieve yo creo que notaréis mejor el efecto de relieve si además de cargar la textura dejadme jugar un poco con la especularidad entonces la especularidad me permite hacer lo siguiente poner lo que yo vamos a ver textura relieve especular especular colores especular es 0x ffff coma y shinys es se escribe Así shinys ahí es 30 Pues no lo sé voy a ponerle 20 si todo ha ido bien el momento ahora os lo pongo si todo dado bien No solo tengo el relieve sino que tengo un brillo especular y el brillo especular me ayuda a que percibáis mejor el efecto del relieve cada engine cada motor de render tiene un concepto de lo que es inicialmente la fuerza del relieve hay algunos que por defecto le dan mucha fuerza y hay otros que le dan por defecto poca fuerza yo en este caso digo Bueno por defecto me parece poca fuerza pero veo que en el phone hay un parámetro que es Boom map scale que por defecto es uno así que vengo aquí y digo coma Boom map scale que voy a poner a 3 si por defecto es uno yo lo multiplico por 3 Así que guardo y recargo y ahí Vais a poder ver vamos a darle más caña voy a darle 30 vale Ah cuidado cuidado me dice Boom map scale no es una propiedad de este material pero yo te digo como no es una propiedad de este material si me lo estás haciendo tú mismo en la documentación Pues bueno Tendremos que ver qué pasa porque es un Mesón material es un messphone material pero aún así Boom map scale pues no me lo está cogiendo como parámetro válido Vale pues nada de momento dejamos ahí voy a hablar ahora de desplazamiento y ya veremos qué pasa con la escala porque me está diciendo que no es una propiedad cuando lo la documentación oficial me dice que sí Bueno pues gracias José Luis porque has visto en el foro que donde en la documentación oficial pone Boom scale Pues en el foro pone que es Boom scale con lo cual pues ya está si funciona recargamos y comprobamos que efectivamente Boom pescale funciona perfectamente y ya está que se va a hacer Pero bueno pero es lo que hay bien vamos a trabajar a continuación con el displacement y vamos a hacer a continuación displacement para que realmente salga como agua de la Esfera No hoy no porque ahora verás Sí hombre Pues a continuación de la misma manera bueno hemos puesto a rotar la Esfera de la misma manera que antes en Blender primero os he enseñado el efecto del relieve y luego os he enseñado el efecto del desplazamiento Pues ahora aquí primero hemos visto el relieve pero ahora vamos a aplicar desplazamiento entonces para ello Mirad veo que tengo un displacement map así que me vengo a displacement Map lo añado y le digo displacement map dos puntos esa misma textura relieve se puede cargar otras diferentes pero de momento vamos a por la misma Así que guardo y recargo y fijaos lo que ocurre es esto vamos a ver no se ve mucho sí que se ve que Los polígonos están deformando pero no se ven mucho vale por tanto para que se pueda ver más veremos aquí que tenemos un displacement scale entonces con display en display displacement scale que por defecto es uno madre mía ya no me cabe la línea le digo por defecto es uno pues le digo 5 Así que guardo y recargo Mirad ahí no sé si veis que está deformado no voy a darle Me voy a pasar un montón voy a darle 50 mirando todos a la pantalla vale ese es el problema qué es lo que ocurre cuando le doy a 50 Pues que al igual Exactamente igual que ha pasado en Blender me doy cuenta de que no tengo suficientes polígonos así que dime cómo puedo tener más polígonos Y cómo puedo dividir pues no es muy fácil acordaos que en el momento de crear la Esfera yo tengo por una parte el primer parámetro que es radio y luego tengo el segundo parámetro que es divisiones en x y el segundo el tercer parámetro que es divisiones en Y fíjate que si yo en lugar de poner 20 y 20 pongo 200 y 200 atención todos a la pantalla porque en la Esfera de puesto 120 de radio 200 segmentos en x 200 segmentos en y lo que hago es que guardo tarda un poquito en cargar pero ese es el efecto entonces ahí verás como tienes una roca de mucho más de mucha más calidad lo divertido de todo esto os lo vuelvo a repetir Comparado un boletín Comparado con Blender Es que la gracia no es el desplazamiento solo la gracia es la mezcla del relieve y el desplazamiento porque daos cuenta que si yo ahora vengo y digo me cargo la a ver Esto lo voy a poner aquí me cargo el relieve me cargo el relieve solo quiero desplazamiento Fíjate que sí que vale que Mola pero no tanto claro eso es lo que ocurre vale por tanto La idea es que solo desplazamiento sí tienes Raquel solo desplazamiento queda pobre solo relieve queda pobre pero si uno las dos cosas ahora veréis en el ejercicio que voy a hacer a continuación Mola mogollón vamos ahora a continuar Aprendiendo la utilidad de más mapas de lambert o de phone y vamos ahora con un mapa que es el mapa de alfa el mapa de Alfa nos sirve para hacer una cosa que se llama máscaras y la mejor manera de demostraros Para qué sirve una máscara es de la misma manera que he hecho antes abriendo Blender pero la diferencia ahora es que no voy a abrir Blender sino que voy a abrir un real Así que me voy a un real está lo tengo aquí en D no perdón Lo único que quiero es que miréis aquí a la pantalla me voy a Epic games me bajo bueno la 410 parece que es la que tengo aquí abierta y hasta la 411 me lo abro me abro alguna escena vamos a ver en un real projects tendré por aquí alguna esta Sí esa parece que sí esa parece que aún a ver no vale súper eso lo voy a copiar me lo voy a llevar ahí que no fijaros aquí vale estoy copiando ahí una cosita ahora veréis que estoy copiando una cosita de 6 gigas efectivamente muy bien entonces una cosita pero es muy chula Ya veréis no vamos a ver en algunos equipos es que cada equipo tiene una configuración un poco diferente en algunos equipos el primario es disco duro de estado sólido el secundario no lo es y por eso primario tiene menos tamaño y el secundario tiene un poco más entonces Bueno estoy abriendo que se abra Entonces ahora no vale Bueno un segundo que está abriéndose hay y lo que voy a hacer ahora dentro de un real Es que le doy a examinar me voy a abrir en un real projects en Shooter game Master Jam me abro este de aquí que es el que tiene la librería que estoy copiando y pegando Así que dame un segundo que ahora se abre claro Es que además estoy copiando y pegando con lo cual Mira voy a hacer una cosa voy a hacer una cosa el lugar de copiar y pegar lo que voy a hacer es cortar Vale entonces Dame un momento se está abriendo Espera voy a hacer una cosa para abrirlo más rápido voy a abrir el unreal engine me voy a hacer mirar un proyecto nuevo sin starter content y lo llamo probando vegetación esto fuera vale Ok crear proyecto este se abrirá rapidito vale Y ahora dentro de probando vegetación es donde en probando no Porque sí porque yo le he dicho prueba de vegetación y aquí no aparece a ver mi proyecto Ah José Vicente unreal projects Vale entonces sí todo lo tienes que bajar Sí un real projects probando vegetación contenido vale Ahí lo pego si todo va bien en un momento se actualizará el contenido vale Vamos a darle Bueno pues si no le digo Pues que cerrar me da un poco de rollo creo proyecto abro la anterior había un segundo y ahora lo acabo de abrir bien Entonces ahora sí abro proyecto probando la vegetación no era probando vegetación por fecha hay Y en este proyecto primero os voy a ilustrar el concepto de pintar césped y luego ahí está y luego lo que voy a hacer es hacer eso mismo dentro de free punto js por tanto Yo vengo aquí a esta plantilla es la de déjame que baja el volumen porque esta plantilla suele tirar muy alto Entonces vamos a verlo y bajo el volumen vale le doy a reproducir Y esa típica plantilla de Shooter vale pero yo ahora en el suelo lo que quiero hacer es pintar césped por tanto me voy a kite demo que es esta librería de vegetación me voy a hervir un mes me voy a foliar me voy a grass me voy a filgrass que es el césped de campo me voy a pintar vegetación le suelto la vegetación es un tutorial Así que quita para allá y no parpadea ninguno más vale con lo cual ahora me vengo por aquí con lo cual le digo que quiero bueno esa densidad igual está bien empiezo a pintar quiero más densidad empiezo a pintar y quiero más densidad y me sale un césped fantástico fantástico Sí muy rápido además y rinde muy bien y encima está animado no sé si veis como estamos viendo con el viento pero es que Fran está diciendo mis expectativas están viendo cumplidas pero es que además pero es que además no no solo te vas a levantar sino que vas a hacer la ola en el momento en el que yo me meta ahí y vea que es un césped de una calidad muy elevada Bueno pero no es que está muy bien está mucho mejor que bien porque si yo miro el truco de cómo está hecho que es lo que vamos a hacer ahora en 3.js me daré cuenta que es justo es un truco barato efectivamente porque Espera exacto Claro Porque si os dais cuenta es lo de antes eso que me decía es un plano no son más que planos a los que se les ha puesto Exacto Entonces yo me vengo a ese objeto y si veo el objeto resulta que ese objeto no es más que una serie de planos que tienen una textura de transparencia Esa es la cuestión así se hace césped en 3D para videojuegos es la manera primaria ayuda de una manera que es poniendo realmente pelitos de geometría Pero eso ocupa un huevo de recursos claro entonces una vez que hemos hecho esto es lo que os decía el otro día que ese mucho que iba volando con pelo y tal que decía es que cutre claro yo os decía no es tan cutre vale que Comparado con una película de Pixar pues es muy cutre pero Comparado con el estado del arte de los videojuegos no estaba tan mal entonces ahora que hemos visto un poco Cómo funciona el truco lo que quiero hacer es aplicarlo voy a darle tiempo real para que veáis que está animado vale lo que voy a hacer es aplicarlo dentro de free punto js Por cierto el mismo truco Por eso digo no toca hoy tocará más adelante el mismo truco que hace que se anime el agua del mar es el mismo truco que hace que parezca que el césped establecido por el viento vale Pero ya lo veremos otro día hoy no así que lo de la transparencia del césped sí lo de la animación del césped no entonces lo que voy a hacer ahora mirar es que bueno dejadme que cierre un real Francia no no no voy a hacer una nueva voy a hacer una escena nueva Porque bueno va pues qué puñetas pues lo pongo bajo de la Esfera entonces Bueno déjame antes de volver antes de aplicar este Alfa a la escena en la que estamos trabajando necesito ir a Blender y crear los planitos esos de geometría por tanto Mirad me voy a crear un plano este plano lo voy a levantar ese plano lo voy a levantar y vamos a verlo y lo voy a mapear siempre hay que mapearlo es un rollo pero hay que hacerlo bien Qué significa esto que me aporta esto Bueno pues voy a ir a internet voy a poner grass texture no texture bien pero Alfa por ejemplo mira y me bajo texturas de las que ya vienen hechas ya están hechas en internet así que está por ejemplo es tiene Alfa perfecto me bajo esta imagen me la bajo Mira a relieve mismo Ahí está bien ya está la pongo Ok venga primero abajo Vale entonces lo que hago ahora es que no hay No es que aquí en el objeto le digo open image me voy a cargar el gas vale Y si miramos el objeto solo por verlo si miramos el objeto bueno tampoco al revés no pasa nada bien con lo cual yo me vengo aquí y nada lo giro y ya está pero la idea Está en que yo ahora puedo duplicar este objeto y digo Pues mira este objeto ahora lo giro y este objeto ahora también lo duplico y lo escalo en Z y ahora los cala otra vez así y ahora escalón en Z y creo unos cuantos planos aleatorios un poco como lo que habéis visto creo que lo gira demasiado hay un poco como lo que habéis visto en un real es que Cuanto más caótico mejor así y tengo ahí un matorral césped parece un matorral de césped pero ya sabéis que como realmente lo he hecho es haciendo cuatro planos es decir realmente lo que estoy viendo es esto pero cuando aplique la textura de Alfa lo que ocurre es esto vale lo veis vamos allá lo que hago ahora es que exporto este objeto lo exportó en formato obj Así que lo exporto en obj me voy a free js me voy a crear una nueva carpeta llamada césped y lo voy a llamar césped punto obj ahora no lo cierro por si acaso ahora dentro de la carpeta de césped copio también muevo también el archivo grass.png y ahora voy a crear un nuevo proyecto que en este caso va a ser derivado del proyecto de relieve no lo veo por ahí está por ahí anormal ahí claro y digo nuevo documento de texto este se va a llamar Alfa punto html e insisto el archivo Alfa punto html el documento Alfa punto html al final va a heredar todo el código que hemos desarrollado en Normal map punto html dentro de Alfa punto html Mirad voy a hacer lo siguiente vamos a ver vale lo que he hecho atención repito es duplicar el código de normal map a Alfa punto html cierto pues ahora vamos allá Así que lo que voy a hacer ahora Mirad es que textura relieve no textura Alfa le digo free punto y me he hecho util punto loa texture y le digo dentro de césped cargo el archivo cómo se llama No me acuerdo se llama madre mía Qué grande pues Hala Pues ahí está se llama grass.png 4933 punto png digo material es igual a New free mesh con material y voy a decir lo siguiente Mirad voy a decir map si todo fuera map es igual a textura Alfa y yo creo que ya Fíjate lo que te digo voy a probarlo ahora claro No creo una esfera sino que lo que hago realmente es crear un vj importar un vj Así que cierro aquí elimino Esto me voy a mapeado y luces importo un objeto cuidado porque me hará falta el loader creo y el manager así que bueno lo copio lo pego no pasa nada momento que lo estoy copiando pegando no quiero la Esfera vale darle un segundo compruebe que todo va bien quiero en césped cargar el césped punto vj un segundo mes con material tú ya El material es material el Cars Shadow en este caso me da igual hoy me da igual para este ejercicio la posición la dejo ahí la escala a 100 ahora veremos vamos a ver si tengo algún error o qué Vengo al objeto le digo que quiero cargar Alfa para comprobar si os lo puedo poner ya en la pantalla para que carguéis bien loader is not Define Ya decía yo así que bueno pues no pasa nada me voy al loader donde está el loader aquí está y lo pongo por aquí recargo obj loader atención is nota constructor porque me hace falta cargar también la librería de importar ovejas que no la tenía Así que ahora recargo Vale dice esfera is no define en la línea 66 Así que nada esto fuera y ya casi lo tenemos vale bien ya está de momento bueno Veo que de momento no tengo esto en la pantalla veo que tengo el césped pero no es transparente pero por último y un momento y ahí ya lo podréis copiar pero por último me voy a alfamap Alfa y digo alfamap es igual coma Alfa map es igual a textura Alfa y por tanto si todo ha ido bien Vamos a verlo bueno empezamos esto aparecía antes eso parecía antes Sí vale No es una Potencia de dos lo cual es cierto lo que voy a hacer es solucionarlo por si acaso me voy a en la textura me la edito en gimp y básicamente lo que me dice es que la anchura y la altura de esa imagen no es una Potencia de 2 deben es muy recomendable antes daba error ahora no da error ahora de Warning pero deben por tanto le voy a decir que sea de 2048 por sí de 2048 por 2048 escalo sobre escribo recargo Vale ahora ya no me da esa ese error pero el alfa map no me está cargando correctamente dejadme que pruebe hacer una cosa y digo le pongo color negro de fondo le pongo color negro de fondo a esto le digo que en colores de saturo y brillo contraste para hacerlo muy brillante y me guardo esto como grass Alfa gadme un segundo y digo textura Alfa 2 es grass Alfa y le digo textura Alfa 2 con lo cual si todo ha ido bien Esto es lo que no me está cuadrando vale copiar de momento eso y vamos a ver qué le falta entonces lo que voy a hacer ahora es que Bueno aparte de arrancar el champ evidentemente arranco Apache Me voy a free punto js me voy a jump me voy a ht dogs me voy a free punto js y dentro de free punto js voy a crear un archivo atención llamado Isla Tropical punto html este archivo de isla tropical por supuesto lo voy a editar con headit y ahora de entrada va a ser un duplicado del archivo normal map punto html Así que no normal entonces Isla tropical va a ser un duplicado de normal map punto html Así que copio todo el código de normal map lo pego en Isla Tropical y voy a hacer lo siguiente en primer lugar ese archivo de relieve lo voy a dejar pero en lugar de crear una esfera voy a crear un plano Así que digo esperar a que lo diga digo geometría es igual a un New free playing Geometry que te diría yo Cuáles son los parámetros de free punto playing geometric pues me vengo a la documentación y lo miro entonces Plain Geometry los parámetros son esto que es el WiFi el hite porque me pones tres parámetros el with el High los widgetmens y los High segmentos por tanto lo que voy a hacer en primer lugar es un plano que va a tener 200 unidades de ancho por 200 unidades de alto y voy a empezar con 200 subdivisiones en x y 200 subdivisiones en y una vez que tengo esta geometría lo que voy a hacer es decir que esto ya no es una esfera sino que es un plano y digo esfera posición y pues en este caso no plano posición y le digo sin punto del plano Porque si todo ha ido bien si todo ha ido bien guardo y recargo Es decir me voy a localhost me voy a free js y me voy a Isla tropical punto html vamos a verlo que me da error en esfera is not define la línea 50 efectivamente la rotación me cargo la rotación y vamos a ver si ahora no da error Así que si todo va bien vale Ahí tengo el plano deformado tengo el plano lo tengo de Cara a la pantalla Así que como os podéis imaginar no lo quiero de Cara a la pantalla digo plano punto rotation punto x es igual a más punto Pi y lo quiero 90 grados Así que más punto pi partido por 2 Así que guardo y recargo y veis que no se ve muy bien pero ahí está el plano voy a poner que la posición y es menos Así que vamos a verlo ahí está posición y lo voy a poner a cero y ahora a ver puede ser y sí pues si está al revés le digo que la rotación es menos más punto Pillo efectivamente vale Ahí sí ahí perfecto ahora juego un poquito y cuando os digo que juego un poquito Mirad quiere decir que ese plano va a ser más grande va a ser de 2000 por 2000 ese plano no va a ser de color rojo sino que dónde estás color rojo a ver relieve aquí pues va a ser de color azul Mar que es Pues no lo sé el momento que os lo digo Mirad a la pantalla y idea porque es que si pongo un color 0000ff sea azul marino pero no es ese el azul que quiero así que Mirad me voy al gym el gym me ayuda digo Pues mira un color así un color verde mar una cosa así pues cogemos la notación html Me cojo el código hexadecimal y lo pego ahí así que digo 0x Y ese color de ahí así que guardo y recargo y ahora el objeto es de ese color bien veo que te empieza a dar un ataque pero momentín porque todavía queda mucho ataque por delante Fíjate que ya tenemos ahí por tanto el mar y puedes ver incluso las olas por ahí moviéndose Pero recuerda que el objetivo de este ejercicio no es solo hacer el mar sino Exacto sino que a continuación lo que vamos a hacer es una isla tropical si me meto en Google encontraré que hay multitud de mapas de altura de terrenos entonces me meto en Google y atención pongo Island y Vais a ver que hay Mirad atención un montón de imágenes de blanco y negro que tienen mapas de Islas Así que seleccionáis la que más os guste la que queráis yo voy a esta de aquí Pero insisto Luego si queréis probamos varias es la gracia de este ejercicio me bajo esta imagen me descargo esta imagen me la guardo evidentemente en pues c champ ht dogs me voy a free js o pqrs no lo encuentro aquí js Voy a hacerme una carpeta llamada isla lo voy a llamar bueno Island hide me vale y ahora en el código atención todos la pantalla porque en el código lo que quiero es crearme esto era un plano de mar pues Mirad digo esto es el plano del mar y si quieres lo que hago es que pongo un separador para que lo veáis claro pues atención todos porque ahora voy a hacer el plano de La Isla Y esto es el plano de La Isla y digo textura relieve Isla es igual a dentro de la carpeta isla y selecciono ese archivo que acabáis de ver que en mi caso es Island High punto jpg material Isla es igual a New free punto maxphone material y tiene esto de aquí tiene textura relieve isla el displacement es textura relieve isla y cuidado vamos a ver espera esto es Geometry isla aquí Geometry isla y por tanto digo plano Isla es igual a Geometry Isla al que le pongo el material isla plano Isla lo que sea claro Isla bien Ahora le digo que quiero aplicar Mirad mi atención al plano una textura por rollo terreno y rollo tierra pues una cosa así capturó el color que para eso tenemos el gimp lo pego y vamos a verlo Ahora quiero mil y display Méndez 150 un momento que lo comprobamos también un segundo donde está el croma Aquí bien un momento que lo comprobamos y recargo Y si todavía bien pues tengo una isla en medio del mar igual es un poco grande Así que vengo por aquí y digo Pues mira una isla de 500 por 500 hay vale Y si os fijáis tengo el mar con sus olas y sus desplazamiento y lo que queráis pero es que además en medio del mar tengo una isla y lo más importante de esta escena es que no he importado ningún vj todo lo he hecho con dos planos y texturas pero un momento que no hemos acabado ahora haremos el cielo de fondo no siempre estoy azul no siempre tenemos que usar un phone hay veces como vamos a comprobar que de hecho conviene usar un mes basic material así que Mirad me voy a venir ahora por aquí y digo por aquí miradme por aquí ahora creo un cielo de fondo crear un cielo de fondo realmente sencillo porque simplemente consiste en que creamos una esfera así que por tanto digo bar Geometry fondo o geometría el cielo Por ejemplo baryometría y cielo es igual a New free fire Geometry para la puerta al revés Geometry y le digo que el radio es 500 no 5000 segmentos 20 y el cuarto parámetro sobra ahora digo bar textura cielo es igual a free punto y punto loa texture Island jpg Bueno pues no lo que voy a hacer es una textura que ahora os enviaré un momento 512 por 512 mirando un segundo es la textura que se hace en gym se hace muy fácil a ver dónde está Skype aquí Horizonte del mar una textura que viene predeterminada en Blender como un Horizonte me la exportó en C en jump en ht dogs en free y js lo visto por ahí Freddy js como Isla como cielo punto png así que me lo importo como cielo punto png y digo material Isla Mirad material Isla material cielo realmente en este caso va a ser un New mes basic material donde simplemente le voy a decir que mapa dos puntos textura cielo muy bien Así que guardo y recargo y digo lo siguiente vamos a ver pues aquí cielo es igual a free punto mes Geometry cielo material cielo y ya está y sin puntuado cielo si todo ha ido bien al hacer esto podremos comprobar como al recargar la escena vamos a verlo vale No estoy viendo el cielo pero también hay que tener en cuenta que es que el plano de corte es de 5000 Ah y luego aparte Sí eso te iba a decir y luego aparte vamos a verlo bien ese es el problema pongo 100 por ejemplo dejadme verlo ahí no sé si lo veis pero tengo el mapa puesto ahí luego también es que al crear la cámara ahí lo veis quiero confirmar que la cámara no tiene un recorte demasiado fuerte y resulta que sí porque le estaba poniendo un plano de 5000 pero es que la cámara tiene un recorte de mil con lo cual le pongo 100.000 Así que voy a probar ahora a ver si hay suerte pongo 5 000 recargo a ver si no me hace falta lo de duplicar normales sí que parece que va a hacer falta vale Así que de momento copiar eso vale Y ahora vemos cómo hacer un mapa a dos lados para realizar el rizo con este ejercicio Mirad lo que quiero que me digáis lo que quiero es animar la cámara y por tanto voy a decir bar cam Z es igual a menos 1000 voy a probar y digo can Z más igual a 0.01 y voy a decir Camera punto position punto Z es igual a camiseta si todo ha ido bien Esto me permite tener lo siguiente vamos a verlo no sé cómo quedará bien De momento no veo nada Creo que debería haberlo hecho al revés probablemente a ver bien Igual es que la camiseta es mil y tengo que decirle menos igual todo esto de aquí ahora sí ahí había entrado vale vamos a verlo vamos a ver cam Z es igual a 100 voy a probar 100 Ay No mira ahí estaba 1000 estaba bien y fijaos no sé si lo veis cómo voy volando por el cielo vuelo muy poco a poco verdad Entonces voy a ponerle 0.1 y fijaos como lo que ocurre Es que tengo un vuelo de cámara porque vuelas mal cuidado eso cuidado y ahí si os fijáis Pues tengo un vuelo de cámara como principio de un videojuego donde lo que estoy haciendo es ir hacia la isla vale con lo cual Pues eso animado la cámara y a ver si puedo encontrar una forma fácil para no liarnos con mapeado de hacer que la texturización esté en marcha Así que un segundín me voy a YouTube en YouTube lo que voy a hacer es que me voy a bajar a ver si encuentro texture displacement texture si no lo creo yo dentro de Blender sí No pues ahora lo voy a hacer yo Mirad os lo paso me voy a ir a Blender en Blender me voy a crear un plano ese plano lo voy a subdividir a ese plano le voy a crear le voy a aplicar un Ocean displacement texture y bueno no sé una textura así más o menos guarda imagen como isla se lo aplico como textura de desplazamiento vamos a ver displays textura la abro en césped isla esta creo que es bien Así que ahora vale lo que hago es que le quito fuerza vale un poquito más de fuerza vale ahora en la textura lo que quiero en el texturizado en image mapping el repite no vamos a ver Sí pero no porque lo que quiero es que se vaya moviendo nuevo material que tiene esa textura ahora en offset le digo que quiero que se vaya moviendo pero no lo hace vale muy bien esto quiero que sea sedless Wow eso quiero que sea estoy viendo ahí V efectivamente Ah es que no le he puesto proyección a este plano un rap y solucionar así que me voy a default Ahora sí y ahora observaremos como en offset se va moviendo el agua cierto por tanto ahora lo que hago es que creó una cámara la cámara estará en 000 como el plano que también está en 0000 y cojo la cámara y la levanto hacia arriba esa cámara por tanto tiene que al final ver el plano esa cámara tendrá 512 por 512 y en la textura del plano lo que quiero que ocurra es que el parámetro este animado quiero decir con esto que activo la animación me voy a la textura y le digo Aquí tienes un offset y aquí al final se ha funcionado correctamente tienes otro objeto si esto ha ido correctamente aún vale el offset no me está dejando no tienes a colgar verdad Sí pues a ver si puedo bajar alguna textura de internet porque a ver Bueno pues me podría valer vamos a ver porque esto parece que está un poco colgado pongamos que me vale esto es un gif así que me voy a isla esto es agua creo que el gif así directamente no me lo va a pillar lo juraría yo pero vamos a probarlo Entonces esto es vamos a ver Esto es el plano del mar esto es isla agua animada punto gif vale ejecutamos déjame que cierre por aquí un montón ejecutamos Yo diría que no haya cerrado la página que quería bien Por tanto tengo ahí ya el agua animada necesito convertirla a un vídeo Con qué puedo convertir un gif a un vídeo Pues con eso Por ejemplo Sí claro y frío js hay muchas es una forma de hacerlo efectivamente Así que añade un archivo gif el enlace será enviado a esta dirección de correo electrónico 13% Por cierto que he cerrado la página que me interesaba sí no pasa nada Pues mira aquí Ocean movie eso vídeo texture esas vale Cómo va el gif bien completo muy bien con no soy un robot que lo sepas y convertir Así que si todo ha ido bien en un minuto vale lo que haré ahora es cargar el vídeo como parece que sí como gif el vídeo como mp4 lo meteremos como textura animada de mar vamos a ver we transfer nada Descargar MP4 me lo bajo como agua punto mp4 y ahora lo que voy a hacer es esto vamos a creo el elemento de vídeo muy bien vale por aquí esto es el plano del mar creo el elemento como vídeo el vídeo es en Isla cómo lo he llamado agua punto mp4 vídeo load video Play sí puede ser tres extensiones mp4 o gg y web m que son las tres extensiones que pilla html Entonces vamos a ver por aquí bien Entonces esto ok vídeo emails vale vídeo y vídeo texture vale todo para dentro y por tanto al final muy material free dabel Side vídeo texture Vale pues al final al plano le digo displace video texture los triángulos Ah vale a ver qué error da esto vale de momento error no da sí sí no sé si se está haciendo algo pero Espera vamos a comprobar que agua mp4 vale realmente tiene algo Claro pero esto realmente tiene algo de o sea tiene desplazamiento quiero decir si yo pongo aquí 150 Realmente está cargando algo parece que sí pero es que todo el vídeo es igual de fuerte vale voy a tratar el vídeo y lo vuelvo a meter la idea de esto es que ahora en map le digo realmente no es más es color FX y era no me acuerdo era me voy al gym y evitó un color verde mar ese color ahora me vengo al proyecto y bueno lo que no me acaba de cuadrar también te lo digo eso lo que no me acaba de cuadrar es que no aparezca ahí es como el 50 por cien . Ah ya me cuadra y eso es porque el vídeo originalmente tiene 256 por 256 pero yo Exacto yo he hecho un Canvas de 480 x 204 256 por 2 5 6 Así que ahora recargo por aquí con lo cual ahora veremos que tenemos un agua gigante vale con lo cual únicamente nos quedaría trabajar con el mapeado Y eso lo tendría que buscar Pero bueno por lo menos tenemos ya hay un agua puesta entonces free js mapping peeling Entonces mape sí para que se repita Si está así está textura y repito quieto vale a ver si hay suerte Ah esto esto vale a ver si hay suerte y le digo vídeo texture claro es que una cosa es repetir una textura de vídeo y otra cosa repetir una tercera O sea no haces nada normal Vale entonces bueno probamos probarlo va entonces le digo vídeo texture todo sea por la cara de ilusión de Alex entonces vídeo texture vídeo texture no lo quiero repetir mil veces con repetirlo 10 yo creo que ya aparece ejercicio igual queda bien entonces recargo sí No es correcto Bueno sí a ver fijaos que en cuanto al mapeado es agresivo pero el problema hay como os decía antes es que tengo muy poca definición muy pocos polígonos y claro el programa desplaza lo que puede pero será Vengo al plano y le digo que le pongo madre mía 2000 por 2000 polígonos el mogollón Entonces le digo también el bumpers que él sobrepongo a dos no sé si empezáis oír no sé si es muy ventilador o una taladradora que hay por ahí arriba ni exacto no quiero ni imaginarme la ram que estaría gastando Y fíjate Parece que sí no están ellos bueno vamos a ver si bajamos un poquito no sé estaba 200 pues 500 vamos a verlo madre que ahora no podré ni cerrarlo no lo había creado Sí vale Isla Tropical y bueno Vale pues ahí va estando siguen habiendo muy pocos polígonos por lo menos ahora tenemos la animación esta del agua del mar con los pocos polígonos que hay pues evidentemente esto es lo que ocurre tendríamos que afinar más claro y todo con efectivamente sí no A ver es que tú puedes poner dos tipos de desplazamiento diferentes eso escucha tú tienes un desplazamiento Exacto para las olas o sea para las solitas estas de aquí y luego le puedes poner otro desplazamiento que sea una barra blanca que lo que hagáis Hola que va barriendo hacia la derecha vale Pero bueno ya lo veremos Así que Hala vamos a hablar a continuación de luces arrancamos el Sam y vamos a ver por tanto los tipos de luces que vamos a encontrar dentro de free punto js realmente las luces aquí os tengo que decir que no son Realmente de frío js Si no son de web gl y al final son de Open gl simplemente lo que encontramos es un traductor para parámetros de Open gl a través de free punto js me voy a la carpeta de proyectos nos damos a vamos a verlo nos vamos a hacer y js y voy a cargar en este caso voy a crear en este caso un archivo llamado luces punto html en este archivo luces. html que por supuesto voy a cargar tanto en el editor como en el navegador localhost barra free js/ luces punto html bien en este archivo voy a copiar el código de el archivo que hicimos ayer el de normal mapa el de normal Maps os acordáis Tenía algo relativamente sencillo como era una esfera y luego ya pues con sus parámetros no entonces copio todo el contenido que tenía dentro de normal map lo pego en luces punto html y simplemente lo que quiero es hacer lo siguiente Mirad vamos a ver voy a la parte de creo una esfera elimino la Esfera porque lo que quiero es crear una caja Así que para ello me voy a creo una geometría le digo que es una Box Geometry y le digo que va a tener en este caso pues 200 vamos a verlo 200 coma a ver en Z es donde vale 200,200,20 no quiero textura el material va a ser mucho más sencillo Así que el material se queda en un simple color rojo ahora luego lo cambiaremos de hecho de color blanco creo realmente el cubo y le digo esfera position Z es igual a 150 realmente no es una esfera vale esto lo voy a llamar pared por tanto digo pared pues pared es igual a New pared position y pared así que por tanto borro de aquí algún comentario que ya no hace tanta falta por tanto si todo ha ido bien no sé si habrá ido bien Vamos a verlo si todo ha ido bien recargo por aquí bien parece como que haya un error y el error dice esfera is not Define en la línea 45 pues efectivamente la animación la quito Así que tengo esto de aquí lo que he hecho es crear eso de ahí así que guardo y recargo y Mira tú por dónde que veo pues una pared en el entorno lo que quiero a continuación es crear una segunda caja y si esta caja ha hecho las veces de pared Pues en este caso lo que voy a hacer es un suelo por tanto simplemente voy a duplicar toda estas líneas digo que geometría es igual a otra caja la diferencia es que en este caso en lugar de ser 200-220 Va a ser 220 200 es decir una caja mucho menos alta que amplia y profunda el color de momento lo sigo dejando en rojo Esto no es pared esto es suelo Así que suelo posición y voy a poner 150 y añado a la escena el suelo con lo cual guardo y recargo y observamos que tengo eso en pantalla bien pues ahora voy a posicionar cada uno de estos objetos para que tengan una forma un poco de l de pared en l Así que para ello lo que hago es lo siguiente la posición en y aquí la pongo a menos 100 y aquí la posición en Z la pongo en menos 100 y por tanto si todo ha ido correctamente lo que tengo es pues simplemente una pared con un suelo tengo una pequeña l por último Pues bueno no estaría además que hiciéramos como una bolita apoyada en el suelo Así que digo vale Geometry es igual a unas fire Geometry que tendrá un radio de 30 con 20 iteraciones y 20 iteraciones también de color rojo de momento al menos free punto mes no esto es esfera posición y es igual a de momento cero no sé dónde aparecerá y añado la Esfera Así que si todo va bien veremos Cómo tenemos por ahí bueno está todo un poco quemado verdad tenemos por aquí Pues un suelo un plano y una esfera y ahora ya pues empezamos a jugar un poco con pues la longitud de la Esfera quizás que esté un poco más cerca del suelo intentamos apoyarla sobre el suelo que no desaparezca eso sí vale y bueno simplemente pues ahora voy a decir vamos a verlo esto es esto que es esto es la luz esto es Ah vale Espera que cuantas luces he metido yo claro no fuera quita me he rallado yo copiando y pegando Hala luces claro Ya decía yo aquí que quemado está esto sí solo hacía falta una voy a dejar la luz aquí arriba y así quedará Claro que es luz que es pared y que suelo sí no pasa nada luego lo que pasa es que no sería animable no sería cambiable Pero es perfectamente posible pues lo que tienes que hacer Entonces es Desactivar en animate bueno o no vale entonces Bueno luego como os decía lo único otro que quiero hacer es que pues la pared igual la quiero ampliar un poco más y el suelo Igual también lo quiero ampliar un poco más no sé para que haya pues un escenario un poquito más grande en el que trabajar vale Así que como veis por tanto nos creamos ese escenario ahí ya no más porque si pongo un 70 Pues ahí lo que ocurrirá es que se mete en el suelo Así que le digo 50 y con eso podemos empezar a trabajar Vale pues lo que ocurre por tanto en este caso es que quiero empezar a hablar un poquito de luces y qué es lo que ocurre Bueno lo que ocurre en este caso es que tengo una freepoin light ya creada quiero decir que si por ejemplo esta luz le bajo la intensidad a 0 pues tengo todo quemado si le subo la intensidad a uno pues tengo luz es decir demostración de que si estáis viendo algo en la escena es porque hay una luz Bueno pues curiosamente esa luz la quiero poner Mirad aquí la quiero poner no vamos a ver Live position y le digo subo 50 y light posición Z quiero menos 90 Porque si todo va bien ahí está si todo va bien lo que quiero hacer con la luz es pegarla a la pared vamos a poner menos 80 ahí justo ahí Eso es lo que quiero de la luz lo que he querido con la luz por tanto si queréis la puedo subir un poquito más hasta 80 no sé pero lo que quiero con esa luz es que veáis que una point light que de hecho el mismo nombre te lo está diciendo es una luz puntual en un mundo virtual es algo así como poner una bombilla en la pared pero una bombilla sin pantalla ni nada una bombilla a Palo Seco qué es lo que ocurre con una bombilla Pues que como podéis ver y este es el primer objetivo de la clase de hoy el que veáis claramente este esquema la bombilla ilumina en todo el entorno la bombilla ilumina en los 360 grados del espacio mientras os estoy enseñando esto vamos también a free punto Point Lite y aquí todo lo he cortado sin querer vamos también a free punto Lite delante justo delante de la pared Claro porque está adelante al estar tan pegada no llega a iluminar realmente Claro Mira fíjate para que tengas una idea Mira la luz que está pegada al techo y dice si está en el techo porque ilumina mucho más la pared que el propio techo pues por lo mismo vale porque tendría que volver con lo cual es lo mismo pero aplicado Sí y eso también se puede simular Sí una Mira láser bien conviene echarle un vistazo a la luz a los parámetros que tiene la luz y empezamos un poco a leer dice mira afecta a los objetos que usan el mes lambert y el mes Funk lo cual ya de entrada es interesante saberlo a continuación por tanto vemos que tenemos freepoin light Y esto es lo que quería el constructor nos dice que se aceptan cuatro parámetros que son el color la intensidad la distancia y la caída el color ya lo estamos viendo el color es este de aquí el 1 es la intensidad lo podemos aumentar lo podemos digamos lo podemos disminuir el cero es la distancia de la luz donde la intensidad será cero Pero cuidado cuando la distancia es Cero en ese caso La distancia es infinita eso suele ocurrir mucho en programación Cuando ponen cero es infinito Pero qué pasa si pongo por ejemplo 10 Pues si pongo 10 lo que ocurre es que guardo y recargo y la luz decae demasiado Qué pasa si pongo 100 pues en ese caso la luz decae con un poquito más de distancia Qué pasa si pongo 1000 pues en ese caso la luz tarda más en decaer vale por tanto es el radio en el que ilumina la luz y luego dentro del radio en el que ilumina la luz tengo otro parámetro más que es el parámetro de decae Entonces el parámetro de decay nos permite trabajar con la opción de decir cómo cae la luz hay mucho al principio poco al final cae poco al principio y mucho al final cae linealmente cae el logarítmicamente vale esta no se usa tanto luego a partir de aquí esto es el constructor Pero tengo una serie de propiedades Claro en este caso digamos hay una cosa que es el power que no es la cantidad de luz si no es la potencia de la luz intentando hacer un modo físicamente correcto aunque ya os digo le tengo muchísimo cariño a 6.js pero no es una intención físicamente correcto desde el punto de vista de la luz vale por tanto no os hagáis ilusiones con eso de ahí que pone físicamente correcto bien la distancia decay y en este caso la luz tiene la propiedad de poder tener sombra entonces Bueno luego aparte tengo un método o dos así que diría por ejemplo vamos a ver diría light 1 punto Shadow es igual a true esto ya sabéis no va a hacer que automáticamente la luz proyecte sombras sino que tendría que activar también lo de las sombras en el renderizador y las sombras en cada uno de los objetos os acordáis de recipm shadows y cast shadows vale Pero bueno simplemente que sepáis que se puede no es tanto el objetivo de la clase de hoy porque eso ya lo vimos el otro día el objetivo más de la clase de hoy es que veáis qué tipos diferentes de luces hay bien pues voy al siguiente tipo de luces de hecho Mirad ya que estoy en la documentación me voy a object 3D dentro de Light y veo que dentro de luces y casi que incluso hay filtro por aquí yo tengo estamos trabajando una Spotlight Tenemos también una Spotlight Shadow vale que es básicamente lo mismo vamos a ver vamos a Perdona estamos con la Point tienes razón bien entonces a partir de ahí ahora sí saltamos a la Spotlight entonces la Spotlight que es esta que estamos viendo aquí esta que estamos viendo aquí tiene una característica muy especial pero sobre todo aparte es una point light que puede proyectar una sombra en una dirección y esto es lo que os tiene que importar con un cono de caída y por tanto vamos al constructor también el constructor aquí tenemos el color la intensidad la distancia pero luego tenemos el ángulo y la penumbra el ángulo penumbra ahora verás Para qué sirve Entonces por tanto lo que hago es que quito Point pongo Spotlight no sé Spotlight no te va a decir la peli esta que van al sol para echar una bomba y que se es que es algo así Spotlight ahora me acordaré bien entonces color intensidad distancia y ángulo en ángulo voy a poner más punto pi partido por 2 que son 90 grados Así que guardo y recargo Y veréis qué ocurre esto fijaos que la luz solo está proyectando luz por eso quería ponerla en la pared para que lo veáis bien solo está proyectando luz en la mitad inferior Qué pasa si ahora le digo que ese más punto pi partido 2 lo parto por cuatro pues lo que ocurre es que fijaos que se cierra el cono se cierra el cono proyecta luz únicamente en esa posición del cono Qué pasa si ahora lo divido entre 6 Pues que el cono se cierra más Qué pasa si ahora lo divido entre 8 Pues que el cono se cierra más todavía luego Cuál es la diferencia entre una point light y una Spotlight que la point light es una bombilla que ilumina en los 360 grados del espacio mientras que la Spotlight es una luz que únicamente barre un cono Y el radio de ese cono es el radio que tú digas sí como si tiene la campana como si fuera una bombilla metida dentro de una campana y la campana digamos que limita su radio de acción a continuación vamos a ver el parámetro de penumbra entonces para trabajar con la penumbra fijaos que la penumbra básicamente es el porcentaje de Spotlight que se atenúa gracias a la penumbra por defecto es cero pero yo por ejemplo voy a poner 0.2 Fíjate que entre la luz y la sombra hay un límite muy duro pero yo ahora guardo y recargo Y si os fijáis con 0.2 hay un límite más duro pongo 0,5 perdón a más suave quería decir pongo 0,5 y hay un límite más suave todavía y si pongo uno que es el máximo de ese parámetro tengo un suavizado lo máximo que me permite la luz Por cierto veréis que yo le suelo tener bastante cariño a las luces de tipo spot por una razón muy sencilla y es que ahorran mucha más memoria que una luz de tipo ovni pongamos que yo tengo una luz en la pared pero solo quiero iluminar lo que es el objeto al suelo si yo pongo una luz en la pared e iluminó el suelo solo se calcula la luz que se proyecta al suelo no se calcula nada de luz por aquí si yo pongo una ovni lo que ocurre con la ovni es que aunque yo no use toda la luz que se proyecta por aquí realmente sí que se tiene que calcular Por tanto la ovni suele gastar bastante más memoria y proceso que la luz de tipo Spotlight vale quería decir una Point Sí es que por yo por deformación de muchos años me llamo ovni de omnidireccional vale pero es spoink cuando digo ni que decir Point no no es otro rollo ahora vamos a ello no tiene nada que ver entonces el siguiente constructor bueno es el decay vale el decay es lo mismo que os decía antes que es la cantidad de caída estas dos por tanto son dos de las tres luces principales de 0.js donde la tercera luz principal es directional light pero debéis entender que la dirección allight es una luz que no tiene nada que ver con las otras dos son luces que provienen de un punto muy concreto veréis una light no derecho no es una luz que proviene de un punto es un haz de luces paralelos vemos el constructor y vemos que tenemos directional light Y tenemos el color y la intensidad y no hay nada más entonces fijaos que vengo por aquí y digo pongo un Direction and light y le digo color e intensidad y todo lo demás me lo puedo ahorrar De hecho no tiene caída la luz direccional Y ahora os explico por qué Y fijaos que lo que tengo es como una luz infinita en este caso no se ve Esta pared porque la luz de direccional por defecto cae de arriba a abajo y justo Pilla a este a Esta pared de color negros a la piña justo de refilón Pero si yo vengo por aquí y digo like light rotation x es igual a más punto pi partido 8 Lite número uno mejor entonces recargo no es menos más punto Sí el Spotlight también cae hacia abajo por defecto Vale pues un segundo que ahora mismo tengo que ver que eje es el y no creo y el feto Bueno ahora veremos que ejes Vale ahora mismo no lo Pillo el eje Pero bueno ya lo pillaré pregunta eso es no no si Cojo un Point a su foco su vale su radio sí No desde luego no a ver sigue gastando más que un Spotlight pero gasta menos que unas que una Point Live desbocada infinita efectivamente claro vale os cuento os voy a contar Cuál es el sentido de una dirección al light porque generalmente la Vais a usar bastante en los juegos esto es la Tierra Y esto técnicamente es el sol bueno no entonces la cuestión está en que podríamos pensar que el sol Aunque tiene un volumen mucho mayor que la tierra pero el sol está tan lejos que apenas digamos se percibe como un punto quiero decir con esto que si voy a Google por ejemplo y digo San Earth real scale vamos a ver si no pero Espera distance porque me pone el tamaño hay Vale entonces eso es justo vale miro la imagen y te dice mira Esa es la escala real ese puntito es la Tierra y la Luna y no lo amarillo que te lo están marcando si no ese puntito de dentro es el sol para que os hagáis a la idea de que el tamaño del sol es gigantesco pero que finalmente La distancia es mucho mayor por tanto podemos decir que si la tierra es un punto el sol es otro punto a una distancia muy grande Bueno pues lo que ocurre en este caso es que si tengo un punto aquí y tengo un punto aquí digamos que yo empiezo a trazar rayos Mirad eso es el sol es la Tierra así que tras un rayo por aquí trazo un rayo por aquí te das un rayo por aquí Ese es el sol emitiendo radios Gracias rayos trazos rayos el sol podríamos decir que es algo así podríamos considerar que es como una Point Lite cierto pero si medimos la distancia relativa del sol a la tierra si asumimos que sea cierto cuidado si asumimos que no me da lo suficiente si asumimos que sea cierto pero que esto si asumimos que sea cierto que el sol se comporte como una Point Lite Qué pasa aunque los rayos sean concéntricos qué pasa con los rayos del sol cuando llegan a la Tierra Pues que prácticamente son paralelos quiero deciros con esto y esto es una prueba que podéis hacer ahora luego cuando lleguéis a la calle cuando lleguéis a casa que si yo arranco Blender por ejemplo yo arranco Blender y esta prueba esto de hecho esto que os voy a contar no es ni siquiera informática gráfica esto es dibujo técnico del siglo XVIII o dibujo artístico del siglo 18 veréis con una luz de foco una luz de foco es aquella con la que la luz parte de un punto concreto por ejemplo en tu casa una lámpara eso es una luz de foco si yo cojo y le pongo un cubo comprobaréis que insisto Esto no es que estoy contando yo una película sino que lo podéis probar en casa comprobaréis que la sombra de la caja se deforma veis como la sombra es más grande que la propia caja si yo miro ahí digamos que esta parte de arriba de la caja es más grande la sombra que la propia caja es decir con luces puntuales con luces cercanas es normal es esperable es perfectamente entendible que la luz de la sombra se deforme sin embargo con luces lejanas con luces paralelas voy a cambiar esta luz por una luz de tipo San de tipo sol lo que en serie punto js es una direccional fijaos Sí y con sombra y todo revisado vale fijaos que la sombra aparte de que la intensidad es muchísima Aunque fijaos que la sombra no se deforma veis el mismo caso que donde antes la Spotlight me hacía una sombra más grande y por tanto distorsionada el sol como tiene haces paralelos no medios obsesionada la sombra la dirección online por tanto es una luz completamente indicada para representar la luz del sol mientras que la Spotlight es una luz perfectamente indicada para representar luces de interior luces artificiales podéis comprobar esto cuando lleguéis a la calle y cuando lleguéis a casa sin ningún tipo de problema porque esto no es informática esto es la vida real entonces podéis comprobar que ponéis un objeto por ejemplo con la luz del sol con la calle un día soleado un objeto Como por ejemplo el móvil lo ponéis así fíjate por ejemplo ahí en este caso la sombra se va a distorsionar por qué Porque la luz aquí en un interior proviene de un punto prueba esto y luego si quieres con otro objeto hace una foto prueba esto en el sol y verás que a la luz del sol la sombra no se distorsiona porque cuando la luz del sol llega a la tierra es prácticamente paralela por tanto podríamos decir al final de la jugada que en la naturaleza no existen haces de luces paralelos sino que solo existen haces de luces concéntricos pero sin embargo por simplificación la luz del sol se considera una de luz paralelo para no tener que hacer una point light tener que enviarla al infinito para que entonces cuando llegue a mi escena la luz sea paralela vale por tanto Spotlight para luces de foco luces de casa La dirección al light para la luz del Sol y cómo hacer una luz del sol si haces un juego y es de día pues era muy común Por eso digo que la dirección online tiene una gran importancia en el desarrollo de cualquier juego que se desarrolle digamos en la luz exterior por supuesto mira pero son sencillísimo Mira bueno primero a ver qué consiga rotarla porque claro voy a poner más punto ahora todo o sea Exactamente igual vale un momento Ah será Ángel pero bueno la dirección al live a el target Así que voy a decir light 1 punto Target es igual espera Target si Ok fantástico Target que ahora mismo no sé si son igual o con esto 0,0,0 ok vale es nota function luego es igual a 0,0,0 a o targetx Target y z vale punto x es igual a cero y es igual a 0 Z es igual a cero Vale entonces ahora te digo la x es igual a 100 no sé si me has hecho algo no vale déjame buscarlo Bueno pues Fran has encontrado esta solución vale de que bueno en lugar de cambiar el target cambio la propia fuente de la luz en este caso por tanto le estaríamos diciendo que el propio emisor O sea no el punto al que apunta sino el emisor está en 10.000 y esto como os podéis imaginar nos abre las puertas a la pregunta que estabais haciendo de Cómo simular un recorrido de la luz del día pero Recuerda siempre que tengas una duda La respuesta es desplazamiento no trigonometría Entonces en este caso por tanto eso es entonces mira yo voy a poner por aquí bar sol x es igual a cero bar sol y es igual a cero y digo bar ángulo sol es igual a cero Eso quiere decir que yo ahora por ejemplo bueno la X La y Igual me la puedo ahorrar entonces vengo aquí momento es la X La y así y digo esto es mil por más puntos de ángulo sol esto de aquí es Mil por más punto SIM de ángulo sol y en la z dejamos cero claro ahora como os podéis imaginar le voy a decir ángulo sol más igual más 0.1 por ejemplo y le voy a decir light 1 position set y duplico todo esto de aquí lo que va a ocurrir por tanto es que si todo va bien Bueno tengo demasiado rápido verdad podría hacerlo más lento discoteca pero si os fijáis y lo hago más lento pues ya tengo por ahí un discurso del Sol y si ahora lo pongo a tres decimales pues evidentemente lo que tendría es un juego Ahora sí fijaos en el que muy poco a poco muy poco a poco la luz del sol va subiendo va discurriendo y bueno al hacerlo con trigonometría por tanto lo que está ocurriendo es que luz del sol hace un círculo que es justo lo que yo quería por eso decía al principio del máster que la trigonometría es esencial para el desarrollo de cualquier juego pero también os digo que trigonometría básica es decir fijaos que estamos usando y no usaremos mucho más seno coseno de vez en cuando alguna tangente o arcotangente y con eso vamos a poder hacer muchas cosas a continuación os voy a contar una luz que me gusta pero que tiene su Pero mira si yo miro la luz del sol me doy cuenta de que realmente es muy dura y esto no solo pasa con la luz del sol pasa también con la spoty con la ovni pero daros cuenta que es lo que ocurre en la zona de penumbra en la zona de penumbra tengo una sombra completamente negra no tengo nada de rebote de luz porque en free punto js ya me gustaría a mí pero en tribu.js no va a rebotar la luz habría que rebote vamos yo rebotaré entonces pongo sipper de alegría entonces pongo Friv js Direction online por ejemplo para ver los tipos de luces para ir a la documentación entonces pongo like y vamos a ver a continuación algo que podemos encontrar o bien como ambienlight o bien como en misfier Lite la idea Está en que la luz más antigua es la ambientlite es la luz de menos calidad de hecho la vimos el otro día os acordáis con la nave espacial nos permitía rellenar algo de luz vamos a trabajar con la hemisfier light tampoco es que tenga mucho más calidad pero la hemisfield light es una luz puesta directamente arriba de la escena y nos hace un poco las veces de cielo Por tanto en este caso fijaos tengo el Skype color el ground color y la intensidad es muy interesante Sí por qué veréis voy a una voy a copiar No lo sé no O sea ahora veremos Mira esto De hecho no vale para nada porque esto fuera no porque es que es infinita Exacto no es una posición indeterminada es infinita es un cielo máximo Así que pongo Sky en light New free fire le digo atención muy importante Cuál es el Skype color que en este caso voy a poner azul 0 0 ff voy a poner el color del Fénix del ground color que es blanco fff y la intensidad que voy a poner a uno lo que ocurre Mirad es que en el día a día por ejemplo Sky claro es que fijaos Mirad como la parte del horizonte es más blanca y la parte del Cenit La parte superior es más Azul la parte del Horizontes más blanca la parte superior es más azul esto lo podéis comprobar hombre aquí en la ciudad No pero si vais al campo pues se puede ver perfectamente por tanto la ambientlite es una luz un poco limitada pero la luz de tipo hemisfire tiene esta particularidad tiene este efecto que te permite cambiar Pues un poco el color de luz que se emite por arriba y el color de luz que se emite por el Horizonte Así que guardo y recargo y fijaos como Bueno tengo esto Sí lo sé un momentín por favor que no cunda el pánico entonces claro pongo cielo y ahora sin punto like pongo el cielo O sea lo habéis visto bien pero un momentín vale pongo ahí cielo y fijaos como vale me sale eso Por cierto sí no aparte es que cómo lo vamos a hacer azul Si todos los objetos son rojos sabes entonces otra cosa que voy a hacer Es que voy a poner fff los objetos blancos para que podamos apreciar correctamente el color de cada una de las luces ahí lo veis entonces Fíjate que a los objetos les he puesto ffffff y también te digo que es que al cielo le he puesto un color así azul de la muerte con lo cual pues tendría que bajarlo un poco pero fijaos que va haciendo un poco ese efecto si os fijáis ahí pues hace un poco el efecto de que la penumbra no es gris sino que es más bien azulada atención Mirad para empezar un cielo tan azul vale Así que me abro game voy a corregir un poco ese cielo me abro game vamos a verlo vale Ok y Mirad Me cojo un color azul celeste miradme una cosa por hombre una cosa así vale que el cielo no es tan azul poderoso y digo cojo este color Lo pongo aquí y otra cosa que os digo es que el cielo no puede tener la misma intensidad que el sol entonces digo 0.3 con lo cual la luz del cielo me queda así me queda con esos tres parámetros guardo y recargo y ahora veréis que esto ya es otra cosa Vale tengo una amanecer fijaos que tengo un poco más de penumbra y si me le ocurre un poco más pues vale bien Vamos a ponerle un poco de sombra al sol porque se agradecerá aparte de que el sol se va moviendo Pues también Será muy bonito ver cómo pues la sombra va variando Bueno antes de continuar me gustaría un poco pues activar la alfombra vale por tanto no en el cielo porque la luz del cielo no tiene sombra desgraciadamente si la tuviera costaría mucho de calcular no tiene sombra en tres puntos js en la vida real sí que tiene pero aquí no la luz del cielo en la vida real sí que proyecta sombra difusa pero en free punto js No entonces me voy a light Shadow le digo true le digo que es cierto y luego recordamos que para hacer que los objetos tuvieran sombra me voy a hacer y js me cargo qué cargo fue obj Espera que te lo digo no esto era Susan Ah era mapeado y luces efectivamente y hago lo siguiente Mirad recordamos que para tener sombras Por una parte me vengo por aquí y le digo like 1 cast Shadow es igual a true vamos a ponerlo digo light 1 cast Shadow es igual a true light 1 shadowmap with y todo eso le decimos que sí Aunque eso en el Shadow cameranier Creo que no va a valer para nada vale vamos a ver también like luego aparte a los objetos les digo que cast Shadow y recif Shadow por tanto Mirad digo pared cast Shadow pared recibe Shadow suelo cast Shadow suelo recibido y esfera cast Shadow y esfera reciclado y también me hace falta también me hace falta shadowmap enable es igual a true en el render si todo ha ido bien No lo sé vamos a verlo si todo ha ido bien guardo y recargo vale todavía no vamos a ver vale Sí pero al final no lo usamos para nada por tanto no si no lo he copiado al final vale voy a hacer una cosa un momento ya nos lo pongo Direction and like Shadow vamos a ver el render en Sí en el render he puesto el Shadow mapsize Bueno aquí abajo de la Esfera debería salir una sombrita Qué interesante Sí que es eso Así que es eso lo único que pasa es que tienes poca resolución de esfera esa poca resolución de sombra pero es eso pero y porque a mí no me aparece vamos a verlo la idea Está lo que quiero que veáis es que por mucho que tengamos ya en la pantalla atención por mucho que tengamos ya en la pantalla el sol rotando y tengo lo de el sol y el cielo y la sombra por aquí pero la sombra que me va a proyectar free punto js la penumbra de la sombra nunca va a ser tan buena como la que puedo tener en un motor de render 3D os voy a poner un ejemplo para que veáis exactamente a qué me refiero Mirad js equivale a esto que os voy a enseñar yo hago un cubo La goma es pequeño duplico el cubo lo giro y diríamos que con esto tengo el escenario que estoy creando ahora me hago una esfera del tipo que queráis y la pongo ahí dentro y ahora por último me hago un sol vamos a ver me hago un sol que es como la direccional o un spot me da igual y aplicó este sol lo que tengo por tanto es esto lo que tengo por tanto es que me voy a me voy al sol le digo que quiero sombra y tengo Esto sí es cierto Y es que en nuestra escena hay un poco de environment Lite claro eso no es lo que quiero efectivamente y vamos a ver también de color Esto es lo que tengo dentro de friv.js lo que tengo es una sombra como la veréis bastante muerta bastante inerte un momento ahí lo vemos si os fijáis en la sombra que va a aparecer por ahí veréis como no tiene penumbra es toda Exactamente igual de oscura ahí la misma oscuridad de aquí que aquí y eso no es real porque eso equivale un poco a este efecto pero el efecto real sería algo parecido a esto sería algo parecido a una escena en la que hay más sombra en la zona que está justo abajo del objeto y hay menos sombra en la zona que se aleja más es decir una zona de penumbra muy desgraciadamente ese cálculo no lo va a hacer 6.js lo más parecido que hay a ver si lo podemos aplicar hoy es difícil de aplicar lo más parecido que hay es un efecto llamado screen space ambienteclusión por tanto voy a ver el ejemplo me voy a decir js Master voy a buscar un ejemplo llamado ssao tengo el webgl pues professing ssl ao o sea ssao quería decir Me voy a abrirlo con Chrome por ejemplo Mirad y lo que tengo es esto no sé si veis Cómo se está calculando como una sombrita difusa entre objeto y objeto diréis no lo veo no hay nada mejor para apreciar algo que perderlo Entonces le quito el enable Y eso es sin ssao Y esto es con ssao veis la sombrita que se proyectan unos objetos y otros vale Bueno luego tengo varios render modes Este es solo el ao Vale pues lo que quiero hacer por tanto es implementar dentro de la escena con la que estamos trabajando este algoritmo de ssao va a ser un poco puñetero de calcular para una sombrita encima es una sombrita De nada pues para una sombrita De nada Vais a ver que cuesta bastante de implementar pero yo os diría que a partir de ahora cualquier juego que desarrolléis cualquier cosa que desarrolléis la calidad subirá bastante si le aumentas el ssao antes de meternos con parámetros Quiero contaros un poco la historia del ssao y lo que quiere decir ssao es screen space ambieclusión o lo que es lo mismo o incluso en ambiental pero en espacio pantalla veréis si yo me voy a Blender cerrado Pues mira me voy a Blender Yo veo que tengo por aquí un objeto que me va a hacer las veces del suelo le pongo un Susan no giro en x lo pongo en el suelo renderizo y veo que la sombra es muy dura pero precisamente el ámbitoclusión puro es una técnica para simular no calcular sino simular la luz indirecta rebotada que proviene del entorno por tanto en Blender lo que ocurre en Blender Es que yo vengo por aquí a entorno activo ambientoclusión la aodssao y ocurre esto y es que de repente la escena se llena mucho más de luz y la escena queda mucho más agradable mucho más realista mucho más atractiva que cuando no usaba screen space o porque cuando lo usaba ambiente oclusión el problema de ambienteclusión es que es una técnica que como veis pues cada vez que mueve la pantalla lo podéis ver cuesta un poquito de calcular el programa hasta que te calcula el ambiente oclusión pues tarda a veces unos segundos enteros porque es una escena muy sencilla cuando es una escena puede tardar minutos enteros en calcular el ambiente oclusión evidentemente no me puedo permitir esto en un videojuego que tiene que funcionar diríamos como mínimo a 30 o a 25 fotogramas por segundo Por tanto en el año 2007 clitech los desarrolladores de El cray enjing y la serie de juegos crisis desarrollaron un algoritmo de cálculo que luego todo el mundo ha copiado porque todo el mundo lo ha copiado que es el ssao o lo que es lo mismo el Screen space ambientoclusión que es lo que tenemos aquí en este ejemplo es un algoritmo que lo que hace es medir la distancia de los objetos en pantalla y calcular una sombrita cuyo efecto es parecido al ambiente oclusión esto es sin fijaros ahí abajo sin screen space and inclusión Y esto es con screen space ambiente inclusión es una sombra por tanto bueno podéis ver por ejemplo el ojo del león como tiene más sombra es una técnica de mucha menos calidad que el ámbitoclusión real Pero bueno da un toquecito de sombra ayuda a que los objetos se peguen en el suelo y sobre todo se calcula muy rápido si miramos por aquí si miramos por aquí esto es uno es una de las primeras capturas de screens pensamiento inclusión esto es un crisis o un Far Cry entonces voy a visitar página en la Wikipedia vamos a ver entonces como veis este efecto lo desarrolló Vladimir kayalin mientras estaba trabajando en claytech es curioso os tengo que decir es una curiosidad simplemente curiosa él Sí pues mientras trabajaba Y si la cosa se fue de madre abro un portal al infierno y empezaron a aparecer vale como eso es Exacto Entonces te digo que es curioso porque crytech es una empresa alemana pero sin embargo el que lo inventó fue un Ruso trabajando en creditech Pero bueno que se va a hacer vale y efectivamente ahí está la gracia el primer juego en el que se aplicó el ssao fue el crisis donde a partir de ahí todo el resto de juegos a partir del año siguiente empezaron a implementar Porque si estudias el algoritmo espera Bueno ni decirte que sí entonces vale aquí Fíjate que bueno lo que hacen Es que esto es un predecesor 2003 del este del ssao pero a partir de aquí Bueno evidentemente en el warhead en el Gears of War 2 ya estaba el ssao Y a partir de ahí en 2008 el stalkel en el arma en el Batman en el sí Al parecer sí hay una cita habría que leer la cita ahora mismo No lo sé pero si no lo sé pero En definitiva lo que quiero deciros que a partir de ahí sería parda y todo el mundo que saca un juego mínimamente serio lo saca con ssao Sí es que ya os digo ahora cuando lo veáis veréis que es una técnica fantástica para simular ahora la primera vez que vamos a implementar ese Sao os digo nos va a costar es un efecto a ver conceptualmente sencillo no tenéis que programarlo vosotros y hay una librería como la Vais a ver Ah pero la primera vez que lo pones cuesta mogollón veréis azul Vale pues lo que voy a hacer en este caso Mirad Es que voy a el código de este ejemplo que tenemos en la documentación y para el código lo primero que voy a hacer es darme cuenta de que Mirad de que este código requiere una serie de librerías requiere la librería de ssao shader El copy shader render pass shader pass más pass en fin un montón de librerías por tanto lo que voy a hacer es que me voy a ir a la carpeta momento te lo digo me voy a ir a donde estás ostras posible perdido Vale pues nueva carpeta entonces me voy a hacer me voy a champ me voy a ht dogs me voy a free js me voy a free js Master Sí pues mira me voy a ir a examples me voy a ir a js y para empezar de la carpeta shaders me voy a copiar madre mía los que hay me voy a copiar SS a o shader y copy shader y Estos me los copio en mi librería menos copió el libro ahí los pongo y luego de la carpeta post processing dentro de esa carpeta post processing me voy a copiar render pass shader pass más pass y efectos composer por tanto render pass shader pass más paz y effect composer menos copio me los pego entonces aquí abajo vamos a ir haciendo vamos a copiar trozos del ejemplo primero el ejemplo entero sí sí igual quizás casi que mejor así que Mirad mirar casi la pantalla una vez que tengo las librerías lo que voy a hacer es vincularlas me vengo por aquí y digo quiero importar todo esto que ya no está en las librerías de shaders Si no sí sí En este ejercicio Entonces lo hago sobre la carpeta live y ahora lo que voy a hacer es que viendo Este ejemplo veo que han tenido la muy buena idea de encapsular todo el código correspondiente al render pass dentro de una función por eso simplemente lo que tengo que hacer es cargar la función que inicia el post procesado y post processing la pego en algún punto de mi código por ejemplo entre la función init y la función animate y una vez que tengo el código pegado evidentemente si ahora ejecuto no debe funcionar directamente Igual me he dejado alguna variable aquí me puedo haber dejado alguna variable Así que la ha roto Ah vale personalmente ahora luego entonces me voy a copiar me voy a copiar algunas declaraciones de variables que tengo por aquí arriba vamos a ver digo sabes qué Me las voy a copiar todas por si acaso creía que me ibas a decir que había funcionado el ssao así de repente tenemos es más raro entonces vengo por aquí recargo vale pues Ahora lo pasas entonces mira deja de las Sombras Mira por aquí entonces lo que tengo de momento es que no hace nada no funciona nada Por qué Pues porque todo el código lo tengo por una parte inicializado en las variables lo tengo declarado en la función init postprocessing pero no hay nadie que esté Llamando a edit pues processing por tanto lo que voy a hacer en este caso es que dentro de ese código me busco por aquí me busco por aquí vamos a ver en render dice esto si pues processing está en enable si pues processing está activado en ese caso ejecuta Melo con voz proceso y si no en caso contrario pues por lo menos renderizarme la escena sin postproceso así que todo este grupo lo copio y lo pego dentro de render Sí probablemente Entonces yo lo que voy a hacer es que todo este parámetro voy a ponerlo sí Ah mira no ya está en iguales es igual a true ya está en modo activo así que Sí vamos a verlo vale interesante me gusta eso entonces init post processing hay vale Y eso es la guía muy bien y por ahí estás Entonces efectivamente en el init abajo del todo esto que estaba vale Sí verdad tienes razón si todo ha ido bien no se Imagínate que sí recargo vale Y ahí como podéis ver no sé si lo veis si no por un momento y un momentín vamos a ver El antes y el después Mirad muy sencillo vamos a ver déjame que además me acerque la cámara Porque así veremos mejor la Esfera entonces para ello voy a crear pues os ha costado menos lo que pensaba sabes Entonces voy a crear por aquí posición y 100 pues 300 que está al revés verdad Pues sí no perdona pero esto que es la z Claro que sí sea posible perfecto y ahora la z A menos 100 sí la y perdón eso es lo que quería deciros Exacto ahora mira casi la voy a poner vale mira mira ahí ya se ve ahí ya se ve lo único es que se ve un poco oscuro es posible entonces exacto no sé si veis como Aquí hay una línea de sombra que no había antes aquí el objeto Tiene una línea de sombra que no tenía antes lo único es que tendría que darle más caña a la luz direccional para que notáis ahí la sombra pero Oye si hace falta se la doy y ya está entonces me voy a Emi es fear light le digo fuerza uno aunque sea mucha pero para que veáis el efecto ahí sí sí no sí que va a hacer entonces fíjate ahí no sé si veis como una sombrita ahí no sé si veis como una sombrita alrededor del objeto hay como una sombrita en todas partes no no se tiene que mover porque es no depende de la posición de la luz es una sombra propia pero ahora lo más importante para mí lo que a mí más me gusta es que veáis que el ssao se puede modificar Yo vengo ahí ahora bajaré la fuerza de la luz y digo el radio podría ser un poco más grande entonces me voy al post processing y digo mira hago está a03 el lado clamp es la distancia de la sombrita mira está 03 lo pongo a dos vengo aquí Vaya un momento mucho más pequeño pues 0.1 hago ahí no sé si veis que está más grande por ejemplo la bola eso es influences voy a poner uno Vale pues bueno al revés 0.1 En definitiva son parámetros ahí veis que la bola está mucho más sombreada son parámetros que nos permiten Aquí está vale 6 windowner High Vale Nos permiten controlar cómo es esa sombra con respecto al resto de objetos Es cierto que ahora parece que me ha salido muy sucio me da igual pero lo que importa y sobre todo Ahora cuando hagamos escenas más complejas es que ya tengo una sombra de contacto entre diferentes objetos voy a enseñaros esto realmente Para qué me sirve Mirad supongamos que cojo una bola Box voy a duplicar esto directamente sin cambiar nombres de variables me da igual y digo posición y menos 40 posición x menos 30 más que nada para tener otra bola intersectada por ahí por abajo fijaos claro eso es lo que quiero ver fijaos que ahora digo Vale pues ahora y menos 50 esto menos 50 vale a ver mente enferma porque ya hay que estar enfermo para ver ahí en fin lo tengo presente lo tengo en la memoria Exacto Entonces lo que quiero deciros Ah veis ahí hay una sombra difusa veis ahí Vale entonces ahora lo voy a quitar Entonces al quitarlo para que notemos El antes y el después obviamente esto es antes sí sí no pasa nada evidentemente Y esto es después eso es lo que hace el Screen space and vendo clusion Entonces ya os digo es un efecto muy interesante ahora mismo lo he subido mucho de vueltas vale pero es un efecto muy interesante dejadme que quite un poco fuerza a la luz ahora en cuanto la pille Sí desde luego ahí está un poco oscuro pero también te digo que puedo aumentar un poquito la fuerza de del Spotlight Ah claro no no dónde estás Spotlight Ah sí sí que sí no pasa nada le pongo más Y así pues espera un momento casi Bien voy a intentar meter el efecto estéreo a ver si pues bueno cosas que hagamos a partir de ahora las hacemos en estéreo Ah vale a la luz punto html la luces punto html Vale pues lo que voy a hacer por tanto Mirad Es que este archivo luces punto html lo voy a duplicar para llamarlo ahora estéreo punto html cargo el archivo estéreo cargo aquí el archivo estéreo vale Y lo que voy a hacer en estéreo es lo siguiente en primer lugar para hacer un render en estéreo Mirad se me requiere que cargue como mínimo la librería estéreo effects Así que cargo la librería estéreo effects está dentro de la carpeta js effects así que me vengo aquí a la carpeta me voy a hacer yjs máster me voy a la carpeta examples js effects cojo estéreo effects y lo pego dentro del libro Sí y las que tendremos entonces satisfago la dependencia y ahora una vez que tengo esto voy a ver vamos a verlo Mirad voy a ver que este efecto relativamente sencillo de poner en cuanto a que simplemente justo después del render se me requiere que ponga un efecto Así que pongo effect New free Stereo effect effet eso de ahí Es decir lo pongo debajo del render y el principal problema muy probablemente será combinar los efectos de ssao y el estéreo porque al final Yo veo que en la función de render tengo effect punto render pero claro me voy a mi función de render y digo yo no tengo efect punto render yo tengo efect composer.render así que bueno voy a poner effect punto render allá rendere render vamos a verlo voy a ponerlo aquí arriba claro este es el tema a ver bien Si yo hago esto y ahora recargo vale lo que tengo es un effect punto render pero no tengo el ssao como podéis ver es decir el sistema me ha calculado automáticamente la diferencia entre los ojos quiero que veáis que quiero que veáis que esta distancia es diferente que esta distancia el ángulo de los objetos es diferente voy a tirar un poco más la cámara para atrás Pero veo de momento un poco Inevitable Hasta que encontremos el truco que he perdido el ssao Dónde está la cámara eso sí sí totalmente posición y le digo que es menos 200 maneras pues le digo 600 hay y ahora pues lo empiezo a jugar un poco bien Ahora Nos pondremos las gafas para ver si se ve correctamente pero claro pero lo que no debería no yo juraría que no y bueno ahora pues claro lo que voy a hacer es a ver si puedo decirle aquí en lugar de render le digo effect este lomoteo recargo no Qué raro me ha hecho vale sí efect punto render lo voy poniendo poner en diferentes sitios pero bueno ahora tengo uno Vale entonces hago así si lo muteo pero claro vale sí y ahora efect composer vale un momento voy a hablar en primer lugar de bueno varias cosas que me habéis ido planteando que os puede pasar con el tiempo y que os puede pasar con el uso porque yo también aquí pues traigo cosas digamos traigo objetos traigo archivos que yo quieras que no los traigo optimizados pero evidentemente en el momento en el que os pongáis vosotros a trabajar os van a salir problemas con los cuales Pues digamos esos problemas harán que por unos motivos o por otros eso es lo complicado no podáis abrir el archivo con el que estáis trabajando Mirad en primer lugar Fran me has pasado este archivo vale en Seven zip lo voy a descomprimir y hago doble clic entro dentro del archivo y un primer vistazo me dice que yo nunca voy a poder abrir este archivo dentro de free punto js porque en este caso veo un vj perfecto correcto veo un mtl perfecto y correcto pero veo que tiene a continuación tres archivos con la extensión tga esos archivos son imágenes con formato tga entonces lo que os quiero decir con esto es que al final free punto js funciona dentro de un navegador web y por tanto los formatos de imagen admitidos son todos aquellos formatos de imagen que admita un navegador web pero tarda no es un formato de imagen admitido por un navegador web lo que sí que puedo hacer sin ningún problema Eso sí es abrir game Y si yo abro gimp como gimp se lo come todo pues yo puedo meter ahí los formatos tga y puedo convertirlos entonces fíjate como yo cojo estos tres formatos tga los meto dentro de Kim los abro en tres capas diferentes veo que tengo aquí el difuso veo que tengo aquí el normal map y veo que tengo aquí el Boom map o parece especular también ahora veremos qué es Entonces yo lo que hago es que archivo exportar como y lo exporto a un formato que free punto js en tienda o jpg o png o en un caso extremo tif si no hay ningún motivo de peso voy a usar en principio jpg y tú dirás Cuál es el motivo de peso el motivo de peso es la transparencia si yo no tengo transparencia suelo elegir jpg pero si una textura requiere transparencia solo elegir png entonces simplemente cambio la extensión cambiar extensión engine evidentemente porque game ya entiende que cambiando la extensión lo está guardando con un formato diferente y aquí lo que hago es guardar como jpg a continuación Fíjate que aquí tengo ya cada jpg por cada archivo tga voy a eso Justo voy hoy entonces la idea Está en que si yo ahora Quiero actualizar las texturas yo técnicamente no tendría porque abrir Blender porque para eso tengo un archivo mtl Así que en este caso otra cosa es que si quieres hablamos Blender para ver el vj para ver que tiene vale pero fíjate que yo puedo abrir el edit y simplemente evidentemente abro el archivo mtl cuidado Vale No pasa nada con esto simplemente cuidado porque aquí cambio tga por jpg pero en este caso hay que tener en cuenta que esta exportación de del archivo obj no ha tenido en cuenta el mapa de normales con lo cual nos tocaría o ampliar nosotros manualmente el archivo mtl es perfectamente posible en cuanto hagáis unos cuantos vjs veréis los hacemos no tienen tampoco tanto misterio O sea sí vale tienen su propio lenguaje pero lo tienen tanto misterio al final pero En definitiva nos tocaría pues poner estos mapas pues por ejemplo kdks pues tendría que poner un kb un k de bam un k de relieve y ahí meter por ejemplo en lo que sí que puedo hacer Ya mira es poner para que veas lo fácil que es digo ks que es la especularidad digo pues el mapa de especularidad es el Rabbit s es este de aquí Rabbit especular con lo cual cambio el nombre y como ves editar un archivo mtl es así de fácil evidentemente con la salvedad de que no eso no me lo puede inventar no me lo puedo sacar de la manga sino que hay una especie ya está hay una especificación que dice en un archivo mtl de vj lo que puedes meter y lo que no puedes meter pero ya te digo que eso escoger una especificación y en dos o tres horitas os la habéis leído entera y es muy fácil de comprender por tanto no hay ningún problema por eso bien dicho esto vamos a ver un poco vamos a hablar un poco de formatos y os voy a contar en este caso un poco la historia del archivo tga lo primero que habéis visto Efectivamente es que comparando un tga con su contraparte en formato jpg estaréis viendo que mientras que por ejemplo este difuso pesa 3 megas este archivo jpg pesa 459ks para tener no Exactamente lo mismo pero prácticamente lo mismo entonces lo que voy con esto Ah vaya no tengo por aquí Vale y va a sacarme una hojita de cálculo aquí tendría Excel Sí otra cosa es que funcione Vale pues sí venga bien entonces voy a hacer una hojita en la cual os voy a contar Qué es lo que tiene un targa que es lo que tiene un jpg Qué es lo que tiene un png Y qué es lo que tienen otros formatos en primer lugar os voy a contar la historia Oye que racismo más chula ahí arriba vale os voy a contar la historia de el formato tga la empresa targa la empresa tarda es una empresa que en los 90 lo petaba Sí targaryen pero no nada que ver con targaryen Vale estarga entonces tampoco es eso el tratamiento antirretroviral tarda vídeo por ejemplo fantástico pero será posible pero bueno sí para la forma vale true y sentar Eso sí bien Además en inglés mucho mejor bien pues la empresa targa realmente la empresa truvisión era una empresa que en los 90 se forró haciendo tres tarjetas de edición de vídeo la carga 1000 latarga 2000 y la targa 3000 se calentaron mucho la cabeza poniendo nombres no se la calentaron vale hay que tener en cuenta que estoy hablando de los 90 vamos a ver por tu visión que ahora mismo es parte de hábitos una empresa que a lo largo de los años ha ido pasando de empresa tenéis que tener en cuenta que en los 90 así como con cualquier ordenador de hoy en día no te digo ni que sea caro ni potente con cualquier ordenador de hoy en día tú puedes hacer edición de vídeo como quieras Incluso en alta definición pero con cualquier ordenador de hoy en día y de hace 10 años para acá pero en los 90 los ordenadores no eran ni de lejos suficientemente potentes como para poder hacer edición de vídeo ni siquiera en tamaño vhs que es menor que el tamaño que hoy tenemos como alta definición con lo cual si tú querías hacer edición de vídeo a tu PC le tenías que poner una de esas tres tarjetas la mil la 2000 o la 3000 por supuesto bien otros fabricantes pero tarda en un fabricante muy importante de tarjeta gráficas para edición de vídeo cada una de esas tarjetas valía un buen dineral y los de truvision lo que hicieron es que aparte de sacar las tres tarjetas carga crearon su propio formato abierto para editar vídeo con esas tarjetas la idea de un archivo carga es que son archivos Espera que te lo ponga aquí son archivos que en cuanto a compresión no tienen compresión y al no tener compresión son archivos que inherentemente ocupan mucho espacio en disco duro en cuanto a Alfa no tienen canal Alfa no tienen transparencia porque estamos hablando de edición de vídeo en los 90 No sé no se planteaba la opción de que un archivo tuviera Alfa en cuanto a color tienen color de 24 bits color de 24 bits que equivale a 16,7 millones de colores que una vez más para edición de vídeo en los 90 eran más que de sobra colores para funcionar correctamente si comparamos esto contra un jpg el jpg sí que tiene compresión con pérdida de calidad Mientras que el png tiene compresión sin pérdida de calidad algo así como un zip digamos si seguimos comparando formatos tenemos que el jpg no tiene compresión Alfa y tenemos que perdón el jpg no tiene Alfa y el png sí que tiene Alfa en cuanto a color el jpg tiene 24 bits de color y el png tiene 48 bits de color vale por tanto cada uno de los formatos tiene sus características pero es normal que un jpg pese mucho menos que el mismo en formato tga porque el jpg tiene compresión y el tga no lo tiene os debo decir que tu visión fue una empresa de esas que no vino O sea no vio venir el futuro entonces pensaron que tenían un modelo de negocio asegurado y ocurrió que no era así ocurrió que a la vuelta de los 2000 es allá por el 99/2000 2001 empiezan a salir los primeros 214 los ordenadores empiezan a tener un giga 2 gigas de ram y empiezan a salir tarjetas gráficas con una potencia ya decente si sumamos todo esto Eso quiere decir que a partir del año 2000/2001/2002 Tú empiezas a poder hacer edición de vídeo sin comprar una tarjeta gráfica extra qué ocurre con una empresa que se dedica exclusivamente a hacer tres tarjetas de edición de vídeo porque la empresa cae en picado con el tiempo fue comprada por matrox otra empresa que con el tiempo también desapareció con el tiempo fue comprada por amd con el tiempo fue comprada por hábil es una empresa que ha sido un poco movida de sitio la cuestión está en que la empresa hace mucho que desapareció el software de edición hace mucho que ha desapareció pero el formato se ha quedado como formato abierto y en producción Cuando digo en producción quiero decir en producción de largometrajes y cortometrajes es un formato que no es que sea un estándar pero es común sin embargo en la web nunca vamos a poder un tga por eso debéis saber que existe el formato pero también debéis saber que debéis huir de él debéis huir de él como convirtiéndolo dentro del gym hay otro formato con el que Vais a poder trabajar y ya lo sabéis que es el gif hay que tener cuidado porque tiene compresión Sí con pérdida tiene Alfa Sí pero de un bit Eso quiere decir que por ejemplo el png tiene 256 niveles de transparencia el gif tiene un nivel de transparencia transparente o no transparente Pero no intermedios vale Y luego en cuanto a color el gif tiene 256 colores de paleta nada más Ni uno más vale pero tanto el jpg como el png como el gif son los tres formatos en principio correctos válidos que debéis usar Así que siempre que os encontréis un formato carga o cualquier otro formato parecido lo que tenéis que hacer es convertirlo a estos tres formatos dicho esto vamos a cargar esto dentro de Blender y a ver qué nos encontramos porque yo siempre voy a insistir mucho en cuanto a que el obj que traigáis el archivo la malla que traigáis sea como sea pues debe estar con el mapeado que en este caso el seguro que lo está así que cojo el vj lo importo Aquí tengo el conejo muy bien vale vamos a ver si tiene algún material me voy a materiales vale si tiene material con lo cual Voy a verlo con material bien vale No pasa nada con textura hay bien y ahí lo tenemos vale con lo cual vamos a ver qué texturas ha cogido entonces Fíjate que ha cogido el kb y ha cogido el ks ha cogido especular y si todo ha ido bien Blender lo habrá interpretado correctamente porque efectivamente me lo ha puesto en color especular y tú miras a mí me da igual Blender yo lo que quieres comprobar que se meta bien en free punto js yo te digo ya lo sé pero antes de meterlo entre punto js y ver si falla Y si falla yo digo ya por culpa de quién es este punto js es la librería es el modelo pues primero abro el modelo para asegurarme que el modelo Está correcto de hecho el modelo no se no está correcto sino que está bastante Guay porque incluso la sombrita esta de las orejas y tal está muy currada bien pues una vez que tenemos esto vamos a meterlo dentro de free punto js Así que cierro por aquí has visto como el cambio que he realizado en el mtl se reconoce perfectamente vale pues vengo por aquí salgo y ahora voy a poner esto dentro de free punto js así que me vengo aquí champ h2 free js Vale y vamos a verlo y por aquí me voy a crear un nuevo una nueva carpeta no Bueno sí también a ver espera que me pueda crear aquí un archivo nuevo un nuevo archivo llamado conejo punto html y una nueva carpeta llamada conejo Ya secas y dentro de esa carpeta suelto todos estos archivos realmente los tga los puedo borrar Sabes porque no me sirve para nada bien y por tanto ahora me vengo aquí y digo en conejo vale abro el archivo conejo tengo por aquí edit y voy a duplicar el código de obj pero obj no era obj mtl No eso lo tenía yo en mapeado de luces creo que sí obj no no ahí le ponía en pointerlock 2 vale Ah muy bien Pues mira pues directamente es más es cierto si tengo pointerlock 2 para qué quiero crear conejo ni nada me lo creo directamente ahí dentro entonces para ello lo que hago es que por internet que espera encontrar cosas en texturas así que me cojo lo que está en conejo me lo pongo en texturas arranco el champ arranco en el navegador localhost barra freejs Mira pointerlock 2 me ha adivinado la intención Y si todo ha ido bien vale Ahí tenemos la persona vamos a verlo está ahí ahora lo que tendré que ver es qué tamaño tiene ese conejo porque de repente no lo veo vamos a verlo creo que sí no que juraría que en texturas en la carpeta texturas he puesto el conejo no no no pero tienes toda la razón que no sé por qué había claro bien si no tienes toda la razón porque en el archivo php en el archivo php yo lo que hacía es cargar las cosas de escenario y en texturas cargada manualmente el personaje Vale pues bueno pues bien pues perfecto Así que copio esto de aquí duplico sobre de ahí y en texturas cargo el conejo punto mtl y cargo el conejo punto vj Ah bueno pues no sé también con r mayúscula por tanto Rabbit y Rabbit Así que si estoy ido bien me vengo aquí al pointerlock hago así y tengo ahí el conejo esto si lo quiero hacer adrede no me sale vale esto es una de las cosas que tiene la vida entonces pues bueno Ahí está sabes si efectivamente Pero bueno si te salía oscuro simplemente era por el archivo targa vale valía la pena un poco comprobar que no había mayor problema bien muy bien y dónde estás aquí la siguiente duda Va un poco de lo mismo es decir es una duda Exactamente igual que la anterior en cuanto a que insisto yo vengo aquí y os traigo en clase unos ejercicios muy masticados efectivamente pero es normal desesperable y de hecho incluso evidentemente Me alegro de que cuando lleguéis a casa y empecéis a trastear y empezáis a tocar cosas pues os vais a encontrar con problemas Entonces vamos a ver hay que tener en cuenta que yo por ejemplo abro ahora Blender entonces Yo abro Blender y en Blender yo puedo hacer un montón de cosas pero yo realmente lo que acabo importando dentro del programa lo que cabe importante dentro de js no es un archivo de Blender es un archivo obj y por tanto debo tener en cuenta que no tengo que jugar no estoy jugando con las limitaciones de Blender sino que estoy jugando con las limitaciones del vj en este caso existe una limitación en el obj y no en Blender que es la siguiente yo creo un plano déjame que lo ponga en vale Así que lo voy a quieto lo voy a subdividir y ahora por ejemplo digo Pues mira ya que lo subdivido va un poquito más ya que los individuo Quiero pintar escultura y para pintar un terreno Vale tengo simetría aparece simetría no quiero Así que pinto un terreno pinto un terreno por aquí estoy pintando unas montañas Estoy pintando unas montañas y hasta aquí ningún problema pinta un terreno y así me voy pintando el terreno digamos por ejemplo para una isla con la montaña y tal Ahora salgo del modo escultura y trabajando con el modo edición sabemos que le puedo poner múltiples materiales por polígono con lo cual Incluso en este caso como comentaréis no hace falta ni textura realmente entonces vengo aquí le creo un material y este material se llama arena y tiene un color digamos amarillento pero yo ahora Vengo al modo edición me vengo al modo cara edito y selecciono por ejemplo este bloque de aquí y digo Esto va a ser de hecho déjame seleccionar también todo esto y eso las ganas sí sí es algo que me da mucha rabia en Blender pero es así entonces le creo un nuevo material se lo asigno a ese objeto y le digo Vale pues Tú vas a ser de color verde porque tú eres como digamos la el césped Vale entonces Fíjate que tengo una parte de arena y una parte de césped y luego para dramatizar un poco más Pues cojo la punta de la montaña me creo un nuevo material lo asigno le pongo un nuevo material y digo Y esto es y en hielo el pico de la montaña el nieve eso no me salía nieve y recordamos que este de aquí es césped con lo cual en Blender tengo una o sea tengo una montaña perfectamente hecha preparada para llevármela me lo llevo bj y digo cuidado porque ovejota no soporta intrínsecamente multimaterial pero es que sobre todo free punto js es incapaz de multi material por tanto esto que funciona perfectamente en Blender pero no tiene porque ser compatible estar soportado dentro de free punto js la solución en este caso es muy sencilla también te digo que es muy sencilla en Blender en otros programas fíjate teóricamente más potentes no es tan sencilla las soluciones entro dentro del modo edición selecciono todo Y le doy a la tecla p donde la tecla p en Blender es la tecla por excelencia para separar separate sí Debería ser la s pero como la s está asignada a otra cosa pues es la p Vale entonces pulso la p y me da tres opciones Entonces me dice puedes separar la selección pero tiene ningún sentido porque tengo todo seleccionado puedo separar por material que es lo que quiero y puedo separar por partes sueltas pero en este caso no hay partes sueltas Así que en este caso por eso te digo no hace falta que reagas el trabajo Simplemente yo le doy a separate by material y os daréis cuenta como el objeto en Sí parece que sigue Unido el objeto fijaos exacto no busquéis costuras porque no las Vais a encontrar pero si era pincho aquí Este es un objeto que tiene un material Este es otro objeto que tiene otro material y Este es otro objeto que tiene otro material es el mismo archivo objeto claro es lo que hice ayer entonces ahora fíjate cuando la captura de esa cosa envíe era eso entonces otra cosa que tú si quieres o sea tú ahora puedes elegir puedes exportar un solo vj o exportar tres ovejas por si luego tendréis descontrol individual sobre cada archivo pero si no lo necesitas no hay ningún problema en que un archivo obj contenga tres archivos diferentes entonces me voy a no me voy a isla me voy a texturas guardo aquí esto como isla o bj vamos a ver como Isla obj me genera un archivo mtl y vamos a ver cómo sin ningún problema me voy ya que estoy en pointerlock me voy o bjmtl me cargo Isla obj e Isla mtl tardará va a estar también encima del conejo o sea va a estar todo el mundo ahí Entonces ahora recargo el pointerlock Y fíjate como tengo el terreno pero el terreno sin ningún problema tiene la arena y tiene el césped y tiene la nieve y no pasa nada es un objeto efectivamente Ahí te voy a decir que depende un poco del traductor que usemos entonces el obj en este caso lo ve como un objeto pero tú me dirías ya pero hoy sí Ahora quiero realizar una operación solo sobre Los polígonos verdes no podría entonces ahí te debo decir que el formato colada si os acordáis el otro día vimos que había un método llamado get of check dentro del método colada que es que tú importas un archivo colada y te permite cosas de dentro del archivo colada el archivo coladar es un archivo que se supone que es más moderno que el obj Aunque yo lo tengo mucho cariño al objeto al formato bj vale pero ahora mismo es un solo objeto sin remedio si quisiera editar cosas de ahí dentro de ese objeto Tendría que ir al formato colada vamos a ver el siguiente error en este caso tenemos un modelo descargado tenemos un archivo vale que tiene un vj tengo una serie de texturas vale con lo cual lo que voy a hacer Es que este archivo o bj me lo voy a poner dentro de esa carpeta texturas Y digo las texturas las pongo aquí para empezar hay espacios en los números de las texturas cosa que no me Mola demasiado bien y cojo el Farm House o bj.mtl con lo cual cargo el archivo mtl al editor de textos Ahí está bien y farrum House texture bam.way encima hay un espacio aquí extra que yo juraría Ah No mira pues fíjate hay que fastidiarse pero sí que está mira no me gusta Entonces para empezar déjame que quite espacios sí sí eso es ya la guindilla sabes entonces Hala ahí y ahora aquí quito el espacio pero aún así no tiene pinta de ser el error que has comentado Vale entonces yo lo que hago ahora es que me voy aquí a pointerlock vuelvo a cargar un obj con mtl porque no puedo cargar tantos como quiera Ah vale No parece que no ahora sí Entonces ahora cojo este y digo quiero cargar Farm House o bj primero en mtl y luego cargo el obj igual pero bueno no tendrían por qué pero se suele Llamar igual entonces vengo aquí a pointerlock recargo por aquí vale en principio veo que no está muy bien no no se ve negro Qué se supone que es a todo esto una casa vale bien con lo cual yo vengo a inspeccionar consola Bueno hay un 404 pero más allá de eso no pasa nada no no el cuento de primitivas es cero pero no le cuente o de polígonos Entonces nada Sí porque fíjate que de hecho hay polígonos en cuanto me importaba algo vale Déjame arreglar ese error No lo sé vale Espera a la derecha desde fuera desde dentro y cargamos normales sí pero un momentín Y esto es el bookmark no sé por qué me dice que no lo encuentra Ah vale porque no reconoce ese parámetro vale ni lo va a reconocer claro el que no reconoce es el parámetro BM Sí pues borrando eso no debería problema que no sale el error de que sí vale Te digo vamos a ver para empezar debéis tener en cuenta que no hay un solo programa que fabrique ovejas sino que cualquier programa puede construir ovejas y podríamos esperar que todos los programas funcionan perfectamente pero no todos lo hacen vale por tanto Puede ocurrir perfectamente que el archivo que os bajéis sea un vj corrupto Cuando digo corrupto quiero decir que no siga a la perfección el estándar y que por tanto no cargue correctamente el tri.js sí Ya lo sé Entonces cuando eso ocurre ahí lo que tenemos que hacer es poner nuestra vida en manos de Blender porque Blender es un programa que convierte que trabaja bastante bien con archivos vj y por tanto voy a importar Y digo igual voy a hacer algo tan sencillo y tan tonto si quieres como traer el archivo obj vale para empezar veo que efectivamente parece que es un problema no decir junto a js siendo el archivo bj así como antes hemos abierto el conejo y se ha abierto perfectamente abro aquí el obj y no se abre ni de lejos perfectamente me voy a seleccionar este objeto veo que sí que parece que tenga la textura vamos a verlo No lo sé No pero aunque le ponga Mira vamos a hacer una cosa le digo Texas Vale ahora sí muy bien entonces vale Ahí sí que la textura parece que está bien vamos a ver qué mapas tiene Fíjate que ha cogido el bam ha cogido correctamente el relieve vale en Blender Está correcto pero en nuestro programa no Bueno pues Fíjate lo que voy a hacer lo que voy a hacer Es que casi casi no casi lo que voy a hacer es guardarmelo como casa con su mtl también aquí en el código le digo que quiero casa o bj casa mtl y simplemente guardo y recargo vamos a verlo sí vale déjame que este es otra cosa vamos a verlo uno y uno exactamente qué dolor se ha cargado un montón de caras está corrupto vale No pasa nada yo en este momento lo que tengo que empezar a hacer es sacar el cinturón negro de Blender Vale y empezar a hacer ahí Kung Fu vale bien Entonces en ese caso yo digo vale parece que el modelo quiere estar bien pero hay algo que le dice que no está bien polisurface lambert en principio parece que está bien cuando eso ocurre yo suelo hacer una cosa Mira vamos a ver creo un cubo ahí lo pongo bajo de la casa cojo el cubo y la casa vamos a verlo a casa y le digo control J no al revés Perdona la casa y el cubo el último y le digo control j qué cree que el programa que es ahora la casa el programa cree que es el cubo o sea lo que he hecho es que la casa pierda toda su identidad y que crea que es parte del cubo que la geometría original es el cubo claro cuidado porque ahora tengo dos materiales ya sabéis Así que ahora selecciono todo le digo p separate por material y si todo ha ido correctamente Espera que claro que no tiene material un momento bueno sabes que le aplico el material está un material me da igual vale a rodar Así que vengo aquí exporto ahora sí que voy a machacar exporto recargo vamos a ver El Kung Fu no no déjame que ponga casados porque no me creo casados Vale ahora pongo casa 2 negro y fíjate que vale Qué pasa ahí vamos a verlo el vj no parece que sea igual es el jpg así que me vengo a gym le cargo el material de la casa aquí Vale y digo Tú eres casa bif en jpg ok tú eres casa Boom con lo cual edito el archivo Dónde está casados edito el archivo vale Y tú eres casa DIF Y tú eres casado no no sí pero sabes qué bueno lo pongo y ya está entonces guarde recargo vamos a verlo ahora casa negra vale déjame una cosa déjame que quite este el difuso 0000 eso es interesante y digo que sí digo que es interesante porque ahora digo el difuso te digo uno el difuso es uno guardo recargo interesante no a que sí lo mismo opino Vale y ahí lo tenemos simplemente Bueno Sigue fallando algún polígono vale Sí que habiendo hay algún problema pero y es un polígono que falta No es que esté por dentro ya no no porque lo acabo de pasar por Blender Ah no Mira es este polígono claro ves no está están otros pero el hueco de Mira vete a la izquierda Ahí ves que no tiene tejado no no no pero eso no es lo mismo porque eso es porque aquí Fíjate que hay dos caras está esta y estará de dentro vamos a verlo es que no tendría por qué fallar la geometría está bastante limpia vale déjame verlo ahora te digo Valentín porque he hecho un poco de magia negra entonces llevo tú entonces casa 3 claro para volver a aparecer negra Por cierto color déjame que se lo ponga blanco porque al volver a exportar el archivo obj con su mtl las texturas antiguas y el color difuso negro porque está porque estaba como base de color negro Pero eso no pasa nada si lo pongo yo blanco ya está no la exportado la última La cuatro vale Y sigue ocurriendo no creo Pues eso tendría que verlo como mantenimiento eso tendría que verlo con más detenimiento Porque ahora mismo No veo nada que fallen esta geometría que habrá algo desde luego pero no veo que falla nada voy a pasar otra cosa y ya le echaré un vistazo más en profundidad a esta malla bien acabando un poco con el tema de formatos os voy a decir que como os decía antes el formato jpg es un formato que yo suelo preferir bastante para trabajar con videojuegos y veréis que prácticamente a cualquier desarrollador le pasa lo mismo por una razón muy sencilla qué tiene el formato jpg que os había dicho antes en Excel tiene compresión con pérdida eso de con pérdida que quiere decir vamos a ver quiere decir menos espacio exactamente el jpg mezcla los colores y por tanto lo que tienes una pérdida de información o sea pierdes calidad en la imagen Pero además de ser con pérdida el jpg tiene compresión variable que es lo interesante Así que Mirad yo cojo el personaje Dónde está el cuerpo del personaje déjame que me haga una copia por si acaso y lo voy a abrir en gimp eso Ah Exacto cómo lo hemos hecho en exportar como sobre escribo y os acordáis efectivamente que si yo venía aquí Espera que hay si yo venía aquí y le decía por defecto me ocupa 160ks Yo vengo aquí bajo y fijaos estoy bajando extremamente la calidad vale Pero cuánto me ocupa ahora ese jpg me ocupa seis Cash entonces la cuestión está en que el jpg desde el punto de vista del ahorro de memoria en un documento en un videojuego está muy bien por la sencilla razón de que tú no solo puedes jugar con la resolución del archivo sino que también puedes jugar con la compresión para saber al final Cuánta memoria te ocupa ese archivo porque tener claro que los archivos de textura al final acaban ocupando un montón de memoria vale por tanto simplemente que sepáis que el jpg que en principio es un formato que bueno al cual la gente le tiene mucha Manía porque pierde calidad pero finalmente o será de mucha utilidad Por esa razón