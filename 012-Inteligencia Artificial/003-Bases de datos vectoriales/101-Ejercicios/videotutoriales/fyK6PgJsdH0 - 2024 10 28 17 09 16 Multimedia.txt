hay una unidad didáctica llamada utilización de librerías multimedia integradas esto básicamente quiere decir e zoom Ah tu conexión a internet es inestable Okay vale a ver un momento sí parece que hay un poco de retraso en la señal Así que si hay algún problema con la conexión a internet voy a sacar el cable y vamos allá vamos también voy a entrar al documento para echarle un vistazo a y Okay venga Métete vale calculo que ahora se me cortará la conexión vamos a verlo a ver ahora se ha cortado la conexión estoy moviendo ratón estoy moviendo el ratón estoy moviendo el ratón sigo moviendo el ratón sigo moviendo el ratón creo que no ves mi ratón moverse ahora ya se mueve mi ratón con lo cual entiendo que ahora ya me volvéis a escuchar confirmadas me voy a Google Drive me voy a vamos a ver Adam me voy a programación multimedia y dispositivos móviles Vale y encontramos que el tercer tema es utilización de librerías multimedia en el sentido de que multimedia hace referencia a vídeo y audio por tanto en cuanto a procesamiento de objetos multimedia los objetos multimedia básicamente a día de hoy Son como os decía antes el vídeo y el audio el vídeo De hecho yo creo que lo tenemos bastante tocado verdad es decir hemos hecho varias cosas con vídeo y sabemos digamos Cómo trabaja el vídeo el audio es el que tenemos bastante menos tocado con lo cual pues tenemos esta unidad didáctica para también trabajar sobre ello Antes que nada en la clase de hoy Quiero hacer un pequeño ejercicio voy a ir otra vez a hedit y ahora me voy a ir a eh segundo a programación multimedia a librerías multimedia y a conceptos sobre aplicaciones multimedia entonces voy a crear un archivo nuevo 001 gu eh cómo lo llamo Oh gu video. html vale voy a crear una etiqueta doct type html una etiqueta html una Uy Cuidado un H un Head un Body y un Body vale Y yo ahora a continuación creo una etiqueta vídeo src es igual a José viicente mp4 y ya está Vale y etiqueta vídeo vale a continuación Yo vengo por aquí me voy a bueno igual creo que en Drive lo tengo vale entrevista vamos a ver entrevista Ok perfecto me lo guardo me lo descargo Ah venga Hola vale me voy a dam me voy a segundo me voy a multimedia me voy a librerías me voy a conceptos lo guardo aquí como entrevista vale Y ahora entrevista me voy a reproducir ese archivo localhost bar dam bar sego programación multimedia librerías multimedia conceptos sobre aplicaciones multimedia pincho aquí y aparezco yo e ahí en plan sabes bien eh claro esto es un vídeo pero yo por ejemplo le puedo dar a Play claro cómo le doy a Play Pues bueno hay una forma de darle a Play que es poner Controls así que pincho por aquí Controls y veo que el navegador web me pone automáticamente una serie de controles de hecho esto este ejercicio sería un poco como os diría yo como para una mezcla entre programación multimedia y desarrollo de interfaces Así que vengo por aquí le doy a Play a unado siempre era más joven tenía la barba negra en fin vale Y más corta eh es una entrevista con lo cual eh tengo un botón de Play que se convierte en botón de pausa tengo un botón de control de volumen tengo un botón de pantalla completa Vale y tengo un botón de opciones pero En definitiva la idea Está en que es el navegador el que me está poniendo estas opciones de reproducción y puede haber algunas opciones que yo quiera tener pued Pero puede haber otras opciones que ahora mismo A mí me falten por ejemplo subtítulos no tengo subtítulos por ejemplo avanzar 15 segundos no tengo avanzar 15 segundos tengo Play O tengo pausa pero no tengo más vale con lo cual La idea es analizar Cómo podemos trabajar el multimedia teniendo en cuenta que multimedia como os digo es tanto vídeo como audio Así que a continuación Yo vengo por aquí y digo Vale pues 002 control mediante javascript html y ahora a continuación Digo vamos a ver me vengo por aquí me voy a crear Perdón un botón en el que voy a poner Play Button y un botón llamado pausa buton y me voy a quitar el Controls porque ahora yo voy a hacer el control vale hago así y Play y pausa Así que ahora a continuación me voy a javascript me voy a Script y digo voy a hacer esto un poco más grande preferencias tipografías 12 lo paso a 15 Okay bien y digo eh Let video es igual a document query selector y vío vale simplemente y ahora a continuación le digo e Let eh Play claro ID es igual a Play ID es igual a pausa Vale entonces digo Let Play o Let bton Play es igual a document query selector Play y Let bton pausa es igual aument query selector pausa y entonces digo botón Play boton Play onclick es igual a function Y entonces digo vídeo y voy a darle Play vale vamos a ver y aquí chat y js Play videoo me dirá s query selector no sé qué no sé punto Play eso video pun Play y botón pausa onclick es igual a function y ví pun stop o pause acuerdo si era stop o pause vamos a verlo así que vengo por aquí recargo la última versión que tenga Play No sé si veis como el vídeo está reproduciendo ahora pausa Soy José Vicente quieto vale hace pause bien claro esto pues no es muy bonito no es muy bonito porque Generalmente el mismo botón de Play cuando le das a Play se convierte en botón de pausa vale que no tiene por qué ser así pero vamos a hacerlo así que ahora vengo a continuación y digo 003 es estado del botón de Play de paso esto que pone Play le puedo poner emojis emoji Play playa no play Reproducir Ah Mira qué bonito El caso es que no quería exactamente este Pero vale Play y pause pausa ya está miralo qué bonico pausa espera he copiado sí ok un momentín meta charset es igual a utf8 OK ahora sí Ahora trabajamos tambén un poquito el estilo vale Así que botón le quito el botón es ID Play Y entonces digo bar estado es igual a Play Perdona si a Play no a pause entonces botón Play vale boton Play onclick If estado es doble igual a pause en ese caso v. Play en caso contrario v. pause y ya que estamos dis text content ya que estamos dis text content pausa en caso contrario dis text content Play recargo le doy a Play no se ha puesto pausa Soy José Vicente carratalá y soy un formador desarrollador y diseñador para en los vale claro estado es igual a Play y estado es igual a pause es decir le cambio el estado Play Soy José Vicente carratalá y soy un formador desarrollador y diseñador estoy en el sitio correcto sí Ok Vale y estado punto pause estado es igual a Play vídeo pun pause Qué curioso If estado vale console.log estado hay una cosa y es que me hace el vide Play pero no me hace todo lo demás lo cual es curioso cuanto menos Okay Play no funciona Qué pasa dis text content ahí está el problema Por qué bueno pues botton Play text content y botton Play text content vale click bton Play text content le eches a bar y bar a ver no botton Play text content ostras a ver si botton Play es igual a document query selector Play Bueno mira voy a poner el Let bottom Play aquí dentro text content ostras text content Por qué no funciona not caray Perdón text content efectivamente is not a function no es una función porque es una propiedad vale venga clic y ya está voy a quitar esto vale clic y clic Vale y clic y cli de momento ya tengo por aquí un primer Bot vamos a comentar un poco el código 004 botón eh Y comentario Entonces yo digo defino el estado original del reproductor ahora selecciono el vídeo eh le selecciono el botón de Play cuando haga clic en el botón de Play cons sol log estado ya no me hace falta entonces digo en el caso de que esté en pausa le pongo el botón de pausa cambio el estado y reproduzco el vídeo en caso contrario le pongo el icono de Play le cambio el estado y pauso el vídeo y ya está Esto es lo que tengo de momento pero nosotros por ejemplo especialmente a raíz de la asignatura anterior que es sistemas de gestión empresarial pues queremos modularizar esto queremos convertir esto en un módulo que sea reutilizable vale de tal forma que este módulo esta librería vale cada vez que se encuentre con un vídeo automáticamente cree todo lo que tiene que crear Cómo podemos hacer esto vamos a por ello 005 pues librería o lo empezamos a encapsular vale Y yo a continuación lo que voy a hacer es lo siguiente este buton Play quiero por qué Pues porque ese Button Play me lo tiene que crear dinámicamente javascript yo lo que quiero es que cada vez que javascript se encuentre un vídeo automáticamente le construye a un reproductor para ello voy a hacer lo siguiente vamos a ver todo esto lo voy a comentar de momento ahora lo iré liberando Y entonces digo Let videos es igual a document query selector all vídeo esto quiere decir selecciono todos los vídeos que me encuentre en la web a partir de ahí digo videos punto for each function V Y entonces aquí digo para cada uno de los vídeos que me encuentre para cada uno de los vídeos que me encuentre Y entonces aquí para cada uno de los vídeos voy a empezar a hacer esto que está claro que ahora mismo Solo tengo un vídeo vale otra cosa para poder el Script este ahora mismo Solo funciona si está después del vídeo Así que Windows onload es igual a function donde creo esto es decir me espero a que todo en la web haya cargado el window onload es sagrado digamos vale siempre lo Vais a poner de una forma o de otra a continuación para cada uno de los vídeos ahora digo Let vídeo o Let led etiqueta vídeo o tag vídeo es igual a vídeo atención eh Y ahora digo tagv remove por qué vale vamos a verlo he quitado el vídeo vale he quitado el vídeo he quitado el vídeo pero tengo el vídeo en la memoria meto el vídeo en la memoria y ahora quito el vídeo de la pantalla del dom pero tranquilos porque lo tengo en la memoria vale lo tengo guardado y entonces ahora por ejemplo digo ahora voy a crear 006 creo un contenedor Y entonces digo document no led contiene vídeo es ig a document create Element div contiene vídeo setattribute classlist ad es jv vídeo esta carpeta o sea esta librería que voy a crear se va a llamar jv vío Vale ahora a continuación digo vamos a ver tag vídeo punto Cómo añado algo Justo a continuación js add sibling Element insert before me Mola vamos a ver inser vale tag vídeo insert before contiene vídeo y tag video remove Vale y vamos a ver y contiene vídeo punto appen Child tag video un poco rebuscado Ahora veréis parece un poco rebuscado pero jv vío no me Mola sabes eh J vío ya está esto me Mola más así que vengo por aquí recargo cargo a ver un momentín vídeo no recargo algún error de consola sí insert before Ah sí insert before qué te ocurre insert before qué quieres no inser Ah aquí vale Y insert before contiene vídeo en tag videoo next sibling Aquí vamos a verlo insert before Uh vale tag videoo punto qué parent no parent yo creo que me va a andar a contains vale a ver js insert Element instead New Element instead of current one Oh replace with a ver Oh interesante parent el replace with Oh vale Este sí esto fuera y digo tag videoo punto replace with contiene vídeo esto yo creo que va a ser lo más entendible recargo Vale y Mirad diréis Oye tienes el vídeo igual Sí pero no es igual porque antes estaba el vídeo y ahora el vídeo está dentro de un div contiene vídeo O sea que todo esto toda esta movida ha sido para creo un contenedor al contenedor le añado una clase y entonces reemplazo el vídeo con el contenedor y añado appen Child no sé si hace falta igual no hace falta si hace falta vale Y añado el contenedor de vídeo al dom bien esto qué quiere decir pues esto quiere decir daos cuenta que en el html solo está el vídeo vale o sea yo quiero que en el html haya un vídeo y que todo lo demás lo cree javascript eso quiere decir que 007 ahora le añado un botón pero con javascript Y entonces digo Let botón Play es igual a document create Element Button boton Play text content es igual lo que os decía antes que ahora vamos a recuperar todo esto y eh contiene vídeo punto appen Child botón Play vamos a verlo y aquí no sé si lo veis vale Ahí pequeñito bien claro Ahora cuando yo vengo por aquí digo vamos a ver led estado es igual a pause Esto va Aquí Let estado es igual a pause Y entonces digo comportamiento del botón Y entonces digo botón Play punto onclick es igual Oh vaya si ya lo tengo aquí catap Plus botón play. onclick es igual a todo este código que hemos desarrollado antes así que vamos a ver tagv Play y tagv pause Ok momento que igu comentarios vamos a ver si funciona Play creo que está todo Ok creo vamos a verlo comportamiento del botón le doy a Play funciona le doy a pausa y funciona qué es lo que hemos hecho pues que por ejemplo si yo era a continuación en lugar de tener un vídeo tengo tres vídeos con el mismo código funciona no sé si veis como cada vídeo tiene su propio botón de Play y ahora hago así vale José viente pauso y he pausado únicamente solo eso de ahí vale bien con lo cual estamos haciendo el código reutilizable otra cosa que os digo es que ahora mismo no vale porque ahora por ahora mismo no porque si no será un lío pero todo esto de aquí yo el día de mañana lo cojo y lo saco a una librería externa llamada jv vío o jv y por tanto cada vez que tengas un vídeo en tu página web tú simplemente cargas la librería jv y automáticamente te parece un reproductor todo chulo vale vamos a ver más cosas vamos a hacer más cosas con esta librería multimedia eh vamos a ver porque claro hasta ahora como igual que en interfaces vale Yo vengo por aquí y le digo Mostrar todos los controles y me salen estos controles y digo ya Pero y si yo quiero hacer más que esos controles o sea sí gracias Chrome por darme controles pero se supone que somos programadores para no contentarnos con lo que viene por defecto sino poder controlar nosotros qué es lo que ocurre vale Así que ahora a continuación Bueno voy a poner un par de comentarios que me faltan creo un botón eh Le pongo el icono y lo añado al contenedor vale una vez que tenemos esto ahora a continuación podemos hacer lo que nos dé la gana realmente lo que nos dé la gana porque 009 control de volumen ojo estoy con javascript puro y duro Vale ahora luego en cuanto tengamos esto un poco más avanzado si queréis nos vamos a css vale lo hacemos bonito pero de momento estoy con javascript por y duro bien Ahora a continuación esto es control de volumen Yo vengo por aquí bottom Play vale me voy por aquí esto es bottom Play vale esto es botón de Play Esto va Aquí Vale ahora Aquí voy a hacer control de volumen vale Y en el control de volumen yo digo led control el volumen es igual a document create Element input pero claro no es un input cualquiera control volumen punto eh set attribute type es igual a Range vale es un Rango Y contiene vídeo appen Child control volumen vamos a verlo Ok aquí el Play y ahí el control de volumen ya os digo que la maquetación es inexistente horrible vale Pero ahora lo apañamos ahora lo hacemos bonito la idea Está en que cuando yo maneje esta barra lo que quiero es subir y bajar el volumen Vale entonces yo por ejemplo ahora digo control volumen eh a ver y0 10 evento sobre el slider y digo control volumen punto change es igual a function momento que Bea y digo console log dis Val entonces me vengo por aquí y comprobamos que si yo hago así e hola hola qué ha pasado Ah no es change es onchange vale hago así y vais viendo cómo voy cambiando el rango del slider el audio en el vídeo de javascript En qué Rango está pues no me acuerdo memoria Así que eh js eh set audio from vídeo eh html tag es set audio volume ya está y acepta entre C y un es el rango pero mi Rango acepta de 0 a 100 vale Así que no pasa nada porque me vengo por aquí y digo vídeo tag vío punto volume es igual vale es igual es propiedad Perdón no es propiedad O sea no es función es propiedad a dis pun value dividido entre 100 para que el rango de 0 a 100 se quede en 0 a un vale Así que yo hago así es más voy a ver un momento los Controls Okay vale Y si yo hago así vale Ay no sé si veis que está abajo del todo y ahora lo pongo al 50% veis que está al 50% lo pongo arriba del todo y está arriba del todo vale Y le doy a Play por supuesto y puedo controlar Soy José Vicente carala y puedo controlar el reproductor vale Okay Voy a darle un poquito de css porque esto es como muy feo vale como muy botón por ahí y yo quiero hacerlo más bonito de hecho eh vamos a ver sí no me Temo que no Ojalá Pero está escondido en Chrome ya s no desde luego para saber cómo lo han hecho para inspirarme y no cometer yo los mismos errores desde luego o sea yo siempre soy de esa filosofía pero creo hasta donde yo sé creo que no que está metido dentro de Chrome en fin per seguro que se puede sacar porque todo eso es muy público también te lo digo o sea igual desde Chrome no pero seguro que en claro en alguna página de documentación de chromium seguro que está algo de esa documentación ten en cuenta que esos controles muchas veces no son css o no son html o no son javascript sino que vanen bbos en chromis c o c+ má Pero bueno no lo sé Vale entonces eh yo ahora a continuación 011 Bueno aparte de 011 Perdón me voy a ir a Ink escape y voy a hacer una pequeña colección de iconos porque tampoco me cuesta mucho entonces eh vamos a ver aquí vale Yo vengo por aquí a ver si no me deja tirado el hostias Ah vale espérate porque aparte esto es desde cero hasta 360 Okay Eh Esto es así vale Okay quita vale Esto es así bien Y entonces ahora yo Marco esto de negro no quiero trazo y voy a hacer un polígono de tres lados para hacer un play Okay No tan grande igual una cosita más así Venga pues qué pues esto a continuación propiedades del documento me lo adapto Y entonces me guardo este documento como dam segundo multimedia librerías conceptos y play. svg y es svg plano vale Ok lo cual quiere decir que yo ahora me voy a quitar esto me voy a poner una Barrita Blanca me voy a poner dos barritas blancas y me voy a guardar esto como pause svg plano vale Y ya lo tengo bien a continuación vamos a ver text content no botón playto innerhtml claro Espérate no no no para hacerlo bien yo le digo espera Espérate js load svg no sé si se carga igual como imagen Sí pero no y en el html no ay a ver Es que puedo hacer esto iner html es igual a svg perdón img src y es play. svg vale Esta es una forma este es pause y este es Play es un poco bestia porque es meter html a Palo Seco Pero bueno si existe el método Inner html es porque se puede utilizar vamos a verlo vale Ahí está el botón pincho se convierte en pause pincho y se convierte en play vale Ahí lo tenéis ahora a continuación yo lo que quiero es jugar un poquito más con el elemento Vale entonces vamos a ver me voy aquí esto es 011 estilo y digo Style eh J videoo el contenedor J vío es un Wi de 600 píxeles y es un height de No lo sé de 400 píxeles vale va a tener un Border de momento un Pixel solid Grey Para qué para verlo J vío a ver y sí lo está haciendo aunque no se vea pero lo Ah míralo está ahí vale Ok entonces j vdeo vídeo es eh with 100% Ah esto ya es otra cosa Vale y ahí está el reproductor ahora a continuación el Controls lo voy a quitar ahora a continuación digo vale esto quiero que forma forme parte de una Barrita aquí Claro que forme parte de una Barrita quiere decir que Let barra controles es igual a document create Element div barra controles classlist ad barra controles va y eh contiene vídeo appen Child barra controles vale barra controles J vío barra controles es vamos a ver Esto es position relative esto es Pos absolute Y entonces with de 400 píxeles height de 50 píxeles o igual 30 píxeles background White Border radius de 30 píxeles Vale ahora bottom 10 píxeles left 50% y margin left de men2 píxeles vamos a verlo Hola No sé si Esta es la última versión Sí vamos a verlo barra controles Ah míralo Por qué Vale pues porque esto es 320 píxeles ahí esto ya está cosa Vale tengo una barra controles y obviamente este botón tiene que formar parte de la barra controles así que botón Play contiene vídeo pues no barra controles appen Child botom Play plon Ahí está claro es muy fuerte vale es muy bestia Entonces como es muy bestia pues lo sigo estilizando le digo J vío barra controles importante lo de que ponga J vío para asegurarme que no me colisione con ningún otro estilo css Button y es with 40 píxeles he 40 píxeles Border known background known Ok Vale y jv barra controles buton img with 100% bueno casi a poquito vale esa barra controles Pues igual Ah claro 40 píxeles y aquí le he puesto 30 píxeles obviamente 35 a ver qué tal en casi eh 36 esto ya tiene mucha mejor pinta en el sentido de que cuando hago así se pone en marcha Soy José Vicente caratal cuando se pausa vale ves lo que quiero Hacia dónde voy o sea hacia dónde voy es tener un reproductor completamente personalizado ahora hablamos de esto de aquí bien Además insisto una vez más que tal y como lo estoy programando de la forma modular que lo estoy programando si y ahora aquí tengo tres vídeos me van a aparecer tres reproductores y cada reproductor va a controlar realmente a su vídeo o sea va a ocurrir lo que soy José Vicente caral Okay bien Vamos a continuar lo dejo con un vídeo y claro a partir de aquí igual que comentaba en la asignatura anterior ahora gestiono esto ahora pongo comentarios a esto Pues ahora se trata de ampliar este código se trata de ampliar este ejercicio de tal forma que podamos que sintamos que podamos Añadir todo lo que nos dé la gana vale Así que yo ahora a continuación me vengo por aquí me voy a crear otro botón y digo Pues mira voy a crear un altavoz eh Aquí voy a crear una altavoz vale se supone que son un altavoces O de ahí pero bueno y ahora voy a crear un círculo pero solo quiero un trozo de círculo ahí Vale entonces relleno no color de trazo tal lo quiero blanco quiero más no vale menos y lo conecto Aquí y ahora vengo aquí por ejemplo y le digo guardar como eh Como svg plano volumen menos punto svg y ahora a continuación duplico Uy no que no duplico a ver dónde estás ahí y voy a ponerle uno más yo que sé no me está molando mucho este icono Pero vale que no ahí y ahí vale una cosa así yo que sé Y esto es eh volumen más svg Así que a continuación botón de Play pues esto es 0 botones de volumen más y menos botón de Play pues vamos a ver Ok Okay Vale botón volumen más botón de volumen más led vídeos para cada vídeo volumen es igual a 1.0 led volumen es igual a 1.0 Quiero un buton el volumen el botón es volumen más barra controles Child botón volumen más estado me da igual vale If eh vídeo tag vdeo tag vío punto volume es menor que 1.0 en ese caso volumen más igual 0.1 Es decir si no estás al máximo Súbele 0.1 ahora copio pego botón de volumen menos menos cuidado aquí menos si el volumen Es mayor que 0.0 menos igual 0.1 vale de 10 en 10 yo que sé vamos a verlo vamos a ver qué aspectro tiene esto botones de volumen miral los qu bonicos ahora hablamos de Vale ahora hablamos del estilo Play se ha silenciado Soy José Vicente carratalá y soy un formador desarrollador y diseñador no no el debajo va independiente crear soluciones personalizas a clientes sobre vamos a ver aquí qué pasa porque tienen mucha Ah míralos vale tienen mucho margin tien mucho margin por defecto Vale entonces vamos a un poquito de estilo Button y voy a decirle margin cero píxeles Uy y padding cer píxeles ohju vale espérate padding 5 píxeles AH venga padding de un píxel padding de dos píxeles bueno y ahora pues claro vamos a decir 38 por 38 vamos a probar no 35 bueno Vale 36 vale Y en la barra controles padding left 20 píxeles no tanto c píxeles tres píxeles dos píxeles bueno para que se quede un poco ahí Sal es en cuadradito como os podéis imaginar a partir de aquí a partir de este momento pues podemos como te diría yo o sea podemos crear tantos botones como haga falta con tantas funciones como sea necesario una cosa que me falta pues es la barra de Progreso es decir si yo me voy a controles eh vamos todos los controles yo tengo esa barra de Progreso que gracias Chrome por darme una barra de Progreso pero es que no me gusta esa barrar Progreso vale con lo cual yo una vez más me voy a crear 013 crear barra de Progreso vale Y yo a continuación por aquí vamos a ver barra controles pues no quiero led barra Progreso es igual a document create Element div barra controles Class List es barra Progreso Class List es barra Progreso vale Y contiene vídeo appen Child barra Progreso no barra Progreso además led Progreso es igual a document create Element div Progreso Class List progreso y barra Progreso appen Child Progreso eso qué quiere decir pues que yo ahora vengo por aquí me voy a crear barra de Progreso y tengo un momento que te lo digo y tengo una barra de Progreso que tiene dentro un div llamado Progreso ahora a continuación yo por ejemplo voy a decir lo siguiente 014 estilo de la barra de Progreso y digo J vío barra Progreso es Pos absolute vamos a verlo Pos absolute with 400 píxeles porque ah no 600 píxeles Ah 600 píxeles Okay voy a poner 500 height 10 píxeles background White bord de radius bottom 5 píxeles left 50% y men 250 píxeles y padding left no necesito vamos a verlo Ok una barra de Progreso un poco fuerte un poco bestia Vale pues eh le digo H 5 píxeles Ok un poquito mejor y la barra de controles pues la quiero a ver bottom y pues 20 píxeles una cosa así vale ahora ahí dentro Quiero un progreso Entonces por ejemplo yo digo j vídeo barra Progreso Y entonces digo eh with 50% background Dime un color gris ostia tío gris no un poquito más alegría o sea te digo un color y me dices un no color eh un colorín Ya yo también pero sabes verde Vale pues eh A ver un verde que sea un poco desaturado sí sí css3 colors A ver pues mira eh vamos a ver por aquí Dark Green Dark Oliver Green Mira este fantástico Dark Oliver Green vale h 100% y ya está a ver qué pasa mira ahí lo ves cuidado porque overflow hidden ahí yo ahora qué es lo que quiero pues que conforme el vídeo vaya avanzando se vaya efectivamente la barra incluso ahora luego querré que haya algo ahí que me permita pues eh controlar vale el punto del scroll claro la cuestión está en que con los controles de html5 yo no podía modificar Pero con esto sí yo me puedo crear yo puedo controlar el multimedia vale hoy vídeo insisto el próximo día audio el tema de audio Será muy Guay y muy interesante sobre todo porque el audio siem lo dejamos muy abandonado nos dedicamos a la imagen nos dedicamos al vídeo pero el audio está como que no le hacemos ni caso cuando realmente el audio es la el 50% de multimedia Pero bueno Y entonces hablaremos Pues el tema así como el vídeo todo el mundo entiende Pixel vale en audio no en audio hay un concepto que es el sample hay otro concepto que es la profundidad de la onda hay el concepto de la onda Sí es otro mundo pero claro nos tenemos que acostumbrar o por lo menos tener unos conocimientos mínimos de cómo funciona vale bien Así que yo vengo por aquí yo vengo por aquí y digo quiero averiguar En qué punto está el cabezal Vale entonces js get video total Time and video current Time duration y current Time perfecto Así que yo vengo por aquí Okay a ver un momentín y aquí eso es primero quiero esto y es que vamos a ver tag vío tag videoo ad event listener Time update es decir cuando el tiempo vaya corriendo en ese caso le digo espera caray va vale en ese caso le digo le actual es igual a tag vío punto current Time y no current Time es una propiedad y LED total es igual a tag videoo punto duration eso quiere decir que yo a partir de ahí puedo sacar un porcentaje led porcentaje es igual a actual partido total y todo esto multiplicado por 100 con lo cual ahora a continuación puedo decir Progreso punto Style wid es igual a porcentaje más porcentaje o sea actualizó el css vamos a ver si funciona que debe ser que sí Perdón s recargo le doy a Play vale está ahí y no sé si se ve Soy José Vicente carratalá y soy un formador desarrollador y diseñadores se va actualizando en los campos del diseño y desarrollo y ahora a continuación pause y se pausa Pero insisto una vez más que como estamos trabajando con css Pues yo la continuación puedo decir mira sabes queé la hora de Progreso la quiero de 10 píxeles porque esto Me lo voy a subir a 30 píxeles no s igual es mucho saber y ahora a continuación barra Progreso digo Box Shadow cer píxeles c píxeles 5 píxeles rgba 0,03 inset Vale y tengo una sombrita muy no se nota y tengo una sombrita ahí dentro vale Y esto de aquí es como una Barrita que va subiendo a ver el puntero no en principio Soy José Vicente carratala y soy un formador de a ver en principio aquí en mi pantalla el puntero no va raro lo que pasa es que yo calculo que por el tema del streaming de zoom como cuando paso el puntero por el vídeo y el vídeo Está en marcha Hay un montón de información multimedia Yo calculo que pues lo que está ocurriendo es eso es que vale se está o sea el streaming no da de Sí vale Pero bueno estoy conectado por cable con lo cual más hacho de banda no puedo tener evidentemente bien Ahora a continuación Pues yo lo que puedo hacer y ahora iremos con el segundo ejercicio del día de hoy que continuaremos el próximo día es capturar pantalla bien Vamos a ver Vamos allá un momentín voy a crear un par de botones más y tampoco voy a crear muchos más porque creando un par de botones más ya os hacéis la idea de qué va la cosa Vale Play Hola Play bien entonces voy a esto Hola Qué ha pasado por que está agrupado o qué es agrupar Qué cosas yo no lo he agrupado Pero bueno vale hago así y Esto me lo guardo como avanzar punto svg y es un svg plano y de la misma forma hago así y es un retroceder svg yo hago así me voy al código 015 botón de avanzar botones de avanzar y retroceder vale botón de volumen menos pues botón de avanzar claro yo aquí puedo copiar botón control d avanzar control volumen es un no no quieto no control de volumen menos control de retroceder vale Bueno voy a poner avanzar luego igual los intercambiar creo eh A ver botón avanzar eh avanzar y barra controles botón avanzar punto click ahora veremos lo que ocurre y botón de retroceder y buton retroceder botón retroceder okay Así que me vengo aquí vale Y ya os digo que los voy a invertir porque Bueno teóricamente a nivel gráfico queda mejor al revés y a continuación como tengo el current Time yo lo que puedo hacer es que el current Time lo sumo vale lo aplico entonces vengo por aquí y digo cuando click tag vío tagv current Time má igual a un segundo creo que es un segundo o es un milisegundo No lo sé ahora lo vemos vale Perdona avanzar es más igual a 1 retroceder es menos igual a 1 Vamos a verlo y Play como lo voy abando rápidamente igual puedo decir actualmente coordino esos cursos de posgrado con otras actividades del diseño program coordino escondido una zona efectivamente de la misma forma que yo por ejemplo correcto lo mismo pero espera no porque o porque el mismo tag vídeo tiene una función Mira eh 016 click en el vídeo como el vídeo es un elemento Java como el vídeo lo tengo en la memoria yo ahora vengo por aquí y digo un momentín aquí y digo clic en el vídeo y yo clic en el vídeo le digo tag vío punto onclick es igual a fun y de hecho lo que voy a hacer es en el botón de Play me voy a literalmente copiar esto Open Child botton Play Let testado Sí deberíamos Vale entonces un momentín yo hago esto ya sabemos que esto no es bonito con lo cual yo ahora vengo por aquí recargo vale hago clic y se reproduce y hago clic y se pausa y hago clic y se reproduce y hago clic y se pausa y ahora efectivamente tal y como has comentado refactorización en 017 refactorización yo puedo crear una función que diga function Play o pausa la función playo pausa me recoge todo esto con cuidado vale Sí ya es lo que voy a hacer Ok fun playo pausa y entonces digo Play pausa pero ahora voy a hacer ahora El qué no sí arriba tengo que llamar pero el problema es que si esto se refiere a cada vídeo Qué es tag vídeo vale Qué es tag vío cuando yo lo saco pues lo que voy a hacer es que esto lo voy a meter dentro es decir si os dais cuenta es la declaración de una función dentro de un for each dentro de una función vale que es una función totalmente local Así que yo hago así Eso es muy magia negra javascript Pero bueno vale hago así y funciona Pero insisto digo que es magia negra digo que es magia negra Porque si yo hago así tengo tres diferentes y cada uno funciona para cada uno de los tres por qué Porque si lo saco fuera el programa dirá A cuál de los tres vídeos te refieres claro vale que ya os digo que no es tan normal que en una página dime correcto Exacto Vale y doble clic pues efectivamente correcto o igual pues doble clic con el botón izquierdo pues tira para atrás y doble clic con el botón derecho pues tira para adante yo que sé vale eso ya es la lógica efectivamente bien pues una vez que tenemos esto y digamos empieza a estar claro que el objetivo de esta unidad es eh crearnos nuestros propios componentes multimedia vale eh A partir de aquí de hecho si te fijas Ah por cierto Perdona última parte de este ejercicio última parte de este ejercicio y ahora viene lo que a mí me parece lo más bonito de todo multimedia librerías Vale ahora encapsulo y eso quiere decir que yo vengo por aquí en capsulo Y esto es Index html Y entonces en Index html yo ahora me creo una nueva carpeta llamada j vío y en jv me hago un archivo nuevo llamado jvideo js y me hago un archivo nuevo llamado JVC Y entonces en Y entonces aquí en el html le digo link rel es igual a Styles sheit hre es igual a jv bar JVC y Script es igual a src jv barj video.js Y esto es lo bonito que sea reutilizable al nivel de que yo ponga aquí vídeo y yo ya sé automáticamente que cuando esto cargue me va a cargar todo dónde de dónde qué quieres decir Ah sí eso evidentemente podemos meter un campo donde si metes un vídeo cargue un vídeo y le aplique ese reproductor correcto vale Entonces ahora sí ya tenemos este ejercicio y sobre todo es que este ejercicio tiene que acabar así para que entendáis que sobre todo a la vista de lo que estamos haciendo en interfaces a la vista de lo que hemos hecho en sistemas de gestión empresarial que entendáis que al final todo tiene que ser modularizado todo tiene que ser empaqueta todo tiene que ser reutilizable podremos utilizar el J vío en la asignatura del sistema de gestión empresarial no parece muy probable porque un sistema de gestión empresarial no suele tener vídeo vale pero aunque si necesitamos utilizarlo pues decir Oye que esto está empaquetado para meterlo en el crimson y que funcione vale que no creo que ocurra Pero bueno bien Vamos al segundo ejercicio y entonces una cosa que quiero eh indicaros que es algo que me parece muy divertido y creo que esto os va a dar pie a muchos tipos de aplicación es que tanto en python como en javascript no solo puedo capturar el vídeo sino que también puedo capturar la pantalla es decir lo que voy a hacer a continuación el otro día os acordáis que entre varias asignaturas hicimos un sistema de videoconferencia vale el blink Pues ahora lo que quiero es hacer un zoom es decir quiero capturar la pantalla y mañana en sistemas y procesos o Perdón en procesos y servicios lo que haremos es procesar esa pantalla vale Así que vengo por aquí me voy a eh utilización me voy a arquitectura vale Y aquí voy a hacer un nuevo archivo 001 capturo pantalla punto html bien me voy a copiar Esto me voy a capturo pantalla cierro algunos archivos vale esto ya no lo quiero Okay esto ya no lo quiero y ahora vengo por aquí y digo js javascript capture screen vamos a ver vale eh voy a empezar a limpiar todo este vídeo o sea todo este código Bueno sí esto mejoro vale voy a copiar todo este código voy a pegarlo Aquí y ahora voy a simplificarlo brutalmente vale porque diréis madre mía lo que hay que hacer para capturar la pantalla pues no vamos a ver no a ver hacer una cosa eh simplest possible es como va límpielo tú muy bien vale Okay fantástico esto es otra cosa Vale y me lo pone una función y yo voy a intentar que no sea una función asincrónica Es más voy a hacer esto y Ok y ya está OK bien vale Vamos allá vamos a refrescar local Host segundo y programación multimedia librerías arquitectura captura vale vamos a ver errores a bien dónde estás await aquí Ok vale fijaos vale sale esto qué es lo que quieres compartir Quiero compartir toda la pantalla Ok vale source object is not typ of type un momento document create Element video vale a ver me va a decir que sin el ait me voy a comer los mocos entonces voy a decir error y me va a decir que no puedo Us ser tan directo Eso es porque devuelve una promesa vale bueno no pues entonces me quedo el otro código Entonces me quedo el otro código que me parece más limpio y me gusta más okay vale vengo por aquí le doy aquí elijo toda la pantalla le doy a compartir y si os fijáis Vaya tengo una pantalla infinita no sé si veis como Estoy compartiendo toda la pantalla en un archivo de vídeo esto qué quiere decir Bueno pues esto quiere decir que en un momento dado puedo no solo streamear la eh No solo streamear el vídeo el próximo día veremos como streamer audio sino que puedo streamear también la pantalla completa ahora bien El otro día os dais os dabis cuenta de que en el vídeo iba lentísimo o sea os acordáis que nos conectamos tres o cuatro personas y ya el servidor iba fatal vale que yo os decía no es que el servidor es una no sé qué no sé cuántos vale que en parte es cierto pero también si os fijáis en parte el problema era nuestro porque eh estábamos enviando y atención que esto que os voy a decir es una barbaridad muy barbaridad segundo o cada x milisegundos estábamos enviando un fotograma entero sin ningún tipo de compresión intra fotograma y sin ningún tipo de compresión inter fotograma Y entonces a continuación vosotros diréis y qué puñetas quiere decir compresión intra fotograma y compresión inter fotograma alguna pista alguien se atreve a decir algo ver os cuento compresión intra fotograma y compresión temporal que es inter fotograma bien cuando vosotros reproducí un vídeo Mirad aquí cuando vosotros reproducí un vídeo sabéis que una cosa es un vídeo sin comprimir que ocupa un huevo y otra cosa es por ejemplo un formato mp4 que tiene el vídeo comprimido quiere decir que dentro de un mismo fotograma lo que hace por ejemplo es Buscar píxeles que sean parecidos y por tanto no declara varias veces el mismo píxel y la compresión temporal interframe inter fotograma lo que hace es que tú declaras un fotograma y mira el fotograma siguiente y entre el siguiente y el anterior Mira qué píxeles han cambiado Y si el Pixel no ha cambiado no me lo vuelvas a enviar vale Así que En definitiva el otro día otra de las razones por las cuales nuestro programa iba muy lento era porque no estábamos creando ningún tipo de compresión Pero por qué Pues porque el otro día no habíamos llegado a esta parte te de multimedia de Qué es compresión con audio ocurre igual una cosa es el audio sin comprimir y otra cosa son formatos un archivo web ocupa un huevo Pero porque no tiene compresión y luego por ejemplo Exacto hay formatos con pérdida como el MP3 o formatos sin pérdida como el flag vale hay diferentes tipos Pues en vídeo ocurre igual Espera que me aogo yo por ejemplo en la pantalla estoy viendo que tengo un montón de píxeles blancos La idea es de todos los píxeles blancos que tengo por qué no puedo simplificarlas los píxeles que tengo voy a intentar averiguar Cuál es el píxel Cuáles son los píxeles que se están moviendo lo que voy a hacer a continu es lo mismo que habréis visto alguna vez en alguna película que de repente la pantalla se queda rarísima vale Y de repente hace clac y ya se coloca la imagen y sigue el vídeo como una Estela rarísima vale bien para ello me voy a hedit y 002 y ahora a continuación quiero eh poner el vídeo dentro de un Canvas Así que vengo por aquí y digo bueno y digo vamos a ver led Lienzo es igual a document create Element Canvas Así que a continuación en cada uno de estos vamos a ver Lienzo punto Espérate led contexto es igual a Lienzo get context 2D Así que contexto draw image de vídeo en 0,0 Además le puedo decir que vamos a ver de cuánto es este vídeo Por cierto que todo esto debe ser de 1920 por 1080 Sí vale pues Lienzo punto with es igual a vídeo Wi y Lienzo pun H es igual a ví pun H vale Así que toda la no quieto tira para atrás poner el vídeo toda la pantalla compartir vale Y por aquí abajo Ah sí Perdón y al final document es Lienzo Vale y pl toda la pantalla compartimos Vale y vídeo y Canvas with vale venga vamos a ver capture screen Ok entonces Let lienzos igual a esto lo pongo aquí esto lo pongo aquí y vídeo e y el Lienzo a ver espera vídeo vale Ah video Play vale voy a quitar víde on loaded metadata es igual a function Y entonces voy a decir videoplay Me quito el operador diamant este que tengo una manía que te cagas y eh Y ya y esto de aquí vale venga esto y Canvas Ah with cero qué rabia Mira 1920 1080 a ver ahora vale venga Lo único que ocurre Es que tengo únicamente la eh primera vale la primera ventana la primera captura a partir de ahí no Se está actualizando Pero no pasa nada ahora 003 actualización continua vale vengo por aquí y digo Aquí contexto trow image Vale y ahora vamos a ver voy a decirle lo tenía en el anterior 001 aquí Y dónde estás A dónde estás lo tenía Espera que se me ha apagado el monitor aquí Time update Esto es lo que quiero Vale entonces digo vídeo punto Time update y voy a decir que contexto draw image vídeo ahora pongo comentarios Ahora quiero el siguiente toda la pantalla comparto un momentín algún error creo que no aquí V is not defined Ah bueno Vale aquí recargo Y ahora qué contexto is not Define leches contexto se define aquí Vale pues creo un Lienzo creo un contexto están ahí fuera para que se puedan reconocer ahora sí no s si veis el Canvas abajo se un poco más lento pero se actualiza vale si ya tengo la captura de pantalla en un Canvas Eso quiere decir que ya puedo hacer lo que me dé la gana con ella porque eso quiere decir que únicamente ahora a continuación tengo que los datos y empezar a procesar los datos para ello ahora vamos a ver 004 creo un par de Canvas más Y entonces Digo vamos a ver esto fuera por cierto ahora sí Y entonces vamos a ver ahora pondré comentarios led Lienzo 2 contexto 2 es Lienzo y Lienzo dos led Lienzo 3 y bueno y contexto document Body happen Child Lienzo 2 y document Body appen Child Lienzo 3 así que recargamos Y aunque no se ve aunque no se ve pero tengo ahí hay unos cuantos lienzos en los que ahora a continuación voy a empezar a trabajar ahora para cada uno de los fotogramas lo que quiero es averiguar Qué píxeles son diferentes al averiguar Qué píxeles son diferentes también podría averiguar Qué píxeles son iguales cuando vaya a transmitir esto e Por qué no se me enciende la pantalla cuando vaya a transmitir esto lo que ocurrirá ahora vale lo que ocurrirá es que podré enviar solo los datos que cambian y no enviar al servidor los datos que son iguales que el fotograma anterior vamos a por ello Y entonces digo vamos a ver vale 005 me guardo antes de nada vamos a poner comentarios 005 comentarios para asegurar que entendéis todo lo que está ocurriendo esto bajo video true Por qué video true Pues porque más adelante podemos pasarle audio hoy no pero Vale entonces intento hacer algo atrapo la captura de pantalla creo un vídeo y le digo que el contenido del vídeo es la captura de pantalla creo un Lienzo creo un contexto Lienzo esto lo voy a poner aquí y aquí establezco la anchura del Lienzo establezco la altura del Lienzo Y entonces digo creo otro Lienzo creo un Lienzo y creo un Lienzo y creo un contexto y creo un contexto anchura del Lienzo anchura de Lienzo altura del Lienzo y altura del Lienzo y lo añado aquí y lo añado a la pantalla a ver si esto no se me cuelga Okay perfecto Vale y lo añado al documento lo añado al documento lo añado al documento bien Cuándo cuandoo la captura de pantalla esté preparada eh Pon el vídeo en marcha y el contexto image me lo voy a cargar porque realmente no es necesario ahí en ese vale hago así y veo que lo tengo Exactamente igual y ahora por último añado el vídeo al documento y cada vez que el vídeo se actualice refresca el Canvas y el Catch es el error obviamente Vale ahora como os digo Quiero capturo el estado Y comparo eso qué quiere decir pues que por aquí vamos a ver aquí vale que vengo por aquí y digo Let estado es igual a contexto punto aquí viene el problema contexto pun Gate image Data desde 0,0 a 1920 1080 Esto va a dar error Esto va a dar error porque estoy declarando o sea estoy usando el contexto antes de utilizarlo entonces Let estado tiene que ir aquí ahí Vale ahora sí tengo el estado entonces para cada uno de para cada aquí los metadata aquí para cada uno de los eventos digo l nuevo estado es igual a contexto get image Data de aquí tengo el estado anterior y tengo el nuevo estado Qué es lo que tengo que hacer ahora comparar los estados para ver cuál es la diferencia entre los estados entonces vengo por aquí vamos a ver y 006 repaso para comparación pun html no da igual y digo for Let I es igual a 0 Y es menor que nuevo estado d. length y má ig a 4 ya sabéis por qué vale porque vamos de cuatro en cuatro vamos trabajando con los píxeles y yo digo If Data Perdón If nuevo estado punto Data de I es igual a estado punto Data de solo voy a comparar de momento el canal rojo va a pasar una cosa si no va a pasar otra Así que vamos a ver eh vale Ahí está el problema Let Dame es igual a contexto 2. get image Data de esto de aquí entonces digo Dame de I es igual a 255 un momento bueno a ver sí vamos a Dame de I es ig a 255 Dame de I + 1 es igual a 255 Dame de I + 2 es = a 255 y dame de I + 3 es = a 255 en caso contrario Dame 00 y 255 y al final contexto 2 punto put image Data de dame en 0,0 y muy importante estado es igual a Nuevo estado es decir refresco el estado vamos a probarlo vamos a ver si funciona Vale ahora dónde está el contexto Cuál es el contexto este lo que debería ocurrir Es que aquí bajo debería estar empezando a marcar las la diferencia entre un fotograma y otro no está ocurriendo vamos a ver por qué vamos a ver nuevo estados igual a con Mira voy a hacer una cosa console pun log igual y console punto log diferente ya sabéis que cuando algo no funciona yo lo que hago es empezar a debugar vale es empezar a ver por qué no funciona e Hola se ha quedado frito vale se ha quedado muy frito diferente se ha quedado muy frito pero muy frito vale pero frits imo Ok local Host segundo multimedia dos repaso toda la pantalla bueno se queda frito vale se queda frito lo cual quiere decir que está funcionando vale Ah ya sé lo que he hecho mal ya sé lo que he hecho mal y es que es no es Dame pun Data es Dame punto datata Dame punto Data Ah a ahora sí no si lo veis que en esa pantalla aparece lo que es diferente de hecho aparece curiosamente acabo de hacer un triángulo ser pinski que es un fractal porque es recursivo vale si os dais cuenta tengo el efecto espejo y al tener el efecto espejo Pues tengo como una especie de triángulo fractal que es muy interesante Pero en fin da igual es un tema matemático Vale ahora sí fijaos que yo lo que estoy haciendo es detectar Cuál es el píxel que se ha movido y por tanto lo que podría hacer es al servidor enviarle únicamente el Pixel que corresponde vale vamos a ver cómo podemos hacer eso quedan 10 minutos pero por lo menos Bueno ya hemos demostrado esta parte y mañana en servicios y procesos ya tenemos todo preparado para decir Vale ahora te envío solo lo que corresponde vale Te envío solo lo que toca comentamos un poco de código entonces 008 comentarios vale capturo el nuevo estado para comparar capturo el Canvas para dibujar vale porque ahí es donde voy a dibujar entonces digo recorro píxel a píxel la información y digo Si el píxel rojo es igual que el anterior en ese caso por marcarlo de alguna forma pinto de blanco Por qué de blanco Pues porque me ha dado por ahí Es decir es una forma de verlo de visualmente demostrar que estamos capturando la diferencia entre un fotograma y el otro en el caso contrario pinto de negro y ahora en el contexto dos pinto los cambios y antes de continuar le digo que el estado anterior es el nuevo estado Por qué Pues porque siempre comparo el fotograma actual contra el anterior que yo lo esté pintando en un fotograma que yo lo esté pintando en un Canvas realmente es lo de menos Es simplemente primero para mí mismo para debugar que está funcionando correctamente ente y segundo para vosotros para demostraros que realmente Es cierto que estamos capturando solo el cambio claro ahora si os dais cuenta yo por ejemplo por aquí en cada uno de los píxeles que es blanco es decir Pixel que no ha sufrido cambio yo lo que haría es no enviar esa información al servidor y en cada uno de los píxeles que son negros lo que haría es sí enviar la información al servidor vale eh cómo hacerlo pues eso es lo que hoy ya no nos da tiempo hay que pensarlo porque vosotros diréis ya está con este profesor la respuesta siempre jas en este caso no vale en este caso no porque necesito o sea jas es un formato muy Guay pero es muy verboso y es muy grande cuando ahora necesito lo contrario as voy a enviar mensajes y mi problema es el tamaño necesito comprimir esto lo máximo posible para asegurarme de que solo envío lo bueno claro qué ocurre que si yo envío vale por ejemplo 0000 de Cara a la compresión le puedo decir o no plum es un cero y me lo multiplicas por no sé cuántas casillas Vale entonces ya os digo dejo esto aquí quieto porque mañana continuaremos retomando esto en procesos y servicios para ver cómo podemos reutilizar el blink para convertirlo en un zoom vale Y que veáis que podéis programar en un zoom y ya hasta hoy de momento lo que quiero es el concepto de capturar pantalla y de la compresión intra fotograma e inter fotograma bien Vamos a hacer 5 minutos de descanso ahora entramos