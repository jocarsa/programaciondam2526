lo que quiero ahora es realizar al menos una sencilla validación la validación estoy azul la validación evidentemente la hago lo digo por no está grabando el omega 3 que no tiene audio el vídeo y sería horrible entonces la validación la hago en el momento en el que insertó el registro esto qué quiere decir pues esto quiere decir que si busco aquí en el programa voy a desactivar si busco aquí en el programa donde tengo que escribir código veis esto ya se empezó a complicar porque ya tengo tanto código que digo madre mía y ahora donde le meto yo mano aquí vale pues yo pienso si quiere realizar una validación sobre la inserción tengo que buscar el código de la inserción así que el código de la inserción lo que hace es lo siguiente lo que hace es el nuevo registro especificar qué es lo que pasa cuando hago clic en crear un nuevo registro pero ahora cuidado voy a hacer lo siguiente mira le digo cada vez que haga clic en este elemento es campo nombre pues cada vez que cuando sobre campo nombre haga es más en el ejercicio teórico lo hicimos con blur o en este ejercicio lo voy a hacer con key down queda aún es cada vez que yo pulse una tecla o sea no quiero escribir y que solo cuando salga del campo melo validez es decir tecla a tecla que escribas quiero que vayas validando si realmente lo que estoy escribiendo es correcto o no así que queda aún y le digo válida antes de insertar fíjate qué función más compleja en cuanto al nombre así que ahora digo function válida antes de insertar y defino la función si queréis mirad le digo alert pulsado vamos a ver lo recargo pongo el código para que lo podáis leer lo tenéis aquí arriba queda aún y válida antes de insertar nuevo registro y mirad que cuando hago así me dice pulsado cuando pongo otra letra me dice expulsado es decir cada vez que toque una tecla dentro de ese campo lo que va a hacer es ejecutar la función válida antes de insertar válida antes de insertar he puesto a leer simplemente para que lo veáis pero realmente no quiero un alerta lo que quiero es validar y qué es lo que voy a validar bueno nos vamos a copiar o vamos a reutilizar algo de código y digo campo nombre y voy a evaluar cuál es su contenido y lo voy a lanzar contra la base de datos así que qué voy a hacer bueno lo que voy a hacer es lo siguiente miradme pero primero abro la base de datos segundo atención creo un resultado estoy copiando del método buscar ahora realizó una transacción aquí realizó una transacción pero la voy a simplificar select el from agenda where nombre es igual a campo nombre y ya está un segundo y eliminó todo esto y ahí lo tenemos voy a quitar esto y aquí está y todo esto y quito todo esto dejadme que lo estoy limpiando y ahora en cuanto lo tenga limpio os lo explico paso a paso bien válida antes de insertar lo que hace es lo siguiente cada vez que yo pulse una tecla dentro de ese campo se ejecuta válida antes de insertar válida antes de insertar malgasta un poco de recursos pero bueno para este caso me preocupa mucho ya que cada vez que yo pulso una tecla se me conecta a la base de datos vosotros seríais como dejar la conexión abierta ya está pero ya lo sé estoy copiando y pegando a la bestia crea una matriz de resultados y a partir de ahí lo que hace es decir existe alguien en la agenda cuyo nombre sea campo nombre es decir lo que estás escribiendo en ese campo hay alguien que ya lo tenga así que mirar atención ahora hago lo siguiente me voy a crear una variable contador o los contadores que buenos que son que va a ser igual a 0 si queréis como ya tenía de ayer creó un contador voy a hacer un cuenta nombre es igual a 0 si esto es correcto dentro del foro pongo cuenta nombre + + qué quiere decir esto pues esto lo que quiere decir es muy sencillo cuenta nombre empieza siendo igual a 0 si hay algún resultado en la base de datos cuenta nombre ya no será igual a cero porque va a ir sumando de valor si no hay ningún resultado en la base de datos quiere decir que esto nunca se llegará a ejecutar y por tanto contador seguirá siendo igual a cero así que de esa manera con este sencillo truco de contadores puedo averiguar si realmente vamos a verlo si realmente existe ese nombre en la base de datos o no existe por tanto ahora por último voy a utilizar ese contador en una estructura de control y félix para hacer lo siguiente si cuenta nombre es igual a cero en ese caso quiere decir que sobre campo nombre voy a poner pss y le voy a decir que el background el fondo será de color verde claro que es verde claro es 200 255 200 en caso contrario lo que haré es decir campo nombre css 255 200 como a 200 es decir rojo claro qué estoy haciendo aquí por tanto lo que estoy haciendo es decir conéctate a la base de datos búscame si existe alguien que tenga ese nombre cuidado el nombre ya no quiere un like quiero un igual en la petición sql el nombre quiero un igual y le quitó las almohadillas porque tiene que ser una coincidencia exacta no te estoy preguntando si hay alguien cuyo nombre sea parecido no tiene que ser igual y por tanto por último ejecuto la estructura de control un segundo voy a probarlo no sea que tenga un error y estoy copiando y el error así que compruebo me voy a nuevo registro y digo j bien de momento ya tengo algo que no me está funcionando campo nombre css no me está funcionando vamos a verlo no creo que me dé ningún error ah pues mira no creo que no dé ningún error cuatro errores muy bien cuenta nombre es not be fine tengo un error no muy grave pero sigue siendo un error y me dice que la variable cuenta nombre no está definida como que no está definida bien pues efectivamente está definida pero no en el sitio correcto la he definido dentro de la función local tengo que definir la fuera veis como podía tener algún error así que recargó vamos a verlo le digo nuevo registro pongo j no sé si lo veis pero me lo ha puesto de color verde quiere decir vale lo podrías insertar ahora pongo un me lo pone de color verde creo que tenía jugando no saber y bueno tenía juana vale perfecto pues al nuevo registro ah m y si todo va bien ahora pongo maldito y me lo sigue poniendo color verde bien a ver qué pasa porque siempre me lo da como verdadero cuenta nombre es igual a 0 a cuenta nombre + + luego eso quiere decir que esto nunca se llega a ejecutar vale select el from a agenda where nombre es igual a campo nombre punto vale todo está correcto creo vamos a verlo voy a poner juana así vale pongo nada y me lo acepta problema siempre estoy aquí dentro así que con soul punto log has entrado dentro vamos a verlo un segundo no dentro del foro pero si dentro de la función quizás pero realmente no porque vamos a ver porque cada vez que yo estoy pulsando el botón técnicamente sé que se me acaba ejecutando esto con lo cual no haría falta lo puedo meter probar no cuesta nada una función por aquí otra función por allá lo pongo allí e incluso si quieres e incluso si quieres lo voy a meter justo después del foro así que recargo un nuevo registro y pongo jua no has entrado dentro vale pues sí que parece que ponerlo dentro del foro nos puede ver en este caso así que lo que parece para que un problema de lo que comentaba antes privado y público si se aumenta el valor ahí dentro parece que lo está poniendo como privado y no sale fuera así que vamos a comprobar mirad como si pongo juanan aparece rojo si pongo juana 2 me aparece verde porque ya no tengo exactamente su nombre pero si quito juana fijaos cómo se me vuelve a poner en rojo vale por tanto esto es lo que quiero hacer para la sesión de hoy vosotros me diréis bueno pero no estás bloqueando el botón enviar ya pero es muy fácil si hemos conseguido una cosa podemos conseguir la otra es decir lo que puedo hacer en este caso es recuperar código de días anteriores mirad ya os hago el método completo donde puse esto en validación y en web content creo que estaba en index 2 hice lo siguiente ahora lo pego el pego si mejor gracias entonces yo ahora digo si esto es cierto y esto es esto qué es dónde estás la negación no vale si esto es cierto y me lo pones en verde al revés disabled es igual a true pero si esto no es cierto quítame el atributo disabled esto que va a hacer pues mira me vengo aquí al botón me voy a insertar bissey bolt y ahora hago lo siguiente mirad recargo la aplicación nuevo registro tiene el botón deshabitado si yo empiezo a escribir jugó bien juana no me está haciendo en mi caso porque pues porque no estoy llamando al botón correcto el botón se llama envía nuevo registro ves lo que ha pasado por copiar y pegar por copiar y pegar estoy llamando a lead el botón de ayer entonces no pasa nada soy consciente de esto con lo cual me voy a buscar el código espera que lo encuentre y digo envía nuevo registro así que guardo y recargo nuevo registro fijaos que el botón está deshabitado y le digo j se me activa pero si hago juana se me desactiva no solo que te lo pongo rojo es que hasta que no pongas un registro que sea único no te voy a dejar continuar si pongo jugada 2 me lo vuelve a activar