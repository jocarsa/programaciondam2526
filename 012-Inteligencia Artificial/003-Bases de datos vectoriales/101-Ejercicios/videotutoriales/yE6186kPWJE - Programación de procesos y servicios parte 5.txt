voy a arrancar un proyecto que es un proyecto un poco curioso porque es un auto juego voy a poner game of life el juego de la vida entonces si pongo el juego de la vida en principio podemos parecer podemos pensar vamos a ver si esto recarga podemos pensar en of life que esto es más parecido digamos a un juego que a una aplicación de digna de procesos y servicios de multi proceso en este caso pero como voy a demostrar a lo largo de este ejercicio pues realmente es un buen ejercicio para realizar dentro de procesos dentro del análisis de multi proceso multiprocesador multitarea y computación distribuida en general bien el juego de la vida básicamente es este juego de aquí vamos a darle a start y es este juego que estamos viendo puedo hacer clic puedo crear por aquí más puntitos de estos y digamos que vemos como tenemos un patrón que va creciendo el juego de la vida tiene una serie de reglas tiene unas reglas concretas que vamos a analizar a continuación vamos en primer lugar a la página de la wikipedia para averiguar un poco más de esto de este juego o de este auto juego o de este juego podemos ver que es básicamente bueno vamos a darle aquí a play podemos ver que es un autómata celular es un auto juego diseñado por un matemático en 1970 es decir lo diseñó sobre papel como un juego matemático y luego más adelante pues con la popularización digamos de la informática pues han aparecido cosas como la que tenemos hoy en día que es pues la implementación informática de este juego de la vida para muchos programadores para muchos informáticos pues el juego de la vida es algo así como el hola mundo es decir en algún momento de tu vida pues tienes que hacer un juego de la vida vale es como uno de esos proyectos inevitables como uno de los proyectos obligatorios llegamos entre comillas evidentemente qué que tenemos todos que aprender entonces hay una serie de reglas sobre todo estoy vídeo en la página de la wikipedia porque hay una serie de formas predeterminadas para que digamos para estudiosos del juego de la vida pero hay por aquí una serie de reglas en la que están las variantes vamos vamos a aquí estas son las reglas y lo que voy a hacer a continuación a lo largo de estos ejercicios de lo largo de estos vídeos es implementar el juego de la vida pero el primero lo voy a hacer mal entre comillas vale y luego lo voy a hacer bien lo voy a optimizar voy a hacer que el programa sea más óptimo por eso no es que a principio lo vaya a hacer mal pero al principio lo voy a hacer de forma secuencial pero luego voy a ir modificando este código para que sea pues multiproceso multitarea para que sea más eficiente para que por tanto vaya más rápido otro algo que queremos notar y luego lo haréis incluso con computación distribuida lo cual nos llevará al siguiente tema que es la comunicación de red así que vamos allá vamos a ver vamos a por ello vamos a continuación a crear una nueva carpeta voy a crear la nueva carpeta aquí en aplicaciones o en hd realmente voy a hacer una carpeta llamada juego de la vida y en el juego de la vida nueva de 2021 porque luego cuando archivó estos proyectos pues tengo un montón de juegos de ellos diferentes entonces vamos a ver en 2021 o el juego de la vida 21 entonces entró por aquí voy a entrar en brackets vale voy a crear un nuevo proyecto lo voy a guardar r ht docs 21 voy a crear un archivo llamado index html y a continuación voy a hacer lo siguiente momento que estoy guardando una vez más voy a intentar hacer el código lo más sencillo que pueda lo más sencillo que sea posible puesto que ya se complicará más adelante a ver un momento que está guardando y mientras tanto vamos revisando las reglas y nos dice una célula muerta blanca digamos con exactamente tres células vecinas vivas nace vale al turno siguiente estará vida ok una célula viva con dos o tres células sigue viva pero si tiene menos de dos o más de 39 por soledad o por superpoblación que tenemos aquí una serie de reglas como para poder empezar a trabajar correctamente bueno veo que veo qué se ha quedado escrito el bracket no sé bien por qué pero lo que voy a hacer es que lo voy a cerrar a las bravas y voy a boy a abrirlo entonces juego de la vida 21 lo abro con brackets vamos a ver si ahora carga razonablemente rápido ok aquí lo tenemos bien entonces voy a hacer lo correcto doc html por aquí voy por aquí vale y vamos a ver ok y entonces sí entonces bueno pues lo que voy a hacer por aquí es poner un canvas que de momento va a tener un wifi de 512 píxeles y un height de 512 píxeles esto cambiará luego pero ahora de momento para trabajar para hacerlo más sencillo posible insisto y ahora voy a hacer un script y aquí dentro voy a empezar a trabajar luego por otra parte aquí en el head voy a hacer un pequeño style y dentro de este style voy a decir que es simplemente el canvas tiene un borde de un pixel solid gray simplemente para verlo así que ahora vengo por aquí y bueno arrancó el man porque no arrancó el mando le doy a localhost juego de la vida 21 y ahí lo tenemos ahí tenemos nuestro canvas y ahora por aquí vamos a trabajar el código así que dejó el campo aquí me llevo el bracket aquí y ahora vamos a empezar a trabajar llenar a continuación lo que voy a decir es que para empezar el juego de la vida voy a crear una serie de píxeles iniciales entonces para contexto es igual a document punto que element by heidi lienzo esto debería llamarse lienzo vale pienso y punto get contexto 2 d ok con cuidado y ahora digo carga inicial de píxeles negros vivos digamos entre comillas vamos a hacer como que los blancos están muertos y los negros también más adelante podemos cambiarlo vale aunque es un poco lo menos importante ahora mismo pero bueno entonces voy a decir ahora que vamos a ver de qué forma lo puedo hacer bueno puedo repasar todo el pixel no sé vamos a probar lo siguiente para datos canvas es igual contexto punto getty image data desde 0 hasta 512 y entonces para repaso cada uno de estos por bar y es igual a 0 y es menor el contexto punto data link y más ok y entonces dijo eve más punto random es menor que 0.5 ahora hablamos de esto en este caso voy a decir esto es más igual a 4 por cierto para repasar cada cuatro bloques de pixel entonces voy a decir qué datos canvas punto data no espérate get inmediata vale sí punto data day ok es igual así que lo voy a hacer con color rojo en lugar de aparecer negro y blanco luego aparecer rojo y blanco y 255 y por último después de todo esto contexto punto put image data y quiero poner datos canvas en 0,0 y yo creo que ya vamos a probarlo a ver si no tengo ningún error recargo vamos a verlo quizás tenga algún error un error vale no puedo leer las propiedades de andy y frank schleck entonces conte no es si no es datos canvas esto es vale recargo y vamos a verlo en principio no voy a hacer una cosa también y es que el contexto punto field recta desde 0,0 hasta 512 y entonces ocurre eso ahora sí y ahora contexto punto file style es igual a rgb 25 52 55 255 o sea lo pintó de blanco o seleccionó el color blanco pinto un rectángulo porque si no es que tenía el contexto vacío y cuando digo vacío es vacío entonces no tenía mucho sobre lo que trabaja pesada guardo recargo y veo que en este caso lo que está haciendo bueno me está poniendo cian vamos a ver me lo está poniendo social que es lo contrario de lo que esperaba y ya sabes que voy a hacerlo con blanco y negro brillante y 1 y 2 y esto es y 1 y 2 el y más 3 no lo toco porque es el canal de transparencia y no me interesa tocarla ahora mismo vale y ahora lo que tengo allí pues es una un patrón voy a asegurarme que esto esté al cien por cien es un patrón de píxeles digamos aleatorios para cada pixel está decidiendo si pues eso si el pixel pues está vivo o está muerto ahora mismo con un más random de 0.5 digamos que tenemos mitad de probabilidades de que el pixel esté vivo mitad de probabilidades de que el pixel esté muerto podemos variar para decirle por ejemplo 0.1 y entonces lo que va a hacer es que habrá 9 veces más probabilidades de que el pixel esté muerto que vivo vale entonces ahí podemos cambiar lo puedo decir 0.03 puedo variar la probabilidad para pues para lo que me interese realmente vale para indicar si los píxeles estarán vivos estaban muertos o lo que sea ahora a continuación tocaremos este parámetro voy a dejar los 0 1 o 0 2 para que haya suficiente densidad como para que el juego empiece y ya está porque sé que 0,2 es una buena densidad pues porque he hecho este juego mil veces antes con lo cual pues quieras que ambos me acuerdo de unos cuantos parámetros de memoria así que ya tenemos la base y ahora lo que queremos evidentemente es poner el juego en funcionamiento queremos entrar en un bucle y queremos empezar a calcular el juego de la vida pero con los parámetros que hemos visto aquí en la página de la wikipedia a ver que los recupere no me he pasado pero no conozco los parámetros con él aquí está con el algoritmo que hemos visto que hay en la wikipedia en la página en inglés del juego de la vida de hecho hay más información todavía vale pero bueno con esto ya tenemos por lo menos para empezar a trabajar muy bien pues continuamos entonces ahora voy a entrar dentro de lo que conocemos como el bucle así que digo function bueno primero va a temporizador es igual al set time out pues realmente nada momento y entonces sin séptima out y quiero ejecutar bucle 100 milisegundos o un segundo porque no entonces ahora digo function bucle y en el bucle lo que hago es un killer time out esto no un clic time out del temporizador y a continuación sin re declarar el temporizador pero lo vuelva a arrancar digamos que estoy haciendo un bucle cada segundo y entonces ahora lo que puedo hacer es decirle al sistema que pues quiero empezar a trabajar con cada uno de estos píxeles vamos a por ello vengo por aquí y hago lo siguiente primero cojo la información que tengo voy a hacer un programa extremadamente el momento ineficiente que va a funcionar pero va a ser muy ineficiente ya continuación de ahí iremos tirando para hacerlo más eficiente y para analizar digamos pues qué cuellos de botella podemos quitar qué podemos distribuir cómo podemos hacer que no sea secuencial sino que sea paralelo y todo esto ahora mismo me interesa que funcione y más adelante me interesará que funcione mejor así que primero cojo lo que tengo entonces vengo por aquí y digo datos canvas es igual a esto de aquí podéis preguntar bueno porque lo vuelves a si ya lo tenía escogido pues ahora lo haremos de esto realmente lo cojo para asegurarme digamos para luego veremos si hace falta asegurarme o no en esa hora vuelvo a realizar esto vuelvo a realizar el bucle en el cual pues calculo todo lo que tengo bien y voy a hacer lo siguiente dar anchura es igual a 512 la altura es igual a 512 y entonces digo lo siguiente vamos a ver y entonces digo datos canvas punto data punto leen ahora para cada uno de los píxeles quiero lo que haya pues como te diría yo alrededor es decir tanto la célula muerta como en la célula viva lo que hacemos en cada célula es analizar qué es lo que tiene alrededor entonces para cada una de las células muy un más igual a 4 quiero ver las 8 células que tiene a su alrededor entonces digo bar número vivas por ejemplo es igual a cero y entonces dijo y ahora tenemos que ver qué pasa y datos canvas punto data y ahora menos anchura por cuatro menos cuatro es decir el componente rojo es igual a cero eso quiere decir que número vivas más solo quiere decir que la célula de arriba a la izquierda está viva ahora vamos a continuar datos que a más de data y menos anchura por 4 - nada es decir el píxel de justo arriba es este de aquí spri mirando solo el componente rojo no hace falta minar el componente verde ni el componente azul esto es lo mismo más esta es la célula de arriba a la derecha esto es y -4 es la célula vecina de la izquierda yo mismo a mí mismo no me voy a ver con lo cual es más 4 me voy directamente a la célula de la derecha y ahora voy a copiar estas 3 para decir la célula de abajo a la izquierda la célula debajo y la célula de abajo a la derecha entonces una vez que tengo esto número vivas me dice cuántas células vivas hay así que a continuación lo que voy a hacer vamos a verlo es decir si eres cuando implementamos el algoritmo que tenemos aquí en la wikipedia dice si una célula muerta con exactamente tres células vecinas vivas datos canvas punto data del es igual a 255 o sea la célula está viva perdón a la célula está muerta quiero decir anda número vivas es igual a 3 dice exactamente 3 células vivas en ese caso digo datos canvas punto data de ahí es igual a 0 la célula vive la célula de repente vive y 12 la el componente verde el componente ok ahora ha implementado esta condición del algoritmo ahora una célula viva una célula vino una célula viva es cero con dos o tres células vivas vamos al numero vivas andar pongo una condición es igual a 3 número vivas es igual a 2 puede ser una cosa puede ser un infamia lo que yo creo que en este caso me conviene número vivas es esto en este caso pasa algo en caso contrario pasa otra cosa entonces datos canvas vamos a ver en el acuerdo de memoria si es igual a 2 o es igual a 3 sigue viva es decir 0 en caso contrario muere o sea blanco ok y yo creo que haciendo esto ya lo tenemos vamos a ver momento vamos a ver momento vale vamos a verlo a veces cuando hago esto se me engancha un poco pero no pasa nada ahora por último lo que voy a hacer es esto es contexto putty maystadt voy a poner lo que modificado son los números que modificado los convierto en una imagen vamos a comprobarlo así que recargo y teóricamente a ver quizás tengo algún error por eso no nos pone en marcha no tengo ningún error vale vamos a ver con solo punto bucle cuando recargo esta acción o bucle vale está funcionando ok con esto vamos a verlo datos cambios a usar contexto última y estatal no se está produciendo ningún cambio voy a por el buque mucho más rápido al lado ahí porque ahora esto quería confirmar que estoy en el bucle ya he confirmado que estoy en el bucle y ahora simplemente los píxeles no se están moviendo así que voy a ver qué es lo que ocurre estos cambios punto data muy bien fantástico y lo que ha ocurrido es que estos eve data de iu tienen que ir dentro del bucle form entonces tienen que ir aquí dentro por eso es importante sangrar correctamente para ver este bucle for esto va aquí y ahora vamos a recargar y eso ya es otra cosa ya tenemos como podemos ver una especie de juego de la vida de momento se comporta un poco raro no pasa nada vamos a verlo de 0.1 y vemos que iba creciendo un poco raro no se comporta como debería comportarse el juego de la vida es normal ahora veremos el error que he cometido pero de momento ya tenemos algo en pantalla vale ya tenemos una especie de auto juego que va creciendo aunque crece de una forma un poco extraña pero por lo menos ya tenemos un inicio de lo que quiero mostrar voy a ponerle un poco más grande y así pues un poco veremos el patrón un poco mejor y de momento tengo esto pues vamos a ver a continuación qué es lo que ha pasado vale por qué ha ocurrido esto y qué es lo que quiero hacer entonces vamos a ver el siguiente vídeo pues lo que ha ocurrido es que no debo estar tocando el mismo contexto vale eso es lo que voy a hacer es lo siguiente datos canvas y ahora voy a crear una variable llamada datos canvas temporal y entonces da igual que coja uno que otro porque realmente es lo mismo pero voy a comprobar el datos canvas temporal pero cuando compruebo voy a hacer esto un poco más pequeño es un poco más pequeño cuando editó el datos cambio temporal al final y aquí está lo que quiero modificar es el datos canvas es decir tengo el problema si a la vez estoy leyendo y a la vez estoy modificando el datos canvas pues lo que hago es guardarme el datos canvas en un temporal y modificar el datos que ambas real y esto lo que va a hacer ahora cuando recargue es que ahora si esta pequeña tontería que acabo de hacer hace que como podemos comprobar el juego se comporte como el juego de la vida ya sé que lo que acabo de hacer es difícil de entender es decir cómo es posible que antes no funcionaba o funcionaba mal y con esto funciona pues simplemente la razón si nos paramos a pensarlo matemáticamente tiene todo el sentido pero a mí las primeras veces que me pasó me costó entender el porqué pero lo que ha ocurrido simplemente es que si estoy leyendo y a la vez estoy escribiendo el datos canvas es un lío porque a la vez que lo estoy leyendo lo estoy modificando y puesto se raya como se hallaba antes entonces lo que hago es un datos que maten para solo leer y un datos canvas para solo escribir separando de la escritura como vemos este ejercicio funciona correctamente bien pues aquí lo tenemos ya que tenemos ya un primer juego de la vida en funcionamiento como os he comentado antes pues poniendo la densidad a 0 1 0 2 pues sale bien vale vamos a ponerlo he puesto antes a 0,19 0 2 y vamos probando hay que justo el punto entonces ahí veo que con un 0,2 pues también sale bien pues hay veces que si bajo más los bichitos desaparecen y si pongo más natural valientes 0,10 pruébalo evidentemente es la idea es lo que quiero pero la idea es esta vale aquí tengo pues un juego de la vida que con el cual puedo empezar a disfrutar pero ahora tengo un problema y el problema que tengo por tanto es que pues este juego de la vida no es muy eficiente voy a bajar el time out a cero recargo y por tanto este juego va todo lo rápido que puede ir cuando digo todo lo rápido que puede ir lo que quiero decir es que si yo ahora saco el monitor voy a poder comprobar pues que bueno en este caso vamos a ver cómo mentir aparte de que tengo aquí el google chrome pero lo tengo también lo veis grabando evidentemente ya no estoy utilizando los cuatro núcleos del procesador o no estoy utilizando digamos todos los recursos que tenga mi ordenador por qué pues porque este proceso digamos es lento vale este proceso lo que está haciendo es revisar uno a uno los píxeles y pues eso tarda lo suyo evidentemente y ahora incluso de hecho lo que puede hacer es decirle al sistema que ya no quiero 512 por 512 si no quiero lo siguiente vamos a hacer una versión 2 vamos a hacer el juego de la vida en grande y hacer el juego debían grande veremos cómo pues va sensiblemente más lento hacerlo más grande veremos como pues ya una cosa es calcular 512 por 512 y otra cosa es calcular pues por ejemplo 1920 x 1080 o sea full hd vamos a decir lo siguiente vamos a decir que anchura es igual a windows punto giner dinner with y altura es igual a window punto in hyde vale ahora le digo lo siguiente documento get elemento baile y del lienzo punto wifi es igual a anchura y lo mismo para el height esa altura así que guardo y recargo y ahora un momento ahora vamos a eso vamos a ver vale ponen 512 por 500 ahora arreglar eso no os preocupéis que eso es lo de menos ahora mismo vale entonces yo lo que quiero ahora en fin javascript object with entonces no sé si no está el punto with no es atributo es atributos no quiero el estilo wyss no está el wef es ese punto with se va esto así que si no lo hago grande ahora sí entonces bueno ahora me está fallando ahora sí que no sé por qué mentir vamos a ver html como bobby le dijo le digo palin 0 píxeles martín 0 píxeles y overflow y ahora vamos a ver ahí se me está yendo y no sé por qué no sé por qué aquí está el problema esto es anchura coma altura y esta es anchura como altura y esto es anchura coma altura y yo creo que ya está vamos a probarlo ahora vale no pasa nada por todo el caos es que hay ahí entonces vamos a decirle al sistema aquí está anchura coma altura y ya está así que vamos a probarlo ahora vale ahora ya tenemos un juego de la vida a pantalla completa en el sentido de que incluso si ahora vengo por aquí y debido a que quiero recargar pues tengo un juego de la vida literalmente en pantalla completa de hecho puedo venir por aquí y decirle que lo quiero sin zoom recargo y al recargar yo creo que se puede apreciar dentro de ese maremágnum que tenemos ahora mismo en la pantalla pero se puede apreciar que va más lento se puede apreciar que fácilmente estoy llegando a uno de los límites del sistema vale socialmente se puede apreciar que sólo con que lo ponga a 1.920 por 1.080 pues este juego ya va lento con respecto a cuando lo tenía antes en la otra pantalla en vez la idea es a partir de aquí la idea es a partir de este momento pues analizar qué es lo que puedo hacer para que el juego vaya más rápido vale para que en este juego que estamos viendo pues como te diría yo en un momento dado pues se calcula más rápido de lo que está calculando para ello vamos a aplicar diferentes técnicas de optimización vamos a trabajar con workers vamos a trabajar con diferentes tipos de recursos pero en definitiva para hacer que este mismo ejercicio que tenemos en la pantalla pues consigamos que vaya más rápido voy a hacer la pantalla más pequeña me voy a ir a 200 voy a recargar y así lo veremos más rápido pero también sobre todo lo importante es que lo vemos más grande de hecho incluso le podría mandar más todavía una cosa que puede hacer vemos que si le pongo a 500 vemos que aparece un poco como con anti alias 'la entonces lo que puedo hacer es intentar decirle al sistema mediante css que me quite el anti alias entonces efe ese ritmo band y al jazz vamos a ver el front es muy fino remove y nights antialiasing y vamos a ver no vale vamos a ver esto así que canvas vamos a poner el estilo y si todo ha ido bien este código es para mozilla para ópera para chrome para microsoft así que vengo aquí recargo en principio no lo está haciendo vale ahora sí esto es lo que quiero voy a bajar ahora un poco la velocidad y aquí ya hemos visto que tenemos un problema ya no hace falta ilustrar el problema y así pues un poco el código funciona un poco más lento y ahora artificialmente pero por lo menos podemos ver lo que ocurre en la pantalla y vemos que esto que tenemos aquí es el juego de la vida y ahora como digo a continuación lo que vamos a hacer los siguientes bloques es optimizar su funcionamiento y al optimizar su funcionamiento pues vamos a como diría yo vamos a mejorar su velocidad y vamos a mejorar su rendimiento bueno pues a continuación lo que voy a hacer es separar esto en workers voy a hacer las cosas voy a hacer esto más grande hoy reiniciar bien a continuación lo que voy a hacer es guardar la versión 2 así que index.html y vamos a empezar a trabajar con worker este hecho como digo pues bueno voy a eliminar prácticamente todo y ahora luego recuperar el contenido y vengo por aquí y voy a ir a la versión 2 index 2.7 ml vale y tengo de momento esto y ahora lo que voy a hacer es que voy a crear una serie de workers digo vamos a ver al número workers es igual a hardware punto number of cores de hardware esto es lo que quiero esto bien y ahora digo que por mar y es igual a cero y es menor que número workers y más vaso y entonces ahora lo que voy a hacer es que bar trabajador es igual a neguá right y le digo que trabajador de iu es igual a new worker y le voy a decir que es trabajador punto js y voy a crear evidentemente el archivo de trabajador punto j s para qué trabajador punto j s de momento va a decir con sólo el punto de hola así que si todo va bien refrescamos por aquí recargamos por aquí y en principio vamos a verlo con solé puntos hola vamos a ver trabajador de new worker bueno ahora iré a ver con soler punto el ojo arrancó un trabajador vale ya está el problema recargo está trabajando en index 2 con sol rojo número workers a saber cuántos núcleos tenemos candy fight ballet y entonces sí entonces vamos a ver window punto navigator punto hardware concurren este es el tema vengo por aquí y dice hola hola porque básicamente lo que ocurre es que desde el worker desde el trabajador pues estoy diciendo hola muy bien ahora por tanto ahora ya puedo quitar este consuele punto rojo ya puedo gritar este con solo un funcionamiento para lo que voy a hacer es que a cada trabajador le voy a enviar unos datos concretos le voy a enviar pues bueno vamos a verlo me enviaron un cacho de la imagen y en ese caso de la imagen habrá unos píxeles y lo que quiero es que calculen digamos los píxeles voy a enviarle por tanto trabajador punto j s vamos a ver new worker está enviando un mensaje y el trabajador con meses efe es igual a al mes si esto es igual a vamos a verlo la función y consuele punto al ojo y vale muy bien mujer momento aprox procesos tarea 5 por ejemplo con 6 function datos por ejemplo o con esa función bueno vamos a ver que le puedo pasar en el momento que repase este código de aquí esto es lo que es esto por aquí y entonces ahora le digo trabajador pues me eche dos meses que le pasó pues le quiero pasar un bloque entonces os x es igual a x es igual a más round como adjunto random x anchura y ahora la idea es lo mismo pero por la altura y lo que le voy a pasar en este caso es van datos es igual a con texto de emails data de x y 33 es decir un bloque de 3 x 3 píxeles porque 3 x 3 píxeles porque quiero el pixel del centro y los 8 de alrededor para ver que hay alrededor en donde expuesto message datos esto voy a pararle un momento y entonces ahora el trabajador digo función datos con solo datos así que vamos a probarlo recargó vale y ahí tenemos el evento y el evento tiene un data que es un email se trata y en el data ahí lo tenemos les voy a decir datos punto data punto dato y ahí tenemos por tanto todos los bytes tenemos todos los guerreros que sea 255 todos a no ser que pillado uno vacío vale ahí tenemos más muy bien pues ahora lo que queremos es decirle vamos a ver ahora lo que queremos es decirle al sistema mire a ver que hay alrededor vamos a por ello entonces ahora lo que quiero es digamos poder decirle al sistema qué es lo que tiene que hacer vamos a ver ahora digo bueno célula del medio recuperar aquí una célula muerta entonces centro es igual a datos punto data de qué 333 vamos realmente es 4 perdón 444 más cuatro más yo creo que ya las 4 y 44 ahora si esa es la célula del centro entonces digo sí centro es igual a cero o sea si la célula está viva vamos a muerta si la célula está muerta entonces se la vengo y digo vamos a ver empecé no hace vale el gob ar células vivas es igual a cero y entonces digo si datos punto data pero es igual pero es viva es igual a células vivas más ahora bien es lo mismo + 4 04 más y ahora 04 44 pero no más 4 porque es el centro más 4 es la de la derecha y ahora 0 más cuatro veces abajo a la izquierda + 4 es justo abajo + 4 es abajo a la derecha y entonces ahora digo sí células vidas es igual a 3 en ese caso return viva retorno que retorno viva el respaldo vale ahora amigos y el centro es igual a cero si la célula estaba viva re hago esto mismo otra vez realmente aquí a veces lo siguiente si el centro es igual a 255 y a si el centro está vivo en este caso diego si células vivas es igual a 3 pero las vivas es igual a 2 en ese caso pasa una cosa si no pasa otra cosa entonces esto es return o pero vamos a ver return to restore falls voy a hacer una cosa al trabajador y estos meses dos meses falls así que vamos a verlo si todo ello bien esto ya no hace falta ya lo tengo claro me voy aquí y ahora cuando el trabajador me envía un mensaje voy a decir con solé punto los datos data momento quiero ver qué es exactamente lo que me devuelve vamos a ver lo recargo y me dice de un falls y 2 true cerrar o hay alguna que no me devuelve nada y no sé supongo que es porque no está viva no lo sé monstruo no me devuelve nada vale muy folk un truco hay alguna hay algunos casos donde no está devolviendo nada qué bueno vale tampoco me preocupa demasiado pero simplemente supongo que será por la lógica que he puesto tenía que revisar la lógica pero datos y datos hasta 0 y se ve que no se confirma ninguno de los dos casos que es este de aquí vale ok no pasa nada bien entonces ahora lo que voy a hacer es el siguiente vídeo es decirle al sistema que es lo que quiero hacer con esta información pues ahora lo que voy a hacer es como digo pintar quiero pintar algo en este caso vamos a pintar me voy a index 2 y ya no quiero con sólo los de data digamos sino que lo que quiere es decir lo siguiente pero sí datos punto dato realmente datos que son los datos realmente datos es igual a true en ese caso lo que quiero es decirle el contexto punto recto pero hay que ver ahora qué le pasó porque ahora tiene que devolver la xl y bien pues datos como x y aquí en el trabajador datos como el cheese coma y no sé si me va a dejar enviar tres parámetros pero bueno true x coma y es como y true x como agregar creo que no me va a dejar pero vamos a ver vamos a verlo ok a ver la resolución a ver la resolución básicamente lo que nos dice es que solo le deja pasar datos no tres datos no pasa nada pues en este caso lo que voy a hacer es decirle al sistema que vamos a ver par datos vale pues a la jota son es igual datos como x y ya está le pasó la jota son y a correr entonces trabajador me devuelve unos datos e datos es igual a j son punto datos creo que esta vamos a verlo espérate datos 2 puntos datos coma 2 puntos x coma y dos puntos y ahora sí vengo por aquí jota son punto datos vale y ahora en el post message vale --equipos presente dos meses en ocasión de vuelta es igual bar viva es igual a true vivas igual a falls y entonces en jotas son de vuelta en jota son de vuelta digo datos es vino x es j son x y es jso en punto y post message j son de vuelta así que en el index quiero que me devuelvas un mes y le quiero que me devuelvas con sol y punto el ojo datos así que vamos a ver vale reading data mining data en trabajador js 3 ok es j son datos pues vamos a ver con sole punto los datos antes vale con sol de punto json ahora sí y data punto dato punto datos vamos a verlo ahora aunque ahora j son datos no puedo leer el 0 vale en el trabajador se trata uno eliminamos uno yo creo que ya va ahí tenemos eso muy bien datos and design examen fine y andy find muy bien vamos a hablarlo interesante en la línea 54 el 54 es cuando vuelven vale entonces según esto los datos no están volviendo correctamente y eso me extraña pero vamos a ver así es esta jota son punto data punto x j son puntos data punto y me extraña que sean difamatorios todo el rato and i find and design andy faith vamos a en index son datos punto data y así lo vemos mejor atributo and i find false esto ya es otra cosa y está cogiendo ya unas cuantas células muy bien y ahora si lo que voy a hacer es decirle qué datos punto data punto que punto datos es igual a falls en ese caso va a pasar una cosa y si datos punto data puntos va a pasar otra no quiero el caso else porque tengo la cndh y find para entonces no quiero que coja un dato que realmente es erróneo así que ahora sí voy a decir contexto punto feel recto en datos punto dato punto x datos data punto y realmente es más uno porque es el pixel del medio como 11 contexto punto style es igual a que si está muerto es igual y ahora esto es blanco si todo esto ha ido bien esto lo que quiere decir es que si la célula devuelve que está muerta pues en ese caso la va a pintar de blanco si la celebra devuelve que es está viva en este caso de negro así que yo vengo por aquí recargo y en principio lo que debe haber ocurrido es que cuatro células al azar se han convertido en negras o blancas pero claro vete a saber cuál es ese es el problema así que es imposible prácticamente detectar entonces ahora lo que voy a hacer es decirle al sistema que una vez que tenga un meses pues quiero volver a pasarle esto así que vengo por aquí no le vuelva a pasar por supuesto otra vez el new worker ya tengo un y walker y ahora vengo por aquí copio y pego ok cojo desde aquí hasta aquí ahora sí ahora si hago así y vamos a verlo bien cuando read property fund i find my por qué trabajador de los meses los android j son la noche de charlar bar datos no lo quiero re declarar de hecho me he hecho bien y ahora tengo que ver qué es lo que ocurre aquí porque vamos a verlo me dice que se resiste a enviar un nuevo trabajador podría usar un disc pero en principio no debería hacer falta property 2 and the fighter pero no confío en él dice en este caso vale pues parece que si bien entonces lo que está ocurriendo es que tengo ahí un juego de la vida pero aparte de que hará quito los controles porque lo están haciendo es básicamente hacer perder el tiempo antes eran útiles evidentemente ahora ya no pero lo que estoy haciendo es tener un juego de la vida de cuatro núcleos y además digamos que de forma estocástica lo que va haciendo es ir cogiendo información voy a quitar el conjunto luego porque ya no lo quiero cuando recargo y ahora vemos que vamos rápido y sobre todo además de ir más rápido lo que estaba ocurriendo es que como te diría yo es que pues esta es modo multinúcleo vamos a hacer así vamos a ver cómo será vaya más rápido de hecho recordemos que en hardware concurren si no tengo buena parte de que me está haciendo algún no está funcionando del todo correcto veo que está generando creo algún patrón que no toca para el juego de la vida pero no pasa nada aunque no me dé el resultado correcto de momento con que sea multinúcleo ya me empieza a valer y luego evidentemente pues lo tocaremos para ver qué es lo que no está funcionando correctamente de momento lo que voy a hacer es número worker es el hardware concurres y lo voy a multiplicar por 10 a ver qué pasa algo así y con esto pues vemos cómo está funcionando insisto en modo multi núcleo y si ahora vengo por aquí pues veremos como ahora aprovechará mucho mejor podría aumentarle más supongo pero aprovechará mucho mejor el rendimiento del sistema ahora aumentaremos el número de núcleos para aunque tengo que ver si hay cuellos de botella evidentemente vamos a ver por qué hardware con gruesos por 10% no quiero reventar lo pero desde luego lo que sí quiero es por ejemplo estoy reventado pero lo que sí que quiero es llegar un momento en el cual realmente el procesador lópez de núcleos vamos a dejarlo un rato calculando y al dejarlo un rato calculando 1 - workers número workers vale insisto en que no me está haciendo en los típicos dibujitos del juego de la vida y luego debe haber algo que no estoy haciendo correctamente el algoritmo de cálculo probablemente el centro del worker pero bueno de momento con ver que hace un poco un auto juego pues ya me vale ahora lo que quiero también es optimizar un poquito y al optimizar un poquito lo que quiero es pues decirle al sistema vamos a ver decirle el sistema que no pierda el tiempo enviando información que no es necesaria entonces yo tengo por aquí he cogido el datos con texto emails data de tres y entonces a continuación lo que puedo hacer es decirle bueno primero mira si en ese punto hay algo y si en ese punto hay algo pues en ese caso envía la información es decir lo que quiero es revisar esto y decirle al sistema bien si no hay nada no hace falta que envíes la información pero si hay algo en este caso envía lo que es lo que puedo hacer con eso pues lo que puedo hacer con eso es decirle al sistema voy a poner un wild wilde mientras que se ve una condición vamos a ver esa condición que la quiero escribir vamos a ver quiero decirle lo que quiero decirle es que recursiva mente sí si esto de aquí está blanco lo vuelva a calcular cual trump entro dentro de un bucle infinito hago eso y entonces digo datos punto dato no puedo sumar y es igual a 0 y es menor que datos puntos de alta punto link por cierto que el procesador menciona es lento voy a bajarlo a parte del ventilador vale he bajado la carga del sistema vamos a verlo he bajado la carga del sistema tengo algún error ahora evidentemente está clarísimo más porque estaba a mitad del wild y más y entonces digo su más igual a cero esto es más igual a 4 zuma más igual datos punto data belli y entonces digo sí es igual a cero y es igual a 0 si datos no se suman es menor no puedo aclarar que 255 por 9 menos 255 es decir si hay un píxel negro en todo esto en ese caso vamos a verlo break javascript wyle loop y media break el break si todo esto exitoso esto ha ido bien lo que hace es que empieza a lupe ar y solo cuando la suma de un punto negro solo cuando haya un punto negro en la suma en ese caso sale del bucle y empieza a calcular y si por lo que sea ha pillado un punto blanco es decir que todo está blanco pues es como me hagas esto no vale la pena o sea no entres aquí dentro porque no vas a encontrar nada así que guardo recargo vale vamos a ver es de 4 muy bien y j son cuántos son no dice que no puedo encontrar el trabajador de vale reading post me sets no puedo leer las propiedades de and y find datos vale datos es igual a nada ok vamos a por ello no todavía no vamos a gotear un momento esto para asegurarnos en la línea de cuatro reading 16 trabajador en la línea de cuatro entonces quito el vuestro no puedo leer los properties del post message y vamos a ver por qué para ti vamos a poner variables por aquí toque en 46 pero esto es un array evidentemente vale pues voy a ver cuál es la cuál es el problema un plato controle el ojo json a ver que tengo en este momento datos y mexsat a 119 40 y me satan principio para ese correcto pero no puedo leer las propiedades de andy fine muy bien entonces con solé punto log trabajador de ahí ya tengo el problema vale ya sé cuál es el problema y es que si aquí utilizado y aquí no puedo utilizar y entonces jota data de j yo creo que con esto ya está solucionado el problema ahí lo tenemos y al principio el código debe funcionar más rápido todavía en el sentido de que en principio estoy ignorando las células blancas es cuestión de dejarlo funcionando un rato y bueno y de bercy si el cálculo es correcto en el sentido de si está haciendo el algoritmo correcto del juego de la vida o no lo está haciendo que insisto que para mí ahora mismo es lo de menos a nivel purista no es lo de menos porque debe funcionar correctamente pero es lo de menos en el sentido de que lo que me importa de momento es hacer un programa multi núcleo y comprobar cómo estamos operando sobre un recurso con una imagen y lo estamos haciendo correctamente voy a ir voy a reflector izar un poquito voy a ir de aquí al trabajador y voy a decir aquí 4 no sé pero esto es 20 los 16 esto es 24 esto es 28 y esto es 32 1 2 3 4 5 espérate a igual aquí tenía el error 28 y 32 yo creo que ahí está el error ok todo lo demás ok esto es 16 porque es el centro y ya está así es que recargo y si todo va bien ahora pues ahora mejor el cálculo del juego de la vida esto que ahora mismo estaba un poco raro digamos pues ahora yo creo que debe funcionar mejor de hecho incluso si lo hago más pequeño de cálculo y ahora pues veremos que de ver mejor lo interesante en este caso es que estoy pasando la mínima información posible a los workers y también es importante el ver que no estoy dentro de un temporizador sino cada worker se va cargando y se va descargando conforme es necesario es curioso ver como en lugar de calcularse toda la vez pues se va calculando a trozos pequeños otra cosa que podríamos analizar es que si es justo que el criterio sea random que hay un poco el hecho de que lo estoy haciendo de forma estocástico entonces la forma de hacerlo para hacerlo estocástica mente o mediante una metralleta de metrópolis que se llama es un poco como una especie de metralleta vale la idea es tirarlo aleatoriamente con la esperanza de que al repetir muchos ciclos pues cada pixel le toque la misma probabilidad esta es esperanza luego pues habría que ver entonces yo creo que lo que está ocurriendo aquí también porque veo que la pantalla se está poniendo muy negra es que me debe faltar algún caso me debe faltar algún caso en el que le diga al sistema que si la partícula no está definida entonces no me la pinte aunque ya no debería darse ese caso estoy pensando vamos a poner aquí un con sol punto 1 datos punto data de gandhi fine extendí fanning siendo me cuadra la verdad pero es lo que puedo hacer en este caso es lo siguiente si datos punto data punto datos es igual a fons datos punto data a punto lo que sea o bien le puedo decir o bien le puedo decir que en cualquier otro caso ahora sí contexto file está el white o sea anv y fine lo tomamos como hacer una muerta por ejemplo así que probamos de nuevo y bueno la idea es comprobar si vamos a verlo si el cálculo es correcto yo creo que supongo que debo haber hecho como una especie de otro juego de la vida pero bueno vamos a dejarlo calcular un rato y vamos a ver qué es lo que nos devuelve lo importante en este caso lo importante en este caso es que no lo estamos haciendo multinúcleo que es lo que realmente queremos es digamos nuestra principal urgencia de cara a desarrollar este programa informático voy a hacerlo un poco más grande para verlo un poquito mejor insiste vamos a dejarlo calculando un rato y a ver cómo se comporta está haciendo un dibujo extraño entonces ahora mismo no estoy viendo el motivo no sé si es por el while o porque así que voy a esconder un momento el while recargamos de hecho con fuerza porque estaba haciendo una especie de caminitos digamos y no sé si es porque me he equivocado en el wild o porque me he equivocado en el trabajador en el worker entonces estoy viendo a ver qué hace si nos fijamos yo creo que sí que está volviendo a hacer estos caminito se está haciendo con un laberinto que no es lo que se supone que hace él el juego de la vida vemos cómo está construyendo esta especie de laberintos que está muy guay también visualmente pero no es lo que hace el juego de la vida entonces dentro de que luego por supuesto evidentemente podemos experimentar podemos jugar pero yo de momento lo que quiero es ver del momento lo que quiero es que el sistema pues se comporte como está previsto digamos entonces si data es igual a true en ese caso black estoy intentando averiguar te estoy buscando a ver dónde está el problema pero las vivas más paz es decir está buscando cuántas células vivas tiene alrededor y si el centro está a 255 en este caso els viva es igual al folk creo que me estoy dejando ese caso vamos a verlo y como digo en definitiva lo que quiero es tener un juego con workers pero al final lo que quiero es no modificar el algoritmo es decir que el resultado sea el mismo con workers que sean workers veo que estaba volviendo a hacer los caminitos así que bueno esto ya es una cuestión de pues localizar dónde está aquí el fallo del algoritmo ahora mismo está funcionando el modo multitarea digamos lo único es que tengo que averiguar exactamente dónde está el problema con el algoritmo de cálculo para que me haga el juego de la vida original y no me haga el juego de la vida digamos versión ve que es el que me está haciendo