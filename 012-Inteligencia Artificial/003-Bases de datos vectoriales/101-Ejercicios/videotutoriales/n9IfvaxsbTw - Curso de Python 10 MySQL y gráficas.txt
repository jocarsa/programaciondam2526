dicho esto a continuación como te decía yo no quiero hacer gráficas a partir de conjuntos inventados de datos sino que lo que quiero es realizar gráficas a partir de conjuntos definidos y conocidos de datos para ello yo te voy a hacer una pregunta muy genérica y es cuál es el problema principal que existe en los primeros pasos de un proyecto de Big Data y tú dirás pregunta más genérica Pues hay muchos problemas que resolver Pero hay uno muy común Cuál sí verás vamos a ver eh Dime algo acerca de las V del big Data u algo de las uses del big Data las 5 vs del big Data lo has oído alguna vez no vale No pasa nada Mira las c Us del big Data son una chorrada que lo sepas y de hecho alguna vez cuando he comentado esto de las 5 V del big datata algún alumno que ya está trabajando en el tema me dice hombre realmente no son C si quieres son muchas más y dices vale es cierto pueden ser muchas más pero la idea es eh poder resumir un concepto complejo en una serie de claves sencillas entonces las 5 vs del big Data y no esto es un anuncio las c v del big Data y verás un momento vamos a ver vale tenemos la variedad esa es uno de los problemas tenemos la veracidad tenemos el valor de la información un momentín tenemos el volumen de los datos Y tenemos la velocidad de acceso e insisto vale Es simplemente para cuando empezamos un proyecto de Big Data para saber por dónde podemos empezar evidentemente el volumen es de lo que deriva la palabra Big de Big Data Vale cuando neos un proyecto de Big datas porque tenemos una cantidad de datos demasiado grande para que un ser humano la pueda procesar de una forma eficiente también Hablamos de un problema de velocidad Cuando hacemos un proyecto de Big Data lo primero que tenemos que hacer es analizar cuánto tiempo va a tardar o bien un sistema humano o bien un sistema informático en procesar esa información Porque si yo quiero procesar una información en un sistema Por ejemplo programado en python y el sistema me dice fantástico voy a tardar 3 años en procesar esta información Pues tú igual me dices a ver 3 años no puede ser vale o sea hay datos que no te digo que no pero igual tú me dices Mira yo siempre suelo poner el mismo ejemplo Y es que tú Imagínate que tienes que programar un sistema para que calcule la trayectoria de un misil Siento ser tan velic vale Pero para que calcule la trayectoria de un misil e impacte justo donde te interesa en tu enemigo tú Imagínate que te pones a calcular trayectoria y el sistema te dice vale dentro de TR años habré calculado la trayectoria Pues tú igual dices hombre dentro de 3 años igual acabo la guerra con lo cual no me vale que me lo hagas en TR años quiero decir hay veces en las que la velocidad es un problema cuando la velocidad es un problema muchas veces una forma de resolver el problema es analizar el valor de la información es decir toda la información que hay dentro de ese sistema de bigdata vale realmente o hay Trozos de información que podemos obviar y por tanto podemos hacer que el sistema vaya más rápido vale luego por ejemplo yo esta mañana estaba teniendo una conversación en una empresa que además es un centro de formación donde trabajo durante el año por las mañanas que era con respecto a la veracidad de la información entonces estábamos hablando de una base de datos en este caso de alumnos y estábamos hablando de quién podía cambiar la información de esa base de datos Entonces yo estaba diciendo esa reunión Mira si el padre del alumno viene a principio de curso y da su correo electrónico y un alumno a mitad de curso un alumno que es floj por decirte una palabra suave viene y llega y te dice Oye que es que quiero cambiar el correo de mi padre tú qué dirías que está pasando ahí pues que es muy sencillo si el alumno es flojet y quiere cambiar el correo de su padre evidentemente lo que quiere hacer es evitar que el centro se ponga en contacto con su padre para decirle tu hijo está rindiendo mal es decir pones cara de no se me había ocurrido esa treta Vale entonces lo que hace el alumno es dar un correo falso para impedir que su padre reciba las notificaciones de a ver qué hacemos con tu hijo porque va mal Vale entonces ahí tenemos un problema de veracidad de la información te estoy hablando de un problema mediante el cual creo que tu imagen se ha quedado congelada no sé si tú me oyes a ver igual Me he quedado yo congelado Ah vale No es que tu imagen se ha quedado congelada Pero bueno mientras tú me veas y me oigas y tal entonces la velocidad se puede ver comprometida Porque alguien la pervierta la velocidad se puede ver comprometida porque haya personas que por accidente metan la información incorrectamente o sea que no siempre es por mala voluntad Pero hay veces que tenemos un problema y es que la información con la que trabajamos no es veraz no es correcta a ver como te decía uno de los grandes problemas del big Data es la variedad hablamos de variedad cuando en voy déjame que borre las demás hablamos de variedad cuando en un caso ideal cuando arrancas un proyecto de Big Data llegan y te dicen Mira todos los datos están en esta base de datos de tipo sql y tú dirías fantástico Sabes porque no tengo un problema de variedad de datos Porque ya todos los datos están estandarizados pero el problema es cuando hay veces que te dicen Mira tenemos cosas en sql tenemos cosas en Word tenemos cosas en Excel tenemos cosas atención un clásico en facturas en papel no digas hostias porque es que ya te digo que es lo más normal del mundo facturas en papel o documentos en papel En definitiva Este es un caso muy malo porque requiere hacer un ocr ya sabes que es cuando escaneas un documento y le pasas un software para reconocer los caracteres que hay dentro de ese documento Pero hay otros casos no tan desfavorables como documento en papel que es documento en PDF porque claro el PDF es un documento electrónico pero no es un documento estructurado Como por ejemplo un documento de Excel que tal convertir un documento de Excel a sql Pues bueno pues Vale Pues dentro de lo malo no es tan malo pero convertir un PDF a un archivo sql puede costar bastante más vale entonces luego por ejemplo hay emls Oye es que mira es que queremos que cojas 10 años de nuestra correspondencia con clientes en formato eml en el formato de intercambio del correo electrónico y que lo metas en una base de datos sql o que lo metas en un Excel quiero decir yo lo que estoy haciendo es asumir y a veces esa Asunción es incorrecta pero asumir que el formato nativo de un proyecto sería sql y todo lo demás se tiene que convertir a sql y no tiene por ser así igual en un momento dado en un proyecto se decide que el formato maestro es el formato Excel y todo lo demás se tiene que convertir a Excel y no pasa nada pero lo que sí que es un problema es que al principio del proyecto hay una variedad y lo que hay que hacer en primer lugar es todos los tipos de documentos y convertirlos a un solo tipo de documento cualquier proyecto de Big Data empieza con la resolución de esta dificultad y luego a partir de ahí nos vamos enfrentando a otros tipos de dificultad ojo en las otras vs valor velocidad eh volumen y la quinta era no me acuerdo as de memoria bueno ver veracidad Vale entonces Igual yo empiezo a analizar y por velocidad y por volumen Igual me interesa más Excel o igual me interesa más trabajar directamente todo en PDF vale Yo qué sé o igual me interesa una combinación de PDF Y sql quiero decirte que al final da igual cuál sea el formato Vale entonces por eso lo que te decía es que cualquier proyecto empieza con esta est ojo donde esta dificultad no es poca Por ejemplo si yo quiero convertir documentos PDF y los quiero transformar en filas y columnas de Excel o en filas y columnas de sql cómo lo voy a hacer pues lo voy a hacer con python Cuando digo que lo voy a hacer con python quiero decir que me vengo aquí y digo python PDF library y busco librerías en github o donde sea y Busco librerías de tratamiento de archivos PDF o si busco python Excel Bueno de hecho creo que tú ya tenías localizada una librería para trabajar con Excel Vale entonces Exacto lo que te quiero decir es que cuando te estoy diciendo problema Te estoy diciendo problema con solución donde evidentemente solución consiste tal y como tú mismo hiciste con lo de Excel en empezar a utilizar librerías para ser capaz de o en tiempo real o en modo batch de convertir formatos de uno a otro vale dicho esto a continuación lo que voy a hacer es trabajar con sql dentro de python vamos a trabajar hoy con my sql próximo día trabajaremos con post sql y verás que lo que hicimos anteriormente con respecto a esite Es realmente muy parecido Entonces yo aquí a continuación lo que voy a hacer es lo siguiente voy a decir mysql python connector python 3 yo que sé Entonces python mysql no install datacam no vamos a ver aquí y me voy a dar cuenta de que existen vamos a ver de que existen diferentes conectores vamos a ver vamos a este así que a continuación vamos a ver un momentín un segundin vamos a ver no este no quiero python mysql connector Ajá creo que sí quea ese vamos a ver un momento porque hay tres conectores y quiero el correcto vale esto es vale vamos a por este entonces a continuación voy a hacer copia de este comando voy a abrir un terminal voy a pegar pip en este caso ahora que ya lo tengo correctamente instalado y configurado voy a llamar a pip 3 para python 3 Así que hago así me descargo y configuro el conector realmente Cuando digo configuro es que lo Configura automáticamente el sistema Y a partir de ahí lo que puedo hacer es Conectarme a un gestor un Perdón un servidor de bases de datos que esté previamente instalado en el sistema yo en este caso lo que he hecho vamos a un poco aclarar este concepto porque trabajar con bases de datos como May sql po sql es un pelín más complejo pero también más potente como hablábamos el otro día que trabajar con ese colite déjame que cierre esto déjame que cierre el terminal Vale entonces yo ahora mismo de hecho si cierro python y lo abrir si cierro python y lo vuelvo a abrir y del 38 vale Yo ahora mismo tengo python que tiene la librería de mysql correctamente importada es más vamos a demostrarlo entonces escritorio curso de python Y esto es mysql 1 entonces lo que voy a hacer es import mysql.con así que guardo f5 y no me da error porque con la operación de instalación que acabo de hacer Ya tengo el conector ahora bien Yo vengo aquí vengo a mi base voy a llamarlo mi db o mi bd o sea db de database bd de base de datos vale lo que quieras entonces yo ahora vengo aquí y digo mysql connector sabes qué voy a decir as my y así sabes my punto Connect y digo Host es igual a local Host coma user es igual a José Vicente coma y password es igual a José Vicente también vale Y ahora digo print mi db o mi bd qué dirías que va a ocurrir a continuación qué dirías que va a ocurrir esto te digo ya no verás ese no es el problema realmente o sea evidentemente faltan más datos de la conexión Por supuesto que sí pero este código va a dar un error de conexión no un error de ejecución no un error de python pero si ejecuto este código lo que me va a decir es esto da un error y el error dice connection refused o sea no es un error de Aunque por aquí aparezca de argumentos y toda la pesca pero no es un error de sintaxis de Porque fíjate que de hecho vuelvo y no hay un curso rojo es un error de tú me has dicho que te ibas a conectar a una base de datos a un Host a un huésped que es local Host es una palabra reservada para decir yo mismo es decir donde aquí pondría la ip de un ordenador al que me conectaría local Host es decir el servidor de base de datos Está en este mismo ordenador pero ahora mismo ese servidor no está arrancado con lo cual lo que hace python es dar un error bastante ceo de color rojo Vale entonces dicho esto Permíteme hacer un pequeño inciso y hablarte un poco sobre una estructura de control de la cual no hemos hablado hasta el momento que es la estructura de control lo que en otros lenguajes de programa se llama try Catch que aquí en python se llama try except voy a hacer un nuevo archivo voy a guardarlo voy a llamarlo 62 try except y voy a decir lo siguiente try y ahora pongo print x y ahora Aquí voy a decir except dos puntos print ha ocurrido algún error si yo ahora ejecuto este código lo que ocurre es que ha ocurrido algún error Fíjate que ha ocurrido algún error pero el código es azul Porque si yo intento ejecutar este código el sistema evidentemente me dirá cómo quieres imprimir la x si la x no está definida date cuenta de la gran diferencia de tener una impresión de color rojo en la pantalla a tener una impresión de color azul en la pantalla y te aseguro que la diferencia no es estética cuál dirías que es la diferencia no Esa no es la diferencia de hecho Esa diferencia iría a favor de realmente cometer errores porque el error aunque también te digo que en el except se puede forzar para que me diga el tipo de except pero no la diferencia no es Esa la diferencia es que si hay un error da igual el código que hay a continuación porque un mensaje de color rojo suele parar la ejecución del programa mientras que si yo intento hacer algo capturo el error y lo saco por pantalla evidentemente hay un error pero no es un error de color rojo que para la ejecución sino que el programa puede continuar funcionando Vale entonces Esto es algo que no sé si has oído alguna vez te lo voy a poner en Google Simplemente porque cuando le digo a la gente este concepto me mira especialmente en las clases presenciales como si estuviera loco y oa como si me hubiera inventado yo el concepto y lo pongo en Google Para que veas que es un concepto que existe que es la programación defensiva no sé si alguna vez habías oído hablar de ese tipo de programación no pues no pasa nada porque mucha gente tampoco entonces un momento que voy a encenderme la luz de la lamparita Ay a ver vale vamos a ver te cuento eh No sé si conoces el libro de kigan y Richie de programación en C no sé si conoces este libro es este libro de aquí por la portada No pues es un libro escrito en 1978 escrito por Denis Rich que es el creador del lenguaje c Entonces es un libro de referencia para cualquier programador porque claro imagínate el valor que tiene que el creador del lenguaje c escriba un libro sobre Cómo programar el lenguaje agc es como que cualquier persona que programa c tiene que tener este libro porque es lo que dice el autor que por cierto está muerto que qué tienes que hacer Vale entonces este libro eh De vez en cuando es muy criticado porque tiene ejemplos de código que a día de hoy se consideran inseguros entonces claro Hay que tener en cuenta que este libro se escribió en 1978 cuando la informática era muy diferente de lo que es hoy es decir en 1978 no habían 1000 tipos diferentes de ordenadores no habían 1000 tipos diferentes de procesador y de tarjeta gráfica y 1000 tipos de ram y 1000 tipos de placa base y 1000 tipos de lo que sea o sea el 68 habían tres o cuatro ordenadores y para o sea tres o cuatro modelos de ordenadores quiero decir Y para de contar vale con lo cual tú podías hacer un código Y sabías que si se ejecutaba en uno se ejecutaba en todos claro a día de hoy evidentemente eso no es así la programación defensiva es una forma de diseño de programación es una forma de diseño de Software que básicamente lo que hace es H es mucho más que esto que te voy a decir vale Pero te lo digo porque si te ves el índice verás que hay diferentes técnicas de programación defensiva y este artículo de la Wikipedia no tiene todas las técnicas de programación defensiva pero para reducirlo mucho al absurdo te diré que una técnica de programación defensiva es meter try except o try Catch en otros lenguajes de programación por todas partes lo que básicamente quiere decir no asumir que todo funciona sino asumir que todo va a fallar y si funciona bien y si no haber preparado a tu programa para que sepa Cómo actuar en el caso de que funcione tanto es así que te voy a decir una cosa para que la compruebes cuando tengas un rato para que compruebes que es cierto que por ejemplo en Java no se puede hacer una conexión a una base de datos mysql si no es dentro de un bloque TR Catch O sea no se puede quiero decir está prohibido y cuando digo está prohibido quiero decir que lo intentas hacer y el compilador da error hasta que no lo metas en un trat no va a hacer la conexión con la base de datos Vale entonces para por ejemplo muy bien O sea que es eh pero por qué Pues porque la lectura y la escritura en archivos da muchas veces problema de que el archivo no existe problema de que existe pero no tienes permisos de escritura problema de que existe Pero hay otro archivo que lo está utilizando hay otro programa que lo está utilizando en este momento Entonces efectivamente todo aquello que tiene que ver con acceso a recursos por ejemplo nunca declararía una matriz en un tricat porque Generalmente dices Bueno es una matriz eso tiene que funcionar Sí o sí pero todo aquello que es conectarse a un servidor remoto a un servidor de base de datos escribir en un archivo todo eso suele ser candidato efectivamente a un try Catch o a un try except entonces dicho lo cual a continuación yo lo que voy a hacer es este ejercicio y decir Bueno voy a hacer una copia esto que te voy a decir no es obligatorio pero sí que te lo recomiendo que es sql2 que es que simplemente lo que voy a decir es try bueno sabes que realmente try lo lanzo todo y except print ha ocurrido un error conectándome a la base de datos guardo f5 y ya está Y fíjate que limpio vale Fíjate que en lugar del pedazo de error este que tenía aquí que casi me cago encima de ese error pues simplemente dice ya está ocurrido un error en la base de datos no preocupes solucionar el error y ya está Y como ya te digo poniendo parámetros en el except no lo haremos hoy pero lo haremos otro día se puede introducir digamos mensajes más Esto vale mensajes más personalizados que nos den un poquito más información acerca de qué es lo que está ocurriendo y digo que no me quiero e vale un momentín espera que tengo por aquí a Fernando Entonces como te decía Dani eh el error nos lo da porque mediante esta promesa yo lo que he hecho es esperar que en este ordenador haya una base de datos un servidor de bases de datos conectado Que responda a local Host que tenga un usuario José Vicente y que tenga un password José Vicente y Ah luego elegiremos una base de datos y lo que tú quieras pero de momento es Conectarme a un servidor con una serie de credenciales montar un servidor mysql lleva un rato entonces yo lo que suelo hacer es recomendar si estás en Windows o estás en Linux Bueno realmente no si estás en Windows es utilizar el shamp que encuentras aquí en apachefriends.org Más que nada porque el shamp es un entorno que lleva Bueno te lo digo que lleva Apache lleva María db lleva php y lleva Perla Entonces es un entorno como ahora verás que está ya preconstruido si estás en Linux recomiendo instalarlo mediante línea de comando porque con cinco líneas de comando te instalas un servidor de shamp o de lamp realmente Y si estás en Mac te recomiendo usar un software que tengo aquí que es el mamp es como el shamp pero para Mac Vale entonces me vengo aquí veo que hay un elefantito de color gris que es el mamp que es básicamente como el shamp Vale entonces hago doble clic al mamp cierro esto arranco los servidores Y fíjate que con un solo botón con un solo botón he arrancado esto como para ahora en Tools ir a php my admin y php my admin es el gestor de bases de datos Vale entonces vamos a ver como verás tengo ahí una serie de bases de datos ahora hablamos de ellas pero lo que quiero que veas es que actualmente yo ya tengo un servidor conectado y en funcionamiento sin embargo me va a seguir dando un error vamos a allá voy a ejecutar esto voy a pulsar f5 y me sigue diciendo ha ocurrido un error conectándome a la base de datos déjame quitar el TR except porque ahora sí me interesa ver dident ahora sí me interesa Ver información del error Vale f5 ahora verás por me interesa Ver información del error vale Y en este caso me dice lo siguiente me dice me he intentado conectar al puerto sql server en local Host dos puntos 3306 es decir cuando yo en mysql no solo en python sino en cualquier otro lenguaje de programación no especifico un puerto cualquier conector de base de datos ASUME que el puerto de mysql es 3306 porque es el puerto por defecto sin embargo qué está ocurriendo Pues que si os fijáis aquí arriba el php my admin déjame que lo haga más grande porque igual no lo veis el php my admin me dice que está escuchando en el puerto 8889 entonces tengo dos alternativas o bien a python le digo que se conecte por el puerto 8889 o bien al servidor le digo que se conecte por el puerto 3306 vale cualquiera de las dos opciones Pero tiene que haber una coincidencia en los puertos Así que ahora vengo por aquí y le digo local Host 8889 local Host dos puntos vale esto es una sintaxis que es común a cualquier lenguaje de programación pulso f5 Y si todo ha ido bien Vamos a verlo vale Y si todo ha ido bien Ah Wow vale local Host 889 3306 no me lo ha pillado un momento Port es igual a 8889 era Este creo 889 sí vale f5 vamos a verlo bien y vamos a ver vale muy bien Ahora sigamos viendo qué es lo que nos dice el error y lo que nos dice el error es que Okay me he conectado ahora acceso denegado para el usuario José Vicente en local Host O sea fijaos que esto es un Aunque parezca que no es un mini triunfo porque que me diga acceso denegado quiere decir que me he podido Conectar a un servidor he intentado poner un usuario y una contraseña me ha denegado Vale entonces continuación voy a crear una nueva base de datos la voy a llamar curso python le voy a dar a crear Me la voy a dejar vacía ahora hablaremos de ella y en privilegios voy a crear un user account el username es José Vicente El Host es local Host el password es José Vicente el password es José Vicente y le digo que le quiero dar todos los privilegios a la base de datos curso python le digo Go está OK Okay Ok vale Y ya Go vale Y ya está Okay Ok vale Vamos a repasar tengo curso python me voy a privilegios compruebo que hay un usuario llamado José Vicente vuelvo a ejecutar el código y si todo va bien Ahora me dice que correctamente me he conectado a esa base de datos vale por tanto Eh Esto es una de las cosas más puñeteras no ya que tiene python sino que tiene cualquier lenguaje de programación Y es que con respecto a la conexión a una base de datos o lo haces como lo pide la base de datos o no te vas a poder conectar de la misma forma voy a grabar el siguiente vídeo de la misma forma quiero deciros lo siguiente Cuál es una diferencia clave en la conexión de mysql con respecto a cómo nos conectamos anteriormente con sqlite pues una diferencia clave es que yo he tenido que poner un usuario y una contraseña podríamos pensar que es una Pues no sé es un estorbo tener que poner un usuario y una contraseña porque hasta que no he creado ese usuario esa contraseña no me ha permitido conectarme Pero por otra parte coincidir conmigo que si la seguridad es un factor clave en una aplicación en ese caso mysql que te pide usuario y contraseña te exige más bien más que te pide es una mejor elección que esculita que no te exige usuario de contraseña y luego además mysql tiene un puerto Y eso quieras que no también incide en la seguridad una antes os he dicho que el puerto por defecto de una base de datos en May sql es el 3306 Así que cuando instales una base de datos real en un entorno de producción qué dirías que es lo primero que vas a hacer con el puerto qué me diríais pues lo vas a cambiar vas a usar cualquier otro Puerto menos el 3306 y tú dirás si el 3306 es el estándar Por qué me estás diciendo que use cualquiera menos el 3306 Pues porque cualquier hacker que te quiera atacar tu servidor y quiera atacar a tu base de datos lo primero que va a hacer es probar el puerto 3306 Vale entonces yo os digo una cosa os hago este comentario y a la vez os digo que no me preguntéis mucho más de Cómo funciona la mente de un hacker porque yo no soy hacker ni quiero serlo tampoco es decir nunca he entendido que qu qué motiva o qué mueve a un hacker y lo que sé de proteger aplicaciones No lo sé porque me guste ir hackeando aplicaciones sino porque he tenido que ir aprendiendo cosas para que no me hackeen mis aplicaciones vale lo digo porque tampoco sabréis que yo no lanzaré ningún curso de experto en seguridad porque no me dedico a ello porque me da mucha rabia y me da mucha rabia lo que quiero decir es que yo quiero dedicar mi tiempo a hacer cosas no a evitar que los demás me jodan las cosas que yo he hecho vale pero también te digo que evidentemente hay personas que tienen esta especialidad que se dedican a seguridad informática porque les gusta y se dedican precisamente a enseñar a Cómo proteger iones fantástico Pero no es mi perfil Bueno una vez que tengo esto a continuación dentro de curso python voy a crear una tabla entonces voy a crear la típica tabla personas con cuatro columnas vengo por aquí y digo el primer o sea esto es igual que lo que os dije en sqlite el primer campo es identificador que es un campo que va a ser una clave primaria Y autoincremental esto es lo que os dije la otra vez de que cada campo en una base de datos de tipo s de tipo sql ya sea May sql Pos sql Oracle sqlite la que sea debería tener un campo identificador que es una clave primaria autoincremental luego tenemos un nombre un teléfono y tenemos un email el nombre es un campo marchar veis que en mysql hay más tipos de datos que en el ulite evidentemente 255 eh No sé si sabéis lo pregunto y si no os lo explico yo sabéis Qué es este valor pregunto de nada eh este valor 255 es la longitud del campo En este caso lo que quiere decir es que el campo nombre admite hasta 255 caracteres eso o que el campo identificador admite hasta 255 caracteres qué me diríais de la elección que he hecho dime Dani cuenta qué os parece que haya puesto 255 demasiado efectivamente identificador 255 quiere decir queo a tener hasta 999999999999 y 259 nueves o sea 255 nueves de registros imagínate el número que es eso Imagínate la barbaridad que es eso entonces yo realmente en una aplicación por ejemplo de estas como agenda voy a tener 255 caracteres No si con que tengas seis atención eh Fíjate lo que he bajado con que tenga seis puedo tener hasta un 2 3 1 2 3 es decir con seis caracteres puedo tener un millón de elementos en la agenda Imagínate con 255 caracteres Vale tengo esa mala Manía tengo la mala Manía de poner ahí 255 caracteres en qué me puede perjudicar ese mal hábito en lo que me puede perjudicar es en que estoy reservando más de la que debo estoy preparando una base de datos para que use más memoria de la que debe y eso puede hacer insisto a la larga que la aplicación vaya lenta también os digo que eventualmente en un momento dado después de haber diseñado una base de datos si me doy cuenta de que este número es demasiado se puede rebajar pero no es deseable porque urar una base de datos a mitad de trabajo Es peligroso vale puede dar problemas y evidentemente tal y como comentábamos el otro día en primer lugar copia de seguridad vale antes de tocar la estructura de una base de datos bien Voy a insertar inserto registros nombre Juan teléfono un teléfono y Juan ar e dónde ha ido aquí inserto Jaime eh teléfono y Jaime @correo.com Y por último tenemos a Javier teléfono y cuidado con ese teléfono aunque no pasa nada y Javier @correo.com bien tenemos una base de datos que tiene ahora mismo tres personas así que yo lo que quiero hacer evidentemente es en este caso trabajar con eh una recuperación de los datos vale quiero ser capaz de recuperar datos para ello vamos a Sí para ello voy a guardar una copia de este ejercicio versión 64 mysql 3 Vale y a continuación voy a hacer lo siguiente print mi bd bueno eso lo voy a dejar no hace falta pero está ahí salud y digo mi cursor es igual a mi base de datos punto cursor lo mismo que hicimos anteriormente con sqlite y ahora digo mi cursor execute quiero ejecutar El Comando que es Select all from era personas llegados a este punto personajes no personas os digo lo mismo exactamente que os dije con sqlite y que os diré con posg sql Y es que en esta línea de código estamos mezclando dos lenguajes de programación esto de aquí es el lenguaje python mientras que esto de aquí es el lenguaje sql más concretamente en este caso es el lenguaje mysql ahora digo mi resultado es igual a mi cursor eh punto y fch all y sin punto y coma vale con lo cual ahora de momento digo quiero print mi resultado es una de las cosas que más me gustan de python Y es que puedes una lista un diccionario una tabla un lo que te dé la gana y puedes volcarla lo que en informática se llama vomitarla delante de la pantalla vale por lo menos para ver qué hay ahí dentro pulso f5 e Qué pasa vale Select all from personas vamos a ver python 38 Ah no database selected un momentín porque aquí arriba me dice password José Vicente vale Y tengo que decirle database Es igual Cómo se llama la base de datos la base de datos se llama curso python Vale ahora sí f5 Y me dice me vomita de hecho como veis aquí pues el contenido de esa petición de la base de datos evidentemente si tengo esa petición de la base de datos vamos a ver a continuación lo que voy a hacer es que en lugar de vomitarla directamente voy a recorrerla y digo for iterador in mi resultado y voy a decir print iterador Y en este caso lo que va a hacer voy a hacer una cosa print tengo un resultado que es para que comprobéis que está yendo línea a línea f5 Vale y vamos a ver Bueno Este es el déjame que lo mate a ver comment y com Así vamos directamente al grano pero no quiero borrar nada f5 vale tengo un resultado que es tapat tengo un resultado que est tapas tengo unado que est tap please vale Y luego por ejemplo digo quiero I de uno o sea Quiero ver solo el nombre pues pulso f5 y veo cómo puedo devolver el nombre el teléfono el correo electrónico en lo que sea vale en este caso a continuación lo que voy a hacer es realizar un par de ejemplos más para que veáis que si tengo esto lo tengo todo y yo ahora s que lo que haría es igual meter esto en un try except entonces try except print ha ocurrido algún error en la base de datos Vale ahora que sé que funciona ent lo di f5 y así me lo saca Y si por lo que sea cambio un dato José Vicente 2 no existe pulso f5 y me dice ha ocurrido algún error en la base de datos Vale y la gestión de errores de esta forma queda un poquito más limpia digamos desde el punto de vista de que no para la ejecución bien pues dicho esto a continuación voy a hacer algún ejempl ito más eh donde Pues bueno voy a vamos a ver voy a insertar en la base de datos esto lo voy a llamar python 65 mysql 4 vale Y bueno lo que voy a hacer básicamente es atención machacar esto porque nos acordamos que solo necesitaba una devolución la operación de Select las otras tres operaciones del crud es decir create read update y delete no requieren una devolución Entonces yo digo insert into personas values ya sabéis que pongo comas para decir que hay cuatro valores nul es el primero nul es para decir yo no te digo el identificador porque ya tú sabes el que debes poner y ahora digo a ver tengo a eh momento tengo a Juan Jaime y Javier pues José quiero meter a José que tiene el número de teléfono 1 2 3 45 y que tiene el correo Jose @correo.com ejecuto este código no tiene por qué dar no tiene por qué dar error Eh Al igual que hicimos en eslite Es recomendable que hagamos un comit es decir voy a pulsar f5 me dice que Okay me voy a la base de datos y refresco Vale y veo que no está el nuevo nombre con lo cual es bueno en este caso que haga mi bd comit perdonadme porque siempre pongo punto y coma pero es que por las mañanas suelo estar trabajando en php con lo cual Vale pues pulso f5 Okay ahora recargo brow y ahora sí tengo el identificador cinco Qué raro que le haya puesto el cinco Porque el cinco es como que antes he creado el cuatro y me lo he cargado no sé por qué ha puesto el cinco pero bueno eh vuelvo a ejecutar el código vuelvo a pulsar sobre brow y el seis no sé qué ha pasado con el cuatro pero en algún momento se ha saltado el cuatro es que cuando sal el cuatro Generalmente es porque he creado el cuatro he eliminado el cuatro y mantiene ese registro cuatro sin utilizar A menos que lo fuerce Pero bueno lo que sea vale de la misma forma eh pues para que veáis no voy a hacer el delete porque ya lo hicimos en su momento pero es Exactamente igual de la misma forma voy a hacer python 66 mysql 5 vale Y voy a decir en este caso update personas set teléfono es igual a 98 espera con comillas 9 8 7 6 5 4 y ya está e y podría ponerle we si no le pongo we si no le pongo ninguna condición lo que va a hacer es actualizar todos los datos eh a la bestia Vale entonces voy a pulsar f5 y voy a comprobar como le doy a brow y me ha actualizado todo todos los teléfonos vale muy bien os cuento para la próxima clase Dani lo que vamos a hacer aparte de que avanzaremos algo más en la teoría evidentemente pero lo que haremos es empezar a unir las piezas con las que hemos trabajado hoy eh Supongo que conocerás que hay una fantástica página llamada INE que es la página del Instituto Nacional estadística la conocías Vale entonces voy a buscar por ejemplo pues demografía y población y quiero población por municipios cifras oficiales de población de municipios españoles resumen por provincias población por provincias y sexo estoy pinchando por pinchar vale y no sé lo quiero todo me lo descargo en Excel con extensión xls lo puedo descargar con csv vale insisto eh Me he descargado una cosa pero hay millones de cosas que me puedo descargar y ahora creo que ha sido pequeñito vale 78k Y ahora Lo abro en mi caso con libreoffice o Excel lo hua instalado y compruebo cómo tengo un archivo de Excel con la información que he pedido qué es lo que diríais que vamos a hacer en la próxima clase pues lo que vamos a hacer en la próxima clase va a ser aplicando lo que hemos visto hoy en primer lugar pasar esta información de Excel a una base de datos de tipo sql comprobar que nos podemos conectar desde python a una base de datos de tipo sql Y utilizando la librería gráfica de gráficas que hemos utilizado en la clase de hoy convertir estos datos de la forma más fácil posible a una gráfica que sea fácilmente interpretable por cualquier persona digamos en entrenamiento técnico es decir el próximo día dedicaremos todavía una parte de la clase a trabajar con avanzar en la teoría pero sobre todo estaré poniendo un ejercicio relacionado con procesamiento masivo de datos Y también avanzaremos algo más en lo que os comentaba antes de eh lo que hemoso de tratar píxel a píxel para identificar formas dentro de una imagen para que para el fin de semana tengáis un ejercicio para realizar de procesamiento masivo de datos y otro ejercicio de para realizar de procesamiento de imágenes utilizando Machine learning Vale entonces por eso pues eso me vendría bien que para la próxima clase repasé lo que hemos hecho en la clase de hoy Porque será una clase que se apoyará en los conocimientos de hoy e iremos bastante a saco Cuando digo bastante a saco no quiero decir que iremos inhumanamente a saco pero sí que quiero en la clase del miércoles que viene ir con cierta velocidad para que nos cunda la clase y para poder poneros estos ejercicios para el fin de semana Okay Vale pues bueno en la clase de hoy Vale pues vamos a empezar como os decía uniendo tecnologías que hemos visto en días anteriores eh hoy vamos a empezar con la gestión de una aplicación lo más completa posible para unir por ejemplo base de datos con generación de gráficas y estadísticas tengo por aquí una tabla que tiene cuatro columnas está lo más anonimizada posible que tiene nombre fecha de nacimiento dónde ha nacido y fecha de nacimiento repetido Igual me cargo alguna columna de hecho estoy viendo Bueno veis aquí tenemos un problema y es que en algunos Campos la información está en el campo de la izquierda en algunos está en las dos espera un momentín que ya tengo Okay vale un momento y en otras simplemente pues está en los dos o en ninguno Entonces eso a ver un momento cuánto ocupa esto 10 meg puede ser vale vemos que hay un montón de Campos en blanco no rellenados vemos que hay incluso nombres en blanco vemos que hay nombres en mayúsculas nombres en minúsculas alguien me recuerda La las 5 vs del big Data que vimos el otro día una era velocidad esta no va a ser un problema pero por ejemplo había una el qué era veracidad Vale entonces yo en este caso en veracidad no tengo un problema de si estos datos son ciertos o no lo son ahora mismo lo desconozco pero tengo un problema de que los datos simplemente eh Tengo un problema de veracidad y tengo un problema de variedad los datos no están uniformes luego puede haber otro problema y es que si os dais cuenta hay algunas fechas que están formateadas con barra y otras fechas que están formateadas con guion y luego hay otras fechas que veréis por aquí que están formateadas como año mes día otras que están formateadas como Día mes año otras que tienen los cuatro dígitos del año otras que tienen dos dígitos del año Bienvenidos a cualquier base de datos vale De hecho Tenemos también una de una tabla de poblaciones vale vamos a ver esto en primer lugar tengo un Excel Pero como ahora veréis a mí esta información me va a venir bastante bien si la puedo tener dentro de una base de datos Así que voy a hacer lo mismo del otro día ahora veréis por qué voy a hacer lo mismo del otro día voy a aplicaciones voy al mamp en cuanto lo encuentre voy al mamp abro el mamp abro los servidores bien arranco en Tools arranco php my admin para gestionar mysql lo primero que me encuentro es que me lo he descargado en formato ods es Open document spreadsheet que es como Excel pero en la versión libre digamos entonces me voy a curso python para aprovecharla misma base de datos que utilizamos el otro día me voy a importar me voy a seleccionar archivo me voy a alumnos me voy a First Line del file contains de colum names y le digo Go bien de paso lo que he hecho también es importar el campo de identificación pero el campo de identificación ahora mismo ahora veréis no me sirve de mucho Bueno en primer lugar tengo ahí alumnos vamos a comprobar que voy a brow y lo que acabo de hacer es convertir una hoja de cálculo acabo de convertir una hoja de cálculo en una tabla de una base de datos en mysql Vale y a continuación bueno el identificador me voy a estructura y necesito cambiarlo para decirle que sea una clave primaria hay una cosa que se suele hacer más rápidamente que es hacer un Drop creo un campo nuevo al principio de la tabla le digo que se llama identificador y desde aquí y acabo antes así le digo que es un índice primario y autoincremental y así de esa forma ahora sí me aseguro de que ahora ese campo identificador Es realmente un campo correcto Vale ahora para qué quiero yo eh Para qué me interesaría como hablamos el otro día en primer lugar eh homogeneizar las bases de datos Pues a continuación lo que voy a hacer es que antes de que entremos en python voy a ir a sql y lo que voy a hacer es eh hacer una petición más compleja que las que hemos hecho estos días Select all from alumnos vamos a verlo le lo do a Go y dice vale Ok está los alumnos y ahora digo Select count nombre coma nombre from alumnos Vale entonces esto ahora mismo no va a funcionar vale Por qué me dice e O sea si quieres hacer un count tendrás que hacer un Group by entonces digo Vale pues Group by y eh nombre vale quiero contarlos por el nombre quiero agruparlos por el nombre así que vengo por aquí y me aparecen los alumnos que hay por ejemplo veo que Adriana hay 16 Adriana hay 2 africa hay un quiero averiguar en este caso a 827 nombres diferentes quiero averiguar en este caso Group by nombre order by Vale pues un momentín vamos a ver nombre as cuenta entonces order by cuenta descendiente vamos a verlo un momento Ok Go y me dice Pues mira el nombre que más hay es María luego Carlos luego Alejandro si os fijáis lo que ha hecho es agruparlo por nombre y a continuación ordenarlo por el número de forma descendiente para Mostrarme primero los que más hay y en último lugar los que menos hay vale claro al final de todo esto habrá un montón de nombres que tengan muy pocas repeticiones muy pocas iteraciones Pues yo puedo completar esta consulta diciendo limit 15 solo quiero los 15 nombres que más se repitan le doy a Go vale Ok entonces y solo me muestra los primeros 15 Vale entonces lo primero que he hecho es construir una petición sql de lo que el otro día estábamos utilizando para demostraros Por qué eh las bases de datos en proyectos de tratamiento de datos claro te voy a decir por qué las bases de datos en proyectos de tratamiento de datos suelen ser las más elegidas por ejemplo frente a Excel Pues porque son bases de datos y contienen herramientas específicas para trabajar datos lo cual evidentemente no descarta a otras aplicaciones como Excel con sus tablas dinámicas y sus gráficas y sus un montón de herramientas que tienen vale pero desde luego en un momento dado poder realizar es tipo de ordenación con una frase con una sentencia pues viene bien claro esto es como el chiste del ingeniero y la fotocopiadora el problema no es formular una frase el problema es saber qué tenías que poner en esa frase para que funcionara evidentemente vale entonces yo de momento lo que voy a hacer Es que voy a copiar esta sentencia digo voy a copiar esta sentencia porque si ahora pincho cualquier otro botón la voy a perder que es muy común es un clásico Vale entonces para no perderla voy a ir a text edit veis aquí en text edit yo lo que suelo hacer es que me suelo copiar y pegar como a modo de portapapeles temporal las peticiones sql de aquello con lo que esty trabajando De hecho si hago control Z veréis con lo último que estaba trabajando esta tarde vale entonces lo que hago es que me lo guardo esto aquí los espacios son decorativos simplemente los he puesto para que los veáis vale los he puesto para que los podáis apreciar y ahora a continuación vamos a ir a idel y vamos a ver esto en python vale vamos a transferir esto a lo que ya sabemos de python y Vais a ver que es más fácil de lo que parece me voy a recent files me voy a mysql 5 Vale y lo voy a copiar voy a hacer un nuevo lo voy a pegar lo voy a guardar lo guardo en 60 Sí vale lo guardo en 67 base de datos Uno Vale entonces ahora atención yo lo que voy a hacer es copiar esta consulta y la voy a pegar aquí cuidado Vale porque evidentemente si bajo de línea salta hay un truco Bueno una es eliminar los salos de línea y hacerlo todo junto otro es hacer esto e ahora limit 15 Ahí está Vale esto aquí esto aquí eh aquí me sobra uno y yo creo que ya vale vamos a probarlo eh Ah vale Sí este el último que hacía era imprimir Ok f5 ha ocurrido algún error en la base de datos Ok Select Vale mi cursor curso python 88889 José Vicente en principio no debería haber algún error déjame que ponga todo esto en la misma línea No creo pero por si el error es de saltos Sí ya veo dónde está el error es de espacios selecto las cuenta nombre from no no from alumnos groupby ahí falta un espacio porque si no hay espacio se pegará con ese Group by vale vamos a probarlo tiene pinta de ser eso ha ocurrido algún error en la base de datos eso también fuera vamos a poner un espacio al final de cada línea Bueno pues tampoco pues no pasa nada Mira voy a ponerlo todo así y ya está nombre from alumnos Group by nombre para ver un poco De dónde viene el error limit 15 f5 ha ocurrido algún error en la base de datos Pues mira voy a quitar el try except y así veremos en rojo f5 qué nos dices vamos a ver un read result esto fuera el comit fuera Ok vale era el comit fantástico muy bien Me dejo esto así ya que lo tenemos tampoco ocupa tanto y ahora a continuación voy a abrir algún ejercicio anterior el tres creo que era sí perfecto y ahora resultado mi resultado es igual a mi cursor feol y quiero imprimir mi resultado Okay pues vamos allá f5 y el resultado es María Carlos Alejandro Pablo Andrea Paula Marta Sergio y así con cada uno de ellos concretamente yo lo que quiero hacer ahora es imprimir y de dos vale porque si nos fijamos en May sql Ah no perdona primero la cuenta es el índice cero y el nombre es el índice uno entonces este es el índice cer0 guardo recargo bien y lo mismo vale Y es que vamos a ver str intentamos convertirlo en str O sea forzamos la conversión Vamos allá Vale y eh tengo María 50 Carlos 46 Alejandro 45 Pablo 40 y así entonces con esto vamos a con esto yo lo primero que quiero demostraros es que para trabajar con la conexión con base de datos Generalmente digo Generalmente porque cada maestrillo tiene su librillo y no hay una forma sola de hacer las cosas pero Generalmente tú haces la prueba sobre la base de datos la base de datos tiene en este caso concreto por ejemplo eh Es lo tiene la gran mayoría lo tienen tu pestañita de sql que es la pestaña donde puedes probar cosas y puedes hacer un montón de pruebas hasta que sale la petición que tú quieres y cuando ya tienes la petición que quieres es cuando la copias y la pasas a tu lenguaje de programación sabiendo que a partir de ese momento si hay algún problema el problema estará en el lenguaje de programación no en la petición a la base de datos Vale ahora a continuación eh lo que tenemos por aquí es que ya tenemos vestra petición a la base de datos pero la petición nos da un resultado como te diría yo estéticamente feo porque nos da un resultado en línea de comandos y yo quiero un resultado bonito pero no estoy hablando solo ya de tk inter estoy hablando de que quiero ver esto en modo gráfica Quiero poder presentar esto por ejemplo a un cliente y decirle Mira te envío un jpg de los nombres más comunes de tu base de datos Vale entonces en este caso a continuación lo que voy a hacer es me voy a resent files me voy a gráfica 4 por ejemplo y vamos allá vamos a ver no esta no pero sabes qué ah no Aparte esta queé es ahí voy a esta gráfica eh examples Me voy os acordáis el otro día a la galería a la librería de gráficas y me voy a la de gráfica de tarta la típica En cuanto la encuentre voy a buscar p la t p Chart vale p polar charts Ay esta me encanta no se aplica al ejercicio que estamos haciendo ahora ig hua cido y apellidos si hubiera aplicado la de nested pero no sé Pero te digo que me Mola quiero decir que me Mola visualmente vale No por otra cosa pero queda muy cool queda muy película de ciencia ficción Bueno pues voy a la típica el basic page Chart sobre todo lo que quiero es empezar por el ejemplo más sencillo posible Vale entonces vamos a empezar por aquí ahora luego os quiero hablar también una cosita de esto pero ahora hablamos de esto quiero esto de aquí ya sabéis que primero arriba del todo o sea no debería todo esto y pegarlo a continuación sino que todas las importaciones deberían ir al principio y ahora sí es donde voy a hacer esto ahora digo parte de la base de datos Y ahora aquí abajo parte de la Gráfica y pego igual y ejecuto a ver qué pasa f5 Vale entonces si todo va bien yo tengo ese resultado y luego Además tengo este pie Chart entonces bueno yo puedo pinchar por aquí vale puedo del otro día no puedo hacer Así puedo hacer zoom puedo mover la Gráfica puedo hacerla grande puedo volver a casa Puedo guardarla y eh Por ejemplo en escritorio vale Y luego Esto se lo podré enviar vamos a ver José Vicente se lo podré enviar a mi cliente en formato png qué es lo que quiero a continuación pues lo que quiero a continuación como os podéis imaginar es eh aquí donde pone por ejemplo sizes y aquí donde pone labels lo que quiero es cambiar los labels por el este por el nombre aquí el nombre y lo que quiero es cambiar los sizes por el número vale Y de esa forma lo que quiero es combinar los dos ejercicios en uno solo voy a pasar de vídeo vale con lo cual a continuación lo que voy a hacer Vamos a ver es lo siguiente voy a empezar esto fuera ya que ya lo hemos entendido esto fuera vale Y ahora digo labels es esto de aquí labels son valores separados por coma por comas tengo labels vamos a ver y tengo sizes labels es igual a labels entonces aquí en sizes lo que tengo es aquí lo que tengo es Estoy pensando cómo puedo aumentar esto es decir Ah este explode qué hace Cómo que hox Ah sí solo explota el segundo slid vale Esto me da igual Ok vale perfecto vale Yo lo que quiero decirle al sistema esto lo voy a dejar como está Esto me da igual voy dejar como y ahora digo sizes punto apen esto no va a funcionar eh el size era este Ok y labels punto append este de aquí lo voy a ejecutar no va a funcionar porque me va a decir que el método append no sé para Cuál de estos dos no me lo va a ahora lo veremos y todo lo demás de momento se queda igual y luego tendré que vaciar estos parámetros de aquí pero de momento dejadme quedarme con ellos f5 vale unexpected Ah sí este sobra Ok cierto vale error muy bien vale Este es el error que quería vale Y me dice las tuplas no tienen el atributo a pen con lo cual el problema en este caso es que la el labels la tupla es una estructura inmutable Eso quiere decir que cuando yo creo la tupla debería estar diciendo eh Cuántos elementos va a contener si os fijáis yo puedo saber los elementos que va a contener porque yo le estoy diciendo aquí limit 15 Es decir yo sé que ese elemento esa lista esa tupla va a contener 15 elementos Entonces en este caso lo que puedo hacer es decirle un momento lels un momento que te voy a decir Perdón aquí dónde está el error Bueno pues no encuentro el error momento lo ejecuto a ver lo que quiero en este caso es decirle Por ejemplo a una tupla que va a tener en este caso elementos de esta forma yo le puedo decir ahora que labels de I es igual a id1 es decir lo que hago es crear una tupla vacía pero reservando los 15 espacios en la memoria porque el problema es que todas aquell estructuras de datos que son inmutables cuando las creo les tengo que decir cuál es su longitud que en este caso no me es un problema en otros casos Por cierto sí que muchas veces lo es vale pero en este caso por lo menos la longitud desconocida cuando la longitud es desconocida A veces lo que se hace es crear una tupla más grande de lo que sabes que vas a utilizar para reservarte el espacio Entonces ahora creo la tupla vacía le digo que para cada uno de los registros Esta es la información que va a tener vamos a probar esto Ok Vale y eh okay el objeto No soporta dónde estás int object No soporta esto m Qué raro vale un momentín Aquí voy a poner Hola y vale int object y pongo ahí de cero labels Vale pues un momento y vamos a ver una cosa que se me está ocurriendo es la siguiente longaniza es igual a esto ahora longaniza más igual coma más id1 y al final del todo fuera de aquí digo Label es igual a longaniza labels lo puedo quitar lo que va a hacer es convertir labels automáticamente en una tupla vamos a verlo okay Aquí no puedo concatenar Vale y no puedo concatenar esto no pasa nada concatena esto conviértelo a String ok vale Y ahora okay muy bien vale Y ahora lo que me dice es que Label debe ser de longitud x lo que probablemente me está diciendo es que no coinciden vamos a verlo no coinciden las longitudes de uno y de otro por qué Pues porque longaniza que son labels debe tener 15 elementos pero sizes debe tener los 15 más estos cuatro Entonces vamos a comprobarlo print vamos a comprobar y ahora quiero print labels y quiero print sizes f5 y vamos a comprobarlo entonces ahí lo tenemos vamos a comprobar y comprobamos que tenemos por aquí el e 50 Ah vale sizes Y esto es el número uno que le he puesto a los dos el número cero por cierto esto y esto lo puedo comentar Ya Ok f5 vale Y tenemos María Carlos Alejandro Y tal Pero fijémonos que tenemos 15 30 45 10 15 30 45 10 y luego todos los demás vale que serán los otros 15 entonces Aquí voy a vaciar esto para decir que sea una lista y esté vacía f5 Vale y la debe ser de la longitud de X hay una cosa que Ah qué fatal y es lo siguiente Y es que como estoy encadenando fijémonos que tengo una coma antes de María y eso quiere decir que tengo un elemento de más entonces voy a poner aquí un cer f5 vale vamos a ver Tengo un cer vamos a contar ahí el problema está en esto de aquí 0 1 Perdón 1 2 3 4 5 6 7 8 9 10 13 14 15 16 1 2 3 4 5 6 7 8 9 10 12 13 14 16 sospecho esto dónde estás aquí longaniza es igual a Hola y ahora no vale Label debe ser de la longitud x Label o labels e Label A ver fíjate que dice Label pero mi valor es labels vale Okay Vale vamos a comprobar que esto de aquí lo está cogiendo como una dupla Ahora aquí print Quiero ver el tipo de dato Y entonces digo print type y labels y a ver qué me dice que es labels f5 Class String ese es el problema y es que eso me lo está cogiendo como String entonces me abro un navegador y digo python String to tuple vamos a ver vale Y esto mismo entonces copio eso y digo labels es igual a convierte en tupla usando map con número entero y el separador es una coma y un espacio el espacio Yo diría que no Bueno hay algún espacio occidental por ahí pero sin el espacio vamos a verlo f5 eh este str Esto no es longaniza veámoslo invalid literal con base 10 vamos a ver un momento Esto está aquí y el String es este vale vamos a probar este ah tú crees Ojalá que sea así de sencillo labels eval longaniza f5 Hola is not defined Hola is not defined si quito Hola y pongo f5 Dónde está la r de sintaxis parece que me lo Marque ahí parece que lo marque Ah no ahí vale Okay ahí vale hay una cosa que puedo hacer pero no la quiero hacer para hacer una prueba que es la siguiente que es labels es igual a esto voy a hacerlo un momentín eh No perdón esto no esto simplemente para que podamos ver la Gráfica y ya a partir de ahí nos centramos en la conversión de un String a una tupla pero con un poquito más de seguridad de lo que va a salir por lo menos lo que quiero es que veamos una mínima gráfica en la pantalla Así que f5 vale explode debe ser vamos a ver Ah Mira de hecho claro ahora dice que es una tupla vale Ok vale lo que está diciendo es que el explode debe ser de la longitud de X que es 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 1 2 3 4 5 6 7 9 10 11 12 13 14 15 16 vale el ejercicio original es este y tiene 1 2 3 y 4 1 2 3 y 4 voy a esto un momentín voy a hacer lo siguiente voy a hacer f5 vale así sale Y fijémonos que en este caso tenemos 1 2 3 y 4 1 2 3 y 4 lo estoy comparando con lo que tengo yo voy a hacer una cosa limit 4 por ejemplo comentamos f5 vale e Qué pasa aquí Ah sí claro vale Okay 1 2 3 y 4 f5 y tengo 1 2s 3 4 y 5 1 2 3 4 y 5 estoy comparando Y si digo limit 3 y me cargo a Pablo interesante Entonces no parece ser ese el problema lo que parece Es que este ejercicio esté como preparado para trabajar con cuatro elementos no parece que tenga por qué vamos a ver creo que está pasando lo siguiente Y es que tengo aquí un parámetro explode que es el que me saca una porción de la tarta claro este parámetro explode se está comprometiendo a tener 1 2s 3 y cuatro parámetros pero es que a mí me da igual ahora mismo el explode Entonces yo lo que voy a hacer Es que voy a deshacer todo lo que he hecho vale Sí el explode es un parámetro que se encarga de mira lo voy a ejecutar de hacer esto de una porción de la tarta esto de aquí y separarla como destacarla pero es un parámetro opcional y yo de hecho ahora mismo realmente no lo necesito para nada Entonces qué ocurre el explode que lo tenemos aquí tiene 1 dos 3es y cuatro elementos igual que los labels igual que los sizes si yo hago labels y sizes de 15 elementos pero el explode sigue siendo de cuatro elementos el sistema no sabe cómo actuar porque necesita que todos los elementos tengan el mismo número de ítem Vale entonces lo que voy a hacer es quitar la opción de explode porque es que no me vale para nada para este ejercicio lo que hago es esto lo comento ahora debo tener 15 aquí 16 realmente y 16 Aquí vamos a verlo f5 y si todo va bien en ese caso tengo Esto vale en ese caso lo que tengo es esta gráfica voy hacer un poco más grande para que se vean mejor los porcentajes y yo a partir de aquí a partir de esta gráfica ahora lo que haremos es que los datos que vuelquen sean los que realmente vendrían por aquí pues yo puedo guardar esto y me lo guardo en el escritorio como figura uno ya existe Me aseguro que en el escritorio tengo un archivo png y ese archivo png yo ya se lo podría enviar por correo electrónico Por ejemplo a un cliente vale este ejercicio está casi completo ahora comentaré el código y eliminaré en este caso la página lo que está haciendo este te estoy enseñando tal cual lo que viene en el ejemplo vale Y es que dice hay features adicionales te dice esto de aquí el ejemplo no te dice nada más que esto Vale entonces en este caso no eh También te digo que nos hemos saltado directamente la documentación igual en la documentación pone algo más concreto de Fíjate que si el número de parámetros no coincide eso te puede explotar o lo que sea vale también te digo que eh Esta es la documentación oficial una de las documentaciones que más me gustan es en php.net que es la documentación oficial de php eh php Por ejemplo explode vale lo que sea cualquier Comando entonces esa documentación está muy bien porque es una documentación abierta donde los propios creadores de php te documentan la instrucción te dicen qué es lo que hace te da una descripción sabes sintáctica a continuación te vienen una serie de ejemplos ejemplo un y ejemplo dos pero lo más divertido es que cuando acaba la entación oficial aquí tienes la user contributed notes que es donde la gente dice Sí mira el ejemplo oficial está muy bien Pero pon el mío que Mola más Y entonces hay veces que es cierto que la gente propone ejemplos que son más claros que los de la documentación oficial quiero decir Para eso están las user contributed notes porque hay veces que los ejemplos que ponen son correctos Pero dices Mira el ejemplo será correcto pero no entiende un pimiento entonces hay gente que dice No mira el ejemplo de arba es correcto pero mira haz pin Pam pumi lo tienes entonces son ejemplos que igual son más incompletos pero son más sencillos de entender vale quiero decir que así como yo siempre digo te acuerdas que creo que lo he comentado alguna vez que la documentación de Java yo creo que está pensada para que la gente no programe en Java porque parece que la documentación te dé miedo a programar la documentación de php eh Está muy bien Hay una documentación quio decirte con esto que al final cada documentación es una cosa pero Hay una que no sé si estará todavía en marcha que es la de phap hace tiempo que no lo uso por eso no te sé decir pero referencias Esta es la mejor documentación que yo he visto en toda mi vida tiene pinta de que no apis vale Sí a ver si está igual que la recuerdo entonces entación bueno no no porque lo han pasado a yub entonces antes cuando estaba en la página era una documentación muy chula porque decía Mira cómo se usa esto se usa así y entonces te decían te vale fantástico no te vale espera te pongo un pequeño trozo de código y con el trozo de código te aclaraba un poco más y a continuación te decía lo has pillado bien no vale pues te pongo un trozo entero de código o sea era como si te apañes con esto fantástico si no te pongo un trozo intermedio y si no te pongo un trozo gigantesco de código y si no era con uno con el otro lo pillaba Vale entonces pues bueno es lo que te digo no con cada documentación pues al final Vale entonces ahora antes de empezar a comentar Este ejemplo yo lo que quiero es y de pasar al segundo ejemplo yo lo que quiero a ver porque podría pasar al siguiente ejemplo de hacer sistema de analítica Pero bueno vamos a hacer una cosa Mira vamos a pasar al sistema de analítica a ver si lo puedo acabar más o menos rápido y antes de que acabe la clase para mandar los deberes evidentemente tengo que haber conseguido la conversión de Stream a tupla Más que nada porque a continuación lo que os voy a decir es hacerlo vosotros y para el fin de semana y para que lo hagáis vosotros evidentemente os tengo que dar un ejemplo 100% en funcionamiento una vez que tengo esta tabla de registros voy a guardarla quiero llamaros la atención en cuanto a que un momento que estoy guardando en cuanto a que esta tabla es una tabla que ya empieza a ser gigantesca tiene una columna un poco particular que se llama utc Entonces el utc es el os lo voy a describir Vais a pensar que os estoy tomando el pelo pero es la cantidad de segundos que han pasado desde el 1 de enero de 1970 hasta hoy por ejemplo y creeréis que os estoy tomando el pelo pero si en internet buscáis unix apoc í que se me ha ido la letra unix apoc el tiempo unix veréis que es la cantidad de segundos que han pasado desde medianoche del 1 de enero de 1970 o sea es una forma estandarizada en informática de contar el tiempo y no ocupé porque luego mysql Y prácticamente cualquier tipo de gestor de base de datos sql tiene funciones para convertir eso en fechas tengo la IP y tengo el navegador ahora veremos que en el navegador pone por ejemplo pues desde qué ordenador está entrando están entrando los usuarios Bueno pues he guardado esto ahora a continuación me voy no sé cuántos registros tiene fijaos que con el scroll por ahí iba por el 41000 o sea imaginaos vale Y ahora a continuación lo que voy a hacer Es que voy a cerrar por aquí me vengo aquí me voy a la base de datos del curso Esto me dice cuidado porque no lo has guardado pero sí que lo había guardado voy a importar voy a seleccionar archivo máximo 8 megas vale 3 megas menos mal si no se puede ampliar eso es lo de menos y la primera línea contiene los column names le doy a Go eh has visto lo que a lo que le costaba Excel o libreoffice en este caso evidentemente mover ese archivo que tiene como no sé 12 pico mil registros creo vale es decir Excel es un archivo que es una hoja de o sea es un programa que es una hoja de cálculo y no es que lo diga yo lo dice Microsoft cal también o sea cal no es mejor que Excel En ese sentido Vale entonces ahora verás que en el momento en el que metemos esa gran cantidad de información en algo que realmente es una base de datos vas a ver como realmente el rendimiento mejora el rendimiento aumenta vamos un momentín estamos ahí importando es un archivo grande con lo cual es normal que la importación le cueste un poco Mientras tanto yo por ejemplo lo que voy a hacer es que a partir de los ut de los utcs quiero averiguar algo como esto quiero averiguar por ejemplo quiero averiguar por ejemplo vamos a ver un momento quiero averiguar algo como esto un segund Inn que estoy desplegando Quiero saber para los días que han pasado para los últimos días últimos meses últimos lo que sea Quiero obtener una gráfica como esta vale es decir quiero volver a mezclar la gestión de base de datos la gestión de información de base de datos con la representación con gráficas Entonces vamos a ver cómo va está todavía en ello voy a hacer lo siguiente voy a crear un nuevo archivo python 68 base de datos dos vale me voy a ir a la galería me voy a ir a una gráfica la más estándar que pueda voy a decir Line no debe ser mucho más sencillo no simple plot Ah no no St plot no vale simple graf igual acabamos antes Mientras tanto como veis estoy aquí esperando a que esta importación finalice pip plot voy a la más sencilla que pueda y ya está fantástico Esta es la que quiero f5 y ya está Esto es lo que quiero y ahora a continuación quiero sacar la información de la propia base de datos Así que un segund vamos a ver cómo ha fallado la importación es est lo voy a guardar en el formato csv y con el formato csv coma y comillas ya qué rapidez Oh 41 megas 41 meg voy a comprimir los registros en 1,9 megas daos cuenta que estoy intentando importar el correspondiente a 41 megas de datos si hace falta pues lo que haré es intentar quitar veis que me permite el ZIP y vamos allá y si no lo que haré es importar un conjunto menor de datos de hecho si queréis voy a hacer eso ahora voy a quitar esto hasta aquí elimino las filas que sepáis que estoy llorando por dentro vale o sea no lo estoy externalizado pero estoy llorando estoy orando porque la gracia de estos ejercicios es precisamente que haya muchos datos Vale entonces voy a detener paro reinicio paro Ahora un momento que el sistema pare realmente bien una cosa que puedo hacer es parar los servidores y volverlos a arrancar esto lo que acabo de hacer es muy guarro y volverlos a arrancar me meto dentro de php My admin igual había importado algo curso python registros Pues sí mira había importado algo ha importado 22000 registros Pues venga vamos a trabajar con eso y así por lo menos Vamos haciendo cositas Entonces ahora yo a continuación lo que quiero preguntarle al sistema es por ejemplo que me diga el número de ips o que me agrupe el utc por año mes y día Vale entonces vengo aquí y digo mysql Group unix apoc by date por ejemplo Group by date and convert from unix timestamp Aunque es un foro de php realmente me va a valer Entonces selecciono esto me voy a sql pego la petición el campo se llama utc as enate vale bien Me vale eh formate Melo como Día mes y año bien count ID vale como post count de registros y Group by nede media Go vale y estamos viendo que por ejemplo el día 1 de enero de 1970 una entrada esto evidentemente es incorrecto será un registro cero pero el 1 de septiembre 280 2 de septiembre 507 3 de septiembre que es cuando ya empezó a entrar más gente en esta aplicación hubieron estos estas entradas vale lo veis Entonces yo ahora a continuación lo que voy a hacer es que me vengo aquí selecciono bu evidentemente importo base de datos Me conecto a la base de datos le hago una petición a la base de datos la petición es esta de aquí hago Esto vale quito e esto Qué es Ah muy bien Qué fantástico lo hecho al revés okay O sea Estoy tocando el base de datos un lo quería aquí en el base de datos dos casi me cargo el ejercicio Primero Group by date Vale ahora copio esto y digo print y de1 y de2 vamos a verlo f5 tengo ahí los datos y tengo el plot vacío evidentemente con lo cual ahora a continuación vamos a hacer lo mismo que en el otro ejercicio que es lo siguiente vamos a ver plot 1 2 3 4 Parece que va por días aunque Hay días que igual no hay registros pero bueno entonces plot aquí no tengo lista es igual a esto y ahora lista es el String de uno lista pun append y quiero aprendiz este de aquí Okay ahora Quiero plotear la lista momento que voy a encenderme la luz HM Vale y vamos a verlo y lavel some numbers Pues voy a poner visitas f5 vamos a echarle un vistazo a ver qué dice vale Aquí lo tengo y ahí lo tengo vale ahí como podéis ver tengo los números que reflejan tendríamos que ver eh ahora lo vamos a ver de hecho el tema de poner las fechas aquí por ejemplo vale porque lo que ha hecho es poner números directamente a paloseco pero yo creo que podéis ver en esta gráfica que representa correctamente los valores que tenemos aquí que básicamente quiere decir que el día 1 de septiembre o 2 de septiembre me conecté yo pero el día 3 de septiembre es cuando la gente empieza a entrar en la aplicación hay un pico probablemente esto sería fin de semana de hecho no sé si veis que hay flumin un bajón flum blim un bajón Y si seguimos con más registros probablemente veremos ese mismo patrón Qué es el bajón fin de semana vale menos gente entrando en la aplicación con esto Este ejemplo fijaos que siendo más complejo de base de datos pero es más sencillo en cuanto a visualización esto es con lo que quiero trabajar y sobre todo quiero que os deis cuenta de una cosa quiero que os deis cuenta de que esta sencilla línea de código ha convertido casi en una gráfica 22,000 registros de una base de datos que se dice poco y O sea que se dice pronto y lo mejor es que si ahora hago el ejemplo si ahora voy a decirle muy bien Ahora voy a decirle que a ver si me deja importar todos los registros quiero hacer lo mismo con todos los registros entonces me voy a registros No aquí me voy a Mientras tanto mientras hacemos esto vamos a ver lo de la tupla voy a decirle que quiero vaciar la tabla de registros y voy a dejarlo un ratito importando todos los registros entonces un momento caray sí que le cuesta vaciar una tabla Hola será posible Eh Esto es demasiado truncate Table registros sí no sé igual me sale más a cuenta hacer algún otro tipo de operación Como por ejemplo a copiar la tabla a registros dos y copiar solo la estructura y ya está en fin importo selecciono archivo quiero registros csv vamos a decirle Go vale Y me dejo esto aquí funcionando mientras eh nos vamos al otro ejercicio voy a cerrar cositas por aquí Mientras nos vamos al otro ejercicio y vemos el tema de las tuplas y así le dejamos tiempo a la importación esto fuera esto de momento fuera esto fuera y vamos a este ejercicio de aquí f5 lo recuperamos dónde lo teníamos bien Y ahora os acordáis que hace un momento lo había falseado pues lo que quiero es realmente convertir esta longaniza en una tupla así que bueno vamos a verlo vale hay una cosa no sé si quizás no sé si quizás Esto es lo que me está fallando Y es que aquí voy a poner una comilla simple y aquí voy a comer a poner una comilla simple para asegurarme que la tupla tenga esas comillas simples ahora hago así no hago así labels es igual a evalúa longaniza okay sizes es igual a eso vamos a probarlo f5 no s si un error momento vale not longan vale si nos fijamos he hola hola Claro Hola entre comillas también f5 a esto ya es otra cosa Vale y ahora dice que esto de aquí es una tupla entonces lo que he hecho es asegurarme que los nombres aparecían forzados entre comillas para que el programa entienda que son strings dentro de una tupla y que no son líneas pero bueno entonces para eso lo que he hecho es esto de decirle al sistema que eh aquí donde pone Hola pues me lo ponga además de las comillas que delimitan la String las comillas sencillas que delimitan la tupla lo mismo he hecho aquí esto voy a empezar a borrar ya sobrantes borro sobrantes esto no lo quiero para no marear verás te cuento voy a escribir por aquí abajo yo tenía un String de hecho lo he borrado bueno da igual tenía un String que era Pepe coma Jaime com José tenía este String claro qué ocurre que al convertirlo en una tupla lo que hace es que coge estas comillas y las convierte en esto de aquí Qué problema hay con esa tupla qué dirías claro Ves Ahora lo ves exacto y es que el programa intenta meter esto como una tupla pero claro si no tiene comillas aquí dentro cree que esto son números enteros y el programa dice esto una de dos o son números enteros o si no me pones comillas son variables Pero eso tampoco son variables porque no las ser declarado arriba Entonces falla en la validación qué es lo que tengo que hacer lo que tengo que hacer es que cada uno de estos nombres vaya entre comillas para que cuando convierta esto en una tupla se quede así Y esa tupla sí que es una tupla válida de nombres String vale ese era el problema y por eso es por lo que aquí estoy poniendo después de la coma una comilla encadenado y otra comilla para forzar a que cuando me da el String me lo dé en este formato para que al convertir se convierta correctamente un poco un fastidio pero es lo que hay Vale entonces Ahora vengo por aquí por cierto que ahora le digo por ejemplo que no quiero limit 15 sino quiero limit 25 vamos a probarlo pulso f5 vale Y me vuelve a sacar claro ahora evidentemente no es tan inteligible al menos en este tipo de gráfica porque no puedo verlo correctamente Claro que eh podría este ejercicio y convertirlo en un segundo tipo de ejercicio que es una unas barras horizontales entonces me voy a la documentación esto Cómo vas Ah no Esto es lo de antes no era eso bueno pues ahora lo apañamos a ver local Host php my admin eh curso python 884.000 registros bueno espera un momentín a ver si puedo tocar una cosa aplicaciones m configuración buf y ahora V a sa ver cuál es ht doc no configuración última versión php ini abrir con brackets el Max execution momento esto es Ah vale a ver ahora Max Time de 3000 segundos para que no pare después de tal entonces registros dos operaciones lo copio a registros 3 solo la estructura paro los servidores vuelvo a arrancar los servidores lo que he hecho es que la importación no tenga un límite de 30 segundos y ahora registros tres importo selecciono archivo cojo este le doy a continuar y vamos a dejarlo ahí rodando bien Mientras tanto me voy a buscar la librería y horizontal colum horizontal bar Chart muy bien esta es la que quiero entonces cojo el ejempl ito evidentemente esto lo voy a guardar como 69 base de datos tres vale Y ahora a continuación digo lo siguiente esto Qué es sí esto fuera esto no lo sé de momento fuera o sea me he cargado todo lo correspondiente al pie Chart ahora cojo esto de aquí mira también usan un pi interesante solo importo unpi porque lo otro ya lo tengo Okay Ah vale muy bien Este ejemplo lo que hace es hacer aleatorios es decir la gente es esta de aquí voy a tener el mismo problema No sí la gente es esta de aquí espera me estoy concentrando vale Y el performance es aleatorio vale vamos a ejecutarlo me devuelve esto eh sizes dónde estás aquí esto fuera era pas vale Fíjate que si ahora lo vuelvo a ejecutar vale No sé si veis que me da diferente da un resultado diferente porque es aleatorio porque el ejercicio es aleatorio si ahora vengo por aquí y lo que quiero en este caso esto Cómo va Esto va corriendo le voy a pasar a otra pantalla esto fuera esto aquí vale Y vamos a ver vale gente es esta con lo cual lo que voy a hacer es lo mismo que tenía en el otro ejercicio base de datos uno y digo people es igual a esto ahola ahora longaniza es igual a Hola longaniza má igual a str de I de un vale labels No era labels Qué era que me lo he cargado people vale Así que print people dará un error evidentemente people es igual a eval longaniza Ne Mola is not defined Ah sí claro muy bien lo mismo de antes catap Plus lo mismo de antes oh vale bien Esto evidentemente no está bien porque me está cogiendo valores aleatorios Hola evidentemente lo pongo para rellenar pero ahora lo que quiero es que en lugar de poner valores aleatorios me pongo a valores correctos Porque además esto es correcto debería dar como media pirámide y no lo está dando así que a continuación vamos a ver people por aquí performance por aquí voy a poner performance igual a 20 vale esto de aquí vale todos a 20 y ahora lo que quiero con cada uno de ellos performance vamos a ver lo que quiero ver es por qué esto no está metido np Random Run len people esto es la cuestión qué forma más extraña de representarlo m por claro Yo quiero para cada uno de estos a ver print performance ahí vale me está sacando una serie de valores para estos elementos Caray qué forma más rara inent arlo Pero esto En todo caso es una lista entonces puedo decir que performance es una lista pero bueno era válida Al fin y al cabo porque cogía la longitud Entonces ahora performance punto apen el número valores aleatorios claro ahora voy números aleator como sí como elementos í en la lista Sí pero que si te fijas en lugar de meterlo en un for que tampoco tenía por meterlo en un for pero no sé o sea era raro un momento vale e Qué pasa aquí porque ahora fíjate que me lo ha cogido Cómo Ah los objetos no pueden ser broadcast to a single sh hay una cosa que me escama un poco y Es que fíjate que estos valores que eran los originales estaban separados por nada por un tabulador mientras que estos valores de aquí son con coma y no los coge aparte a ver un valor original Ahora sí vale Okay es que le faltaba un valor Y por último ahora en lugar de poner 20 voy a poner I de c y esto qué es lo que va a hacer pues esto lo que va a hacer así el Hola tiene 20 s porque vale performance cer Ahora sí Hola No tiene ninguno y así puedo ver mejor cada uno de los elementos que tengo en la gráfica y ahora de hecho incluso podría como esto se puede de hecho incluso hasta maximizar ahora incluso podría m decirle que no quiero Bueno voy a poner 100 va es que si le digo que no igual me saca 800 y me funde la El Monitor pero por ejemplo ahí vale Y ahora lo hago esto más grande ahí se montan un poco evidentemente vale pero por lo menos puedo ver cuál es la distribución de nombres en un momento dado en la tabla de la base de datos vale bien muy bien con esto tengo una variación de ese archivo Por cierto que estoy viendo que tiempo de ejecución del Script agotado bueno reenvíe el mismo archivo y la importación continuará vale no sé a ver cuántos segundos dura pero yo le había puesto 3000 segundos y creo que no lo ha pillado debo haber editado el archivo que no era ahora De todas formas a ver si me deja abrir una segunda ventana con la base de datos para ver De cuántos registros dispongo parece que no porque está ocupado con la primera operación de importación Pero bueno básicamente como os podéis imaginar lo que quiero es vamos a ver lo que quiero es realizar una importación lo más bestia posible y demostraros que aún así la tabla funcionará Bien voy a hacer una cosa voy a cerrar esto voy a cerrar esto vamos directamente al ejercicio dos el este registros tres tiene 187,000 registros esto ya es algo no perdona Ah no 187000 no tiene 100.000 Pero bueno vale venga 100.000 me puede valer voy a decir que quiero registros tres quiero registros 3 y ahora f5 recargo y e no me lo irás así sí que me lo va a hacer vale ahora mato el print ahí lo tenemos vale Y esto bueno va desde el día 1 de septiembre hasta casualmente el día 31 de octubre y si os fijáis de esta forma pued Ob tener una gráfica que de hecho no sé si veis un patrón en los picos que es lo que os decía lo de los fines de semana vale eh puedo obtener una gráfica acerca de los datos es decir creo que está claro que se ve muchísimo más claro 100,000 registros de esta forma que 100,000 registros de otra forma eh me atrevería a hacer lo siguiente a ver si me da tiempo para daros un poco de inspiración para el ejercicio del fin de semana vamos a ver me voy a ir a la base de datos Y en registros 3 Voy a navegar y voy a ver que por ejemplo en algunos pone maos en otros muchos Pone Windows en algunos pondrá iPhone o pondrá Linux no lo creo pero bueno entonces voy a hacer lo siguiente registros tres voy a Search y quiero buscar donde el browser like maos sabes que voy a hacer una sql Select all from registros 3 Select count ID from registros browser like comillas maos esto qué quiere decir pues quiere decir que me va a sacar los registros que han producido los ordenadores de tipo Mac en esa base de datos Vale qué voy a hacer ahora me voy a ir al ejercicio base de datos 3 lo voy a duplicar Ay perdón lo voy a duplicar base de datos cuatro vale Y voy a decir lo siguiente vamos a ver vale Pues mira vamos a ver un segundin vale longaniza hola y hola vale esto es maos esto es performance esto es has cuenta aunque esto da igual pero vale copio pego quito los saltos de línea y ya vale Okay de hecho igual lo puedo ejecutar ya no lo sé vamos a verlo y una super gráfica que dice pam maos pero ahora yo vengo esto lo voy a tirar aquí arriba esto empiezo a quitar espacios que no sirven para nada y ahora copio esto y digo we browser like Windows digo Windows lo puedo hacer en varias peticiones en la base de datos Y ahora quiero iPhone y esto es iPhone Ya sé que me diréis que estoy mezclando churras con merinas Pero en fin yo que sé para hacer un ejercicio ahora quiero Android y no sé vamos a probar a ver qué sale le doy f5 y sale esto lo cual era de esperar evidentemente vale Y es que lo que está haciendo el sistema bueno el ola es para descartar evidentemente lo que está haciendo el sistema es decirme Bueno hay menos gente conectándose con Mac inos que somos yo y dos o tres más hay un montón de gente más conectándose con Windows era de esperar como esta tabla corresponde a una aplicación que se usa sobre todo en pantallas grandes Hay muy poca gente que est que la esté utilizando en Android en iPhone perdón y menos gente todavía que la est utilizando en Android y los de iPhone yo creo que debe ser tableta debe ser iPad realmente Eh me da miedo un poco poner Linux porque muchas muchos muchas firmas de browser de Android pone Linux Vale entonces probablemente dará un falso positivo voy a hacerlo De todas formas porque me cuesta poco hacerlo pero pulso f5 vale Sí de hecho creo que os podéis fijar en que la marca de Linux es apenas un poquito más grande que la de Android Entonces yo creo que será las de Android más alguna conexión que realmente fuera con Linux creo que sería yo mismo probablemente No lo sé entonces bueno Vale pues por ejemplo vale ya tenemos un ejemplo Entonces vamos a ver qué es lo que quiero que hagáis de ejercicio para el fin de semana Pues básicamente lo que quiero es que hagáis esto es decir quiero que hagáis un ejercicio mediante el cual cojáis alguna gráfica de las librerías o sea de la galería de gráficas que tiene esta librería quiero que os conecté con una base de datos y quiero que la petición de la base de datos la convirt en una gráfica sobre todo con el objetivo de que Eh Pues podáis digamos visualizar datos podáis comprobar como podéis visualizar datos de una forma sencilla utilizando la combinación de conexión con base de datos y conversión a gráfica vale preguntas tenéis claro más o menos lo que haríais lo que no haríais o qué tipo de gráfica utilizaría qué me decís acord de lo que os dije el otro día eh A ver yo soy una persona que cuando pongo deberes eh suelo recomendar a los alumnos ese clásico refrán de matar dos pájaros de un tiro esto qué quiere decir a mí me da igual lo que los datos que cojáis para hacer el ejercicio me da como ya os digo completamente igual mi recomendación es si tenéis datos reales si tenéis la base de datos de algún amigo y le vendría bien a ese amigo que le hicierais un análisis datos reales si no yo os puedo recomendar que os vayáis al INE al Instituto Nacional de estadística y ahí pedís lo que sea por ejemplo nombres más frecuentes vale lo mismo que he hecho antes nombres más frecuentes a veces INE nombres más comunes acabas antes Buscar en Google en el INE que en el propio INE entonces dice todos los nombres con frecuencia igual o mayor a 20 personas me lo bajo me lo descargo es una hoja de cálculo en Excel me lo abro con libreoffice Y si os fijáis tengo lo mismo que tenía antes pero sobre la población de Pero sabes qué que no lo sé o sea esto lo podéis utilizar y borrás las primeras filas y lo podéis meter en la base de datos y podéis hacer el ejercicio igual que lo hemos hecho antes pero para averiguar esto ya está INE quiero decir para decirme Cuáles son los nombres más frecuentes ya está el INE pero igual coges la base de datos de un colega y le dices Oye sabes de tus clientes Cuáles son los nombres que más se repiten igual Tu colega te dice hombre pues no lo sé pues me gustaría saberlo entonces lo que os quiero decir es que si no tenéis una base de datos real sobre la que trabajar podéis trabajar sobre la deline pero yo creo porque claro haces una gráfica sobre esto y acabas el ejercicio y dic Bueno y qué pues me da igual pero si haces el ejercicio sobre datos que te importen un poco esos datos probablemente los resultados que tengas pues te llenen más te digamos te sirvan más para cualquier cosa Vale por eso os digo que mi recomendación es que trabajéis con datos reales Pero si por lo que sea no queréis pues Oye os metéis en el INE y tenéis ahí miles de hojas de Excel para hacer ejercicios de Conectar a base de datos y muestras gráficas Bueno hoy hay varias cosas que quiero ver eh vamos a ver algunas cosas nuevas también vamos a estar trabajando con aplicación de cosas que hemos visto en días anteriores por ejemplo para un ejercicio de Machine learning que tenemos pendiente hace unos cuantos días que de hecho lo escribí pero no Hemos llegado a hacerlo porque nos dio tiempo en la clase anterior con lo cual vamos a hacerlo hoy antes de ello retomando la clase por donde la dejamos anteriormente quiero deciros que existe una cosa dentro de la librería de ploteo voy a ir a el curso de python voy a abrir realmente idel y del Uy y del 38 vale voy a abrir últimos archivos vamos a ver aquí vale voy a abrir esto el mamp para acordaos trabajar con base de datos Ok y a continuación lo que voy a hacer es pulsar f5 para comprobar que a ver momento para comprobar que salía la Gráfica con la información que queremos Hola gráfica Dónde estás Qué cosas Ah no perdón esto es que el otro día no sé si lo hicimos en clase o lo hice yo después lo que hice es que en lugar de plot no esto aquí no lo que hice es que utilicé este Comando que es safe fig que lo que hace es en lugar de arme el ploteo por pantalla lo que hace es guardarlo a un archivo jpg o png en el en la misma carpeta donde esté el archivo vale Y ahí básicamente nos encontramos lo mismo que hicimos el otro día pero guardado a un archivo png Eh quiero deciros que eh esta Este cambio en lugar de plot a sa fig lo hice como anticipo de una cosa que vamos a estar trabajando en las próximas sesiones no hoy todavía porque para hoy ya tenemos trabajo pero eh que es el Cómo utilizar eh python En este caso y la librería me sigue sin salir el plot bueno da igual ya aparecerá para eh realizar otros tipos de aplicaciones que no sean aplicaciones de escritorio sino por ejemplo aplicaciones web Y es que en todo momento hasta el momento hemos estado trabajando en aplicaciones de escritorio es decir aplicaciones que se Ejecutan directamente en nuestro escritorio pero quiero que también seáis conscientes de que podemos utilizar el lenguaje de programación python para crear aplicaciones en la web Pero antes de ello antes de continuar con esto eh Quiero enseñaros una utilidad que es el multiple plot es una utilidad que tienen eh las aplicaciones dentro de esta librería para eh Mostrar varias gráficas en una sola V para qué me serviría esto Bueno pues el otro día hicimos proyectos en los que cada proyecto tenía una gráfica Pero si yo quería tener varias gráficas a la vez tenía que abrir varios proyectos a la vez si yo busco por ejemplo control panel de control aplicado a lo que sea control panel analytics por ejemplo Big Data o Data Science me da igual yo encontraré que los paneles de control realmente se parecen mucho a esto son paneles de control donde en una sola ventana yo puedo tener múltiples gráficas a la vez vale puedo poner Big Data puedo poner Data Science vale control panel Pues bueno aquí no me está apareciendo exactamente lo que estoy buscando vale Pero bueno lo que veíamos antes con big datata vale es un paneles de control donde Pues en un solo panel obtengo diferentes había abierto esta diferentes gráfica simplemente lo que quería hacer u espera lo que quería hacer era demostraros Cómo esto es razonablemente sencillo de hacer con la librería que estamos utilizando Así que a continuación lo que voy a hacer es hacer lo siguiente voy a buscar python matplot le multiple plots vale Y ahora voy a buscar algún ejemplo concreto porque hay diferentes formas de maquetar diferentes plots en una misma ventana pero voy a buscar una metodología concreta que trabaja con matrices bidimensionales que creo que es la metodología más sencilla de utilizar y de entender lo digo porque hay una metodología más sencilla por ejemplo que es apilar en vertical y está muy bien y es muy sencilla pero claro cuando quiero algo más complejo cuando quiero algo más que simplemente meter gráficas en vertical me doy cuenta de que eso no me lleva a ninguna parte entonces por eso quiero la de matrices bidimensionales para que podáis ver vale bien Vamos a ver Esto es un single plot vale Y esta por ejemplo es la que no quiero porque si os fijáis aquí lo que está haciendo esto de hecho eh un momento venga un packing o Vale entonces voy a crear un nuevo archivo voy a cargar esta librería voy a bueno Esto lo voy a guardar en curso de python múltiple 1 pero esta no es la que quiero ejecuto Ah muy bien x is not defin vale porque me hará falta vale voy a Esto vale Ok esta es la que quiero vale espera esta es la que quiero ok a ver si todo está bien no x is not Def vale un momento x es ig esto y igual a Esto vale Y creo que he visto que me hacía falta meter npi vale vamos a verlo Qué está pasando por qué no me está mostrando ninguna gráfica Ah muy bien No esto es de antes es la ejecución de antes la última es esta de aquí pero hay algo por lo que no está saliendo Vale entonces voy a cerrar del todo python igual reinicio la máquina un momentín no tendría por qué pero quiero decir que no tendría por qué ser eso pero voy a probar no punto plot y punto show sí Ok Ah vaya vale eh python multiple plots momento y no en principio voy a hacer una cosa su plots lo meto en escritorio Ah Uf este no bueno a ver va Lo voy a abrir Es que este son todas las demos a la vez y claro todas las demos a la vez lo que va a hacer es aquí plt show Esto es lo que decías Vale y ok Ok vale f5 vamos a verlo vale Ok aquí lo tenemos entonces ahí si os estáis fijando aparecen cuatro plots a la vez pero dentro de que aparecen cuatro plots a la vez un momento vale dentro de que aparecen cuatro plots si os fijáis en este caso tengo el set title permitidme cargarme los set titles voy a dejar solo uno y me lo voy a poner comentado para poder recuperarlo más adelante Pero si yo por ejemplo Aquí quisiera ver en lugar de cuatro Quisiera ver nueve u ocho me da igual o sea teniendo en cuenta que es una rejilla evidentemente yo lo que podría hacer es lo siguiente estos cuatro los convierto en ocho y luego evidentemente le pongo un noveno Y entonces hago lo siguiente 00 01 02 esto es como contar en binario pues contar en trinario entonces 10 1 2 20 2 22 y de esta forma yo lo que he hecho Si pulso f5 es crear Eh qué pasa momentín aquí subplots 33 aquí defino el número y entonces ahora fijaos que de esta forma sencilla yo tengo en este caso nueve o sea 3 por 3 nueve plots dentro de un mismo panel con esto lo que os quiero decir es que si yo ahora por ejemplo voy a hacer otra demo y ya paso al ejercicio siguiente porque creo que ya lo pilláis pero si yo quiero hacer por ejemplo 4 por 3 Pues yo vengo aquí 4 por 3 voy a agrupar para que sea más fácil de ver Uy Perdón voy a agrupar tres eh No no realmente no porque esta es la x Entonces sí y ahora 3 0 1 2 3 guardo y si no me equivocado dimensión que creo que no veo que tengo Ah pues mira sí que me he equivocado de Dimensión vaya por Dios Entonces ahora esto es 3,4 me cargo este de aquí copio y copio esto es 01 2 3 01 2 f5 y ahora sí tengo los 4x TR que quería sobre todo eh tened en cuenta que estoy hablando de un panel de control cuando hablo de un panel de control hablo de en un momento dado poder maximizar la aplicación y poder ver las gráficas que necesité de esta forma vale el tema de paneles de control evidentemente es todo un es todo una ciencia de hecho incluso hay empresas que se dedican específicamente a hacer paneles de control para empresas por ejemplo Hay una que se llama Zeus Vision De hecho hay un montón de programas de televisión que usan ese tipo de pantallas vamos a ver en imágenes para ver un poco lo que hacen y hacen estas cosas de aquí vale hacen o sea instalan pantallas en oficinas cuando te digo pantalla es una pantalla que te compras en el carrefur Pero evidentemente ellos lo que trabajan no es el Hardware es el software vale es esta especie de paneles de control donde en un solo panel puedes ver multitud de información que en un momento dado te puede servir para prácticamente lo que quieras entonces desde el punto de vista de del Data Science el Big Data hay una parte del trabajo que es machacar los datos Pero hay otra parte del trabajo que es visualizar la información es decir transformar esa información a algo visual que en algún momento dado puedas analizar de un solo golpe vale la librería tiene soporte para múltiples gráficas es algo que no había comentado pero de hecho en la galería está eh galery De hecho en las primeras entradas de la Galería está aquí Vale entonces por ejemplo en este caso o sea tú lo que estás buscando es algo como esto donde O sea no ya compare lado a lado sino pueda comparar múltiples gráficas en una sola gráfica Entonces sí que efectivamente o sea tenemos el concepto de El subplot para la de arriba y la de abajo pero tenemos también la posibilidad de introducir varias gráficas tenemos varias demostraciones un momento que lo vamos a ver por ejemplo esta sería otra de las demostraciones donde O sea no solo tenemos por qué ver una sola línea en cada una de las gráficas sino que podrás ver que hay un montón de demostraciones donde podemos plotear diferentes series de datos en una misma gráfica evidentemente para su comparación porque en este caso eh estas gráficas están configuradas según Este ejemplo para compartir el eje y lo cual quiere decir que la magnitud es comparable pero claro una cosa es ver una gráfica lado a lado y otra cosa es ver directamente las gráficas en el sitio luego también te recuerdo Ah no un momentín un mín un momentín correcto pero en este caso había por aquí una instrucción que ahora mismo no me acuerdo cuál de estas es que si aquí tú estás viendo 1 0 y men1 y aquí no estás viendo una escala diferente es porque la librería al alinear efectivamente lo que está haciendo es hacer que la escala sea comparable o sea y puede hacerse para desvincular pero o sea no te quiero decir que en cualquier momento siempre es comparable sino que en este ejercicio completo o sea concreto es comparable vale Y eh Y ahora como me has preguntado Esto sí te iba a decir Ya se me ha olvidado lo que te iba a decir pero no ya lo he recordado muchas veces lo que ocurre cuando trabajamos con múltiples gráficas en una misma es que los resultados tienden a confundirse en ese caso cu digo confundirse quiero decir que hay veces que ver varias gráficas Especialmente cuando se superponen en un mismo gráfico eh No puedes ver bien el límite entre una y otra en ese caso quiero decirte vale insisto encontrarás más ejemplos por aquí eh quiero decirte y quiero recordarte que momento visto por ahí eh quiero recordarte que hay una gráfica una familia de gráficas que son las gráficas 3D a ver un momento ya lo sé lo Supongo completamente las gráficas 3D por las personas que sobre todo os dedicáis a trabajar con aquí por ejemplo aquí Esto es lo que te quería enseñar os dedicáis a trabajar con visualización de datos la soléis ver como Un capricho visual vale como digamos I Candy lo que se llama en inglés I Candy que es golosina visual pero que realmente no aporta valor sobre los datos Vale entonces quiero decirte que soy consciente de eso y quiero decirte que estoy plenamente de acuerdo de esto cosa con eso y si te digo esto es precisamente porque hay ocasiones en las que usar gráficos 3D o sea usar la tercera dimensión te viene bien para despegar un poco las gráficas y para poderlas ver mejor tenemos gráficas de barras bidimensionales vaya por Dios ya se me ha ido el cursor un momento tenemos gráficas de Cintas tenemos gráficas de columnas tenemos gráficas de Hill shading que es como que te hace una especie de terreno Vale entonces o sea tenemos una serie de librerías de gráficas que no te estoy diciendo que uses en Sí eso mostrá en pantalla la Sí eh correcto y que pero claro también te digo y esto tú De hecho lo sabrás mejor que yo que Eh sí que hay veces que el trabajo que haces de recopilación de datos y presentación de resultados se hace en un soporte digital interactivo de tal forma que le puedes decir a tu cliente a tu jefe o a quien sea Oye mira mete el ratón encima de la Gráfica y verás que se destaca la que tú quieres ver pero también te digo que hay otras muchas veces en la es que el informe que presentas o lo haces en papel o sea o lo tienes que presentar en papel o en PDF y se pierde esa interactividad o la persona a la que solo presentas es una persona digamos las personas ante las cuales presentas informes suelen ser personas mayores que no tienen tanta pericia para meter un ratón encima de una gráfica o si lo meten se lían con lo cual quiero decirte que soy consciente de lo que tú dices Mira yo por ejemplo eh para que te hagas la idea yo soy muy usuario de la aplicación de Google trends entonces eh yo no sé Dime algo que te gustaría Buscar Mira sabes que el típico coronavirus entonces eh Por ejemplo pues yo busco coronavirus Busco en todo el mundo y por ejemplo no sé virus así de repente vale de repente virus y Aparecen las dos gráficas Entonces yo soy consciente de lo que tú dices de que hay gráficas interactivas que tú vas pasando el ratón y te hacen un highlight y pinchas y te dejan un marcador y todo esto O sea y aparte esto que estás viendo aquí realmente que lo sepas para que tengas la información o sea los gráficos que usa Google trends para su propia aplicación son los Google charts que creo que en alguna ocasión los he mostrado en pantalla y yo los Google charts por ejemplo en este curso no os los puedo enseñar porque es una librería para javascript pero en los cursos que doy de javascript enseño esta librería y Fíjate lo que tú dices que te acercas y te saca el dato y todo eso o sea que estoy de acuerdo contigo en el sentido de que existen estas gráficas y son interactivas y todo esto pero claro pero no siempre se pueden aplicar para cualquier presentación de datos Vale entonces dicho esto