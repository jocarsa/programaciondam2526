vale Eh bueno esta mañana estaba por aquí haciendo cosas entre esta mañana y ayer por la noche por cierto por eso me puse la letra más pequeña vale Te cuento eh dentro del servidor ayer nos dejamos esto es decir ayer eh yo Por una parte empecé a publicar las aplicaciones de eh jarsa lace que es la parte inicial hok carsa Dark Slate Blue que es el panel de control ayer al final del todo pusimos hocar automato o tomato o como se pronuncie y a continuación lo que ha ocurrido es que en la carpeta all days tengo una carpeta de momento llamada Go y aquí tengo un montón de aplicaciones no deberían estar ahí es decir lo que debo hacer es a las aplicaciones crearles subdominios y empezar a colocar cada aplicación en el subdominio que le corresponde Vale ahora iremos a eso lo que quiero decirte con esto porque Fran tú dirás Sí pero me estás contando tu película pero eso no responde a mi pregunta no te cuento las aplicaciones que tengo aquí y ahora viene la parte donde respondo tu pregunta las aplicaciones que tengo aquí usan todas estas pequeñas aplicaciones usan bases de datos en formato sqlite con lo cual esta mañana me he encontrado con el mismo problema y es que esta carpeta de aquí Me permitía leer pero no me permitía escribir Vale entonces la solución es que si la carpeta hija tiene un permiso permisivo pero la carpeta madre no tiene un permiso permisivo en ese caso la carpeta hija no te va a dejar Guardar imágenes lo cual quiere decir no te digo con 777 pero probablemente si a la carpeta hija le asignas el permiso 755 y a la carpeta madre el 755 ahí Probablemente sí que te dejará a continuación además de decirte eso tu pregunta la verdad es que me viene de madre para eh explicaros de paso un concepto hoy de entrada os digo que la clase no va a ser tan densa tan dura como la de ayer vale con lo cual este concepto que voy a explicar ahora es un poquillo Esto no es un poquillo complejo vale pero me viene muy bien explicarlo ahora porque es la respuesta una de las respuestas a lo que me acabas de preguntar y ahora luego un poco para hacer lo que sería el planning de hoy Vale pues eh Ahora luego vamos a trabajar un rato sobre servidor un par de horas luego tenéis inglés luego en PR prama volvemos a ha más y luego en la última hora volvemos a tema servidor vale Así un poco para que la clase la tarde de hoy no sea tan densa como la de ayer la clase de ayer la tarde de ayer fue densa pero fue necesaria creo bien entonces nosotros hasta el momento hemos estado trabajando un momentín voy a Acceder al servidor eh servidor a ver un segund espera tú aquí vale servidor aquí vale en el servidor voy a decir sudo Root Ar y la IP no me acuerdo pero la tengo por aquí así y 217 160 2 28 99 eh pongo la contraseña si te fijas en mi caso a ver pegar vale un segund creo que la ha pegado dos veces Opa a ver Uy Hola qué pasa a ver S Ah no no Perdón perdón Caray no no es sudo no es ssh caray Okay Hola Qué raro que no responda Porque además estoy aquí conectado eh Hola espera voy a volver a arrancar Ah ok Ah pues por eso es 160 totalmente correcto mi miopía me ha jugado una mala pasada OK ahora sí vale entonces pego Ahora sí venga muy bien entonces hay un concepto que es el concepto de los permisos de archivo que es el ch mod y hay otro concepto que es quién pertenece el ch own A qué usuario pertenece un archivo o una carpeta para ello me voy a ir a cdb cdw CD html voy a hacer esto más grande Vale y a continuación lo que voy a hacer por ejemplo es lsl ls si hago ls me salen directamente las carpetas pero si hago lsl aparece un listado más completo más humano más entendible Y en este caso y en este caso vamos a ver que los permisos que tú conoces como Exacto eso es lo que voy a hacer efectivamente que es cambiar el ch own y decirle que sea Apache que es el propietario pero para entender Qué es el propietario te voy a decir qué Esta es la cuestión verás hasta el momento hemos estado hablando de permisos 777 o de permisos 755 o de 644 o de lo que sea pero sin embargo Yo vengo por aquí y me encuentro un conjunto de momentín me encuentro un conjunto de D en el caso de directorio y nada en el caso de archivos y luego un conjunto de e de rwx rw x rwx Por ejemplo yo a la carpeta databases mal hecho por mi parte vale le he puesto un 777 quiere decir que el usuario creador puede read puede escribir puede write y puede execute el usuario e el usuario propietario de grupo ahora miramos en la Wikipedia la tabla puede leer escribir y ejecutar y el grupo público puede leer escribir y ejecutar si os fijáis esta carpeta de aquí tiene los permisos 755 Eso quiere decir que el propietario puede leer escribir y ejecutar pero el grupo Este es el cinco vale Este es el código 5 puede leer puede ejecutar pero aquí está tu problema No puede escribir y el perdon y el público el usuario público puede leer puede ejecutar pero no puede escribir yo qué he hecho esta mañana pues yo esta mañana me he encontrado con que esta carpeta databases me pasaba lo mismo que tú podía leerla pero no podía escribirla y he hecho una cosa que no es Guay vale que es hacer Pues un ch mod 777 a una carpeta de bases de datos sqlite que cosa que no Mola nada vale No Mola nada porque pues 777 quiere decir que cualquier usuario otra cosa es que en el servidor no hay otros usuarios pero si lo subiera cualquier usuario podría escribir cosa que como ya te digo no es divertida Claro si yo pongo ch mod sudo ch mod 755 databases sudo chd mod 755 - r recursivo para dentro o sea me lo aplicas a la carpeta y a los archivos contenidos en databases hago un ls men l Y entonces fíjate que databases ahora ya no tiene el 777 tiene el 755 Pero entonces me encuentro con un problema me encuentro con un problema y es que por ejemplo me voy a la aplicación de jocar.com.mx documento en clase le doy a crear pero no se crea si te has fijado se supone si estoy viendo esto es porque está leyendo la base de datos todo esto está en la base de datos pero he creado un nuevo documento el programa no da error que es lo más confuso Vale pero no escribe nada Solo lee pero no escribe nada Por tanto la solución que yo implementado esta mañana la he hecho en plan para hacerlo rápido pero no es Guay no es una solución guay Así que la solución correcta Efectivamente es cambiar el ch own es decir A quién pertenece Quién es el propietario del archivo Porque si yo José Vicente lo que hago es Modificar un archivo Yo soy el propietario pero claro cuando hago una aplicación web y todo lo que ejecuto lo ejecuto a través de Apache quien está ejecutando la modificación no es José Vicente Cuando digo José Vicente quiero decir Root vale en este caso sino que es Apache antes de hacer el chown eh códigos eh permisos carpeta Linux o archivo Linux aquí Vale entonces hay una tabla Esta es muy directa vale porque diréis pero 777 A qué corresponde vale rwx corresponde a la letra s puedes leer puedes escribir pero no puedes ejecutar corresponde al número seis ha dicho letra si número seis puedes escribir no puedes eh Perdona puedes leer no puedes escribir Puedes ejecutar corresponde a la letra cco puedes leer no puedes escribir no puedes ejecutar corresponde a la al número cuatro no puedes hacer nada de nada corresponde al número cero vale un poco porque diréis ya pero es que me estás haciendo 777 pero luego me sacas otro formato diferente de permisos y cuál es la correspondencia pues simplemente vale Simplemente hay un montón de páginas donde buscáis esa información y aparecen tablitas en las cuales vale os indica Cuál es la correspondencia entre cada uno de los códigos bien pero yo a continuación lo que voy a hacer es decirle al sistema lo más correcto para no tener que hacer 777 no no vamos a ver estamos hablando Fran de 777 solo para usuarios dentro del servidor lo que pasa es que dentro de los mútiples ataques que puede sufrir un servidor un tipo de ataque que es el escalado de permisos consiste en que un usuario se cuele en el servidor aunque sea con un usuario invitado Y a partir de ahí intente ejecutar cosas que un usuario invitado no podría hacer vale por tanto no estamos hablando de persona normal en su casa navegando desde la web pero sí que estamos hablando de que los permisos dentro de un servidor Y más si estamos hablando de archivos críticos como son bases de datos pues no deben tener 777 vale En definitiva dentro de seguridad informática hay una directriz de seguridad informática que es el mínimo permiso posible vale Y es darle a las cosas el permiso más restrictivo que se pueda dar el mínimo permiso que se le pueda dar bien entonces eh ch own folder to Apache on ubuntu server la solución vale ch mod es para modificar permisos ch own es para definir Quién es el propietario de esa carpeta Vale entonces el usuario es W datata vale Así que a continuación Así que a continuación hago esto vamos a ver vale tanto al uso como al grupo vdata Vamos allá momento y aquí y digo pego sud sudo ch un r databases esto lo voy a poner dónde estás instalación servidor vale lo voy a poner en la instalación servidor esto es 1517 Y esto es databases esto técnicamente es bar w html databases todo esto fue ayer día 2021 eh ayer era 8 vale con lo cual llevamos un log de servidor Ajá okay Y hoy es día 9 Vale entonces le damos Y si ahora hacemos lsl vemos como las carpetas pertenecen al Root pero la carpeta databases pertenece al grupo W Data y al usuario W Data mientras que insisto el resto de carpetas pertenecen al de momento al usuario root también las podemos cambiar a vdata pero no es algo urgente para ahora mismo esto quiere decir en mi caso evidentemente yo lo he hecho sobre databases en tu caso Fran Tú lo harías sobre el proyecto olace vale o sobre la carpeta static de all así que de hecho yo Probablemente lo tendré que hacer porque no he escrito nada todavía sobre all l pero Probablemente lo tendré que hacer o sea que vale que probablemente yo acabe haciéndolo también entonces a partir de aquí a partir de aquí eh yo ahora a continuación me voy a Steel Blue hago otro documento de prueba le doy a crear y ahora sí me aparece otro documento de prueba pero habiéndole quitado el 777 a la carpeta y habiéndole puesto un 755 vale De hecho otra cosa que te diría es que técnicamente incluso no haría falta ni que le pusiera un 755 porque yo creo que con un 644 vamos a verlo momento con un 644 eh dónde estás aquí Es más Sí vale el No pues voy a hacer un 644 el propietario puede leer y escribir lo digo porque mi carpeta databases tiene bases de datos pero no tiene ningún archivo ejecutable luego para qué le asigno el si no voy a si no debería utilizar siete vale correcto eso es lo que te iba a decir si una carpeta static guarda archivos imágenes bases de datos pero no archivos ejecutables ahora te cuento una cosa que me pasó hace años eh Pues no debería tener esos permisos vale con lo cual Pues yo vengo por aquí y digo sudo ch Mode databases con lo cual ahora vuelvo a hacer lsl Y ahora fíjate que el usuario puede read write pero no puede execute y el resto de usuarios solo pueden read pero no pueden ni write ni execute y yo ahora vengo a continuación y compruebo que todo sigue funcionando correctamente el documento de prueba me lo voy a cargar acepto e database connection enable vale Ok ahí me he pasado Oye pues sí pues teóricamente sí que podría pero parece que no Ah mira no no pues vamos a ver vamos a darle un 744 vamos a verlo ahora sí otro documento de prueba vale Y fíjate que ahí al parecer sí que necesita que la base de datos cuente como ejecutable okay No pasa nada o sea le aplico el mínimo permiso necesario para que funcione que incluso le podría decir que al resto de usuarios nada O sea no pueden ni leer ni escribir ni lo que sea Pero bueno da igual vamos a dejarlo así de momento hace años eh tenía en una aplicación un formulario en ese formulario se podían subir archivos Y entonces un día un alumno esto igual os Suena algo que os conté hace poco pero no o sea esto que os voy a contar no tiene que ver con lo que os conté hace poco es una cosa que me pasó años antes y eh llega un alumno y me dice Oye es que he entrado en tu servidor y tienes Taca tienes esto en tu servidor O sea me lo dijo como demostración de que efectivamente había entrado en mi servidor pero no Había tocado nada y le dije pues sí tienes razón eso es lo que está en mi servidor cómo lo sabes y entonces me dijo Mira tú has creado un formulario en el cual nos permite Subir imágenes pero yo no he subido una imagen yo he subido a tu servidor yo he subido un archivo php porque yo en el formulario html de envío no estaba controlando que solo se pudieran Subir imágenes y en el Script PH del servidor tampoco estaba controlando que lo que el archivo subido solo pudiera tener extensión jpg no hacía ningún tipo de control no Entonces ese alumno subió a través del formulario de subida un archivo php empezó a probar rutas hasta que encontró la ruta en la cual estaba ese archivo php y lo ejecutó Porque esa carpeta otro de los fallos que yo había tenido esa carpeta tenía permisos de ejecución no solo de lectura y de escritura sino también de ejecución con lo cual ese archivo php estaba en el servidor Me dijo Mira la carpeta tal y verás que he subido un archivo php vale ese archivo php básicamente lo que hacía era Dame un listado de los archivos del servidor ya está así de sencillo o sea algo que pueda hacer cualquier archivo php Así que nada y nada el alumno me lo dijo ya te digo eh o sea me escribió un correo o sea identificándose y tal Y me dijo eso y empezé a hablar con él O sea no en plan hacker de secuestro servidor sino Oye que sepas que he probado Esto me ha funcionado con lo cual te aviso para que protejas el servidor sabes o sea todo super bien eh pero claro la cuestión está en que pues yo en la vida se me hubiera ocurrido porque yo siempre os Insisto que soy la persona menos hacker del mundo que si yo le pongo un formulario a un alumno en la vida se me ocurre que alguien me va a subir un archivo php con el cual luego cuando lo ejecute me puede ver el contenido del disco duro pero lo importante es que al final nos demos cuenta que hay gente que sí que se dedica a eso como siempre os digo qué es lo que hay en la mente de esas personas no tengo ni idea No lo sé y yo creo que me morir sin saberlo pero existen esas personas vale con lo cual Pues se trata que dentro de lo posible dentro de la medida de lo razonable pues tomemos medidas para proteger nuestro servidor y para que la información pues esté lo más protegida y lo más cerrada posible bien una vez que hemos hablado de esto del ch own en el resto de esta parte de la clase de hoy lo que quiero es simplemente hacer un repaso de lo que hicimos ayer hacer un recordatorio de lo que hicimos ayer y publicar alguna aplicación más es decir publicar la aplicación de hok carsa.com bargo baram quiero publicarla como un subdominio del servidor Pero antes de eso vamos a hacer un repaso Eh bueno también acordaos que el servidor cuando acabáis de gestionarlo es recomendable hacer un logout para salir del servidor y entrar en vuestro salir a vuestro ordenador de vuelta vale siempre podemos volver a recargar bien eh vamos a ver y cosas que os quiero contar en primer lugar voy a abrir in escape vamos a hablar del esquema sagrado vamos a tener la vista de este esquema y vamos a hablar un poco de lo que hicimos ayer como os digo muy importante el hecho de que cuando empecéis a instalar el servidor llevéis un log vale tengáis una idea de qué es lo que se ha hecho en el servidor un servidor nunca se sabe qué es lo que va a pasar con él quiero decir con esto En este caso este servidor es mío Vale y lo uso para mi propio uso personal vale uso personal profesional pero claro cuando tú instalas un servidor cuando es para un cliente o para cuando es para una empresa tú no sabes cuándo lo vas a llevar tú cuándo por lo que sea te vas a ir de esa empresa y ese servidor lo vas a tener que pasar a alguien y cuando se lo pases a alguien esa persona igual los instalado dos años antes te dice Okay En qué estado me das el servidor qué tiene el servidor y tú dices pues ni idea Porque llevo aquí 2s años trabajando con el servidor y Yo qué sé vale con lo cual lo ideal es que llevéis un log que al principio es un log muy denso y luego ya con el tiempo pues vas apuntando cosas cada poco tiempo vale porque pues no ocurren cosas en el servidor todos los días pero es importante que llevéis este registro que incluso para incluso copiar comandos y tal os viene bien para vosotros mismos vale para más adelante bien en primer lugar por tanto qué hicimos Vale pues que hicimos Mira sabes que te digo me lo voy a apuntar en Slate Blue vale repaso operaciones servidor dam vale Y edito el archivo bien Entonces qué es lo que hicimos en primer lugar instalamos esto técnicamente lo puedo hacer con la herramienta de lista ordenada que tengo instalamos una imagen de disco de ubuntu en este caso como es un vps a través de ionos vale No lo hicimos nosotros a continuación una vez que instalamos una imagen de disco de ubuntu lo que hicimos fue acceder Y empezamos a instalar Por una parte Apache 2 por otra parte necesitamos instalar php 8.3 o lo que fuera por otra parte necesitamos instalar php sqlite 3 y conforme vayamos instalando cosas es posible que necesitemos más complementos de php instalamos mysql server instalamos Bueno python ya estaba instalamos python 3 pip instalamos pip vale instalamos En definitiva herramientas que nos sirvieron programas que nos sirvieron para servir información a continuación instalamos git ya estaba instalado realmente vale pero le di a instalar por si acaso una vez que hicimos esto migramos aplicaciones donde un método posible esto es un tema que me interesa dejar muy claro en la clase de hoy el método uno que consiste en migrar a través de ftp vale Y el método uno es perfectamente válido si alguien me dice Es que no quiero el método dos no quiero complicarme con github No pasa nada puedes hacerlo a través de ftp y ya está todos lo hemos hecho así toda la vida no ha habido ningún problema vale no ha habido ningún problema pues de vez en cuando te preguntas ostras espérate la versión más reciente Cuál es la que está en el servidor la que tengo en mi equipo pues ya está lo miras lo compruebas asunto solucionado quiero decir que nadie se muere comprobando Cuál es la versión más reciente Vale ahora Bien también migramos aplicaciones con el método dos que es implantar a través de github de tal forma que las modificaciones las hago en mi equipo de desarrollo en este caso en este ordenador portátil y más adelante hago un Push hacia github y desde el servidor hago un Pull y ya está Vale y es otra forma de implantar aplicaciones sabéis que nos costó mucho al principio de configurar por tema de la llave pública e ir al panel de github y dar de alta la llave Pública para que me dé permisos para clonar y todo eso pero una vez que está hecho ya podemos empezar a disfrutar y disfrutar vale quiero decir que a nadie le voy a obligar a que lo haga a través de giap pero sí que os recomiendo que lo probéis y veréis que al principio es doloroso pero una vez que lo tiis configurado Yo creo que es mejor vale hacer Push desde porque es que encima cada comit te guarda la historia y lo tienes en github y puedes hacer un rollback si quieres vale Si en algún caso lanza producción y funciona mal puedo hacer rollback a la versión anterior Mola mogollón vale Ya os digo Mola mogollón bueno por supuesto eh creamos bases de datos en mysql eh importamos las bases de datos necesarias en nuestro caso old l vale de momento únicamente más adelante migrar remos otras cosas a partir de aquí una vez que primero instalamos aplicaciones a continuación eh empezamos a implantar el software a partir de aquí configuramos el equipo Cómo configuramos el equipo Bueno pues configuramos el equipo Por una parte eh configuramos ssl En lugar de Http ssl es https vale el candadito que comentábamos ayer donde qué hicimos ayer Pues el proveedor yonos en mi caso me da las claves para instalar el ssl en el servidor subo las claves al servidor creo un virtual Host y eh le introduzco las claves vale por tanto los pasos son esos primero en el panel de control del proveedor el proveedor te debe dar las claves si no puedes hacer nada Solo el proveedor te las puede dar segundo subes las claves al servidor voy a guardar Por si acaso subes las claves al servidor y después introduces las claves dentro del virtual Host Y a partir de aquí de forma completamente opcional yo en este caso en este servidor no solo voy a instalar una aplicación Voy a instalar un montón de aplicaciones ayer visteis como instalé tres vale instalé old l que podríamos considerar que es la aplicación principal y por tanto es la que la gente debe ver cuando entre al servidor pero luego instalé eh ostias estoy tonto porque he hecho una cosa que no debería haber hecho Bueno Claro porque me he saltado el tomato Vale ahora os cuento una cosa que acabo de hacer mal pero Vale entonces es el servidor subo las claves del servidor creo un virtual Host introduzco las claves vale Y ahora a continuación y a continuación en el caso de que tengas varios subdominios introduces archivos de configuración virtual Host para cada una de las aplicaciones eh recomendado que tu ssl sea wildcard si tu certificado ssl contratado es wildcard quiere decir que ese mismo certificado te sirve para todos los subdominios y si no lo es pues en ese caso tienes que pillarte un certificado para cada subdominio lo cual puede ser un rollo dependiendo de Cuántos subdominios tengas pero en mi caso está previsto que como ahora veréis y como iréis viendo a lo largo de los días pues cada aplicación que voy a hacer quiero que esté en su propio subdominio dentro del servidor principal vale Esto es lo que estuvimos haciendo ayer la razón por la cual os digo que la he cagado Ah y he cerrado Ah no menos mal vale va a ver si puedo hacer claro es que yo he editado el tomato directamente he hecho una mejora en el tomato Ah a ver sí Vale pero no vale vamos a ver un momentín porque el tomato veis que tengo la costumbre de editar las cosas directamente en el servidor ahora os cuento Por qué Ah pero no debería habber hecho eso así que me voy a hacer una copia de seguridad del tomato me voy a hacer una copia de seguridad del tomato para ello backup vale tomato me voy a hacer una copia de seguridad del tomato vale Okay Uy Ah muy bien Espera mín que está ahora vale a continuación voy a entrar dentro del servidor momentín A ver es ssh Root @ 217 1660 Ah mira me ha pasado otra vez 160 2289 vale Yes la contraseña la tenía yo por aquí la he visto antes me acuerdo dónde está estará por aquí vale me voy a ir al tomato fb bar W html voy a hacer un Pull y aquí es donde la cosa se va a complicar porque ahora el programa me dirá cuidado los cambios no coinciden ahí voy a tener un problema que me he buscado yo mismo pero bueno vamos a ver se de jarsa tomato vale voy a hacer un Pull desde el desde github Uy pas phas vale sí okay pass venga al up to date Vale ahora me voy a ir a hedit en hedit me voy a ir a marcadores me voy a ir a html me voy a ir a jocars tomato me voy a ir a index php HM Ah mira qué bien vale Esto está Guay menos mal okay Ah mira mira vale menos mal Vale pues voy a hacer así voy a hacer así okay Ahora el tomato de aquí lo voy a pegar aquí vale Y ahora Aquí voy a poner un espacio con lo cual en github lo que estoy haciendo es restaurar vale restaurar la versión tomato Index adelante y en el python tomato Index adelante dónde estás aquí modificación ligera en el archivo python Vale ahora en el servidor ahora en el servidor voy a hacer un Pull Y si todo va bien María con la frase te podías acordar Pero bueno da igual Ok Vale ahora sí Y ahora los dos cambios que yo quiero hacer veis Mirad atención me voy a tomato vale introduzco momentín esto falla No pasa nada vale ahora os cuento por qué pero yo quiero tener arriba una cabecera sin embargo lo que he hecho lo que voy a hacer ahora a ver hedit vale salgo de aquí me voy al sistema de archivos vale me abro Index php me abro a tomato ahora a continuación de aquí me voy a la carpeta personal no al escritorio me voy a tomato me abro el Index php Y el tomato aplico dos mejoras copio y pego y copio y pego en estas dos mejoras con estas dos mejoras si ahora cargo el tomato en mi ordenador espérate jarsa Vale tengo una cabecera super guay tengo el botón de cerrar sesión pero en el servidor Perdón en el servidor no tengo esa cera super guay está en mi ordenador he hecho una mejora en mi ordenador pero la quiero en el servidor Así que desde mi ordenador lo que he hecho es lo que hago es mejoras para crear una cabecera commit to Main Push origin a continuación me voy al servidor hago un Pull tengo el resumen de los cambios me voy a ahora estoy en tomato hocar comom recargo y ahí están los cambios Vale entonces La idea es que utilizando github como intermediario podemos publicar desde nuestro entorno de desarrollo a github y desde github planchar hacer un Pull estirar la última versión hacia el servidor Linux es decir hacia el servidor de producción además Insisto que otra ventaja es que me voy a github.com bar jarsa y me voy a tomato y si me voy a tomato me voy a comits y en un momento dado tengo un histórico de todo lo que he hecho cada uno de los comits tiene su propio Hash y con el Hash me Sería posible si hiciera falta Volver atrás en el tiempo y en el caso de que al implantar algo en producción la cague que puede pasar Vale pues lo puedo recuperar porque tengo los comits anteriores vale arreglo una cosa y ahora os cuento una cosa con respecto a los comits y continuamos eh Creo que arreglando lo del este arreglando la cabecera creo que se me ha fastidiado Esto vale con lo cual voy a hacer una mejora el login container no sé por qué A ver margin auto vale No sé por qué se me ha fastidiado Entonces vamos a ver me voy aquí esto es Okay vale Y esto es no esto fuera Vale ahora esto estoy en barw html jocars automato me vengo por aquí y en el login container me voy al logen container y digo margin auto recargo y tengo margin auto pero quiero más porque a continuación yo digo no pero Espérate porque en el login container estoy haciendo mejoras en el login container Ahora cuando lo encuentre Aquí estás vale quiero img src vamos a ver sí s ahora subamos https jara.com bar static barra logo bar jocars gu tomato svg y aquí voy a poner pues h1 y jarsa tomato vamos a verlo vamos a ver el local Host Ok Mola un poco bueno a ver y si cojo el login container y le digo que tenga 400 Vale pues le voy a decir que login container with 400 y texaline Center OK ahora Mola más vale Así que tengo una mejora en local pero no tengo la mejora en el servidor Así que lo que voy a hacer a continuación es mejora corporativa en el login le doy a commit to Main en el servidor sigue sin estar pero en el servidor hago un Pull pongo la contraseña me bajo las novedades desde el servidor desde github Perdón al servidor y ya tengo la mejora aplicada en la aplicación Vale entonces Fran vamos a por ello vamos a ver como os digo y quiero dejarlo bien claro vale en lo que estaba apuntando aquí no os voy a obligar a que lo hagáis a través de github Entonces yo os enseño que se puede yo os enseño que se puede de una forma y de otra porque entiendo lo que dices de que en principio puede parecer que es un lío editar los archivos en local Vale entonces tú fíjate y Exacto vale la última frase que has puesto yo esta mañana como tengo el chip vale de editar lo que se llama editar en caliente o editar en producción vale Yo tengo ese chip por qué Pues porque es mi servidor y porque es mi aplicación y porque sé que yo tengo los esto es muy camic vale Pero yo sé que tengo los recursos y el conocimiento para arreglar cualquier problema que se dé con lo cual yo desde siempre lo que he hecho es en aplicaciones que yo he programado y aplicaciones que yo controlo editar en caliente y de hecho esta mañana como ya te digo he estado un ratito trabajando sobre tomato y se me ha dio la pinza y lo he editado en caliente vale pero claro qué ocurre que como siempre os digo una cosa es como yo hago las cosas y Fran yo para mí las hago así pero otra cosa es cuando vengo a una clase y digo No espérate no puedo enseñarles mis malas costumbres a los alumnos sino que tengo que enseñarles a hacer la cosas bien vale no os oculto en ningún momento que tengo mis manías y tengo mis formas de hacer las cosas que a veces son mejores y a veces son peores pero a la vez os digo pero a vosotros os tengo que enseñar a hacerlo bien vale os tengo que enseñar a hacerlo lo más bien y lo más limpio posible Entonces con todo esto Fran al final lo que te digo es Oye Juan Palomo yo me lo guiso yo me lo como es mi servidor son mis aplicaciones es mi código edito en caliente porque esto de editar en local y luego subir a producción es innecesario pero de la misma forma Fran te digo que en el futuro es posible que tengáis que trabajar sobre un servidor que no es vuestro sobre código que puede ser vuestro Puede que no sea vuestro podéis tener que trabajar en equipo podéis tener que sincronizar un servidor con varias personas y cuando eso ocurre eso de editar en caliente pues puede que en la empresa te digan No aquí no puedes hacer eso aquí tienes que trabajar en equipo de rollo incluso igual depende del equipo en el que te integres pues primero lo implantas en github de github lo implanta una persona responsable del proyecto y solo cuando esa persona lo ha aprobado y le funciona en ese caso hay un pase a producción Vale cuando ese momento llegue pues yo os tengo que haber enseñado Cómo se hace eso Hay muchas formas de hacerlo yo en este caso estoy enseñando una forma que es utilizando github como intermediario pero no os puedo a hacerlo todo en caliente porque un día cuando entréis en una empresa os pueden llamar la atención y os Pueden decir Oye es que eso en un entorno donde hay un equipo y hay un montón de usuarios usando la aplicación y todo eso pues no se puede hacer vale No se puede hacer o no se debe hacer como poderse se puede pero no se debe de hecho Mirad meme pasar a producción viernes Hay un montón de memes sobre eso vale Y entonces por ejemplo vale esto de los viernes se sale a producción y lo sabes vale Qué quiere decir los viernes aale producción Vale pues eso quiere decir que el viernes es el último día que tendrías que usar para pasar a producción Por qué Porque tienes que asumir que cuando pases algo a producción pueden ocurrir errores van a ocurrir errores en mi caso no están ocurriendo porque son implantaciones muy sencillitas Pero conforme pasen los días y las semanas veréis que pues algún error podrá ocurrir de hecho ayer visteis como en la primera implantación hubieron errores vale el día ideal para pasar la producción es un lunes porque así sabes que si hay un error tienes de entrada todo el lunes para arreglarlo y si el lunes no puedes sabes que tienes el martes y así pero qué ocurre que los project managers los viernes parece que les pica el culo vale Y quieren subir cosas a producción quieren un poco cerrar la semana haciendo un informe de que esa semana se han hecho cosas y se han subido a producción Pero qué ocurre Pues que si subes algo a producción un viernes antes de irte a casa pero ocurren errores ya no te puedes ir a casa porque hasta que no se reen los errores no te puedes ir a casa vale por tanto Hay un montón de memes de pasar a producción vale Cómo arruinar un fin de semana pues el viernes hacemos un deploy no porque sabes que pueden ocurrir errores vale por tanto como os digo lo ideal es nunca pasar a producción un viernes con lo cual diréis Bueno pues ya está pues no pases esa producción viernes problema solucionado y no hacen falta los memes si Existen los memes es porque hay gente que no es programadora que en la empresa te puede decir Oye antes de que acabe la semana hay que hacer un deploy porque como esa persona no va a tener que arreglarlo a esa persona se la suda solo quiere que cuando el jefe de la empresa le pregunte a esa persona project manager el vies a mediodía Oye qué se ha hecho esta semana pues esa persona quiere poder entregar un informe y decir se ha hecho esto y está subido a producción ya está Vale entonces pues eso eh Y luego a lo largo de estas semanas Pues efectivamente eh os enseñaré Pues todo esto que comento de Pues el hacer una rama eh fusionarlo con el Main eh si la cagas en producción y de entrada no encuentras el error o has encontrado el error y sabes que ese error te va a costar un buen rato de arreglar Pues de momento puedes hacer un rollback De hecho no solo puedes hacer un rollback a la última versión puedes hacer un rollback a la versión que te dé la gana de github entonces por eso ya os digo que mi misión como profesores es deciros Oye esto existe tiene ventajas probarlo si ahora mismo no lo utilizáis no pasa nada no tengo ningún problema pero por lo menos quiero saber que cuando vayáis a las empresas y en una empresa te digan Oye tal Pues claro No quiero ni que un alumno mía mío diga Oye no sé qué es eso que me estás diciendo ni que la empresa me llame a mí como tutor y me diga Oye que tu alumno no sabe trabajar con un repositorio y trabajar en desarrollo y pasar a producción Es que le estoy explicando esto y no saben de qué estoy hablando vale que siempre ocurre que envío algún alumno y alumno dice en la empresa que no lo sabe y yo llego a la empresa le digo Mira si quieres te enseño los vídeos donde yo al alumno se lo he explicado que luego el alumno no lo ha entendido fantástico Pero yo lo explicado en clase Vale entonces pues eso bien por lo menos probarlo ya os digo por lo menos que os funcione y luego que lo utilicéis en producción pues ya es otra cosa ya os digo que eh yo este servidor lo estoy montando Por una parte para mí es un servidor real es un servidor de verdad Pero lo estoy montando en modo alumno vale No en modo Cómo haría yo las cosas Si no estuviera grabando una clase y no estuviera enseñando Cómo hay que hacer las cosas y vosotros al final pues lo que comentas Fran en este último mensaje vosotros haréis lo mismo vale Cuando haces algo para ti y sabes lo que estás haciendo Y sabes que no vas a fallar y sabes que si fallas lo arreglará pues lo editará en caliente y cuando te metas en una empresa y digas Espérate que aquí hay gente que aquí hay un equipo que aquí hay un protocolo Que aquí hay una serie de cuestiones pues ya pues se hace de otra forma vale bien vamos a continuar y en esta segunda parte de la clase lo que quiero hacer es enterar sobre el proceso que hicimos ayer vale refrescar el proceso de publicar una nueva aplicación así que a continuación Mirad yo lo que voy a hacer en este caso es que dentro de la carpeta vamos a verlo ves Mira Fran yo lo tengo mal vale Yo dentro de old lce que era la antigua web de jarsa dentro de old l yo tengo una carpeta llamada Go y dentro de go tengo un montón de aplicaciones pero es que espérate Ah No espera no está aquí pero es que dentro de go anoche me hice una mega copia de seguridad dentro de go dentro de dónde estás dentro de go eh copia de seguridad backup servidor No yo no es completo vale dentro de la carpeta Go tengo una carpeta de m archivado y dentro de archivado tengo ahí la tira de cosas Vale tengo ahí la tira de proyect y mini proyectos y tengo un montón de cosas super cutre super mal es decir no debe estar así la carpeta de jocars all solo tiene que tener los datos de all no tiene que tener dentro una subcarpeta con un montón mil de cosas más vale Así que por ejemplo en vestro caso pues la aplicación de dam que por cierto ahora le tenemos que poner un color pues está como subcarpeta dentro de la carpeta Go dentro de hok carsa on l mal vale está mal Así que vamos a hacer que esté mejor para ello en primer lugar dónde estás Eh momentín caray Chrome no lo veo aquí vale para ello en primer lugar lo que quiero es que elijáis un color así que elegid un color el que queráis coged el color que queráis alguien vea Algún color que le mole y que no tenga pillado vale porque tengo un montón de colores ya pillados pero elegid Algún color medium se Green vale perfecto ese me ha molado a ver medium se Green vamos a por ello bien pues lo que voy a hacer en este caso es que me voy a ir a eh ir a github me voy a ir a repositorios me voy a ir a eh jocars Perdón medium sig Green hoc carsa medium sig Green vale me lo convertirá esto voy a ponerlo en minúsculas Aunque el nombre del color tiene mayúsculas vale Med dio un segreen en este caso como este repositorio va a tener la información de las clases no quiero que esté público en github vale por tanto voy a hacerlo privado read me vale y ya está OK vale Y voy a poner aquí la aplicación de dam bien create repository vale Ahora aquí en jarsa medium sig Green voy a la aplicación dam jocars medium Hola Ah perdón antes la tengo que clonar clono medium si Green Por cierto también tengo que actualizar la lista de colores medium sig Green medium sigen aplicación dam vale Okay medium seen vale Y ahora en medium seen voy a subir todo esto importante que hay archivos de python Vale ahora veremos bien okay claro como hay un montón de miniaturas que técnicamente no se están usando pero vale y hay un montón de archivos de texto pues a ver un momento un segundo están pasando los archivos de texto claro ahora al pasar esta aplicación a un vps en lugar de tener que ejecutar yo manualmente este archivo python lo puedo meter en un cron para que se ejecute el solito cada x horas o cada vía o cada lo que sea vamos a ver un segundo está volcando todos los archivos vale ya se ha transferido bien Ahora a continuación me voy a github y digo primer commit claro Son un montón de archivos de texto lo podría meter en una base de datos Sí pero no ahora vamos a hacer un primer commit y ya está esto quiere decir momentín esto quiere decir que ahora me voy al servidor en el servidor me bajo a la carpeta original y en el servidor cogiendo el log en el servidor cogiendo el log voy a clonar Así que digo git clone github.com bar jarsa barra mediums Green creo sí Okay Vamos allá clonando contraseña Ok clonando fíjate Fran Lo que le ha costado subir por ftp y lo que le ha costado bajarlo por github o sea eso también Mola bastante bien entonces yo me voy al servidor lsl y veo que ya tengo ahí jarsa medium Green O sea que Mola vale Mola en el sentido de que la forma de implantar ap iones Pues veis que es bastante limpia en el sentido de que cada aplicación se va a una carpetita y se va donde le corresponde insisto yo no hago las cosas así pero como estamos en una clase pues digo voy a hacerlo lo más ordenado y lo más entendible posible para vosotros bien Ahora a continuación Quiero crear vamos a ver aquí está m kadir p vale aquí OK Vamos a ver un momentín y me voy a el servidor me voy a momentín a etc creo que es Espera que te lo digo me voy a etc apach 2 ssl me voy a etc apach 2 ssl no perdona No Estos son las claves no esto no default ssl vale me voy a sites enable Aquí está tengo Eh pues una serie de aplicaciones ya preparadas Así que voy a crear un archivo nuevo que va a ser medium c Green jocars comom confon Me cojo tomato me copio el código me voy a medium c Green y le digo medium sig Green las claves son las mismas por lo que os decía de Cuidado Esto del wildcard el certificado ssl wildcard en el directorio no quiero índices tengo que quitarlo del resto también y medium sig Green Access log para los usuarios Okay pues ya está vale una vez que tengo el medium segreen ahora a continuación o sea he declarado Ah Perdona No he acogido un subdominio Vale ahora un momentín y Okay ahora mismo estamos en las y Ok at to enite enable site jarsa medium c Green vamos a por ello habilito la web habilito el Virtual Host das exist vale porque cb etc CD apach 2 lsl CD sites enable ahora eh medium se green.com medium se Green a ver lsl ah no medium sig Green punto jocar sa.com.com A ver no Espera espera un segundo virtual Host Jara me dio un seg Green medio un seg Green medio un seg Green vale Voy a recuperar el proceso de ayer a ver está creado sí está creado teóricamente a las 16 Sí pero o sea pero me dice que no momentín porque me dice que no existe site no existe vale vamos a ver el listado de sites dme un segundo quiero esto es de Estados Unidos nada vale Y vamos a ayer Apache ssl Okay Ah a tu enite vamos a verlo Clear lsl Ah esto es el problema vale esto es el problema Okay espera vale venga vamos a hacerlo así vamos a hacerlo así de cero eliminar Vale ses available y medium sig Green jar vale cojo este código lo pego es medium sig Green es medium sig Green es esto se sigue igual esto es medium s Green no quiero indexes esto es el error es medium sigen y medium sig Green vale guardo Salgo ahora voy a hacer el enable Dónde estás Voy a hacer el enable y medium Okay perfecto y ahora eh System ctl reload Apache 2 para recargar Apache y ahora cuidado porque atención el servidor ahora está preparado para acoger una ruta en la cual reconoce que debería existir un subdominio llamado mediums Green hocar comom pero en la configuración del dominio en el proveedor de servicios por esto Esta cajita Azul Está separada de la cajita roja vale en el proveedor de dominio no he dado de alta todavía ese subdominio por tanto el servidor está preparado para que alguien venga desde ese subdominio pero no existe todavía ese subdominio por lo tanto me tengo que ir al proveedor me tengo que ir al proveedor me tengo que ir a dominios me tengo que crear un subdominio vale subdominios veis que tengo Dark Slate Blue y jarsa creo un nuevo subdominio eh crear su dominio nuevo de j el subdominio es medium c Green Y si todo ha ido bien cogerá la misma IP las mismas dns que el resto de subdominios donde las dns sirven para que cuando alguien desde fuera Cuando alguien desde internet entre en nuestro servidor alguien desde internet diga Oye Quiero entrar en https Do mediums Green hocar comom pues alguien desde internet irá a ionos e ionos tendrá este listado de aquí donde dirá Mira Alguien ha pedido Este subdominio vale pues lo vamos a llevar a este servidor de aquí es decir alguien viene por aquí alguien viene por aquí te pide medium mediums Green hocar comom y la dns dice vale fantástico pues te digo Cuál es la ip del servidor vale Te digo Cuál es la ip del servidor pero claro cuando llegues al servidor esto de momento no se ha creado ahora veremos cuando llegues al servidor tienes que ser capaz de saber a qué carpeta corresponde es decir cuando alguien vaya a hokar comom pues lo voy a llevar a una carpeta Cuando alguien vaya a Dark Slate Blue pues lo voy a llevar a otra carpeta Cuando alguien vaya a medium seg Green pues lo voy a llevar a otra carpeta es decir depende el Virtual Host Es depende del dominio por el cual estás entrando al servidor te voy a llevar a una carpeta o te voy a llevar a otra vale voy a probar a ver si ya funciona mediums Green hocar comom no Esto no es todavía no esto es Dark Slave Blue Vale pues Y si pongo kaka jara.com vale Ya decía yo medium seen jara.com Vale Me está llevando a la carpeta que no toca curiosamente esto es Dark Slate Blue vale Y a ver medium Green OK ahora refrescar de momento a ver voy a ver las dns medium se Green sí las dns ya se están creando vamos a ver de nuevo refrescar vista medium sig Green medium Ah no caray es jarsa Med dio un sigren vale esto estaba mal ok Venga pues jokar me dio un sigren vale Voy a reiniciar aache voy a volver a cargar No todavía no A ver medium sigen vamos a comprobar CD bar w html eh Ok C de jarsa medium sig Green Sí es correcto Vale pues Ahora funcionará calculo debería medium sig Green Vamos a darle unos minutos vamos a comprobar Ah medium seg Green tampoco está correcto vale venga va a ver si ahora vale Y ahora sí una vez que lo hemos arreglado Ahora sí Ahora cualquier persona que entre dentro de mediums screen hoc ars.com entrará dentro de esta web pero ahora a continuación Quiero realizar pues una mejora vale Quiero poner pues una cabecera un poquito más corporativa y aquí quiero meterle un poquito más de margen pues para meterle un poquito más de margen Pues ahora a continuación en local me voy a local me voy a jarsa medium y Green me voy a Index php y hago una mejora Vale y digo vamos a ver Ah el estilo está por aquí vale Y digo esto qué es esto es el body Ah hostias en el body Bueno pues vamos a ver pues en el body voy a hacer una etiqueta Main voy a hacer una etiqueta Main aquí arriba voy a hacer una etiqueta heer y voy a decir h1 jarsa medium se Green img src https bar jara.com bar static bar logo bar jocars White vale porque ahora en el estilo voy a decir que el header es color White background medium c Green esto es el local Host jarsa medium si Green Ok Mola vale padding 10 píxeles aquí qué ha pasado no me coge la imagen vale vamos a ver la imagen.svg ahora s bien estilo le digo heer h1 utilizo flexbox tiqu tiki tiqu tiqui y cojo este y heer h1 img le digo with 50 píxeles Okay vale with 60 o 70 píxeles Qué curioso a ver un segundo h1 Okay si le he dicho Flex Ah no Center caray vale Center Ahora sí quiero Google font ubuntu get font get embed import me lo llevo ahí arriba y digo que use ub Okay Eh quiero que en el Main haya un padding de 40 píxeles Ahora sí Ahora más bonito Vale y todo eso bien y eh Y poco más vale con lo cual estos cambios están aplicados en local pero no están aplicados en el servidor vale con lo cual creo que me queda algo por hacer pero bueno no sé no se me ocurre ahora Ah sí sí vale quiero eh A ver jocars Steel Blue Quiero ver el código fuente quiero el favicon quiero ponerlo aquí arriba esto es medium c Green recargo y tengo ahí arriba al favicon y una vez que he acabado de hacer los cambios ahora a continuación no están en el servidor Vale tengo ya los cambios aprobados fijados en mi ordenador me voy a github mejoras de imagen corporativa comit to Main me voy al servidor le digo que quiero hacer un Pull hago un Pull recargo en el servidor y ya tengo los cambios en el servidor vale Y ya los tengo en mediums Green hocar comom Esto es lo que vamos a hacer en gran medida a lo largo de estas semanas vale que es desarrollar aplicaciones implantar aplicaciones utilizar un repositorio para gestionar las aplicaciones y En definitiva que veáis que una vez que tenemos ya montado el tinglado Pues ahora podemos utilizarlo y aprovecharlo y optimizarlo dadme un segundo un momento por favor