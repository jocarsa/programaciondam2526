un ejemplo claro de para que podemos usar un guardado de archivos flat file en archivo plano al disco duro puede ser un sistema de creación de logs de registros de visitas de una página los logs de una página se escriben desde luego no se escriben más frecuentemente pero y luego únicamente se lee y no se suele requerir actualizarlos ni borrarlos porque la idea de un log es muchas veces escribirlo ni siquiera leerlo tenerlo ahí por si acaso pasa algo y si hacemos algo por él desde luego es únicamente leer por tanto si no vamos a usar ni update ni nada de esto podemos hacer un sistema de los voy a ponerlo punto php con texto plano cruzar un log php como archivo que gestionará esos blogs y 1.0 aquí está la gracia donde almacenar en texto claro sí pero al final en un formato de archivo separado por comas de tal forma que en un momento dado podamos abrir incluso desde el o directamente con un programa de hojas de cálculo como excel o como pero fiscal y abrirlo punto php voy a crear un pequeño script que lo que haga es registrar los accesos a esta página el archivo al que nos voy a trabajar es blog punto csv aunque en principio esta función está pensada para trabajar con archivos de texto plano no pasa nada por engañar al programa y hacerle creer que un csv es un archivo de texto plano cuando real 21 realmente lo es contenido el contenido que voy a escribir será el siguiente el contenido va a ser separado por comas va a ser la cantidad de segundos que han pasado en la región ix y encadenó con una coma y ahora quiero el año voy a copiar esto unas cuantas veces ahora quiero el año quiero más quiero y vuelvo a separar porque con coma y lo que quiere ahora por ejemplo es sacar la ip del archivo en el que estoy trabajando por tanto voy a hacer que voy a decirle que la variable ip es igual a la variable del entorno remote abres además quiero saber el navegador con el que la gente entra a mi web con lo cual el navegador es igual a variable del servidor y entre comillas http y usher en la gente con el que están entrando esta web por tanto voy a quedar ahora con life en cadena una vez más con coma encadenó ahora con la variable navegador es importante al final voy a encadenar con contra barra en contra barra n equivale a retorno de carro en archivos de texto claro por tanto ahora ya puedo volverá al manejador es igual a efe open donde apunto al archivo y le digo que lo abro en modo a mayúsculas ap en mayúsculas por último ejecutó reserva manejador como contenido si no he cometido ningún error y espero que no vamos a asegurar nuevos del mail de el año es y el mes examino en minúsculas el día es de minúsculas pero lo que hago es guardo y ejecutó los php y se hará cargo blog csv compruebo como estoy guardando los datos que especificado en un archivo de separadas por comas voy a ejecutar varias veces lo csv y comprobaré como cada vez que lo ejecutó se crea a ver que he guardado voy a ver como cada vez que lo ejecutó se crea una nueva línea de registros por tanto lo que tengo aquí como puedo comprobar es un registro de los accesos que ha tenido a mi web y lo interesante aparte de querido que alguien capturando el utc el año el mes el día la ip y el navegador que se ha usado es que estoy trabajando con un archivo separado por comas que ahora podría por ejemplo cargar en una hoja de excel si ahora vamos a ver voy a abrir este archivo un segundo y ahora lo muestro en pantalla yo tengo por aquí la sal y si ahora cojo ese csv le digo que lo abro con un libro fiscal -que o con openoffice card o con excel con lo que queramos nos separó por coma y delimitará texto es ninguno porque el olvido como podemos ver puedo abrir ese archivo que he guardado mediante php con una aplicación de hoja de cálculo como por ejemplo excel u openoffice calc y esto es interesante como vemos aunque aquí parece que y se ha enganchado porque había una coma del texto y bueno cómo arreglar esto ya que estamos porque ha pasado esto porque ha dividido estas columnas vamos a verlo esto ha sido por la sencilla razón de que el navegador incluye una coma por tanto la coma me parece que en este caso es un mal símbolo para separar el texto así que lo que podría hacer una cosa que se suele hacer bastante en los csv es hacer lo siguiente dejar esto por aquí voy a poner esto allí y lo que voy a hacer es separar no sólo con comas sino también delimitar con comillas en este caso tendría que poner contra barra comillas como carácter de escape así que ahora pongo contra barra comillas antes y después de cada coma y aunque parezca mentira lo que voy a hacer con esto voy a poner contra barras comillas y por último n es al escribir al ejecutar el log php ahora lo que estoy haciendo es separar cada uno de los valores con comillas por tanto esa coma que sacó mal que tengo aquí ya no se va a ver afectada voy a borrar todo el log porque ahora tengo registros anteriores incorrectos y registros nuevos correctos voy a ejecutar de nuevo el script varias veces ejecutó recargo para comprobar que ahora está separado todo el principio está correcto por comillas y si ahora vuelva a abrir ese archivo csv con calc vamos a verlo por aquí lo que voy a hacer ahora es decir que los campos están separados por comas y que el delimitador del texto es comillas porque se ahora aceptó comprobar como ya no ha afectado esa coma que tenía ahí he dejado por lo que veo alguna coma del aire voy a seguir corrigiendo en life efectivamente acuerdo destruyó estos registros cierro que está abierto bien estaba abierto y ahora me dice que hay un error en la línea de 7 hay un error porque eso está mal pegado realmente mal aquí ejecuta ahora llamada error y ahora muy bueno csv parece que esté correcto y si ahora lo recargo en la base de datos la hoja de cálculo compruebo como ahora si ahora sí que está correcto yo de todas formas tengo un truco para esto de los archivos de texto plano que es el siguiente el problema es que una coma es un carácter muy común es demasiado común por tanto yo lo que suelo hacer es usar un carácter que no sea tan común como una coma los archivos de como donde de psv se coma se paréntesis values en principio están pensados para ser separados con comas o con puntos y comas pero la coma y el punto de coma son dos caracteres que están condenados a dar los problemas porque son muy comunes pero sí de lo que suele hacer es poner en lugar de coma voy a buscar una en lugar de coma sin pulso al cr el número 1 del teclado tengo una barra vertical al xerez y número 1 digamos la barra de hora esta barra así que es muy poco frecuente y si ahora ejecuto el script con esta barra voy a borrarlo todo está abierto en la hoja de cálculo ahora sí y ejecutó varias veces el log comprobar como el resultado es que en lugar de comas estoy separando los valores mediante estas barras verticales usaré las barras verticales a mí me suele dar buen resultado para que el programa no confunda comas separadoras caracteres separadores con caracteres internos de los registros