bien pues vamos a empezar Buenas tardes Albert y José Manuel entonces en la clase de hoy vamos a abrir un melón muy importante esto son las notas de ayer vale Y el melón que vamos a abrir hoy es que en la asignatura de servicios y procesos esto No esto son proyectos y colores servicios y procesos vale vamos a ver que en el tema penúltimo o en el tema último vamos a ver dónde estás y aquí vale en el tema número cuatro tenemos el punto muy concreto llamado programación de servidores y en programación de servidores y en transmisión de información también vamos a ver que en un momento dado podemos contemplar que el servidor y la gestión del servidor es algo mucho más amplio de lo que en un primer momento podemos pensar esto que os voy a contar programación de servidores tiene también que ver está a caballo entre el tema 4 y el tema cinco que es utilización de técnicas de programación segura o En definitiva buenas dragos que te acabo de ver o En definitiva qué es lo que ocurre cuando hay algo que amenaza el sistema para ello lo que voy a hacer a continuación es abrir un momento El Bueno por una parte el iceberg de segundo vale Pero por otra parte momentín aquí tenemos el iceberg de segundo Pero por otra parte además de abrir este iberg también quiero abrir otro esquema Hola a ver otro esquema vamos a ver esquema arquitectura tenemos esquema sagrado vale que realmente quiero recordar que esquema sagrado es para primero pero técnicamente a vosotros Pues también os afecta vale es decir tenemos por una parte ves que está más un poco más pensado para primero con las asignaturas de primero pero básicamente a vosotros también os afecta desde el punto de vista en que para vosotros Exactamente igual Es decir tenemos por una parte un entorno de desarrollo y luego tenemos por otra parte un entorno de producción que como hemos comentado anteriormente tal vez pueda ser un Hosting compartido pero en el mejor de los casos y ahora a continuación os diré por qué digo mejor de los casos puede ser una máquina virtual o un vps la vd vps es virtual private server o quizás también puede ser eh una máquina física Es decir un servidor dedicado en este caso debemos tener en cuenta aunque esto que voy a decir ahora no solo sirve para Linux sino que también puede ser adaptado fácilmente para Windows server debemos tener en cuenta que al final nuestra aplicación es una aplicación programada sobre un entorno de desarrollo implementada en un servidor de producción el servidor de producción tiene un sistema operativo de servidor Y si bien Muchas veces especialmente por ejemplo en la asignatura de sistemas de gestión empresarial nos preocupamos por programar el sistema de gestión empresarial pero sin embargo también en programación de servidores también hay un terreno completamente eh completamente abordable y ahora veréis que prácticamente infinito y en las clases de hoy voy a intentar hacer múltiples demostraciones de que la programación de aplicaciones en servidores combinada De hecho no solo necesariamente combinada vale Pero además combinada con técnicas de programación segura Pues nos puede abrir infinitas posibilidades Y veréis a qué me refiero yo ahora mismo aquí en este servidor tengo un servidor Apache corriendo vale Lo cual quiere decir que voy a local Host y tengo una Apache 2 y luego en Apache 2 pues ya sabéis que luego en cada una de las carpetas por ejemplo si me voy a local Host dan segundo sistemas de gestión empresarial proyecto pues si yo estoy viendo estas carpetas en local Host Y si yo entro aquí y entro a cliente y me aparece algo es porque hay una Apache que me está sirviendo esto importante deciros que cuando digo Apache Me da igual que sea Apache no dejs python Ja Enterprise lo que vosotros queráis vale es decir cualquier servidor en este caso en el caso presente que nos ocupa pues hablamos de Apache La pregunta es os habíais planteado alguna vez que Apache se puede parar es decir si yo vengo aquí y a mano creo que alguna vez me habéis visto hacer esto a mano digo service si acaso vamos a poner sudo vale sudo service y digo eh apach 2 stop es decir sudo el usuario superadministrador hace algo voy a gestionar un servicio el servicio sobre el cual quiero eh operar es Apache y lo quiero parar Así que generalmente me habéis visto hacer un restart vale Pero igual que hay restart ahy stop Así que hago así pongo mi contraseña y paro Apache y cuando digo que paro Apache lo que quiero decir es que a continuación recargo la pantalla eh a ver un momentín pues lo que tú quieras dragos Yo te diría si quieres envíaselo directamente a Elena porque es la que realmente lo va a gestionar pero digo porque si me lo envías a mí yo se lo tengo que reenviar a ella o sea que si se lo envías a ella directamente Pues casi que mejor Sí vale entonces yo a continuación le doy a recargar y no se puede acceder a este sitio web vale Por qué Pues porque Apache está parado yo a continuación le puedo decir Start y a continuación hago así y ahora recargo y el servidor está en marcha hasta este punto no os he enseñado Nada nuevo diréis vale esto ya lo sabíamos Pero la pregunta es Y si podemos controlar esto mediante programación es decir Yo vengo por aquí y digo stop Apache server from python Script Cuando digo python quiere decir que técnicamente en el servidor podemos programar con absolutamente lo que nos dé la gana pero yo creo que el lenguaje más idóneo más sencillo y más potente a la vez y con el que con menos líneas hacemos más código es vale en este caso python así que yo ahora me vengo por aquí me voy a idle en idle voy a crear un nuevo Script le tendré que dar permisos Pero bueno ahora veremos me voy a bar me voy a w me voy a html me voy a dam me voy a segundo me voy a programación de servicios y procesos me voy a generación de servicios en Red programación de servidores vale Y voy a crear un archivo llamado parar Apache pego el código y en este caso lo que voy a hacer es si os fijáis lo mismo que he hecho antes es decir hago un sudo Donde antes he puesto service se puede poner System control vale es otra instrucción válida en este caso la instrucción que quiero realizar es un stop sobre el servicio ap2 o sea es lo mismo que he escrito antes pero cambiando un poco la sintaxis si todo va bien quizás le tenga que dar permisos a este Script vale No pasa nada pulso f5 vale me dice file to stop Apache server no pasa nada porque en este caso no estoy ejecutando python como sudo pero yo ahora a continuación me vengo por aquí me voy a eh un momentín me voy a un momentín que cierro el servidor me voy a dam me voy a segundo me voy a programación de servicios y procesos me voy a generación de servicios en Red me voy a programación de servidores abro un terminal aquí y ahora en el terminal le digo sudo ahora sí vale un momentín sudo Espera que tengo esto muy aquí sudó python 3 001 para la Apache pongo la contraseña y Apache server ha parado satisfactoriamente lo cual quiere decir lo cual quiere decir que si yo ahora intento entrar en Apache Pues veréis que porque python lo ha parado python habiéndose ejecutado eh bajo super user donde obviamente pues en ese caso necesitaré ejecutar este Script mediante superusuario cosa que tampoco es mucho problema porque lo puedo poner en un Chrome de superusuario y por tanto si lo pongo en un Chrome de superusuario es el superusuario el que al final el que al final está ejecutando ese cron La pregunta es por qué acabo de hacer esto es decir por qué acabo de hacer un Script que para Apache pues La respuesta es la siguiente insisto una vez más recordemos que estamos en el contexto no solo de crear servicios en Red que es lo que insisto vamos a hacer mucho en el día de hoy sino que también estamos en el contexto de utilización de técnicas de programación segura Bueno pues qué ocurre si eh vamos a ver por aquí qué ocurre si en un momento dado os acordáis que la semana que pasada Estuvimos viendo el poder de la muerte y el poder de la muerte lo que hacía es que mediante la instrucción Die el Script de php correspondiente cuando detectaba una circunstancia que no le convenía es decir cuando detectaba lo que podríamos identificar como un intento de ataque eh el Script php se apagaba vale el scrip php se moría pero sin embargo De qué me sirve eso de poco vale de momento paro localmente un ataque concreto pero técnicamente el atacante puede seguir intentándolo puede seguir atacando vale a continuación la semana pasada eh empezamos a implementar también el concepto de White list y blacklist es decir si detecto que desde una IP concreta me están intentando realizar un intento de ataque pues en ese caso meto la IP en un blacklist y siempre que detecte un acceso Desde esa IP automáticamente voy a bloquear a esa IP qué ocurre que lo que puede hacer un atacante Es simplemente ir cambiando de IP a través de una VPN o si ese atacante tiene cierta destreza utilizando una botnet es decir una red de ordenadores zombies que previamente haya infectado donde esa red puede ser extensa y por tanto me puede dificultar el proceso de bloquear IP Porque en ese caso tendría que bloquear ips y mientras que bloqueo unas ips me van atacando por otras Vale pues todo lo que os enseñé la semana pasada son soluciones pero en un caso extremo esas soluciones se pueden quedar cortas Entonces qué ocurre si en un momento dado yo detecto que están intentando acceder a mi servidor con un fin ostensiblemente de ataque es decir con un fin malicioso pues una de las medidas que yo puedo tomar y una de las medidas que yo quiero que sepáis que están a vuestra disposición Espérate que encuentre el código es parar Apache si yo paro Apache Eso quiere decir que automáticamente Apache va a denegar todas las peticiones que se puedan producir en el puerto 80 en el puerto 43 443 Perdón en el caso de ssl o en cualquier Puerto donde estuviera escuchando Apache por tanto el objetivo no es específicamente para Apache el objetivo es saber que ante la detección de una circunstancia concreta yo puedo modificar ciertas partes del sistema operativo en primer lugar para parar Apache otra cosa que puedo hacer es directamente en un caso s extremo ahora hablamos de casos intermedios no tan extremos es apagar el servidor es decir todo esto insisto yo lo estoy ejecutando de forma directa es decir he hecho un Script llamado para la pache y he ejecutado el Script para la pache evidentemente este Script se ejecutaría si se diera una condición y la condición es la que vosotros queráis cuando el disco se llene o se esté llenando cuando se detecten muchos ataques desde la red cuando la carga del sistema suba de forma desproporcionada y no prevista vale y en ese caso si ese If condicional se da pues en ese caso tenemos este Script preparado para eh poder vale parar Apache Pero qué ocurre que aunque yo pare Apache Si alguien me está intentando atacar Yo sé que al final un servidor es una máquina física que puede estar escuchando en muchos puertos por ejemplo el puerto 80 y el 443 es el puerto utilizado para Apache para comunicarse con la web 80 sin ssl y 43 con ssl pero yo sé que el puerto 3306 es my sql igual no van a por mi código igual van a por mi base de datos igual quieren hacer un ataque de desbordamiento para que el servidor de mysql PT Y si hay suerte deje acceso a las bases de datos o igual me quieren reventar el puerto 22 igual intentan entrar por s sh de esta forma quiero deciros que vale Por cierto me he descargado vale el de Linux voy a poner el de Windows si queréis vale para que luego lo tengáis 002 parar apache en Windows aunque ya os digo es poco frecuente Pero bueno puede ser Vale y digo Now a Script to shutdown de machine en un momento dado un momentín voy a esto no lo voy a ejecutar porque si lo ejecuto se me parará la máquina vale con lo cual se acabará la videoconferencia O sea que no lo voy a hacer vale 003 Apagar equipo y básicamente es sudo shutdown Now vale lo mismo que pondríamos en la terminal en este caso también os voy a poner el código de Windows 004 Apagar equipo Windows que en este caso es shutdown s en segundos cer vale en Time 0 Entonces qué ocurre pues que todo esto son medidas esto de momento es una medida directa vale luego esto hay que meterlo por supuesto en un condicional cuándo se va a ejecutar una apagada del sistema cuando vosotros digáis vale Pero la idea está en que os deis cuenta de que un ataque informático puede ser algo relativamente muy serio también dependiendo de Qué información esté en juego pero también que sepáis que cuando estáis trabajando en un servidor especialmente como os digo en un vps o en un dedicado en un compartido No hay ni de lejos tanto control porque no puedes apagar un servidor dedicado Perdón compartido quería decir también os digo que en un servidor compartido pues Generalmente hay un administrador del sistema muy por encima de vosotros que teóricamente tiene medidas de este tipo para prevenir ese tipo de ataques vale Pero cuando gestionas un servidor vps o un dedicado Pues bueno aparte de que la compañía que haya subcontratado pues también te da herramientas vale Y tiene cortafuegos y tiene sistemas de detección con lo cual también te puede ayudar pero dado que tú eres el responsable del mantenimiento del servidor tú también debes saber que no solo tu responsabilidad es eh programar una aplicación que funcione en el servidor sino que está a tu alcance también programar qué es lo que ocurre cuando se detecta un ataque e insisto y esto quizás no lo habíais pensado nunca que directamente cuando detectas un ataque una medida de defensa puede ser medida tortuga Es decir me cierro y cuando digo me cierro quiero decir literalmente cierro el equipo o sea apago físicamente la máquina y si apago físicamente la máquina pues evidentemente ya no hay nadie que pueda acceder a esa máquina y luego obviamente pues eh o bien si es un sistema físico es decir si es un servidor que tienes en tu empresa pues tú como ser humano pues puedes ir al servidor y cuando veas que el ataque ha pasado pues le das click al botón del servidor y lo vuelves a encender o bien si es un servidor dedicado o virtual dentro de una empresa de alojamiento pues espera no quería ir aquí pues que sepas que si el servidor por los motivos que sea se ha apagado Pues claro Beatriz cómo sabes si el ataque ha pasado bueno por una razón muy sencilla verás en una infraestructura de red vamos a ver un momentín voy a hacer esto un poquito más grande vale en una infraestructura de red un servidor está conectado dentro de una red esa red digamos hay más servidores vale esa red está conectada a algún tipo de máquina algún tipo de Hardware de red llámalo un momentín que voy a copiar llámalo switch llámalo router llámalo lo que sea vale concentrador Y ese Hardware de red muchos de ellos son suelen ser de la marca Cisco o similares es el que se encarga de proporcionarte red a ti y proporcionar red a otros muchos servidores que hay en la contornada Y por supuesto de conectar con el exterior entonces Generalmente el perfil de administrador de red pues es Uy Cuidado porque esto no ha ido para arriba Ah creo que lo tengo en semitransparente Sí vale esa persona es la encargada de monitorizar e incluso filtrar el tráfico de red y por tanto es la responsable es capaz de monitorizar qué es lo que está entrando a la empresa direccionado a tu servidor con lo cual si esa persona te dice mira seguimos recibiendo un montón de peticiones de ips que son de Rusia Ni se te ocurra encender el servidor todavía que esto no ha pasado y a partir de ahí puede digamos puede pasar vale o esta persona que se encarga de gestionar la red puede detectar el rango de ips y simplemente las puede bloquear o vete a saber es decir y en el momento en el que esa persona detecte que ya no hay tráfico de red en el caso insisto de que estemos hablando por ejemplo de un ataque de denegación de servicio Es decir de un ataque de tipo masivo Pues esa persona puede decir Oye parece que lo que sea que estuviera ocurriendo ya a parado con lo cual puedes volver a arrancar el servidor que parece que al menos esa amenaza ya no se va a dar vale se trata como os digo de que luego aparte otra cosa que os voy a decir es que el mundo de la informática está muy dividido y bueno no digo que esté bien pero es lo que hay está muy dividido entre administradores de red y programadores de aplicaciones con lo cual el administrador de la red es el que gestiona y sabe y conoce y monitoriza todo lo que está ocurriendo en la red con lo cual muchas veces diríais oye no Debería ser el administrador de red el que programa una aplicación para el servidor que apague el servidor en ciertas condiciones La respuesta es los administradores de red odian la programación y generalmente no es que sepan poco de programación es que quieren saber poco de programación vale mientras que los programadores de aplicaciones solemos desconocer mucho de Cómo funciona la red por tanto son dos perfiles que deberían colaborar íntimamente y sin embargo muchas veces Pues ahí hay un choque digamos Vale entonces Sí o sea desde luego Beatriz vale hecha la ley echa la trampa de hecho yo Generalmente recelo mucho menos del hacker Espera que voy a hacer un esquema por aquí recelo mucho menos del hacker que te envía 1000 millones de paquetes maliciosos por qué Porque en cuanto ves esto llegar aquí pegas un corte vale en cuanto Esto va llegando y llegando a los 5 minutos de llegar una tasa de tráfico tan alta cortas la red y ya está o cortas el origen y ya está recelo mucho más de ese hacker que con un solo paquete de forma disimulada consigue llegar donde quiere y consigue extraer la información que quiere extraer o borrar la información que quiere borrar o encriptar y secuestrar la información que quiere secuestrar etcétera Vale entonces La idea es eso es que evidentemente que se puede detectar ahí hay una pelea Y es que los hackers pues pelean por desbloquear las cosas y los que hacen por ejemplo el Hardware de red pelean para ir actualizando el Hardware para evitar que se lo puedan patear y no hay nada que sea impira el concepto yo siempre lo digo el concepto de seguridad absoluta no existe es teoría pero no es real vale por tanto Pues que sepáis que hay una alternativa Pero existe vale Y en un momento dado la podéis implementar en el servidor que es que si detectas que se producen una serie de condiciones incluso está en tu poder a pagar físicamente el equipo Insisto que si siempre digo lo mismo que si apagas el servidor dejará de dar servicio con lo cual todos los usuarios lícitos que estuvieran utilizando el servicio se cagaran en tus muelas pero más vale eso que no que te roben información porque tu servidor permanezca encendido y no seas capaz de bloquear el servidor Cuando sabes que está ocurriendo un ataque vale que lo ideal es que no ocurra ningún ataque Pero puede ocurrir y obviamente pues Cuanto más valiosa sea la información que tengas en el servidor pues más tipo de ataques pueden ocurrir no hay solo estas dos medidas es decir no existe solo Apagar Apache y apagar el servidor también hay más medidas que podemos tomar vamos a ver algunas de ellas otra cosa que puedo hacer es python Linux get list of vale Así que a continuación momentín voy a cerrar por aquí cosas a ver esto luego lo abriré de nuevo guardamos esto también vale Ok vamos a verlo y Ok copio código vale Así que voy a guardar esto como 005 lista de puertos abiertos vamos a ver qué puertos tengo abiertos en este caso ahora mismo en mi máquina Así que pulso f5 y me dice que ahora mismo tengo abiertos el puerto 33060 55 725 tendrá algún sentido no sé cuál es Tengo abierto el puerto 3306 Oh vaya el de My sql y Tengo abierto el Puerto 53 y también Tengo abierto el puerto 631 Eso quiere decir que por ejemplo ahora mismo teóricamente cualquier persona desde fuera Cuando digo desde fuera quiero decir que teniendo en cuenta que este equipo concreto en el que estoy trabajando no está conectado a una red externa solo está conectado a la intranet pues alguien desde la misma intranet podría intentar conectarse a mi Puerto 3336 para ver mis má de datos Así que la idea es que quiero que sepáis que no solo es posible en un momento dado listar saber qué puertos tengo abiertos como os podéis imaginar eh A continuación vamos a hacer un pequeño panel de control con toda esta información que ahora mismo vemos en el esto caray en el la terminal vale Y yo a continuación vamos a ver esto no hace falta vale nada vale y digo Now python input to Close a Port on IP tables vamos a ver IP tables Por cierto en este caso es hace referencia al firewall que lleva por defecto Linux Vale entonces a ver un momentín y vamos a ver Vale pues copio código me vengo por aquí 006 eh cierro Puerto vale Y me permite especificar qué puerto quiero cerrar Ok a continuación Vale y a continuación lo que hace es ejecutar un IP tables como os digo ip tables es el comando en Linux para gestionar el firewall que lleva por defecto la gran mayoría de sistemas operativos Linux basados en devian para otras distribuciones pues simplemente en lugar de ip tables es otra aplicación Y a partir de aquí cerrar bien Voy a ejecutar y quiero cerrar el puerto 33 seis quiero para todas las ips vale Y en este caso sudo me dice que tengo que hacerlo con sudo vale por tanto voy a hacerlo con sudo Así que eh sudo No Aquí no lo quiero aquí vale sudo python 3 y eh 006 cierro Puerto vale pongo la contraseña ejecuto con sudo 3306 eh No control c vale 3306 Ahora sí para todas las ips y ya hemos bloqueado el puerto 3306 con lo cual si hay suerte ahora ejecuto python 3 005 lista de puertos abiertos me dice que el 3306 sigue abierto vamos a ver reload Pet tables vamos a ver Okay a ver voy a hacerlo aquí Okay Eh Hola No tengo mti Ah okay Vale eso porque no tengo ipt fantástico Vale pues estatus Qué raro sí que sí que aquí vale Drop De hecho sí que tengo la regla del 3306 bloqueada Pero vamos a ver vale De hecho esta regla sí que está activada activate y tables Vale y vamos a ver no Qué raro bueno no pasa nada IP tables no está configurado como servo vale bueno no pasa nada lo puedo instalar como servicio vale Pero la idea es lo probaremos como ya os digo como a la vuelta de enero estaremos haciendo deploy en el servidor es lo que estamos haciendo es un preparatorio para eso pues lo que haremos es qué ocurre si en un momento dado veo que me están atacando el servidor Bueno pues hay una alternativa adicional a parar Apache y a apagar completamente del servidor que es entrar en el cortafuegos pero de forma automatizada O sea no entrando como ser humano sino haciéndolo de forma manual y simplemente eh apagando o sea bloqueando los puertos correspondientes para que esos puertos para que el sistema digamos se ponga en modo protección para que se corten vías de comunicación externa se puede cortar incluso también el acceso web hasta que un administrador del sistema llegue al sistema no bloqueé obviamente el puerto 22 porque es el puerto mediante el cual puedes acceder mediante s sh y Eh pues puedes acceder digamos de nuevo como administrador ver qué es lo que ha ocurrido Y tú como ser humano en base a tu criterio humano pues elegir cuándo abres de nuevo el servicio cuando La amenaza haya pasado vale En definitiva como os digo todo esto son eh Para empezar cosas que tú puedes hacer aplicaciones que puedes programar como aplicaciones de servidor que son aplicaciones que No necesariamente como en crimson te pintan un menú y te pintan una tabla y te pintan una gráfica pero son también una parte de necesaria del sistema informático son digamos entre comillas có decirlo como la policía digamos del sistema informático bien qué más cosas podemos hacer En este caso estamos hablando de que el sistema informático de forma automática tome medidas de protección por una razón muy sencilla vale Yo en primer lugar siempre digo No dejes que la máquina haga lo que debería hacer el ser humano vale es decir en principio el ser humano siempre va a tener más criterio para decidir cuándo tomar una serie de medidas que la máquina Pero qué ocurre Pues que en el momento en el que en una empresa se enteren de que el departamento informático tiene turno de mañana y tiene turno de tarde pero no tiene turno de madrugada cuándo dirías que van a atacar los hackers Pues en el turno de madrugada es obvio vale con lo cual igual poner turno de madrugada en el departamento técnico pero es que igual es un poco heavy metal tener ahí a alguien a las 4 de la mañana de cara al ordenador y de cara al servidor viendo qué es lo que ocurre No lo sé depende también del tamaño de la empresa vale Pero si es una empresa pequeña pues igual es un poco heavy metal así que como os digo no os enseño todo esto para reemplazar al ser humano pero sí para tener en cuenta que hay muchas veces que el ser humano una persona humana no puede estar literalmente las 24 horas del día analizando el tráfico de red sino que hay veces que requieres que el sistema de forma automatizada pues tome decisiones bien anteriormente hemos visto también dentro de procesos y servicios que existía la forma de programar eh clientes de correo electrónico vale así que dentro de lo que es la gestión de servidor también existe la fórmula de que el servidor cuando algo raro ocurre te envíe un correo electrónico o sea lo que consideraríamos en este caso una notificación Push O sea que la notificación llega a ti vale sin que tú tengas que ir al servidor Y de esa forma que el servidor Te comunique cosas eh en este momento vale quiero aprovechar para contaros un detalle muy macabro Lo siento mucho vale pero es un detalle Que siendo macabro pero os va a dar bastante perspectiva digamos sobre cómo funcionan ciertas cosas en el año 2001 cuando el ataque de las Torres Gemelas vale obviamente pues todo toda la información que tenía que ver en aquel momento con ese suceso Pues estaba era información ida pero con el tiempo con los años poco a poco fueron desbloqueando información como 10 años más tarde por día 2011 2012 o por ahí eh revelaron el tráfico de red las comunicaciones telefónicas en ese momento y es un informe que podéis ver si lo buscáis en Google está no es difícil de encontrar el cual revelaba En aquel momento recordemos 2001 vale o sea no 2024 sino 2001 revelaba todos los mensajes SMS enviados y recibidos por las antenas telefónicas de la cercanía de las Torres Gemelas y lo curioso y esto lo podéis comprobar si miráis ese informe lo curioso es que el 90 de las comunicaciones por SMS eran mensajes o de servidor a servidor o de administrador de redes a servidor En aquel momento 2001 la gente no llevaba un teléfono móvil conectado a internet pero todo el mundo teníamos un teléfono móvil que enviaba y que recibía smss con lo cual a un administrador de red que fuera caminando O bien en un edificio o bien por la calle la forma de que un servidor le reportara información del Estado del servidor era enviarle un SMS y la forma en la que un administrador yendo por literalmente la calle podía comunicarse con un servidor para enviar instrucciones básicas por ejemplo apágate o reiníciate o lo que sea era mediante el envío de un SMS vale por tanto yo creo que más o menos todos en 2011 2012 Cuando esto se reveló Pues no sé al menos le pegamos un pequeño vistazo para ver pues qué es lo que decía la gente en ese momento vale por teléfono por SMS y como ya os digo es curioso que el 90 de los mensajes eran tráfico de red es decir mensajes entre servidor y administrador hoy en día no hace falta porque en 2024 todos tenemos en el bolsillo teléfonos móviles que envían y reciben correo electrónico con conexiones 4G 5 5g da igual por donde vayamos en la calle vale Eso quiere decir ah lo curioso es que eh la razón por la que es curiosa es porque el World Trade Center era una zona de empresas no era un barrio Residencial era una zona de negocio y tú podrías pensar y cuando digo Tú quiero decir cualquier persona podría pensar que en aquel momento el tráfico de SMS de los repetidores de telefonía de la del área de las Torres Gemelas era pues mensajes de pues cariño llego tarde a casa o ha habido un atentado o estoy bien no te preocupes Y en lugar de eso un tráfico invisible que nadie vemos que en aquel momento vale era un tráfico de comunicación entre servidores o sea máquinas servidor y personas administrador de sistema que utilizaban el protocolo SMS para conectarse de ida y de vuelta con los servidores es decir si yo soy un administrador de sistemas y salgo a la calle y de repente ocurre que mi servidor tiene que ser reiniciado o apagado por los motivos que sea pues En aquel momento la forma de comunicarse remotamente con un servidor en cualquier lugar era que el servidor te enviara un SMS y que tú como administrador le podías responder un SMS al servidor que hoy en día como te digo se puede hacer con ssh se puede hacer con correo electrónico porque que cualquier servidor obviamente está conectado a internet pero es que Nosotros también estamos conectados a internet Lo curioso es que como en el año 2001 prácticamente Nadie estaba conectado a internet con el teléfono móvil utilizaban el protocolo SMS para reemplazar a esa conexión de internet vale eso es lo curioso vale un poco insisto Eh Esto que os digo buscadlo porque está en Google poned comunicaciones SMS 11s Vale y lo veréis y todos esperábamos pues Leer mensajes humanos y el 90 paja eran mensajes de servidor y cualquier persona lo leía Y decía sud server sh down qué de SMS es este pues es un mensaje que un administrador le está enviando a un servidor para que se apague vale bien entonces en su momento vimos como python Send email to user via smtp lo más sencillo que pueda os acordáis que hace unas semanas hicimos como un cliente de correo electrónico Pero porque Nuestro objetivo En aquel momento era hacer una interfaz gráfica para que una persona humana consultara su bandeja de correo electrónico nuestro caso ahora es un poco diferente entonces vamos a ver caray espérate bueno Vale eh okay smtp Live vale vamos a esto y me vengo aquí y digo 007 envío correo y el mail es vamos a ver os acordáis que no sé si la borré hice una cuenta creo que debe seguir existiendo vamos a verla hice la cuenta dam hocar comom me voy a correo me voy a e correo basic debe ser Vale Voy a buscar dam aumento de ciberataques Ok vale Sí pero ya pero Quítame esta aquí vale dam jarsa Vale y digo vamos a ver la contraseña información Ok la contraseña sm perdón a ver espera el servidor es smtp @ Perdón y.es Puerto 587 el sender email es aquí no el sender email es dam @ jocar.com.mx vamos a ver si era esa la contraseña y si no pues la vuelvo a establecer y ya está le doy f5 dice email Send successfully con lo cual yo ahora vengo por aquí me voy al correo electrónico y veo que tengo un test email Send via python smtp library vale lo que quiere decir que he enviado directamente un correo electrónico desde python una vez más vosotros podéis decir Bueno y qué O sea qué utilidad tiene que yo envíe un correo electrónico desde python Pues que yo puedo supeditar el envío de este correo electrónico al cumplimiento de una serie de condiciones es decir cuando me ataquen Envíame un correo cuando el disco duro se llene Envíame un correo cuando la carga del sistema supere el 90 Cuando en principio podríamos pensar que la carga del sist sistema no debería superar el 90 Envíame un correo y Di algo raro está ocurriendo conéctate al servidor y mira a ver qué ocurre vale Por qué Pues porque en un sistema Por ejemplo vale os pongo ese ejemplo como crimson Eh pues no es normal que la carga de un servidor supere el 90 por Porque es una aplicación empresarial de un perfil muy bajo en cuanto a consumo de recursos ahora si hacemos un servidor de os acordáis de videoconferencia con no de j o con python y se conecta mucha gente y el servidor supera el 90 pues y el servidor es pequeño pues por mucho que me envíe un correo electrónico el servidor yo diré bueno es que todavía me parece poco que est el 90 por porque sé que tengo una aplicación muy gruesa pero como os digo si el servidor es Perdona si la aplicación es una aplicación como crimson que es una aplicación que pensamos que no tendría por qué utilizar mucha carga de servidor pues entonces puede no ser normal que el sistema supere el 90 por de carga y hay que ver el motivo por el cual está superando esa carga vale o por ejemplo pues que mediante el cron el sistema una vez a la semana te diga Oye tu disco duro está al tanto por cento con lo cual en el momento en el que yo vea que mi disco duro está a más del 80% yo diré Espérate que me tengo que conectar al servidor A ver por qué mi disco está a más del 80% y empezar a revisar o borrar cachés o borrar tempor es o lo que sea antes de que el disco duro se me vale Así que la idea y ahora a continuación pues cortamos para que os vayáis a inglés y a e y continuamos ahora luego La idea es que veáis que en este caso python Yo creo que es vuestro mejor amigo en el terreno concreto de la gestión de servidores es decir en el terreno concreto de la programación de aplicaciones de servidor que en un momento dado de forma Autónoma o de forma periódica o de forma manual se pueden ejecutar para realizar una serie de comprobaciones y en un momento dado tomar una serie de medidas en el caso de que esas comprobaciones den un resultado positivo ya sea Oye te envío un correo cuidado que el servidor le pasa esto vale o que directamente la aplicación en lugar o además de enviarte un correo electrónico pues tome la decisión de cortar el sistema es decir por ejemplo una combinación podría ser Oye detecto un ataque ahora luego a la vuelta veremos Cómo podría detectar un ataque es decir analizando el tráfico de red ahora luego lo veremos después de estas dos horas que vienen a continuación en el siguiente bloque de la clase y el sistema puede decir Primero te envío un correo electrónico y te aviso administrador de que algo ha pasado y he cortado el servicio y luego corto el servicio vale o sea que no hay por qué elegir una u otra sino que en un momento dado podéis elegir una combinación de varias Bueno pues lo dejamos aquí de momento para esta parte de la clase a continuación os libero para ir a inglés y para ir a empresa iniciativa emprendedora y nos vemos a las 6 volvemos a las 6 y continuamos trabajando con más herramientas de programas de servidor para analizar la red para analizar la ram para analizar el disco y para analizar lo que sea okay Vale pues venga luego nos vemos