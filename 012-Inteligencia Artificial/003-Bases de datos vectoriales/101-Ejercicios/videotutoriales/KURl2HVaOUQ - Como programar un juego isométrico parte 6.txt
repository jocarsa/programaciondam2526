bien pues vamos a continuar vamos a ir a realizando avances vamos a ir realizando mejoras voy a poner esto la pantalla dividida y vamos a ver activamos chrome sacamos el videojuego bien y ahora vamos a intentar arreglar las cuantas cosas vamos a ir avanzando en el desarrollo y voy a decir que si desfase es menor o igual intentando evitar esa vibración que hemos visto hace un momento vamos a jugar y ahora cuando el personaje esté en la pantalla vemos con los objetos todavía liberan un poco bueno otra cosa que quiero hacer es determinar dónde va a estar el personaje inicial y dónde van a estar por ejemplo los enemigos así que para ello vamos a volver al gym y vamos a utilizar diferentes tipos de pixel ya sabemos que un píxel digamos sólido es en este caso pues un terreno pues ahora por ejemplo voy a pintar con color rojo vamos a verlo y voy a decir que donde estén los rojos pues van a ser donde vamos a crear un enemigos vamos a crearlos por ejemplo aquí ahora un píxel verde vamos a hacerlo perfectamente verde va a ser el personaje inicial bien el pixel azul va a ser el objetivo final azul que sea perfectamente azul y este será el objetivo final que estará aquí con todo esto sobre escribo el mapa ahora mismo es exactamente igual porque recordemos que lo que hacía es comprobar únicamente la solidez bien y ahora lo que voy a hacer para empezar es decirle al sistema dónde están esas condiciones iniciales así que vengo a las funciones y voy a crear una función de post inicial jugador vengo por aquí y cojo esto por ejemplo vamos a ver dibujo el terreno píxeles ya está y ahora vengo por aquí y digo si hemos dicho que el personaje era verde sí r es igual a 0 green es igual a 255 and the blue es igual a 0 and the alfa es igual a 0 en ese caso voy a decir que posee x es igual a x2 y es igual y con esto por tanto lo que voy a hacer es iniciar el jugador es decir que esto lo quiero en la función de inicio antes de empezar el juego recargamos jugamos y si todavía bien el personaje aparecerá vamos a verlo vamos a recargar todo porque me da la sensación de que el personaje no está ahí ok vamos a recargarlo todo vamos a darle a jugar bien y bueno también vamos a ver si esa función está funcionando en tal caso voy a decir consuele punto log he encontrado al jugador vamos a verlo porque hay veces que directamente lo que ocurre es que no funciona y vamos a ver cómo efectivamente no he encontrado al jugador pues lo que voy a hacer es en este caso decirle bueno si el rojo es menor que 10 si el verde es mayor que 240 si el azul es menor que 10 y si el alfa es menor que el hyeres pero perdón sea alfa haber momento claro ya sé dónde puede estar aquí el error he encontrado en este caso el alfa era 255 ya que es opaco ahí lo tenemos por fin tenemos ya a nuestro personaje bien a partir de aquí a partir de aquí lo que vamos a hacer a continuación es ahora crear los personajes en el sitio es decir crear los malos en el sitio no pasa mucho con esto porque digamos que hasta ahora lo que estábamos haciendo era que en la función de inicio en la función de inicio nos creamos de forma digamos completamente aleatoria vamos a verlos por aquí ahí está pues lo que voy a hacer es que no los voy a crear de forma aleatoria sino que los voy a crear donde encuentre un punto rojo así que ahora vengo por aquí me voy a funciones voy a crear una función nueva crea enemigos voy a volver a analizar esto y voy a decir si el rojo es igual a 255 y el verde es igual a 0 y el azul es igual a 0 y el alfa es igual a 55 en ese caso lo que voy a hacer es lo siguiente vamos a condiciones personaje número de personajes es igual a cero ahora en las funciones le vivo voy a copiar esto de aquí a ride personajes de número personajes es igual a ningún personaje array personaje es el número personaje punto x es igual a equis y lo mismo para la y lo que hago es poner cada uno de los personajes en la x sin la y que les corresponde y ahora lo que hago es decir que el número personajes más es decir aumenta el número voy a desactivar un segundo en personaje el personaje mueve de hecho es más esto está aquí en el bucle vamos a verlo así que no quiero que de momento ni se mueva ni me persiga porque lo que quiero es comprobar como los personajes están donde yo quiero que estén y ahora los volveré a mover vamos a ver puedo ir a la bestia porque no hay programado todavía lo de caerme vamos a verlo vamos a aumentar un poquito la velocidad del desfase lo recuerdo me he puesto los personajes pero está claro que no están apareciendo claro y esto es porque en inicio he creado la función de crear enemigos pero no he llamado la función de crear enemigos así que crea enemigos en este caso muy bien entonces vamos a recargar y vamos a comprobar al recargar si aparecen los personajes bueno vale están apareciendo ahí pero claro hay que tener en cuenta vamos a verlos y ten en cuenta que ahora que multiplicar les probablemente su posición por 50 entonces nos vamos a funciones nos vamos a aquí y esto es x por 50 y esto es x por 50 vamos a por ello ahora que hacer lo mismo por cierto con el personaje original estoy pensando así que recargamos jugamos y si todo bien no me lo sé de memoria pero hay tres ahí con lo cual sí que haber cuidado aquí hay tres aquí así que parece que están más o menos las posiciones correctas haría en el siguiente bloque había cinco vamos a comprobarlo en el siguiente bloque había cinco de momento no se mueven está clarísimo vale asiste como vemos están en el sitio y por último quiero que el objetivo por último quiero que el final del juego esté pues al final de la plataforma no se están moviendo porque como sabemos ha desactivado sus posiciones ahora a continuación veremos y lo que vamos a hacer ahora en definitiva es que pues vamos a la función de crea objetivo guardamos y decimos que si esto es cero y esto es 255 en ese caso me voy a condiciones iniciales me voy a premio xy premio y premio x es igual a x 50 premio y es igual y multiplicado por 50 y por tanto ahora crea objetivo lo pongo dentro de la función de inicio recargo este estoy probando estoy intentando utilizar una función de desfase animada me está dando esta vibración bueno tampoco pasa nada otra cosa que puedo hacer vamos a verlo aquí al final tenemos la función y cuando me acerco pues estoy en el nivel así que en el nivel 2 pues vuelvo a estar ahí bueno ahora veremos qué es lo que pasa al cambiar de nivel no sé dónde está el personaje parece que está ahí otra cosa que puedo hacer es que en la función de bucle en lugar de una función animada vamos a darle por aquí en lugar de una función animada lo que puedo hacer es calcular directamente el desfase entonces puedo decir que directamente desfase x es igual directamente hizo x me dio pantalla x - x vamos a probar esta fórmula desfase y es medio pantalla y menos que soy y recargamos jugamos bien y esto lo que hará vamos a ver de momento no está haciendo nada colgado tampoco está vamos a poner con solo punto lo buckler y en principio no parece que haya hecho nada como para colgar el programa pero el caso es que está colgado así que el canvas lo tengo por encima vale muy bien pues vamos a decirle al sistema qué y en forma para aliento display none ya que sabemos que están funcionando correctamente y ahora volvemos al bucle desbloqueamos el desfase xy el desfase y bien y ahí como podemos comprobar habiendo hecho esto pues lo que tenemos es que el personaje se mueve por la pantalla y no tenemos ya digamos en la vibración que teníamos hace un momento y por tanto podemos llegar al final y podemos llegar a nuestro objetivo la ventaja ahora mismo es que podemos crear tantas tantos niveles como queramos evidentemente con un esfuerzo relativamente pequeño voy a crear ahora una función de colisión para los personajes voy a hacer que los personajes se muevan simplemente se muevan lo que va a ocurrir ahora a continuación es que se van a quedar un poco bloqueados cuando se acercan a mí vamos a verlo a los personajes en principio disco cuando me acerco a ellos se quedan bloqueados voy a hacer una distancia menor si la distancia es aquí no estaba aquí en el bucle si la distancia es menor que 100 en ese caso es cuando pasa algo es cuando me buscan estar allí tampoco e inquietos pero bueno vale lo que quiero en definitiva es que nunca se puedan caer que nunca se puede nunca puedan salir ahora mismo de hecho el principal problema que tenemos allí los vemos es que su función de colisión pues realmente está como veíamos está basada en un rectángulo que yo he hecho inicialmente ese rectángulo ya no vale para nada así que yo lo que voy a hacer a continuación es decirle al sistema vamos a verlo en personaje que quiero que carguen digamos la imagen original esto está en funciones y queremos esto de aquí al píxeles es igual a contexto mapa a punto que me voy a esto lo voy a poner dentro de inicio por ejemplo en condiciones iniciales aquí está pixeles mapa bien y ahora a continuación lo que voy a hacer es que los personajes cada uno de los personajes pues tenga ese factor de colisión digamos miren a ver si están saliendo del terreno para ello por tanto me voy a personaje vamos a ver la colisión aquí está colisiona todo esto ya no vale para nada y luego ya lo voy a golpear pero más adelante lo que haré es probablemente es eliminarlo pero dejo hay un poco como recuerdo y ahora básicamente lo que quiero hacer es averiguar cuál es la x la y de del personaje vale así que tengo en este caso un distinto x tengo un distinto y lo que quiero hacer es averiguar vamos a ver quiero averiguo colisión bajar colisionando como a píxel es igual a contexto mapa y punto getty image data yo lo digo this punto x partido 50 porque 50 es la anchura del módulo que estamos utilizando al menos hasta el momento disco ma x y perdón partido 50 y quiero ver un píxel quiero ver el píxel que está abajo y entonces digo bar alfa es igual a colisión a píxel punto data de 30 es el rojo 1 es el verde 2 es el azul 3 es la transparencia así que ahora a continuación lo que hago es decir lo siguiente si alfa es igual a cero pues en ese caso ahora ya es cuando tengo que hacer esto de aquí menos mal que no he eliminado ese código creo que esta es la primera vez en mi vida que no borro algo y él no borrará algo luego me sirve para copiarlo y pegarlo porque si no siempre tengo ahí basura comentada pero bueno en este caso me ha venido bien para que dé la vuelta y si todo esto ha funcionado bien no lo sé vamos a verlo pero si todo esto ha funcionado bien lo que va a hacer es que los personajes ya no se van a salir del terreno cuando recargo y vamos a jugar vamos a ver por ahí están caminando vale claro están dando están cambiando de dirección vamos a ver cambio de dirección esto debe estar en 9 ok vamos a mitigar esto y ahí en principio parece que están colisionando con los bordes y claro ahí colisiona pero un poco más esto adelante correcto muy bien pues vamos a decirle en la colisión vamos a ver 50 x + 1 y más uno vamos a comprobarlo ahora le voy a jugar creo que era menos uno al parecer voy a recargaron por qué quieres que llegue hasta el final bueno está llegando un momento hasta el final más o menos bien ahí tenemos los personajes y ahora si lo que quiero es que cuando el personaje me tiene cerca pues entonces me persigue vamos a verlo voy a acercarme voy a poner 400 y los personajes me persiguen vale ya el perseguirme aunque al perseguirme también tienen que coleccionar al perseguir también tienen que calcular la colisión y eso hará que no puedan superar ciertas barreras algún error quizás este punto colisionó pero vamos a jugar vamos a movernos un poco por aquí vamos a comprobar que los personajes no deberían poder pasar por esas barreras pero sin embargo están pasando bueno y parece que algo es el signo en pedir pero vale hay que afinar un poco más de esa colisión pero hay que impedir que ahí parece que intentan perfecto intentan y al final es cuando le intentan conseguir muy bien vamos a crear más personajes enemigos vamos a crear más tipos de personajes enemigos y así un poco le damos más variedad al juego porque son todos de color rojo y bueno a veces puede resultar un poquito aburrido sin tener que entrar en vender lo que voy a hacer es crear en este caso diferentes tipos vamos a verlo personajes rojo teníamos ya el personaje verde pues simplemente trabajando un poco con los colores tonos saturación vamos a crear vamos a acercarnos un poco colores con saturación vamos a cambiar el tono pues mira uno amarillo personaje amarillo sigamos colores con saturación verde ya lo tenía fin personaje fían muy bien toda la saturación azul personaje azul creo que a continuación irá al magenta con lo cual por lo menos tendré seis personajes preparados para jugar bien vamos a ver ahora colores tono saturación vamos con el magenta y si todo va bien a estas alturas tendré seis personajes digamos enemigos vamos a verlo personajes 1 de los 3 456 los colores principales primarios y secundarios ahora a continuación lo que quiero hacer es crear un personaje vale trabajar con un personaje digamos bueno vale digamos el bueno de la película así que voy a arrancar blender momento voy a preparar los sprites para este personaje y así los dejaré calculando para la continuación pues generar entonces digamos que tendré un personaje protagonista y tendré unos personajes de colores antagonistas y luego veremos qué comportamiento les damos a cada uno de ellos porque digamos qué razón tienen para tener diferentes colores así que bueno vamos a trabajar un poquito aquí el personaje un segundo entonces de momento sin tener en cuenta el personalizado aquí le doy un personaje con un tono de piel le voy a dar un tono de pelo sin especular les voy a dar un color negro o un poco de ropa así más o menos azulete los pantalones por ejemplo se los voy a poner negros las zapatillas grises y yo creo que más o menos ya está así que me voy a ir a la cámara y ahora lo que haré es representar al personaje para a continuación poder meterlo dentro del videojuego voy a renderizar y ahora cuando acabe de renderizar vuelvo con él bien una vez que tengo estos sprites generados me vengo aquí me vengo al render me voy a box me voy a útil pero reemplazo lengua útil recargo y ya tengo el personaje y me lo guardo como aquí y personal directamente así que ahora por ejemplo yendo al código digamos puedo cambiar directamente esto es bueno la noticia puedo cambiar directamente el personaje en lugar de personaje verde va a ser personaje y directamente en principio va a funcionar vamos a verlo y ahí lo tenemos y tenemos el personaje directamente funcionando y ahora lo que voy a hacer es cargar diferentes personajes de colores digamos los malos lo suscribirán a por ti a 6 ya continuación no sé si a continuación voy a hacer lo siguiente el personaje rojo en el ps1 pues fijémonos que bueno fantástico aquí tengo no tengo huevo para 2 3 4 5 y 6 66 personaje verde personaje azul personaje film o amarillo primero personaje fían y personaje magenta y con esto ahora lo que queremos es averiguar cuál es el color del personaje cuando creamos un personaje tenemos por aquí energía color creo que no lo estoy usando aquí estamos vale pues color va a ser más punto round más punto random x 6 y hacer un más punto flor y entonces a continuación lo que vamos a hacer en el bucle de cara a pintar de cara a pintar imagen en el ps1 puedes decir vamos a ver voy a crear aquí bar imagen nps es igual y entonces vengo aquí al bucle y bebimos imagen mps todo depende un poco efe a rey personajes de ahí punto color es igual a 0 en ese caso imagen ene efe es igual a imagen npc1 voy a ponerlo esto aquí directamente en línea para ahora a continuación poner un cif el if 2 3 4 5 y 6 23 45 vamos a verlo 2 3 4 5 y 6 entonces el color tiene que ir hasta 5 recargamos y si todo ha ido bien vamos a verlos de momento no en ese momento no voy a recargar con fuerza para asegurarme que no cargue todo desde cero digo que estoy cogiendo a todos sí porque en el bucle imagen ep efe tiene que venir aquí has hecho ahora recargo llegamos a jugar y ahora así como vemos en cada vez en cada una de las veces va a cargar de forma aleatoria diferentes tipos de personajes esto se vuelva a recargar los personajes ahora serán diferentes y por ejemplo lo que podemos hacer es que si son de un color concreto hacen más daño o si son de otro color concreto pues no sé estoy viendo qué para hacer este cambio parece que el personaje parece que el juego vaya más lento para que vaya claramente más lento vamos a volver a ver si quizás me conviene y programarlo de otra forma así que parece que así que parece que al hacer ese cambio va más lento así que igual me conviene vamos a hacer lo siguiente voy a bajar esto aunque el código será más largo pero parece que intercambiar esa variable de forma dinámica está consumiendo muchos recursos entonces lo pongo aquí arriba y esto lo pongo aquí aquí y aquí hace que el código sea bastante más largo lo cual pues evidentemente no me gusta en el ps1 npc 2 nf3 en el peso de 4 ene efe 5 y ene efe 6 recargamos y en principio ahora debería disfrutar de varios personajes sin tener que sacrificar el rendimiento ahí lo vemos y lo vemos bien así bueno soy yo que está volviendo a ir lento bueno ahora veremos a ver por qué puede ser y ahora a continuación lo que haremos es confirmar cuál es el motivo por el cual puede estar lleno tan lento a partir de ahí hay otras estrategias que puede utilizar tales como por ejemplo pues él la pintura en este caso por ejemplo estamos pintando las celdas de del personaje de gama estándar de escenario siempre o estamos pintando el personaje siempre yo lo que puedo hacer es decirle al sistema que sólo pinta el escenario o solo pinta el personaje en el caso de que realmente caiga dentro de la pantalla eso también lo que va a hacer es que nuestro juego funcione bastante más rápido antes que eso voy a desactivar un momento los personajes varios personajes simplemente de momento para no perder rendimiento y luego se hace falta lo volvería a reprogramar pero el no perder rendimiento es un requisito clave y ahora lo que voy a hacer es programar eso que estaba comentando balear lo que voy a hacer es que si yo vengo por ejemplo a pintar el escenario vengo por ejemplo aquí la función es a pintar el escenario yo lo que hago en este caso vamos a verlo aquí dibuja terreno es que estoy dibujando el terreno aunque no haya que dibujarlo realmente entonces lo que voy a hacer es plantearme en un momento dado si debo dibujar el terreno es decir no voy a perder recursos dibujando bloques que están fuera de la pantalla para hacer esto voy a hacer lo siguiente decir que sí es cierto algo esto lo voy a poner aquí y voy a decir lo siguiente sí aquí voy a tener que poner varios varias líneas sí es cierto que hizo x anchura x y soy y ahora y detrás y es mayor que 0 es mayor que 0 y es menor que anchura pantalla y es menor qué altura pantalla en ese caso dibuja el bloque y eso lo que va a hacer es que no va a malgastar recursos dibujando aquí vale parece que algo ha ocurrido con sola anchura navegador no el camarón recargamos y ahora sí esto se va a ver parece que no probablemente no pero ahí vemos ahora sí que lo estamos viendo incluso divertido porque ya tenía que haber puesto por ejemplo mayor que menos 100 o algo así pero que así que prefiero que de momento se quede así que prefiero que el momento se quede así porque se va viendo lo que está ocurriendo está viendo cómo el programa digamos ahorra recursos y no dibuja aquello que se va quedando por fuera y si vuelvo atrás luego él va a dibujar evidentemente aquí en el 0 pasará lo mismo en el 0 pasará lo mismo entonces puedo decir por ejemplo es mayor que menos 100 y es mayor que menos 100 pero ha estado divertido el que el programa realmente lo dibujé en el que se demuestre que lo que estamos haciendo realmente hace algo y por ejemplo si le ponemos menos tiempos ya no se nota lo está haciendo pero ya no se nota con los personajes ocurre lo mismo con los personajes por ejemplo yo le puedo decir en este caso con este hijo me vengo al bucle y aquí en dibujo al personaje pongo steve realmente lo mismo sería para la barra y entonces digo sí hizo x del personaje y uso x del personaje y si eso y del personaje y soy y del personaje básicamente esto lo que hace es decir no me dibujes el personaje si está fuera de la pantalla es decir no malgastes recursos dibujando un personaje que esté fuera de la pantalla eso qué quiere decir por eso quiere decir que virtualmente puedo tener cientos de personajes puedo tener escenarios brutalmente grandes puedo tener lo que quiera que no va a haber ningún problema no va a dar ningún problema en el sentido de que digamos que no va a cargar lo puedo hacer un escenario lleno de bloques lleno de personajes y no va a haber ningún problema de sentido porque digamos que el sistema va a intentar ahorrar recursos bien y ahora vamos a hacer que el personaje eventualmente se caiga digamos por el acantilado así que para ello voy a hacer lo siguiente me voy a funciones cargo esto de hecho el inicio esto es pixeles mapa bucle collection del personaje con el terreno y esto es píxeles mapa ok y no porque lo que quiero es y que es el personaje es igual a píxeles mapa punto realmente no es contexto mapa punto getty image data de 2 x como post y como 1 pixel personaje y digo es que sí que no ok esto de momento adapta y digo sí es cierto que esto es cero entonces con solé punto log que las que él vamos a verlo vamos a inspeccionar y jugamos pixeles island y find en bucle 13 esto es pixel personaje empezamos vale y si me viene ya vamos a ver parece no 6 por qué o sea que es partido 50 punto round pues aquí es partido 50 y esto va a ser lo mismo conseguir llegar partido 50 vamos a verlo ok me voy y bueno por aquí ya empezar así que con texto mapa vamos a ver si es cierto contexto mapa correcto porque tengo esto dos veces jugar y si todavía no te has caído y dejo de caerme bien entonces ahora él te has caído pero eso ya me extrañaba bastante así cuando me acerco vale esto va a ser menos 1 y tras camino y hoy ya no te caes hoy bien no habrá que afinar un poco eso pero vale ah y no sé por qué me dice que me estoy cayendo pero vale ahí tenemos que verlo y queremos tenerlo más que nada porque ahora a continuación pues voy a utilizar esa condición para te has caído vamos a reír te has caído vale a brasil y entonces ahora yo lo que voy a hacer es algo tan sencillo digamos como pues que si por ejemplo pues te has caído voy a decir window punto location es igual a window punto lo que hay son decir voy a recargar brutalmente el juego simplemente para decir vale no te has muerto te voy a jugar y si algo así y yo me muero vuelvo a empezar es decir no puedo continuar ahí por ejemplo pues me vuelto a caer es decir tengo que tener cuidado y quizás al diseñar el nivel pues tengo que afinar muy bien o hacer pasillos más anchos o todo esto porque si hago así en definitiva me voy a caer y voy a volver a empezar bueno voy a dramatizar un poco esto de la caída creando un parámetro z vale y el parámetro z va a servir para hacer como que realmente me caigo vamos a verlo vamos a hacer por tanto dentro de condiciones iniciales vamos a hacer un parámetro z entonces voy a decidir bar post z es igual a cero y entonces voy a hacer lo siguiente y es que en el bucle antes de esto voy a decir por seth a más ya que en este caso lo que hace es bajar viendo les digo sí post eta es mayor que nose 100 o 200 en este caso window location es igual a window location y por último al dibujar el personaje lo que voy a hacer es que cuando dibujo la y vamos a ver detrás del personaje cuando dibujo la y pues le sumo directamente la pose está así de sencillo así que la mostreta no está afectada por el isométrico entonces algo así voy a caer vamos a verlo como me caigo ahora me caeré más rápido y cuando ya me caigo cuando ya llega un momento en el que muchísimo pues ya entonces el juego empieza otra vez vamos a decidir en este caso vamos a ver vamos a decirle al sistema en condiciones iniciales velocidad es igual a 1 y entonces ahora cada vez que paso por aquí velocidad afecta por igual a 2 2x más igual por z más igual velocidad zeta y eso va a hacer que caiga con aceleración eso va a hacer que en lugar de caer linealmente vamos a verlo hay un poquito menos 1.3 ha caído muy rápido y ay ya sé qué vamos a hacerle -800 para que realmente se caiga de la pantalla y veamos ese efecto dónde se pone el sonido y ya el juego empieza de nuevo entonces en todo caso pues siempre el objetivo digamos es que el personaje se quede dentro de la pantalla y sabemos que ahora ni los npcs pueden salir ni el personaje se puede salir tampoco porque entonces lo que ocurrirá es que se caerá y el juego volverá a empezar