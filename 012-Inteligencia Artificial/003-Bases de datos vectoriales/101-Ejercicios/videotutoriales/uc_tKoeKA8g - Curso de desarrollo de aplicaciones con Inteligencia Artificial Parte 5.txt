vamos con un segundo ejercicio e inteligencia artificial donde en este caso nuestro objetivo consiste en ser capaces de interpretar qué es lo que hay dentro de la imagen es una parte que podríamos asociar a visión artificial que sin embargo no es tanto todavía visión artificial sino que es una forma de poder reconocer qué formas hay dentro de una imagen pero hacerlo apoyándonos en la inteligencia artificial y no en medios normales digamos de cálculo con esto lo que quiero decir es que la primera parte del ejercicio vamos a abrir brackets la primera parte del ejercicio va a ser una parte fundamental en programación clásica pero en el momento en el que empecemos esa parte nos daremos cuenta de que para empezar realmente necesitamos esa aplicación de las técnicas de inteligencia artificial voy a guardar este proyecto dentro de aplicaciones dentro de mam dentro de ht docs en inteligencia artificial voy a guardar esto como ejercicio voy a guardarlo como index.html y vamos a crear el documento casualidad pero estás bien y ahora voy a crear un canvas y para crear un canvas lo que voy a hacer a continuación es meter una imagen dentro de este canvas el ide va a ser lienzo y bueno vamos a darle un wifi de 512 píxeles un height de 512 píxeles a continuación voy a buscar una imagen voy a la mía mismamente jose vicente carratalá voy a una cara humana voy a por ejemplo esta imagen guardamos la imagen vamos a llevar las aplicaciones amant vamos a llevarla a la inteligencia artificial ejercicio 5 y voy a llamar a esta imagen como josé vicente punto jpg así que ahora lo que voy a hacer es decirle al sistema que quiero cargar esta imagen voy a abrir el man que creo que lo tenía sin abrir fuera arrancan los servidores y vamos a poner lo que el host más inteligencia cómo se llama la carpeta aplicaciones e inteligencia artificial es que es localhost inteligencia artificial ejercicio hemos dicho que creo que es el 5 a partir de ahí lo que voy a hacer en primer lugar es cargar una imagen dentro de este lienzo tengo un lienzo de 512 por 512 y tengo una imagen de 960 x 960 esto va a ser en primer lugar un problema así que como estamos empezando lo que quiero es ponérselo fácil al programa y si tengo un lienzo de 512 por 512 pues quiero tener una imagen de 512 por 512 en este caso estoy usando un programa llamado gimp elgin que es un programa gratuito no tenemos tanto para windows como para mac como para linux y lo que voy a hacer es en imagen en tamaño de imagen escalar la imagen voy a decirle que no la quiero 960 píxeles sino que la quiero de 512 ahora a continuación la guardo voy a sobreescribir el archivo y por último cierre el programa de esta forma ahora si tenemos una imagen de 512 por 512 que entrará perfectamente dentro de un lienzo de 512 x 500 a continuación voy a crear un script al igual que en el ejercicio anterior voy a crear un contexto es igual a documento get by dick es lienzo firestone punto get contexto 2 d y ahora es cuando puedo empezar a dibujar puedo decir para imagen es igual a emails y puedo decirle qué imagen punto src es igual a josé vicente punto jpg esto lo que estoy haciendo es decirle que quiero utilizar esta imagen para mi proyecto ahora a continuación voy a ver como de hecho existe una imagen usa una un comando que me permite pintar pero cuidado si digo contexto punto pues por ejemplo imex otro email puedo decirle que imagen 00 esto quiere decir que voy a pintar la imagen a partir del píxel 0 y el pixel 0 si yo era intentó ejecutar este proyecto es posible que la imagen no se muestre es posible que al inspeccionar incluso vamos a rosa consola es posible que incluso no tengamos ningún error y que nos podamos frustrar un poco porque no aparece la imagen bueno pues porque yo estoy cargando la imagen y a continuación en prácticamente digamos 0 0 1 segundos estoy llamando a la imagen el problema está en que en un momento dado es posible que en esos 0 0 un segundo es la imagen no haya podido cargar todavía vale por tanto voy a crear una función dibuja es decir voy a encapsular ese comando del dibujo dentro de una función también ahora a continuación haré más funciones lo cual ya que estamos y voy a decir que se está out y no quiero ejecutar dibuja hasta dentro de por ejemplo un segundo es decir milisegundos con esto que es lo que estoy haciendo pues lo que estoy haciendo es decirle al sistema que no dibuje la imagen hasta dentro de un segundo y en un segundo yo creo que estudiando tiempo de sobra para que cargue la imagen en la memoria así que si ahora recargo podremos comprobar como un segundo después aparece la imagen esto no es realmente directamente una imagen esto es la imagen proyectada dentro de un lienzo dentro de un canvas bueno una vez que tengo esta imagen a continuación vamos a poder qué cosa vamos a ver qué cosas podemos hacer con ella una vez que tengo la imagen yo de hecho lo que puedo hacer es leer dentro de ella por eso voy a poner el contexto punto get image data y quiero ir desde 0 hasta 512 como a 512 es decir que quiero todo de firmar datos es igual a esto y voy a decir a continuación con solé punto los datos y esto lo que va a hacer es volcar en la consola todos los datos de la imagen fijémonos que en la consola nos da un ibex data que tiene una propiedad data y que de hecho tiene un montón de datos asociados vemos que de hecho los datos se repiten aparentemente en bloques de 4 esto es normal para cada bloque esto es normal pero también es un poco difícil de entender a veces al principio sobre todo cada bloque tiene una primera componente que es el color rojo una segunda componente que es el color verde una tercera componente que es el color azul y una cuarta componente que es la transparencia en este caso tenga un color 777 que es más bien oscuro casi negro y un 255 en transparencia que modifique el pixel no es transparente sino que es opaco así que bueno los píxeles vemos que no tienen la información de rojo verde azul tal cual sino que van en grupos de cuatro y yo tengo que recorrer estos grupos de cuatro para poder interpretar lo que contiene la imagen bien a continuación lo que puedo hacer es intentar procesar esta imagen ya sé que puedo leer el color píxel a píxel ahora a continuación vamos a ver qué cosas puedo hacer puede hacer realmente prácticamente de todo generalmente en inteligencia artificial lo primero que se quiere es y ser capaces de detectar bordes los humanos tendemos a detectar los contornos de las formas con las que queremos trabajar para separar lo que es el frente de lo que es el fondo por ejemplo así que vamos a hacer un pequeño algoritmo de detección de bordes para ello voy a hacer lo siguiente voy a duplicar este lienzo todos y así leo de uno y pinto en el otro para ello por tanto voy a decir que contexto dos todos es igual a lienzo 2 y ahora digo lo siguiente vamos a ver voy a quitar el control de punto lo vemos esto lo que hace y ahora quiero recorrer los datos uno a uno al recorrer los datos uno a uno voy a decir formar y es igual a cero y es menor que datos punto data punto links es decir la longitud de los datos y más por esto lo que estoy haciendo es recorrer la imagen bloquearlo que incluso lo que puedo hacer es y más igual a cuatro porque hemos visto anteriormente que los píxeles van digamos los números van de cuatro en cuatro siendo que pues los cuatro elementos son rojo verde azul y transparencia ahora así voy a recorrer píxel a píxel y voy a decir lo siguiente quiero leer un comentario el contenido del píxel actual entonces digo bar y un rojo 1 es igual a datos punto data bar verde 1 green 1 es igual a lo mismo pero de 1 es decir 1 es el dato siguiente y +1 y dar de azul uno es igual a datos punto data de i + 2 y más 3 sería la transparencia pero no quiero transparencia tal es así que no voy a poner el imas 3 leo los datos del píxel siguiente entonces los datos del pixel siguiente todos verde los adultos es más 4 y más 14 24 que es el rojo siguiente y más uno es el verde 4 es el verde siguiente e imax 2 es el azul más 4 es el azul siguiente y ahora lo que voy a hacer es intentar buscar una bueno una información vamos a ver yo tengo por aquí para datos 2 con texto 2 getty image data y entonces digo si r1 r2 el valor absoluto es menor es mayor que 5 anda lo mismo de verde y lo mismo de azul es decir básicamente lo que estoy haciendo es comprobar si los píxeles son muy diferentes de color pero tampoco tan diferentes se van de 5 puntos en ese caso pasara algo en caso contrario pasará otra cosa bien pues vamos a ver en ese caso voy a decir que datos 2 punto gata es igual a 255 o sea el rojo de los datos 2 es igual a 255 y 1 y maestros' verde y azul en caso contrario es igual a cero pero y después de haber hecho esto lo que voy a hacer es contexto de los puntos put image data khel emails data es para leer tus emails data es para escribir datos 200 si todo ha ido bien vamos a verlo no lo sé si todo ha ido bien recargo y en la segunda imagen estás pensando así que parece que esté pensando si te parece que está pensando por qué vamos a poner por aquí 1 controle punto el ojo ok para comprobar cuando ha finalizado el procesador de hecho está empezando a rodar luego en principio parece que algo está haciendo voy a cargarlo en otra pestaña y al cargarlo en otra pestaña simplemente voy a comprobar que efectivamente el programa digamos está enganchado en el sentido de que está calculando algo vamos a esperar y para que pueda hacer por ejemplo también es calcular sólo el canal rojo para aligerar un poco los datos cuidado es que aparte de esto no debería estar dentro de cada foro sino que debería estar aquí eso también está ralentizando artificialmente e inspeccionado muy bien consola tenemos el ok quiero el segundo canvas en el segundo canvas todavía no aparece nada así que pero qué vamos a hacer a continuación es pintar y eso sí me está pintando probablemente transparente así que datos punto data de más 3 es igual a 255 esto es porque igual me está pintando correctamente y los 55 pero estaba pintando en transparente vamos a verlo bien ahí lo tenemos lo que está haciendo el programa en definitiva es ser capaz de hallar los bordes con una técnica como digo un poco burda solo está midiendo la diferencia entre los píxeles un píxel y su pixel vecino pero es suficiente para obtener un primer resultado puede invertir la imagen y puedo decirle al sistema por ejemplo que esto es cero pero esto es 0 y esto es 0 y esto es 255 y esto es 255 y esto es 255 y así lo que va a ocurrir es que la imagen aparecerá con los bordes hallados pero eficientemente en otro sistema digamos en blanco y negro a continuación lo que puedo hacer es bueno jugar también con él con el límite entonces por aquí y digo bar límite realmente no hace falta que lo ponga aquí al límite es igual a cinco o tres o cuatro veces saber límite y de esa forma poder ir probando diferentes límites por ejemplo para 15 a ver qué pasa hallar únicamente los bordes que me interesen de esta forma yo puedo seleccionar puedo empezar a ver los bordes de la imagen insisto que estoy trabajando con una técnica un poco demasiado simple porque únicamente estoy comprobando un píxel con su píxel vecino vamos a continuación a elaborar una técnica a usar una técnica un poquito más mejor pero quiero demostrar que esto no sólo se utiliza por ejemplo para ver caras por ejemplo puedo buscar un círculo sergio e imágenes quiero esto por ejemplo no estás transparente está por ejemplo está bien el que el círculo sencillo guarda la imagen el círculo me la voy a abrir en el equipo para bueno tratarla el chrome no y lo que voy a hacer en primer lugar es en escalar la imagen la voy a subir a 512 por 512 y a continuación exportar como la voy a guardar como círculo punto jpg de esta forma ahora lo que voy a hacer en el código es cambiar la imagen por círculo jpg y comprobar cuál es la utilidad voy a comprobar cuál es vale bien qué es lo que está ocurriendo aquí vemos lo que está ocurriendo aquí es que he utilizado un círculo precisamente para demostrar como el algoritmo de cálculo que estoy utilizando bueno pues es bastante mejorable porque como lo estoy comparando el color de un píxel con el pixel digamos de su derecha pues lo que ocurre es que en los bordes verticales este algoritmo funciona bastante bien pero en los bordes horizontales no funciona también es más difícil comprobar cuál es la diferencia así que la idea es que yo no debería estar comprobando cuál es la diferencia de color entre un píxel y sus píxeles vecinos y su pixel vecino de la derecha sino que tendría que comprobar realmente todos los vecinos lo que voy a hacer es trabajar con un método mediante el cual me puedo acercar mediante el cual yo no quiero comprobar cuál es el color de un píxel vamos a trabajar esto de color rojo para poder tener o ilustrar mejor no quiero trabajar el color de un píxel y esto es qué pasa qué es modo ajo a trabajar el color de un píxel con respecto a su píxel vecino quiero ver en la derecha quiero ver el de la izquierda quiero ver el de arriba quiero verle realmente todo un bloque por ejemplo de tres por tres así que esto realmente son ocho píxeles porque hay que quitarle el centro que es el mismo en este caso lo que voy a hacer es lo siguiente lo que voy a hacer es realizar un pequeño algoritmo de cálculo mediante el cual voy a comprobar cuál es la puntuación vamos a ver y ahora y claro quiero repasar los píxeles vecinos la cuadrícula de 3 x 3 bien pues en este caso digo foro x es igual a menos 1 x es menor o igual que 1 x + + ahora y es igual a menos 1 y es menor o igual que 1 y más lo interesante de esto es que yo más adelante puedo cambiar el menos uno por menos dos o menos tres y automáticamente donde estás el gimp y automáticamente pues puedo una cuadrícula más grande vale puedo una cuadrícula más amplia al una cuadrícula más amplia voy a tener más precisión pero también al programa le va a costar más de calcular así que hay que tener cuidado con esto bien entonces ahora yo voy a hacer lo siguiente todo esto de aquí lo meto dentro del bucle for hay que tener cuidado con esto y entonces ahora lo que voy a hacer es lo siguiente datos de data es igual a i vale y ahora esto no es y 4 en este caso esto es y más x por 4 aquí por 4 y bajar esto porque esta fórmula va a ser que está conectada esto es x por 4 y ahora esto es y por 512 porque 512 es la anchura en este caso de la imagen ahora luego lo cambiamos esto es por 4 porque tiene cuatro canales cuatro informaciones y por 512 por 4 más y por 512 por 4 todo esto va a hacer lo siguiente yo aquí lo que quiero no es comprobar el límite ahora fuera bueno esto fuera lo que voy a hacer ahora es decirle al sistema esto es x esto es y ahora yo quiero dar contador es igual a cero contador más igual an a ver aquí por ejemplo el valor absoluto r 1 - r 2 o por ejemplo puedo utilizar la estructura if que tenía antes esto fuera al contador pero para decir que contador + + y por tanto ahora al final del todo al final de esto digo sí contador es mayor que no lo sé es mayor que 20 vamos a ver cuál es el límite no sé ahora mismo cuál es el límite pues en ese caso esto por ejemplo es blanco y esto es negro porque algo 25 52 55 255 vamos a ver qué ha pasado aquí quitar los espacios en blanco quitamos espacios en blanco recargamos vale aparece el ok vamos a ver mayor que 2 ok ahora se vale en este caso lo que estamos viendo es que hemos mejorado el algoritmo porque este algoritmo es capaz de detectar vamos a probar con 3 esto aquí y con el 5 además queda para ir detectando cuál es el punto justo bueno pues la idea es que ahora tengo un algoritmo de cálculo mejor de hecho incluso lo voy a aplicar sobre la imagen original por probar más que nada vale ahora es cuando si esto es mayor que 2 no lo sé y parece que detecta un poco mejor los bordes otra cosa que puedo hacer vamos a cerrar el siguiente vídeo otra cosa que puedo hacer como decía es aumentar el rango de búsqueda en este caso en primer lugar vamos a decir rango por ejemplo es igual a 5 entonces esto es pero menos rango esto es 0 - rango y esto es rango y así con este mismo bloque de código en lugar de ir de menos 11 vamos de menos 5 a más 5 es decir tenemos un algoritmo de cálculo más preciso pero démonos cuenta que es más lento también cuidado en este caso ahora estoy buscando demasiados bordes si contador es mayor que 20 no lo sé vale todavía muy fuerte 60 no lo sé y por ejemplo estamos buscando estamos hallando más bordes y omara y me he pasado 50 hasta que un poco encontramos en el punto intermedio pero si nos damos cuenta finalmente este algoritmo nos está permitiendo hallar bordes osea permitiendo encontrar zonas de la imagen y un poco separar empezar a separar que es cada uno de los elementos de una imagen y esto es bueno desde el punto de vista en que realmente el ser humano nos ellos y el resto de animales pero el ser humano realmente así es como empieza a ver cosas que nos fijamos en cualquier niño pequeño cuando le das un boli lo que hace el niño pequeño es pintar el contorno de los objetos un contorno que no existe realmente una línea que no existe pero sin embargo nos fijamos todos los niños pequeños del mundo mundial da igual de qué país sean de igualdad qué cultura sean todos pintan lo mismo cuando el niño dibujo un solo dibujo un árbol dibujar el contorno del sol o del árbol pero si nos fijamos en una foto no existe tal contorno vale entonces si nos damos cuenta esto se teoriza sobre que lo que quiere decir esto es que realmente los seres humanos vemos así ya que lo que hay dentro de nuestra mente en primer lugar es el contorno de los objetos y luego si vemos el sólido y el color y todo esto pero que lo primero que vemos son los contornos ver los contornos nos va a ayudar en este caso a poder diferenciar qué elementos hay en la pantalla vemos que yo ahora mismo pues podría ver que es una mancha de color pero yo aquí empiezo a ver cejas empiezo a ver ojos empieza a ver nariz empieza a ver boca empezó a ver cabeza empezó a ver vemos que buscar bordes nos permite diferenciar ciertos aspectos del aire ahora a continuación vamos contrastar vamos a comprobar si en esta imagen hay una serie de cosas llamadas features las fichas son características en las características pueden ser las que nosotros queramos pero si consultamos documentación si consultamos bibliografía relacionada con visión artificial la inteligencia artificial veremos que actualmente está bastante de moda contrastar la imagen contra cuatro sencillos marcadores que son horizontal vertical diagonal 1 y diagonal 2 digamos entonces para hacer esto voy a hacer lo siguiente voy a abrir un programa como gimp voy a crear un nuevo archivo y este archivo va a tener por ejemplo no te digo 4x4 pero si 8 x 8 píxeles aceptamos vale y ahora voy a hacer lo siguiente lo que voy a hacer a continuación vamos a ver es que voy a seleccionar esta imagen y voy a rellenarla de negro y tengo un fichero vertical y lo voy a guardar en bueno voy a guardarlo en el escritorio luego lo muevo y exportar como y lo guardo como png mensualmente entonces esto es escritorio a mí no tengo ya que bien perfecto pues ahora voy a crear una carpeta pictures sus características voy a guardar como vertical punto png ahora voy a crear otra qué va a ser horizontal punto pene voy a exportar horizontal punto png y ahora voy a hacer otra que será diagonal 1 no vamos a ver aquí desde aquí hasta aquí a ver si no me llega mucho vale bueno si no queda más remedio correcto pues mira el perfecto esto es lo voy a exportar como diagonal punto png y si lo traslados y lo vamos a ver editar nos imagen transformar voltear horizontalmente eix diagonal 2 muy bien pues ahora a continuación vamos a hacer lo siguiente necesito los datos de la imagen y para ello voy al código voy al canvas y ver pictures vertical wyss es igual a 8 píxeles height es igual a otro píxeles es horizontal esto es diagonal 1 y esto es diagonal 2 esto no debería tomarse como te diría yo como para buscar cosas en imágenes hay que usar horizontal vertical diagonal 1 y diagonal 2 más bien la moraleja es que vamos a buscar cosas sean esas cosas las que sean vale pues f1 es igual a picture horizontal o vertical el feroz efe 3 f 4 horizontal phil 0 diagonal 1 y fisher diagonal 2 vale y ahora lo que voy a hacer es que voy a cargar las imágenes por cierto también bar imagen fichero uno es igual the new image digo imagen fichero 1 punto src es igual a vertical punto png de la misma forma y mis ficher 234 34 y esto es horizontal diagonal 1 y diagonal 2 y con esto ahora a continuación vamos a pintar los pitchers en la pantalla ahora lo que queremos básicamente es introducir estas cuatro imágenes vamos a hacerlo por ejemplo aquí y es que vamos a decir que f1 1.0 image y quiero dibujar la imagen de y f1 en 0,0 esto mismo lo voy a hacer en los otros cuatro contextos el feroz efe 3 efe 4 efe 3 efecto así que si todo va bien recargamos y en un segundo veremos aparecer si es que no ha habido algún error porque puede ser que haya habido algún error cinco contextos y not found vale y esto es porque las imágenes realmente están no están en aplicaciones dentro del mar dentro de ett docs dentro de inteligencia artificial ejercicio 5 y están dentro de pitchers fecha carpetas fechas recargamos y si todo va bien en un segundo ahí podemos ver las imágenes que tenemos cargadas una cosa que pueda hacer básicamente vamos a ver lo es estas imágenes en un contexto que se vea un poco mejor ahora a ver cómo lo podemos hacer para decir por ejemplo qué esto va a estar en vivo que va a tener líderes features estos cuatro elementos van a estar dentro de ese otro elemento y ahora en el estilo en la cabeza puedo poner un estilo el cual voy a decir pitchers un wish de 512 píxeles y un high de 512 píxeles y ambas voy a decir que tengan uno guys del 50% un height del 50% y que floten a la izquierda y esto lo que va a hacer es que los elementos ahí los tenemos pues ocupen lo mismo que los propios objetos dicho esto para continuación podría decir que y los cambas quiero que flote tales tierra y así de esa forma los tenemos ordenados vale y ahora lo que quiero hacer en la siguiente parte y con esto lo que voy a hacer básicamente va a ser crear una nueva versión del ejercicio va a ser simplemente decirle al sistema que quiero comparar cada uno de estos ficheros contra las imágenes que tengo en la pantalla y quiero ver si coinciden con las imágenes o no vamos a hacerlo primero con el primero y a partir de ahí lo hacemos con los demás