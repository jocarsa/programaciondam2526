bien e voy a abrir Ink escape Cuando hacemos una petición de tipo get que es la que hemos hecho hasta ahora vale básicamente pues desde aquí desde fuera alguien viene a nuestra Api y nos dice get pedidos vale eso es fácil en el sentido de que tú me pides algo a través de una URL yo te doy un jas ya está así de sencillo pero cuando alguien quiere hacer una aplicación post es decir cuando alguien nos quiere enviar información Pues claro por una parte nos llama a una cierta URL Pero por otra parte nos va a enviar lo que llamaríamos un payload es decir payload vale una carga que en este caso puede estar perfectamente en Jason y ahí viene Hola pasa y ahí viene lo que comentábamos antes del tema de postman Vale entonces Abre conéctate Vale entonces eh A partir de aquí en el momento en el que alguien me envía un payload en Jason Pues yo tengo que ser capaz de consumir ese Jason y enviarlo a la tabla correspondiente aquí es donde cobra sentido lo que comentaba antes Beatriz del tema de postman o cualquier otra aplicación que nos pueda servir para este fin vale Yo en este caso lo voy a hacer al principio sin postman pero veremos Que obviamente postman nos servirá o herramientas similares Vale Nos servirá para automatizar todo este tipo de tareas vamos a por ello y nos vamos a dam nos vamos a segundo nos vamos a servicios y procesos vamos a servicios vale Y en sacar pedidos eh voy a simplificar un poco esto porque es que si no Esto será difícil que crezca así que dam segundo eh servicios y procesos comunicaciones en Red protocolos vale Y voy a hacer 007 include y claro si hago un include Pues básicamente vale es para que todo esto de aquí archivo nuevo Bueno voy a hacer un momentín elimino eliminar voy a hacer una carpeta nueva llamada Inc y en Inc voy a hacer un eh Dame clientes O dame pedidos.php simplemente para que el router no se nos haga eterno vale pues aquí en petición toma ya aquí vale aquí en petición corto Esto me voy a dme pedidos hago así y entonces en la Api en Case cliente digo include Inc dam pedidos.php vale más que nada para ahora poder hacer rutas Case insertar cliente vale Y pues ahora qué voy a hacer Pues voy a hacer otra cosa Ahora veremos el Qué vale y hago un break y aquí ponemos la lógica de insertar cliente bien Vamos allá vamos a comprobar que sigue funcionando después de cualquier refactorización vale local Host segundo eh servicios y procesos servicios en Red protocolos include Api y Ok vale y le digo o es igual a eh clientes Vale y tengo esto de aquí y recordamos que default y eh eco pues no para quito la o vale Y no Ah Es un Warning Okay Vale pues If is set get o en ese caso esto y así protejo esta estructura de control y le digo que solo entre aquí si realmente existe la operación vale Ok y ahora Ok vale no hace nada Incluso le puedo decir els eco no vale el eco no muy bien pues una vez que tengo esto Una vez que tengo esto Ahora me voy a Api php y le voy a decir operación es igual a insertar cliente operación es igual a insertar cliente vale insertar cliente dice eco insertamos cliente vale insertamos cliente pero claro qué inserto Pues en este caso la lógica get pues es difícil pero yo puedo la lógica post Así que payload si queréis en lugar de poner payload pongo carga para traducirlo al Castellano carga es igual a post Y a partir de aquí voy a hacer un bomp de momento carga Pero claro qué ocurre cuál es el problema cuál me diría que es el problema Pues el problema es que Cuál es la única forma que hemos visto hasta el momento de atrapar una variable post con un formulario con un form pero claro antes vale antes de utilizar herramientas como postman si no tenemos herramientas de ese tipo Pues yo tendré que ir a archivo nuevo voy a crear formularios simulacro punto html si quieres vale Y voy a hacer form input type text name nombre input type text name apellidos y input type submit que se puede hacer es un poco rollo Vale entonces yo ahora vengo por aquí y si me voy a esa carpeta Ah Perdona perdona action es igual a appi php and operación es igual a insertar cliente method es igual a post de ahí viene el post Vale entonces me voy a formulario simulacro y digo José Vicente carratalá con lo cual le doy a enviar y me dice vale Te cojo nombre es igual a José Vicente apellidos es igual a carratala esto está bien vale sin embargo diréis ostras esto de tener que crear un formulario de simulacro cada vez que quiero hacer una prueba de envío pues es un poco engorroso Vale entonces me vengo por aquí y pongo postman Chrome me instalo Insisto Hay varias vale Ah solo se puede ejecutar en chromos Perdona eh momentín A ver sí pero no momentín eh Chrome extension simulate post ya vale un momentín porque Ah Yo hace tiempo usaba una pero la tengo en la punta de la lengua vale a ver no test get post bueno algo como Esto vale venga añadimos a Chrome añado extensión Okay Vale ahora ejecuto test get post sí un momento postman Sí pero ya te digo no es que quiero algo más sencillo mira ahora verás Mira simplemente lo que quiero es venir aquí a la Api vale en Api php me vengo por aquí y digo test get post y ya está y le digo la URL es esta de aquí la URL es esta de aquí request headers request Body vale el request body a ver vale ahora nombre es igual a José Vicente le digo s error ready State mín no lo está enviando no me lo está haciendo eh lo cual es raro Por cierto nombre dos puntos José Vicente no va no me sigue dando error vale Pero bueno son extensiones como esta buscaré alguna que me funcione bien vale y os la diré recordaré la que utilizaba porque la que utilizaba estaba bastante Guay pero no recuerdo ahora mismo el nombre Vale y básicamente es una extensión de Chrome donde aquí simula un formulario le rellenas los datos le envías el formulario y el formulario lo atrapa y vale Y te dice si entra o no bien aquí a continuación vale lo que voy a hacer en este caso como ya tengo un pequeño formulario de simulacro creado Pues voy a ir con este formulario y ahora a continuación lo que quiero hacer es atrapar los datos y comprobar si los meto o no en la base de datos por lo tanto ahora digo lo siguiente Sí claro qué quiero hacer si iset post nombre sabes qué pasa no O sea quiero un token pero no lo quiero ahora vale If iset post nombre and iset post apellidos en ese caso voy a insertar en caso contrario eco error en la petición eso qué quiere decir pues que si en el formulario simulacro por ejemplo me cargo los apellidos si en el formulario simulacro le envío solo el nombre y no los apellidos Hola a ver error en la petición eh Por qué carga es igual a post nombre and set aquí esto está mal y esto está mal vale ahora sí Okay Vale error en la petición si no me envías la petición como yo quiero en ese caso va a dar error Ahora si me la envías como yo quiero si me envías los campos que yo estoy esperando ahora hablaremos del tema de seguridad vamos a ver yo ahora a continuación te digo me voy a include hago una petición y en la petición digo insert into clientes nombre coma apellidos vales y digo post nombre post apellidos vale insert into clientes nombre apellidos values este valor y este valor Vale y punto y coma vamos a ver si esto es cierto vamos a ver si esto es cierto inserto José Vicente carratalá Por cierto podía hacer un return Ok vale para que el cliente sepa que se ha insertado correctamente le doy a enviar nada sucede pero yo ahora me voy a crimson en crimson no sé si tengo no sé si tengo alguna tabla de clientes creo que no vale cliente ventas login vale ventas Mira sí clientes y en clientes veo ahí a José Vicente carratala y nada más si queréis vuelvo a probar prueba le doy a enviar recargo clientes y tengo aquí prueba con lo cual lo que acabamos de hacer básicamente bueno Esto es realmente lo he hecho por post al final básicamente lo que tenemos es que una aplicación externa me ha enviado un paquete de datos por post he realizado una primera validación muy por encima Vale y a continuación he transformado ese post en una petición de inserción sql y por en este caso pues me lo llevo al departamento de ventas donde inserto el cliente entrante dentro de vale clientes bien evidentemente si yo me meto en el temario de procesos y servicios Pro aquí servicios y procesos Pues claro técnicamente si os fijáis momento es que cargue el índice documento si os fijáis Pues el último punto que es un punto un poco compartido con la asignatura de acceso a datos pues utilización técnicas de programación segura vale un poco de criptografía un poco de seguridad mecanismos de control de acceso encriptación de la información Vale pues lo primero que puedo hacer es decir Bueno quién me envía post cualquiera que conozca la dirección de la Api me puede empezar a enviar post hasta que cuele con lo cual yo a continuación digo lo siguiente eh ponedme una clave en el chat una clave una contraseña una clave aleatoria muy compleja vale Generalmente será el teclado y hacer como el piano vale Tac a ver quién me pone algo una clave contraseña alguien vale bien me quedo con la de Albert quo la de Albert porque se parece realmente a un password de una Api bien así que yo ahora vengo por aquí y copio pego y pongo clave Así que aquí en clave cierro esto por aquí y en el formulario yo le digo a la persona que me vaya a enviar la información si tú me envías información me tienes que pasar un campo llamado Ke vale voy a ponerlo clave en español value es igual a esto que me ha dado vale esto que me ha dado Albert donde obviamente evidentemente tú tendrás eh Como te diría yo un registro donde sepas A qué cliente le has proporcionado qué clave vale pero ahora mismo Solo sé que Albert me ha dado una clave con lo cual solo existe una clave ahora mismo en el sistema con esto a continuación lo primero que voy a hacer es Modificar un poquito la Api para decirle primero si iset post key post clave Perdón and post clave es igual a lo que me ha dado Albert solo en ese caso solo en ese caso te voy a dejar insertar en cualquier otro caso en cualquier otro caso els eco acceso no permitido probemoslo probemos si funciona y dónde estás sé dónde estás aquí bien Vamos a probarlo clave formulario simulacro a envío y dice Okay me voy a crimson recargo clientes y tengo a Pero por qué Pues porque el formulario simulacro contiene la clave que me ha dado Albert si yo varí aunque sea un poquito esa clave y le pongo un tres ya no es la misma clave con lo cual ahora a continuación intento ejecutar de nuevo el formulario voy a quitar pestañas que no me sirvan intento ejecutar de nuevo el formulario y pongo bbb le doy a enviar acceso no permitido la validación de la clave obviamente está en el servidor no está en javascript con lo cual nadie me puede ver la clave es decir si alguien intenta ver el código fuente No hay código fuente que ver porque estamos en el servidor estamos en lado del servidor y por tanto no se puede ver vale obviamente a continuación para hacer esto mejor pues yo me iría local Host a eh php my admin y en la aplicación crimson pues crearía una tabla una forma de hacerlo es en sql una tabla llamada claves Api que tiene un identificador tiene un cliente Vale y tiene una clave Claro no no porque en este caso cliente es un cliente comprador pero claro quien consume mi Api no tiene por qué ser un cliente mío de la base de datos puede ser una empresa externa con la cual yo colaboro es decir un socio estratégico vale es que no sé cómo llamarlo socio o suscriptor o persona o empresa no lo sé vale pero para no mezclarlo con el concepto de cliente Vale entonces esto es un marchar esto es un marchar y ya vale con lo cual ahora le digo dragos tiene esta clave Beatriz tiene esta clave Albert tiene esta clave vale sería empresa 1 empresa 2s empresa 3 o socio un socio 2s socio 3 vale o lo que fuera con lo cual obviamente pues ahora en el código copio pego 009 eh clave desde base de datos Y ahora en clave desde base de dat Opa esto Qué es aquí en clave desde base de datos yo digo vamos a ver y aquí Vale entonces digo Inc Dame pedidos petición es igual a esto lo puedo quitar esto lo puedo quitar Select all from claves Api we eh qué we clave es igual a post clave resultado es igual a my sql query If fila Else Esto vale entonces If fila nada o sea pasas Else error de acceso mu ejecución dónde sí sí sí okay acceso correcto vamos con la inserción vale le estoy haciendo un texto a palosco evidentemente podría ser un jas vale de respuesta por supuesto y ahora a continuación vengo por aquí clave des de base de datos formulario simulacro triqui triqui envío error de acceso por qué Porque recordamos que en el formulario simulacro le había cambiado vale la clave de Alberta era un dos la mía acabado er un TR pero ahora pongo esta o sabes qué pongo la de Beatriz me da igual pongo una no solo funciona la de Albert funciona cualquiera Así que ahora vengo aquí recargo le doy a enviar acceso correcto vamos con la inserción y ahora en crimson compruebo como acabo de insertar correctamente ese registro vale Esta es insisto una forma de validar otra forma de validar es un whit list Qué es un wh list vale en yo en este caso Eh quiero atrapar Cuál es mi IP entonces vengo por aquí copio pego f2010 whitelist Y entonces en el wh list vamos a ver e Dónde lo pongo voy a hacer un nuevo archivo nuevo IP php y en IP php voy a decir eco server y dentro de server a ver espera dentro de server php server get IP address vale Y es esta server address Esta es vale server address claro yo estoy haciendo una conexión wh list IP vale desde 2.1 que es local Host soy yo mismo Espera que se me p el este el monitor sí detectaron como si fuera un ataque cuando no lo era eso Es correcto pues en ese tipo de cosas estamos efectivamente ya pero es que tú entrabas a la dgt por motivos lícitos pero es que hay otra mucha gente que intenta reventar la página de la dgt Sí lo de la clave móvil correcto Sí la noticia que dice dragos es de un chaval que ahora mismo Está En juicios pero el juicio va para largo no no que entró en la bgt y truco la expedición de carnés de conducir para una serie de personas por encargo eso no sé lo leí el otro día no me acuerdo del nombre del chaval Pero me acuerdo de la noticia Sí con lo cual Por eso te digo que claro es típico en seguridad informática de que pagan justos por pecadores Pero mira Es que a veces funciona así sabes No sabía lo de la agencia tributaria vale Yo vale No lo sé Okay vale No lo sé te piden 38 millones yo ya te digo O sea si yo fuera un hacker que no soy un hacker vale Si yo fuera un hacker claro o sea ya o sea yo hackear la página de la dgt me lo pensaría muchísimo porque digo como me pillen me voy a vivo Sí yo creo que el chaval lo hizo sin mucha cabeza sabes sin pensar muy bien lo que hacía Claro pero es que la agencia tributaria es como lo que siempre se dice del infierno que dice a ver mates a una persona o mates a 10.000 vas a venir al infierno Igualmente Pues en lugar de matar a una persona mata 10000 tío vas a venir igual Vale pues esto es lo mismo es decir o sea cómo te diría yo ya puestos a que te pillen pues tío no saques solo un carnet haz algo que ganes más dinero porque si te pillan te vas a igual Sí Exacto en fin vale la agencia tributaria eh claro Es que es eso o sea yo por no no eso sí le sale bien pero como le salga mal o sea no volver a trabajar porque lo van a meter en la cárcel de por vida Pero por qué Porque insisto porque es ejemplarizante o sea porque eh tú cómo te diría yo tú revientas una empresa privada y al gobierno a la guardia civil eso le da igual es como ya se apañar la empresa privada ahora tú revientas la página de la agencia tributaria y que sepas que se te van a echar todos los poderes públicos encima pu digo yo no lo haría Pero bueno evidentemente si el tío está en Rusia le da igual quiero pensar que el tío no es de aquí Hace un montón de años sí Pero al final Exacto Espera espera si está en el desierto vale Y ese desierto está en un país que no se que no sea europeo probablemente se librará pero lo que quiero decirte con todo esto es que la historia que os iba a contar es que yo hace un montón de años da en otro centro que no era este ni era Capitol d estaba clase de programación y había un alumno un Chaval en clase vale estábamos abendo programación que el tío era hacker cillo Pero esto que desde el primer día de clase él te lo dice vale Y un día viendo registros compruebo que el tío se había metido en la base de datos de la escuela porque es que encima El tío se había metido y tenía la misma IP con la cual entraba como alumno es como pero tío o sea es que ni te has cambiado ahí IP sabes con lo cual claro lo pillé y no le ocurrió nada porque no le hicimos nada pero yo le dije si tú revientas una base de datos de un centro de formación que no sea el de tu centro de formación es que era eso o sea él lo hizo sin ningún tipo de malicia porque luego estuve trazando lo que había hecho y no había hecho nada había entrado simplemente para ver y para demostrar que podí entrar O sea no había entrado con ninguna malicia pero es como tío O sea si tienes que robar no robes en tu casa o sea no robes en tu centro de formación revienta otro centro de formación sabes entonces Pues sabes pues en fin Sí pero es que eso de a lo grande su nada pues claro y luego también lo que comenta dragos que es Sí si no probablemente probe pero también hay que tener en cuenta que si revientas algo demasiado grande lo que te puede caer encima también puede ser demasiado grande vale luego también lo que comenta dragos que es el clásico de los hackers informáticos que es ese clásico de que o lo meten en la cárcel o le ofrecen trabajo bien vale Yo ya os digo yo no soy hacker y yo no me la jugaría probablemente Mira te metemos y si quieres salir entonces trabaja para nosotros rollo película americana sabes Sí probablemente Vale pues voy a averiguar Cuál es mi IP voy a aver igual Cuál es mi IP If config Vale mi IP es 1981 210 vale Así que 19 2 16 8 1 21 Okay con lo cual ahora mi IP es esta de aquí pero no porque yo la haya trucado vale sino que es mi IP real con lo cual a continuación sí no pero ya te digo yo es que o sea eh cómo te claro para una casa de papel claro yo aquí os enseño a programar pero no a hackear Pero en fin yo que sé talento es talento al final sabes bien entonces y ahora mismo por aquí y entonces digo Aquí en la Api A ver pues dragos sí eso si quieres sí lo que pasa yo tenía a un tío en linkedin conectado que últimamente ya no me da por culo que el tío a mí como luego le estuve investigando y vi que hacía lo mismo con un montón de gente el tío cada vez que yo hacía una aplicación de estas chorras que hago yo en mi servidor vale el tío me decía Oye he reventado tu aplicación y he visto la tabla de no sé qué y yo le decía vale Pero te has dado cuenta de un ejercicio de clase quiero decir O sea sí pero no has reventado nada Sabes trabajaba Yo hace muchos años en un centro de formación tenía en mi linkedin y un día me dice oye que sepas que he entrado en el centro de formación y he visto la tabla de alumnos y yo en linkedin le decía eh Mira Me parece muy bien eso con conversaciones de linkedin sabes y yo le decía eh mira yo ya no trabajo en esa empresa con lo cual no es mi problema que hayas entrado en la tabla de alumnos decía cont directamente con esa empresa y apate con ellos sabes pero es como eh dragos yo si fuera hacker no haría eso porque técnicamente cuando estás entrando en un sitio donde No tienes permiso claro no es delito porque no está a tipificado como delito Pero yo lo veo como inmoral Vale entonces es como si yo entrara en la casa de alguien entrara sabes forzando la puerta y cuando viniera la gente me encontrara sentado en el sofá claro y yo le dijera sentaros en el sofá que os voy a contar cómo lo he hecho o sea yo creo que lo mínimo que me podera pasar Es que me cayera un palo en la cabeza y que viniera la policía a sacarme de la casa vale pues esto es lo mismo pero indigital pero yo os lo digo y os lo repito una y mil veces no soy hacker no tengo la mentalidad hacker no entiendo vale porque la gente lo hace Yo solo sé que no lo hago Pero una vez más Bueno eso digo aquí pero básicamente Por más que averigüéis de mí No vais a ver que haga nada A menos que lo esté ocultando muy bien que lleve una doble vida hacker vale Pero quién sabe igual esto de los cas y los tokens lo hago por lo otro sabes No lo sé pero bueno sí Albert yo siempre he visto eso porque aparte el perfil hacker es muy de persona muy joven sabes y es como cuando uno crece es como realmente te gusta ser hacker o te dedicas otra cosa más provechosa en tu vida pero yo que sé pero en fin bien bueno y luego lo del tema de la competencia de luego fardar a ver quién ha entrado no sé dónde es algo que tampoco nunca he entendido Pero vale bien entonces Mirad yo ahora a continuación me vengo por aquí un momentín vale Y por aquí Espera que te lo digo e dónde estás aquí If Vale pues yo ahora vengo por aquí y digo If server estoy en whitelist sí y server address es igual a 192 168 1 no me acuerdo 21 e aquí Ok vale esto quiere decir que nada pero en caso contrario Die error de IP no admitida Así que yo ahora vengo por aquí sí Ahora voy a eso efectivamente vale muy bien me has visto la intención o sea yo de momento lo estoy metiendo esto estático pero ahora evidentemente a cada cliente le voy a aceptar una clave y un servidor correcto Ahí vamos no no ahora hablamos de eso no la empresa no debería ahora te lo demuestro pero bien pensado pero ahora verás que no vamos a ver mira y ahora vengo por aquí estoy en wh list vale me voy al formulario me voy a enviar triqui trii trii triqui le doy a enviar Hola Qué ha pasado algún punto y coma que no he puesto Sí este punto y coma vale Ok recargo vale acceso correcto vamos con la inserción y acceso correcto vamos con la inserción pero si ahora intento entrar desde local Host a envío Hola Ah Sí perdón acceso correcto vamos con la inserción error de IP no admitida no lo había leído vale con lo cual Eso quiere decir que solo Sí está debajo pero como no le he puesto un br Exacto pero está cogiendo el servidor vale con lo cual ahora evidentemente muy bien tal y como has dicho la siguiente parte lo implemento Y ahora te digo el Por qué la IP dinámica no es un problema en este caso 011 IP en base de datos vale con lo cual yo ahora en la base de datos me vengo por aquí me voy a estructura me vo voy a crear una columna nueva lo llamo IP servidor eh varchar 255 Aunque se por todas partes pero bueno podría ser ipv6 y en IP voy a meteros a todos esta ip de aquí vale con lo cual a cada uno le digo la clave y el servidor desde el cual le Admito la conexión lo cual quiere decir que ahora vamos a ver esto fuera y dig Ah no Perdona No no no aquí esto correcto y ahora si server address es igual a fila IP servidor Vale ahora la IP servidor está siendo contrastada con contra la IP actual vale Lo cual quiere decir un momento un segundo no dónde estoy IP en base de datos formulario simulacro estoy en local Host vale envío y error de IP no admitida pero ahora me voy a 92 168 1 eh No me acuerdo Espera a ver va quita aquí 21 eh aquí a envío y acceso correcto vamos con la inserción ahora en cuanto a la pregunta que acabas de hacer si yo me meto en mi onos y yo le doy a Iniciar sesión y yo me voy por ejemplo a uno de los servidores que tengo contratados puede ser un vps puede ser un dedicado claro un compartido igual no vale pero es que para hacer algo profesional pues mínimo un vps Y encima que ya veis que son baratos Vale entonces yo vengo aquí me voy a seleccionar puedo el que quieras y si lo comprobándose con mis vídeos vale de semanas anteriores os daréis cuenta de que la IP que tengo en ese servidor es la ip misma la misma IP siempre es una IP fija vale De hecho si no fuera fija en el ftp no podría Conectarme a ese servidor vps y lo tengo pillado por IP entonces ahí hay diferenciar una cosa Esto que os voy a contar es un poquito más de sistemas y redes eh las ips vale teóricamente No no puedo no puedo a través de una red no puedo Ojalá pudiera pero no puedo si el servidor no revela su IP o sea yo a través por ejemplo de php no puedo cazar la mac de ese equipo Ojalá vale porque la mac sí que es única claro si estás dentro de la intranet Sí pero desde fuera desde una extranet no puedes pillar la mac Ojalá pudieras aunque también te digo que seguro que lo utilizarían para hackear pero bueno entonces si yo tengo 255 256 realmente por 256 * 256 que son las cuatro posiciones de una ipv4 256 son los valores admitidos Eso quiere decir que yo puedo tener un máximo de cu 4000 millones de dispositivos conectados a una red vale 4000 millones qué ocurre parece un número grande pero en el momento en el que cada uno de nosotros tiene un portátil y una torre y un móvil y una tableta y un teléfono o sea y un reloj inteligente que también lleva IP vale en el momento en el que empezamos a multiplicar fíjate estamos en este aula aquí qu tecitos Pero tenemos no sé cuántos equipos vale cada uno de ellos tiene una IP en este caso privada V la IP que cuenta en tame es la del router la IP pública hacia fuera qué ocurre que con ipv4 en principio Parece que la piscina de ips en un momento se puede agotar para eso hace unos años como sabréis sacaron el protocolo ipv6 donde el protocolo ipv6 tiene un montón más de Rango pero sin embargo con esta pregunta que acabas de hacer te diré que muchos de vosotros tenéis en mente el concepto de IP dinámica la IP dinámica es una IP que te da a tu proveedor de servicios cuando tú eres un particular Exacto Ellos tienen contratado un Rango y ellos correcto si tú esto variará con el tiempo lo normal es que te den una IP dinámica ahora tú puedes contratar una IP fija con tu operador antes tenía un coste últimamente ya directamente no tiene costes simplemente lo pides y ya está Vale entonces Eso es así lo del tema de las hiper dinámicas en equipos domésticos ahora en equipos empresariales y cuando tú contratas un servidor evidentemente se supone que el servidor lo utilizas para algún tipo de fin empresarial las ips son siempre estáticas con lo cual si yo contrato un servidor ese servidor tiene que tener siempre la misma IP porque es que si no Además sería un cachondeo es decir el servicio dns es el que conecta los dominios con los servidores y es el que dice cuando alguien pille jocar.com.mx no no verás cuando tú tienes el iceberg vale Y tu cliente utiliza una aplicación tu cliente en el lado del cliente tiene una IP doméstica digamos pero cuando te conectas de iceberg a iceberg fíjate la flecha no se está conectando la parte de cliente se está conectando la parte de servidor por tanto en ese caso o sea aunque tu cliente tenga ips dinámicas pero la IP del servidor que es que maneja el sistema de gestión del cliente ese será estática vale con lo cual no hay problema Por ello eventualmente si el día de mañana tu cliente por los motivos que fuera que pueden haber motivos claro cambia de proveedor y cambia de IP te comunica la nueva IP actualizas la base de datos y santas pascuas O sea que no hay problema y luego también dependiendo de cómo te diría yo dependiendo de la relación que tengas con el cliente o de la lógica de negocio tú me podrías decir Oye y si un cliente me puede llamar desde tres servidores diferentes pues no pasa nada hacemos una tabla externa en la tabla externa hacemos una clave foránea aquí a clave y permitimos que un cliente pueda tener varias ips y no pasa nada también te digo otra cosa igual lo que podría hacer aquí es declarar para un mismo cliente Albert pues varias claves y varias ips y ya está y no hace falta que haga una tabla externa vale Cuando digo claro ahí quiero llegar vale siempre evidentemente depende del caso porque lo que te iba a decir es que dentro de que la pirámide que estamos construyendo Ya se está haciendo compleja No quiero complicarla más de lo estrictamente necesario Claro que iba a poner ese mismo tipo de ejemplo ahora bien Estamos hablando de un Amazon o algo así pues Oye se complica todo lo que se haya que complicarlo vale Yo ahora mismo estoy creando una Api únicamente para consultar algo de una aplicación donde estoy cogiendo clientes si yo voy a clientes pues ya está clave IP Yo creo que es suficiente ahora si fuera una aplicación que tuviera datos sanitarios datos bancarios pues le pondríamos las medidas de seguridad que hagan falta el qué Ah vale Sí por eso te iba a decir vale Okay Venga pues vamos a ver claro con todo esto voy a reestructurar un poquito más el código porque estamos haciendo una Api como programa suelto dentro de la asignatura de procesos y servicios Pero obviamente al final Nuestro objetivo es meter esto dentro de crimson es decir integrarlo dentro de la aplicación vale simplemente lo que voy a hacer en este caso es eh reorganizar 012 reorganizar Y nada me voy a ir aquí a reorganizar Ey así vale Okay me voy a Api en Inc le voy a decir insertar cliente php vale con lo cual me voy aquí a insertar cliente cojo todo esto me voy a insertar cliente Okay Vale me voy a Api include Inc eh insertar cliente.php y así se nos queda un router bonito vale porque si no es que es un lío de código cuando realmente todo se reduce a esto se reduce a rutas y cada ruta con su lógica y luego pues ya sabéis por aquí que puedo crear un error.php y en error.php cojo esto lo pego aquí y luego en Api lo que hago es include Inc bar error.php vale Y ya está bien con esto a continuación ahora haremos un momento un descanso y ahora voy a salir 10 minutos Vale y vuelvo y ahora la vuelta nos meteremos en acceso a datos un mí vamos a ver un segundo el documento vale acceso a datos aquí y un poco para echarle un vistazo esto no quiero el índice aquí manejo de conectores mapeo relacional aquí vale No esto es componentes bases de datos documentales relacionales mapeo relacional vale Okay propiedades atributos Vale pues Ahora meteremos esto dentro de crimson Okay pues venga un pequeño descanso eh detengo la grabación ahora en 10 minutos nos reconectamos yo me quedo por aquí conectado como siempre en acceso a datos y