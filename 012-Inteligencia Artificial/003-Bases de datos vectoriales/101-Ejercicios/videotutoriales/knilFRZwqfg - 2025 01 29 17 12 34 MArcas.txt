continuamos voy a hacer una pequeña implantación vamos a ver que cierre todo esto eh en file cila ahora a continuación esto es escritorio vale estos son los logos esto es la aplicación lanzo Esto me voy al servidor Esto no es el servidor no O sí no Esto no es el servidor he cerrado el servidor no el servidor está en el otro monitor vale Y no de servidor js me voy otra vez y vosotros también aquí vale Y ahora Pues entro como José Vicente y digo Hola qué tal Y si bien e errores vale Por qué Ah sí Perdón sí sí errores porque recordamos que tengo que editar un momentín No entréis todavía recordamos que tengo que editar a ver eh old Go Ah Ah chat Noe Vale entonces en cliente digo que no es local Host sino que es 27.160 28.9 restauro por aquí recargo vale Soy José Vicente digo Hola vale Y ahora sí pone Hola con lo cual escribid algunos mensajes vamos a probar que funciona correctamente Vale y vamos a comprobar que pues podemos utilizar node tanto para hacer aplicaciones en local como para hacer aplicaciones en servidor vale colocad me algún mensaje poned algún mensaje para confirmar que funciona para confirmar que todo va bien vale alguien dice probando Fran dice probando en este caso vale menos mal pues el color que nos ha asignado Ahora parece bastante diferente no como antes que por casualidad eran prácticamente iguales vale incluso con emojis veo que estáis ahí vale probando los emojis Agustín dice ok Vale dice emoji y básicamente Pues comprobamos que tenemos una aplicación que está funcionando e insisto vale insisto una vez más bueno voy a insistir en cosas que podemos ver y voy a aprovechar para contaros cosas que no podemos ver que no son tan evidentes lo primero es que eh tenemos una aplicación que no de momento no ha requerido ningún tipo de base de datos vale Es simplemente una aplicación que está guardando la información en la ram en pruebas en semanas anteriores hemos visto que nodejs era muy rápido era extremadamente rápido lo cual quiere decir que vamos a poder gestionar eh una gran cantidad de peticiones con mucha ligereza vale Y eso quiere decir que tengo un servidor pequeño pero no hay ningún problema Por ello porque eh lo voy a poder gestionar sin ningún tipo de problema y ahora a continuación quiero decir que voy a poder acoger un montón de peticiones sin ningún tipo de problema y ojo Hoy estamos Empezando por algo sencillo vale por algo suave pero a partir de ahí en las próximas semanas los próximos meses ahora dentro de unas pocas semanas pues hacemos un parón por el tema de exámenes vale Pero una vez que retomemos a full el tercer trimestre Pues veréis que con esto vamos a poder hacer juegos en línea vamos a poder hacer sistemas de videoconferencia sistemas de audioconferencia vamos a poder hacer una barbaridad de cosas vale es increíble Por eso digo que no de y bueno evidentemente como os podéis imaginar en el momento en el que creemos un sistema de videoconferencia pues probablemente el servidor Pues será mucho más tendrá que ser más potente que un servidor de chat vale porque un servidor de chat es Eh Al final son textos vale con esto lo que quiero decir es que no Djs es maravilloso Pero no es milagroso vale No hace milagros obviamente bien pues vamos a modificar esta aplicación para que eh Por cierto que también deciros Aprovechando que comento esto de los exámenes que estamos a vamos a ver estamos a dónde están mis exámenes Ah no marzo Perdón vale estamos ya a 29 eh estamos a pues dos semanas de los exámenes vale Lo cual quiere decir que esta semana Estamos trabajando con njs pero la semana que viene pues ya tocará ir empezando a hacer simulacros y a hacer presentaciones y a hacer preparación y a y En definitiva a preparar los exámenes de primero que Serán como estáis viendo el día 14 y el día 15 vale o sea que pues vamos avanzando contenido de tercer trimestre perdón pero en un momento dado pues ya sabéis que haremos parón prepararemos los exmenes hacemos los exmenes y ya a la vuelta de los exmenes pues continuamos la docencia vale bien pues vamos allá y ahora a continuación Quiero llevar esta aplicación más allá y quiero hacer una aplicación que a la izquierda tenga una ventana de usuarios para ver si hago chats privados o ver si hago un chat común para ello vamos a hacer lo siguiente ahora sí que le voy a empezar a pedir aquí cosas y digo vamos a ver y digo this app with this js cuidado qué ha pasado ahí vale with this server js Ah no tú esto caray espera ahí vale cliente ahora sí vale with this server js with this css ya que estamos voy a usar el o mini please make save a list of users on server dos on Main ui show a left Pain with user list and a right Pain with messages current TR on left Pain Let user Let current user click another user to Start a private chat and put a link on user list to Access general chat everybody can talk to everybody dar is implement the concept of a global room and private rooms vamos a verlo vale vamos a ver Esto es el servidor vale el servidor tenemos users Fran Lo que comentabas vale una lista de usuarios tenemos chat rooms vale una lista de salas Mira Fran generator user ID y Fran parece que chat gpt te haya leído los mensajes ma pun Random vale o sea está generando un ID aleatorio vale fantástico y ya está Y a partir de ahí crea rutas vale crea Rutas para cada una de las salas muy bien Esto es el servidor Espérate porque yo lo que voy a hacer ahora es copiar f2008 y multisala vale Y aquí en el código no en el código html no dejs multisala eh Bueno vamos a empezar por servidor vale Ok vale update the ui muy bien update the ui vale el left Pain y right Pain Ok update css de hecho me lo ha traído todo vale Ok y hasta la línea 130 y más muy bien y e Ya está no Ah sí vale Y aquí me dice un método más muy bien persistent storage for a Production en viron considera usar una base de datos Ok user vale sea esto son cosas que efectivamente tenemos que hacer en próximas sesiones muy bien vale perfecto y aquí en cliente Pues voy a meter esta ruta vamos a ver si funciona todo la primera no lo tengo yo muy claro pero vale esto es el servidor Este es el servidor remoto esto de momento no este es el servidor local paro CD ls c008 no de servidor vale vamos a local Host recargamos Ok Mola bien Hola No error Ok leches consola null setting on change muy bien y digo full js client code please porque parece que al Alo ha cambiado en la ui pero de momento la ui la ha hecho bastante Guay de hecho fijaos que en el title me ha puesto jok carsa chat y eso que yo no le he dicho que soy jok carsa Pero bueno ya me conoce al parecer Oye y yo Cómo puedo saber quién soy yo ostras claro vale a ver vamos a ver eh copio Ah creo que ya estoy viendo lo que pasa vale Okay recargo Ah ahora vale José Vicente muy bien Ahora Hola vale Y ahora voy a abrir otra sala y ahora soy Juan Vale y tengo Hola vale Pero ahora pincho a José Vicente qué tal Okay a ver Juan Hola vale en principio yo creo que el chat privado con Juan no está funcionando vamos a verlo en la sala global sí que parece que sí pero en la sala particular Hola yo creo que no vale Yo creo que no Entonces vamos a ver entonces vamos a ver vale vamos a ver porque en el servidor De hecho no estaba diciendo nada no vale Y digo I am Afraid that private rooms Are Not working correctly o se I Can Send messages no One reing them vamos a verlo vale vamos a ver esto es el cliente y ahora calculo que me hará el servidor esto es el cliente Ah final vale Okay vamos a recargar José Vicente Ah y Jorge vale Okay ahora soy Jorge llamo a Juan vale Hola vale ahora chat con Jorge Hola qué tal Ah sí recargo vale Oh Jorge Juan Vale ahora chat con Juan ya no sé quién soy Jorge vale Jorge Hola qué tal y Jorge Juan Hola qué tal yo estoy bien vale el problema está en que eh claro una vez que me salgo luego no me deja volver a el mismo usuario lo cual obviamente puede ser un problema vale con lo cual Pues voy a decirle algo así como que Eh me deje el mismo usuario si estoy desde el mismo ordenador en este caso pues claro cómo podría yo validar que mi usuario es correcto un correo elico y Alo as no nos vamos a meter todavía en ese Vale entonces Vamos allá a ver un momento que estoy pensando si formateo esto un poco más bonito pero bueno ahora luego lo formatear vale a ver Now works perfect If a user logs in with a name then closes then reloads window and tries to log with same name application that username is taken already taken so Let a user retake its own user name Maybe putting some kind of key on local storage Maybe using some kind of Hash you me vale o sea le propongo un par de cosas pero un poco que la aplicación sea la que me diga qué es lo que quiero hacer o qué es lo que voy a hacer Perdón vale vamos a ver vale en server Ok me voy a server Side Ahora me voy a cenide y yo creo que ya vale Okay Ok me voy a cenide el servidor lo arranco para que se dé cuenta de los cambios me vengo aquí ingresa tu nombre Soy José Vicente le doy aceptar Hola y ahora recargo y ya no me pide mi nombre porque recuerda que soy José Vicente vale Okay Venga pues voy a formatear un poquito esta aplicación y ahora la subo y la probamos y ahora de hecho posturear un poco y tal vale Pero antes de ello vamos a ver me quiero ir a index.html.erb font size 12 píxeles vamos a verlo Wow qué puñetas ha pasado Aquí tengo a ver aquí Ah user list vale Okay en user list algo así bien entonces ahora vamos a ver en userlist en el estilo voy a decirle text Aline Center Ok y ahora en usuarios Vale pues en usuarios le voy a decir que text Vale ahora por cada uno de los usuarios le vale usuarios le es este color Qué es y este color que es bueno hay un gradiente vale background White color Black usuarios Li esto Qué es un a Li sí Li a es text decoration known color inherit vamos a verlo okay Vale y ahora eh padding de 10 píxeles y Border radius de 5 píxeles Okay eso ya Mola un poquito más bien Pues bueno vamos a por ello jarsa antiy White voy a subirlo un poquito más 15 píxeles vale una cosa así y ahora ya estamos en posición de probar Esto vale arriba esto se va a llamar jarsa anti White lo vamos a poner el favicon vale que es anti White y ya está Vale y ya podemos a hacer un deploy contra el servidor vamos a por ello vale estoy probando si me falta algo Pero bueno vamos a vamos allá así que cojo la aplicación me voy al ftp cuidado lanzo la aplicación me voy al servidor en el servidor no de servidor js me voy al servidor ingresa tu nombre ya podéis ingresar todos Así que José Vicente Ay error al registrar el usuario Por qué pues vamos a ver por qué A ver Juan error al registrar el usuario a ver vale vamos a ver file to fetch a ver en local funciona Hola en remoto no funciona cliente js en 50 Ah muy bien Cómo que cliente js Okay Ah Sí perdón caray siempre igual vale Y sí claro es que caray es que no me acuerdo de que tengo que venir aquí y en Old l en go en chat node que ahora se convertirá en antiy White Pues aquí donde pone local Host pues ya no es local Host sino que es 2 17.10.2 28.9 Así que hago así me voy a local Host me voy a local Host Ya está no me voy a local Host me voy a local Host y ya está Vale ahora recargamos o sea no esto es cente vale o sea que ahora recargamos me voy a José Vicente recargar para que se dé cuenta al cliente de los cambios me voy a José Vicente Oh otra vez momentín espera para navegador nuevo Vale ahora creo que me ha pillado José Vicente con lo cual escribo Hola No error a enviar el mensaje Okay a ver nombre de usuario José Vicente Uy ahora me dice que mi conexión a internet es inestable vale fantástico vale Fran dice hola yo digo Hola Ok Vale tengo a Fran estoy en la sala global y ahora a continuación voy a pinchar en Fran y digo Hola Fran qué tal vale Y si todo va bien vale a Luis también lo tenemos por ahí pues vale vemos cómo vale Aquí está Fran vamos a ver Luis Hola Luis vale me voy a la sala global Luis dice Hello vale con lo cual pues vemos cóm Voy a poner aquí f11 vale ahora luego capturar ahora mismo no Pero vale Pero veis como En definitiva pues tenemos los iconos Ah sí vale puede ser sí se han roto vale un poco bestia vale porque me aparecen todos los iconos No pasa nada vale ahora luego miramos qué pasa con los iconos se han roto me los pone todos Pues bueno no pasa nada vale De hecho voy a indicarle al programa que quiero esto igual lo implemento en caliente un momentín no os vayáis Vale y eh Ok absolutely perfect but emoji selec seems to have Broken Because before it would Let me Select a single emoji clicking on it but now once i click on an emoji it takes the full load of emojis vale vamos a hacer que lo recupere voy a implementarlo en caliente y ya estáa vale Así no hago pues o sea desarrollo producción y lo subo y ftp y todo eso lo que pasa es que intento que no cojáis la costumbre de editar en caliente Pero vale intento enseñaros la forma más limpia de probar en producción lanzar a desarrollo y todo eso Pero bueno hay que reconocer que cuando estamos probando un software en línea pues Vale eh un momento no puedes reiniciar las ventanas de los navegadores puedes recargar vale pero de hecho eso no lo hace necesariamente node eso es más bien javascript en el servidor pero Sí vale puede enviar un mensaje al cliente para forzar un window pun location que eso básicamente lo que hace es recargar la página también se puede hacer con php Pero lo bueno que tiene node es que lo puede hacer dinámicamente lo puede hacer cuando tú quieras mientras que php solo lo puede hacer la próxima vez que cargues php vale Así que venimos por aquí y Oh tío en serio no bueno ostia bu bueno va da igual voy a hacerlo así va realmente al final es mejor meter cada emoji en un spam Así que esto es Index Espera espera vale dónde estoy aquí esto es Hola Esto es Index vale esto es css vale esto es javascript y el servidor parece que no se actualiza cliente esto ocupaba 252 Ok vale vamos a probarlo recargo esto es José Vicente bench error ese es el problema vale Juan error Ah no vale Juan error Ah no V quieto quio quieto No entréis todavía porque me lo sigue poniendo como local Host Vale entonces esto es buscar y reemplazar local Host lo reemplazo como 1660 2 2889 reemplazar todo guardo y claro ahora tengo que cerrar esta ventana abrir una nueva Ahora sí vale Y ahora digo Hola y entonces vamos a ver sí Fran eso es Vale ahora vamos a eso pero sí esa es la e Ah me ha roto Esto vale No pasa nada bueno vamos a probar esto Cojo un emoji incluso ahora está más bonito hay que decirlo vale eh voy a des romper eso aquí html no de 25 pero sí Fran si estás pensando eso es que estás cayendo en Las garras del de no de js porque eso es lo que quieren exactamente Vale entonces Esto me lo llevo a userlist vale esto por aquí fuera ahora será gigantesco vale no esto no va Aquí Esto va a user list vale Okay y ahora el estilo Okay el estilo lo paso al estilo vale Y bueno y nada y luego pues en user list vamos a ver en userlist le había puesto esto por aquí luego había puesto usuarios text Aline left Ah y había hecho una cosa muy importante claro espérate había hecho una cosa muy importante que sí que me interesa recuperar que es usuarios le y usuarios Lia Eso sí que me interesa vale Okay bien Ahora sí Bueno ahora luego posturear remos un poquito Ahora luego reiniciar el servidor vale Y ahora Luego hacemos una prueba y chateamos un poco y así pues lo grabo y lo subo y tal vale y ahora a continuación vamos a hacer un descanso un momento a ver si tengo algún correo de prácticas que responder ahora a continuación continuamos vale Y hacemos otra prueba hacemos otro otra demostración de cosas que podemos hacer mediante no dejs e insisto vale cosas super wise que sí que podemos hacer con no dejs que no podíamos hacer hasta el momento con Apache y cosas que en un momento dado pues podremos luego combinar más adelante vale Así que para un momento grabación vamos a hacer