vamos a comentar un poco el código vamos a ver si podemos ponerlo en marcha antes de programar esto de aquí vamos a ver 9 % de momento ahora veremos a continuación y ahora digo creo una variable para el mejor ángulo en cada barrido y la inicial hizo ahora creo una mejor distancia para cada barrido y la inicial hizo ahora aquí lo que hago es miro la distancia actual y me pregunto si es menor haber un momento el momento no he hecho al revés creo si es mayor que la a distancia mejor esto tiene que ser cero y esto es mayor que pero al revés en el caso de que sea cierto actualizo el valor de la distancia le asigno también el valor del ángulo es importante y bueno y espero 50 milisegundos pero 50 milisegundos antes del siguiente giro y esto de aquí no son más que mensajes de puerto serie para ver lo que sale para tener una cierta idea de si lo que está saliendo es correcto o no espero 100 milisegundos y devuelvo el servo 180 a mirar hacia adelante vale con esto ya puedo empezar a probar el código yo creo que está suficientemente sólido lo acabo de tocar creo que está suficientemente pegado vamos a probarlo me da un poco de miedo como ya sabes pero bueno vamos a probarlo vale vamos allá a ver ahora pongo esto aquí y ahí vemos lo que está haciendo con suerte no se despega quiero esto quiero lanzar el programa vamos a ver un momento que me ha vuelto a cambiar el módem pero vemos cómo está haciendo lo que yo quería es decir vamos a ver que está cargando sabemos como esto mira hacia adelante ahora hace una batida vamos como ahora va más lento vemos cómo va más lento hacia una latina está mirando alrededor ahora mira hacia adelante ahora vuelve a hacer una batida vuelve a hacer una batida vuelve a ser una batida vuelve a hacer una batida y vemos que ahora quiero sacar el puerto serie momento y voy a hacer esto desde incluso unos 30 hasta 150 vamos a lanzarlo no hace falta que me haga los 180 grados avanza para ahora esto hace esa batida vemos como el sensor de ultrasonidos está haciendo una batida y vamos a ver el puerto serie que nos dice aquí el monitor serie he sacado el monitor serie por qué vale y me dice me estás sacando los ángulos ahora los pares pero vemos qué me dice que sepas que la mejor distancia es 264 y que sepas que el mejor ángulo es lo que sea voy a parar voy a quitar este sería el print que no lo quiero ahora para nada y bueno tendría que hacer alguna prueba para comprobar si es cierto que esa es la mejor distancia me voy a fiar ahora el sistema barre efe que sepas que la mejor distancias puede ser me parece demasiado pero que sepas que el mejor ángulo 56 de hecho si todo va bien debe dar más o menos el mismo resultado no lo está dando pero bueno 32 cada vez me está diciendo un ángulo lo cual es un poco extraño cuando menos y voy a hacer una cosa esto luego lo podemos ir y podemos seguir cambiando delay de 150 vamos a lanzarlo lo que voy a hacer ahora es que en lugar de girar ángulo va a girar cada 10 ángulos vamos a verlo y ahora es mejoran unos 140 eso lo dudo bastante mejor algunos 70 vemos cómo cada vez defiende una cosa 140 ahora mismo dónde está que se encima de la mesa la verdad es que no es muy fiable 140 ha vuelto a sacar 97 140 y hacer una cosa voy a tapar todo este ángulo con la mano el ángulo es 70 no lo creo así que parece que lo está haciendo bien vale vamos allá vale pues ahora en este programa lo que tenemos que hacer es que el sistema gire ah vamos a ver voy a parar a la que tenemos esto lo que quiero ahora voy a parar esto