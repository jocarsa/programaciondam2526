introducimos ahora un segundo servomotor de hecho el modelo es el mismo que la anterior aunque el accesorio que vemos aquí sea un poco diferente pero es el mismo modelo exactamente de servomotor que tenemos funcionando en la pantalla a ver dónde lo puedo meter que lo veamos bien y vamos a ver aquí y conectamos también tanto su grande que lo tenemos aquí y yo tenemos como su alimentación aquí lo tenemos falta poco como su patilla de control así que en este caso vamos a verla aquí la tenemos vamos a conectar la patilla de control en la siguiente pista en la número 9 así que por tanto ya tengo habrá conectado este segundo servomotor y vamos a incluirlo dentro de nuestra programación por tanto en este caso pues voy a decir mi motor 1 para el primer motor vamos a decir mi motor 2 para una segunda instancia del servo voy a decir mi motor uno acá en el número ocho mientras que mi motor 2a touch está asociado al número 9 y en este caso lo que voy a hacer es decirle que mi motor 1.0 mi motor 2 puntos raid aunque no parezca normal en lugar de 0 le voy a decir 180 esto es porque vamos a cargar el sketch cuidado vamos a ver mi motor no está declarado en este scope aquí está mi motor uno aquí lo tenemos así que lo que ocurre en este caso ahora lo veremos es que cada uno de los dos motores vamos a verlos ahora cuando vuelva a la normalidad cada uno de los dos motores están ejecutándose en la misma y pronto en sentidos contrarios están ejecutándose en sentidos contrarios simplemente por que cada uno de los motores va a alimentar a una de las dos ruedas principales del sistema por tanto por eso es normal en este caso que cada uno de los sentidos vayan en sentido contrario y esto es lo que quiero por tanto por eso quiero que uno vaya a cero otro vaya a 180 y esto equivale a que el robot esté en funcionamiento además vemos como al haber metido la fuente de alimentación no hay ningún problema porque ahora los dos robots ahora las dos ruedas están funcionando perfectamente a la vez bien pues ahora además lo que quiero es decir que cuando ponga algo delante del sensor mi motor 2 wright 0 recordamos que esto es el motor para los dos el motor para así que cuando lanzó el sketch y lo que tengo en este caso vamos a verlo ahí está a ver vamos a ver parece que hay algún tipo de problema bien lo que va a ocurrir por tanto es que si pongo la mano delante del sensor los dos motores paran durante tres segundos aquí está y de hecho si sigo poniendo algo delante lo que hacen los motores es parar los motores es no continuar hacia adelante hasta que no se retire es el obstáculo que estaban detectando bien lo que voy a hacer ahora por tanto va a ser lo siguiente no déjame un segundo que pare vamos a verlo es esto guardo el cargo el sketch y voy a hacer lo siguiente lo que quiero de momento es que los motores estén parados vemos como tenemos algo de tensión residual por eso los motores están todavía un poco en movimiento pero quiero que sólo cuando los dos aquí están solo cuando aquí está hay solo cuando los dos resistor es de los fotorreceptores capten luz sea cuando realmente el sistema se ponga en marcha así que sí es cierto foto 1 principio - lectura analógica es mayor que 0 creo que esto tenía que ser al revés ahora te lo voy a decir abrimos el serie hemos quitado vale si está mal y vamos a ver qué pasa si iluminó el sistema vale lo que ocurre es que se van a negativos lo que quería saber solo esto es menor que 0 y también es cierto y también es cierto qué foto del principio - anna lou reed hacer esto un poquito más se es grande es menor que 0 solo en este caso es cuando quiero decir al ratón mi motor raid 0 y motor raid 180 solo en el caso de que ilumine al robot con una linterna por ejemplo quiero que se ponga en marcha así que guardamos recargamos y vemos como el robot está en marcha lo que hago es iluminar lo y sólo cuando la iluminó es cuando se pone en marcha retiro la iluminación vamos a verlo claro ahora se ha puesto en marcha evidentemente tengo que tener un mecanismo de poder pararlo así que voy a hacer lo siguiente voy a decir que esto es menor que menos 20 por ejemplo esto es menor que menos 20 en caso contrario mi motor raid en caso contrario quiero que los motores paren por tanto guardo recargo de enero tenemos iluminó el sistema y al iluminar el sistema observamos como los motores se ponen en marcha pero cuando retiro la iluminación los motores paran iluminó el sistema y los motores se ponen en marcha retiro la iluminación y los motores paran pero si iluminó el sistema y pongo un obstáculo en este caso los motores paran hasta que se vuelven a encontrar el obstáculo este es de momento el funcionamiento de nuestro robot es decir lo que tenemos ahora mismo en la pantalla es que sólo cuando iluminan el sistema es cuando los servomotores se ponen en marcha y cuando el sistema se encuentra un obstáculo es cuando realmente pues se produce esa colisión estoy dentro de colisión recordamos que estoy dentro del bloque principal para luego empezaremos a separar esto en nuevas funciones pero de momento vemos que tenemos aquí bloques temáticos donde por ejemplo este es un bloque de iluminación este es un bloque de colisión así que puedo nombrarlos a mí me gusta hacer estos pequeños separadores block e iluminación copio y pego y luego tengo bloque collection así que bloqueé colisión viene desde aquí hasta aquí y luego los seriales ya estamos viendo para qué sirven de momento los voy a comentar simplemente porque de momento no los quiero pero tampoco los quiero borrar porque más adelante me pueden servir para algo así que tenemos por tanto un programa que va creciendo a medida que va creciendo fijémonos lo fácil que era al principio y lo complejo que es ahora lo que queremos en este caso es bueno aumentar un poquito más la complejidad del sistema es decir mejorar un poquito el comportamiento de nuestro sistema bien cuando la distancia es menor que 10 voy a hacer lo siguiente en primer lugar quiero un pequeño pitido del buffer no muy largo que no sea molesto verdad y voy a hacer lo siguiente eso sí para hacer esto déjame que quite estos dos pines para que los servomotores no estén funcionando sin razón vale y ahora hemos dicho cuando detectó una colisión el motor para después de que el motor para espero 5 segundos por tanto en lugar de delay 3000 voy a poner de 5000 a continuación lo que voy a querer hacer es que una vez que el robot ha detectado una colisión quiero que se vaya hacia atrás por tanto mi motor 12 wright y si mi motor uno hacia adelante pero en ese caso mi motor 1.2 raid es 180 lo que equivale a irse para atrás mi motor 2 mi motor dos puntos raid es igual a cero esto qué quiere decir pues que el sistema lo que hace es que va hacia atrás el motor va hacia atrás y con esto me espero un poco digamos que me espero dos segundos durante dos segundos el motor sigue yendo hacia atrás digo dos y luego cuando el producto esté montado a lo afinaremos espero dos segundos y ahora lo que quiero es que el robot gire veamos el robot se ha encontrado un obstáculo ha parado ha echado hacia atrás pero ahora que hago pues si vuelvo a tirar hacia adelante evidentemente me voy a encontrar con el mismo obstáculo es decir irme hacia atrás no me resuelve el obstáculo lo que hace simplemente es que me aleja un poco del obstáculo la única manera de una de las maneras de evitar el obstáculo es girar así que por tanto voy a hacer lo siguiente mi motor punto wright y lo voy a dejar en 90 voy a dejar quieto el mismo todos punto raid y por ejemplo voy a hacer que se vaya a 0 es decir uno de los motores se queda parado el otro motor gira y claro si una de las ruedas gira y otra se queda parada evidentemente lo que va a pasar es que el robot va a girar inevitablemente así que con esto espero dos segundos por ejemplo dos segundos mientras el robot gira y por tanto ahora yo lo que te diría es que es lo que ocurre qué es lo que ocurre en este caso cuando el robot está girando es decir tú me pregunta quién será ahora mismo 2 segundos este motor girando y este motor parado a cuántos grados equivale que el robot va a girar mi respuesta es no tengo ni idea no tengo ni idea porque esto evidentemente depende también del radio de la rueda que tenga el robot y el radio todavía no lo hemos definido porque eso lo definiremos en la fase de diseño de las piezas en este caso el diseño de las ruedas donde podremos definir cuál es el radio de la rueda tanto en la llanta como digamos en el neumático o en la pieza de contacto así que de momento por tanto yo lo voy a dejar en dos segundos y puede que este valor sea demasiado grande puede que este valor demasiado pequeño pero en todo caso no es algo que ahora mismo me preocupe demasiado guardo el sketch vamos a lanzarlo a la placa y vamos a ver lo que tenemos ahí la colisión ahora bien cuando detecta una colisión era un pequeño pit perfecto y ahora lo que voy a hacer es conectar de nuevo estos pins este pin aquí a conectar ahora este pin aquí bien y bueno tenemos lo siguiente tenemos en este caso el sistema donde lo que voy a hacer es meter la mano para simular una colisión meto la mano vamos a verlo los motores tiran hacia atrás un motor para y continuamos tiran hacia atrás un motor para y continuamos en este caso además vamos a verlo quiero que el motor para espero 55 segundos el motor va hacia atrás déjame esperar otros 5 segundos así que el motor va hacia atrás espero dos segundos esperó 5 segundos ahora el otro motor gira 2 segundos mientras que el robot gira para otra vez el motor y me espero otros 5 segundos es decir lo que quiero por tanto es ir por bloques por tanto guardo el sketch recargo vemos como ahora no tengo problemas de reinicio dado que estoy metiendo voltaje suficiente o mejor dicho amperaje suficiente y lo que ocurre por tanto mientras todo este proceso dura es que cuando yo pongo la mano por encima lo que ocurre es que los serbios paran ahora técnicamente están como parados van hacia atrás para 5 segundos igual es demasiado y al fin haremos ahora sólo uno de ellos gira y se quedará quieto con lo cual continuamos nuestra dinámica con la que tenemos que si enciendo el robot se enciende la luz las ruedas van hacia delante pero si el robot se encuentra un obstáculo lo que va a hacer es parar a ir hacia atrás para dar cinco segundos esperar rodar una rueda solo y a continuación quedarse esperando nuevas instrucciones en este caso nuevas instrucciones podría significar pues cualquier cosa esperada que hubiera luz o cualquier otro tipo de comportamiento