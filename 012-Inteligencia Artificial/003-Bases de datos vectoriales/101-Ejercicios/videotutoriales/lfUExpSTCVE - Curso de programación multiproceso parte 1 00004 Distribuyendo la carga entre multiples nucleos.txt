ahora lo que voy a hacer dentro de esta tarea es decirle al sistema que quiero traer quiero importar el index 1 html quiero realizar este cálculo lo voy a copiar voy a pegar dentro de tarea y lo que voy a hacer en post message es que voy a lanzar el número puede volver el número así que vamos allá recargamos vamos a verlo recargamos aquí vemos que el programa ahora se pondrá a funcionar haber un segundo index 3 no nos va a poner a funcionar porque no le estoy enviando mensaje ahora es la prueba funcional vamos con el cálculo 1 y dice el trabajador ha dicho algo el trabajador en este caso nos devuelve un número concreto pero lo importante es que la ejecución no se ha parado la ejecución no se ha detenido mientras que el programa estaba calculando bien qué es lo que voy a hacer ahora bueno pues lo que voy a hacer ahora es crear una serie de workers donde cada uno de los workers como ahora veremos se va a colocar en un núcleo diferente de procesamiento vamos a verlo a continuación para ello voy a guardar este archivo como index 4 html vamos a copiar algo de lo que teníamos en index tenemos número de núcleos y ahora digo bar un núcleo es igual a trabajador es igual a new worker y voy a cargar el archivo tarea 2 js es new array perdón ahora sí es una nueva colección de algo era entonces digo for bar y es igual a 0 y es menor que número de núcleos y más y ahora si le voy a decir trabajador y es igual ahora sí a mi worker tarea 2 punto js esto es muy importante porque lo que he hecho por tanto ya no es un solo worker sino que he hecho un conjunto de workers he hecho un conjunto de diferentes workers en este caso evidentemente tantos workers como núcleos de procesamiento tengo en el sistema y ahora una vez que he creado diferentes workers lo que voy a hacer es enviarles un mensaje voy a decir trabajador de y punto post message y voy a decir comienza finalmente un mensaje de bienvenida ahora en la tarea voy a guardar esta tarea como tarea 2 y realmente la tarea 2 va a tener prácticamente lo mismo que la tarea 1 vamos a verlo vamos con un cálculo ok dos meses número vale y yo creo que ya está simplemente le voy a decir al sistema que voy a hacer al sistema que trabajador punto 1 m 6 voy a decir function datos y con solé punto log datos punto data bien si todo va bien si todo va bien ahora lo que voy a hacer es recargar el index 3 vamos a verlo ahí el trabajador ha dicho algo a verlo en principio lo ha hecho muy rápido a ver estoy viendo si lo ha hecho o no lo ha hecho y en definitiva debería tener 4 vamos a verlo por aquí hasta el index 4 claro ese es el problema muy bien vale trabajador y un mes x nota function vale new worker trabajador un mes 6 así perdón es igual a función vale recargo dice vamos con el cálculo y ahora me devuelve cuatro números diferentes que de hecho son los mismos pero fijémonos que lo que ha hecho el sistema en este caso es decirle qué bueno que quiero calcular hay una cosa que me extraña y es que he hecho el mismo exacto cálculo y ha tardado una barbaridad menos que trabajando en la tarea principal vamos a poner ese mismo cálculo recargamos y el programa devuelve el cálculo es decir no sólo vemos que lo está calculando mucho más rápido sino que además vemos en ese pico de ahí que ahora realmente está utilizando los múltiples sistemas de cálculo que necesite y además yo la puedo venir por aquí y decir bueno no quiero solo tener y estas interacciones quiero tener más interacciones así que como podemos ver pues estamos trabajando ahora con cuatro núcleos de procesamiento y sobre todo lo importante es que si nos fijamos ahora en el procesador veremos que cada uno de esos núcleos de procesamiento cada uno de esos workers está trabajando de forma independiente y eso quiere decir que estamos utilizando ahora si el procesador en su plena expresión también evidentemente vamos a tener que enfrentar nuevos retos porque trabajar con un workers evidentemente equivale a trabajar con tareas paralelas tareas que en principio son independientes entre sí tareas que se tienen que pasar información entre sí y en definitiva esto nos va a suponer nuevos retos pero a la vez una vez que hacemos esto también como podemos comprobar pues podemos desbloquear la potencia del ordenador y podemos realmente aprovechar todos los procesadores que tenga un ordenador concreto que además pues cada día son mayores a continuación en los siguientes ejercicios lo que vamos es analizar cómo podemos sacarle partido cómo podemos sacarle rendimiento a esta técnica de programación mediante la cual vamos a poder usar los núcleos de programación de forma independiente hay una cosa interesante de todas formas es la siguiente y es que voy a bajar un poco los números de cálculo y es que yo puedo lanzar más tareas que hilos de procesamiento tengo esto quiere decir que yo por ejemplo en este caso voy a esperar a que acabe este hilo si no lo puedo matar pero bueno no pasa nada por cierto que si vengo por aquí al monitor vamos a ver cpu vale bueno nos muestra los procesos una pena vale pero quería que nos mostraran los subprocesos para que viéramos pues que estaba usando realmente bien vamos a verlo vale entonces como decía no tenemos porque no tenemos por qué quedarnos con tantos núcleos como tengamos evidentemente es recomendable vale pero voy a poner por ejemplo que quiero 100 procesos quiero 100 workers que es lo que va a hacer el programa si yo le pido 100 tareas y tengo 4 procesadores bueno no va a pasar nada no va a pasar nada porque sobre todo lo que quiero ahora momento es matar esta tarea para que finalice así que voy a matarla vale ok perfecto y ahora he hecho un proceso más pequeño he hecho 100 procesos más grandes y vamos allá y vemos como lo que va a hacer el programa como vemos ahí es que tenemos 100 procesos ahora en cuanto el historial de la cpu se refresque pues veremos como pues bueno se pone al cien por cien de hecho yo diría que está bloqueado el día que está parado está muy bloqueado vamos a verlo cpu al cien por cien ahí lo tenemos de vuelta 'la ventana' historial de la afp y por tanto lo que hace el programa ahora se refrescará más que nada porque parece que crear 100 procesos que de golpe ha sido un poco fuerte pero lo que hace el programa básicamente es repartir los 100 procesos entre los núcleos de procesamiento que tenga entonces pues hay evidentemente cuantos más núcleos de procesamiento tenga pues mejor como digo creo que me ha pasado a mira yo creo que ya lo tengo por aquí ya lo tengo por aquí de vuelta ahí lo vemos tengo ya los 100 resultados tengo ya hay los núcleos corriendo vale ahora volverá el sistema pero bueno lo que comentaba hay diferentes estrategias una estrategia es un programa y si tengo cuatro núcleos de procesamiento es partirlo por cuatro bloques y enviar cada bloque a su núcleo y hay otra estrategia ya iremos viendo largo de los vídeos que consiste en hacer muchos cachitos diferentes y pequeños e irlos enviando dinámicamente a tantos núcleos como haya para procesar