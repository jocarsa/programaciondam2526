vamos allá y bueno voy a arrancar el samp y una vez que arrancó el samp vamos a verlo por aquí vale a ver voy a ir a la carpeta de champ ht docs dentro de htc ox voy a crear una carpeta llamada jim webb voy a crear un archivo llamado index html y voy a copiar y pegar por alguna parte la librería de jquery ahora abro el editor de código abro el editor de código se estaba abriendo hay cargo el archivo index html y le vamos a dar el código que ya sabéis de siempre bobby lo que quieras cargo la librería sf es igual a jquery punto j s cargo el script de base para poder empezar a trabajar y digo cuando el documento está preparado en ese caso ejecutó una función que dirá console punto no hola o preparado o algo así ahora en el body voy a hacer algo como por ejemplo maquetar una especie de interfaz web para un programa que asemeje las características de gimp entendiendo que sea un programa que nos permita quieto nos permite editar código así que para eso me voy a localhost web para ver lo que estoy haciendo me voy a inspeccionar me voy a console veo que pone hola y a partir de aquí en el body voy a decir vivo y de programa dentro del programa voy a hacer un menú de navegación un menú tal y como por ejemplo que ponga archivo editar imagen algo así que guardo y recargo y veo que ya arriba poner archivo editar imagen lo que sea es más sabes que voy a quitar los veré y lo voy a separar simplemente con espacios y así y fijaos que están allá arriba en forma de menús la parte superior a continuación una vez que finalizado el nab voy a crear tres dips donde uno sera herramientas este primer bip otros serán imágenes y otro sera pues capas por ejemplo canales o algo así parámetros en definitiva por tanto aquí irán las herramientas aquí irán las imágenes y aquí irán las capas así que por tanto vamos a empezar y dentro de herramientas voy a empezar a estilizar lo siguiente atención yo digo todo lo que sea no coma herramientas coma imágenes como capas quiero que tenga un border de un pixel solid black con lo cual todo me aparece así es como quiero que me aparezca porque ahora lo que quiero hacer es decir no lo cierres mucho nos eres mucho que tengo la puerta abierta si la puerta de la calle está abierta como no bien entonces les digo herramientas tiene un wifi del 20 por ciento digamos imágenes tiene un wifi del 70% vamos a verlo y capas tienen un wish del 20 por ciento voy a poner 15 por ciento vamos a nivelar un poco tú eres 12% de 70 por ciento y 3 12 por ciento 12 70 y 12 ahora a cada uno de estos elementos a todos a la vez en la parte de arriba les voy a decir float left y así por tanto aparte de que anna les voy a decir que tenga un wifi del 100% así al final voy a tener algo parecido a esto en la pantalla es decir voy a tener por una parte por arriba el menú superior y luego por abajo en las herramientas las imágenes y luego las capas en ese orden lo estoy poniendo con un borde de un píxel sólido negro simplemente para que evidentemente lo veáis mejor aunque ya sé que de momento queda horrible pero más adelante esto evidentemente lo utilizaremos para qué pues quede más bonito ahora de hecho mira voy a hacer lo siguiente dentro de las herramientas voy a poner una serie de botones así que digo button botón class un botón y ya está y de algo sea algo todavía no está definido así que colocó unos cuantos botones coloco unos cuantos botones y voy a decir todo lo que sea de clase botón vamos a ver cómo puedo hacer que esto me ocupe menos espacio y que podéis leer más código todo aquello que sea de clase botón pues tendrá un wifi de 20 píxeles un height de 20 píxeles flotar a la izquierda con esto si os fijáis pues empezamos a tener una pila de botones que son los que tendrán las funciones del programa bien no vamos a ponerles tanto a herramientas como imágenes como capas una altura del 70% por ejemplo para que todos tengan la misma altura y digamos la maquetación quería un poquito más cerrada fijaos que ahora bueno esto ya empieza a ser otra cosa así que aquí tengo las herramientas aquí cargaré las imágenes en las capas pues ya veremos lo que haremos más adelante dentro de las imágenes lo que voy a hacer es cargar un canvas y este canvas va a tener el id pues imagen si puede tener el y de imagen y voy a decir weeks es igual a 512 píxeles hai por ejemplo es igual a 512 píxeles y ahora luego le diré qué estilo tenga un border de un pixel solid black simplemente para verlo lo que quiero ahora de momento es verlo y madre mía quien entonces es muy grande ahora para empezar así que 312 por 312 y tengo por tanto como veis pues una especie de cutre editor de imágenes de momento pero si acabamos de empezar le damos nada con este editor podríamos hacerlo con la distribución de interfaz de usuario realmente quisierais pero el tema está en que como conocéis gimp pues vamos a hacer una interfaz con una distribución parecida para que intuitivamente os hagáis una idea de para qué va a servir cada una de las partes es momento de empezar a cargar algo dentro de esta escena si queréis mirad he visto que frank ha cogido la etiqueta script y la ha puesto abajo de la aplicación por ejemplo pues vale vamos a hacer eso porque de hecho lo vamos a necesitar asegurarnos de que siempre va a ocurrir todo después de la propia programación html y ahora voy a hacer lo siguiente un vigo bar imagen es igual a new image ya que evidentemente es el programa de tratar de imágenes pues lo primero que vamos a hacer es una imagen me voy a seleccionar alguna imagen vamos a ver instagram jose vigente carratalá instagram a twitter cogemos alguna imagen de alguna parte donde estoy yo cogemos alguna imagen de internet la que queráis vamos a ver cuál puedo hacer no mucho 300 por 300 o algo así vale pues voy a por ejemplo esto voy a guardar esta imagen y mirada de atención de imagen cuando ocupa no lo sé pero bueno lo que ocupe a ver un hecho a propiedades no se me abren propiedades por sala así que copio pero la imagen james webb me voy a crear una carpeta llamada imágenes vamos a ver copiosa imagen vale cuánto ocupa a ver si me lo puede decir ya quiere sacarlas a la derecha se le pidió la columna sí pero yo quería las propiedades de la imagen los esquemas están apareciendo ahora me parecen todas a ver dentro de un momento pero bueno si no me voy a más me voy a resolución efe sf resolución horizontal y vertical vaya no es la resolución es el nombre de píxeles lo que sea si no hago labró con gimp y ya está y el gym me lo dirá dimensiones me voy a más me voy a dimensiones muy bien y ahí a ver que te lo digo 640 x 640 perfecto fenomenal así que quiero mantener esta imagen 640 x 640 por ejemplo me vale en principio pues mira lo que voy a hacer ahora en el código es cargar esa imagen dentro del canvas así que digo imagen punto src es igual a entrar dentro de la carpeta imágenes y cargar la imagen graft punto jpg de momento esto no produce ningún resultado en la pantalla evidentemente vamos a verlo porque lo que ahora quiero es decir voy a crear un contexto y para que para crear un contexto digo efe es igual documento punto de element by aire y el ide es imagen y ahora digo fe punto o perdón contexto es igual hace punto get contexto 2 d vamos a verlo guardamos recargamos y ya lo tenemos con lo cual ahora teóricamente nos funcionaría a hacer hombres experiencia yo que en algún momento y ahora pasar unos cuantos más creo yo ahora digo contexto punto rubymine y quiero en 0 perdón al revés quiero la imagen cargarla en 0 no os sorprendáis si esto tal vez de momento no funcione porque pues porque las imágenes tardan un poquito en cargar por tanto voy a crear una función loop y voy a decir lo siguiente sabes que esa función loop realmente de momento no va a lupe ar y simplemente voy a decir se time out y quiero cargar loop 2 segundos vamos a verlo ahora guardamos recargamos y fijaos que ahora sí ahora si la imagen aparece correctamente dibujada momento correctamente dibujada yo tenía una imagen de 312 por 312 y como la imagen que he metido es de 640 x 640 pues no aparece toda la imagen sin embargo recordad que me voy a al html5 canvas chipsip y le voy a decir que en drouin sabían un par de parámetros por ahí adrovi vamos a verlo draw email que es ese xs y el with y el act por tanto lo que voy a hacer ahora es decir bueno pues esto lo quiero de 3 12 es decir modificó la anchura y la altura de la imagen vale porque así funciona pues así funciona porque yo al principio aunque yo le diga document ready todo lo que tú quieras pero primero ha cargado el documento y luego ha cargado la imagen para cuando yo he dicho carga con la imagen simplemente la imagen todavía no se había cargado así que la idea es un pequeño truco entre otros muchos que se pueden usar es que time out carga la imagen dentro de dos segundos por decirte muchísimo y así le damos tiempo la imagen para que se cargue te digo dos segundos igual el medio segundo también funcionaría en definitiva lo que hacemos es darle tiempo a que primero se cargue la imagen en memoria antes de decirle a canvas que la pinte en el fondo en el escenario lo que quiero ahora por tanto es de momento es tácticamente ya lo pondremos en un menú pero es revisar todos los píxeles que haya en la imagen y hacer alguna operación con ellos brillo contraste convertir a grises niveles lo que sea entonces para ello me voy a ir a la función de loop y digo griego en primer lugar repasó todos los píxeles de la imagen claro repasa todos los píxeles de la imagen realmente es un bucle for os voy a decir una cosa y esto no es que yo os lo diga porque yo quiera que sea así es más a mí me gusta pero en el canvas con respecto a lo que hablábamos ayer en clase de las matrices perdón los bucles for y los dobles bucles for pues en canvas aunque yo no lo quiera porque de hecho yo no lo quiero así pero es así en canvas la imagen tiene índices por filas no tiene x e y por tanto la manera de recorrer una imagen es mediante una matriz lineal pero no contentos con eso encima es una matriz lineal atención donde coge el primer píxel de arriba y el primer elemento de la matriz es el índice rojo del píxel el segundo elemento de la matriz es el índice verde del píxel el tercer elemento de la matriz es el índice azul del pixel en el cuarto elemento de la matriz es el alfa la transparencia del pixel el quinto elemento de la matriz es el componente rojo del segundo pixel si eso es lo que quería decir vale entonces no pasa nada porque tengo por ahí muchos programas que ha desarrollado una pequeña estructura de control que nos permite parchear con cierta facilidad la imagen entonces es momento tiene la matriz efectivamente es enorme pero más allá que sea enorme o que no lo sea es que es muy duro de visualizar para una persona es el código no es nada amigable sin embargo ahora veréis que es muy rápido así que me voy a código y tengo yo esto por aquí pues no lo sé vamos a verlo mira así en free división aquí debo tenerlo espera esto que era si esto es no esto es como php en videovigilancia y por seguro que lo tengo en web creando que tu cama seguro que lo tengo vamos pero vamos a ver ahí estás back pues voy a hacer lo siguiente vamos a ver probablemente nos ahora mismo de que pero porque puedes hablar así que voy a decir lo siguiente bar pixel es igual a contexto punto gettyimages data desde 0 hasta 3 12 de que muy bien totalmente efectivamente eso es de esos pixeles quiero sus datos y ahora aquí ahí está de hecho voy a copiar me esto formateo para que lo veáis claro hay 13 típico en primer lugar cargo todo ese bloque de datos en segundo lugar lo que hago es decir que quiero cargar todo esto como los datos de la imagen y en tercer lugar hago un bucle ford donde atención todos a la pantalla empiezo por el índice 0 no hay mucho misterio en ese punto le digo que llegó hasta la longitud final de los datos pero ahora date cuenta como ese bucle for pega saltos de cuatro en cuatro no de uno en uno por qué pues porque os he dicho que cada pixel tiene cuatro componentes que es rojo verde azul y transparencia por tanto la manera de ir de píxel en pixel es pegar saltos de cuatro en cuatro ahora dentro de cada uno de esos saltos el rojo equivale a los datos número uno el verde equivale a los datos más 1 el azul equivale a los datos más 2 y si queréis el alfa equivale a los datos de i + 3 aunque en este ejercicio no vamos a usar alfa pero bueno para que lo sepáis así que tú ahora puedes decir vale esto está muy bien pero y que esto que me da en pantalla pues esto en principio no me tiene porqué dar nada en pantalla lo único que estoy haciendo es leer la matriz cargar en memoria los valores de todos los píxeles todos los componentes que hay en pantalla pero ahora a continuación lo que vamos a hacer es cambiar un poco de estos valores así que por tanto me voy a venir por aquí ultimates data y por ejemplo según dyn y voy a dibujar este pixel sí pero y ahora digo modificó un poco los colores y pintó la imagen modificada contexto but inmediata pixel bien por tanto ahora hago lo siguiente ahora para cada uno de estos elementos espera que esto va aquí dentro esto va dentro del foro esto va dentro del foro yo digo pues mira rojo es más igual a 100 verde es más igual a 100 azul es más igual a 100 que diría es que hace este código qué tono más blanco más claro así que guardo y recargo y fijaos vamos a verlo un momento contexto emails data moment in que ahora tengo que rehacer los píxeles pero básicamente rojo es igual a esto así cuidado vale y ahora digo y aumentando los valores y ahora digo data es igual a rojo gata y uno es igual a verde y data de i + 2 es igual a azul ya os digo que el alfa para este ejercicio no lo uso no lo voy a usar así que guardo y recargo y si os fijáis en la imagen está más clara porque siendo negro el color 000 y blanco el color 255 2 55 255 cogiendo cada uno de los componentes y sumándole 100 valores lo que estoy haciendo es aclarar masivamente cada uno de los componentes y damos cuenta que es una gran cantidad de información pero aún así el programa va relativamente rápido kaos cuenta que guardo y recargo y prácticamente no notamos ningún desfase en el rendimiento lo hace en el momento esto que acabo de hacer es prácticamente en la pantalla me gustaría empezarlo a almacenar en funciones por eso aquí arriba donde está el programa donde está el menú de navegación voy a poner lo siguiente voy a crear un select es un elemento de formulario en html qué dice option value aclarar esto es y de operaciones y digo a aclarar luego más adelante en la clase de hoy estaremos haciendo nuevas operaciones tales como oscurecer o negativo por tanto aclarar negativo si queréis aquí arriba creo una opción más cuyo valor es ninguno y pongo operaciones por tanto se hará guarde recargo esto veréis que en el menú superior aparece un desplegable en el que pone operaciones y si pinchamos y arrastramos pues veréis que aparece aclarar oscurecer y negativo vale aparecen de momento cada uno de las opciones que hemos puesto manualmente en esa etiqueta de tipo select pues ahora mira yo no quiero que este código esté de aquí se ejecuta porque sí yo lo que quiero es que ese código se ejecute cuando el usuario haga una acción así que voy a hacer lo siguiente function aclarar es igual a todo este código que tengo aquí todo este código que tengo aquí todo ese código se va a la función aclarar guardo recargo y evidentemente no pasa nada con la imagen porque solo quiero que se ejecute ese código en el momento que yo ejecute la operación de aclarar así que mira digo lo siguiente en el documento 9 le digo cuando operación u operaciones no sea como el llamado operaciones punto change quiero ejecutar una función que dirá si es cierto this punto vale es igual a aclarar es decir si es cierto que la has cambiado el select me parece muy bien pero aquí lo has cambiado pues si lo has cambiado a aclarar en ese caso ejecuta la función aclarar si no mira a ver que tienes que ejecutar así que guardo y recargo y mirad atención a ver si funciona le doy a oscurecer y no ocurre nada le doy a negativo y no ocurre nada pero le doy a aclarar y la imagen se aclara le doy a ninguno y le doy a aclarar la imagen se vuelve a aclarar claro que pasa que se sacaron unas cuantas veces pues al final sobre completamente blanca no entonces oscurecer aclarar y ya se ve completamente blanca pero lo que quiero que veáis por tanto es que sólo se ejecuta esa función cuando realizó un cambio cuando aplicó la instrucción desde el menú desplegable de operaciones claro con ese sistema de derivaciones en funciones realmente hacer que la aplicación crezca no es muy complejo porque mirad tengo aquí la función aclarar pues ya aquí voy a ahorrar unas líneas de código atención vida y digo qué tal si copio esta función y la pego la dúplica do hacia las bravas y atención ahora la llamo oscurecer claro al llamarla oscurecer en lugar de sumarle 100 valores a cada uno de los píxeles le voy a restar 100 valores en lugar de poner más igual pongo menos igual y ahora por último le digo sí disputó vale en operaciones en el saint bris punto vale es igual a oscurecer en ese caso ejecutó la función oscurecer y por tanto comprobamos como si le doy a oscurecer se vuelve más oscuro y si le doy a aclarar se vuelve más claro oscurecer aclarar y así pueda oscurecer muchas veces ya sabéis voy a ver oscurecer y oscurecer más cuidado porque si luego intentó aclarar pues de allí no va a salir nada evidentemente cosa que era previsible con lo cual tenemos ya estas dos funciones y vamos a continuación a por una un pelín más compleja pero tampoco mucho que es una operación de invertir es decir hacer como el negativo como la el negativo fotográfico de la imagen por tanto una vez más me copió la función oscurecer y la duplicó para hacer la función negativo pues entonces como decía voy a seleccionar la función de oscurecer voy a poner una función llamada negativo y en negativo atención en negativo voy a decir rojo es igual a 255 menos rojo verde es igual a 255 menos verde azul es igual a 255 menos azul y eso parece que no pero equivale a ejecutar una función de negativo por tanto me vengo aquí y digo si de un total es igual a negativo en ese caso ejecuto la función negativo si ahora guarda y recargo la imagen fijaos como cojo negativo y fijaos es el negativo fotográfico de la imagen de hecho ahora con esta sí que puedo aplicar negativo de nuevo y me devuelve la imagen original veis mira aplicó negativo y se me queda así mira pero yo quiero algo un poquito más elaborado cuando digo más elaborado quiero decir que por ejemplo lo de negativo está bien eso no me disgusta pero cuando yo en gimp le digo por ejemplo veis le digo invertir y es lo mismo que tengo más organismo que acabo de hacer en programación o sea ya sabéis cómo está programado es invertir pero si le doy a brillo el contraste es algo más elaborado verdad porque mirar me sale una ventanita flotante y yo puedo ir cambiando el brillo e interactivamente beige esto es como si él es su voz yen es el mismo resultado bien o como si yo oscurezca con menos 100 pero si yo quiero 50 ´sí quiero´ menos 50 y si quiero 127 y si quiero lo que sea así que lo que voy a hacer a continuación por tanto es sacar una ventanita generar una ventanita modal donde yo pueda hacer un poco esto como elgin tenga parámetros y yo pueda ir modificando los parámetros y en tiempo real se me muestra el resultado así que por tanto voy a hacer lo siguiente en la estructura dentro de la aplicación me voy a crear vamos a ver aquí debajo de la aplicación es decir entre la aplicación y el script un div escondido llamado div id ventana modal es una ventana que sólo sale cuando las llamas y cuando digo que está escondida quiero decir que digo está él es igual a display dos puntos none es decir existes en la estructura existe en la jerarquía pero estás oculta y por tanto yo ahora aquí arriba más allá de aclarar oscurecer o lo que sea voy a crear una nueva opción llamada brillo barra contraste y en el value voy a poner brillo contraste todo junto brillo y contraste así que guarde recargo y veo que tengo una nueva operación en el menú llamada brillo contraste en el css dejadme decir lo siguiente modal es igual llamado ventana moral muy bien ventana modal es wef no sé 300 píxeles height 300 píxeles background white por sitio absoluta top 0 píxeles left 0 píxeles toma ya vamos a verlo dejadme que os lo ponga fácil así muy bien se lo pongo así porque ya son unas cuantas propiedades pero claro por mucho que ya he puesto esto de momento no se ve la ventana moral porque está oculta por el código así que yo en el javascript digo lo siguiente mira en el javascript digo sí this punto vale es igual a brillo contraste me ejecutas la función brillo contraste y la función brillo contraste que de momento no existe pero la voy a crear yo aquí ahora function brillo contraste va a hacer lo siguiente en primer lugar ventana modal punto face in fighting flow qué es lo que hace mira todos a la pantalla lo que hace es que cuando yo selecciono brillo contraste placa aparece la imagen veis gran cojo brillo contraste y veis cómo aparece por ahí la ventana modal claro es un poco grande no pasa nada ahora le ponemos algo de contenido le voy a decir esa ventana que sea un poquito más estética así que esa ventana pues voy a decir que tenga 300% va a tener un borde de un píxel sólido black y va a tener un box shadow de 0 píxeles 5 píxeles 10 píxeles black qué es lo que hace esto bueno pues esto lo que hace es que cuando seleccionó brillo y contraste fijaos que me aparece una ventanita que se nota más que es una ventanita flotante pero hay un problema mirad yo me voy al gimp atención yo vi a alguien le digo brillo contraste y esa ventanita la podemos ver con libertad pero me voy a mi aplicación y esa ventanita no la puedo mover de ahí así que necesito una utilidad que se llama el drag and drop es la posibilidad de elementos de la interfaz y moverlos a otras partes el comportamiento de la drag and drop que no estoy seguro que lo hemos usado en alguna vez en el isométrico está dentro de la librería de jquery white no está dentro de la librería de jquery normal por tanto lo que voy a hacer es que me voy a ir a descargar jquery guay la descarga de jquery recordad que es un poco grande por tanto me voy a bueno a descargar el estable por ejemplo me lo descargo por ejemplo aquí en el escritorio de atención con 392 cash pero tener en cuenta que de los 300 92 casas yo solo quiero yo sólo quiero el archivo jquery guay mínimo ya está no quiero nada más así que me lo copio me lo pego en mi proyecto lo he sacado de jquery white puntocom y ahí dentro de jquery white puntocom me voy a esta ventanita me descargo el estable y ya está así directamente así que una vez que me lo descargado en la parte de arriba de la aplicación lo que voy a hacer es simplemente llamarlo como lo llamo pues duplicando esa etiqueta jquery aquí en web y ahí lo tenemos ahí por tanto como veréis estoy cargando tanto la librería jquery demás como la librería de jquery de interfaz de usuario y con esto por tanto lo que hago es que digo ese elemento que se llama ventana modal punto drag a bolt así que simplemente del árbol me permite tener la opción de poder mover esa ventana como yo quiera como veis lo que estoy haciendo es a partir de ese momento simplemente pongo ventana moda al punto del árbol y puedo mover esa ventana sin ningún tipo de problema voy a comentar un poco del código y luego hago la ventana aparezca ahora le digo algo que la ventana se pueda mover y ahora continuaremos poniendo más código dentro de nuestro programa el siguiente paso una vez que tengo la ventana draga bold es que esta ventana modal está en blanco porque está en blanco pues porque puede servir para múltiples usos diferentes vale por tanto ahora lo que quiero dentro de brillo contraste es que le pongo contenido a la ventana dragón así que digo ventana mural atención ventana modal punto html y quiero poner código html y bueno voy a hacer algo sencillo voy a poner h 4 por ejemplo h 4 brillo y contraste vr y pongo un input type creo que es range ahora mismo brillo vamos a verlo momento has hecho bien y contraste un rey che efectivamente madre mía los bebés no eso es lo que quiero decirte porque pues porque el brillo contraste mira si yo le doy aquí brillo contraste pues a la ventana modal con unos parámetros pero si yo le doy niveles claro sale la ventana modal con otros parámetros por tanto yo lo que quiero en principio es que esa ventana modal esté en blanco y según lo que seleccione ya se le pondrá un contenido u otro creo que éste br me sobra porque se me da muy para abajo vamos a verlo hay un poquito mejor y ahora si es que el h 4 tiene mucho ay si mira lo completo pongo brillo y ahora pongo un br y hago lo siguiente y contraste ya está casi ya está y contraste sí porque este texto es texto plano de hecho mira voy a poner lo siguiente digo min es igual a menos 127 max es igual a 127 y con el contraste va a ocurrir lo mismo min es igual a menos 127 max es igual a 127 son dos modificadores son dos parámetros de la etiqueta input de tipo range que nos permiten especificar desde donde hasta dónde va así todo ha ido bien espera qué y todo bien me voy a abrir el contraste y veis que tengo ahí dos sliders la ventanita se me ha quedado muy pequeña ahora lo arreglaremos pero tengo ahí dos sliders es una especie de cutre gimp si queréis vale más adelante haremos más bonito pero ahora de momento lo importante es que fijaos que ya tengo algo al menos en la interfaz de usuario que va a ser más interesante que va a ser más bonito yo tengo hasta ahora la parte estática de esta operación pero esto todavía no tiene nada de comportamiento así que lo que voy a hacer es lo siguiente mira detesto cuando muevo el slider del brillo y esto es como se llama y de brillo pues cuando sobre brillo haga change en ese caso quiero hacer una función qué va a hacer con soul log bis punto mal cuando sobre el brillo haga un cambio quiero que en la consola me digas cuánto le he puesto a ese slider si todo ha ido bien guarda y recargo me voy a brillo contraste me saco la consola y muevo el brillo pero sin embargo en la consola no pasa nada porque diría es que no pasa nada en la consola pues muy bien efectivamente me he olvidado de la almohadilla así que brillo recargo me voy a brillo y contraste y mirad ahí parece que si efectivamente estoy siendo capaz sin tener que recurrir al método de recuperar los valores de ese elemento entonces atención porque digo vale ahora yo qué voy a hacer con nuestros valores pues ya que estoy siendo capaz de detectar el change vamos a verlo aquí con sol pues oye de paso además que hago un console lo que ha sido un poco pues la entrada mirad digo lo siguiente vamos a ver yo digo pixel y walter tocar nada mira de verme yo digo antes de tocar nada almaceno los valores de los píxeles al entrar y vivo eso es lo que hay almacenó los valores y ahora digo lo siguiente voy a usar este bucle for pero y lo voy a usar de la manera más eficiente posible un segundo vale allí y digo data de y dejadme que el alfa lo quite porque ya os digo que en la clase de hoy al menos en la clase de hoy no vamos a usar la alta para nada y digo data y más igual avis punto vale grata y 1 a 2 punto vale pirata y 2 addis punto vale qué estoy haciendo vamos a ver yo en primer lugar lo que hago es decir ahí por supuesto y por supuesto al final dejadme que sea validado contexto punto put inmediata es decir poner la imagen un segundo por tanto ahora vamos a comprobar este slider voy a guardar recargar me voy a brillo contraste y fijaos que vamos a verlo madre mía subo el brillo es súper fuerte sí porque no debe ser tan fuerte guau y ahí fijaos que en cuanto le pongo a funcionar funciona vale pero hay algo que está funcionando demasiado fuerte vamos a verlo entonces le digo a ver brillo contraste y digo formar y es esto de aquí con texto de inmediato grata y más igual a dos puntos al principio no tendría que ir tan fuerte un poquito esto no son 6 efectivamente esto suma mucho más a ver puedo hacer una cosa de momento hasta que detectemos exactamente porque está sumando tanto pero lo voy a dividir entre 100 y haber ahí así que le ponemos brillo contraste le pongo brillo quizás 100 ha sido demasiado voy a ponerle 10 cuidado una cosa bien cuidado una cosa hay ahí parece que está empezando a hacer algo debajo y ahí parece que el brillo estaba haciendo algo así que bueno a lo parto entre 2 imagino que ya sé lo que pasa la parte entre dos y ahora va bien y si ahora lo divido entre 1 momento y ser lo dividido entre uno volverá a ir bien porque pues porque en el momento en que estoy dividiendo lo estoy obligando a que sea un número antes no era un número en una cadena estaba encadenando así que fijaos como ahora si iba perfectamente el problema es que lo bajo mirad lo bajo ahí va y lo que ocurre y lo que ocurre es que vuelve a estar hacia abajo entonces lo que necesito es almacenar los datos temporalmente en una matriz así que por aquí digo almaceno los datos en una matriz y digo formar y es igual a cero vale pues a ver aquí y digo datos original es un segundo datos originales de yo entonces digo y entonces digo estos son datos originales vale voy a duplicar esto bar pixel 2 datos puestos es pixel 2 punto data así que digo y datos puestos gatos puestos de y otros puestos de datos puestos de iu es igual a datos originales de más el this punto vale datos originales de iu + 1 y más 2 y por tanto al final le digo pixel 2 que estoy haciendo de esta manera lo que estoy en de esa manera es no perder la imagen original vamos a subirlo por aquí cuidado data es notify en la línea 144 esto es datos originales vamos a probarlo y con esto prácticamente acabamos la parte teórica subo to lower que es paiva toma ya to lower case ya no le ha dicho a to lower case a nadie pues bueno vamos a ver qué pasa aquí pixel 2 píxel 2 punto data datos originales datos puestos vamos a empezar a localizar dónde puede estar el error to lower case ahí no está el error allí está el error datos originales punto links qué curioso vamos a ver si el error está fuera o dentro el error está en uno de estos centros alierta los originales más this punto vale datos originales bien estoy haciendo voy a hacer j y es no declare dónde j por qué es pero estoy aquí si yo debería verlo sólo porque es con solo el punto log sí verdad datos originales de j av está sacando a 666 porque le he hecho un con sólo el punto lo está sacando me todos los datos vale claro no siempre no bien de hecho el ttulo were case ya es un poco sospechoso porque este punto vall debería ser siempre un número así que por tanto algo que puedo hacer es decir lo siguiente parce que le mostré alguna vez bar sin toparse flow de esto de aquí es decir quiero asegurarme que eso me lo conviertes a un número bien tolo güell keys disputó valor love and i find pero voy a intentarlo vamos a ver vale el problema es que hice and i find así que andy find te voy a decir que esto es ah claro un momento aquí se me dice una línea se me ha ido la línea donde está mi línea la habré borrado yo sin querer dónde está mi línea en la que le decía cuándo brillo punto change ocurren un montón de cosas muy bien eso sí ahora sí eso tiene que estar allá arriba venga ahora sí claro sí haciendo sólo el rojo evidentemente por tanto ahora simplemente pues le digo qué desbloqueo esto de aquí pero porque yo tenía comentado ese bloque vamos a verlo ahora subo el brillo bien se me pone a él jj vamos a verlo vale tuvo el brillo bajo el brillo bien no pasa nada ya bien muy bien no pues es lógico porque hacemos así pero ahora vuelvo y me está restaurando teóricamente vale pero la filosofía de lo que has dicho es correcta pixel vale ahora veremos que ha pasado pero eso que has dicho estaba bien por tanto bueno vamos a corregirlo y con esto cerramos la parte teórica mira al final lo que hacemos es esto atención lo que hago es los datos originales me los quedo en una matriz y no los pongo en un bucle for está simplemente quiero por un lado mirar me guardo los datos originales y ahora digo y un juego para hacer pruebas entonces ahí lo que hago es que los otros originales realmente no los pongo en un foro sino que lo que quiero únicamente es modificar los datos temporales con los otros originales más lo que valga slider y ahora sí puedo quitar ese putt emails porque realmente el que vale es el de bajo y me voy a brillo y vuelvo y me voy a la oscuridad y vuelvo y funciona perfectamente ahí está arrancó el samp vamos a continuar extendiendo nuestra aplicación y para ello recordamos vamos a abrir por aquí en el disco duro local fe en champ en éste docs en game web en index.html y vamos a localhost barra game web y vamos a cargar la imagen y preparamos la adición de nuevas operaciones para este proyecto entonces en la primera parte de la clase de hoy vamos a crear la puerta para eso vamos a crear un brillo un filtro de grises por tanto dentro de lo que es la opción vamos a copiar vamos a pegar y vamos a crear un nuevo filtro llamado de saturar por tanto llamamos a este filtro de saturar fijaos que guardo recargo y por tanto ya tengo aquí en la lista un de saturar y por tanto al de saturar este filtro lo que hacemos ya hemos creado la opción recordad que uno va con mayúsculas pero el otro va con minúsculas porque es el value es el nombre de lo que luego capturamos pues me hago una función más así que por ejemplo pues tenía por aquí function negativo pues duplicó function negativo y lo que voy a hacer en este caso es simplemente establecer un color izado donde digo lo siguiente rojo o lo que es lo mismo voy a eliminar esto data de ahí es igual a rojo más verde más azul partido por 3 eso que es pues un promedio de los tres colores de hecho sabes qué voy a decir gris es igual a eso gris es igual a ese promedio para ahora que para decir esto es igual a gris y por tanto ahora digo data de 1 datos de 2 y esto ya no es el filtro negativo sino que es el filtro de saturar así que únicamente nos falta venir por aquí y decir si this punto oval es igual a ver saturar en ese caso ejecutaré la función de saturar así que guardamos y recargamos y lo que hacemos a continuación entre saturar y comprobamos cómo la imagen efectivamente se convierte sin ningún problema a una imagen en escala de grises es decir a una imagen en blanco y negro os pongo por aquí el código de saturar en un momento dado resulta que la ventana de brillo y contraste pues es una ventanita muy bonito ahí tal pero que en principio no se puede cerrar así que no pasa nada porque para eso en la ventana de brillo y contraste yo puedo crear por ejemplo aquí en el h 4 os acordáis de en brillo contraste había una retahíla de html que es el que creamos así que yo digo lo siguiente digo span y d es igual a cerrar ventana es pan pongo una equis pongo un ver entonces he hecho un spam y de cerrar ventana simplemente con una equis y luego ya lo de corais como queráis y simplemente lo que voy a hacer ahora es que fijaos que le doy a brillo contraste y me aparece una equis allá arriba ahora ampliaremos en la ventana para que quepa todo color distribuimos para igual pero el caso es que ahora sí ya he creado wii ay si ya he creado esa equis pues me voy a ir a la función principal y en la función principal voy a decir cuando sobre cerrar ventana haga clic en ese caso lo que quiero es una función que dice ventana modal creo que se llamaba punto face out flow o lo que básicamente equivale a decir que cuando la x lo que quiero es que no es ventana modal vamos a ver qué es pues no me acuerdo cómo se llama así ventana modal ventana moral punto frei de out slow bueno aquí es donde parece que cerrar ventana vamos a ver era cerrar ventana en este elemento si cerrar ventana no está funcionando así que a menos que como ayer me dijeras que me falta una almohadilla o lo que sea en principio si vemos que esto parece que debería funcionar pero no funciona pienso que probablemente sea porque el elemento había sido creado de manera dinámica y por tanto lo que voy a hacer es usar la instrucción on por tanto le digo on realmente le digo documento punto y el on tiene lo siguiente en espera que nunca me acuerdo de la sintaxis concreta y la sintaxis concretas vamos a verlo aquí está hay clic de r muy bien pues digo clic coma ventana modal así que aguardo y recargo brillo contraste pulso la equis y vemos cómo desaparece correctamente por tanto fíjate brillo contraste le doy a la equis y desaparece y ahora sí por tanto he tenido que usar la instrucción on para que se reconozca el clic en un elemento creado manualmente de hecho espera es ventana modal no es cerrar ventana pero es cerrar ventana cerrar ventanas ahora sí así que brillo contraste hago clic en cerrar la ventana por qué pues porque si no me cerraba la ventana hiciera clic donde hiciera clic y no quiero eso quiero poder ver quiero hoy va clic en cerrar ventana clicka aclaró el tema está en que el spam se reventara igual es grande verifique no bueno muy bien ya tenemos el cerrador ventana por tanto este código está creciendo bastante rápido pero a la vez que está creciendo bastante rápido está creciendo de una manera relativamente rápida y ordenada ya que prácticamente todo aquello nuevo que hacemos lo vamos encapsulando en una nueva función lo cual luego contribuye a que podamos aclarar en localizar qué queremos hacer dentro del código bueno el problema es que esto no evita que siga creciendo y creciendo en vertical así que antes de que crezca más porque este código puede crecer hasta el infinito imaginaos photoshop vale pues antes de que crezca más yo lo que quiero es empezar a externalizar lo en funciones y a partir de aquí vosotros podéis trabajar un poco como queráis podéis trabajar muy modular mente o podéis externalizar todo esto en un archivo llamado funciones punto j s como eso ya lo hemos hecho yo para tener un poco más de control lo que haría es esto que voy a hacer ahora en la pantalla mira me voy a hc docs me voy aquí en web me voy a crear una carpeta llamada funciones y dentro de la carpeta llamada funciones más adelante podemos tener muchos tipos de funciones estas funciones que estamos haciendo ahora concretamente se llaman filtros por tanto dentro de filtros me voy ya más adelante podemos tener funciones para capas funciones para dibujo funciones para gestionar archivos vale así que lo que voy a hacer ahora por tanto es trabajar con un nuevo documento de texto donde éste se llamará aclarar punto js otro nuevo documento de texto que se llamará de acuerdo oscurecer y punto js tantos documentos de texto como haga falta brillo contraste js como funciones hayáis creado negativo también me falta así que negativo punto js y luego brillo contraste muy bien de saturar qué son los filtros que de momento parece que tengo creados de saturar punto j s así que ahora voy a traer todos estos archivos a edit mirad se me ha abierto aquí en pestañas y lo que voy a hacer simplemente es empezar a mover el código de una parte a otra entonces digo pues mira la función aclarar la corto y va adentro de aclarar punto js fíjate qué gusto de abrir el archivo aclarar y ver únicamente este caso de código ya que sabemos que archivó aclarar tiene exactamente eso solo el código de aclarar función o oscurecer me voy a oscurecer función negativo me voy a negativo función brillo contraste bueno esta es más grande pero vamos lo que haga falta y por último función de saturar hemos liberado mucho la carga del archivo principal en el archivo principal me quedo prácticamente lo mínimo imprescindible pero claro ahora evidentemente esto no va a funcionar porque pues porque el archivo principal no sabe de la existencia de estas librerías porque esto lo hemos convertido como en librerías externas bien evidentemente y esto por tanto pues es una filosofía que usaremos mucho en la siguiente parte del máster dónde importaremos una librería principal pero luego empezaremos a importar pequeñas librerías de apoyo cuando más se complique el proyecto pues más librerías usaremos siempre intento reducirlas al mínimo porque al final es un lío de librerías pero bueno algunas tendremos que usar entonces mirad aquí arriba donde cargaba el jquery y ayer cargue el jquery guay para hacer lo del dragón pues hoy me duplicó una nueva línea y digo me voy a funciones barra filtros barra vale que queráis en el orden que queráis brillo contraste punto js duplicó esa línea quintuplicó esa línea de hecho y digo de saturar punto j s negativo js oscurecer js y aclarar punto j s y por tanto como podéis ver lo que hemos hecho por una parte es externalizar las funciones y por otra parte evidentemente primero cargamos jquery y luego cargamos las funciones en este caso acordaos que ayer os dije que para cargar jquery guay es muy recomendable cuando lo necesario antes haber cargado jquery pero estas funciones realmente no hacen prácticamente uso de jquery con lo cual prácticamente si no hacen uso vale las podríamos llamar antes o después pero bueno las llamamos después digamos esta es la librería maestra estas son pequeñas librerías porque habíamos después de si nos curamos en salud y fijaos que por tanto ahora después de hacer esto el código sigue funcionando estás condición sinequanon evidentemente vamos a verlo el brillo el contraste pues algún error debe haber por ahí hay una optimización más que me gustaría hacer que es esta optimización que estoy viendo aquí entonces aquí tengo un montón de estructuras de control if por tanto lo que me gustaría hacer es meter todo esto dentro de un switch entonces recordad que si llega un momento que tengo un montón de jeeps eso realmente se parece mucho a una estructura de control switch por tanto digo switch this punto vale y digo en caso de aclarar los puntos a aclarar y ya sabéis que break al final de cada caso de un switch tenéis que poner un break por tanto ponemos aquí oscurecer negativo o negativo brillo y contraste y de saturar y así por tanto cuando vemos que una aplicación está creciendo bueno en la dirección incorrecta porque digo lo que en principio parecía una buena solución que era un if cuando ponemos unos cuantos ships digo haber problema no hay pero no es la estructura de control más óptima para ese tipo de programación pues lo convertimos en un switch y que el código queda más limpio y más propio y es que realmente esa estructura pues sirve exactamente para eso digamos que ya hemos hecho unos cuantos filtros y os hacéis un poco la idea de para qué sirve un filtro es decir entonces un poco la idea de que desplegando de esta lista y poniendo más filtros pues podríamos llegar hasta el infinito y más allá así que vamos hacer otra cosa a continuación vamos a usar alguno de estos botones que lo tenemos un poco ahora que los tenemos un poco abandonados así que uno de los botones del gym por empezar con uno sencillo recordáis que era el bote de pintura el bote de pintura es algo que nos permite primero seleccionar un color y luego cuando haces clic en la imagen de hace pam y te la rellena todo de ese color como que echas un bote de pintura encima de un objeto recordáis ese botón más o menos como buenos signos más o menos espero que fuera bajo medio entonces lo que hago que pensabas entonces lo que voy a hacer ahora mirad entonces me voy aquí a los botones y me creó un input type color así que fijaos que simplemente por poner imputar color pues como en el gimp aparece un color inicial diréis pero en el gym varían dos colores el momento y llegaremos en el game estaba el color del frente y el color de fondo ahora de momento quiero empezar con un color como se llama este elemento pues de momento le hemos puesto atención todos input type color pero vamos a poner una idea así que voy a poner y de color frente así que guardamos recargamos y aunque no se ve por lo menos tiene un nivel en uno de los botones en alguno de los botones voy a ponerle un pequeño incógnito de un bote de pintura entonces mira digo me voy a internet y digo baquet icon por ejemplo pero yo os diría vamos al camp que podríamos hacerlo vamos al gym y dibujamos un icono de un cubo pero te sería muy cruel porque entonces sería el gimp haciendo un icono para otro campo es más haciendo un icono para el gym quien sustituirá al game madre mía entonces claro sería como un poco que has dicho muy pretencioso pero es que como dice he dicho para conseguir algo primero hay que creérselo vale pues esto es igual bien entonces voy a un back & uno que tenga transparencia uno que tenga transparencia para que se funda bien con el fondo del botón no sé qué más os guste no vamos a ver yo siempre digo que los tres formatos admitidos en la web son jpg gif y png pero es cierto que el ico también está soportado por tanto y ccoo no hay problema así que me guardo esta imagen me la voy a guardar como cubo me la guardo en camps ht docs jim webb en imágenes que habían y aquí en imágenes es tan claro la imagen que voy a cargar voy a crear una nueva carpeta llamada iconos y ahí lo guardo como cubo png bueno pues ahora lo que hago es que aquí donde pone class botón le digo cubo y creó una imagen img src y conos cubo punto en eje es decir dentro de ese botón pues he metido una imagen cuidado porque si ahora recargo veréis como madre mía la imagen sobresale completamente en el cubo así que bueno no pasa nada porque luego con un poquito del css le decimos los botones las imágenes que estén dentro de los botones es decir que las botón espacio ing le digo wifi 100% y ya esto ya está porque la altura se moverá automáticamente así que guarde y recargo y madre mía que pequeñito pues parece que no pero está ahí el cubo pues bueno ahora sí es cuando vamos a verlo no es el caso es que teóricamente está bien teóricamente la imagen está bastante maximizada dejadme que lo inspeccione ay qué dolor míralo ahí está el problema es que se inspeccionó el botón parece que el botón tiene un tamaño muy grande el botón tiene un margen verde lo dejáis verde clarito muy grande por tanto voy a decirle a la imagen que tenga yo que sé si el botón le dije que tuviera una anchura de 20 píxeles pues 15 píxeles como mínimo manualmente ahora sí aparece un poco descentrado se va hacia la izquierda no pasa nada porque luego lo podemos seguir editando luego tiro el botón hacia la izquierda en fin lo que sea trébol de momento me sirve el combo de pintura y lo que quiero la canción todo lo que quiero es que cuando yo seleccione un color leve e gracias leve al bote de pintura y en la imagen pues en este caso se me active y lo de rellenar de color vale por ejemplo así que si ya tenemos el gráfico vamos a por el código entonces en este bloque de código lo que quiero hacer simplemente es crear el siguiente javascript mira en condiciones iniciales porque esto no deja de ser un bloque de condiciones iniciales digo bar operación activa es igual a nada es decir cuando empieza el programa operación activa es igual a nada no hay ninguna operación activa así que yo digo lo siguiente en la función principal digo cuando sobre cubo haga clic en ese caso ejecutaría una función khedira función activa es igual a cubo la operación activa no funciona activa operación activa es igual a cubo y de esa manera el programa sabrá que cuando yo haga clic en la imagen que rehn o cualquier otra cosa sino cubo y luego otras funciones más adelante otras funciones por tanto ahora cuando haga clic en el canvas cuando sobre el canvas haga clic ejecutaría una función que una vez más me dirá muy bien pues switch vamos a prever el problema de antes switch operación activa porque ahora mismo tenemos una operación pero os podéis imaginar que dentro de un rato tendremos unas cuantas switch operación activa y digo en caso de que la operación activa sea jugo en ese caso me ejecutas la función cubo que no existe todavía pero ahora existirá break y la función cubo es una función que de momento voy a poner aquí abajo y que más adelante ya está realizaría un archivo externo para de momento para que todos se queden la misma fue en el mismo archivo digo function tuvo es igual a hacer lo siguiente función cubo equivale a pues por ejemplo todo esto de aquí mira voy a copiar un trozo de código placa black y mirar en cualquiera de las operaciones atención de tratamiento de color pues claro nosotros lo que hacíamos era primero revisar la matriz para editar los colores bueno pues yo simplemente atención lo que voy a hacer es quitar esto de aquí es más voy a quitar esto de aquí y digo data es igual aquí muy bien espera que coja el valor de esto porque el valor de esto es un color creo hexadecimal voy a hacer una cosa aquí no pongo nada de momento y aquí voy a poner un alert simplemente a leer color frente punto oval fantástico con los frente punto vale bien entonces con la selección un color verde cojo el cubo pinto en el canvas eso es lo que hay ahora el problema es que me devuelve el color en formato hexadecimal y yo no necesito un formato hexadecimal yo necesito un valor numérico de 0 a 255 para el canal rojo para el canal verde y para canadá azul no hay demasiado problema porque nucleando rapidísimamente vamos a encontrar que existen luego grandes funciones que me permiten convertir de hexadecimal a rgb en un momento así que por tanto digo javascript ex tú rgb tu ex y ex tu aire' egb efe ss no rgb tuvo html componen tu ex rgb tweets extraer egb así que bueno tengo por ejemplo esto vamos a ver el color que me devuelves es este de aquí a punto g muy bien fantástico pues me voy a copiar a este código ahora os envío por correo porque el resultado es un poco raro ex tú rgb y esa es la función que por ejemplo vamos a usar vamos a ver esto rgb para obtener los componentes de cada uno de los colores entonces la cuestión está en que ahora yo vengo aquí simplemente al bucle for y le digo data de ahí es igual a ex rgb de color frente punto oval punto r porque acordamos que el resultado de esta función se devuelve como parámetro de la función punto r es el componente rojo punto g es el componente verde y punto b es el componente azul vive si no es muy frecuente pero de vez en cuando viene bien entonces data más y data más uno es igual al componente g hidrata más 2 es igual al componente b así que guardo recargo cojo un color le voy a pintar y cuando pinto se y valencia con alert y claro hay pero es lo que tiene el cubo de pintura y dejadme que haga un alert o sea que quite la ley quería decir bien y volvemos a probar entonces pues digo ahora cojo amarillo acepto pinto y ahí lo tenemos si tenemos la imagen completamente pintada del color que queráis así que ya tenemos algo que no es ya sólo una operación de tratamiento de color de hecho luego fíjate que le puedo dar a aclarar y le puedo dar a oscurecer tarda un poquito totalmente no digo sí según dyn pero antes de quemar un poco raro quizás con un poco raro quiere decir que va un poco lento entonces claro que yo te digo lo siguiente yo te digo lo siguiente realmente es un malgasto de información el tener que para cada uno de los píxeles decir ejecutar de nuevo la función ex rgb de color frente punto mal y punto ere con lo cual antes del foro yo creo que avanzaremos mucho más si diego rojo es igual a esto de aquí y no me lo re calcule es cada vez verde es igual a eso de ahí y azul es igual a eso de ahí punto b con lo cual yo ahora le digo esto es igual a rojo esto es igual a verde y esto es igual a azul hacemos un solo cálculo al principio una sola transformación y haciendo esto previsiblemente la imagen rendirá mucho más deprisa fíjate que prácticamente mira amarillo hago clic y con un toque automáticamente funciona claro tras hacer esto realmente nuestro código vuelve a complicarse por tanto seguimos con la filosofía de que cuando vemos que el código se está complicando pues empezamos a externalizar en funciones así que yo digo mira me voy al programa y digo en funciones yo antes tenían filtros pero esto del cubo no es un filtro esto del cubo es una operación y técnicamente lo del texto rgb no es una operación es como una función de librería que más adelante puedo necesitar volver a usar en un montón de operaciones diferentes así que digo me creó una carpeta llamada librerías comunes así es que por tanto yo ahora vengo aquí y creo un archivo llamado x to rgb punto j s me abro esto rgb js y le duplicó el código le duplicó no quería decir le cortó y le pegó el código eso sí le muevo el código realmente ahora a continuación me voy a operación realmente sin filtros está en plural y librerías comunes están plural pues bueno operación pues también deberían ser operaciones para estar en plural y en operaciones me creó un nuevo archivo llamado cubo punto j s así que abro cubo js le pegó la instrucción de cubo y ahora evidentemente lo que tengo que hacer es llamar a esas funciones por tanto llamó a esas funciones desde la parte superior del script y digo esto es librerías comunes archivo xto rgb js o como sea que lo habéis llamado y me voy a operaciones cubo js y comprobaremos por tanto que el programa sigue funcionando perfectamente verde cojo el cubo pintó de verde funciona exactamente el código se me queda más limpio y sobre todo para cuando el programa crece y crecerá de dificultad cualquier programa crece de dificultad pues mirad yo me meto en funciones y digo a ver filtros librerías comunes y operaciones y digo vale me hago una idea de que hace de cada carpeta me meto en filtros y veo a aclarar brillo contraste js y digo mira antes de abrir ningún archivo me hago una idea bastante aproximada de para qué sirve cada archivo vale no es como cuando tengo funciones punto js dentro de funciones tengo 120 funciones y digo pues ahora mete ahí dentro y busca que no está mal es decir no estoy diciendo a partir de ahora siempre trabajar así porque cada solución cada metodología que adoptéis en vuestra vida va a tener siempre ventajas y desventajas tenéis que buscar aquella que para vosotros os dé más ventajas y menos desventajas cuál es la ventaja de tenerlo todo en funciones porque tienes menos archivos en el sistema con esta metodología llega un momento que el programa puede tener desde archivos diferentes pero cuál es la ventaja de tener miles de archivos diferentes la desventaja es que al tener mis activos diferentes del programa es más difícil de tratar el programa cada vez que lo llevas tienes que haber donado para otros miles de archivos a la vez pero a cambio cada vez que abres una carpeta no tienes que ir navegando para arriba y para abajo en un archivo de función hasta encontrar la que quieres si no entras en la carpeta y dices mira hoy quiero mejorar porque hoy me levanto con ganas quiero mejorar el brillo contraste pues sabes que te metes ahí cargas brillo contraste ya saco y no tienes que ir buceando entre un montón de otro código hasta encontrar el código que quieres por tanto insisto no os digo a partir de ahora siempre trabajar así si no os digo oye sabes el saber qué predicciones y esta metodología y que en un momento dado la podéis usar es como digamos divide y vencerás contra usa siempre un montón de bloques de código no os digo que una sea mejor que la otra sino que cada una tiene ventajas y desventajas con respecto a la otra ahora luego quería integrar algo de código que ya hemos hecho anteriormente en el micro editor donde para que ahora vamos a ponernos a repensar otra vez el código de pintar con la brocha encima de encima del dibujo cuando ya hicimos ese código vale con lo cual ahora luego haremos eso pero antes de hacer eso me gustaría que os diría yo darle un poquito de mejor aspecto a esta aplicación vale porque esta aplicación hasta ahora nos hemos preocupado de que funcione y de momento va funcionando pero vosotros mismos me dijisteis el otro día que al final a la gente le entran las aplicaciones le entran los juegos la entrada cosas por los ojos por mucho que por dentro esté perfectamente programado y lo estamos ordenando para que sea ampliable y extensible y mantenible y todo lo que tú quieras pero esto desde fuera pensando qué pasaría si le presentase esto a algún colega hoy en clase si tu colega te diría esto es muy cutre porque fíjate a qué letra es esta es la mitad de botón están sin hacer y aquí esto está cortado y tú le dirías no que yo pero es unas funciones que las externalizado y fíjate entras en esta carpeta y sabes que es cada función y también si ya pero no vale entonces vamos a trabajar un poquito la estética de este proyecto entonces bueno yo os voy a decir cómo lo haría yo otra cosa y es que me voy a index html y como ahora la estética va a crecer tengo el estilo metido dentro del archivo index.html así que una vez más mirad me voy a jim webb me voy a crear una carpeta estilo punto fe estilo nada carpeta estilo dentro me voy a crear un archivo de texto llamado estilo css dentro de estilo css voy a meter todo ese estilo de hecho pues bueno ahora lo haré bonito poniendo cada línea en el sitio mayúsculas tabulador vale una cosa así bien por supuesto ya sabéis en index.html voy a poner un ring un link wray es igual a esta el sit h ref es igual a estilo barra estilo css es decir le digo te externalizado el estilo pero ahora lo que quiero es cargar ese estilo comprobamos como el programa sigue funcionando igual comprobamos como el estilo se sigue aplicando igual y vamos a mejorar un poquito el estilo de esta aplicación os acordáis que al principio del todo os dije mira nada herramientas imágenes y capas lo quiero con un borde de un píxel sólido blanco o sólido negro y os dije esto lo hago así porque quiero ver los bloques pero ahora ya que los estamos viendo ya no hace falta queda muy feo así que digo el borde de todo eso lo bajo a cero vemos como de momento hemos quedado bordes en muchos elementos crea un estilo por aquí arriba y digo al body coma html algo villar html le voy a decir background 2 puntos rgb gris clarito 220 padding es igual a 0 píxeles martín es igual a 0 píxeles y le voy a decir ahora espera que te lo digo es decir ahora font family sam's sheriff no quiero una letra de palo sano sin una letra con remates quiero una letra de palo el momento fijaos que esos cambios han producido este cambio en la estética en cuanto al menú de navegación que lo tengo aquí el nap tiene un wish de 100 por ciento bien está bien pero yo ahora vengo aquí y digo vale pues mira font-size es de 11 píxeles text transformó es a parques quiero en mayúsculas así que aguarda y recargo fijaos cómo eso se convierte en esa línea y me gustaría lanzar crear un pequeño separador entre esos elementos de arriba y los de abajo así que vengo aquí y digo en el nab quiero un pequeño padding de 4 píxeles y un border botón es decir un borde solo en la parte de abajo de un píxel solid grade así que guardo y recargo bueno eso ya es otra cosa parece que ya tengo por allá arriba un pequeño menú a mí me suele gustar separar personal me suele gustar separar los elementos de menú con una serie de dobles puntos pero esto es manía personal son unos separadores así para ver claramente la diferencia entre archivo editar imagen lo que sea de hecho esto es muy librería java operaciones como es un select ahora lograremos más select operaciones veis mirad tiene una estética diferente todo lo demás por tanto yo le voy a decir esto qué es esto será y de operaciones ahí está una operaciones es decir el elemento que tiene operaciones dentro del nap pues quiero que tenga los siguientes elementos border none background none me quiero cargar el borde me quiero cargar el fondo y veis por tanto que pasa a tener la misma estética que el fondo se funde con el fondo de hecho quiero texto transforma a parques y font size 11 píxeles y ahora sí veis ahora está mucho mejor fundido con todo el resto de cosas pero sabemos que la flechita hacia abajo quiere decir que se despliega mira las operaciones no nap select cualquier select que haya dentro del lab claro si hemos hecho esto prácticamente me abre la puerta como ahora vais a ver aunque no lo probemos todavía pero de momento vamos a esbozar lo esto me abre la puerta a crear menús desplegables en este caso para cualquier aplicación para esta aplicación pero como os podéis imaginar esto más adelante lo podemos usar para crear menús desplegables para cualquier juego que vayamos a hacer entonces si ya habéis copiado el css avisadme cuando hayas acabado de copiarlo porque me voy a volver al index html para crear pues unos pseudo menús para el resto de archivo editar imagen y eso bueno pues ahora me vuelvo a index.html para donde pone este burdo archivo pues lo que voy a hacer es poner un select hecho permitirme que me copie s pongo un select y de archivo y digo el value inicial va a ser archivo y a partir de aquí no se inventaron solo un poco dijo nuevo es una imagen en blanco abrir guardar y guardar como y luego más adelante haremos un exportar no decimos salir porque ascencio en este aplicación no tiene sentido salir porque estás en una web así que digo esto es nuevo esto es abrir esto es guardar como guarde recargo y besa y como tengo archivos con los clásicos nuevo abrir guardar y guardar como de la misma manera me puedo ir a editar y en editar me copio y pego éste select cuyo idea es evitar su value inicial es editar y digo no sé copiar cortar pegar incluso en un momento dado podemos implementar un deshacer y un rehacer pues esto ahora se llama copiar se llama cortar se llama pegar se llama deshacer y se llama rehacer así que guardo y recargo y seguimos viendo lo mismo digo archivo por aquí evitar por aquí operaciones por aquí y voy teniendo un menú superior para una aplicación antes de hacer imagen realmente no se me ocurre a la misma que meter una imagen o igual las operaciones de operaciones realmente irían en la imagen mete a saber pero antes de continuar lo que yo voy viendo es que este archivo está volviendo a crecer entonces está volviendo a crecer y yo cada vez que este proyecto va creciendo digo no hay que vaciarlo el archivo principal se tiene que quedar vaciado por tanto voy a hacer lo siguiente mira ahora es cuando voy a necesitar un poquito de php para la siguiente operación me voy a crear una nueva carpeta llamada incluye a una cosa que os digo y cuidado todos porque esto ya nos ha pasado antes el no actualizar correctamente mirad voy a cerrar en el editor el archivo index.hr ml porque en el sistema de archivos lo voy a renombrar como php y lo voy a cargar dentro del editor para ahora usar algo de php así que me llevo todo lo del nap mirabel incluyes me hago un nuevo archivo que se va a llamar menú superior php y ya menú superior php mira tras vaso todo este contenido de select a menú superior letras basó todo eso de allí y vamos a usar ahora una función que dice lo siguiente vamos a usar ahora una función de php que dice dime todo lo que había en nada dice e incluye entra dentro de la carpeta incluye y carga me menú superior punto php y que está haciendo eso pues eso es como que se va a esa carpeta y carga ese archivo y finalmente y esta es la gracia finalmente el programa ni se entera porque el programa dice vale pues aquí lo tienes el programa ni se entera pero para nosotros es mucho más sencillo porque nos permite mantener simple el código inicial pero es que te digo más me vuelvo a la carpeta incluyes y me hago un nuevo archivo php llamado herramientas punto php los cargos dentro del editor le traspaso todos los botones que hay dentro de herramientas que de momento no hay muchos pero ya habrá más dentro de herramientas y aquí digo php incluye herramientas php y de un tirón acabo de externalizar un montón de elementos algunos todo lo que son funciones los externalizó con javascript pero todo aquello que es html que no es tan fácil de externalizar con javascript pues lo externalizó con php y el programa sigue igual internamente el programa sigue exactamente igual y seguimos limpiando yo realmente este script pues tampoco lo quiero ver dentro de este archivo así que por tanto me voy aquí por ejemplo mira y digo creo en gimp web punto js o el nombre que queráis es lo de menos entonces cargo jim webb punto j s mira le pasó todas las condiciones iniciales le pasó todo el bloque de arranque y en index.php digo script src jim webb punto js así que ahora voy a ir ahorrando un poquito de espacio y de vez en cuando la manera que nos preocupamos porque el código pues esté bien estructurado o la aplicación sea bonita todo lo que tú quieras pues también nos vamos preocupando de que dejadme que ahorro un poquito de espacio por aquí porque realmente nos lo podemos permitir entonces al final de todo ese proceso de limpieza pues fijaos que la parte principal el archivo principal de este proyecto se queda super limpio tal que lo puedo abrir y digo oye mira importo jquery importo librerías importe el menú importe herramientas e importó game web y empezamos a funcionar y de un vistazo puedo saber qué hace cada bloque del programa y si luego quiero saber más si yo no quiero trabajar hoy por ejemplo con negativo punto j s no me tengo por qué comer negativo punto j es en el código y está haciendo scroll de un código que no me interesa ahora sino que igual cuando quiera trabajar sobre el código de nadie acá negativo punto j s pues ya me iré a funciones filtros y me abrir ese archivo pero de momento no lo tengo por ahí molestando en pantalla así que como veis pues un poco se trata de preocuparnos de varios frentes a la vez en una aplicación primero ya sabéis que yo siempre digo lo mismo primero que funcione vale y ahí estamos pero una vez que funcione pues también le echamos un poquito de esfuerzo a que la aplicación sea bonita vale y una vez que funciona y la aplicación sea bonita pues también nos preocupamos de ir externalizando el código modular izando el código como queráis de la forma que queráis de tal forma que cuando yo como desarrollador cuando el cliente abra la aplicación diga ah mira qué guay y cuando yo como desarrollará la aplicación diga oye mira que me entero de todo como va vale es la cuestión bien sigamos como os decía ahora para finalizar para hacerlo suave vamos a únicamente a reutilizar el código que ya teníamos previamente desarrollado para el pintar para el micro editor así que dejadme que abra el micro editor me voy a index.php y en index.php está esto ahí está muy bien pues voy a hacer lo siguiente mira dentro de jim webb me voy a funciones me voy a operaciones me voy a funciones operaciones y voy a crear un archivo llamado dibujo js o mira es pero espera lápiz js diego lápiz porque igual más adelante entendemos pincel así que el lápiz punto j s cargo lo siguiente en lápiz js a ver voy a cargarlo en la página principal lienzo mouse move ok atención me voy a index.php luego lo esté realizaré me voy a james webb punto j s y ahora digo en el caso de cubo atención ejecutada al cubo bien ahora digo en el caso de lápiz pero esta función que ahora externalizar emos y digo break cuando sobre canvas punto mouse move y todo eso digo contexto file style es color frente y ya está así que hago lo siguiente mira ahora está realizado este momento si queréis pérez o copiar para que nuestra realice para ser más eficientes entonces simplemente lo que quiero ahora es hacer lo siguiente en herramientas voy a hacer que esta herramienta voy a poner una l rápidamente sea el lápiz le he puesto el lápiz y una simplemente rápidamente y ahora digo ahora vivo cuando sobre parámetro día con esta operación activa esto es index y esto es game web ay cuando sobre el lápiz haga clic en ese caso operación activa es igual al lápiz y por tanto si esto ha ido bien por un segundo y no copies todavía si esto ha ido bien yo pulso cualquier otro botón mira yo pincho y dibujo y no pasa nada pero yo pincho en la l del lápiz vamos a ver y ahí empiezo a pintar le estoy empezando a pintar además pinto si todo va bien mirad con el color de frente con el color que yo tengo seleccionado ahí pintó de amarillo y daos cuenta como pintó de amarillo realmente lo veis por tanto por último y ahora sí ya copias por último esto ha quedado muy feo así que lo que voy a hacer es que lo voy a mover a lápiz punto j s y ahora simplemente a cuidado digo esto es function lápiz vamos a verlo un lápiz me vengo aquí y ahora esto es lápiz ahí está y digo importo lápiz por supuesto en el archivo principal esto ya no es importo operaciones lápiz alguien problema y es que el lápiz no parará pero vale yo le digo no dibujo nada la imagen por ejemplo la claro y ahora selecciono un color rojo por ejemplo le doy al lápiz y empezamos a dibujar justo con ese color le doy un color azul y dibujo con ese color relleno de azul o verde o de naranja y relleno y ahora cojo el lápiz pintó de verde y sigo pintando así que fijaos que claro la cuestión es que ahora por ejemplo pincho este botón mira pincho este botón y sigo pintando con el lápiz vale con lo cual le tengo que decir al lápiz punto js que sólo sí edwidge tal y además es cierto qué operación activa es igual a lápiz en operación activa es igual a lápiz solo en ese caso mira clara operación activa vamos a verlo james webb tengo este es el elemento pero cuando yo he hecho el primer switch aquí esta aplicación el lápiz se empieza a ejecutar y en ningún momento de vigo déjate de ejecutar una vez que le ha empezado a ejecutar le digo mouse move mouse siempre claro entonces simplemente le digo he creado en herramientas el botón se llama la brocha si quieres brocha le pongo un ave y luego ya buscamos en el icono entonces en web le digo cuando sobre brocha hagas clic operación activa es igual a brocha ya no es igual al lápiz por tanto fijaos como cojo el lápiz y empiezo a pintar pero cojo la brocha y ya no pinto cojo el lápiz y si que pinto pero cojo la brocha y ya no pinto vale ahí lo tenéis y bueno lo primero que voy a hacer es ir abriendo localhost web tenemos esto por aquí y hoy vamos a empezar trabajando con las capas que es algo que nos hemos dejado un poco completamente dejado de lado así que voy a arrancar ebit voy a abrir el documento con el que estábamos trabajando ayer así que sam shepherd en web abro el archivo index html limpio que está el archivo index html la gloria verlo entonces dentro de capas voy a crearme un pequeño select donde este selecto tendrá el y de capas ahí está y dentro del iii de capas voy a crear una digamos llamemos la primera opción donde digo value es igual a 1 y voy a llamar la capa 1 por ejemplo esto lo que hará es que mirad cuando yo recargo pues aquí madre mira esto qué es qué cosa barra de select déjame que lo vea select y de capas muy bien ahí está pero sigue siendo un poco extraño capa uno de ellos sale ahí pues voy a ver por qué efe select n tiene ese estilo entonces dónde está ese estilo estás ahí es un height del 70% el wef del 12% a muy bien porque efectivamente tengo aclaró cuidado ya está ya ha cogido el error es que no es nada recomendable que el biv tenga el y de capas y el select nga el mismo y de capas por tanto voy a llamarlo mis capas o algo así vale simplemente para que esté clara la diferencia entre un elemento y otro pero sobre todo lo que quiero ahora mirad es que voy a estimular como si ya tuviera unas cuantas capas mira pongo hay unas cuantas que apaciblemente estoy duplicando esa opción esa línea de opción recargo y tengo un desplegable con capas vale pues esto no es lo que quiero tener lo que quiero tener como estaba viendo en este editor es la opción de múltiple la opción de múltiple dentro del selecto mis capas múltiple lo que hace es que el selector de capas se muestre como una línea y yo tenga esa selección que veis ahí incluso en un momento dado no hoy todavía pero en un momento dado que pueda seleccionar varias a la vez hoy todavía no exageremos partido de esa opción pero desde luego para un futuro no nos vendrá nada mal que esté bueno ahora bajo del select quiero tener un botón button que va a tener el y de añadir capa ya sabéis a nabil con n no con ella y lo que voy a hacer es simplemente poner un signo más con lo cual fijaos que tengo al final un signo más un botón con un signo más que lo que hará es añadir nuevas capas por tanto finalmente voy a eliminar esas tres opciones y voy a dejar solo una porque solo cuando le dé a el botón más es cuando quiero que aparezcan nuevas capas realmente en la interfaz así que para ello vamos a programar un poco para programar un poco si ya tenéis la parte de html pues nos vamos a jim webb punto js es decir nos vamos al archivo principal de js y en alguna parte del documento web y en alguna parte del documento web y por ejemplo por ahí pues le digo cuando sobre anadir capa haga clic ejecutaré una función khedira en el elemento mis capas punto ap quiero añadir una opción khedira hola de momento así que guardo y recargo y le doy al signo más y todo ha ido bien dirá hola es decir va creando nuevas capas que de momento se llaman hola hay dentro la idea por tanto es que no quiero que ponga hola quiero que ponga capa 2 capa 3 capa 4 por eso voy a crear una variable inicial bar nunca paz es igual a 1 empiezo el programa con una capa y por tanto ahora en la opción digo pues mira nunca pasa más es decir quiero aumentarle un valor a lo que valieran un capaz y ahora digo capa nunca pas esta es la capa que tiene el nombre de la variable nunca pas así que cappa 1 le doy al botón más y me aparece capa 2 le doy al botón más y me aparece capa 3 le doy al botón más y me aparece capa 4 hay un detalle que me falta y es que si el primer elemento es value 1 pues le tengo que dar a las opciones también un pequeño value así que voy a decir value más nunca paz así cada capa no solo tendrá un nombre sino que también tendrá un pequeño valor y hasta ahora por tanto estamos creando únicamente como os diría yo capas que realmente no hacen nada pero lo que quiero es que realmente haya capas es decir que realmente cuando yo creo una capa dos por ejemplo se cree un elemento aquí encima se cree una nueva capa en la que yo a partir de ese momento poder dibujar podré pintar podrá rellenar podré retocar podría hacer lo que quiera entonces para ello me voy al index php y veo que tengo por aquí en vivo y de imágenes la idea de que he creado una un canvas originalmente llamado canvas y de imagen bueno pues lo que voy a hacer ahora por tanto mira es que voy a decirle no sólo quiero crear en primer lugar añado un elemento al select sino que además también aquí abajo además le añado realmente una capa nueva al escenario a imágenes y por tanto eso quiere decir que me voy a imágenes punto a p y digo creo que quiero crear un canvas sabes que me voy a duplicar este entonces quiero crear un canvas pero cuidado porque evidentemente no puedes tener esto no puede bajar no puede tener el y de imagen sino que debe tener el y de capa no incapaz para que no se confunda con el anterior claro esto lo que hace es que cuando yo miraba creó una nueva capa lo que hace es que aquí abajo realmente aparece otra lo único que pasa es que de momento cuando creamos ese canvas pues ese canvas se está creando porque es un elemento html como cualquier otro elemento html que conocemos pues es un elemento que se crea bajo que se crea a continuación pero yo en una aplicación como game como photoshop no quiero que la segunda capa se me crea a continuación quiero que se cree justo encima eso no es una cuestión de html extracción de css por tanto ahora sí tengo que abrir el código tengo que abrir el código correspondiente a estilo punto css y tengo que decirle qué es lo que ocurre dentro de las imágenes entonces digo aquí por ejemplo en imágenes digo imágenes canvas eso quiere decir que a cualquier canvas que esté dentro de imágenes una imágenes le digo para empezar un sitio en relativa y hay imágenes canvas le digo por sitio en absoluto pero píxeles left 0px él es y eso es lo que va a hacer cuidado aquí dos puntos y eso lo que va a hacer es que cuando yo creé una capa nueva aunque ahora probablemente no veréis nada pero cuando yo creé una capa nueva la capa nueva se ha creado encima de la anterior si no lo veis no pasa nada porque le doy a inspeccionar y comprobaréis como efectivamente existe un segundo canvas que está justo encima del primero vale por tanto ahora lo que vamos a hacer va a ser una vez que tenemos creado un canvas vacío pues vamos a poder pintar vamos a poder rellenar vamos a poder hacer lo que queramos dentro de ese canvas si el programa más claro el único problema que tenemos ahora mismo digamos mirad es que cuando me voy a el código y todo el código en principio gira vamos a verlo todo el código en principio gira en torno a una función llamada canvas así que fijaos lo que estoy haciendo es seleccionar únicamente el canvas y digo vamos a ver por qué el cubo no funciona mira recargo y digo el cubo aquí tal cual funciona bien pero si creó una nueva capa y le hago clic a rellenar resulta que no funciona vamos a ver por qué vamos a trapear porque en primer lugar tengo por aquí con el que vivo cuando hago clic en canvas lo que hago es que en el caso de que haya cogido cubo ejecutó la instrucción cubo vale así que vamos a ver hago clic y hago clic vale pero hay un problema y es que este elemento canvas este elemento que he creado ahora se ha creado completamente dinámicamente y eso quiere decir que ya sabéis que cuando algo se crea dinámicamente la instrucción clic puede no funcionar que instrucción hay que ponerle con él entonces le digo este canvas lo pasó aquí y digo en el quieto cuando haga clic coma en ese elemento coma ejecutó de esa función y aquí vivo documento punto lo que he hecho es cambiar la instrucción clic por la instrucción on para reconocer los elementos que se hayan creado dinámicamente y esa nueva capa pues se ha creado dinámicamente así que le digo click canvas todo ok y vamos allá vamos a ver si ya funciona por tanto cree una nueva capa le doy atención a rellenar y se rellena pero hay un problema que capa de rellenado no bueno claro se creo que la primera vamos a ver el código que dice porque ahora mismo también te digo que te hablo de memoria entonces me voy a herramientas me voy a funciones me voy a operaciones me voy a cuba vamos a ver un cubo al centro con texto put emails data ese es el problema y diego el contexto que es pues el contexto es lo siguiente el contexto es y bueno contexto es document.getelementbyid imagen ese es el problema imagen es la primera imagen que tenía abajo del todo fijaos que esta imagen que tenía abajo del todo atención todos de crear la nueva capa se llama imagen tenemos la capa de base pero esta segunda que he cogido es capa 2 por tanto de alguna manera cuando empiezo a dibujar tengo que decirle al programa oye por defecto yo estoy dibujando en la capa 1 y ya hemos visto que cuando el pincho el botón más pues creo la capa 2 se crea un canvas pero también le tengo que decir al contexto oye contexto tú ya no eres la capa de fondo ya no tienes que aplicar las operaciones a la capa de fondo sino tienes que aplicar las operaciones sobre la capa de frente entonces para ello lo que tenemos que hacer es lo siguiente para ello en primer lugar en index.php dejadme que esté vivo que tenía el y de imagen pase a llamarse capa uno porque pues porque el segundo se llama capa dos si mantenemos una nomenclatura cuidado si el canvas se pasa a llamar capa 1 es normal que en principio nada funcione porque pues porque en jim webb el documento element by heidi equivalía a imagen vale por tanto voy a decir capa 1 y haciendo capa 1 volverá a funcionar y ahora comprobamos cómo pinto como pinto con el lápiz como pinto ahí está así pinta un poco desfasado luego arreglamos eso vale pero en principio vamos pintando la ley que era brocha así para luego hacer nada brochas muy bien entonces la idea mira es que cuando creó una nueva capa me vuelvo a game web punto js y diego mirar déjame que elimine ese espacio en blanco y digo en primer lugar añade un elemento en select ok además le añado realmente una capa nueva a imágenes ok pero es que además y por último le digo a javascript que donde tiene que pintar es en la nueva capa por tanto voy a declarar cuál es el cce el contexto el javascript que donde que pintar madre mía que donde tiene que pintar me he comido hay una palabra es la nueva capa y es más voy a poner un par de comas para que la frase de acuerdo a cómo se enfría yo que esta apuesta o algo así para la nueva capa bien entonces get element by heidi cappa nunca pasa a ver si me coge esto hay veces que sí que me lo coge cappa nunca más si todo ha ido bien vale me voy a recargar me voy a hacer una capa nueva pinto vale de momento no pinto en la consola tampoco dice nada es una cuestión muy interesante efe document.getelementbyid capas voy a hacer una cosa vamos a ver con sólo el punto log nueva capa y le digo nueva capa es igual a capa en capas un segundo así que guardo recargo capa 2 en principio capa 2 vamos a ver lo recargo clic pero no por la sencilla razón vamos a ver si entra un cubo pero el punto no este es el cubo así que guardo y recargo nueva capa bueno para empezar pinto es ok nueva capa pinto este es el cubo es decir entra dentro de la función pero no está cogiendo correctamente la capa e intuyo que no está cogiendo correctamente la capa simplemente por la sencilla razón vamos a verlo de que es un elemento creado dinámicamente así que voy a probar esto es igual nueva capa y ya está así que guarde recargo pinto y ahora sí piquet contexto y flota function jake contexto sin embargo sí que lo ha cogido eso es no lo ha podido declarar eso es morentín voy a ver cómo podemos cogerlo esta solución es un poco como decir lo siguiente como decir canvas es igual a todo esto de aquí un nuevo canvas si quieres es igual a todo esto de aquí con lo cual yo aquí le digo nuevo canvas bien y de momento ok simplemente lo que he hecho es meter eso dentro de una variable ahora la idea del nuevo canvas ahí está este elemento by heidi digo el contexto es igual a nuevo canvas punto get context es decir la idea es meterlo en una variable porque de esa variable luego puede escoger su contexto vamos a verlo así que guarde recargo le veía play nuevo canvas get context yx nota function y sí que debería serlo pero vale la idea es que el nuevo canvas digamos que estoy introduciendo esa variable qué es esto de aquí canvas es igual a document create elemento canvas bueno podemos dejarlo así pero el documento create element no eso sí vale pues mira vamos a cerrar la bestia dando un segundo y digo canvas es igual a document creditel m en canvas un momento y ahora digo canvas xavi es igual a todo esto canvas es igual a capa más nunca paz canvas with es igual a 312 canvas height es igual a 312 vamos a ver nuevo canvas fuera vale y canvas style bueno mira si el borde que curioso justo el mismo que había hecho yo canvas está el border un píxel sólido black ya que estamos muy bien por tanto yo ahora le puedo decir que ese elemento que acabo de crear quiero su contexto así que vamos allá a observarlo recargamos nueva capa bien nueva capa y design nueva capa cuidado vale así que crea una nueva capa tengo muy claro dónde la ha creado vamos a verla en mi imagen es seguro que no vamos a pintar firme después el tema está en que aquí está diciendo document create element canvas en el documento no veo así de repente que esté creando ningún nuevo elemento llamado canvas bueno para eso también te digo que casi prefería esta opción a pensar donde nos unen el sol vale así que ahora mira atención pincho aquí crea una nueva capa un error vale para meter one is not of time no documento body a pensar el canvas es que me he saltado una cosa no es que además a ver si iba vamos a ver cómo voy a pensar el canvas eso debería estar dentro de una variable canvas y nueva capa canvas es not the fine pero sin embargo en el body no mete un canvas nuevo en la línea 15 por tanto esto aquí crea una nueva capa y se crea una masa y dentro de momento todavía no además cuando hago clic y pincho vamos a ver de momento no está rellenando nada pero lo importante es que por lo menos se ha creado el canvas vamos a ver cómo se ha creado canvas y de capa 23 12 312 border de un píxel con lo cual se habrá creado por aquí en alguna parte en el body como podemos ver ahora ya sólo hace falta seleccionar que en lugar de body me lo haga dentro de donde toca con lo cual ahora yo le digo contexto es igual a canvas punto que contextos ve ahora sí que debería estar reconociendo ese canvas para poder pintar quiero decir que lo tengo ahí pintó está entrando dentro del cubo vale y el problema es este así que marca ambas es igual a nada canvas es eso de ahí para sacarlo fuera creamos nueva capa pintamos todavía no pero ya le falta poco bien entra dentro del cubo pero todavía no sabe dónde pintar bien vamos a ver la solución que dando crédito a la de josé luís es la siguiente vamos a ver yo creo una nueva capa entonces el problema está parece estar en que yo le doy al cubo de pintar está pintando pero está pintando sobre el color transparente pero antes que nada que es el color transparente vamos a ver en cuanto al código es ese cuarto canal porque acordamos que vamos de pasos de cuatro en cuatro pero luego sólo hemos usado tres componentes de color que han sido la componente roja que es y la componente verde que es y más uno y la componente azul que es y más dos por tanto en cada pixel hay un canal marte de color realmente que es el alfa es la transparencia del píxel y en este caso parece que el problema ha sido derivado porque esta imagen tiene todo transparencia entonces yo vengo voy a crear una la capa vengo a pintar pinto de un color le digo que pinto ahí dentro y ahí sí que pinta es decir me estaba pintando por algún motivo realmente del color que tocaba pero todo pixeles transparentes con lo cual lo que hago ahí realmente es decirle no cada pixel que sepas que el pixel es opaco esto lo podemos ver mejor en el game donde yo al final era que puedo pintar puede ser una imagen absolutamente pequeña para que se vea mejor una imagen de 8 x 8 píxeles empiezo a pintar me hago una nueva capa y fíjate que yo cojo el lápiz por ejemplo y empiezo a pintar tamaño color azul y ahora al pintar aquí ahora al pintar pinto esto de aquí pero yo puedo la capa y puedo la capa y le bajó la opacidad con lo cual fíjate que esos píxeles dejan ver el fondo yo de hecho podría una capa diferente podría pintar ahora mira álex fue color verde y fíjate cómo se funden en ese punto en este punto y en este punto se funde el color azul y el color verde porque pues porque en png que es el formato nativo para el canvas y un formato muy importante para la web existe ese concepto de transparencia por tanto finalmente cada pixel no sólo tiene la definición de cada pixel no sólo tiene tres canales rojo verde y azul que definen el color sino que hay un cuarto canal que es el canal de transparencia y el canal de transparencia indica cada pixel como de opaco como estos verdes es o como de transparente como los azules es estaba puesto a tope de transparencia efectivamente y yo lo he cambiado para decirle a tope de opacidad o sea de nada de transparencia por cierto porque he puesto 255 y porque ese es el máximo sí pero porque no es 512 o 1024 o yo que sé pues la razón es porque las imágenes en web son imágenes de 8 bits eso quiere decir que son imágenes que tienen 8 bits para el color rojo 8 bits para el color verde y 8 bits para el color azul y también 8 bits para el canal alfa y yo pregunto cuántas combinaciones podemos obtener con 8 bits realmente es más sencillo porque es una potencia de 2 entonces cuando quieras saber cuántas combinaciones podemos tener con equis bits en informática simplemente tienes que elevar 2 a ese número de bits entonces esto con la calculadora científica efectivamente 2 elevado a 8 son 256 porque yo digo que el número máximo de 255 porque el 0 efectivamente también cuenta como un valor y por eso realmente es 2 5 o 6 menos 1 vale por eso bueno perfecto solucionado el problema ahora lo único que nos queda por solucionar es un problema menor de que el elemento se ha creado directamente en el body cuando yo no lo quiero en el body sino que lo quiero dentro del dif imágenes pues bueno a ver un momento un momentín porque me da pena ahora eliminar todo este código así que lo voy a mutar pero un momento no realmente a ver si digo que es igual si no bueno aquí yo me he cargado un código que igual vosotros no porque yo le digo get elemento by documento yet element baile haití es igual a capa punto nunca pas pero esto no me va a funcionar porque si no en otras pero espera le añado realmente una nueva capa a imágenes y todo esto no lo tienes moteado yo sí espero a ver claro eso es por qué es esta última de fe imágenes punto apple esto va aquí abajo y le digo que en index.php copio este bloque no pego ahí dentro y capa es nunca paz no encerrado 9 cerrado porque se me ha quedado una línea debajo si tengo que cerrarle canvas así que guardo y recargo vamos a verlo ahora y crea una nueva capa pinto de un cierto color y se me pintan encima lo más importante mirando un segundo lo más importante es que comprobemos realmente que lo ha pintado dentro de la capa 2 así que digo display no temporalmente y efectivamente lo ha pintado dentro de la capa 2 vale con lo cual perfecto fenomenal ya tenemos ahí un control de capas y ya podemos elegir digamos en cada una de las capas que pintamos lo que dejamos de pintar así ahora cojo el lápiz pues empiezo a pintar o se desgrana casi en el mismo color momento quentin y empiezo a pintar en este caso lo que voy a hacer es que cuando voy a crear un color voy a poner 125 por ejemplo 122 lo que sea y con eso lo que estaría haciendo es al crear una nueva capa pinto del color que quieras y ese color que quieras me lo va a pintar con transparencia vale con lo cual evidentemente también llega un momento en el que pues mira vamos a empezar a trabajar no ya con la transparencia del píxel que también podemos trabajar la tradicional pixel sino que la transparencia de la capa es decir quiero hacer a continuación lo mismo que he hecho en el gimp que es que cuando seleccionó una capa me permite trabajar me permite modificar la transparencia lo veis pues eso va a ser muy sencillo eso va a ser mucho más sencillo de lo que parece déjame que ponga 255 porque para ello me voy a ir a index.php y dentro de capas voy a hacer un input type reims min es igual a 0 max es igual a 255 con el id transparencia capa eso qué va a hacer pues que ahí arriba tengo un range donde cuando seleccione una capa por ejemplo pinto hay una capa le podré decir cuál es como en el gimp la transparencia de la capa bien entendido lo que quiero y voy a decirle por cierto veis que cuando arranco es que no sé si me sabe muy bien en la pantalla pero arranca en el medio es decir arranca con un valor intermedio de opacidad ya le digo que no yo le digo que vale value es igual a 255 por defecto la opacidad es total no se ve porque se ha quedado fuera de la pantalla pero está ahí ahora lo meteremos dentro bien por tanto yo lo que quiero es que cuando bajo este valor baje la opacidad de la capa esto va a ser muy sencillo porque yo le voy a decir en el jim webb cuando el elemento transparencia capa punto change cuando cambie voy a ejecutar una función que hará lo siguiente seleccionó la capa nunca más y le digo perdona esto no va de 0 a 25 5 esto va de 0 a 100 y le digo punto css o pacific coma y le digo vamos a ver this punto vale su valor y punto momento parce flow no quiero convertir a un número y lo quiero partir por cien un momento dejadme comprobar que funcione correctamente atención fijaos crea una nueva capa la pintó de color verde y ahora si todo ha ido bien le bajo la transparencia vale con sol punto change es transparencia capa muy bien voy a poner lo siguiente con soul punto no ok vale con lo cual está entrando en ese bucle ah vaya almohadilla nueva capa la pinto de color verde y si le bajo la transparencia fijaos cómo puedo ahora jugar con la transparencia de cada nueva capa que creé ahora le digo esto le pintó de azul pero ahora voy mezclando esa nueva capa azul si no creéis que se salga el slider simplemente es una cuestión de que en el estilo en herramientas pues el wef 12% lo cambio al 10% es decir lo hago más estrecho ahí se empieza a salir menos con lo cual le digo pues por ejemplo 8% o algo así y allí fijaos que poco a poco lo voy metiendo dentro de la pantalla es que también le había dado demasiada anchura a ese elemento herramientas porque herramientas es este bloque de aquí a perdona sí sí le he quitado espacio este y por tanto además al capas y ahí le pongo el 8% ahora sí recargo y ahí lo empezaremos a ver se sigue saliendo pero bueno ya es una cuestión de la anchura de cada uno de los elementos por ejemplo hay imágenes no sobra mucha anchura así que le voy a poner 60 y hay imágenes lo he pasado de anchura a 60% anchura perdón del 70% al 60% que para este caso pues como veis me sobra