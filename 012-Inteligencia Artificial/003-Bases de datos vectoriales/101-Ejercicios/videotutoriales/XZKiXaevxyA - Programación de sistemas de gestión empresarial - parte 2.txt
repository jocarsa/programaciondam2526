hay infinidad de cosas que se pueden implementar dentro de un sistema Pero voy a implementar vamos a ver vale Voy a implementar aquellas que en principio parecen pues imprescindibles luego por otra parte también es un buen momento para separar entonces en admin voy a crear un folder voy a poner css o estilo o lo que sea y eh luego dentro de css voy a poner una carpeta js porque ahora luego quizás hago algo de javascript Así que vengo por aquí saco los estilos me dejo la etiqueta Style por si acaso por si lo utilizo para algo así que en css creo un archivo llamado estilo.css o sea nada demasiado innovador nada demasiado original voy a sangrar correctamente para este archivo vale Y ahora en el Index junto a la etiqueta Style de vez en cuando pues vamos quitando elementos Vale y digo eh link rel es igual a Style sheet y href es igual a css bar estilo.css Con eso tengo la hoja de estilos vinculada ahora luego haremos algo de javascript evidentemente y vamos un poco limpiando el contenido de del archivo principal bien pues vamos a ver vamos a jara.com Barra entregas barra lo que sea vamos a Barra admin entro y bueno aarte de que ya trataremos más adelante el qué poner aquí en el panel de control en el escritorio del panel de control Mejor dicho algo que en un momento dado es muy tratable pero de momento me voy a entregas y dentro de entregas lo primero que veo es que tengo pues 147 entregas o sea tengo el típico problema de paginación tengo el típico problema de que como te diría yo cuando van a ir apareciendo registros y de momento tengo 140 y pico Pero más adelante puedo miles o decenas de miles pues lo que voy a hacer en este caso lo que voy a hacer ahora es especificar digamos un sistema de paginación de la forma más sencilla posible Entonces ahora me voy a ir al archivo principal y voy a crear una serie de condiciones de inicio Entonces ahora veremos dónde las ponemos en admin voy a crear un file no perdona voy a crear un folder llamado Inc de includes y dentro de ese Inc voy a crear un archivo llamado condiciones de inicio.php Entonces le doy Finish aquí en Index voy a incluir Inc barra condicionesde inicio.php y entonces en condiciones de inicio le digo si no is set si no se ha puesto una variable de sesión llamada aquí evidentemente debería arrancar una etiqueta php vale la variable de sesión paginación o elementos por página en ese caso la variable de sesión de elementos por página es igual a por ejemplo de momento 20 de momento bien y ahora si no se ha definido la variable página en ese caso página es igual a un o página es igual a cer Ah ahora luego veremos Entonces yo ahora a continua vengo y digo que lo que quiero en este caso es decirle al sistema que cuando realizo un Select me vengo por aquí me vengo por aquí me vengo al controlador ahos a ver dónde estás controlador aquí lo que quiero es que cuando hago un Select vamos a verlo me voy a leer show full columns y le digo Select all from tabla y le digo vamos a ver los elementos por página voy a poner limit elementos por página limit est do de aquí Así que ahora vengo por aquí esto ya lo tengo abierto vale recargo Y si todo ha ido bien pues 20 elementos hasta aquí bien pero lo que voy a hacer ahora es introducir al final del todo del controlador es decir aquí voy a introducir un eco eh vamos a ver div Class paginación Fierro el div y voy a poner una serie de enlaces entonces voy a poner de momento div realmente no a hrf a y voy a ir a font awesome icons y voy a buscar eh next vamos a ver qué tenemos en next bueno pues este por ejemplo entonces copio pego y luego vuelvo a pegar y aquí voy a poner left Entonces si todo ha ido bien Ahora vengo por aquí y al final aparecerán dos flechas y a partir de ahí pues ahora las hago más pequeñas y entonces en el estilo del formulario realmente no es el estilo del formulario voy a poner estilos de las vistas o algo así y entonces voy a poner página porque esto es una Class o qué es vamos a ver es una Class entonces paginación a es un font size de 40 píxeles es un color inherit y es un text decoration con eso lo que quiero es quitarle la decoración y hacer los botones más grandes no me hecho mucho caso font size 40 píxeles voy a recargar Vale ahora sí bien Y entonces ahora lo que voy a hacer en este caso es decirle al sistema que Quiero la página siguiente yo no sé en qué página estoy Pero quiero la página siguiente ahora luego nos ocuparemos este botón Por cierto de darle una formita un poco mejor pero de momento no sirve que esté ahí Entonces como decía me voy a el controlador me vengo aquí y digo el a es igual a tabla es igual a get tabla y página es igual a siguiente por ejemplo Entonces ahora cojo este hf este es anterior realmente siempre me confundo siempre hay que poner primero lo de la izquierda y luego lo de la derecha Entonces yo ahora vengo y digo lo siguiente yo digo me voy aquí a Index por ejemplo y le puedo decir sí a ver un segundo es página sí esto no esto es luego Sí y get página en ese caso voy a hacer un switch y voy a decir Dime qué es página Y entonces en el caso de que sea anterior voy a hacer algo y en el caso de que sea siguiente voy a hacer otra cosa Entonces si es anterior Pues voy a decir session página menos si es siguiente voy a decir sesión página más O sea subo de página vale eh Aquí también tengo que decir que eh tengo que poner voy a poner esto hacia abajo me da un poco de rabia por gastar líneas Pero bueno si hay que gastar líneas pues se gasta líneas Vale entonces voy a decir si ses página eh Bueno es mayor que cer en ese caso puedes bajar Pero si es menor o igual que cer no te dejo bajar Es decir no te dejo bajar por debajo de cero evidentemente vamos a implementar ahora este parámetro entonces para implementar este parámetro yo ahora me voy aquí al controlador y le digo en el Select que estará por aquí arriba vale y le digo offset y salgo de aquí y le digo sesión elementos por página multiplicado voy a poner un paréntesis multiplicado por sesión página y esto lo que va a hacer si ha funcionado bien Es que yo vengo por aquí recargo y digo vale estoy viendo de la 21 a la 40 esto ya de entrada no me gusta porque la página por defecto voy a hacer que sea la cero vale vamos a ver de la 21 Ah sí claro ahora ya ha empezado es decir ya ha empezado la paginación y esto de aquí ya no es cierto porque página ya está puesto vale Ok venga entonces pincho este botón y me voy de la 1 a la 20 pincho este botón hasta la 40 pincho este botón y vemos como ya tengo un sistema de paginación implementado en el sistema vale vemos como pues ya a partir de ahí hasta que acaban las páginas evidentemente pues puedo digamos hacer esto otra cosa que puedo hacer Pues en un momento dado es implementar una función de Volver al principio ir al final es más difícil porque bueno tampoco es mucho más difícil evidentemente porque tengo que implementar un botón de Bueno tengo que implementar de detectar Cuántos registros hay y bueno detectar Cuántos registros hay no es algo que sea demasiado difícil pero claro todo depende de si lo hago en el controlador o dónde lo hago Pero bueno En definitiva de momento vamos a lo sencillo por el momento Y entonces vengo por aquí y digo Quiero un botón de página anterior no página primera y quiero otro botón página última me vengo por aquí me voy por aquí y en Arrow a ver qué tengo Bueno Este es de la versión Pro claro puedo Step Forward y Fast Forward Vale pues va venga digo Fast fa Step Forward esto no va aquí por cierto Esto va aquí y Esto va Aquí Vale entonces Fast Forward me vengo por aquí vale Y ahora Step backward a ver si funciona parece que sí y fast backward Así que hago así y vale Ya tengo por ahí y entonces le digo al sistema que dentro del switch no me gustan mucho los botones la verdad no me gusta mucho la forma que tienen Ay pero bueno no sé puedo este yo creo que a ver Arrow Circle right este Lo pongo aquí y este ahora es Chevron entonces este es left y este es left Vale entonces vengo por aquí vale Esto me gusta un poquito más y ahora lo que voy a hacer es que si la paginación es igual a primera en el Case primera pues sesión página es igual a cero Entonces yo ahora me vengo por aquí me voy aquí al siguiente me voy aquí al siguiente me voy aquí al siguiente Pero si le doy a este botón me va a la primera página así que bueno pues tengo ya un sistema de paginación Pues todavía más completo es decir todavía más eh elaborado vale bien Vamos allá Vamos a continuar con más cosas que en un momento dado Pues nos pueden resultar interesantes voy a poner algo de javascript porque no he utilizado nada de javascript todavía y realmente quiero utilizarlo así que para ciertas cosas tales como por ejemplo pues poder modificar cosas aquí en línea aparte de poder editar vale Sí pero quiero poder editar cosas aquí en línea pues quiero utilizar algo de javascript porque con php pues es difícil por no decir imposible entonces voy a descargar en primer lugar jquery.com jquery cdn no realmente me lo voy a bajar me lo voy a bajar porque bueno para un software de cierta importancia pues no me conviene vincularlo así que me bajo este me lo guardo Vale y de momento en escritorio aquí en administración voy a crear una librería o sea una carpeta llamada librería vamos a verla y ahora pues dentro de esa carpeta de librería voy a soltar jquery bien Y entonces ahora por aquí voy a decir que Script src entramos dentro de la carpeta Live y cogemos el archivo jquery versión lo que sea y ahora por tanto puedo empezar a programar Podría empezar a programar aquí dentro pero bueno para eso puedo hacer un archivo dentro de la carpeta js llamado código js entonces dentro de la carpeta js creo un archivo llamado código js y lo que voy a hacer ahora es empezar a programar aquí dentro utilizo jquery con lo cual digo cuando el documento esté preparado voy a hacer una serie de cosas en este caso las cosas que voy a hacer van a estar dentro de esta función ready que solo se va a ejecutar cuando poner un console punto log y la página está lista de momento la página no tarda mucho en cargar pero entonces vengo por aquí saco la consola recargo y me dice la página de esta lista o sea primera señal de que lo que estamos haciendo digamos el código que estamos escribiendo se parece una tontería pero no lo es en absoluto Así que la página está lista y ahora lo que quiero hacer es decirle al sistema que cuando yo haga doble clic sobre un elemento de tabla pues quiero que ese elemento se vuelva editable Vale entonces vamos a ver realmente lo podía hacer cuando hago Focus Pero bueno vamos a ver entonces cuando sobre un TD a haga realmente Double click jquery Double click no quio un solo Click dbl Click Esa es la d click entonces voy a ejecutar una función que de momento dirá click voy a ser muy verboso simplemente para ir confirmando que lo que escribo se ejecuta doble clic bien y Aquí vemos que no se ejecuta vamos a ver dónde está esto es un TD hago doble clic Debería estar ejecutándose pero no se está ejecutando por qué Pues no lo sé vamos a ver dble Click dbl Click lo he escrito correctamente voy a poner click porque no me cuadra que no funcione aquí Ah muy bien vale no está funcionando tampoco el click lo cual pues me extraña más todavía vamos a ver cuando sobre TD haga click quiero con sol log click Vale cuando sobre TD haga click pues no tiene mucho misterio esto debería estar funcionando esto es un TD Entonces cuando sobre TD haga clic voy a hacer una cosa Esto este código lo voy a meter al final del todo pero no debería hacer esto no Debería ser necesario hacer esto recargo hago click Vale y vemos que hay algún tipo de problema por no sé por qué realmente vamos a ver cuando sobre TD haga click ejecuto una función que dice console log click Fíjate que he hecho esto millones de veces millones no pero igual miles sí y no sé por qué está fallando esto cuando sobre el elemento TD haga clic ejecute una función que dice console log click no tiene más misterio voy a hacer una cosa vamos a ver vamos a los básicos cuando sobre Body haga clic vale clic bien y ni siquiera me está haciendo caso en el body perdón cuando sobre Body ahora vale Y de alguna forma cuando sobre documento haga click recargo Ah vale me faltaba recargar con forzada Okay venga deshago t de click venga ok Ya está funcionando me faltaba recargar con fuerza entonces lo que voy a hacer es que dis o sea este elemento sobre el cual he eh he hecho clic pues j query ad attribute eh editable o algo así content editable vale aquí Esto es lo que estoy buscando copio pego vale vamos a probarlo entonces hago click Ah no perdón y esto quería que fuera con dbl click Ok hago doble clic no recargo con fuerza vale hago doble clic Ahora sí Y a ver un momento bueno Ah tenido que hacer clic dos veces vale Y entonces digo cuando sobre este elemento bueno Ahora puedo cambiar Vale tengo que hacer doble clic para que se pueda cambiar vale Y ahora lo que voy a hacer es decir cuando sobre este elemento haga blur Cuando salga del elemento quiero function console.log salgo vamos a verlo recargo con fuerza doble clic hago así hago blur salgo vale Y ahora entonces lo que voy a hacer es decir this attribute content editable es igual a false O sea ya he acabo de editar pues quita el atributo editable entonces hago así salgo y entonces vale parece que sigue siendo editable vamos a verlo content editable pl Bueno vamos a ver content editable blur o exit det exit no vamos a es que es blur técnicamente es blur Es dis punto atributo blur vale así que bueno a ver bar selector digo selector es igual a dis Y entonces digo selector punto atributo esto recargo con fuerza cambio salgo y content editable false ahora sí Parece que es lo mismo pero no lo es bien pues ya tengo esto por aquí y ahora lo que quiero es decirle al sistema que quiero que se produzca ese cambio Es decir quiero que eh Cuando yo modifique algo pues realmente ese algo se modifique eso es un poco de Ajax Pero antes de Modificar el Ajax yo lo que necesito es decirle al elemento A qué tabla pertenece Cómo se llama la columna y qué identificador es entonces para eso primero vamos a cambiar el controlador y con eso tendremos la información suficiente para hacer una petición Ajax Así que a continuación me voy al controlador y en ver vamos a ver vale okay for each t de class vale pues vengo por aquí y digo vamos a ver y digo Class columna es igual a esto y tabla es igual a ver un momento que me concentre Class aquí falta una comilla vale aquí falta una comilla tabla igual a tabla porque en principio aparece en el controlador e identificador es igual a comillas y identificador es bueno que como no s lo que viene después es bueno que nos dejemos un espacio aquí al final porque si no podemos tener sorpresas desagradables al enganchar con lo siguiente por eso este espacio que he puesto aquí no es casual es totalmente intencional Así que ahora vengo por aquí cargo y digo Bueno pues mira esto es columna o sea esto es clase asignatura columna asignatura tabla entregas identificador cero no eso no es cierto Ah no identificador no aparece vale vamos a verlo identificador no aparece pues Vale entonces vale While Ok y digo identificador es igual a nada Y entonces digo si fila a ver si nombre columna realmente no está mal es igual a identificador en ese caso identificador es igual a valor es decir si la columna es identificador Pon el parámetro identificador entonces recargo y tengo identificador es igual a 4 vale me voy aquí botón derecho inspeccionar y identificadores igual a 5 Entonces ya tengo información necesaria para ahora venir por aquí y como diría yo decirle al sistema que Eh pues quiero hacer una petición Ajax pero a esa petición Ajax le voy a pasar la información correcta vale le voy a pasar la información de qué tabla quiero modificar Qué elemento quiero modificar Y qué identificador quiero modificar vamos a por ello y vamos a hacerlo para ello lo más sencillo voy a utilizar una solución un poquito barreta pero bueno no pasa nada voy a hacer un div ID Ajax y está escondido al final del archivo Y entonces ahora en el código lo que voy a hacer es lo siguiente Cuando esto salga voy a hacer lo siguiente valor bar valor a env es igual a selector Tex vale bar vamos a ver bar tabla es igual a selector atributo tabla bar identificador es igual a identificador y bar columna es columna y entonces voy a hacer un console pun log que va a ser un poco verboso pero así nos aseguramos Porque todo lo que es tocar la base de datos es peligroso y digo eh voy a poner el valor más valor a enviar en la tabla más tabla coma en la columna más columna y en el identificador más identificador y así antes de hacer ninguna petición vamos a asegurarnos si lo que estamos haciendo es correcto recargo Vaciando la cach y vengo por aquí y digo Pues mira aquí voy a poner un una a por ejemplo hago así salgo me voy a la consola y dice voy a poner el valor a o entradas correcto en la tabla de entregas correcto en la columna asignatura correcto y en el identificador 5 Vale ahora mi confianza en el código que acabo de desarrollar Pues digamos aumenta porque ya sé que me puedo conectar a la base de datos Y sé que le puedo pedir algo y sé que lo que le estoy pasando el parámetro que le estoy pasando Es correcto Entonces ahora Yo vengo por aquí y digo Vale pues Ahora en ese elemento Ajax escondido que he puesto lo que quiero hacer es usar una función load las más sencillas de Ajax y quiero cargar de Inc eh Ajax modifica no existe ahora lo crearé php y eh valor es igual a algo and tabla es igual a algo and columna es igual a algo and identificador es igual a algo entonces vengo por aquí y digo valor a enviar y tabla es igual a tabla y columna es igual a columna y identificador es igual a identificador Y entonces si ya estoy haciendo ese load va a dar error porque no existe asignatura pongo una a hago así me dice que ese archivo no existe ese get no existe vale AX modifica pero ahora va a existir así que me vengo aquí me voy a file le digo Ajax modifica php y en Ajax modifica voy a recoger esos valores primero pues include dos punos barra config.php y ahora lo que voy a hacer es decirle vamos al controlador voy a copiar alguna consulta esto por aquí y ya yo creo que ya vale y le digo okay Y le digo update get tabla set columna es igual a valor creo que era valor controlador no código era columna vale Ah No valor Perdón valor OK Y entonces Where identificador es igual a identificador principio ya está tendríamos que dar algún tipo de notificación al usuario de que el cambio se ha hecho pero este archivo realmente es sencillo Así que guardo recargo vale Y ahora sí voy a poner aquí una a salgo vale todo parece Ok recargo bien no se ha puesto la a Ok vale vamos a ver qué ocurre pues vamos a verlo Yo creo que es correcto pero voy a decir ec consulta y algo estaría haciendo mal Así que recargo aquí le pongo una a salgo me voy a ese pequeño elemento Ajax aquí y esura we identificador es igual a 4 principio parece correcto pero vamos a verlo a ver un momento V sqli config eh No no no es tengo que bajar dos carpetas ahí parece que está el problema recargo vale asignatura voy a poner una a recargo vale todavía no muy bien Vamos a verlo voy a ir entrando a la base de datos Y así pues vamos viendo qué es lo que ocurre así asignatura pongo un dos o una a Ah no Claro asignatura a ver recargo claro y es un dos Es que le estaba metiendo una a un campo que es numérico esa es otra cosa que tenemos que comprobar que el campo realmente corresponda con lo que debe corresponder Pero vale por lo menos no estaba cometiendo un error como tal sino que lo que estaba ocurriendo es que eh Como te diría yo no estaba o sea el valor que estaba Endo en ese campo no era legal porque le había dicho que le iba a meter un campo numérico Así que vemos por tanto que ya tengo por aquí pues la idea de que puedo modificar no voy a modificar muchas cosas evidentemente pero puedo modificar cosas en el sentido de que eh cómo te diría yo Por cierto este Drop lo quiero quitar porque es una prueba que hice yo ya está Vale en el sentido de que eh puedo actualizar cosas siempre que evidentemente la información que esté metiendo pues sea correcta es decir sea legal Bueno pues una cosa que Quiero grabar ahora es un buscador Entonces vamos a por ello los buscadores siempre son complejos en el sentido en el que bueno una vez más tiene que ser un buscador que sea eh Pues digamos que se adapte a cada una de las tablas Vale entonces vamos a entregas vamos a ver y si vamos a entregas vamos por aquí Vale pues si vamos a entregas vamos a ver que vamos a ver qu Pues bueno por ejemplo por aquí vamos a hacer esto un poco más grande pues me voy al controlador y vamos a meter en la parte de arriba un controlador otra cosa que digo es que en el nombre del técnicamente ya no hace falta meter el nombre del campo puro porque no tengo por qué es decir puedo meter el campo de título que para eso está y va a quedar mucho mejor vamos a verlo vamos a ver un segund que estoy entrando Vale entonces vengo por aquí me voy a entregas me voy a controlador y en el controlador vamos a verlo en el controlador donde pongo th pues donde pongo fila Field técnicamente no hace falta que ponga fila Field sino que puedo poner vamos a verlo vamos a ver dónde estás show full columns Ah vale aquí no tengo esto pues vamos al formulario vamos a ver aquí y vengo por aquí y por ejemplo en leer aquí donde pone fila F pues puedo poner título porque luego en el nombre del campo ya voy a poner lo que realmente toca entonces hago así y pongo nombre de usuario contraseña del usuario nombre propio del usuario apellidos correo electrónico nivel de usuario dentro de la plataforma vemos como digamos Aunque el nombre de la columna luego sea el correcto porque eso es lo que importa vamos a verlo vale es contrasena pero aquí en el título pues ponemos contraseña Pues que es mejor digamos punto de vista de la usabilidad Pues ahora lo que voy a hacer es que por aquí en el th vamos a poner podría poner otro th técnicamente podría poner por ejemplo por aquí otro th y TR vamos a verlo vale vamos a ver vamos a volver a hacerlo consulta resultado el W ya finalizado pero hacemos así ahí lo tenemos doble Bueno pues ahora en lugar de hacer un eco th esto vamos a ver esto nada esto ya lo tengo esto ya lo tengo pues lo que voy a hacer ahora es poner algo así como vamos a poner de momento input type text y vamos a verlo y ahora lo que ocurre es que aparece Pues ahí lo tenemos vale aparece u cuidado esto no aparece un contador digamos una búsqueda un campo de búsqueda al lado de cada uno de los elementos y luego ahy donde pone operaciones pues ahí voy a poner buscar o mira voy a poner un input type submit Por qué pues porque probablemente todo esto va a ser parte de un form es decir va a ser un formulario de búsqueda Entonces si esto es el TR pues esto es form action es igual a búsqueda Y yo que sé Vale y buscar o algo así vamos a ver Bueno voy a decir tabla es igual no quieto action es igual a tabla es igual a tabla vamos a verlo Busco me ha desaparecido identificador creo que ya sé por qué porque no tiene ahí la descripción No pasa nada lo voy a enviar vale Y ahí lo tengo tabla vamos a recargar Busco busco envío Bien no va ninguna parte interesante A ver input type text action es igual a tabla vale method es igual a post vamos a tirar para atrás vamos a usuarios envío vale tablas igual a usuarios Ahora sí y lo que voy a hacer es decirle al sistema que bueno voy a poner un input de tipo hidden type hidden y bueno ahora veremos vamos a ver es que realmente el hidden me puede fastidiar vale Así que no lo voy a poner lo que sí que quiero es vamos a ver lo que sí que quiero es Buscar es decir atrapar el resultado de esto Entonces cómo lo puedo hacer Bueno pues le puedo decir si hay algún post vamos a ver sí is set post realmente en ese caso eco se ha enviado un formulario Así que esto por aquí me da un error no veo en queé Ah sí este punto y coma no va aquí dentro va aquí fuera OK Así que recargo se ha enviado un formulario vale Voy a tabla Y si pincho tabla parece que se ha enviado un formulario de alguna forma bien Bueno vamos a ver qué formulario se ha enviado vamos a ver antes entonces voy a decir for each post as clave valor y digo eco clave gu con un punto gu valor y ahora encadenó con un br vamos a verlo recargo vale eh cannot use línea 157 es esto no Ah perdón esto no va con esto no va con los corchetes vale se ha enviado un formulario no veo que se haya enviado nada realmente Así que voy a poner aquí cosas vale for each post voy al controlador voy a buscar un for each Okay Ah correcto vale no no sí que es así campo valor clave valor pues vamos a ver method post si hago así y envío se ha enviado un formulario eco los campos del formulario son dos puntos punto y coma recargamos y los campos del formulario son estos de aquí teóricamente Si yo envío If post for each post voy a hacer una cosa bardom post y vamos a ver que se ha enviado cero vale de momento ahí lo que está ocurriendo es que se está enviando el post vacío Así que vamos a ver a continuación Cómo todos los elementos de post es más ya que estamos Casi me gustaría decir quiero sacar todo lo que venga por request para ver cuál es el problema Exactamente eso ya es otra cosa Vale bueno usuario no settings no esto es de wordpress library no O sea que En definitiva de alguna forma no se está trayendo lo que estoy enviando por post lo cual ya de entrada me extraña yo le estoy diciendo que esto forma parte de un action en buscar es igual a así y le digo si set variable get Buscar vale vamos a buscar Ok Vale ahora ya no quiero request Ahora quiero post los campos En definitiva no Están volviendo y a raí cer porque es una raero vamos a verlo en el código sí recargar vale Yo tengo por aquí un submit vale tengo un form que tiene un action que tiene un post principio todo es correcto input type Tex vale Ahí está el problema estoy poniendo names no estoy poniendo nombres Entonces dónde estás aquí name los elementos tienen que tener nombre entonces name es fila Field Vale ahora sí así que recargo vale Y ahora relleno vale Y esto ya es otra cosa Entonces usuario tal contraseña tal nombre tal Vale pues Ahora lo que voy a hacer es decirle al sistema que si a ver un momentín si he realizado una búsqueda pues no quiero recuperar los elementos digamos tal cual de la tabla sino que lo que quiero es la búsqueda en este caso por tanto en este caso por tanto si estoy en leer lo que quiero decir es que quiero un we en el Select entonces consulta es esta vamos a pasarla a varias líneas selecto from tabla limit tal offset tal Y esto ya está Vale entonces yo ahora hago así ahora consulta punto igual comillas y esto lo pongo aquí esto es un punto y coma y digo consulta punto igual comillas voy a poner espacios para que haya espacios entre las cosas vale Esta es la consulta hasta funciona igual esta ahí funciona Exactamente igual pero ahora lo que voy a hacer es decir que antes de poner los limits voy a decir si y set el campo get Busca creo que es Busca no me acuerdo veámoslo le voy a enviar Buscar esto no pasa nada porque ahora veremos esto Buscar porque aquí Esto me lo he dejado mal vamos a ver eso perfecto bien pues ahora lo que hago es decir consulta punto igual Where Y entonces voy a poner una serie de cosas y entonces le pongo un for each este for ahora quito lo de arriba este for each y digo consulta cuidado que aquí va van dos c consulta punto igual and true De hecho voy a decirle true coma y digo clave igual a valor y entonces si esto va bien De hecho no estaría mal que ponga ec consulta y así podemos ver lo que está ocurriendo es más igual no like voy a hacer una búsqueda muy permisiva en sql vamos a verlo vale esto bien vamos a reiniciar usuarios digo usuario jarsa vale le doy a enviar y me dice vamos a ver identificador like usuario Hay un problema ahí hay un problema ahí hay un problema ahí y no es eco es consulta punto igual ahí ahora sí vamos a verlo Vale dice que no pasa nada vamos a ver la consulta que nos da Select usuarios we identificador like lo que sea usuario like Ah coma me hacer falta una coma Ah no me hace falta un and Eso es lo que me hace falta recargamos vale Y entonces ahora sí ya tenemos la búsqueda en funcionamiento es decir Quiero buscar un usuario que se llame Vicente Pues ahí lo tenemos Quiero buscar un usuario que se llame a pues no era el nombre de usuario a ahí lo tenemos Quiero buscar vamos a ver vamos a usuarios Quiero buscar un suo que se llame ccc Pues ahí lo tenemos vale tenemos ya un buscador programado que se adapta a cualquier tabla quiero decir que me voy a entregas y digo vale Quiero ver las entregas de la práctica de las prácticas dos Pues tengo aquí ya unas entregas de las prácticas dos Quiero ver las entregas de las prácticas uno pues ahí tengo todas las entregas de las prácticas uno entonces vemos que ya tengo digamos Pues un buscador en funcionamiento mínimo evidentemente pero ya tengo un buscador en funcionamiento en el formulario y ahora evidentemente pues voy a empezar a formatear un poquito más pero por lo menos ahora voy a limpiar un poquito eso también eh quito el ecoc consulta quito el Bom que tenía por aquí de hecho esto lo puedo quitar ya porque ya hemos visto el funcionamiento y un poco lo que nos va a dar es el resultado pero más limpio bien y tengo ya al buscador como digo pues vamos A ver input type submit type test Class campo buscador y entonces me voy al estilo y en los campos en estilo de los campos pues campo buscador le digo que tiene un Wi del 100% le digo que tiene un Border de cer píxeles un background de rgb 23023 230 y no sé un padding de 5 píxeles vamos a verlo vale Hay algún tipo de problema ahora sí vale Ahí lo tenemos el padding no me lo he cogid padding el padding no me lo había cogido pero vale una cosa así donde podemos Buscar introduce tu email eso está mal pero eso es porque debo Haber puesto mal en la descripción del identificador vale eso no hay mucho problema aquí de hecho ni siquiera me aparece nada pero eso es ya entrar en la base de datos y Vale y poner la información entonces pues eso puedo poner aquí cuidado puedo poner aquí jarsa y buscar y me aparece el usuario correcto algo que me gustaría hacer sería poner Pues un pequeño iconito de búsqueda para que la gente entienda que esto es un Buscador de hecho en buscar o sea en enviar Pues en lugar de poner enviar voy a poner busca algo así vamos a verlo donde pone submit Pues en value voy a poner busca y ahora ahí donde pone búsqueda y ahora me gustaría poner pues un iconito de búsqueda una lupa digamos dentro de los campos vamos a ver cómo lo puedo hacer Vamos a ver si lo puedo hacer fácilmente entonces para buscar los campos vamos a ver voy a poner eh font awesome eh Search icon in input a ver si tengo a ver si alguien se le ha ocurrido cómo hacerlo y font awesome icon Así que icons y font icon inside input lo que sea vale vamos a ver eso vale Y vamos a ver margin top margin right a ver FL pero jaría que esto es un truco a ver Ah font family font to son No Ay claro no porque en fin a ver ahí este truquet no me ha disgustado voy a poner Search Busco el icono de Search lo copio lo pongo en cada uno de los campos con lo cual va a salir eso vale Y entonces ahora le digo lo siguiente esto es Class y Busca Y entonces ahora en estilo y conono busca le digo Pos absolute y le digo right pues 20 píxeles No lo sé parece demasiado a verlo Hola no me ha hecho caso refresco todo vale pores sitio en absoluto icono Busca no sé si me ha cogido ese icono Busca no me lo ha cogido igual no he guardado Ah Sí perdón este segundo Class va aquí dentro no puedo declarar dos veces la etiqueta Class Okay a ver ahora vale se han metido todos ahí y eso quiere decir y eso quiere decir que en el estilo técnicamente los th tienen que tener un Pos relative para que los posi absoluta y funcionen Ahora sí vale Y entonces ahora pues me he pasado un poco entonces voy a poner right el top voy a poner dos píxeles esto ya es un tema de centrarlo estéticamente Top 5co píxeles right seis píxeles vale una cosa así por ejemplo Y entonces ya pues yo ahí sé que pues puedo pinchar y puedo buscar según los campos que haga falta pero digamos que el usuario ya interpreta que estos Campos son evidentemente para buscar entonces me vuelvo a usuarios y En definitiva como vemos pues ya tengo un buscador completamente finalizado siempre se puede mejorar más por supuesto que sí vale pero en definitiva ya tengo un buscador y a falta de todavía mejorar más y a falta de todavía pues apañar más la Eh bueno la descripción del campo vamos a continuación a hablar de las peticiones cruzadas entre varias tablas algo que hasta ahora no tenemos en esta aplicación pero que sin duda pues evidentemente se nos va a dar en un momento dado entonces voy a crear una nueva tabla tengo por aquí en entregas tengo el las columnas tengo la asignatura Vale entonces voy a crear una tabla llamada asignaturas que tiene un campo identificador entero de no sé 100 mucho demasiado pero bueno índice primario y autoincremental ahora hablaremos de los comentarios Bueno ya que estamos con los comentarios de hecho podría pues entregas por ejemplo ya que estoy pues bueno casi que lo hago ahora entonces eh título email vamos a abrir un brackets y así pues ponemos ya la información correcta vale título vamos a verlo por aquí vamos a rellenar primero esto identificador entonces ID moodel ya que tiene un ID externo Vale ahora haremos de yo tiene tiene qué el título el nombre de la asignatura nombre y una cosa que se llama el short name que es un código asociado entonces ID Mel ID moodel es un número nombre es un bar charar short name es un bar charar El idel Bueno voy a poner 20 el nombre puede tener 200 el shortname Pues bueno voy a poner 100 y yo creo que ya entonces vale ahora en los comentarios Pues voy a poner identificador ficador esto nada esto nada bueno ya hablaremos de esto tipo number vale Y ahora identificador tulo ID de moodel descripción voy a poner descripción ya lo tocaré luego para hacerlo rápido esto es un number también voy a poner esto es nombre de la asignatura esto es un text y short name código short name de la plataforma y es un text Entonces esto lo pongo aquí esto lo pongo aquí esto lo pongo aquí y esto lo pongo aquí de tal forma que ahora le doy a guardar Vale tengo ahí la mantenimiento de asignaturas De hecho vengo por aquí y recargo y ahora aparece aquí asignaturas y incho y aparece esto de aquí o sea que fenomenal en el sentido de que si yo hago una nueva tabla pues automáticamente tengo ya que puedo meter una nueva asignatura es decir esto es un poco el objetivo del superc controlador Y es que una vez que lo programo ahora lo tengo ya para todo lo que quiera ahora có diríamos entre comillas todo cuesta abajo vale pero yo ahora lo que quiero es meter información aquí dentro de asignaturas así que bueno tengo cuatro Campos lo hemos visto he descargado un archivo csv con las asignaturas Así que lo abro con libre Office vamos a verlo vamos a abrirlo con libre Office Okay bien Y entonces Ok Y entonces digo el ID before esto es identificador vale esto es ID moodel categoría no la quiero short order no lo quiero full name esto es nombre y short name es tal cual shortname y todo lo demás no lo quiero así que delete vale me quedo solo con lo que toca el identificador lo voy a dejar en blanco porque que ya lo rellenar al sistema Así que si todo ha ido bien le doy a guardar si todo ha ido bien le doy a importar importante que si aquí tengo cuatro Campos Aquí tengo que tener cuatro Campos vale Eso es importantísimo porque si no va a fallar a ver que suba vale Aquí tengo que tener cuatro Campos y además es importante tener las cabeceras de los campos Así que voy a importar porque en la importación muchas veces es donde Tenemos muchos quebraderos de cabeza importo el moodle course Y si todo va bien pues se importa todo de un golpe Pero insisto si se importa todo de un golpe es porque he hecho importaciones muchísimas a lo largo del tiempo y al final es ot te acaballo y Rey quiero decir que si hago cuatro columnas Pues el archivo tiene que tener cuatro columnas si este es un campo autonumérico y es una clave pues lo tengo que dejar vacío es decir hay una serie de cosas que Pues digamos Ya conozco por tanto si en un momento dado en tu caso te cuesta mucho hacer importaciones Pues que sepas que simplemente tienes que tener cuidado Entonces nos vamos a por aquí asignaturas vemos que ya tenemos por aquí las asignaturas voy a buscar una asignatura de programación y veo que tengo aquí pues ahí tenemos digamos la asignatura Y tenemos por ejemplo que yo me vengo ahora a entregas me voy a la última página vamos a verla me voy a la última página y veo que alguien ha realizado entregas en la asignatura Mira alguien acaba de realizar en la 225 Pero qué es 225 Pues claro yo me vengo aquí a asignaturas me voy a buscar el identificador de m del 225 no nada 225 Okay Vale Qué raro eh Bueno vamos a ver Bueno pues el 1 2 27 Esto me ha extrañado un poquito la verdad 12 2 27 Vale y de moodel Pro Ah Espérate un momento asignaturas programa Uy vale programación vale esto hasta hace un momento estaba funcionando vamos a ver voy a cerrar por aquí cosas asignaturas ok Ah claro Espérate que estoy viendo estoy aplicando un offset Entonces si busco me voy al controlador me voy al controlador de búsqueda Esto vale entonces Okay entonces digo If is set Buscar si no is set Buscar es decir si estoy haciendo una búsqueda anúlemelo quiere decir que me voy a entregas Alguien ha entregado en 225 con lo cual digo vale Qué es 225 2 5 es marketing digital por ejemplo Vale pues yo En definitiva ahora lo que quiero es realizar una búsqueda Cruzada vale lo que quiero es decirle al sistema Mira realmente en entregas el código de asignatura corresponde a otra tabla vale lo que quiero es que me hagas un cruce con otra tabla Bueno hay un Bueno hay una cuestión y es que en formaciones anteriores hemos visto pues que había un truco una forma de trabajar es eh cambiar el nombre del campo y poner algo así como fk y todo esto vale esa metodología evidentemente es perfectamente válida Por qué Pues porque funciona y si funciona es válida pero ya que en este caso estamos utilizando comentarios de campo pues vamos a utilizar los comentarios de campo que Probablemente van a hacer que el proceso sea bastante más limpio en el sentido de que pues podemos mantener digamos eh pues correctamente el campo Así que En definitiva qué es lo que voy a hacer vamos a hacerlo bueno pues lo que voy a hacer vale lo que voy a hacer es que me voy a ir aquí a entregas a asignatura y voy a editar voy a copiar esto y voy a poner una nueva propiedad vamos a ver me voy aquí a brackets voy a hacer un nuevo archivo y digo meto una nueva propiedad y por ejemplo voy a meter la propiedad fk vale foreign key y voy a poner fk tabla es dos puntos y asignaturas coma Y entonces digo ahora a ver un momento claro espérate porque ese campo representa vale fk petición vale o fk clave por ejemplo es de asignaturas es y de moodle Ok esto es dos puntos y entonces ahora vengo aquí y digo fk campo fk Mostrar por ejemplo vale importante porque la decisión que tomemos va a tener que aplicarse en toda la aplicación o sea parece que estoy tomando la decisión un poco a bote pronto pero es porque realmente ya he hecho esto unas cuantas veces y parece que lo estoy decidiendo al vuelo pero realmente ya he pensado en ello demasiadas horas anteriormente Y cuando digo demasiadas son demasiadas entonces fk Mostrar va a ser eh nombre entonces nombre va a ser nombre bien entonces copio esto lo pego en comentarios nada ha cambiado de momento voy a entregas y ahora lo que voy a hacer es Modificar el controlador y decirle Oye controlador si te encuentras un campo fk pues en ese caso no me pongas directamente el elemento si no ponme otra cosa Vale entonces vamos a ver identificador Ok vale Y entonces digo si is set si existe ahora dónde está momento que lo encuentro si existe porque lo tenía por aquí no fila Fil fila coms lo tengo por ahí por alguna parte Pero no lo veo así que ahora lo voy a encontrar aquí vale Y entonces digo ya no sé dónde estoy aquí fila fk tabla creo recordar que es fk tabla vale en ese caso pasa algo en caso contrario pasa esto de aquí en caso contrario pasa esto de aquí esto es esto vamos a recargar vamos a comprobarlo Okay de momento nada código de asignatura estos entregas código de asignatura y vamos a ver y fset J son Deco de tabla eco Hola y esto lo que debería hacer Es que aquí en código de asignatura debería desaparecer fk tabla vale yj son de code es igual o no es igual a nada bueno código de asignatura no está desapareciendo y yo creo que debería desaparecer Así que vamos a asegurarnos asignatura fk tabla fk clave fk tabla es asignaturas principio yo creo que debería desaparecer ya esc tabla fila a ver fila Ahí í tengo el problema Ah fila Okay sí pero no porque ya veo vale no se están guardando esos Campos el show full columns está aquí pero esto ya es un Select all from tabla y esto ya no tiene los comentarios vale muy bien entonces yo ahí lo que necesito es decirle al sistema que quiero guardar de alguna forma los comentarios entonces voy a poner vamos a ver columna vale contador columna es igual a oer contador columna más para aumentar el valor y ahora entonces digo comentarios de contador columna es igual aila coms vale Y entonces ahora Vengo por aquí contador columnas igual a c Ok y digo si jas son de code de comentarios contador columna es fk tabla vale No es cero vamos a verlo Vale entonces ahora desaparece eso de ahí número de la práctica operaciónes vale ha desaparecido estd entonces y debería haber puesto un hola en alguna parte pondrá Hola bien entonces ahora pongo eco TD pongo Hola cuidado pongo Hola vale Ahí aparece Hola y ahí lo que quiero hacer En definitiva es una petición Cruzada que me lleve a la otra tabla que me lleve En definitiva a la tabla de asignaturas y que me permita cruzar tablas en esta o en cualquiera porque la gracia es que recordemos que lo estoy haciendo en una tabla pero lo estoy haciendo de forma abstracta para que se pueda hacer en cualquier tabla de cualquier aplicación vamos a por ello Así que entonces a continuación aparte de que ahora pondré esto me interesa mucho aunque esto es un fk Pero bueno ahora veremos bien entonces ahora le digo qué le digo pues le digo consulta dos es igual a Select all from vamos a ver comentarios fk tabla Where aquí esto Ah Es J son de code vale venga fk tabla vale we fk columna es igual a qué pues es igual cuidado con este espacio pues es igual a este valor es igual al valor es igual al valor vale Vamos allá este we es porque aquí le falta un punto vale esto debe ser que me he dejado un punto y coma Ok entonces ahora resultado dos quiere decir que en la conexión le lanzo la consulta 2s y ahora entonces esto le digo Select all from no le digo J son decode Select qu esto es fk Mostrar FC Mostrar as campo y entonces ahora en el While le digo que fila 2s es resultado dos y entonces aquí hago el eco y el eco es elco es fila 2 campo Por qué campo que para eso le he puesto as campo porque si no vete a saber qué nombre tiene pues vamos a ver si ha funcionado vamos a ver si ha funcionado así a la primera y a las bravas entonces recargo bien Vamos a ver no ha funcionado superc controlador leer hay un error en la línea 186 vamos a ver la línea 186 filado resultado qué me dice eh fecha o con bull Eso quiere decir que no está dando nada entonces Yo vengo por aquí y digo Bueno pues sácamela consultador eco vamos a ver qué error he cometido en la consulta 2 Okay recargo y Select nombre as campo vale from asignaturas Where ahí está el problema Where fk columna Pues sí que debería fk columna Cómo se llama el fk columna fk clave vale es fk clave no es columna sino clave no me cuadra Pero bueno no me lo recordaba así pero Vale entonces Yo vengo por aquí y Bueno pues código de asignatura diseño vale nombre todo lo que pone nombre es que está no está correctamente marcado vale Pero si nos fijamos ahí pues empiezan a salir como vemos pues eh los nombres de las asignaturas de las cuales pues la gente está empezando a enviar vale entonces pues bueno vemos esto por aquí de hecho yo incluso pondría pues vamos a ver yo incluso pondría valor punto ceno y entonces esto un poco para que esté el valor de el valor real que contiene esa columna y luego el valor del join vale el valor enlazado yo que sé o sea eso ya cada uno evidentemente pues como quiera incluso puedo poner por aquí pues puedo poner un B de negrita puedo poner un B de negrita para que ese campo pues aparezca en negrita un poco para que siempre que eh siempre Que aparezca Vale pues o sea siempre que esté ese campo pues aparezca por ahí ahora ya puedo quitar las peticiones ya tengo claro las peticiones pero sobre todo ahora Lo importante es que puedo hacer eso vale puedo cambiar eso Entonces vale tengo esto por aquí ya tengo peticiones cruzadas y ahora claro Hay que tener cuidado porque si hago así puedo cambiar digamos el número pero cuidado porque si hago así este campo realmente tampoco va a pasar nada porque no se puede cambiar Es decir vamos a verlo vale aquí dice no sé qué es eso No sé cómo tokenizar voy a poner el valor 639 en la tabla undefine la columna undefine sea undefine es porque ese campo no tiene todo aquello que yo le he indicado vale no tiene todo lo que tenía el campo anterior pero aún así en un momento dado pues me puede interesar eh poder cambiar digamos ese campo sin mayor problema pues vamos a ver cómo lo podemos hacer Bueno pues ahora vamos a hacer lo siguiente Y es que cuando haga clic en un campo de texto pues quiero editar el campo de texto pero cuando haga clic en un campo externo lo que quiero es que aparezca un desplegable Por cierto que voy a quitar las consultas que ya está claro que salen en la pantalla eh okay Vale qué ha pasado Okay venga no sé dónde estaba ese error pero bueno Y entonces ahora aquí en TD vamos a ver en es TD lo que voy a hacer es lo siguiente lo que voy a hacer es decirle e clave o externo es igual pues así es igual así vale Eso quiere decir que todos estos Campos Son externos Ok eh voy a decirle en este caso que estos Campos el resto de campos extern es igual a no y por tanto ahora en el javascript cuando haga clic voy a decirle que solo quiero que sea doble clic si es un campo externo O sea si es un campo o sea doble clic Digamos si es un campo que no sea externo Vale entonces digo si dis att externo lech externo es igual a no en ese campo en ese caso voy a meter este código y ese código lo que va a hacer a ver si lo he puesto correctamente que creo que no ahora sí Y ese código lo que va a hacer es esto qué quiere decir pues que ahora recargo y yo por ejemplo cambio número de práctica y yo veo que lo puedo cambiar pero yo ahora vengo aquí y yo esto no lo puedo cambi no lo puedo cambiar porque no es un campo que quiera hacer editable este campo es otra cosa Este campo es un campo que quiero que sea un desplegable porque es un campo que proviene de otra parte Entonces ahora lo que voy a hacer es decirle si campo externo es igual a si Bueno pues en ese caso lo que voy a hacer es otra cosa V lo que voy a hacer es que dis pun html de momento voy a hacer esto es igual a un espacio Y eso qué quiere decir simplemente es una demostración simplemente lo que quiere decir es que si yo hago doble clic aquí pues en principio voy a recargar para que se recargue todo voy a hacer así y el campo desaparece Por qué desaparece Bueno pues desaparece porque lo que ocurre Es que voy a hacer un Select voy a hacer un Select y voy a hacer un option que diga hola y voy a hacer un option por aquí por qué Pues porque si yo hago así quiero Que aparezca un desplegable y ese desplegable deberá tener todo el listado de opciones que hay en este caso dentro de asignatura recordemos estamos hablando de asignatura pero realmente estamos hablando de cualquier campo vale estamos hablando de cualquier campo de cualquier tabla en cualquier aplicación así que En definitiva ahora lo que voy a hacer Vamos a ver ahora lo que voy a hacer es decirle al sistema que en Inc necesito un Ajax e valores o algo así Ajax valores php o Ajax select.php lo podría haber llamado En definitiva vamos a ver entonces un momento y ahora vamos a ver un momento que me concentre vale Ahora aquí en el controlador voy a decirle que Class es igual a esto columna es igual a esto tabla es igual a esto vamos a ver no voy a decirle tabla es igual a tabla Okay campo vamos a ver campo es igual a fk mostrar Vale entonces yo ahora vengo aquí y digo en el dis Quiero load quiero cargar el archivo que está en Inc y se llama Ajax valores y este archivo de Ajax valores va a hacer lo siguiente copio esto de aquí pego y le digo donde tabla es igual a tabla Mostrar es igual a mostrar y ahora tabla es tabla columna es igual a columna y voy a hacer columna es igual a columna vamos a ver controlador tabla y campo bueno columna tiene que coincidir si no hay coincidencia habrá problemas evidentemente bien entonces ahora en a valores le digo Select vamos a verlo Select from get tabla Select all from get tabla y ya está Where nada entonces vengo aquí Select campo era campo no columna No me acuerdo qué era columna as columna Vale entonces Ok resultado Cojo un While cojo While fila Y entonces digo eco vale vamos a ver Esto es un Select Que de momento no va a ir a ninguna parte Pero vale No tiene nombre no tiene name Así que no va a ir a ninguna parte pero option ah pego por aquí falta un punto y coma y digo fila columna y si todo ha ido bien y si todo ha ido bien cuando recargo y hago así momento Hay algún error vamos a verlo eh No puedo reer properties de att vale en código 19 vamos a ver el código 19 selector Ah sí es que selector es dis vale muy bien okay venga no venga hago así doble clic vale siguiente Ah momentom admin Ajax valores es un 404 Ajax valores php Ajax modifica esto Qué es Ah no Ajax valores vale Ajax valores php AX valores php que está sí que existe me dice 404 no existe Ajax valores php sí que existe sí Ajax valores php cómo me dices que no existe Voy a cargarlo sin parámetros Ah ahí que existe luego el problema son los parámetros Ah sí vale Sí el problema está en que el primer elemento es un interrogante Entonces ahora recargo hago así vale Y entonces Aparecen por aquí todos los elementos vale son mil y pico elementos entonces lo que voy a hacer fijémonos es increíble la cantidad lo que voy a hacer es utilizar una librería muy útil muy buena que se llama Select 2 entonces Select 2 me permite hacer un buscador sobre los campos de desplegable que en Casos como este pues son casos donde el campo es grandísimo vamos a por ello vamos a activar ese Select 2 y vamos a continuación a aplicarlo Así que a continuación vamos a Select dos voy a usar esta librería bien entonces e bueno instalación vale voy a utilizarlo de momento como cdn más adelante igual lo meteré como librería propia pero de momento voy a utilizarlo Como cdn así que me voy a index lo pego en el Head vale le digo en Class le digo que Select 2 Bueno basic usage y básicamente lo que voy a hacer es decirle que Select 2 Vale pues todo aquello que sea un campo Select todo aquello que sea un campo Select en código voy a decirle todo aquello que sea un campo Select automáticamente se va a convertir en un Select 2 Pero eso no va a afectar a un campo que se crea desde cero creo vamos a verlo hago así y esto no afecta a este campo Entonces yo ahora lo que voy a hacer es decir aquí de nuevo que una vez que tengo esto Ahora vuelvo a aplicar esto y con suerte No todavía no hay algún error no bueno con suerte lo que quiero es decirle al sistema que pues este campo también sea un Select vamos a ver Select a valores vamos a ver Select 2 para contenido Dinámico Select 2 On dynamic Element vale Mola pues vamos a ver dom inserted Select Vale pues vamos a ponerlo por aquí y esto lo que hace es queando que en el cuerpo se ha insertado un nuevo elemento del dom si es de tipo Select le mete un Select 2 fantástico pues vamos allá vale vamos a hacer click y Ah fantástico Ahora sí vale entonces vemos que aparte de que es un poco grande ahora lo tocamos un poco de tamaño pero lo que quiero es esto lo que quiero es como vemos pues el filtrado que me consigue hacer y luego pues bueno vamos a ver el tamaño máximo de columna y esto es campo no Dónde está th tengo algún th por aquí th ya me extraña pero bueno Vale pues Hala th le voy a decir Max with de 300 píxeles Max iion with recargo hago así vale con cuidado es muy grande voy a decirle important y voy a recargar con fuerza a ver si ese es el problema vale voy a este campo y voy a decir decirle que Max with Este pero TD th TD Así que hago así vale Ahí lo tenemos y este elemento es un Select 2 Ahí está vamos a Ahí está Select Data Select dos Vale pues coma punto Select 2 hacemos así vale intentamos que no se nos desmadre demasiado la anchura de la columna Bueno pues ahora lo que quiero hacer es decirle al sistema qué es lo que va a ocurrir cuando eh seleccione algo y eso que va a ocurrir es que Quiero actualizar el elemento vale Quiero actualizar el la asignatura en este caso por una parte en Ajax valores en option value voy a decirle que quiero identificador as identificador coma entonces value pongo ahí identificador yora el Select en el name tendría que tener el nombre de la tabla Así que get tabla muy bien entonces con esto eco get tabla con esto lo que debería ocurrir es que ahora en cuanto haga Así cuando seleccione algo pues ese algo se tiene que quedar ahí fijado cómo lo vamos a hacer Bueno pues vamos a ver Select vamos a verlo Select 2s change on change vamos a ver Vale pues esto mismo un Select Esto está aquí momento voy a poner console punto log cambiado Simplemente porque quiero comprobar si podemos seleccionar algo es decir si podemos detectar hago así y cambiado Vale ahora que lo hemos cambiado Quiero saber exactamente qué es lo que hemos cogido entonces console.log e vamos a ver que me devuelve la e hago así vale Y me devuelve Target delegate parámetros Target bueno es interesante porque lo que quiero es vale Select 2s change get value on change Okay Vale y Data vamos a ver recargamos eh atención no así recargamos con fuerza no aparece nada vale dámelo todo dame todo lo que venga de ahí Ok qué me das no me das nada vale Bueno pues no sé this má option selected y no me das nada entonces Bueno tengo que averiguar la forma de extraer la información digamos de ese campo bueno para que aparezca ahí para poder cogerla y meterla evidentemente en la base de datos vamos a ver cómo lo podemos hacer Bueno pues vamos a probar diferentes cosas vamos a ver y voy a hacer lo siguiente vamos a ver on Select y vamos a probar esto punto on Select y quiero console punto log Data y a ver qué hay recargo pongo beso ya es otra cosa muy diferente entonces ahora de hecho puedo poner Data y eso ya es una cosa como vemos muy diferente entonces a partir de aquí lo que puedo hacer es lo siguiente le digo varid es igual a data.id quiero Data a ver otra vez para ver cómo se llamaba el nombre del campo Quiero text vale Bart texto es igual a data.to text y ahora por tanto lo que voy a hacer es decir vamos a ver quiero a ver cuándo cambie cuáando quite dis remove es decir Quiero quitar el Select 2 y quiero poner estos datos a ver hago así el dis pun remove no me lo ha cogido si que algo ha cogido vale dis pun parent remove probablemente estoy con el campo Ok Ah ok vale ha quitado el TD también o sea sí que lo estaba haciendo Entonces vamos a ver hago así no quita el este campo Select voy a hacer una cosa dis pun parent vo hacer una trampa Lo siento dis parent html y voy a hacer un TD y con este TD voy a poner ahí un campo nuevo Bueno pues eh ahora lo que voy a hacer es decir lo siguiente quiero pues poner un una etiqueta B de negrita una etiqueta b y entonces Aquí voy a poner el eh ID vamos a ver ID sí y voy a poner guion texto Y entonces vamos a ver lo que ocurre texto no texto recargo aquí vale vengo aquí doble clic y perfecto vale Voy a ver qué pasa si hago doble clic otra vez creo que no va a funcionar Wow ha funcionado increíble Vale entonces eh claro esto es mentira quiero decir si ahora recargo Pues el campo sigue estando así es decir lo que he hecho es que cosméticamente le he puesto la opción pero evidentemente ahora Lo importante es que tengo que poner digamos el campo correcto Vale entonces ahora vamos a ver vengo por aquí y ahora le tengo que decir que vamos a ver el ID es este OK ahora qué es lo que tengo que poner pues bar tabla es igual a dis parent punto att tabla y ahora bar campo creo vamos a verlo es tabla columna es igual a dis punto parent columna y entonces ahora yo creo que ya tabla columna y entonces ahora en Ajax voy a cargar vamos a ver bueno podría cargar AX modifica vamos a ver qué tiene AX modifica update tabla columna valor A ver pues sí Lo cierto es que se parece bastante sí vamos a ver bar identificador es igual a identificador esto es valor a enviar antes de enviar voy a hacer un console punto log recargo y digo eh consola dos Ok selector is not Define en código línea 11 identificador vale selector parent atributo identificador Ok nombre aquí dos no lo encuentra vale selector notify la línea 11 selector Ah no es he copiado y he pegado con demasiada alegría vale recargo Okay Ah no a ver voy a poner el valor 3 en la tabla de asignaturas en la tabla de no no eso no es correcto en la columna nombre y el identificador undefined eso no es correcto y luego ID is not Def la 13 vale vamos a ver línea 12 y línea 13 claro ID es valor a enviar vale en el identificador ahora veremos vale vamos a verlo esto Qué es asignatura columna nombre Okay tabla asignaturas eso no es correcto es tabla entregas y tabla entregas vale hay un error en el controlador Y entonces le digo tabla externa es eso de ahí pero tabla es igual vamos a verlo pero tabla es igual a tabla vamos a verlo ahora vamos a ver Esto es tabla entregas tabla externa columna nombre vamos a verlo no aparece ok No aparece porque aquí en el código a ver Ajax valores tabla externa no tabla y esto es externa vamos a verlo correcto Vale ahora cojo esto vamos a la consola voy a poner en la tabla de entregas en la columna nombre y en el identificador undefined vale venga en la columna nombre correcto no es nombre la columna no es nombre controlador la columna es nombre columna contador columna vamos a verlo ahí recargamos cojo vale Okay vale venga columna externa ahora column igual a esto okay en el código le paso columna externa y así respetamos una cosa y otra Ok venga pincho consola voy a poner el valor 3 en la tabla de entregas en la columna asignatura y le identificado undefine vale esto ya está casi identificador undefine únicamente me está fallando ahora el identificador vamos a ver por qué identificador aquí identificador es parent atributo identificador vale muy bien si yo cojo esto tengo identificador lo que sea pero si yo cojo esto no tengo identificador Pues por eso falla Entonces vamos a ver me voy al controlador veo que aquí hay un identificador pero en la que he puesto externa Pues no hay identificador Así que lo pongo aquí por ejemplo recargo entonces hago así consola voy a poner valor tres en la tabla de entrega columna asignatura identificador 143 vale eso tiene una pinta mucho mejor ahora que ya he debug geado pues ya puedo eh lanzarlo Ya puedo lanzar la petición Entonces si todo va bien Ahora este Ajax load lo puedo pasar con confianza lo puedo pasar con confianza y si todo va bien vamos a verlo vale columna 143 estoy cambiando el cero por un esto por un tres Entonces ahora recargo para comprobar si es cierto Wow vale Hola recargo y esto porque no ha funcionado y esto porque me está cogiendo porque se está comiendo la fecha Pues no lo sé vamos a verlo externo Ah aquí qué se está comiendo vamos a ver el código fuenta de la página y vamos a buscar el 143 vale TV TD voy a hacer una cosa vamos a ver Porque ahora mismo no sé en qué estado se ha quedado tendría que mirar en la base de datos no sé dónde tengo ahora mismo la base de datos Vamos a sacarla pero no sé qué ha ocurrido Hosting hago clic aquí espero con suerte no haberme cargado nada de la base de datos vamos a ver vale vamos a buscar el registro 143 directamente en la base de datos y buscar y 143 no 143 vale en principio todo correcto asignatura 3es de hecho la ha puesto bien De hecho lo ha puesto bien entonces por qué no aparece bien o sea asignatura es la tres es correcto clic a ver entregas asignaturas entregas vale pero ahí se lo está comiendo ahí se lo está comiendo ese campo a ver voy a poner aquí la número cuatro yo que sé cu recargo y se come ese campo se come ese campo por algún motivo pero si busco el registro 144 no sé dónde está ahora no sé dónde está si busco el registro 144 Pues en principio Está correcto asignatura ostras Y por qué se lo come Vale pues no sé Voy a revisarlo porque en principio digamos que está funcionando correctamente pero hay algo que se está comiendo ahí vamos a ver vale c 44 cu no sé qué se está comiendo no sé qué le ocurre ahí pero se está comiendo el campo una cosa que puedo hacer en el controlador es que cada vez que pongo un TD voy a poner un retorno de carro y cada vez que pongo un TD voy a poner un retorno de carro simplemente para que al recargar y al ver el código Pues el código aparezca un poquito más ordenado entonces recargo veo código fuente de la página vale 140 y2 era el c 4 3 144 vale 143 práctica e qué pasa Ahí hay una doble comilla esa comilla no Mola y explicaría de hecho esa comilla está en todas partes vamos a ver externo no y en los a ver TD identificador lo que me extraña es que no desaparezcan todos Y en el externo 145 y no aparece de entrada voy a corregir eso porque así yo sí tengo que corregirlo t la identificador no veo ahora mismo Dónde está el error Target Blank Eso es correcto no veo el error identificador ahí no veo el error Estoy buscando De dónde sale eso externo no y externo sí y en cambio aquí desaparece el externo Sí en esos dos Campos Qué tienen esos dos Campos Pues no lo sé vamos a ver si comentarios fk tabla no es igual a nada Ah cuidado consulta dos vale 142 ahí está el problema 1402 Ah bueno está ahí vale ec consultados vamos a ver aquí sí que está funcionando Aquí sí que está apareciendo pero es algo que ocurre en los dos he modificado lo cual es extraño porque al modificarse según la base de datos no les ocurre nada pero algo evidentemente le está ocurriendo claro voy a poner esto aquí asignatura todo correcto 142 143 realmente 144 es que teóricamente es correcto y no sé qué tiene para desaparecer vale Ok Voy a hacer una cosa Claro ya no puedo vale esto de aquí lo cambio a nombre claro y al hacer así ya no está Okay y desaparece pues vamos a ver voy a ver el código aquí puedo estar un rato probablemente al final será una tontería como suele ser muchas veces pero vamos a ver si J son de code consulta 2s hasta ahí está llegando Vale hasta Allí está llegando Entonces esto parece que esté dando vacío model Ok es igual a 3 es igual a vamos allá Es deciro antes lo hao funcionado 639 vamos a este nos vamos aquí nos vamos a sql Nos vamos aquí le damos y no sale nada Ok correcto pero no es correcto y no es correcto porque Select nombre as campo asignaturas donde y de m es ig 3 si que sale algo entonces hago así no sale nada Select nombre campo asignaturas y de m es ig a 3 Esto es lo que está yendo mal desde el sentido en el cual from asignaturas es ig a 3 from asignaturas de moodel es igual a e vale Ya sé lo que ha pasado Ya sé lo que ha pasado una cosa es el identificador y otra cosa es el id moodle eh Ya sé lo que ha pasado okay Y ya sé cómo arreglarlo venga Entonces el error realmente es este el error realmente es este el TD va aquí el TD va Aquí como mucho falla esto de aquí pero ahora lo importante o sea con lo cual ya tenemos los campos cuadrados Es que esto cuadra con el ID vamos a ver claro venga o sea una cosa es el identificador de la tabla otra cosa es el identificador de moodle Entonces yo qué le estoy pasando yo exactamente qué le he pasado Vale pues si yo hago aquí y le paso atención sociosanitaria es Debería ser el dos pero aquí aparecerá el tres Vale entonces me voy al registro 147 creo que es 147 de entregas Debería ser el dos pero aparece el tres ese es el problema Entonces ahí el problema Está Al actualizar Y entonces a ver Debería ser el ya no me acuerdo que debería ser el dos pero aparece el tres vale muy bien entonces me voy al controlador no me voy aquí al código vale Y aquí y lo que tengo que hacer aquí está es decirle que quiero el identificador externo ese es el problema vale Porque además cuando le doy a valores ahí está el problema Cómo le digo yo cómo le digo yo que lo que quiero es un externo Bueno pues vamos a ver si tengo esa información que creo que sí a ver tabla externa columna y columna externa Vale entonces puedo decirle columna externa y yo creo que si tengo columna externa tengo clave externa Porque si vengo aquí okay Si vengo aquí clave externa es igual a esto de aquí fk clave si todo va bien ok algún problema hay aquí no sé cuál es el problema a ver fk clave Ah superc controlador no se ha encontrado vale Ok venga entonces hago así Sí vale columna externa es igual a nombre o no la verdad es que no a ver si clave externa es ID moodel Ahora sí vale entonces cojo la clave externa para decirle que vamos a ver cojo la clave externa código Ajax valores Vale y clave externa es igual a clave externa Y entonces le digo que clave externa es igual a clave externa que muchas veces sera la identificador pero otras veces no de hecho la gran mayoría de las veces er el identificador Pero hay veces que no como en esta Justo nos hemos ido a encontrar un caso difícil pero bueno mira mejor así y entonces ahora en Ajax valores le puedo decir que Select pues clave externa as identificador Y entonces Si ahora todo va bien vengo por aquí Bueno aparte de que aquí ahora veremos pero vale Okay Entonces ahora vengo por aquí y por aquí donde pone nombre 151 vale No aparece un momentín Por qué Select get clave externa as identificador algún error no ec consulta vale Select nombre as campo no e consulta fuera vale vemos código de la Fuente de la página no está lanzando ec consulta he escrito algo mal en principio parece que no voy a refrescar Okay Vale Select get clave externa si pongo identificador sí que funciona si pongo identificador sí que funciona pero si pongo clave externa no muy bien Por qué Pues no lo sé vamos a verlo código selector punto atributo clave externa vamos a comprobar que exista un atributo llamado clave externa una e Bueno ese es el error Así que clave externa Ok recargamos nombre ahí tenemos atención recargo 151 y ahora el 151 Está correcto lo cual pues hace que el sistema ya esté en funcionamiento Y eso quiere decir que pues no solo tengo claves externas sino que pues puedo hacer doble clic y puedo seleccionar una asignatura y puedo recargar y puedo comprobar Cómo se ha fijado correctamente dentro del campo es decir el campo está perfectamente en funcionamiento Bueno pues vamos a continuar y bueno ahora a continuación vamos a venir por aquí a vamos a ver a al administrador vamos a enviar vale Y bueno quiero hablar de una cosa que son los informes entonces dentro de lo que son los informes Por cierto que voy a hacer una cosa una chor radilla pero vamos a entrar dentro de la base de datos vamos a ver de la misma forma que hemos puesto iconos por campo que solo se ven realmente Por cierto en los formularios no se ven en el panel de control porque también pues los iconos hacen bonito para el usuario final y bueno para el usuario digamos administrador Pues tampoco son tan importantes vale pero el caso es que bueno por qué no podríamos poner iconos pues por ejemplo aquí en los mantenimientos Vale entonces aquí en los mantenimientos vamos a bases de datos un momentín que estoy abriendo la base de datos ahora un segundo aparecerá en la pantalla y vamos a abrirla Vale y hago así Pongo aquí la base de datos Y bueno si voy aquí a la propia base de datos veo que tengo Eh pues cómo diría yo tengo opciones para los propios Campos no tengo o no veo aquí está comentarios de la tabla entonces aquí por ejemplo en comentarios de la tabla no en comentarios de los campos sino en comentarios de la tabla Pues yo podría poner Pues lo mismo que hemos puesto antes verdad lo mismo que hemos puesto aquí en los campos pues puedo hacer un pequeño jotas son y aquí en operaciones Pues en comentarios de tabla una pena que no sea de tipo texto Pero la idea es que podemos repetir el proceso pues Tantas veces como queramos de hecho este proceso lo estoy aplicando en lo estoy aplicando en tecnologías web pero teniendo en cuenta que es mysql pues lo podemos aplicar prácticamente en cualquier entorno Entonces ahora pues aquí donde pone título Pues mira pues título de descripción pues lo voy a dejar ahora Play holder no máscara no mínimo no icono Sí vamos a dejar algunas cosas tipo dato no entonces en título voy a poner asignaturas y Eh Pues voy a poner eh mantenimiento donde puedes ver el contenido de las asignaturas de los ciclos icono Pam font awesome icons vamos a ver así que subject por ejemplo subject matter School vamos a buscar por aquí y vamos a ver qué iconos podemos bien entonces voy a este icono de aquí y vamos a el código lo ponemos en el archivo Jason Vale y cogemos este código de icono voy a ponerlo aquí me quedo con únicamente el código vale Y entonces hago lo siguiente Es más voy a hacer un poquito de programación defensiva verir por aquí comentarios de la tabla pongo esto le doy a continuar y ahora dentro de asignaturas voy a entrar en el código y voy a hacer lo siguiente voy a decir Bueno si está puesto el título lo voy a poner y si no de ahí un poco la programación defensiva y si no sería algo así como TR Catch pero lo puedo hacer con lo puedo hacer con If Else Aunque técnicamente Bueno digo If Else vamos a ver por aquí porque sé que el els va a funcionar perfectamente entonces eh No esto no aquí y momento que estoy entrando vale Okay pues vamos Aquí vamos a administración vamos al archivo y vamos a verlo entonces cojo por aquí fila usuario voy a la s show tables vale igual buscaré show full tables o algo así pero el caso vamos a verlo hay fila cero Pues no sé a ver qué podemos voy a bomp bar dump de resultado entonces vengo aquí Field count y longitud número de rows vale entonces digo vale Ahora quiero resultado de Pues bueno resultado de cero por ejemplo vale resultado de cero no es como una Ray efectivamente vale venga bien y ahora lo que quiero es show full tables recargo Y a partir de ahí pues aparecen diferentes tipos de objetivo digamos y ahora por ejemplo voy a decir my sql show full tables commands y vamos por aquí vamos por aquí vamos a ver show Table status vale vamos a ir al controlador vale Y en el controlador Aquí vamos a decir fila cero claro fecha Ray claro no le puedo decir fecha soc voy a hacer una cosa cojo a sooc me va a dar error Okay bien Ahora quiero por aquí punto fila comand vale principio todavía no y dentro de vamos a ver fila Field show tables vale y estoy intentando que me dé el contenido completo Voy a php dump object y quiero que a ver print r o esto muy bien bueno a ver print r porque lo que quiero es ver queé tiene todo así que show tables print r vengo por aquí vale estamos un poco en lo mismo entonces lo que quiero hacer es ver los comentarios una cosa que puedo hacer una cosa que puedo hacer es fetch array dejo esto de cero fila de Cero y entonces ahora lo que voy a hacer es que consulta 2s aquí es mysql show status aquí show Table status Where Takata entonces consulta 2s es show Table status Where name es igual a fila cero Así que resultado 2 es igual a consulta 2 bien Y entonces a partir de aquí comand es cuando puedo poner por aquí fila dos coment vamos a verlo Vale tengo ya ahí asignaturas resultado Así vamos a ver vale Y ahora tengo que parsear esto entonces cojo el While cojo el Wi fila 2 es igual a resultado 2s fecha Ray y ahora si ya tengo fila dos puedo venir aquí member on Bull quiere decir que no ha cogido nada Entonces vamos a parar esto vamos a parar esto vamos a decir eco consulta 2 vale show Table status Where name es igual a asignaturas me voy a la base de datos me voy a sql lo pego continúo y vale la columna asignaturas name es igual a asignaturas show Table status vamos a ver show no Our name es igual a Table name igual el problema ha estado en las comillas vamos a ver continuamos y ahí lo tenemos bien entonces ahora sí me pongo comillas me o comillas recargamos vale desbloqueamos mute el eco vale Y ya tenemos por aquí el principio vale ya tenemos por aquí el inicio con lo cual ahora sí puedo decir lo siguiente me voy al controlador y digo Si el título vamos a ver controlador descripción vale si J son de code fila 2 comand título no es igual a nada en ese caso bueno o es igual a nada Mejor dicho es algo si no hago otra cosa entonces qué ocurre Bueno pues lo que ocurre es que ahora esto lo pongo aquí esto lo pongo allá y entonces lo que hago es que en este de aquí si es igual a nada en ese caso le pongo la fila cero y si no le pongo este elemento Entonces esto lo que va a hacer Vamos a ver un momentín fila dos comand no quiero fila dos título aquí entonces en el primero pone asignaturas y en el segundo pues pone directamente el título de la tabla Pero lo bueno es que sigue funcionando evidentemente Vale entonces ahora además incluso lo que puedo hacer es poner un tooltip html tooltip to top create tooltips de forma sencilla ya no html native tooltip vamos a verlo momento que cierre páginas bueno global title Vale pues venga este está bien title Venga pues Perfecto entonces title attribute venga Así que yo vengo por aquí y en este caso title es igual a esto de aquí Así que title es igual a descripción Así que guardo recargo Y si pongo aquí el botón Pues dice mantenimiento donde puedes ver el contenido de las asignaturas de los ciclos así que tenemos un poquito de ayuda para cada esto no Traducir el Gallego de la misma forma evidentemente ahora pues voy a poner un título Perdón un logo quería decir así que vengo por aquí y del font awesome voy a copiar un icono pego este icono pero ahora no quiero ese icono claro ahora lo que quiero vamos a ver voy a hacer un poco de despacio Okay ahora lo que quiero es que aquí pues voy a poner el icono y lo voy a poner cogiendo las comillas cojo el icono y en este caso es el mismo Vale qué más puedo hacer Bueno pues lo que puedo hacer es voy a no sé en trve voy a un icono base para los que no tengan icono no esto no ítem por ejemplo a ver ítem no me gusta em Bueno pues Arrow algo así Arrow Pues no sé algo así entonces pincho y En aquellos en los que no esté definido pues le pongo esto y En aquellos en los que sí que esté definido pues le pongo el que le toque hago así vale Y ahí lo tengo es un icono un poco más grande pero bueno lo que sea bueno pues ya lo tengo ya tengo por ahí los iconos al final me enrollado haciendo los iconos cuando lo que quería hacer era sacar informes Pero bueno empezamos por aquí pues ahora continuaremos Por otra parte vamos a sacar informes y al sacar informes vamos a ver qué podemos obtener del sistema Bueno pues en este caso lo que voy a hacer a continuación es que junto con por ejemplo junto con estas operaciones de editar y eh Y restar quiero otra operación que va a ser ver Claro tú puedes decir bueno ver ya estás viendo aquí para qué quieres una operación de ver Bueno pues yo por ejemplo a partir de una asignatura puedo decir vale No quiero ver la asignatura Quiero ver la asignatura y todos los alumnos que han entregado cosas de esta asignatura entonces claro No es solo ver el registro que estamos viendo Es ver un informe relacionado con este registro entonces por eso a continuación lo que voy a hacer es bueno poner otro icono ahora editamos el controlador o voy a venir por aquí y pongo View entonces voy a darle View vi por ejemplo este ojo View bueno es que como tengo los iconos cuadrados Pues a ver voy a poner report para ver si encuentro un icono report No pues vamos a ver document vale venga algo así pues algo así por ejemplo este entonces vengo por aquí y a continuación eh Le digo que dentro del controlador dentro de ver leer Aquí está voy a poner un icono más espera que encuentre los iconos Aquí voy a poner un icono que va a ser este que va a ser un icono de ver informe vamos a verlo recargo ahí aparece un tercer icono de ver informe y digo tabla es igual a no realmente no update nada desde luego vamos a ver vale tabla es igual a tal e informe es igual a identificador vale Ok Así que vengo por aquí le digo por ejemplo pues que quiero ver aquí un informe y bueno de momento no estamos viendo nada evidentemente no pasa nada y yo ahora lo que hago es decirle Bueno pues si hay un informe vamos a verlo Pues voy a function informe y en informe pues vamos a poner tabla coma identificador vamos a verlo y identificador vale aquí lo tenemos de momento y yo ahora lo que voy a hacer Vamos a ver Es que aquí en los controladores en el concentrador digamos le digo si lo que estoy viendo es un informe pues en ese caso mi formulario informe tabla y get informe vamos a ver si es cierto y momento no aquí tabla informe correcto Y entonces a continuación vamos a ver qué es lo que ponemos aquí es decir vamos a ver qué tipo de informe sacamos donde pues por ejemplo el va a ser pues eh Pues no sé depende ahora veremos pero de momento voy a poner eco h1 informe Okay recargo y informe vemos que voy a asignaturas y pincho pero si pincho aquí el informe es cuando aparece un informe bien ahora lo primero que quiero hacer es ver Pues digamos Qué es lo que está asociado a ese informe entonces y ahora vengo por aquí y digo vamos a ver y digo incluyo config Bueno voy a copiar un trozo incluyo config hasta el While vale Así que vengo por aquí incluyo config my sqli consulta resultado y bueno y eco Table realmente está todo casi bien entonces yo a continuación le digo Select all from tabla y ya está y selector from tra Where identificador es igual a identificador Vale entonces hago un query hago un table cierro el Table Y entonces vengo por aquí vamos a ver y digo eco no for each fila as qué as índice valor Pues voy a eco aquí pongo un TR aquí al final pongo eco TR y aquí pongo eco TD TD vale Así que aquí pongo índice aquí pongo valor y si todo ha ido bien Vamos a verlo no sé si saldrá bien a la primera pero si todoo bien eh vamos a ver a quio no sé atención vale Okay bien tengo identificador vamos a ver identificador tres y de moodle nombre y shortname apsd pero debería estar poniéndolo Ah no no no Esto va Aquí y Esto va aquí recargamos Ahora sí lo estoy viendo en fila no quiero ver realmente la tabla Entonces vamos a ver claro en el Index tabla estoy viendo como sacar solo el leer y tabla voy hacer una cosa que no es muy elegante pero de momento and no y set and aquí y aquí no y set get informe and no is set delete y update no sé si la lógica boleana me va a funcionar que va Ah sí Ahora sí vale entonces hago así y me sale la tabla pero quiero ver un informe y me sale solo el informe correcto vale hasta ahí bien pero a continuación lo que quiero es eh generar digamos más contenido aquí abajo vale quiero que quiero en el contenido sacar cosas Qué cosas Bueno eso va a ser realmente lo difícil pero vamos a ver cómo lo podemos hacer a continuación Bueno pues a continuación lo que voy a hacer es por ejemplo pues los registros asociados a esa asignatura por ejemplo vemos Que en entregas Pues hay entregas de vamos a verlo cuidado hay entregas de la asignatura estan aquí al final vale 639 vamos a verlo vale me voy a la 639 es pues esa no es Ah sí es aquí Perdón 639 aquí diseño y elaboración correcto Y entonces ahora lo que quiero es que al generar un informe yo pincho y diga pues Vale pues tengo aquí la cabecera que es qué asignatura es pero a continuación tengo aquí más cosas esto es lo que evidentemente no podía aparecer de la otra forma Esto es lo que justifica la creación de un informe Entonces ahora viene una parte muy delicada realmente que es qué va a aparecer en ese informe entonces para eso lo que voy a hacer es poner por aquí una nueva tabla voy a poner por aquí el nombre de la tabla informes y dentro de informes vamos a ver porque Eh bueno puedo meter varios informes con lo cual creo que me vale la pena hacerlo aquí creo que me vale la pena hacerlo desde aquí y no directamente desde la estructura de la tabla No desde el Jason voy a hacerlo desde aquí y entonces vengo por aquí creo un identificador estoy pensando que me interesa estoy pensando que quiero Voy a hacerlo desde aquí venga identificador eh 20 Quiero un índice primario primario vale autoincremental Y entonces y vengo por aquí y digo vale es que estoy pensando sí no porque es una relación de un a n Vale y digo tabla sí tabla es un marchar 100 vale Y ahora consulta y es un marchar y esto voy poner un text mejor Okay ahora dentro de comentarios guardo cojo los comentarios de entregas me voy a estructura me voy aquí a este jas me voy a brackets y digo código de la asignatura esto es informes de cada una de las tablas placeholder no me hace falta y todo eso pero pero parámetro get icono lo voy a dejar así vale pero tipo dato esto Qué es tipo dato es un texto ahora parámetro get nada y ahora tabla es igual a Ah No lo sé efec tabla estos es informes claro tabla es son las tablas nada esto es el nombre de la tabla O sea no es vale Okay venga Entonces ahora vengo por aquí meto uno nuevo y digo pues en asignaturas voy a meter una consulta que es Select all from entregas Where qué Where No lo sé Where columnas we asignatura es igual a y atención porque voy a poner una x con un corchete esa x es lo que va a reemplazar todo esto vamos a verlo y ahora continúo tengo ya en informes Aquí lo tengo un informe y una petición y entonces yo ahora lo que voy a hacer es que me voy al controlador de informes aquí el controlador vale Y ahora vengo por aquí y ahora quiero hacer otro Table y cierro el Table vale Y entonces Ahora quiero las columnas bueno Perdón vamos a ver consulta es igual a show columns show full columns from tabla vamos abajo informe aquí muy bien digo show full colums from qué from No lo sé vamos a ver show full colums from tabla Pero qué es tabla no es que esto no es Sí vamos a ver no es Select all from informes we tabla es igual a tabla esto ya es otra cosa entonces ahora digo la petición que voy a hacer es más fila Y cómo se llama esto consulta vamos a verlo vamos a ver si va Ok hago así la petición que voy a hacer es Select all from entregas Where asignatura es igual a lo que sea hasta ahora bien y ya que estoy vale Ya que estoy Tengo un identificador Y entonces digo vamos a ver digo php replace str replace Vale y digo str replace de la búsqueda es decir esto nos acordamos que lo he puesto hace un momento coma lo que reemplazo identificador coma dónde lo busco hago así y vamos a verlo recargo la petición que voy a hacer es Select from entregas bu asignatura es igual a Takata Ahí está Y entonces ahora sí es donde digo Vale pues consulta 2 es igual a esto de aquí resultado 2s es igual a esto de aquí hago un While Vale y ahora vamos a ver Select all from entregas vale vamos a verlo hago un While me gustaría Ob tener los nombres de las tablas Pero bueno ahora veremos los n de las columnas quiero decir vale fila dos resultado dos y entonces digo forage Aquí meto un eco TR aquí meto un eco de cierre TR y digo for each fila 2 as clave valor y entonces meto un eco TD clave valor clave valor claro ahí está la cuestión meto el valor vamos a verlo me falta un punto y coma OK Vamos a verlo no está apareciendo nada vale de momento fila dos consulta dos fila 2s Select all from entregas bu asignatura estata voy a probarlo en el sql para ver si estoy cometiendo algún error estoy cometiendo algún error vale 306 me voy a no me voy a entregas y en entregas voy a buscar donde la asignatura sea igual a esto me extraña porque de entregas yo juraría que tenía un 306 no es 306 cuál Entonces yo juraría que tenía un 306 entregas diseño Ah vale No sí Ah no pues no es 306 es 446 por ejemplo vale venga vamos a ver asignaturas no ya no sé qué tengo vamos a ver diseño es 446 Mira voy a diseño informe vale claro we asignatura es igual a 217 porque 217 es el identificador pero el ID moodle es ese de ahí vale no pasa mucho porque lo que puedo hacer es a partir del identificador digamos convertir el identificador en identificador de moodle Y a partir de ahí pues ver En definitiva esto es un poco para pensarlo vamos a dejar esto para una segunda parte porque tengo que pensar en este caso ya digo tengo un caso un poco especial en el sentido en el que pues no quiero la clave primaria sio Quiero una clave secundaria pero bueno Esta es la gracia tengo que prar al sistema para que valga en todos los casos para que funcione correctamente tanto con claves primarias como con claves secundarias Bueno pues continuamos trabajando con este continuamos trabajando con este bloque de contenido y vamos a extender vamos a hacer varias aciones a lo largo de esta de este siguiente bloque en una de ellas lo primero que quiero hacer es Establecer un nuevo tipo de campo he subido esta aplicación a una dirección web ahora veremos Por qué es una dirección web real porque a continuación Quiero establecer un sistema de notificaciones y para ello por tanto lo que voy a hacer es pues trabajarlo directamente en un proveedor web me da igual el que sea vale pero necesito estar trabajando No ya en local sino en un proveedor web como digo sobre todo para el tema de notificaciones por correo electrónico que ahora a continuación Pues voy a configurar Pero antes de ello lo primero que quiero como digo es Establecer un nuevo campo dentro de la base de datos que es un campo de eh de parámetro URL entonces eh yo tengo por aquí que una variable vamos a verlo estoy un momento abriendo la base de datos en la otra pantalla Así que ahora en un momento aparecerá vamos a verlo un segundo vamos a ver entregas y aquí vale estoy abriendo la base de datos en este caso como digo pues es una base de datos que ya no está en local sino que está subida a un Hosting porque esta aplicación ya está en funcionamiento O sea ya es una aplicación que se está usando ahora veremos de momento ya hay 129 registros y eh la idea ahora es que quiero poner un parámetro dentro de aquí dentro de entregas que va a ser pues un parámetro de URL entonces me voy a entregas me voy a estructura y dentro de estructura yo por ejemplo pues vemos que tengo aquí vamos a ver tengo por ejemplo pues a ver aquí no el apoc tengo la práctica tengo la URL y tengo el campo vamos a ver deshabilitado no visible true ahora le diremos vamos a ver y sobre todo lo que quiero en tipo de campo vamos a verlo título descripción máscara tipo dato URL Vale pues a continuación quiero modificar la estructura cuidado con esto evidentemente ahora comprobaremos que va bien Por supuesto y voy a meter un nuevo campo por ejemplo pues después de apoc meto un nuevo campo y voy a llamarlo por ejemplo asignatura es un campo de tipo entero puede serlo perfectamente voy a poner 20 caracteres vale Y ahora a continuación voy a copiar alguno de los campos voy a copiar por ejemplo este campo de aquí se lo voy a poner dentro de vamos a cambiar no quieto no columnas vale quiero cambiar solo esta columna vamos a verlo y aquí en comentarios le pongo Esto entonces vamos a ver el tipo de dato va a ser tipo de dato get Y esta es un poco Esta es un poco la cuestión y es que si el tipo de dato es get en este caso lo que va a ocurrir es que esa realmente va a un parámetro de la base de datos entonces título vamos a verlo realmente título no es necesario en este caso pero bueno voy a poner esto en un text edit porque esta versión de may sql pues parece que no es tan amigable en el sentido de que no me deja hacer la línea multitexto entonces título pues nombre o código de la vale descripción especifica el código de asignatura placeholder introduce el código de la asignatura vale máscara vamos a ver algo min es igual algo deshabilitado es igual a false ig a deshabilitado es igual a true visible es igual a true icono ahora lo veremos ahora veremos qué icono le pongo y tipo dato es igual a get entonces a continuación voy a crear una nueva variable voy a decir parámetro vamos a ver un momento voy a decir parámetro URL o parámetro get entendernos va a ser eh ID curso por ejemplo me lo estoy inventando in curse ID curso Así que copio esto lo pongo en comentarios le doy a guardar y vamos a verlo Entonces ahora vengo por aquí recargo estoy momento vale Okay por aquí asignatura estoy viendo deshabilitado es igual a true p igual a true estoy comprobando que se conecte al lugar correcto deshabilitado igual a true visible es igual a true vale vamos a inspeccionar deshabilitado es true pero veis es igual a true vamos a ver el código bien Vamos al controlador aparte de que aquí tenemos esto formulario entregas correcto Vale entonces visible vamos a ver visible es igual a true Así que en principio debería aparecer Pero bueno ahora veremos En todo caso vamos a ver claro tipo dato es igual a get entonces ahí lo que voy a hacer es decirle como tipo dato probablemente no lo está cogiendo correctamente voy a cambiar esto voy a decirle qué tipo dato es igual a number vamos a ver entrega number vamos a recargar todavía no lo tenemos ahora voy a inspeccionar vale Okay ahora aparecerá estoy comprobando que todo esté correcto voy a cambiar mover columnas asignatura lo voy a poner encima de apoc recargo así de momento todavía no Ok vale código estoy comprobando que todo vaya según debe vamos a hacer una cosa cambiar lo copio lo pego dentro de aquí visible true deshabilitado igual a false copio es decir copio pego guardo recargo Bueno Sigue sin aparecer ahora aparecerá pero en todo caso lo que quiero es crear un campo tal que yo pueda por ejemplo I de curso es igual a un número y ese I de curso digamos ese parámetro se recoja dentro del formulario vamos a echarle un vistazo ahora probablemente voy a sacar algún tipo de eco en pantalla y al sacar algún tipo de eco en pantalla pues vamos a ver al final por dónde sale el parámetro voy a hacer una cosa voy a copiar de práctica voy a pegar literalmente en asignatura y luego modifico Más que nada porque principio no me cuadra Vale ahora tenemos número de práctica ahora lo tenemos ahí luego en principio debía haber algún tipo de error dentro del código entonces lo que voy a hacer es ahora pues modificar Entonces esto es título código de la asignatura descripción introduce el código de la asignatura de la cual realizas la entrega por ejemplo 1 2 3 4 5 he deshabilitado es igual a visible icono es lo que sea tipo de dato number copio esto lo introduzco dentro del comentario guardo recargo y desaparece Vale y desaparece por algún motivo porque fijémonos que código de la asignatura estoy introduciendo al parecer algún tipo de error estoy introduciendo algún tipo de error tal que el sistema no coge lo que le estoy diciendo código de la asignatura ya veo Cuál es el error y el error es que tengo aquí unos unas comillas abiertas y cerradas entonces voy a convertir esto en texos formato vamos a ponerlo aquí guardo recargo vamos a ver todavía no hay por ahí todavía unas comillas abiertas y cerradas Así que voy a modificar las comillas principio vale deshabilitado es igual a true creo que ya tengo un poquito más de confianza para poder cambiar los parámetros sabiendo que he localizado donde está el error que lleva a que no funcione guardo recargo Vale Si todavía hay algunas comillas por ahí sueltas Vale pues vamos a irlas buscando irlas localizando estoy repasando las comillas Así que yo creo todavía hay alguna yo creo que más o menos todavía hay alguna más o menos ya práctica No esto es asignatura entregas estructura asignatura comentario guardamos recargamos código de asignatura vale está deshabilitado y ahora que tengo esto es cuando voy a poner parámetro URL o parámetro get En definitiva dos puntos ID curso voy a poner esto ID curso Vale entonces copio esto lo pego dentro de estructura le doy a guardar vale código de la asignatura y ahora viene lo siguiente yo le he dicho que el parámetro que voy a es el I de curso y entonces a continuación yo en I de curso puedo poner lo que quiera pero lo que voy a hacer es Modificar el controlador para decirle que si existe y de curso donde pone vamos a poner Aquí voy a decir a ver lo siguiente voy a decir eco por aquí y digo Perdón esto aquí vale Y ahora digo solo en el caso de que exista solo en el caso de que esté puesto el parámetro j son de code parámetro get o el nombre que le hayamos puesto eh fila Perdón com no parámetro get Esto va aquí solo en el caso de que exista en ese caso lo que voy a hacer es ponerle el valor pero claro Cuál es el parámetro Pues bueno vamos a ver porque yo a continuación lo que tengo que hacer es decirle que ese parámetro lo quiero solo en el campo donde lo quiero es decir Yo vengo por aquí y digo Eco De momento Esto va a funcionar Pero va a funcionar demasiado Bien voy a decir Val es igual a algo y ese algo va a ser el parámetro get llamado parámetro get vamos a verlo va a ser aquí va a ser parámetro get vamos a verlo parámetro get Ok vale Yo creo que ya lo tenemos recargamos Vale y aquí lo que tenemos es que pues introduce un número tenemos YouTube tenemos lo que sea y en este caso en código de la asignatura tenemos que ir de curso es decir lo que ha hecho el sistema es que si yo le he dicho aquí coge el parámetro get y de curso lo que hace es el parámetro get y de curso es decir busca y de curso y si aquí pongo 54 35 ahí pone 54 35 si aquí pongo no sé otro número ahí pongo otro número cuidado si ahí pongo a c ahí no lo coge vale porque estoy pasando un texto en un campo del cual he dicho que era un campo numérico mucho cuidado con esto vale el tipo de dato tiene que coincidir pero de momento En este caso lo que estoy haciendo vale Es simplemente poner ahí eso lo que estoy haciendo es poner ahí ese dato bien entonces a continuación ya tengo este dato voy a realizar una prueba Vale Voy a realizar una comprobación de si ese dato se está guardando realmente en la base de datos para eso me voy a ir a poner un correo mío voy a poner un vídeo vamos a ver YouTube Vamos a buscar a José Vicente caratal yo que sé José Vicente carratalá este de aquí cojo ese vídeo Lo pongo aquí número de práctica 1 código de la asignatura vemos que ya está Le damos a enviar registro correctamente Y si todo va bien Ahora nos vamos a ir al final vamos a ir a entregas vamos a ver cómo vamos a ver cómo me voy al final y veo cóm vamos a ver vale asignatura cart YouTube watch tengo práctica número uno y tengo por aquí y tengo por aquí que la asignatura es un cero vale esto no me cuadra tanto de momento pero bueno ahora a continuación vamos a ver de momento el campo se está metiendo lo cual pues no es moco de pavo vale pero eh vamos a ver porque este campo no está siendo metido correctamente vale en este caso por tanto lo que voy a hacer porque si lo pongo disabled lo que ocurre es que o sea si lo pongo vamos a ver disabled lo que ocurre es que el parámetro realmente no se envía entonces voy a poner read only vamos a ver read only entonces vengo por aquí vale el parámetro no se puede escribir voy a poner ID curso es igual a 1 2 3 4 5 vale no se puede modificar Y entonces info URL número de práctica le doy a enviar vamos a verlo Vale y ahora nos vamos a la base de datos venimos por aquí y si todo ha ido bien Y si todo ha ido bien pues ahora sí ya tengo la asignatura correctamente introducida dentro de la base de datos lo cual quiere decir que pues bueno ya tengo un campo más y ya tengo una funcionalidad más metida dentro de vale la el formulario Y a partir de aquí por tanto pues ya puedo hacer que Eh Pues bueno se inserten tantos formularios como quiera pero ya digamos respetando la and el parámetro get Y a partir de ahí pues evidentemente puedo meter tantos parámetros get como en un momento dado necesite Por cierto que voy a meter código de asignatura Pues voy a ir a font awesome icons entonces voy a meter Bueno vamos a ver qué encontramos vamos a buscar iconos dentro de iconos vamos a buscar subject Vale entonces matter realmente no es eso pero bueno hay un cerebro Brain Pues mira el icono de cerebro me ha gustado para esto con lo cual lo que voy a hacer es Buscar Fast fa Brain le doy a estructura le doy a modificar a ver y entonces Fast fa Brain copio modifico guardo recargo y ahora pues aparece un Cerebro en ese icono que pues en un momento dado pues me puede venir bien a partir de aquí pues puedo hacer lo que quiera por ejemplo podría ocultar ese campo eh especificando Como te diría yo que el campo al final se guarde quiero decir con esto que yo ahora vengo por aquí voy a decir que visible es igual a false entonces me vengo aquí le doy a cambiar le doy a guardar recargo no es visible pero sin embargo voy a decir y de curso es igual a 4 voy a comprobar que existe vamos a ver campo es igual a este de aquí clave Vale pues ha dejado de existir ver código fuente de la página número de la práctica ha dejado de existir Pues bueno visible lo voy a dejar a true y así de momento que exista aunque se coja automáticamente vale guardo por aquí recargo por aquí código de la asignatura y ya está bien más cosas que puedo hacer eh otra cosa que puedo hacer por ejemplo es aumentar el controlador y en el controlador pues puedo decir por ejemplo en los mensajes Pues aquí pues vamos a ver puedo decir que dónde está aquí si existe parámetro get Pues si parámetro get Bueno pues en ese caso o si es disable Realmente si es deshabilitado Pues en este caso digo si is set este de aquí en ese caso este campo está deshabilitado ya que lo rellena Auto automáticamente el sistema guardo recargo eh cuidado ya que lo rellene automáticamente el sistema vamos a verlo no debería si Ah vale si deshabilitado es igual a true vale Y ahora pues deshabilitado vamos a verlo a ver read only aquí deshabilitado es igual a true cuidado es deshabilitado recargo y ahora sí solo este campo está deshabilitado ya que lo rellena automáticamente el sistema y voy a poner un asterisco y una noticia para que pues las personas sepan Eh bueno que deban digamos atender a ese campo tenemos ya ahora sí este campo más cerrado vale vamos a continuación a extender el programa con otras funcionalidades pues igualmente importantes que nos están esperando algo que tenemos pendiente y siempre es un buen momento para desarrollarlo realmente es la parte de del registro el registro donde se sepa un poco pues qué es lo que está ocurriendo en cualquier momento Vale entonces lo primero que tenemos que hacer y el tema del registro siempre es un tema muy complejo porque la primera discusión cuando hablamos de un registro es dónde debe guardarse ese registro el registro Generalmente ocupa al final Pues no sé el 95 99% de lo que ocupa una base de datos cada cuanto limpiar los registros es otra de las discusiones vale es decir el tema de los registros daría para un debate inacabable eterno yo de momento para un poco hacerlo todo esto un poco más operativo pues lo que voy a hacer es implementar unos registros en una tabla sql y vale a partir de ahí ya más adelante podemos hablar de la idad de hacer esto Entonces yo a partir de aquí eh lo que voy a hacer es me vengo por aquí me voy a desarrollar una nueva tabla voy a crear una nueva tabla llamada registros va a tener un identificador registros va a vamos a verlo va a ser de tipo entero Pues no sé voy a poner 20 caracteres va a ser índice primario va a ser autoincremental registro es una tabla que en principio mantiene el sistema Por tanto pues no hace falta No hace tanta falta meterlo de los comentarios porque no va a estar en un formulario Pero bueno ya veremos si el metemos algo de información siempre estamos a tiempo desde luego ahora lo importante los campos voy a meter apoc voy a meter eh Por aquí voy a meter IP voy a meter navegador browser y voy a meter vamos a ver voy a meter voy a meter un momentín una Quiero una columna más aquí está y voy a meter datos Entonces ap es un número entero que tiene voy a poner 30 caracteres IP pues tiene puntos con lo cual tengo que poner un marchar voy a poner claro podría ser una ipv6 voy a poner 100 caracteres o 200 por si acaso browser es una cadena con un navegador y datos puede ser algo grande voy a AB un text porque no sé los datos que se pueden enviar pueden ser muchos datos y quiero guardarlos así que vengo por aquí creo que ya lo tengo le doy a guardar tengo Ya mi tabla de registros y ahora a continuación una vez que tengo la tabla de pues lo siguiente que quiero es empezar a guardar registros Cómo guardo registros Bueno pues técnicamente el guardador de registros no forma parte del superc controlador es otra cosa superc controlador es para el de control formularios y todo esto pero técnicamente un Guardado de registros que es que cuando alguien entre coge sus datos Y mételos eso ha sido un trueno que lo sepáis ahora cerraré la ventana pero de hecho ha sido un señor trueno Pero la idea es que aunque técnicamente guarda algo en la base de datos pues no voy a meterlo digamos dentro del controlador entonces lo que voy a hacer es Que de momento por aquí voy a crear un nuevo archivo vale me voy a ir aquí voy a ir a file New un file y voy a crearlo y voy a llamar Esto registro.php vale un nombre que en un momento dado luego Perdón aquí registro.php no folder specified no no a ver un moment un segundo tiro para atrás vale Y entonces ahora voy a entrar dentro de click voy a entrar de carsa voy a entrar dentro de proyectos Go into vale Y aquí dentro de entregas aquí dentro voy a crear un nuevo archivo Así que como decía se voy a llamar registro.php clásico y ahora lo que voy a hacer es lo siguiente entonces digo de hecho va a ser un archivo para incluir va a ser un archivo lo más sencillo posible entonces include config.php para traer los datos de configuración de conexión a la base de datos Y ahora voy a hacer algo sencillo como lo siguiente esto es registro me traigo estas tres líneas y digo insert into registros está siempre va a ser igual quito las columnas porque las columnas las voy a meter yo directamente y digo Val coma y ahora digo 1 2 3 y 4 1 2s 3 y 4 ahora qué es el parámetro dos el TR el 4 y el c se me ha olvidado meter una un campo me voy estructura abajo de apoc meto otro campo que es la url Quiero saber qué URL estaba viendo el usuario en el momento en el que se guardó el registro entonces pues es un campo más y un campo más vale Entonces recordemos vamos a verlo tengo el apoc que es date u tengo la URL php get full URL Easy vamos a ver y vamos a ver vale mín vale por si acaso alguien nos intenta meter Esto vale pues voy a esto vamos a verlo esto Me vale bien Vengo por aquí y digo URL es eso de ahí así que voy a la URL sigamos luego Quiero la IP php get IP esto es el clásico Remote address este lo puedo copiar directamente de la descripción de Google vale siguiente Ahora quiero el browser php get browser que es el http agent vamos a ver es el user agent es de ahí y por último los datos Vale entonces y ahora lo que voy a hacer Vamos a ver es lo siguiente voy a el controlador y tenía por aquí un for each Ahí está y digo lo siguiente listado columnas listado valores vale pues aquí en registro voy a hacer lo siguiente digo vamos a ver un momento vale cadena es igual a nada esto nada vale Y ahora digo cadena pongo punto igual nombre campo punto dos puntos punto valor punto por ejemplo barra vertical como un carácter separador y ahora al final después de haber encadenado todo esto lo puedo resumir lo que estoy haciendo es En definitiva atrapar todo lo que venga por ahí de los datos y aquí pongo cadena vamos a ver si ha funcionado vamos a ver si ha funcionado para ver si ha funcionado evidentemente lo primero que hago en el Index es decir que quiero include registro.php no habrán datos creo Supongo ahora lo veremos todavía Vale entonces vengo por aquí vale recargo no ha pasado nada en la pantalla no tiene por qué pasar nada pero ahora me vengo aquí si ha ido bien me dirá que identificador uno el apoc es este de aquí la URL es hogar.com bar tal bar entregas bar con la URL vale la ip es esta de aquí los datos son estos de aquí y no tengo o sea el browser es este de aquí y no tengo ningún dato porque no estoy pasando datos lo cual es normal Ahora vengo por aquí Ah y de curso sí que estoy pasando parámetros sí que deberían haberse guardado los parámetros si ahora retoco por menos y de curso tendría que haberse guardado Así que vale datos nos están pasando luego parece que está todo bien pero vamos a ver qué es lo que ocurre con el tema de los datos entonces vengo por aquí vamos a ver qué pasa con los datos registro y digo cadena es igual a esto entonces cadena punto igual for each Ah post post vale for each request no sé por qué en el controlador estaba como post Ah porque arriba estaba como request Vale ahora sí entonces ahora sí me voy a registro Ok y recargo me voy a registros de nuevo y ahora sí tengo ID curso es igual a esto y Google analytics parece un Google analytics porque técnicamente estoy dentro de jara.com y wordpress settings es igual a lo que sea es decir parece que hay una serie de parámetros de post o parámetros de get que en un momento dado se están cogiendo pero vale me vale puedo otros parámetros tales como por ejemplo los valores de la sesión pero de momento con esto tengo suficiente para haber Atrapado una serie de datos mínimos Y estos datos mínimos en cualquier momento pues me pueden servir para saber qué es lo que ha pasado con el sistema qué es lo que está pasando con el sistema en un momento dado pero como ya digo esto no es algo que me preocupe ahora mismo digamos Esto no es algo que me preocupe en el sentido de que por lo menos quiero empezar a recoger datos quiero asegurarme de que los datos que recojo pues son lo suficientemente correctos vale tengamos en cuenta eso tiene cierto peligro Y es que eh el peligro está en que como te diría yo en cualquier momento alguien puede utilizar un parámetro de URL para intentar meterme algo en la base de datos Entonces no estaría de más que también le pusiera algo de protección a esto y es que si ocurre esto vamos a verlo Pues en el registro antes de hacer nada más Antes siquiera de los datos de la base de datos pues da Vale entonces si yo vengo por aquí y recargo no ha pasado nada pero vamos a verlo como tenengo el registro número cuatro vale Pero si yo pongo aquí Drop intento hacer algo ejecución detenida y veo como al recargar no aparece ese registro vale porque hay alguien que me ha intentado atacar Y si que veo que si me voy al volcado Debería ir o sea debería aquí generic no ahí y veo que pues efectivamente ahí tengo toda la información de pues alguien que me ha intentado digamos atacar vale esto por aquí luego además también quiero me voy a fijémonos que casi ocupa más el código para la mínima protección que el código que en sí guarda el registro Pero bueno es lo que hay se podría meter en un archivo aparte se podría meter un include ya lo veremos si al final lo usan diferentes elementos y ahora al incluir el registro Pues también lo quiero incluir en el controlador en el momento en el que en cuanto se guarde un formulario vale guardas un formulario pues lo quiero o sea quiero que lo registres Vale entonces vengo por aquí no voy a hacer el Drop voy a hacer un 2 3 4 5 hago así y ahora digo info vídeo número uno Esto está bloqueado le doy a enviar y si todo ha ido bien Ahora voy a ir a la base de datos me voy ir a registros y veo como pues Por una parte tenemos por aquí el registro digamos Pero por otra parte También tenemos por aquí todos los campos que se han metido dentro de esa base de datos se veo que cada inserción O sea no solo cargar el formulario sino la propia inserción pues se convierte en un elemento de del registro Y a partir de ahí pues evidentemente puedo ir empezando ya a recoger información que pueda utilizar en el caso de que me interese registrar Qué es lo que ha ocurrido con la plataforma una vez que ya tenemos un sistema de registro dentro de las muchas cosas que podemos hacer en una aplicación empresarial pues una de ellas es enviar correos electrónicos a los usuarios de la aplicación esta función a mí personalmente no me gusta demasiado porque los sistemas de notificación de correo electrónico siempre causan muchos problemas en cuanto a que en el momento en el que sistema de correo de envío de correo electrónico falla y el usuario no es notificado pues el usuario puede decir ah como no se notificado pues miles de cosas depende de para lo que sirva el software entonces claro qué ocurre Pues que el sistema de correo electrónico muchas veces no depende de nosotros depende del servidor donde esté alojada la aplicación entonces claro no me gusta el sistema de correo electrónico porque yo puedo programar todo lo bien que haga falta pero si hay algún problema con el servidor de correo Pues los correos no se van a enviar las notificaciones no se van a enviar y la primera persona la que van a culpar va a ser a mí como desarrollador Vale entonces por eso es por lo que pues bueno tiendo a limitar o tiendo digamos a desaconsejar los sistemas de notificación de correo electrónico Por parte de las aplicaciones pero hay que reconocer que a veces pues tienen su utilidad evidentemente y hay que reconocer que en todo caso pues es necesario aprender a programar ese tipo de sistemas así que tenemos fundamentalmente dos tipos de sistemas que son los sistemas de correo de salida el sistema envía mensajes y los sistemas de correo menos frecuentes todavía de entrada y es que tú le puedes enviar órdenes al sistema mediante correo electrónico No es muy frecuente pero desde luego tiene una utilidad muy grande ya que cualquier usu puede cualquier usuario Con permiso evidentemente puede escribir un correo electrónico al sistema enviarlo y evidentemente escribir un correo electrónico es algo que cualquiera puede hacer incluso desde su teléfono móvil y le puede enviar mensajes al sistema y si están correctamente formateados Pues el sistema los puede eh introducir vale Así que es algo muy interesante no es fácil de configurar pero es algo muy interesante Así que vamos a por ello eh voy a hacer en primer lugar un PE pequeño experimento otra de las razones por cierto es que como diría yo estoy trabajando en un servidor real Más que nada porque en un servidor local en un shamp o en un mamp prácticamente nunca va a salir un correo electrónico hace falta un servidor real para poder probar el sistema de correo electrónico Así que voy a darle a New voy a darle a file voy a enviar voy a crear un archivo llamado envi mail.php de momento voy a hacerlo en este archivo y ahora luego Probablemente lo voy a integrar dentro del controlador Así que vengo por aquí bien Y por cierto que aquí he visto antes procesa formulario vale venga entonces vengo por aquí y ahora digo lo siguiente ahora digo voy a usar una función llamada sendmail de la cual siempre he estado muy enamorado porque el la metodología de Enviar correo en php siempre me ha parecido muy sencilla de hecho cmail es una función integrada en php que luego por dentro lleva una barbaridad de cosas y lo que está haciendo esta función es que nos la simplifica automáticamente O sea que esta función hace mucho más de lo que pensamos y por eso siempre me ha gustado porque es muy sencilla voy a poner php Send mail lo general Generalmente lo que se hace Es como te diría yo eh crear una función que abstrae pero siempre me da pena porque es que la función set mail ya está abstrayendo Vale estoy viendo que bueno tengo esta de aquí en mail y tengo otra que es el sendmail entonces poner s mail funciones de mail vamos a ver vale cuidado por aquí porque había un había por aquí no pues lo he visto antes aquí dice si tienes un test server phpl does not work vale simplemente que lo sepáis Pero bueno vamos a ver sí pero no quiero Sí pero esto Quiero el s mail más básico Vale pues voy a este Bien voy a el mail Vale y simplemente voy a escribir esto aquí mail y digo Tú Vale pues Tú es info @ José viicente carratala comom Vale subject es este es el asunto del mensaje message Este es el mensaje el cuerpo del mensaje Okay Vale ahora additional headers esta es la cuestión en additional headers pongo php mail headers html Entonces vamos a ver por aquí los típicos parámetros mail cabeceras este es este de aquí vale entonces yo digo cabeceras es este de aquí from pues info @ hocar comom reply toino @ hocar comom vale Pero no estas no son las que quiero Estas son las cabeceras que quiero para esto sí vale entonces cabeceras punto igual lo que estoy haciendo es introducir Pues todos los headers las cabeceras para poder enviar correo electrónico Así que cabeceras okay y el último parámetro me lo voy a saltar porque no lo quiero no quiero parámetros adicionales esto punto y coma pongo un poco de sangría Y si todo ha ido bien y yo creo que sí si todo ha ido bien Vamos a verlo okay vale si todo ido bien Yo vengo por aquí y le digo que quiero ir a proyectos quiero ejecutar envi mail.php vale No sale nada en la pantalla porque no tiene por qu salir nada en la pantalla y ahora lo que voy a hacer es Abrir mi correo electrónico y comprobar si no ha habido ningún error pues si he recibido ese correo electrónico Entonces si todo ha ido bien pues como digo ahora me abro mi correo electrónico y digo eh Este es el asunto del mensaje enviado por info @ jarsa Este es el cuerpo del mensaje con lo cual veo que vale acabo de enviar un correo electrónico es así de sencillo en teoría y en la práctica pero luego la cosa se puede complicar un poquito más como ahora veremos otra cosa que puedo hacer es que este es el cuerpo del mensaje entonces pongo h1 título y p es muy importante IP envío el correo recupero el correo vamos a verlo y vamos a ver si tengo un correo electrónico nuevo que debe ser que sí vamos a ver aquí está Vale y si todo ha ido bien Vamos a verlo vemos aquí como tengo un título formateado con uno y tengo Pues un texto de párrafo que en un momento dado pues como podemos ver eh nos está mostrando el texto que he marcado esto qué es lo que quiere decir pues lo que quiere decir es que no solo mis aplicaciones pueden enviar un correo electrónico sino que lo que puede ocurrir es que Eh Pues el correo electrónico esté correctamente formateado qué es lo que quiero ahora Bueno pues lo que quiero ahora es que O sea quiero utilizar este sistema de correo electrónico para que cuando alguien envíe un formulario a ese alguien se le envíe una notificación y se le diga Oye has subido un formulario has subido un elemento o sea se te notifica tienes un comprobante En definitiva de que has subido correctamente ese formulario y así la persona que lo rellena pues generalmente se queda tranquila en el sentido de que pues lo ha recibido correctamente además evidentemente tenemos que formatear este correo electrónico para que sirva para cualquier tabla es decir ahora mismo estamos trabajando con cómo te diría yo con un correo particular pero ahora lo que voy a hacer es programar esto para que sirva para cualquier tipo de formulario bien pues ahora vamos a ver porque me voy al superc controlador o me voy al controlador En definitiva Vale tengo por aquí el procesa formulario eh procesa formulario se me acaba de cerrar tana creo esto no suele pasar esto no es nada común el procesa formulario en principio Pues bueno yo lo quería utilizar para que me procesara también un formulario enviado desde el propio panel de control cuando hagamos el panel de control entonces claro evidentemente como podemos imaginar vamos a cargar ahí la página correcta Pues bueno lo que quería decir es que no quiero que lo inserte en cualquier eventualidad Pero bueno pero de momento sí que va a ser así que vamos a ver Go into vale Vamos allá así que entregas así que me voy al controlador y aquí en el controlador vamos a verlo en el procesa formulario Pues bueno pues vamos a hacer esto realmente vale vamos a hacer que lo que ocurra En definitiva Es que voy a enviar un correo electrónico vamos a verlo y a ver voy a asegurarme que todo se envíe correctamente y entonces yo digo Y entonces yo digo a ver volcado Ah muy bien perfecto post mm vale porque en principio todo viene por post lo cual es bien lo cual vale Y entonces yo ahora digo lo siguiente vamos a ver me voy a envíar mail entonces vengo por aquí pego Aquí voy a hacer un separador para establecer lo que es el correo electrónico lo que no lo es recordemos que estoy dentro de una clase con lo cual hacer un include no es tan bonito en este caso y voy a decir lo siguiente vamos a ver charset input mail de momento a este usuario lo ideal sería si hay un campo llamado correo electrónico decirle Mira coge coga el correo electrónico Así que post email vamos a verlo vale Este es el asunto del mensaje pues formulario enviado por ejemplo de momento y ahora vengo aquí y digo mensaje es igual a de momento nada y ahora digo for Lo pongo aquí y digo mensaje punto igual y digo se ha has enviado un formulario a la qué al sistema de entregas luego ya veremos a ver qué título le ponemos Pero bueno Esto es no reply @ qué @ jocar.com.mx vale esto es dos puntos negrita eh valor punto negrita br vamos a verlo aquí pongo un br eh aquí pongo un punto y coma y aquí pongo el mensaje así que si todo ha ido bien que no lo sé pero ahora lo vamos a ver Ok Okay Vale vamos a probarlo Así que introduzco URL número de práctica no se puede tocar vale en principio de momento estamos ahí Vale y ahora nos vamos al correo electrónico a ver Esto es la base de datos voy a cerrar por aquí cosas ya no sé dónde tengo el correo electrónico aquí vale vamos a comprobar si tengo un correo electrónico y comprobamos ha funcionado la primera lo cual ha sido extraño pero bueno y básicamente nos dice Esto vale básicamente nos dice Ah asignatura creo que no había enviado email @ lo que sea URL @ lo que sea práctica @ lo que sea asignatura igual a lo que sea Vale y aparece digamos el Eh Pues eso el vídeo y ya pues aquí se puede pinchar y se puede ver y se puede lo que sea Vale entonces con esto En definitiva pues acabamos de programar un sistema de pues envío digamos de notificación al usuario de que realmente ha enviado algo con lo cual pues Vale ningún problema desde ese punto de vista ahora tenemos ya este sistema funcionando pues por ejemplo se podría formatear un poquito vale para que la primera letra Pues apareciera en mayúsculas que eso desde el punto de vista del programador no tiene ningún ninguna función pero desde el punto de vista del usuario Pues sí que vale Sí que tiene algo entonces eh lo que voy a hacer Pues en este caso va a ser vamos a ver pues Buscar el clásico php First letter apper así que bueno veo que hay al por aquí alguna función uws no uc First Sí así que a ver le he dado vale u First entonces vengo por aquí voy a decirle que nombre de campo y bueno y puedo poner Pues algún comprobante vale algo así como vamos una p a continuación te mostramos un comprobante del formulario o de los campos que has enviado al formulario br desde el formulario vamos a probarlo voy a decir ID de curso es igual a 1 2 3 4 5 correo maesto número un código de asignatura vamos a ver Okay me voy al correo electrónico en el correo electrónico pues veo cómo se recibe correctamente el ID de asignatura así que pues bueno ya lo tenemos por aquí y eh por lo demás pues como vemos estamos recogiendo Esto no sirve solo para el sistema de formularios Pero bueno algo es algo no está mal de momento pero por lo menos le permite al usuario eh conocer Cuál es la entrega que ha realizado al sistema lo cual pues evidentemente ya es un principio podemos extender este sistema todavía más diciéndole al usuario Bueno ahora te voy a decir qué es lo que digamos cómo te diría yo Ah Qué es O sea qué es lo que has entregado por ejemplo yo ahora podría ponerle por aquí un enlace como para ver las entregas que has hecho en el sistema pincha aquí y vas a tener un informe cuidado porque en ese momento le estamos dando acceso al usuario al sistema Pero bueno si tomamos una serie de medidas de seguridad pues Probablemente lo vamos a poder hacer sin demasiado problema pero siempre evidentemente teniendo bastante cuidado Bueno pues si ya tenemos un formulario con el cual los usuarios pueden meter información en el sistema ahora lo que voy a hacer es crear un informe mediante el cual los usuarios pueden obtener información del sistema siempre evidentemente teniendo mucho cuidado con el aspecto de la seguridad Así que para ello lo que voy a hacer en este caso es que voy a crear un archivo nuevo lo voy a llamar informe php y dentro de informe lo primero que voy a hacer Es que voy a incluir eh configuración php vale Y una vez que he incluido configuración php Pues a continuación lo que quiero es realizar vamos a ver Ah Index Quiero realizar una petición o controlador por ejemplo Entonces vamos a ver vale My sqli Ok resultado y While Así que vengo por aquí pongo esto y ahora lo que quiero hacer es Eh quiero Select all from entregas Where Dónde está la base de datos aquí sí pero no sé dónde estaba la base de datos pero ahí va a ser que no vale vamos a ver un momento que me ha caducado la sesión Así que quiero este quiero base de datos quiero esta vale quiero esto muy bien y en entregas en la estructura Quiero el email vale email es igual a voy a decir info de momento estático info @josé carratala comom Así que si todo va bien tengo aquí un error no sé dónde está el error y el error es me falta aquí una doble comilla voy a decir eco fila y en fila digo por ejemplo la URL por ejemplo entonces fila URL encadena voy a ejecutarlo en plan rápido y sencillo esto por aquí Esto vale esto por aquí Ahora me voy a informe punto php bien y aparecen eh aparece todo aquello que yo he subido Así que en principio de momento bien hasta ahora hasta el momento bien Ahora lo que voy a hacer Es que voy a venir por aquí voy a decir Bueno e pues YouTube voy a un vídeo cualquiera voy a un vídeo lo que sé vale Y quiero insertar Este vídeo Quiero compartir a ver para Quiero compartir quiero insertar y me cojo este código Así que vengo por aquí y digo eco pego al código y claro Ahora evidentemente aquí en lugar de este bloque voy a meter cuidado aquí no en lugar de este bloque voy a meter el fila URL corto pego pongo el br recargo no sé dónde aquí y entonces si todo va bien pues vemos los vídeos que he introducido Vamos a darle aquí a Play vamos a ver Ah un error vale quizás he metido demasiados no lo sé a ver momento voy a inspeccionar a ver si no he copiado el código correctamente si no le digo ver código fuente de la página Drop title acelerómetro y a wow vale Sí watch un momento esto Qué es vale claro le digo la URL y en la URL vamos a poner esto aquí fila URL la fila URL pues me aparece vamos a verlo la URL completa Entonces de esa url iamente lo que quiero quedarme es con el parámetro de del código Así que vamos a ver php get URL parameter from String a ver si alguien tiene ya una función hecha parse URL pues este de aquí Entonces esto de aquí digo Parts es esto de aquí vale par query y query email pues query quiero el parámetro v pues mi parte es igual a esto de aquí Así que aquí pongo mi parte y si todo va bien desbloqueo esto recargo Y si todo va bien Vamos a verlo No lo sé en ve no en principio no lo que voy a hacer es voy hacer eco mi parte a ver qué pasa eco mi parte recargo vale no está sacando nada mi parte es query V entonces strings en query vale voy a hacer un bardom de query un momento vale Ya está claro vale Y lo que ocurre es que en la URL realmente la url es fila URL Dónde está la base de datos es fila URL vale me vengo aquí ahora sí Ahora ya tengo los códigos y por tanto ya puedo hacer así ya puedo desbloquear mi parte bien recargo Y si todo va bien los primeros van a aparecer en negro pero a partir de ahí los siguientes en principio los siguientes van a aparecer correctamente title falta Yo creo que me he comido falta una comilla se ve que me he comido una comilla en el proceso recargo y ahora si todo va bien pues ya empiezan a aparecer por ahí pues entrevista curso José Vicente lo que se vale muy bien Aparte de que ahora a continuación pues puedo hacerlo más pequeño por supuesto vale bien entonces ahora digo pues el Wi es de 300 Por ejemplo el H es de 200 y ahora quiero meter más cosas quiero por ejemplo meter esto dentro de una tabla Así que yo digo h1 entregas para José Vicente bien Vengo por aquí digo Table y digo TR th Y qué es lo que quiero meter pues quiero meter el la URL quiero meter pues la práctica quiero meter bueno la asignatura realmente la práctica y quiero meter la fecha muy importante y quiero meter el vídeo vale vamos a comprobarlo Cómo recargamos y entregas para José Vicente y en la parte de ahí debería aparecer e Qué raro qué extraño Ah una tabla Y eso es que aparece al final vale perfecto sin problema Entonces ahora vengo por aquí y digo Bueno pues ahora quiero eco TR Ahora quiero eco TD quiero eco un cierre de TD y ahora digo Quiero un TD de una columna y engancho con fila y hemos dicho que lo primero que quiero es la asignatura no la URL luego Quiero la asignatura luego Quiero la práctica y luego Quiero la fecha apoc y luego quiero el vídeo esto Aquí voy a poner fecha ya que el usuario final no entenderá lo de apoc Y por último aquí va un punto y coma Y por último Aquí voy a poner un TR para cerrar la fila Y por último Aquí voy a poner un table para cerrar la tabla así que veng por aquí recargo Y si todo ha ido bien pues vamos a ver cómo tengo una tabla que me dice pues todas las entregas que yo he realizado hasta el momento Vale hasta ahora bien perfecto fenomenal y aquí podemos ver Pues todos los vídeos que ha entregado pues una persona concreta tengo ya un listado esto ha sido sencillo pero claro este listado es de un usuario fijo y ahora lo que quiero es que el listado sirva para cualquier usuario Bueno pues a continuación lo que voy a hacer es Eh bueno especificar que lo quiero todo como una variable Así que yo puedo venir por aquí y decir Bueno pues quiero php eco get email bien quiero get email esto evidentemente requiere que yo aquí ponga email es igual a info @ José viicente carratala comom y yo ahora lo que voy a hacer aquí en la petición es decirle que Quiero obtener todas las prácticas de info @josé carratala comom entonces si no pongo nada o si pongo un email incorrecto Pues no va a haber ninguna práctica y si pongo un mail correcto pues van a aparecer las entregas de esa persona pero claro Hay un problema y el problema que hay Es que este sistema digamos que es un poco inseguro desde el punto de vista en el cual como diría yo cualquier persona puede poner aquí Cualquier email y puede obtener digamos cualquier listado de prácticas de cualquier otra persona y eso pues evidentemente no es muy seguro de hecho voy a en lugar de poner email voy a poner clave vamos a empezar un poco a esconder la información y entonces ahora voy a poner aquí clave Así que vengo por aquí y ahora lo que quiero es codificar esta información Quiero realizar una codificación para esconder esa clave y para que En definitiva Pues nadie me la pueda at apar Así que para ello vamos a crear un codificador voy a crear un nuevo archivo llamado codificador php y ahora en este codificador vamos a empezar a crear un codificador personalizado Así que yo vengo por aquí y voy a crear pues vamos a ver digo cadena es igual a José Vicente hay una forma de encadenar que es la siguiente codificado es igual a base 64 en code de eh cadena y entonces yo puedo poner eco codificado vamos a verlo Esto va a ser ahora luego volveremos a informe esto es codificador php y aparece esto que tenemos ahí Eso no es muy seguro desde el punto de vista en el que pues alguien nos puede ese base 64 y tal y como yo lo he codificado se puede descodificar es muy sencillo algo que se puede hacer es lo siguiente yo digo 1 2 3 4 5 6 7 y ahora 1 2 3 4 5 6 7 guardo recargo y sale una cadena y claro esa cadena ya es un poquito más fácil de perdón un poquito más difícil de descodificar no es imposible pero se puede descodificar digamos el que se ponga a descodificar la pues tendría que averiguar que la he codificado siete veces Vale entonces a partir de ahí por ejemplo yo lo que voy a hacer es eh Cómo diría yo lo que voy a hacer es insertar otra otro tipo de oscuridad digamos que es cambiar los caracteres entonces php par String by y entonces pues vamos a ver bueno puedo hacer lo siguiente puedo decir que for y es igual a Y es menor que count cadena y más y ahora digo cadena de I porque realmente un String es una un String es una colección de caracteres le digo vamos a ver php get char code from charr vale quiero no el ord quiero ord de cadena y entonces quiero cadena de I es igual a esto más 1 y ahora chr de esto de aquí Qué ha hecho esto tan extraño Pues si ahora eco cadena voy a poner un eco br simplemente para que se vea bien en pantalla lo que veremos Es que tengo José Vicente H j k vale me ha subido la k vamos a ver porque yo lo que quiero vale php get vamos a verlo str len Así que recargo y ef José Vicente ef vamos a ver y más cadena de a cadena de dó I vale Bueno pues es la que viene a continuación de la esto de la J la p es la que viene a continuación de la O la t es la que viene a continuación de la s lo que ha hecho el sistema es subir un carácter vale subir una letra entonces Eh Esto digamos lo puedo hacer Tantas veces como quiera es decir puedo codificar esta cadena y de hecho el base 64 vemos Que ha cambiado vale vemos que se ha modificado Entonces yo ahora por ejemplo pues puedo decir que esto es una función voy a convertirlo en una función entonces function sub carácter es igual sub carácter de una cadena es igual a esto de aquí y ahora return cadena y entonces yo ahora vengo y digo sube carácter eco sub carácter de cadena y el resultado en principio tiene que ser el mismo vale Así que ahora vengo por aquí Así que ahora vengo por aquí y digo Bueno pues si he creado un sub carácter voy a crear un baja carácter para luego descodificar Y esto es -1 Entonces eso quiere decir que y ahora digo B 64 en code sub carácter base 64 en code sub caráter lo que estoy haciendo como vemos es alternar estoy diciendo codifica Sube codifica y solo yo sé cuántas veces estoy realizando esa operación así que pues vemos que por aquí a aparece pues una cadena y esa cadena Vete a saber lo que tiene Así que ahora lo que voy a hacer es codificar entonces para codificar vamos a verlo momento vale voy a decir function codifica cadena es esto de aquí Así que ahora digo eco codifica José Vicente y lo que ocurre es vamos a ver un momentín eco codifica cadena Ah sí y return codificado así que vengo por aquí vale Y tengo esta cadena de aquí pero ahora lo que quiero es comprobar si esto que he hecho es real si esto que hecho está bien y lo voy a comprobar descodificando es decir si he descodifica si he hecho esto descodificado y esto Debería ser decode esto es baja carácter y vamos a ver en encode baja carácter y entonces digo original es igual a José Vicente Vale entonces codificado es igual a codifica José Vicente eco el codificado es punto codificado si le ponemos un br en cada línea mejor ya ahora digo eco el original es punto original Esto es una prueba estoy haciendo una prueba vale vamos a comprobarlo me dice el original es José Vicente El codificado es este de aquí Entonces ahora voy a decir descodificado es igual a descodifica el codificado Y entonces aparte de meter un ec vr digo el descodificado y que haya suerte es descodificado si todo ha ido bien Esperemos que sí y ha ido bien a la primera esto es mucha casualidad Pero bueno el original es José Vicente El codificado es este de aquí pero el descodificado es José Vicente entonces comprobamos que tenemos un algoritmo en el cual podemos esconder digamos bastante la información Siempre se puede mejorar por supuesto Pero podemos esconder la información de tal forma que luego nosotros tenemos el algoritmo de descodificación tenemos el algoritmo Para volver a obtener la información que sea necesaria a partir de ese código que tenemos en pantalla Bueno pues ahora lo que vamos a hacer es lo siguiente lo que vamos a hacer es primer lugar bueno vamos a el codificado vamos a decir que el original es momento infoar Mira incluso voy a eliminar todo esto voy a mutear por si acaso más adelante me hace falta para hacer algún tipo de debug y ahora dentro de lo que es el informe voy a decir que solo quiero ver aquellos en los que el email sea igual a Vale pues php include y quiero incluir codificador pun php entonces vengo por aquí y digo eco no me acuerdo eco descodifica la clave y además evidentemente lo que voy a hacer es decir que descodifica la clave pero claro Cuál es mi clave Pues no lo sé realmente la tengo aquí pero y bueno y de hecho esa tampoco es porque es la clave de José Vicente pero yo quiero la clave de info @josé viicente catala.com pues aparte de que podría hacerme un pequeño programita para calcularla eso está claro pero lo que no quiero esto lo que voy a hacer es que en el controlador le digo que quiero vamos a ver include Bueno voy a meterlo en el dónde estás en el Index entonces include codificador php Y entonces Yo vengo por aquí y en el controlador vamos a ver mensaje nombre campo for has enviado vale Y ahora digo mensaje punto igual br y digo puedes un parágrafo cierro parágrafo puedes consultar tus entregas previamente realizadas en dos puntos br copio pego y hago así y un segundo Vale y digo a href dos puntos a y engancho con qué con h no https do bar jocar.com.mx o https do bar jocar.com.mx momento el post email aquí si todo ha ido bien y yo creo que sí pero no lo estoy seguro vengo por aquí pongo esto le digo que la el curso es este mi correo mi URL práctica número uno envío y como digo si todo ha ido bien y he acertado la primera cosa que sería un poco rara pero vamos a probarlo vale No reply vale Y dice puedes consultar t consultas previamente realizadas aquí esto es porque lo he puesto en cada campo está mal pero voy a hacer clic aquí e entregas no esto es entregas no esto es informe php y clave es igual a eso luego aparte esto no va aquí sino que va fuera de esa entrega vale Vamos allá así que ID curso es igual a esto info URL número de práctica le doy a enviar vale y ahora me voy al correo no sé dónde está el correo esto fuera aquí vale voy a abrir ese correo y si todo ha ido bien si todo ha ido bien dice Bueno a continuación mostramos un comante de los campos que el formulario emil práctica asignatura puedes consultar tus entregas previamente realizadas haciendo clic aquí y si todo va bien pues vemos como aquí aparece una clave de la cual nosotros conocemos la entrega digamos conocemos cuál es la descodificación y aquí tenemos pues cada una de las entregas que hemos realizado vale Así que la idea es que de ahí de esa clave sale info @josé viicente carratala comom pero en principio podíamos pensar que nadie puede conocer la clave y eso quiere decir que solo el usuario para ver su propia clave evidentemente lo que podemos hacer lo que podemos hacer es introducir aquí Pues un mensajito vale un mensajito que diga mensaje punto gu p Style es igual a color do. red p y pongo importante este enlace contiene una clave con tu usuario con tu correo con tu identificación no compartas este correo electrónico con nadie algo así y de esta forma parece que me he olvidado de poner un punto y comas y de esta forma si ahora vengo y ID curso info URL número le doy a enviar y como le he dicho al código que quiero que el formulario soporte html Vamos a darle aquí a mostrar pues veremos que puedes consultar importante este enlace contiene una clave con tu identificación no compartas este correo electrónico con nadie y vemos como ahora cualquier persona va a poder digamos recibir su propio correo electrónico a ver un momento eh a pbr Vale pues bueno voy a quitar este br voy a ponerlo aquí y así pues no habrá tanta distancia Pero la idea es que a partir de ahora pues cualquier persona que está enviando al formulario está recibiendo un formulario de vuelta donde aparece un comprobante aparece la URL aparece el vídeo Pero además puede hacer clic aquí y puede ver todos los vídeos que ha ido enviando pues para comprobar digamos Cuál es su eh su historial de entregas Bueno pues eh vamos a finalizar por lo menos un poquito ese formulario final vamos a ver y vamos a pinchar en ese formulario que teníamos hace un momento que es el formulario donde aparecen las prácticas y bueno simplemente le quiero poner un poquito de estilo Porque ahora mismo tiene cero de estilo tiene No tiene nada de estilo absolutamente quiero hacer algo muy sencillo realmente Entonces voy a ir a informe y dentro de informe vamos a verlo Bien dentro de informe vamos a poner un poquito de estilo primero vamos a crear un documento html válido que de hecho doc type html eh html Por aquí un Head por aquí un Body por aquí dentro del Head un Pues bueno un Style y ahora todo esto de aquí estas dos etiquetas las paso al final y ahora simplemente pues lo que voy a hacer en el sty es decir que el body va a tener un background rgb de 220220 220 un font family de sans ser algo sencillo en el Table voy a decir que va a tener un with de Pues no sé 800 píxeles un margin auto un eh background White y un Box Shadow de cer píxeles 10 píxeles 20 píxeles rgba de 0.4 por ejemplo y con esto lo que ocurrirá es que pues vemos como esto se estiliza un poquito más eh vemos que la URL Por cierto Debería ser una URL Bueno ahora vamos a ello parece que sean pequeños esos 800 píxeles voy a poner 100 vamos a poner un padding de Pues no sé 30 píxeles o algo así vale algo así Algo que se vea mejor algo que se vea más rápidamente vamos a también la URL para decir que esto es un a href a y en el hf le vamos a poner la URL Y así pues esto de aquí son urls Vale y bueno y ya está vamos a ver y bueno y ahora evidentemente le decimos que el h1 es text align Center y bueno como digo le podemos dar un poco más de estilo evidentemente Pero bueno lo importante es que pues lo veamos correctamente en pantalla que veamos que cada práctica tiene como podemos ver ahí su enlace Y a partir de aquí pues bueno podemos sacar como podemos ver o bien el enlace para ver el vídeo o bien podemos ver el vídeo directamente aquí y podemos ver en YouTube o desde aquí lo podemos ver directamente En definitiva es un visor de documentos en este proyecto son vídeos insertados incrustados de YouTube pueden ser pdfs pueden ser xmls pueden ser realmente cualquier cosa que queramos que sean Bueno pues seguimos configurando esa misma información para el resto de campos de la tabla vamos a estamos con vamos a ver vale tenemos ahora el nombre así que vamos aquí eso es copiamos y vale nombre propio del usuario introduce el nombre propio de la persona sobre la cual estás trabajando introduce un nombre de persona y esto por ejemplo pues voy a poner aquí text y en font aome icons voy a poner no creo que haya un icono para un nombre ahora mismo no sé cuál sería Pero bueno vamos a buscar igual hay sorpresas nombre no name así que bueno pues name voy a este que es signature entonces Fast fa Fast signature vale esto es el nombre estos son los apellidos del usuario introduce el apellido o los apellidos del usuario sobre el cual estamos trabajando introduce uno o varios apellidos de personas vale podemos mantener el mismo icono y vamos a ver a continuación que tenemos email este es fácil vamos a copiar vale correo electrónico del usuario introduce el correo electrónico correcto del usuario de la plataforma vamos a ver correo electrónico correctamente formateado aquí buscamos email aunque se va a ser fácil bien Y entonces F envelope Square y tipo de dato es email Y por último el nivel voy a poner Level a ver qué sale Level Mira bueno capas vale Este me vale Y entonces nivel de usuario dentro de la plataforma introduce el nivel del usuario dentro de la plataforma actual especifica un nivel de la siguiente lista y voy a poner aquí layer Group esto de momento voy a poner text ahora luego veremos Así que ahora ya puedo venir aquí y en el nombre cambio el nombre copio y pego me voy a los apellidos copio y pego me voy al correo electrónico copio y pego y me voy al nivel de usuario copio y pego esto que estoy haciendo puede parecer un rollo pero lo cierto es que hay que hacerlo la primera vez y luego ya se queda hecho para siempre vale con lo cual pues se queda hecho digamos siempre dentro de esta misma aplicación Así que esto me voy a admin pongo jarsa vale me voy a usuarios voy a Añadir un nuevo usuario y fijémonos ya tengo por aquí pues el usuario Bueno me falta el nivel de usuario que al final creo que no sé qué icono le he puesto a latter Group es layer Group así que bueno vamos a cambiar vamos a pegar recargamos ahí tenemos las layers A falta de formatear esto lo cierto es que pues ya tenemos un campo un formulario bastante agradable el estilo de momento todavía no cuadra mucho pero no pasa nada ahora tocamos el estilo dentro de pero como ya digo para mí Lo importante es pues que hemos reutilizado gran parte del esfuerzo que habíamos hecho anteriormente para tener en este caso un formulario de actualización Así que estoy entrando ahora una vez que hemos trabajado un poco en el código en la base de datos quería decir estoy entrando ahora en la programación vale vamos a ver entonces me voy a entregas me voy a admin me voy a Index bien y voy a decir que contiene contenido Quiero un background White Así que recargo ahí y qué pasa aquí vamos a ver contiene contenido Por qué y vale tiene contenido voy a decirle h 100% y en el formulario voy a quitar un Box Shadow Así que guardo recargo Y así pues el formulario lo tenemos más digamos integrado en la plataforma una vez que tenemos los usuarios Bueno ahora lo que tengo que hacer es comprobar qué es lo que ocurre cuando le do al botón de enviar Bueno pues cuándo le doy al botón de enviar vamos a verlo me abro el controlador y al abrir el controlador vamos a ver insertar Aquí está botón submit y hidden clave procesa formulario Vale pues voy a decir clave insertar o procesa insertar Entonces ahora a continuación me vengo por aquí me voy a Index realmente es aquí dentro y le digo Sí aquí sí y set post clave en ese caso o Perdón no no si clave es igual a procesa insertar en ese caso mi formulario procesa insertar y procesa insertar vamos a verlo ahora mismo no existe será vamos a ver aquí y procesa insertar será esto que tenemos aquí procesa formulario vengo aquí abajo le digo procesa a insertar analizamos lo que viene esto probablemente más adelante al refactorizar lo sacaré a una librería común include no quiero correo electrónico no voy a enviar correo electrónico en este caso inserto en la tabla y vamos allá Esto me lo salto Esto me lo salto y yo creo que ya vamos a ver y ahora en el controlador de insertar le digo tabla es igual a tabla para qué pues para que cuando procese de paso vuelva a la tabla original esto qué quiere decir esto quiere decir que nombre de usuario a contraseña a nombre de la persona apellidos correo electrónico nivel le doy a enviar y si todo ha funcionado bien vale intento de acceso denegado eso ha sido curioso vamos a ver usuarios vale Y ahora Aunque ha dado ese intento de acceso denegado tendría que ver por qué pero claro usuario Ahí está Vale entonces le doy a guardar y simplemente pues lo que ocurre es que ya tengo voy a darle a No ya tengo un segundo usuario esto qué quiere decir pues que ahora puedo hacer lo mismo con cada una de las tablas Eso quiere decir que ahora pues puedo insertar en cada una de las tablas que me voy a poder encontrar tengo que solucionar ese error inicial donde Pues nos dice que el acceso ha sido denegado y ya está y no hay ningún problema Entonces vamos a ver Okay Vale y voy a hacer es aquí en el index vamos a ver si viene post y además no is set session usuario entonces vale Vamos allá vamos a verlo voy a crear un nuevo usuario es el usuario fffff fff un correo electrónico un nivel le doy a enviar vale recargamos Vale y ahí está el usuario ccc bien bueno qué es lo que está ocurriendo lo que está ocurriendo es que primero muestra la tabla y luego inserta entonces lo que podría hacer es algo tan sencillo como pues primero insertar y luego leer No sé si le dará tiempo por la velocidad pero vamos a verlo si no introduzco un pequeño slip no me gusta introducir slips pero si hace falta ddb para darle un poco de ventaja ddd un correo un nivel enviar y s en este caso parece que el slip funciona o sea Perdón la inserción funciona sin necesidad de hacer ningún slip así que ya tengo esto Vamos a continuar con las operaciones de actualización y de edición bien la operación de eliminación es sencilla no sé hasta qué punto Pues bueno requerirá o no e el uso del controlador ya que estamos vamos a utilizarlo pero como digo es muy sencilla eso sí lo que necesito es que se pase elid con el cual estoy trabajando Entonces lo que porque ahora mismo vemos Que si lo voy eliminar pues vemos que no tiene ninguna idea asociado entonces Yo vengo por aquí y digo vamos a ver cada vez que en el controlador listo Dónde están los listados vamos a buscar los listados es aquí vale ahre Y operación no cómo lo hemos llamado en create vale Venga pues en delete es igual a pues vamos a ver fila Y qué fila tenemos fecha shoc bueno fila identificador yo diría aunque con esto nos comprometemos a que el primer campo siempre se llame identificador cosa que no me hace especial gracia Pero bueno venga pero podremos sobrevivir y ahora hago así actualizar ad delete update y identificador vamos a ver si esto es cierto hago así y veo como update un update Bueno creo que lo hecho al revés lo he hecho al revés lo he hecho al revés esto es update Y esto es delete así que vuelvo recargo Y esto es recargo esto es delete 1 delete 2 delete 3 vale pincho aquí en delete no aparece nada Y entonces yo lo que voy a hacer es decirle al sistema que si por lo que fuera si por lo que sea está puesto el delit en el Index vamos a verlo Pues si vamos a ver si get create momento Vale pues si set delete en ese caso esto por aquí y le voy a decir delete con qué pues con get delete vale con get delete Y en este caso hay que tener en cuenta que eh Bueno estoy pasando delete pero no le estoy pasando el nombre de la tabla Entonces vamos a ver porque entonces Yo le diría Aquí vamos a ver Yo le diría ahora en cuanto lo encuentre yo le dira tabla es igual a tabla Entonces vamos a ver vamos a comprobarlo recargamos y digo tabl es igual a usuarios delete es igual a lo que sea vale pincho no hay delete no pasa nada no hay ningún problema Entonces yo ahora vengo y aquí vale Y un segundo y delete get tabla Así que pongo aquí dos parámetros y en el controlador Pues aquí donde pone procesa lo que sea voy a decirle procesa delite copio procesa delit proces delit quién lo llama delete vale delete es tabla coma identificador todo esto realmente no hace falta vamos a dejarlo porque siempre está bien y ahora config listado de valores no esto no y le digo delete from delete tabla we identificador otra vez nos estamos comprometiendo es igual a aquí pues a identificador si todo ha ido bien si todo ha ido bien Espero no cargarme nada voy a asegurarme de una cosa un momento mysql delete sample delete tal frontal vale Ok Venga pues me voy a usuarios selecciono el D le digo quitar ejecución detenida Ah vale claro es que en la ejecución delite es una palabra prohibida HM bien cierto pues en este caso voy a quitar esta protección porque soy yo el que está eliminando hay que fastidiarse me voy a usuarios hago así ejecución detenida quién la está deteniendo quién la está deteniendo ah Claro no está claro quién la está deteniendo tabla es leer no sé quién está leyendo la tabla por procesa formulario voy a identificar quién está teniendo la ejecución vale recargo y yo creo que la está deteniendo el propio registro config controlador es curioso ejecución detenida vamos a ver es curioso ejecución detenida quién la está deteniendo registro Ah okay por el registro vale Venga pues de momento voy a quitar esto de momento vale para poder trabajar y ahora luego veremos Cómo podemos activar de nuevo eso Entonces me estaba cargando el D vamos a verlo me cargo el D no me estoy cargando el D vale Este es el número cco entonces me voy al controlador me voy a delite vale delete identificador es igual a est ec consulta vamos a ver delete usuarios identificador es igual a 5 voy a probar la consulta delete creo que es from usuarios sql delete sample y creo que es from usuarios delete from es eso es ahí está el error vamos a ejecutarlo de nuevo ahora sí me cargo este usuario correcto vale Ya tengo crear ya tengo listar ya tengo eliminar nos queda actualizar vamos a por actualizar el proceso de actualización técnicamente es sencillo dentro de lo que cabe en el sentido de que eh Ya tenemos el formulario de creación entonces me voy a ir a vamos a ver Me voy a ir a insertar voy a duplicar insertar y procesa insertar esto es actualizar y procesa actualizar bien actualizar es tabla coma identificador vamos a comprobarlo es tabla usuarios update es igual a 3 Entonces ahora a continuación en el Index llamo y digo If set update en ese caso update es update Y sí en ese caso a ver un momento no controlador actualizar pues vamos a poner update y procesa update Así que update mi formulario update get tabla get qué pues get identificador creo update Bueno pues entonces ahora lo que vamos a hacer lo que vamos a ver es como en el controlador si yo cojo update simplemente por ejemplo vengo aquí hago así y me aparece el formulario ahora veremos que para meter el formulario tengo que decir que quiero también este formulario o sea quiero también Este marcaje vale Eh bueno ahora veremos esto ahora veremos que no quiero esto pero esto es un poco lo de menos pero ahora Lo importante es que si yo he cogido el usuario 3 quiero este formulario pero quiero que el formulario se rellene directamente con los valores del usuario 3 entonces Esta es un poco Bueno nos hemos ahorrado de momento un montón de trabajo pero ahora me voy al controlador y en el controlador aquí en update cada vez que yo vengo aquí al valiu el valiu digamos ya no vale porque lo que tengo que hacer es Buscar pues ese valor vamos a verlo Entonces vamos a ver ahora digo me conecto a la base de datos y Busco el valor y entonces vengo aquí y digo a ver consulta 2s es igual a Select all from tabla we identificador es igual a identificador vale resultado dos resultado 2s es igual a consultados en myq query Y entonces While fila 2 es igual al resultado 2s lo que ocurre en ese caso es que eco qué eco value es igual y ahora fila dos Y aquí viene la cuestión fila dos creo que me he cargado el value creo que sí no tabla no estoy buscando estoy a fila fi Ahí está Vale fila Field yo creo que ya está vamos a verlo hago así y me sale ccc ccc info @josé viicente vamos a ya que tengo esta tabla aquí pincho aquí y me sjo Cars José viicente infoar y ahí lo tengo todo vale Ahí tengo ya todo correctamente guardado y si le doy a enviar si le doy a enviar en este caso vamos a comprobarlo esto es si le doy a enviar update clave es procesa update bueno procesa update Este es el problema y es que lo que hace no es insertar lo que hace es actualizar eso tiene su miga eso tiene su aquel vale Ah tabla Okay vamos a poner esto primero procesa Okay si clave es procesa update formulario proces update hasta ahí bien y ahora por último dentro de lo que es el diseño de este super hiper mega controlador Pues bueno lo que voy a hacer es ver cómo lo puedo poner esto ya no es un insert Quiero una muestra de update mysql update sample vale update Table name set lo que sea vale Ah vaya vale entonces digo consulta es igual a update from update no Table name update tabla set a ver identificador we identificador es igual a qué pues a No lo sé vamos a verlo porque aquí no tiene por qué haber un identificador y tengo que meterlo entonces identificador identificadores igual identificador Y entonces le digo en el Index procesa update tabla coma identificador y en el controlador le digo tabla identificador tabla se está pasando Esto es lo que me da miedo tabla identificador dónde se está pasando eso yo creo Claro ahí está el problema nos está pasando vale Qué es post tabla me extraña que es post tabla y post identificador vamos a asegurarnos post tabla y post identificador Vale entonces tabla identificador y le digo update tabla we identificador es igual a identificador y ahora el set identificador el set es el que bueno nos va a dar su aquel entonces Yo vengo por aquí y digo cadena es igual a esto y digo cadena punto igual nombre campo es igual a punto y aquí viene el problema porque hay algunos Campos que son de número y hay otros Campos que son de texto vamos a verlo pero bueno voy a poner valor punto coma voy a poner aquí un true set cadena Esto ni siquiera Espero que funcione por lo del tipo de Campos vamos a verlo e 360 aquí falta un punto y coma consulta al insert la matamos y vamos a ver vamos a el usuario c entonces voy a poner C2 le doy a enviar no se ha actualizado como era de esperar y entonces set identificador es igual a esto luego aparte set identificador es igual a 3 Cómo proceder Porque si yo hago así de ador identificador o sea es otra vale copio voy a pegarlo en sql Esto va a dar errores por todas partes vale vamos a ver y dice cerca de Tal para empezar claro Esto no puede ser así porque como mínimo al crear la cadena debería tener comillas y comillas entonces recargo va a seguir sin funcionar lo pego ahí dentro Vale dice true vale coma true Y si quito Esto vale le doy increíble lo ha hecho Qué raro que lo haya hecho bien bhp Vamos a comprobarlo bhp remove Last of String y es esto y es subst de cadena entonces vengo por aquí vale edito le digo ccc3 envío vale y efectivamente bueno de momento no lo ha cambiado voy a quedarme con esto voy a recargar vale vamos a ponerlo aquí arriba sql pegamos hay un error Ah okay Y se suponía que ese error no tendría que existir porque he quitado el último carácter cadena vale se supone que he quitado el último carácter entonces php mira a ver cadena es igual a substr de cadena Okay Vamos allá recargamos el true Sigue estando true fuera vale TR Así que ahora le pongo un cuatro y es cuatro voy a editar el número cuatro en principio se hace bien lo cual pues me extraña un poquito pero vale mejor para mí entonces vemos como ya tengo un Pues bueno un mantenimiento ya tengo un panel de control pues que me está permitiendo meter las cuatro operaciones básicas me permite Añadir me permite eliminar me permite actualizar me permite ver ahora a continuación lo que voy a hacer es eh modificar los parámetros en línea pero vemos que por lo menos las cuatro operaciones pues ya las tenemos correctamente puestas Bueno A partir de Aquí vamos a realizar una serie de adaptaciones Entonces por ejemplo una adaptación vamos hay infinitas que se pueden hacer pero en cada uno de los tds y en cada uno de los trs y en cada uno de los ths pues podemos poner por ejemplo el tipo de campo la clase de campo que o el nombre del campo incluso que vamos a poner entonces me voy al controlador me voy a ver voy a leer Aquí está insertar no me voy a leer y ahora digo lo siguiente tengo por aquí las columnas Vale entonces yo vengo y digo vamos a ver yo vengo y digo nombre columna contador realmente columna es igual a o y ahora digo nombre columna de contador columna en este caso en php no es necesario declarar una Ray inicial se declara automáticamente es igual a fila feld Y entonces ahora digo contador columna má más con esto en principio si ha funcionado bien he creado una Ray de nombres de columna y entonces Ahora vengo otra vez y le digo contador columnas igual a 0 aquí le digo contador columna más Pero entonces aquí en el TD le digo Class y le digo nombre columna de contador columna y eso quiere decir que si ha funcionado correctamente Yo vengo aquí vamos a ver vengo por aquí TD no he puesto nada no ha puesto nada de nada cual ya me extraña vamos a ver código fuente de la página th TD Qué raro dónde estoy en leer y en leer Ah claro muy bien fantástico lo ha puesto al final del todo vale Muy bien Entonces esto son las herramientas que es justo lo que menos me interesa ahora sí Vale entonces Class contrasena Qué curioso que todo sea contraseña creo que es porque usuario vale lo estoy haciendo mal entonces contador columna Esto va Aquí contador columna Esto va aquí y entonces ahora es identificador usuario contraseña nombre apellidos email lo que sea lo que haga falta bien esto quiere decir por tanto ahora que yo virtualmente puedo hacer lo que quiera por ejemplo imaginémonos que me interesa emborronar los emails Pues yo puedo venir por aquí puedo venir al estilo ahora luego lo extraer vamos a ver estilos de formulario y digo email es e text blur no es filter blur de 4 píxeles y entonces yo puedo venir por aquí y ahora comprobaré como la columna de email solo la columna de email me aparece Eh modificada vale me aparece Eh Pues blureado eso quiere decir que por ejemplo puedo venir aquí a entregas y veré que todos los mails automáticamente están blore ados En definitiva yo puedo cambiar el color por columna puedo cambiar el tamaño puedo cambiar el tipo de dato puedo cambiar lo que sea porque ya estoy modificando digamos Ya estoy detectando a cada campo le estoy asignando digamos queé es lo que tiene vamos a ver por tanto que ahora pues puedo hacer cosas vale puedo eh modificar digamos el tipo de campo que quiera puedo hacer digamos cualquier tipo de operación que pueda necesitar Eso sí me acabo de dar cuenta de que tengo Esto vale de que ocurre Esto entonces lo que voy a hacer es lo siguiente lo que voy a hacer es decirle al sistema que vamos a ver Body es overflow hidden vamos a verlo Vale entonces ya no puedo hacer scroll y ahora le digo que contiene contenido es overflow y es scroll Y si esto ha funcionado bien lo que va a ocurrir Es que puedo hacer un scroll aquí dentro sin sacrificar esto de aquí bien más adelante cuando haya muchos registros tendré que activar paginación vale pero de momento no hace falta de momento estamos viendo como vale tenemos ahí una serie de vale una serie de cosas una serie de parámetros Ok muy bien Vamos a ver momentín vamos a comprobar el último es Oy es qué es vale Okay venga fenomenal Entonces continuamos vamos a hacer cosas y ahora por ejemplo quiero trabajar un poco con ciertos Campos quiero demostrar que puedo hacer lo que quiera a partir de ahora pero es lo que quiero tiene que ser eh cómo te diría yo tiene que ser escalable que si yo lo aplico a un campo se pueda aplicar a cualquier campo realmente en este caso quiero que si en la aquí hay un hay una URL Pues que esa URL se pueda clicar Así que vamos a ver a continuación me voy al controlador recordemos que este esta modificación que estoy haciendo a partir de este momento se aplica a cualquier campo de cualquier aplicación donde yo ponga esta programación Bueno pues vengo por aquí y entonces digo lo siguiente vamos a ver eco TD tengo el valor vale vamos a ver y entonces vengo y digo lo siguiente esto es el valor voy a poner punto y coma ecovalor eco TD Y entonces voy a decir lo siguiente si vamos a ver si nombre de columna no realmente no si el valor de la columna a ver php check regex URL entonces digo si es una URL Oh Wow Espérate que tengo esto Y eso es más Guay si tengo esto y el valor es una URL en ese caso eco a hrf y pongo el valor punto y coma al final y tengo que hacer lo mismo evidentemente aquí para poner un contrabarra a Entonces esto lo que hace es que si yoora recargo vamos a ver Ah claro sí vale Okay correcto eh tengo aquí que realmente esto es una URL es decir yo pincho y realmente vale me lleva a una URL lo que voy a hacer en este caso es que el campo URL Menos mal que Pues lo he puesto por estilos voy a poner aquí estilos de campo y así podemos agrupar por estilos de los campos vale Y entonces le digo email pues digo punto url real o URL sí Entonces le voy a decir color Blue y text decoration underline y con esto lo que voy a hacer es decirle al controlador vale hago un espacio vamos a ver aquí hago esto y digo sí es una URL eco URL sí se llama URL sí No me acuerdo qué nombre le he puesto y eso que se lo acabo de poner sí URL sí recargo todo y aquí lo tenemos vale Ahí vemos como Pues bueno ahí vemos como lo tenemos todo tenemos el campo blureado tenemos el campo que realmente pues es un hiperenlace Y a partir de aquí puedo continuar trabajando tanto como quiera por ejemplo en este caso lo que puedo hacer es decir bueno Y además si en la URL aparece lo de YouTube pues quiero meter un enlazable de YouTube vale Por cierto en usuarios el correo electrónico me lo coge como no me lo coge como URL porque no es una URL realmente aunque le podría decir Bueno pues si es un correo electrónico pues ponme un Oye pues mira esto lo podría hacer esto la verdad es que lo podría hacer si es un correo electrónico Pues ponle también Vale pues mira lo voy a hacer Entonces vamos a ver Sí aquí Ah okay vale Y entonces digo php filter bar debe haber uno de correo electrónico digo yo vamos a verlo Dónde está a ver php filter bar filters no a ver validate email filter validate email Y entonces le digo Aquí filter validate email y entonces le digo mail to Y entonces hago así y entonces es un correo electrónico pues hago así y teóricamente se me abre el correo electrónico para enviar un mail con lo cual pues mejor que mejor vale Además le digo Target Blank vamos a ver html a Target Blank vamos a verlo y Target Blank quiero que estos targets En definitiva sean Target blanco Cuidado con las comillas y entonces hago así recargo voy a ir cerrando páginas vale Y entonces digo Pues si pincho aquí se abre una nueva pestaña vale Y si pincho aquí se abre una nueva pestaña con un correo electrónico vale con lo cual pues más productivo digamos bien y ahora vale Ya tengo esto pues vamos a ver qué más cosas podemos hacer por ejemplo como digo pues Quiero ver las miniaturas de los vídeos vamos a por ello Vale pues en el controlador esto queda un poco extraño queda como que si lo leo dentro de un mes no me acordaré de qué hacía esto con lo cual pero bueno entonces Ahora vengo por aquí y digo eh php re exp YouTube por ejemplo no exactamente check If URL is YouTube Vamos a verlo entonces vale pues yo creo que voy a esto entonces voy a decir URL es igual no si es una URL en ese caso voy a decir URL es igual al valor par es igual a parsear la URL y digo Si el Host a ver qué tengo YouTube Vale pues Ok si paret de Cuáles son los índices el índice es Host de Host es igual a youtube.com o bien el past es igual a youtube.be que es esto vale en ese caso vale en ese caso tenía por aquí el código tenía por aquí el código en informe vale aquí en ese caso pongo un frame vale digo Ah espérate aquí okay controlador URL Vamos allá vale Pues si todo va bien Ahora vengo aquí recargo Y si reconoce las urls y no se Peta Por otra parte parece que no vale pues ahora irá metiendo los vídeos insertados vamos a verlo vale a ver vamos a ver vale Ahí poco a poco empiezan a aparecer No sé igual he metido demasiados está cargando Pero supongo que a YouTube no le estará haciendo mucha gracia que en beva ahí está en Bea pues ciento y pico vídeos de un golpe lo cual también es entendible entonces Bueno voy a hacer una cosa voy a anular esa línea pero es más a ver Ah No espérate además esto no va además esto no va además esto es falso Okay pero bueno en todo caso lo anulo pero no lo borro O sea que el día de mañana lo quiera de vuelta recargo vale Y aquí ya pues puedo empezar a validar lo que sea Okay pues nada bien ahí lo tengo Vale pues bueno La idea es que con las operaciones de pues eh ver eliminar actualizar lo que sea y ya tenemos un panel de control preparado para pues poder meter cualquier tipo de mantenimiento Y poder hacer lo que queramos con él vamos a ir ampliándolo a lo largo de las siguientes semanas Bueno pues si ya tenemos digamos una parte inicial que es la parte vista hacia el usuario puede tanto introducir información como recuperar información es decir el usuario mete información en el sistema con un formulario el usuario recibe información del sistema con un informe intentamos tomar algunas medidas de seguridad para que el usuario no pueda introducir cosas raras al meter información y el usuario intentamos que no pueda acceder a información que no le corresponde En definitiva pues intentamos aplicar algunas medidas de seguridad pero vamos a continuación con una parte del sistema que evidentemente es muy importante que es el panel de control vale que es En definitiva pues donde van a ocurrir las cosas así que aquí dentro de entregas voy a hacer una nueva carpeta la voy a llamar admin de momento no es un nombre muy ocurrente lo sé siempre lo puedo cambiar después y ahora dentro de admin Bueno pues lo que voy a hacer es empezar a mover cosas voy a empezar a editar cosas bien en primer lugar bueno el hecho de que el controlador esté fuera pues no me hace mucha ilusión vamos a hacerlo bueno que el config esté aquí Bueno tampoco pasa mucho entonces eh vamos a ver dentro de admin voy a crear un nuevo file y este file evidentemente va a ser Index punto Bueno voy a ponerle index.php vale que va a ser la pantalla que en principio cualquier persona debe ver siempre en el Index que vamos a ver lo que tiene pues vamos a ver si el usuario está logueado vamos a ver vamos a ponerlo aquí primero formateamos el documento vamos a ver un y un Body y ahora dentro del Body voy a decir php arrancamos una sesión vamos a trabajar con sesiones php session Start y voy a decir que escribiendo un seudocódigo básicamente si el usuario está logueado en ese caso pues lo que voy a hacer es poner el panel de control y si de control y si el usuario no está logueado voy a poner aquí un els me da error evidentemente está clarísimo vale voy a poner aquí el login vale Así de sencillo si el usuario está logueado Vamos allá y si el usuario no está logueado pues vamos a mostrar la pantalla de login entonces eh voy a decir lo siguiente si iset si existe la variable de sesión llamada usuario por ejemplo en ese caso haré panel de control en caso contrario lo que voy a hacer es Mostrar pues eco una serie de cosas entonces lo que hago a continuación es decir Bueno pues quiero e un formulario voy a ir a lo más básico que pueda action es igual a ahora veremos method es igual a post y ahora voy a poner input type qué pues input type text name usuario placeholder usuario y ya ahora input type password name contrasena placeholder contraseña y un input type submit es lo más básico que podemos vale para como el código de un panel de control siempre es complejo voy a intentar que el código sea lo más terriblemente sencillo que pueda precisamente para intentar hacer sencillo lo que ya de por sí va a ser complejo entonces vengo por aquí le digo que jara.com barra proyectos barra entregas barra admin V Ahora no voy a hacer un correo electrónico con lo cual el proyecto podría continuar en local vale Yo en mi caso lo voy a continuar en la nube ya que estoy Pero vale podía ser en local bien estamos viendo un formulario horrible verdad estamos viendo un formulario como diría yo no sé desastroso vale Pero esto es por el código evidentemente Entonces vamos a ver por aquí lo que voy a hacer es pues decir qu vamos a ver eh imagen la quiero de aquí por ejemplo vale la imagen la quiero de aquí vamos a recargar sale la imagen o debería Ahí está salir la imagen y ahora con un poquito de estilo voy a decir ID formulario login por ejemplo Y entonces ahora voy a hacer lo siguiente Body va a ser background rgb por qué no lo estoy viendo en el color correcto Pues porque no he puesto la etiqueta correcta Style ahora digo el body es background rgb 220 220220 luego igual Lo aclaro un poco más y font family es sans serif igual voy a hacer lo mismo voy a intentar que los estilos todo sea lo más sencillo posible y luego eh formulario login voy a decir que esto va a tener un wid de 300 píxeles un High de 300 píxeles un background White un padding de 30 píxeles un margin auto un Border radius de 20 píxeles no sé vamos a ver y vale con esto vemos como formateamos una cajita de login a partir de ahí voy a dejarlo arriba no lo voy a centrar ni siquiera en el medio para hacerlo lo más sencillo posible voy a decir que textalign Center ahí lo tenemos y ahora pues vamos con las cajitas Vale entonces voy a decir que formulario login input y digo que with es 100% padding top de 10 píxeles pading bottom de 10 píxeles y Border cero píxeles vamos a verlo vale Ahí lo tenemos vamos con un margin top de Quizás 10 píxeles No lo sé y poco más y outline no quiero outline para los campos y ya está y podemos ahí empezar a trabajar voy a decirle que background e rgb Pues voy a poner 2 40,2 40240 vale simplemente para que se vea un poquito voy a hacer una de incógnito porque es que me está recordando la contraseña y no creo que me Recuerde la contraseña entonces me voy a una de incógnito y ya está entonces vale pues no sé por aquí lo tenemos esto lo podría hacer un poquito más grande pero eso ya es otra cosa voy a hacer 200 por 200 para hacer un login un poco más Cuqui y bueno y yo creo que más o menos el login ya lo tengo para insisto hacer algo sencillo y que sea funcional un poquito de usabilidad pues Quizás lo que voy a hacer es que eh formulario login input y voy a decir type es igual a text coma password entonces a estos dos les voy a decir que Box Shadow 0 píxeles 4 píxeles 8 píxeles rgba 0,0.3 inset es decir quiero como una sombrita por dentro Mientras que el de tipo submit el de tipo submit lo que quiero es que tenga una sombrita por fuera Entonces le quito el inser un poco para que se vea claro lo que es el campo de texto de lo que es un botón es una clasificación un poco extraña pero bueno voy a poner un Border radius de cinco píxeles para que esté todo redondeados y ya está Vale en principio ya tengo un formulario de inicio ya tengo una cajita de inicio voy a poner un usuario voy a poner una contraseña y voy a comprobar como esto evidentemente no va a ninguna parte Así que a continuación vamos a hacer que esto pues tenga algún sentido vamos a hacer que esto tenga pues alguna función Claro si estamos hablando de crear un login pues evidentemente tenemos que ir yendo a la base de datos Y tenemos que ir creando unos usuarios entonces voy a crear una nueva tabla de usuarios con un identificador vamos a decir que esto es entero tiene no sé 20 caracteres es un índice primario es autoincremental vale eso luego si que voy a ponerle tipos de dato de momento voy a hacer una relación de un a n en el sentido de que en el sentido de que un usuario será una persona Entonces usuario contracena esto es nombre del o sea nombre de la persona apellidos y email de momento y quizás para más adelante voy a poner nivel el nivel que tendrá ese usuario Así que vamos a ver voy a decirle que esto es un marchar esto es un marchar esto es un marchar esto es un marchar esto es un marchar y nivel Pues bueno nivel que va a ser pues va un entero Así que Esto va a ser pues 100 caracteres contraseña 100 caracteres nombre 100 caracteres apellidos 100 email no sé 150 como máximo entonces pincho guardar y ahora voy a crear un inserto un usuario llamado jarsa con contraseña jarsa nombre José Vicente apellidos carratala email info @ josic carratala com y niveles no lo de momento ahora mismo niveles pero por lo menos me lo dejo ya preparado porque es típico que en una aplicación empresarial pues haya niveles de usuario y permisos digamos Así que tengo Ya mi aplicación con tres tablitas y ahora lo que voy a hacer es que en el código el action va a ser yo mismo y el método va a ser post Y entonces en ese caso lo que voy a hacer es atrapar Digamos si el usuario está intentando loguearse Así que vengo por aquí y digo Si is set post usuario pues en ese caso lo que voy a hacer es decir Bueno alguien eco alguien está intentando loguear Así que vengo por aquí Uy Cuidado vengo por aquí usuario contraseña y alguien está intentando loguear vale Así que yo ahora a continuación lo que voy a hacer es lo siguiente lo que voy a hacer es include dos punos barra config.php y a continuación lo que voy a hacer es una petición a la base de datos voy estoy cogiendo por aquí a aquí vale Y a Aquí vamos a poner las sangrías correctamente para luego saber qué estamos haciendo y digo Select todo from usuarios Where usuario es igual a algo and contrasena es igual a algo y ese algo va a ser post usuario y post contrasena spash post usuario Ahí está y post contrasena es decir aquí estoy recibiendo lo que he enviado aquí abajo Así que en principio yo de momento digo pasas es igual a no Y entonces digo si esto es cierto si Existe algún resultado digo vale pasas es igual a sí Y entonces digo session usuario es igual a eh es igual a qué pues es igual a fila usuario y así recordamos tu variable de sesión para toda la sesión hasta que se cierre la sesión Entonces si esto funciona correctamente panel de control eco si estás viendo esto es que estás en el panel de control Entonces Okay todo Ok en principio vamos a probarlo vale cro para atrás Okay Vale entonces ahora hago así Ah perdón que no he hecho vale digo Si pasas es igual así en ese caso nada pero en caso contrario voy a decir que eco el usuario y o no Mira sabes qué intento de acceso denegado de momento Así que recargo Así que pongo aquí Cualquier cosa le doy a enviar alguien está intentando bloguear intento de acceso denegado eso lo puedo poner en una ventanita de Pues un notis o algo así voy hacer Voy a hacer eso voy a hacer div Class no voy a decir que notice es position top No pos absolute top cer píxeles with no sé 400 píxeles background red color White height 20 píxeles por ejemplo y ahora vamos a ver left qué left 50% y margin left menos 200 píxeles y eso lo que va a hacer es que ese mensaje pues aparezca centrado en la pantalla vale intento de acceso denegado eh un padding de 10 píxeles y un texaline de Center Y eso pues va a estilizar un poquito más el mensaje intento de acceso denegado alguien está intentando loguear eso lo podemos quitar ya intento de acceso denegado y con esto y se me ha ido un poco no sé por qué pero bueno ahora veremos y con esto ya puedo meter jarsa y jarsa usuario contraseña y por tanto si estás viendo esto es que estás en el panel de control y de hecho incluso vengo por aquí y sigo estando en el panel de control porque he puesto una variable de sesión y al poner una variable de sesión Pues el sistema recuerda en todo momento que estás en el panel de control por tanto digamos Recuerda que has iniciado sesión y que tienes las credenciales correctas para poder entrar bien pues a continuación Viene un momento muy importante Yo casi diría que sagrado en el que cómo diría yo en el que vamos a formatear el panel de control en el desarrollo de una aplicación empresarial el momento de darle forma al propio panel de control Yo diría que es algo sagrado pero bueno Entonces yo ahora vengo por aquí y voy a hacer un eco muy ambicioso y a la vez tiene que ser un eco muy sencillo insisto y voy a poner lo siguiente voy a poner una tabla llamada aside un elemento llamado aside que es el menú digamos y un elemento llamado section que es la propia sección Entonces si hago esto es el menú izquierdo voy a poner el menú a la izquierda esto es el contenido Eso quiere decir que yo voy a hacer lo siguiente voy a decir que aside es with 20% y bueno float left y ahora se voy decir que es with 80% y float right Además solo para marcarlo voy a decir que Esto va a ser background red y Esto va a ser background Blue nos va a matar a la vista Pero esto lo hago simplemente para que comprobemos que estamos formateando correctamente y ahí lo tenemos bien Ahora voy a decir que en el body le digo un padding de cer píxeles y un margin de cer píxeles vale Ahí lo tenemos le voy a decir aquí al Body que no solo quiero un Wi del 100% se lo tiene por defecto pero quiero también un High del 100% por tontería pero hay que decírselo esto es Body com html y ahora a la sideal section le voy a decir que los quiero los dos con un H del 100% los estoy poniendo los estoy de rojo y de azul para que los veamos ahora luego les pondré otro color vale pero de momento lo estoy haciendo para que veamos fácilmente veamos rápidamente la distribución que estoy haciendo Y ahora una vez que hecho esto pues ya puedo quitar el rojo y el azul que nos estará matando la vista y puedo poner otros colorines pero lo que quería un poco era demostrar visualmente que estoy controlando lo que estoy haciendo en la interfaz de usuario en la Side por ejemplo pues pongo Box Shadow de cer píxeles e vamos a ver 20 píxeles esto no y ahora rgba 0.3 y inset Vale entonces lo que est no lo que ocurre es que es como que tengo una sombra hacia la izquierda vale como que este menú está metido hacia la izquierda 0 men 20 píxeles vale Okay un poquito más menos 40 píxeles no me estoy equivocando esto es -2 píxeles cer píxeles estoy confundiendo el horizontal con el vertical Ahora sí vale entonces tengo el menú izquierdo y tengo el contenido Entonces ahora a continuación lo que vamos a hacer es dotar de contenido primero el menú izquierdo quiero que tenga cada una de las tablas y luego el contenido pues quiero que tenga pues las los formularios la los listados lo que sea vale ya cada uno Un poco formatea su panel de control evidentemente pues como mejor le viene Así que ahora a continuación lo que voy a hacer es decirle esto es por aquí vale es decirle el menú izquierdo vengo por aquí y creo un una etiqueta div ID contiene menú vale Y en el contiene menú en el contiene menú voy a decir que eh contiene menú va a tener de momento un padding de 10 píxeles padding sencillito no se ve nada todavía ahora lo veremos pero lo que quiero ahora es listar los elementos del menú entonces voy a salir de aquí voy a poner un eco por aquí y ahora voy a el include no hace sí hace falta vale el include lo voy a poner arriba del todo porque nos hará falta para muchas cosas vale My sqli yo creo que lo voy a poner también arriba del todo porque también nos hará falta y ahora sí vengo por aquí y básicamente Quiero ver las tablas Entonces pasas es igual a no Y entonces vengo por aquí y digo e my sql show tables entonces show sí Okay Google show tables okay Y sí pero no s pero no y show tables ya está vamos a pues ya está misterio Así que show full tables no vamos a ver buen esto no hace falta Así que la petición es Show tables y ahora voy a hacer una cosa voy a hacer un bomp del resultado para ver cuál es el nombre de la fila Así que venimos por aquí vale Y sí pero no php show tables mysql Quiero ver cuál es el índice de la matriz vamos a ver este vamos a ver show tables Ah Table cero Vale pues ya está bien pues eco fila cero no está mal pensado Es realmente el primer elemento de la matriz el primer elemento de la colección entonces vengo por aquí vale hay un punto y coma que debe venir de aquí okay fetch a shock he visto por ahí un fecha Ray que en lugar de meterlo en un array asociativo lo que hace es meterlo directamente en una array numérico y ahora Bueno me aparecen ya entrega registro y usuarios Vale hasta aquí bien Así que ahora a continuación pues lo voy a hacer un poco más bonito evidentemente y voy a hacer lo siguiente Esto va a tener un ull una lista no ordenada y por tanto eco aquí porque Okay eco Li a href a y le voy a poner aquí un Bueno pues aquí voy a poner Aquí voy a poner un fila de Cero y ahí pues ya veremos lo que pongo pero de momento recargo y tengo ya aquí el listado de tablas que hay en la base de datos Y esto evidentemente quiere decir que a partir de este momento pues cualquier tabla que haya o sea cualquier tabla nueva que cree automáticamente aparecerá en este listado Ok Venga pues ahora voy a darle un poquito de estilo a esto entonces contiene menú ull le digo list Style type es igual a noun vale padding es cer píxeles margin es c píxeles y contiene menú pues bueno padding cer píxeles margin 0 píxeles voy a poner Bueno claro un padding de no sé 10 píxeles y un Border bottom de Pues un Pixel solid Grey vale para hacer pues un poquito esos separadores y ahora el contiene menú enlace pues digo que Esto va a ser color inherit y text decoration no así que lo tengo así vale esto de momento no lleva ninguna parte porque no tiene que llevar ninguna parte Pero de momento lo que quiero es que me aparezcan Pues los elementos digamos listados siempre es un buen momento por cierto para poner separadores en el css Y entonces vengo aquí y digo estilos del formulario de login vengo por aquí y digo estilos del panel de control y esto de aquí son estilos generales y así pues un poco vamos estructurando y conforme vaya creciendo esto no Esto va Aquí conforme vaya creciendo la aplicación pues vamos a mantener el control Okay lo tenemos aquí vale Ya lo tenemos así que ya tenemos el menú de la izquierda ahora viene la maquetación del menú de la derecha que evidentemente Esto va a ser bastante más complejo porque requiere que trabajemos con el controlador para por lo menos empezar a trabajar con la vista dentro del crud tenemos lo que es el listar insertar eh actualizar eliminar pues vamos con el listar por lo menos al principio y eso pues nos va a hacer volver a trabajar con el superc controlador Bueno pues a continuación lo que voy a hacer es pues empezar con el contenido principal da un poco de miedo también da un poco de pereza lo voy a reconocer Pero porque al final es un trabajo grande pero hay que hacerlo entonces dentro del contenido teníamos contenido vamos a poner un div ID contiene contenido verdad así que contiene contenido es un poco repetitivo Pero bueno no que pasa nada O sea que no pasa nada que se va a hacer así que voy a decir por aquí estilos del panel de control contiene contenido es pues un padding de 10 píxeles creo que había puesto en el otro voy a decir aquí voy a decir aquí Hola Así que guardo y recargo para que ponga ahí Hola Y una vez que pone ah Hola pues ahora lo que quiero es pues bueno ver a quién modifico voy a un parámetro de la URL Entonces esto lo que va a hacer Es que voy a decir tabla es igual a fila cero esto qué quiere decir pues esto lo que quiere decir es que si yo hago aquí entregas pondrá tabla igual a entregas si yo hago clic en registros pondrá registros si hago clic en usuarios pues pondrá usuarios En definitiva con esto lo que quiero decir es que Eh Pues voy a empezar a recoger el contenido de cada tabla Vamos allá por tanto entonces Bueno ahora lo que quiero aquí es Eh Pues bueno ver el contenido ver qué es lo que se supone que estoy haciendo Así que voy a poner aquí una cosa eco y entonces digo ent digo si iset el parámetro get tabla Eso quiere decir eco te voy a listar una tabla hago así te voy a listar una tabla pero si no hay ese parámetro quiere decir que no estoy haciendo eso estoy haciendo otra cosa entonces vengo aquí y veo como si hago clic aquí es te voy a listar una tabla vale y ahora a continuación voy a poner algo tan inocente como contenido de la tabla punto gu B get tabla recargo contenido de la tabla registros contenido de la tabla entregas lo único que está haciendo es ese parámetro y bajarlo aquí abajo por eso digo que es un movimiento bastante inocente pero evidentemente lo que vamos a hacer ahora va a ser utilizar ese esa variable para realizar una petición a la base de datos Y aquí es donde vuelve a entrar el controlador Porque aquí es donde Por ejemplo si me voy a Index pues Donde antes aquí hacía bueno incluyo el controlador evidentemente eso estaba ya clarísimo eso lo incluyo aquí dos puntos barra controlador y ahora aquí en el Index Pues aquí lo que hacía es crear un superc controlador vamos a ponerlo Aquí vamos a ponerlo no sé dónde ahora mismo ponerlo vamos a ponerlo aquí mi formulario vale por ejemplo y ahora voy a decir mi formulario Vale pues Ahora La idea es voy a venir aquí y voy a decir mi formulario y ahora Quiero ver o sea dentro del nos acordamos que tenemos el modelo crud nos acordamos que dentro del modelo crud siempre en una base de datos tipo sql por lo menos tenemos el crud es esto por aquí create read update y delete pues estamos en read Así que Quiero leer y qué Quiero leer Bueno pues Quiero leer lo que venga de aquí de la tabla entregas Pero claro Qué problema hay pues el problema en que yo hago así y hay anc terror y dice no hay un método leer en la clase super controlador pero evidentemente si no lo hay pues lo vamos a crear así que me vengo al controlador y empiezo a extender la clase que he empezado a trabajar así que vengo por aquí y ahora creo un function leer y ya está así que vengo por aquí a ver función leer Vamos a darle tabla verdad leer y de momento voy a poner otro mensaje muy inocente a continuación te pongo el contenido de la tabla punto tabla es inocente pero Ah vale muy bien Qué ha pasado eh un punto y coma me falta por alguna parte Pues no lo sé si me falta Qué cosas función leer tabla eco eh No sé ahora mismo qué es lo que me está fallando vamos a ver es leer vale en controlador 129 se esperaba un punto y coma pero yo he puesto un punto y coma a y unexpected vale leer Bueno ese es de ahí Ese es de ahí Ah Espera que sí he puesto función Ah no sé qué está fallando ahora mismo función leer eco e ahora mismo Estoy un poco que no sé cuál es el fallo exactamente Ah vale pues ya no hay fallo no sé qué he hecho porque realmente no he hecho nada pero ya está Vale pues Venga pues vamos allá Pues a continuación lo que voy a hacer es poner el contenido de la tabla la que sea voy a trabajar en el en la estructuración el marcaje más básico posible y luego le daremos estilo así que por tanto a continuación voy a hacer lo siguiente voy a decir que vamos a ver cojo una de estas peticiones vale cojo esto y show full columns aquí es donde empezamos un poquito a vale vamos a ver show full colums from lo que sea While aquí from tabla lo que sea y entonces ahora lo que va a ocurrir es que bueno voy a hacer por cierto aquí un eco Table aquí un eco Table aquí seguro que va a ir bueno vamos a ver un eco TR para el principio de la línea un eco final de línea intento insisto tenerlo lo más sencillo posible y ahora cogiendo el mismo código de Aquí vamos a ver vale estoy viendo dónde está donde pongo cada uno de los campos cada una de las filas vale full columns vale Con eso tengo las columnas Okay entonces tengo TR y eco vale Voy a hacer lo siguiente eco TR th y voy a poner de momento de momento vamos a verlo un segundo fila no fila comen fila nul fila comen Dónde está el name fila fi Ahí está Vale vamos a verlo fila Field vamos a probarlo recargo vale fetch aoc fech aoc No Qué es fech shoc Sí que es un fech shock vale resultado vamos a ver qué ha pasado Eso quiere decir que no está cogiendo el contenido eco consulta esto lo voy a matar un poquito show full colums from entregas en principio es correcto voy a ver si no me ha caducado la sesión de la base de datos Ok vale principio es correcta la no debería dar error vale vamos a hacer un bardom del resultado y false vale da false bien da false por qué bueno pues yo por si acaso Ah ok vale vamos a ver include config Ahí va a estar el problema no he incluido la configuración con lo cual el sistema no sabe nada de la base de datos Vale ahora sí bien Y entonces en este TR lo que voy a hacer es que el TR va aquí el cierre de TR va aquí y aquí va el th Entonces quito el bardum porque ya lo tengo ya he visto Cuál es el error Vale y veo que tengo por aquí esto de aquí esto parece que no pero es una tabla entonces para comprobar que es una tabla Pues yo lo que voy a hacer Es que aquí en admin me voy un poquito al estilo y digo contiene contenido Table with 100% Y entonces ahora la tabla ocupa todo luego por una parte tengo esto pero luego por otra parte esto es entregas esto es registros vemos cómo se va adaptando esto ya me gusta tengo usuarios Vale entonces ahora es cuando pues puedo empezar a utilizar los tipos de campo de cada fila vale Pero bueno ahora iremos a eso En definitiva voy a cerrar por aquí cosas y ahora de momento lo que quiero es Eh pues simplemente empezar a poblar cosas quiero empezar a poblar contenido aquí dentro de esta tabla y una vez que tenga contenido pues ya puedo empezar a proceder con ese contenido Entonces ahora lo que voy a hacer es que vamos a verlo me voy al controlador me voy aquí abajo del todo y ahora lo que voy a hacer es seleccionar todo desde la tabla vamos a por ello Así que ahora digo la consulta es una vez que tengo las cabeceras Ahora quiero show all from tabla no show no Select all from tabl Y entonces ahora lo que hago es que resultado es el query y el While es esto de aquí puedo decir fecha r y entonces ahora digo eco TR para cerrar la fila Y entonces digo for each a ver un momentín que habrá por aquí php for each inray for each por ejemplo aquí y as clave valor realmente esto lo puedo sacar de la esta parte del controlador a ver for each aquí for each fila as bueno nombre de campo valor Okay Vale realmente fech fecha sooc Entonces yo puedo venir por aquí y entonces pongo eco t TD y no sé pues voy a poner valor a ver qué pasa valor si todo ha ido bien Que supongo que sí Aunque la verdad es que no lo sé me vengo por aquí esto fuera y Vale pues parece que ha ido bastante bien identificador jarsa contraseña lo que sea bien Ahora crearé en la base de datos otro elemento Pero bueno de momento tiene bastante buena pinta de momento tiene pinta si me voy a registros pues veo que vale esto Ah vale que tengo pocos registros Qué raro momento tengo más registros porque solo me estás mostrando uno a ver entregas solo me está mostrando una vale Okay Hay algún tipo de problema vamos a ver Select all from tabla Okay entonces voy a poner aquí Ah no Ya sí ya sé igual es el problema Esto va Aquí dentro usuarios Es normal que aparezca eso registros Ahora sí esto ya me cuadra más si pasa esto es porque esto no cabe es porque esto está aquí ahora haremos que no se salga menos de los problemas y en entregas por ejemplo pues vemos que también empezamos a tener ya aquí cosas vale bien pues vamos a usuarios por ejemplo formateamos un poquito formateamos para que esto tenga un poco de forma y bueno Esto muchas veces es difícil en el sentido de que pues tenemos que ver cómo formateamos para que se vea todo claramente y no tengamos la típica forma de tabla horrible vale que muchas veces pues acabamos teniendo esa forma de tabla vamos a ver Bueno realmente un momentín que me estoy concentrando Vale tengo ya por aquí el identificador voy a hacer una cosa voy a usuarios y aquí en admin en contiene contenido Table voy a decirle texaline left por ejemplo vale así tenemos ya un poquito las filas que se van centrando ahora a continuación pues vamos a crear diferentes iconos digamos diferentes formas de Añadir contenido así que bueno basándonos un poco en la metodología Google Pues voy a poner un botón aquí abajo gigante para decir que lo que quiero es Añadir vale para decir que lo que quiero es crear un elemento más es decir aquí por ejemplo yo puedo poner vamos a verlo en el controlador yo puedo poner un vamos a verlo un momento aquí en el th yo puedo poner th operaciones entonces tengo ahí operaciones y en el TD pues puedo poner al final un TD de hecho lo voy a poner ya que estamos me cuesta poco entonces vengo por aquí voy a traer font awesome recordamos que teníamos el font awesome lo pongo por aquí en el Head y ahora en fondo son voy a poner algo sencillo voy a poner algo muy sencillo a ver sencillo pero dónde estoy controlador Vale pues Ahora aquí voy a poner a hrf a y voy a decir font awesome icons y quiero vamos a ver venga y quiero delete el típico botón de papelera míralo delete mir qué bonico y vengo por aquí copio y pego y luego también quiero un botón de update Así que pongo update Busco un botón que sea update Pues cómo era la papelera claro voy a Este voy a intentar el mismo estilo entonces este es delete este es o sea este es update Perdón este es delete Bueno voy a este va Así que hago así y entonces para cada una de las líneas vamos a verlo para cada una de las líneas veremos que a ver se han metido ahí no deberían vamos a ver ahí claro eco TD ahí las tenemos Y entonces voy a hacer lo siguiente voy a hacer en aquí contiene es contiene campo un momentín no esto es otra cosa Esto es contiene contenido Table a le digo que es tiene un padding de cinco píxeles tiene un color inherit y tiene un text decoration no Pero además el itálica voy a decirle que tiene un text un font size de 20 píxeles Así que recargamos y ahora vemos ahí los botoncitos más presentes un botón me permitirá eliminar elementos y otro botón me permitirá editar elementos pero me hace falta otro botón que es el botón de como digamos las aplicaciones de Google un redondel por aquí que me permita Añadir nuevos elementos Así que vamos a por ello vamos a crear Ese botón ahí bajo para crear un nuevo elemento así que por tanto me vengo por aquí porque estos botones son por fila vemos Que si me voy a registros pues cada registro tendrá sus botones me voy a entregas cada entrega tendrá sus botones pero yo quiero un botón para crear un nuevo registro y ese botón de crear no es prof fila es un botón global Así que vengo por aquí Bueno me voy a font awesome y le digo Plus Plus Mira este de aquí de hecho y entonces lo cojo me voy al final de contiene contenido y entonces digo a href eh a Y entonces digo ID create ahre es igual a create y eh get tabla Entonces vamos a verlo vengo por aquí aparece un signo más por aquí vale debe estar bajo Por cierto esto es ID create por tanto create es un color color init un text decoration y un font size 40 píxeles un absol botom 10 y un 10 píxeles por cierto hay una cosa que me está llamando un poco y es por esto no está en el controlador debería estar aquí Entonces esto lo voy a quitar de aquí vamos a verlo y me voy al controlador y al final del todo del controlador al final por ejemplo aquí ahí bien Más que nada porque realmente ese elemento va dentro de la vista entonces tiene que estar ahí vale Ahí lo tenemos míralo qué bonico está voy a hacerlo más grande siempre además diferenciando lo que es la vista el css el estilo verdad vamos a hacer 80 píxeles más bonico todavía ahí está entonces La idea es que pincho aquí y claro ya no es tabla es create Vale entonces la idea ahí Es que cuando entro ahí dentro ya no estoy creando eh o sea ya no estoy viendo una tabla ahora lo que quiero es crear un nuevo elemento y ese elemento va a ser un formulario evidentemente si ese elemento va a ser un formulario Bueno pues en ese caso lo que va a ocurrir Es que puedo reutilizar realmente gran parte de lo que tenía hasta ahora vamos a verlo vamos a ver vamos al a Index y entonces yo decía a ver si hice tabla en ese caso vale formulario que tabla OK Pero entonces digo si set esto voy a juntarlo aquí entonces digo si iset get create en ese caso formulario voy a poner leer Eh pues insertar get tabla Vale entonces me voy a insertar Esto va a dar error me vengo aquí da error le doy aquí y me dice no existe insertar Pero no pasa nada porque yo voy a venir al controlador y voy a el crear formulario function formulario Aquí está lo voy a pegar lo voy a reutilizar y este es insertar ahora vemos qué aspecto tiene esto pero yo vengo por aquí vamos a verlo un momentín controlador A ver no vale Hay un problema vamos a verlo o sea estoy en entregas o estoy en registros o estoy en usuarios y ahora pincho el botón nuevo y me da un error vamos a leer el error dice fecha show con bull o sea Empezamos mal quiere decir que he hecho una petición en la línea 170 Y esa línea 170 da error da nul vale show full columns from tabla insertar tabla Ah si no Sí es correcto insertar get tabla Ah no insertar get create porque ya no es tabla sino que es create ahora sí pero ahora no funciona vale no funciona también digo porque no he configurado los campos voy a crear un nuevo formulario y vemos como si los configuro correctamente sí que funcionan pero como aquí no los he configurado correctamente pues no funcionan así que vamos a configurarlos correctamente para configurarlos correctamente Pues bueno técnicamente saco la base de datos me voy a entregas Me cojo estructura Me cojo cualquiera de estas plantillas y voy a ir modificándola vale vamos a empezar con usuarios Así que vamos a ver me voy a usuarios vale me voy a estructura y bueno Vamos allá vamos a ver voy a usar un text edit Okay voy a usar un brackets para copiar y pegar texto Vale entonces vengo por aquí y digo vale título pues vamos a verlo espera ahí Okay Vale título nombre del usuario descripción introduce el nombre del usuario que vas a crear a ver un momentín momento Bueno pues introduce Espera que se ha quedado frito muy frito vale introduce un nombre de usuario máscara algo mínimo uno deshabilitado fse B true icono de momento numeric tipo de dato texto Así que esto lo puedo ya lo meto en usuario lo meto en comentarios y entonces si vengo a la aplicación y me voy a usuarios y Quiero crear un usuario pues ya aparece el introduce el nombre de usuario que vas a crear vale Ya tengo más ayuda ya tengo un poquito más de ayuda luego de hecho puedo copiar un poquito el estilo del formulario de hecho y así no empiezo desde cero pero ahora lo más importante es que tengo que configurar Pues todos y cada uno de los campos Así que vengo por aquí pego y ahora digo eh contraseña del usuario descripción introduce la contraseña del usuario que estás creando ya se ha quedado frito otra vez vale introduce hacer una cosa voy a p el texto Si no se queda tan frito y el momento formato texto sin formato pego vale muy bien y introduce una contraseña vale Y esto es password ahora luego veremos el icono vale Pero bueno podemos verlo ya de hecho técnicamente así que font aome icons y vemos como el trabajo que estamos haciendo pues vamos a ver cómo empieza a lucir porque ahora yo solo cambio unos parámetros y todo se actualiza parece mágico pero no lo es así que user vale user es fasf user Ok esto lo metemos en la base de datos lo metemos aquí Y en comentarios ahí vale ahora esto es password una llave o algo así vale mismamente es ffa password fasf key vale ffa Ke lo copiamos y lo pegamos ya dentro del campo correspondiente y luego siempre lo podemos modificar OK Por cierto que no estaría de más que me fuera aquí al Index y en el formulario pues ya puedo ir poniendo el estilo contiene campo lo copio aquí en el admin lo pego y digo estilos del formulario cojo todo esto lo tiro para atrás Esto va hacia delante más que nada para ver si lo podemos ver bonito bueno vale más o menos Entonces no cuadra amente Pero vale pero de momento me vale Pero el caso es que debería cuadrar un poquito mejor a ver no me cuadra que no cuadre formulario correcto Y por qué no me cu vamos a ver por eso no me cuadra vale Ok y de formulario bueno eso igual debería estar vale Ok venga vale pues aquí voy a meterlo dentro eco ya veremos Luego si lo metemos dentro del controlador como quizás debería estar Okay entonces hago así vale Ahora sí entonces vemos como nombre de usuario introduce el nombre de usuario contraseña del usuario introduce la contraseña del usuario que estás creando con sus iconit con sus caracteres con su todo vale estamos reutilizando gran parte del trabajo que hemos hecho antes luego quitaré esta cajita pero de momento me viene bastante bien es decir Quiero una entrega Bueno pues si creo una entrega pues introduce tu email y creo la entrega Quiero un usuario Bueno pues si introduzco un usuario creo un usuario es decir estamos un poco reutilizando parte del trabajo que hemos hecho anteriormente que no era solo para el usuario final sino que también era para el usuario digamos nuestro