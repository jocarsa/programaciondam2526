empiezo a grabar vale Bueno pues nada empiezo a grabar ahora Vale entonces eh lo que he hecho por resumir lo que acabo de hacer vale es implementar la instrucción el doble bucle for de matar a los personajes a los npcs con La bala vale recordad resumen lo que he hecho por una parte es traer la distancia me la ha sacado de chat gpt también está en un montón de sitios en internet la función de calcular distancias función que calcula la distancia utilizando la fórmula de Pitágoras vale Y esta función calculate distance lo que hago es utilizarla aquí entonces digo para cada una de las balas para cada uno de los npcs calcula la distancia y si esa distancia es menor que 20 en ese caso mina los npcs de la Ray de npcs vale Esa es la cuestión bien Ahora como os decía voy a ir al gimp os digo el gimp como qui dice cualquier herramienta de diseño de píxeles o incluso de vectores y me voy a hacer me voy a hacer una imagen de 512 de ancho por a ver va igual va 128 por 32 a ver ahí por ejemplo bien y en esta imagen lo que voy a hacer es eh dibujar una serie de plataformas entonces voy a pintar por aquí menos más y menos y pinto Vale y pinto eh otra cosa que podría hacer es pintar sobre una capa y por tanto que no sea transparente vale no sé algo así y pinto Oh espera Qué pasa aquí Quiero pintar con el lápiz ahí pinto pinto pinto pin Si eso Tiene algún tipo de lógica no lo sé probablemente no vale vamos a pintarlo como realmente esta formación no trata cerca del diseño de niveles no me estoy preocupando de si esto es jugable o no igual person va a resultar imposible de saltar a estas plataformas No lo sé Probablemente sí vale pero yo de momento voy a hacer un diseñador de niveles en el sentido de que yo hago una imagen con píxeles muy sencillos y ahora el sistema va a convertir esto a un nivel así que me guardo esta imagen me lo guardo en bueno de momento en escritorio me lo guardo como nivel 1. png nivel uno quiere decir que si luego os pasáis el nivel pues podéis cargar nivel dos y así y voy a hacer I 032 cargar nivel Así que vengo por aquí Así que vengo por aquí Así que vengo por aquí y donde cargo las imágenes os acordáis esto lo he guardado no cargar nivel Sí donde cargo las imágenes yo digo lo siguiente vamos a ver bar imagen nivel es igual a New image qué estoy haciendo Me estoy copiando lo de arriba y ahora digo imagen nivel pun src es igual a Barra img barra nivel 1.png no la he puesto todavía en la carpeta vale Y ahora imagen nivel punto onload es igual a function donde ahora veremos qué ocurre Entonces ahora me vengo al escritorio me por tengo esto en claro si estaba en oscuro Qué cosas en fin vamos a ver modificación vale Dónde está nivel un me lo copio me lo pego ahí claro apariencia y lo tengo Ves lo tengo oscuro pero por lo que sea el navegador se me ha puesto Claro pues Vale pues da igual bien entonces vengo por aquí y digo eh console pun log imagen cargada eh dónde estás aquí me vengo por aquí cargar nivel imagen cargada OK ahora quito enemigos porque ahora Hay un montón de enemigos y dos enemigos vale bien imagen cargada y ahora a continuación aparte de beber lo que voy a hacer es que en lugar de cargar la imagen del fondo no imagen plataformas vale imagen plataformas contexto plataformas fantástico en lugar de cargar la imagen de las plataformas el personaje se va a caer al suelo el personaje se cae al suelo y se muere cayendo al suelo vale No pasa nada Ahora voy a hacer lo siguiente vamos a ver eem vale la imagen es de 512 yo le he hecho 32 Eso quiere decir que 512 paro 32 sale a 16 píxeles Ok bien entonces ahora un segundo vale imagen no contexto fondo punto contexto plataformas image imagen nivel en 0,0 coma y ahora viene la cuestión cuánto ocupa esta imagen 128 * 16 128 * 16 2048 fantástico pues 2048 * 512 Eso quiere decir que voy a la imagen aquí Ahí está voy a la imagen que he dibujado y veréis que las mismas plataformas que he dibujado en el gimp son las que aparecen en el juego ahora al pegar también le puedo decir que no me haga antialias vale sino que me en lugar de pegarme las difuminadas pues que me las pegue normal vale eh un momentín voy a decirle javascript Canvas draw image scale without antialias Okay esto Okay entonces en el contexto de las plataformas con texto plataformas le digo smoothing enabled es igual a false vamos a verlo crimson No aquí y no ha funcionado bueno no pasa nada vamos a ver contexto plataformas creo que ha pasado de mí pero bueno pasa nada voy a pegarlo otra vez aquí por si acaso Ahora sí vale fantástico bien el personaje salta pero venga ahí no salta tío Bueno pues no puede saltar ahora haré que salte más para que pueda saltar por plataformas Tampoco puede saltar hacia delante así que bueno otra mejora que podemos hacer y ahora a continuación lo que quiero vo voy a decirle que salte más porque necesito que salte demás Class jugador eh dibuja mueve muere no Dónde está el saltar vamos a verlo aquí cuando el personaje aquí vy es igual a salto vale Qué es salto es una variable salto es una variable aquí bar Salto es igual a 8 estas variables globales no deberían estar aquí a ver si no me da problema Okay perfecto bien y ahora la variable de salto es igual a -16 Okay venga plch vale bien me vale plch bien yo ahora quiero que cuando el personaje salta cuando el personaje cae yo quiero que vaya avanzando en el nivel Así que ahora a continuación tengo que crear una cosa que se llama el desfase en x y el desfase en y es en este caso únicamente va a haber desfase en x es como una especie de paralaje Vale Nos va a ir moviendo toda la escena de un lado a otro Así que para esto vamos a hacer lo siguiente y esto yo creo que es más o menos de lo último que os explicaré hoy porque esto ya os da herramientas para hacer un montón de cosas desfase global x y Entonces eso quiere decir que aquí otra vez ahora haré comentarios del código o sea vamos a implementarlo del desfase y luego ya comento todo lo que quede por comentar voy a decir bar desfase global x es igual a cer Y entonces a continuación yo por ejemplo cuando el personaje Eh pues está demasiado cerca del borde de la pantalla Pues voy a aumentar el desfase Eso quiere decir que cómo lo voy a gestionar ahora vamos a ver inicialmente el desfase es de cero vale cada vez que yo pinte tengo que pintar vamos a verlo dibuja tengo que pintar desfase global x cada vez que pinte cualquier cosa eh cada vez que pinte cualquier cosa es dis pun x más desfase global x esto es la bala esto es el imagen malo esto es el vale clase npc get image Data Dónde está dibuja a ver dis pun x má desfase global y. x más desfase global OK ahora todo funciona en el sentido de que desfase global Vale ahora mismo todo es así todo va bien ahora bien en el momento en el que el personaje ahora 034 modificar desfase global y entonces digo Aquí por ejemplo en el bucle digo sí jugador x más desfase global x Es mayor que 500 vamos a poner 500 ahora veremos desfase global x voy a poner más nunca sé si es más o menos si jugador x más desfase global x es menor que 20 en ese caso desfase global menos igual lo he hecho al revés vamos a verlo siempre me equivoco vale el personaje cae entonces voy a subir y el personaje cuando se va para allá Ah perdón he puesto el que toca Sí vale a verlo cuando el personaje viene por aquí no no algo pasa voy a hacer console pun log desfase global x a ver qué pasa vale es 00 Ok Ah sí que sí que está subiendo vale Claro pero por ejemplo no Se está actualizando Entonces vamos a ver vamos a verlo hay una cosa que no me cuadra Pero vale contexto plataformas Clear re tal cual vale Y ahora contexto plataformas Fil rect o contexto plataformas draw image momento dónde estás aquí aquí a ver Pro image imagen nivel desfase global x vale vamos a probarlo hago a Será posible bueno Esto de que yo me muera en mis propios juegos es un clásico Vale ahora hago así ahí vale Ahí Pero por qué no está apareciendo el personaje es decir por qué se desplazan las plataformas y no se está desplazando el resto ya lo veo porque es al revés vamos a ver porque lo he puesto al revés Muy bien Entonces esto es el personaje es menos desfase global X en lugar de más es menos el npc es menos y La bala es menos vale recargo personaje sube y ahora al hacer así Ahora sí venga esto Sí se me ha caído vale voy a hacer que ocurra antes vaya me he matado yo mismo voy a hacer que ocurra antes y ahora pongo comentarios Okay esto no me hace falta ya voy a poner que esto es 400 y esto es 120 Por otra parte esto es más igual a 2 y esto es menos igual a 2 y esto okay esto o no Bueno ahora veremos esto de que me caiga es un poco desafortunado vale Ahí no Pero por qué te caes debe haber alguna razón por la cual me estoy cayendo y ahí se cae vale Ahí hay algo que no está cogiendo bien ahí hay algo que no está cogiendo bien y creo que sé lo que es vale Ya sé lo que es porque la colisión no está teniendo en cuenta Eso es Cuál es la colisión cuál es la colisión a plataformas Ahí está bueno pero sí que Ah colisión a plataformas colision a plataforma sí que debería tener en cuenta a ver jugador mueve sí que debería tener en cuenta Bueno ahora debamos eso dis pun x menos pero es que Ah sí sí no no ya no lo sé a ver 10. X menos desfase global creo que no es eso pero vamos a probarlo pues parece que sí que es eso vale pero para Hola que me muero vale Okay Bueno pues sin pretenderlo he creado un juego que mete bastante presión en el jugador no lo pretendía Pero bueno Okay Mola podemos debugar para ver por qué pasa eso porque como no llegue tiempo me voy a morir y me he muerto Vale pues bueno vamos a comentar código y tenéis ya Ah unas cuantas herramientas para poder hacer un plataformas y vamos allá vamos a ver vale bucle Y entonces digo si el jugador se acerca demasiado al límite de la derecha en ese caso aumenta el desfase lo que quiere decir que todo se mueve hacia la izquierda en el caso si el jugador se acerca demasiado al límite de la derecha lo que debería estar sucediendo es mayor que 400 sí lo que debía estar sucediendo es aumenta el desfase en lado contrario vale debería ir vale eh igual bajarle un poco la velocidad de desplazamiento sí la velocidad es esta la velocidad es el más do y el os2 o sea eso como si lo queréis derivar a una variable externa por supuesto Vale entonces para cada fotograma limpio el contexto de las plataformas porque a continuación pinto las plataformas actualizadas de espacio vale es decir con el desplazamiento vale para cada uno movemos a todos los npcs llamando sus métodos vale calculamos distancia esto es función Pitágoras vale esto es el cursor que se me va a bailar Ok bien y ahora a continuación como último paso hoy pues voy a hacer algo que llevamos ya tiempo queriendo hacerlo vale eh los enemigos también se desplazaban en la izquierda No lo sé Espera yo creo que se desplazaban bien pero momentín claro como solo he creado dos un segundin que voy a crear más y así lo veremos mejor Ah número npc es 12 ah claro a ver o sea los enemigos se desplazaban hacia la izquierda porque tiene que ser así es decir voy a eliminar que si no me matarán y ahí me matarán venga va claro o sea se desplazaban hacia la a hacia la izquierda porque tiene que ser así si no estarían flotando o sea se desplazan correctamente los enemigos van con la van con esto van con el escenario otra cosa es que en lugar de crearlos ya me he matado en lugar de crearlos de C A 502 pues lo que tendría que hacer los enemigos momento que te lo digo los npcs más Random por 512 más Random por 2048 vale para que estén en tal si o los instancias todos a la vez ves Mira los instanciado en 0248 momn o los vas instanciando conforme va corriendo la escena o sea esto como os digo es 1 formas diferentes de hacer las cosas y podéis hacerlas como queráis no sé si más Random por 2048 no sé si me ha hecho mucho caso Pero bueno lo que sea y ahora a continuación Mirad ahora para finalizar lo que voy a hacer es lo siguiente vamos a ver voy a crear una carpeta 035 y Separar en archivos que esto os va a hacer mucha ilusión me voy a img vale me voy a esa carpeta y pego img a continuación me voy al código y este código lo pego aquí como Index html vale Y ahora por ejemplo me puedo crear una carpeta js y dentro de esa carpeta js puedo crear muchas cosas por ejemplo puedo crear clases y entonces digo creo Perdón esto no aquí creo un nuevo archivo y lo llamo js clases jugador js Y entonces vengo por aquí Me cojo la clase jugador Me cojo la clase jugador la pego en jugador y no olvidemos aquí decir Script src es igual a js bar clases bar jugador js Y si quiero saber más de lo que tiene jugador pues ya me iré a jugador vale Ahora vuelvo a hacer lo mismo y digo T npc js Y entonces me cojo aquí el npc me lo muevo a npc y en Index html esto es npc js vuelvo me voy a bala Class bala me hago un nuevo archivo lo guardo y aquí importo bala vale una vez que tengo Esto bueno clases lo puedo eliminar ya porque está claro que ya lo tengo como referencias externas ahora imágenes Pues en el mismo orden preferentemente en el mismo orden que tengo en el código pues y ahora me voy y digo t guardo subo No sé cómo subo aquí y separar y js Vale y lo guardo como carga imágenes js Y entonces vengo aquí Me cojo todo este Cacho y me lo llevo a carga imagenes. js y aquí evidentemente le digo carga imágenes js declaraciones iniciales pues declaraciones iniciales me creo un nuevo Script declaraciones iniciales js y lo pego y declaraciones iniciales Vale lienzos pues lienzos punto js ks No js por qué me lo pone como código c punto js No sé porque me lo hayaa puesto como código c Vale y lienzos js controles muy importante vale T pego guardo controles punto No sé por qué puñetas me lo guarda como punto F controles punto js luego hay gente que se deja el bucle en la principal vale Pero a otra cosa que os digo es que puedo crearme un archivo llamado funciones punto js vale Y por aquí arriba Me llamo a voy a llamarlo aquí arriba del todo a funciones.js vale Y ahora ya al final del todo Me cojo todo esto es el bucle se podía tirar cosas del bucle las clases se podía separar Sí por supuesto Esto no es perfecto vale creo un nuevo archivo lo pego y bucle js y aquí bcle js siempre que hacemos algo así esto que acabo de hacer se llama una refactorización vale siempre que hacemos algo así automáticamente a continuación hay que probarlo antes de hacer nada más para comprobar que no he metido la pata en nada pero claro Ahora respiramos Estoy es otra cosa esto ya es mucho más Guay ahora me vengo por aquí me vuelvo atrás me voy a separar en archivos Todo debe funcionar Exactamente igual que antes porque técnicamente no he hecho ningún cambio funcional y vale Y ya no sé que he hecho Ah sí que me he matado a mí mismo con La bala así vale Y ya funciona correctamente Vale entonces diferencia evidentemente es que ahora si vengo aquí pues claro tengo un archivo html tengo una carpeta con js donde veo que cada cosa está en su sitio tengo una carpeta con las clases donde cada clase está en su sitio si quiero averiguar qué es lo que hace el jugador pues no tengo que ir para arriba y para abajo en el código Buscando el jugador sino que me vengo a jugador y tengo el jugador en su archivo y si quiero averiguar qué le ocurre a la bala pues me voy a la bala y tengo una clase solo para la bala Vale entonces yo el método de desarrollo que he utilizado es el que os recomiendo que es que empieza en un único archivo y al principio es más cómodo trabajar con un único archivo porque lo tienes todo rejuntados y vas a ir desarrollando en una en un en una única plataforma en un único documento Y vas creciendo Y si en un momento dado veis que habéis hecho tanto código que os llegáis a agobiar pues Oye pues no pasa nada pues en ese caso lo que hacemos Es que lo tiramos a un archivo o a varios archivos externos y ya está y puedes continuar creciendo sin ningún tipo de problema vale bien pues eh Como veis Vale hasta prácticamente aquí es donde llega el ejercicio de la de esta semana vale de la tercera semana lo que quiere decir que la evaluación de El entregable número uno del resultado de evaluación número uno llega hasta aquí y lo que veremos a partir de la semana que viene es la el resultado de aprendizaje número dos vale por tanto esto quiere decir que hasta aquí podéis empezar a madre mía a innovar Pero barbaridades vale que los enemigos también caigan con la gravedad que los enemigos te vean y te busquen que el personaje se mueva mejor y salte también hacia delante que los enemigos disparen bala que mil veces de mil millones de cosas que podéis hacer vale entonces eh vamos a hacer pues descanso hasta prácticamente menos 5 vale 15 minutos de descanso y a partir de ahí entramos en desarrollo de interfaces y seguimos la tarde con interfaces hablamos de metodología de evaluación hablamos de primera entregable de interfaces Y a partir de ahí seguimos trabajando Vale pues venga paro la grabación a ver