Okay bien antes de empezar eh lo que sería la asignatura de procesos y servicios pues veo que eh esta semana Pues ya hay una preocupación importante acerca de Pues la primera entrega que viene este domingo y todo eso no entonces hay un poco también de preocupación con respecto a las fechas de entrega tanto primero como segundo entonces eh yo lo que vo hacer aquí momento que voy aquí a unir celdas lo que voy a hacer aquí es introducir a medida que lo vayamos Sabiendo Cuáles son las fechas de entrega de cada una de las asignaturas Vale entonces en acceso a datos aparte de que lo podemos consultar en cada una de las asignaturas vamos a verlo vale tenemos acceso a datos programación de servicios y procesos interfaces multimedia y sistemas de gestión empresarial como cinco asignaturas técnicas entonces Eh bueno Por cierto aprovecho para deciros que hace un momento estaba hablando con Amparo y os envía recuerdos envía Saludos vale que todavía está en el grupo de WhatsApp que teníamos el año pasado con lo cual por eso que lo sepáis me acabo de acordar Vale entonces eh por aquí si yo me voy a vamos a ver ejecución de consultas bases de datos relacionales serialización no ya no sé dónde estoy vamos a ver y resultados vale resultados de aprendizaje bien el primer resultado en acceso a datos eh yo juraría que lo puse Aquí no a ver en el resto de asignaturas acceso a datos juraría José Vicente que es la única que no está puesta pero en las demás sí vale vale Ok Okay Vale pues Qué curioso no resultados de aprendizaje Vale entonces pues voy a ponerlo también en acceso a datos Okay Vale entonces me voy a acceso a datos y vale dado que acceso a datos Aquí finalizaba esta semana pasada Vale pues la entrega es este domingo vale con lo cual el domingo 13 de octubre Y entonces esto es entrega domingo 13 de octubre al igual que gestión de interfaces de usuario generación de interfaces de usuario y luego análisis de motores de juegos la entrega si no recuerdo mal es el día 20 de octubre programación multiproceso la entrega es domingo 20 de octubre e instalación de sistemas rpcm domingo 20 de octubre vale con lo cual pues os iré colocando a medida que vaya avanzando el curso tanto a vosotros como a primero que ahora luego iré con los de primero las fechas y así sabéis cada práctica Cuál es la fecha límite de entrega lo digo porque así en una sola hoja de Excel y en un solo cuadrante tenéis toda la información recordad que este cuadrante lo tenéis aparte de que lo enseño yo en las clases pero lo tenéis en el tablón de anuncios de segundo creo recordar vamos a asegurarnos entonces tablón de anuncios de segundo vale Y si todo va bien aquí está la presentación Aquí está esto ya s que no aparece Ah espérate claro es que programación multimedia vale esto es porque tengo aquí luego dam 1 y dam 2 pero yo el que voy actualizando es este de aquí voy a hacer una cosa voy a compartir voy a publicar voy a insertar Y entonces lo voy a insertar Y así todos los cambios que haga los tenéis al día Vale entonces aquí edito ajustes Lo único es que veréis también la programación de primero pero bueno ya está evidentemente ignorad lo de primero y quedaros con lo de segundo y eh Y ya está entonces me copio este with y este h y este Border Okay me los copio aquí me los copio allá y guardamos Y así vamos a verlo vale Y así aquí abajo tendréis evidentemente ignor primero vale os vais aquí os vais a segundo y ahí aparecerán las fechas de entrega de Esto vale siguiente cuestión en cuanto a lo que acaba de vamos a ver un momentín en los entregables pone el 13 de octubre dónde en los entregables de cuáles pregunto no sé si te refieres a de todas las que hay fecha entonces el día 13 Sí porque copiaste el código o sea el texto y claro todo el bloque en el bloque ponía 13 Por eso estábamos un poco también asustados por eso Porque eran todos para este domingo vale no pues vamos a dejar eh tres de ellos para la semana que viene lo digo porque si no tenéis acumulación para este domingo y luego no tendréis nada hasta dentro de unas cuantas semanas entonces para eso Pues prefiero meter dos para este fin de semana tres para el fin de semana siguiente y así pues repartimos el esfuerzo de las entregas vale perfecto pues Vale pues Hala esto por aquí Entonces ahora a continuación me voy a quedar por aquí con servicios y procesos acceso a datos no esto luego programación de servicios y procesos vale bien y aquí vamos a ver estábamos con la parte de gestión de proceso el otro día empezamos a conectarnos entre hilos vale Y compartir información entre hilos y procesos Y empezamos también el tema de comunicaciones en red en digamos punto en el cual hicimos una introducción y una demostración a la comunicación en red y a la computación distribuida vale hicimos un ejercicio que el ejercicio era muy tonto pero era muy claro pienso acerca de os en la cual unidad en la cual Vais a encontrar pues grandes ventajas con respecto a lo que hicimos el otro día lo que hicimos el otro día fueron peticiones asincrónicas utilizando una tecnología como es php que tiene sus grandes ventajas vale sus enormes ventajas pero también de vez en cuando tiene desventajas una desventaja que tiene php con respecto por ejemplo a procesos y servicios es que si tú a php le pides algo Tienes que abrir una conexión tienes que enviarle php te procesa te devuelve y se cierra porque php funciona así vale Porque php recordad que es una tecnología que proviene de los años 90 y que por tanto está pensada para las conexiones web de los 90 que es que te conectas me pides algo yo te lo devuelvo y me cierro Para no gastar memoria sin embargo vamos a ver a continuación que existen otras tecnologías mediante las cuales el un servidor se queda abierto y que el servidor se quede abierto quiere decir que podemos guardar memoria y utilizarla en todo momento esto quiere decir lo siguiente Mira yo a continuación me voy a ir al bloc de notas lo digo porque sé que con esto que os acabo de decir diréis vale no me he enterado de lo que has dicho No pasa nada porque lo voy a demostrar esto es no esto es una presentación para una cosa que estoy participando que de hecho ahora luego os lo diré os diré Qué es vale estoy editor de texto bien y no voy a crear un archivo nuevo me lo voy a guardar como eh segundo procesos y servicios vamos a ir voy a ir a multihilo vale Y ahora hablamos de comunicaciones en Red voy a vamos a ver a compartición de información entre hilos vale bien Voy a ir a 001 php o 001 edad. php o inventario php bien y yo aquí por ejemplo yo digo eh php eh inventario es igual a 10 unidades Tengo 10 unidades en el inventario y a continuación digo inventario menos con lo cual eco Ay qué rabia eco tengo vamos a ver tengo e inventario punto elementos en el inventario muy bien voy a ejecutarlo me voy a local Host me voy a dam me voy a segundo me voy a servicios y procesos me voy a comunicaciones en Red me voy a eh Dónde estás No ahora iremos a sockets pero un momentín quiero demostrar una cosa Antes de sockets compartición vale inventario Tengo nueve elementos en el inventario Okay pero si yo ahora recargo si ahora recargo sigo teniendo nueve elementos en el inventario y si vosotros os conectara a mi máquina veríais que siempre tengo nu elementos en el inventario Por qué Pues porque cada vez que alguien carga este Script el Script carga desde cero te pone 10 te quita uno y te lo saca por pantalla el otro día vimos por ejemplo que esto En el caso de las comunicaciones en Red pues puede resultar inconveniente en el sentido de que eh si yo por ejemplo en este caso quiero que varias personas se conecten quiero que esas personas con compartan la misma información que yo vale vamos a ver si te puedes conectar a mí que no lo sé no sé si lo tengo abierto Entonces como estamos los dos conectados teóricamente a la misma red voy a abrir un terminal sí dónde Ah en el móvil no en la VPN vale Sí no ya estás aquí eso digo Vale entonces eh intenta conectarte a 192 168 1 y ahora 2 25 Voy a intentarlo Yo por cierto 192 16 8 1 2 5 Uy no web navegador sí sí 1 2 5 Okay en principio yo en Loop en local Host puedo entrar a ver si tú desde fuera puedes entrar vale si te conectas a directamente esa IP y aparece la página de apaches que estamos bien Sí perfecto fenomenal pues esto me va a servir para enseñaros que a partir de aquí tenemos dos tecnologías que podemos utilizar una de ellas es Eh python ya la conocéis Vale pero yo os voy a decir creéis que la conocéis pero no la conocéis Vale ahora os voy a enseñar una cosa y la segunda tecnología de la cual os quiero hablar estos días que de esa tecnología Creo que nunca os he enseñado nada que es no de js probablemente habremos hablado pero creo que no habéis visto nada de material mío de no dejs no pregunto creo que en primero no sé vale pues eh A continuación perfecto Pues nada vamos a empezar con python Más que nada porque es algo que ya conocéis y claro Albert Por eso digo no me suena si en Prim primero en programación dimos algo de node pero no lo sé vale No pasa nada Pues no os preocupéis un vídeo Ah vale Pero el vídeo era poderoso no el vídeo era como de 5 o 6 horas creo recordar porque es mi vídeo poderoso de No claro Sí TR horas o así vale puede ser ya recuerdo ahora sé porque lo había apartado de mi mente eso vale pues no pasa nada ahora luego igual no es hoy igual es el próximo día vale Pero cuando veamos node veréis que tiene su gracia bien pues ahora Mirad lo que voy a hacer es que me voy a abrir me voy a abrir aquí el editor y voy a hacer 002 servidor inventario flask y a continuación hasta el momento hemos hablado en alguna ocasión de que flask era tecnología mediante la cual podíamos crear un mini servidor web con python pero flash es más que eso así que vengo por aquí podría el ejercicio que hicimos el otro día eh python flask simplest server vale el servidor más sencillo que podáis imaginar el que siempre hago vale el que tiene una ruta este de aquí ya está fantástico bien entonces pego esto aquí vale Y ya está y la ruta es esta inicio return Hola mundo vale Y ya está voy a probarlo un momento me voy a ir a terminal voy a arrancarlo y aquí a continuación voy a decir CD CD segundo CD programación de servicios y procesos vale CD 002 CD Eh 006 vale Y ahora python 3 en mi caso 002 servidor inventario flask Vale ahora vamos a comprobar a ver si hay suerte y no tenemos aquí bloqueado el puerto 5000 atención a todos los que estáis en casa vale porque como estoy trabajando en una red local ahora mismo Solo Borja puede ver mi IP V no os preocupéis porque tengo contratado en ionos un micros servidor dedicado un vps realmente con lo cual ahora luego igual podemos hacer esta prueba pero directamente en ionos vale pero de momento hacemos la prueba en local entonces en local en una red local quería decir entonces si todo va bien Ahora vengo por aquí 127001 5000 Hola Ah cuidado 5000 vale Y me dice hola mundo pero yo ahora a continuación lo que voy a hacer es decir que 192 168 5 5000 Okay Vale aquí no Por qué Pues porque aquí en el servidor a ver okay Y digo set listening IP tu y voy a esta IP para que me escuchen esa IP y ahí estás Esto es lo que quiero bien me vengo por aquí 003 servidor Ok escúchame en esta IP paro esto python 3003 OK ahora está escuchando en esta IP vamos a ver si es cierto Y si hago así me dice hola mundo y si ahora tú conéctate Recuerda que es la misma IP 5000 te conecta vale Perfecto Bueno pues ahora a continuación vamos a ver una cosa que es acojonante en flask y que Apache Simplemente no tiene vale como si yo el otro día quise compartir información en php qué tuve que hacer pues tuve que crear un archivo de texto y de ese archivo de texto ir quitando dando cositas vale podría haberlo hecho con una base de datos May sql podría haberlo hecho con una base de datos sqlite pero lo hice con un archivo de texto para hacer lo más sencillo que pude no Entonces eh de no sé qué es ahora luego lo miramos que acabo de ver el mensaje en el grupo de WhatsApp no sé qué es deno ni siquiera me suena deno Ah vale No sabía que existía esto pero me imagino lo que es vale que es una máquina virtual de javascript para algo como Noe vale un momentín ahora vamos a ello ahora vamos a ello Vale entonces vamos a ver pero no conocía denu Entonces yo ahora vengo por aquí y ahora vengo por aquí y voy a Modificar un poquito el Script 004 eh guardo información vale Y ahora a continuación miradme todos en la pantalla porque voy a hacer algo tan sencillo y algo que vosotros ya sabéis hacer de sobra porque conocéis python tampoco hace falta conocer mucho python hacer esto que voy a hacer y voy a hacer inventario es igual a 10 lo mismo que he hecho en php pero en flask no es lo mismo porque yo vengo ahora por aquí y cada vez que alguien cargue la función de inicio voy a hacer inventario menos igual a 1 que es el operador aritmético abreviado para la resta y ahora digo eh Te quedan más str evidentemente inventario más elementos en el inventario si yo ahora paro ejecuto el 4ro e qué ha pasado python 3 vale ejecuto el inventario y ahora a continuación Mirad espera bja un momentín un mín un momentín yo recargo espera unb local error qué te ocurre inventario where is it not associated with a value pero que me estás contando como que no está asociado con un valor Ah vale Perdón global inventario ya sabéis que python tiene esta cosita y es que en python lo que ocurre en Las Vegas se queda en Las Vegas por tanto que yo tenga aquí una variable inventario no quiere decir que la variable inventario esté entrando dentro de la función como sí que ocurre en otros muchos lenguajes de programación pero ya sabéis que la solución es poner global inventario que quiere decir que voy a meter aquí dentro la variable de inventario vale Okay perdón que me acabo de cargar la línea entonces eh paro por aquí vuelvo a arrancar vengo por aquí un momento Borja y me dice me quedan nueve elementos en el inventario Borja recarga Cuántos te quedan ocho pero si a ti te quedan och yo ahora recargo por aquí y ahora me quedan siete recarga tú seis vale esto qué quiere decir pues esto desde el punto de vista de los servicios y los procesos es acojonante porque eso quiere decir que así como php arranca te da y se apaga y cuando php vuelve a arrancar quiere decir que vuelve a arrancar desde el principio cuando yo arranco flask y os enseñaré que lo mismo ocurre con no de js cuando yo arranco flask no arranca se ejecuta y se para sino que flask se queda constantemente ejecutándose y si flash se queda constantemente ejecutándose quiere decir que si yo aquí declaro inventario constantemente está viendo si le está quitando valores a la variable inventario por eso php es un lenguaje de programación que se llama stateless es decir sin estados técnicamente te voy a decir que existe una cosa que se llaman variables de sesión que poco intenta arreglar esto vale Pero entornos como python y como no dejs son entornos que se llaman States es decir tienen estados A diferencia de php que no tiene Estados Entonces qué ocurre Pues que si un servidor tiene Estados quiere decir que para lo que nosotros necesitamos hacer que es manejar una piscina de información el servidor nos va a ser de Gran utilidad a continuación si bien estos días nos hemos estado preocupando mucho por la cuestión del cómputo el cómputo distribuido y evidentemente en estos meses durante esta asignatura nos vamos a preocupar mucho del cómputo distribuido porque es uno de los grandes objetivos de la asignatura pero hoy voy a hacer un ejercicio que creo que os va a gustar mucho y es que voy a hacer un chat con en este caso con python y con flask Pero qué ocurre Pues que voy a poder hacer un chat sin necesidad de utilizar una base de datos Porque si yo intento hacer un chat con php me daré cuenta de que no puedo hacer un chat si no tengo una base de datos detrás pero sin embargo ahora a continuación Vais a ver que con un sistema eh con Estados como flask o como no de js te puedes montar un chat sin tocar ninguna base de datos todo metiéndolo en memoria RAM y que todo lo metas en memoria RAM quiere decir que la velocidad de ese chat y el consumo de disco duro la velocidad va a ser mucho mayor y el consumo de disco duro va a ser mucho menor y de hecho Incluso el propio consumo de memoria va a ser mucho menor como siempre os recuerdo eh python es más lento que el cabello del malo no se va a notar en este caso vamos a hacer un ejemplo muy sencillo De hecho podos a hacer el ejemplo más sencillo que sea posible eh voy a programar esto en full stack es decir separando cliente de servidor y ya os digo y este ejercicio es eh imprescindible para vosotros para poder gestionar pues cualquier sistema de comunicación chats foros sistemas de ticketing cualquier sistema de comunicación eh avanzada el año pasado hubo un alumno que eh que cogió este bloque de la asignatura y lo llevó más allá y el cabrón se curó un sistema de videoconferencia programado por él mediante peticiones asincrónicas lo cual o sea o yo hoy os lo voy a Bueno evidentemente le puse un 10 porque era un proyecto super guapo o yo hoy os lo voy a enseñar con texto pero que sepáis que donde hoy vamos a enviar texto estos sistemas pueden enviar vídeo pueden enviar audio pueden enviar lo que quieras Sí existe un protocolo que se llama rtc que es para eso pero este alumno lo hacía era crear cachos de vídeo y irlos enviando al servidor era acojonante sí bien entonces yo ahora a continuación Aquí voy a hacer 005 eh chat y para hacer un chat insisto voy a hacer un chat de la forma más sencilla y entendible que sea posible voy a decir que mensajes es igual a lista con lo cual nos podemos imaginar Pues que cada vez que eh que yo cargue por aquí pues Vale Voy a ir metiendo mensajes en la lista mensajes Bien voy a hacer primero un chat anónimo luego haremos un chat con usuario y mensaje o sea con diccionarios básicamente para entendernos entonces el inicio ya no lo quiero vale global inventario de momento no lo quiero ahora pondré luego pondré global mensajes en inicio voy a poner Hola mundo pero aquí a continuación lo que voy a hacer es decir que app rot aot eh get Cuando digo get podría decir si queréis pongo Dame Porque si pongo get pensaréis que es una palabra reservada vale Y es no puedes poner lo que quieras y digo return claro si pongo mensajes me dará error vale porque en flask aparte de que aquí ponga global mensajes vale pero ret return mensajes requiere una un String entonces hago así vale ejecuto python 3005 chat y entonces eso vale Entonces esto de aquí un momentín no me lo está diciendo no me lo está diciendo Pero mira da igual Pongo aquí str mensajes y ya está Okay ejecuto Vale Ey qué pasa Ah no Qué he puesto a ver Ah no no vale perdón eh No se puede llamar inicio dos veces es Dame vale o sea no puede el nombre de la función no puede estar duplicado Okay venga ya lo tenemos Vale entonces recargo por aquí e me quedan nueve elementos ocho elementos qué puñetas est aquí qué he arrancado yo a ver Ah no que quería arrancar el cinco el chat Okay Vale venga entonces recargo me dice hola mundo Hola mundo vale Y ahora aquí digo dame y me da de momento obviamente me da una lista vacía esto quiere decir que tengo Eh pues dos rutas vale una De nada que de hecho da nada y devuelve nada y una de dame y devuelve mensajes vale Y por último Insisto que 006 chat voy a intentar hacer este ejercicio lo más sencillo posible y digo app Bueno aot voy a copiar esto aot toma Y entonces aquí mensajes pun XX vale Y aquí nada aquí voy a devolver un mensaje dos puntos Ok vale vamos a ver momentín Ok change x get parameter nam mensaje volver a generar Vale Voy a importar request Esta es la librería que me falta y de aquí vale Y mensaje es ig rear mensaje con lo cual mensajes.en mensaje Vale vamos a ver cómo funciona esto ahora pondré comentarios porque básicamente el servidor ya está así que abro servidor 006 vale Ok Ah sí Perdón y ahora es toma la función ya no es Dame sino que es toma muy bien recargo ok vale Y ahora un momento por si yo le digo Dame vale veis que me da una lista vacía si yo le digo toma and mensaje es igual a este es el primer mensaje a ver un momento dragos hace una pregunta que es del un al 10 cuánto de difícil es programar un chat gpt para una persona con de experiencia en programación sabes qué pasa es que de hecho con la clase que hicimos ayer la de interfaces El objetivo precisamente era que vierais que inevitablemente e programar un sistema de Inteligencia artificial es difícil pero yo ayer precisamente lo que quería demostraros es que hay una parte de la dificultad no me atrevería a decir 50% vale Pero hay una parte de la dificultad Exacto es ahí iba que es programar el sistema y hay otra parte de la dificultad que es entrenar el sistema vale de la misma forma dragos esa pregunta eh 20 años atrás podría ser decir Oye cómo de difícil es programar Google es decir programar un buscador Pues claro tú puedes decir a ver programar un buscador realmente es sencillo es decir tú programas una araña que se la lanzas por ahí a las webs la araña va pillando información de las webs vuelve a tu servidor y va metiendo esa información en una base de datos el concepto de Google a nivel teórico es muy sencillo ahora otra cosa es ponerlo en marcha y que tu araña no solo pille 10 webs sino que p que pille 10 millones de webs porque evidentemente el tiempo los recursos los servidores los discos duros que hacen falta para meter eso pues son otra cosa y por ejemplo si tú guardas 10 webs con una base de datos May sql lo tienes pero si tú guardas 10 millones de páginas web Pues no te va a hacer falta una sola base de datos te va a hacer falta varios servidores interconectados entre sí en una sola gigantesca base de datos Vale entonces algo como chat gpt Eh Pues claro una cosa es programar una aplicación de Inteligencia artificial que como visteis pues entre dos clases lo hacemos que de hecho es la base de lo que luego es chat gpt pero un sistema que además haya sido entrenado y que te responda a cualquier pregunta pues cuesta muchas horas de muchas personas hacerlo ten en cuenta chat gpt lo lanzaron en 2022 creo recordar al público y estaban desde 2017 programático O sea que para que nos hagamos una idea no vale entonces Mirad mensaje este es el primer mensaje ok vale Pero yo a continuación vengo aquí y me voy a dame y me dice este es el primer mensaje y ahora viene lo acojonante Y es que eh ahora a continuación vale Bueno tú Por cierto tú Borja puedes poner aquí dame y verás cómo te aparece desde el primer mensaje y entonces Yo vengo por aquí y digo hola Borja Qué tal Cómo estás vale recarga y verás que te aparece Hola Borja Qué tal Cómo estás aquí de hecho a mí me aparece También bien con esto por lo tanto y como os digo para mí viene lo fenomenal y fantástico en menos de 25 líneas hemos creado el servidor para un sistema de chat hecho con python lo mismo más adelante lo haremos con nojs veréis que nojs es igual es lo mismo vamos a comentar este código que tenemos aquí con esto acabamos la parte de servidor y ahora nos vamos a la parte de cliente si no nos da tiempo ahora acabar la parte de cliente Lo acabamos en la segunda parte de procesos y ya está entonces eh importamos la librería flask y requests para parámetros de la URL ahora creamos una lista que cuando arranca el servidor está vacía cuando arranca el servidor pero luego ya no está vacía vale Luego si queréis obviamente podríamos hacer crecer este sistema para que por ejemplo una vez cada 5 minutos me guarde los mensajes en una base de datos por si se me va la luz Porque si en este servidor yo lo reinicio se pierden todos los mensajes Claro Por eso digo que hay técnicas mixtas vale eh app creamos una nueva aplicación de servidor web vale Y ahora cuándo de hecho la ruta de ruta me la podría haber cargado Pero bueno es una buena costumbre no cargárselos cuando alguien llame a la raíz creo una función y eh devuelvo una cadena ahora viene lo Guay Cuando alguien llame a la ruta Dame defino una función meto en la función la variable mensajes y la convierto a String y la devuelvo por pantalla así de fácil vale simplemente trae la variable y tómala en la pantalla y ahora cuando alguien llame a la ruta toma defino una función meto la variable global ya sabéis que esto de declarar una variable global y luego hacerla meterla aquí con global es un poco guarrillas aquí creo una función podría pasar mensajes como parámetro de la función y luego cogerlo por ahí pero bueno como es algo sencillo lo hago en plan guarrilla atrapo el parámetro de URL llamado mensaje lo añado a la lista de mensajes y como es obligatorio devolver algo pues devuelvo un jotas son eh Pues que dice Ok y ya está ahora si esta es la clase principal en ese caso ejecuta la aplicación y escucha en el puerto eh el puerto 5000 en la IP que indico esta ip es ahora mismo una IP privada esta red pero podría ser una IP pública perfectamente bien pues eh Pues ya está vale Así que ahora a continuación voy a empezar a desarrollar la parte de cliente Voy a intentar desarrollarla de la forma más sencilla posible que luego evidentemente a tiempo de ampliar este ejercicio y hacer un chat mega guapo siempre estamos vale Pero mi objetivo ahora es crear un chat de la forma más escandalosamente sencilla posible Así que digo 007 chat. html porque ahora voy a hacer la parte de cliente así que doct type html así que Eh html Así que Head Así que Body Vale entonces vamos a ver ahora voy a hacer lo siguiente en la parte de voy a poner Main en la parte del propio chat voy a poner eh aquí Irán los mensajes y ahora input type nada input ID mensaje y ya está Y entonces a continuación por aquí voy a poner un Script donde vamos a ver qué es lo que voy a hacer bien en primer lugar cada x segundos o sea tengo que crear un igual que en videojuegos Por cierto vale para que se vaya ejecutando no tan machacón como el de videojuegos pero algo que se ejecute por ejemplo una vez cada segundo entonces fun bucle Ahora aquí y entonces digo bar temporizador es igual a set Time out bucle en un segundo y entonces digo Clear Time out temporizador y temporizador es igualarse Time out bucle dentro de 1000 segundos de hecho la buena costumbre suele ser primero declarar funciones y luego llamarlas vale Pero bueno funciona Exactamente igual bien eh lo que estoy haciendo aquí como veis es crear un bucle y a continuación Mirad y a continuación ahora 008 chat. html lo que voy a hacer es una petición fetch Así que yo digo fetch http do bar barra no me acuerdo aquí y dame llamo esta ruta llamo a dame y ya está Vale con lo cual punto den function response y return response.js y punto then func datos función datos console.log datos vamos a probarlo si yo ahora recargo vale Esto me lo dejo aquí y me voy a eh A ver me voy a 192 168 225 me voy a dam me voy a segundo programación multihilo me voy a chat vale me vengo aquí okay Qué ha pasado Dame Ah sí os acordáis del cors del maldito corse Vale pues voy a añadirle corse a esto eh Okay Ok adcore ad course quiere decir que import course a ver si está en la misma librería vale FL flask course import course y corse app Ya está no tiene más misterio Ok paro el servidor ejecuto servidor vale Y ahora aquí ahora sí fijaos como tengo una lista vacía de mensajes me está devolviendo una lista vacía de mensajes pero si yo Mirad Pero si yo ahora a continuación vengo por aquí dá meno vengo por aquí y digo mensaje es igual a ver si funciona veréis que aquí okay vale a ver si funciona is not valid jas bueno Vale claro es que en este caso lo que está ocurriendo Es que esto de aquí es decir esto de aquí técnicamente no es un js válido bueno vale No pasa nada Yo lo que puedo hacer es Modificar el servidor para decirle Qué mensaje a pen y entonces digo mensaje dos puntos mensaje es decir lo convierto a lo que en python se conoce como un diccionario ya que los diccionarios de python tienen un soporte fantástico como Jason es decir prácticamente un mensaje o sea un diccionario de python acaba siendo un jas bien toma Este es el primer mensaje vale vengo por aquí recargo Okay qué pasa a ver y dame mensaje este es el primer mensaje teóricamente esto es correcto pero si no lo está cogiendo como J son igual es porque aquí a ver Ah no pues está correcto no aquí aquí mira ahora okay mira este es el primer mensaje toma mensaje Vale Voy a hacer una cosa aquí y aquí retur mensajes as jas son J sonifi vale importo j sonifi y aquí J sunify vale venga quita Ok return J sonif mensajes me aseguro de que me lo Lance como jas a ver un segundo Ok mensaje Vale vamos a ver aquí y ahora sí me está diciendo mensaje este es el primer mensaje si yo ahora a continuación voy poniendo aquí más mensajes Este es otro mensaje que te envío pues Vale aquí al recargar me dirá Este es otro mensaje que te envío con lo cual como veis me está devolviendo un Jason con todos los mensajes que estoy enviando si de momento pongo mensaje quiero decir que más adelante podré poner autor podré poner fecha del mensaje podré poner grupo al que pertenece el mensaje hora vale podemos poner absolutamente lo que queramos la idea en cuanto empezamos a trabajar con objetos es que si he puesto una propiedad puedo poner 100 propiedades bien pues ahora a continuación en el editor de texto a ver si tenemos un chat mínimo antes de irnos al cambio de clase vamos a guardar esto como 009 chat. html y entonces yo digo vamos a ver como esto es una Ray de objetos eh console log datos yo digo datos. for each func dato Es decir para cada uno de los datos Y entonces aquí digo document query selector section sección es igual a esto sección pun Inner html es igual a nada vacía la sección y ahora digo sección punto innerhtml más igual a dato punto mensaje y si queréis le meto un br para que me salte a la línea de bajo porque si no va a ser un poco confuso bien pues vamos allá a ver voy a recargar me voy al 09 vale Este es el primer mensaje Este es otro mensaje que te envío y eso quiere decir que si yo ahora vengo por aquí y digo a ver si llega este mensaje a ver si llega este mensaje no sé si ves que acaba de llegar vamos a hacer otra prueba vamos a hacer otra prueba Vale ahora por último antes de irnos ya tengo la lectura veo que cada segundo se está encargando de los mensajes voy a hacer la escritura y de esa forma podemos empezar a chatear y ahora luego a la vuelta ponemos comentarios eh 010 chat. html y voy a decir que cuando a ver led entrada es igual a document pun query selector input y digo entrada pun onchange es igual a function y digo Aquí fch toma ad mensaje es igual a dis pun value de hecho técnicamente en code Uri dis pun value si esto ha ido bien y ahora ejecuto el 010 si esto ha ido bien y ahora ejecuto el 010 yo digo hola y aparece Hola Qué tal Cómo estás Qué tal Cómo estás pero ahora a continuación lo que quiero es que Borja y digo Borja porque estás en la red local en la que se reconoce esta IP te voy a poner por aquí eso te voy a poner por aquí el chat aquí ahí lo tienes vale entra y escribe me has puesto Hola sigue ahora yo pongo por aquí esto funciona tú me dices cómo estás Yo pongo por aquí esto funciona claro ahora mismo el chat es un poco confuso porque no Claro no se borra no se sabe quién ha escrito cada mensaje ni siquiera se ve dónde acaba un mensaje y dónde empieza el otro vale pero de momento con esto es decir con ahora las comentamos no con 33 líneas de html y javascript y con 25 líneas 26 líneas de python tenemos un chat y ya está y sobre todo lo que quiero que veáis es que tenemos un chat en el cual todos vamos a un servidor que en este caso es este ordenador el servidor está almacenando una piscina de mensajes pero yo no he utilizado ninguna base de datos para ello y eso es porque simplemente he utilizado un recurso Tan sencillo como simplemente crear una lista llamada mensajes y meter ahí dentro los mensajes esto ha sido en python cuando lo hagamos en nodejs Pues en lugar de crear una list Pues crearemos un array pero básicamente es lo mismo es un conjunto de datos que a partir de ahí guarda lo que quieras y así como en python podemos guardar una lista que dentro guarda diccionaris Pues en javascript no dejs podemos guardar una rray que dentro guarda jses O sea que al final es exactamente lo mismo vale bien son las 4 men 5 con lo cual a continuación vosotros os subís a bueno vosotros os vais a la clase de inglés Ah no perdona o a Pilar correcto vale con lo cual yo me quedo aquí porque ahora vendrán los alumnos de primero pero sí entonces hoy Ah claro vale Yo ahora tengo dos horas de marcas porque vosotros vais una hora compilar y luego inglés vale fenomenal Ok pues esto por aquí paro la grabación