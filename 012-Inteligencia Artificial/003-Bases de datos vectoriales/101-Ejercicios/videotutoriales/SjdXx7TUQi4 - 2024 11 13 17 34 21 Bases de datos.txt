bien Vamos a continuación con el simulacro de bases de datos y para el simulacro de bases de datos vamos a quedarnos todavía en esta página y vamos a ver que hay ciertos elementos que son repetitivos como por ejemplo en este proyecto vale tenemos como hemos visto Antes tenemos una cosa que se llaman capítulos y de hecho ocurre que anteriormente en el lenguaje examen de programación ya hemos hecho vamos a verlo ya hemos hecho capítulos Vale Nos hemos ido a examen programación y hemos creado una entidad llamada capítulos y en principio pensamos que le hemos dado a los capítulos los campos que realmente le corresponden vale vamos a capítulos tenemos título subtítulo imagen vídeo y texto Si yo me meto por aquí vale por ejemplo proyecto pues bueno también proyecto Podría tener título o sea Podría tener secciones vale título texto e Imagen pues no estaría mal y digo créditos bueno créditos es un vale es un listado de cosas Pero bueno tampoco está mal vale podría ser un listado sacado directamente desde una base de datos V documentación gráfica Entonces yo aquí el enunciado del examen vamos a sacar un bloc de notas tenía ya un bloc de notas no sé dónde ha ido a parar aquí el enunciado del examen posible enunciado del examen vamos a verlo y eh extrae el modelo de datos de la web que hemos usado anteriormente y eh implem Alo ahí e implem Alo en mysql Estableciendo relaciones entre las tablas donde corresponda qué relaciones puede haber vamos a verlo vamos a hablarlo por una parte está claro que tengo capítulos y capítulos tiene título subtítulo tiene Imagen tiene vídeo y tiene texto Okay Por otra parte tengo expertos y expertos para cada experto tengo nombre tengo Eh pues como resumen vale vamos a llamarlo así resumen de su perfil tengo un una imagen y tengo un vídeo teng una imagen y tengo un vídeo y tengo un texto Vale y tengo una descripción vale muy parecido realmente a un capítulo OK Pero ahora a continuación me dice aparece en Y entonces qué ocurre Pues que tengo que hacer algún tipo de enlace que me permita que cada vez que yo entre dentro de un experto pues me permita indicar dónde aparece Que aparezca en capítulos antes de hacerlo yo os pregunto Cómo se os ocurre a vosotros que lo puedo hacer qué me contáis qué me decís Vale tengo una entidad llamada capítulos que se va a convertir que de hecho ya se ha convertido en una tabla tengo una entidad llamada expertos que tiene toda la pinta de que se va a convertir en una tabla Claro pero Agustín Pero fk de dónde a dónde te adelanto que la respuesta sí que lleva fk Pero le falta algo Antes de fk cómo puedo enlazar yo no restricciones es fk o sea es lo mismo nombre de experto a capítulo título no Esa es la cuestión no veréis la solución esto que estamos viendo aquí Hoy es un caso típico de many to many es decir hay muchos capítulos Y hay muchos autores y cuando hay muchos capítulos y muchos autores es una relación many to many de muchos a muchos y la solución es muy sencilla es una tabla externa llamada si queréis capítulos expertos o capítulos guion expertos o capítulos a expertos da igual vale como lo queráis llamar entonces aquí lo que tendré es y de capítulo que es una fk y de experto que es una fk y ahora a continuación empezaré a meter en este en esta tabla de aquí pues para cada capítulo qué expertos aparecen en ese capítulo vale recordad que estamos modelando el modelo de datos pero ahora luego lo tenemos que implementar en la base de datos Y tenemos comprobar si esto que estoy diciendo funciona o no funciona Vale cuando nos metamos en mysql Porque ahora mismo vosotros veréis esto de aquí diréis no lo veo y yo os diré No pasa nada Ahora lo meteremos en la base de datos y veremos si lo vemos o no veremos si funciona o no vale entonces ahora por aquí qué más tengo Bueno pues tengo el proyecto Vale pues bueno puedo tener otra entidad llamada proyecto vale donde en proyecto pues puedo tener título texto imagen como para tener por ahí vale una serie de cosas No lo sé Eh bueno créditos es un rollo documentación gráfica Pues mira documentación gráfica eh tiene Imagen tiene texto pero tiene categoría vale esto bien entonces en documentación gráfica tengo imagen tengo texto y tengo categoría y eso quiere decir que me hace falta documentación gráfica categorías donde categoría es un fk vale es nombre categoría ya está vamos a ver bibliografía bueno bibliografía va Sí vale bibliografía tengo eh título autores podríamos discutir si sería una relación externa Pero bueno foto y enlace vale Digamos que ya está vale porque ya tenemos Cuántos cuántas entidades tenemos una dos 3 4 5 6 y si bien ya está bien vale incluso hay alguna que nos podríamos dejar sin hacer bibliografía podríamos dejar sin hacerla Vale pues Ahora llega el momento de implantar este modelo de datos en la base de datos y ver si esto que he dicho aquí es cierto y funciona o no vale en este caso una vez más os pongo Este ejemplo porque aquí en capítulos Pues yo puedo venir por aquí y puedo rellenar capítulos Vale y puedo decir dónde estás aquí insertar capítulo 2 la piedra eh No espérate a ver va capítulos la piedra eh No Bueno okay texto es que realmente no hay un resumen bueno da igual la piedra las matemáticas la pintura las vieras V yo que sé la piedra la piel de la capital el texto Eh Esto no acuerdo qué era Ah imagen da igual vale continuar capítulo 3 las matemáticas geometrías sagradas el texto vale Ya está ahora a continuación vamos a hacer los expertos hago una nueva tabla y digo experto ahí identificador vale nombre resumen imagen vídeo y texto marchar text marchar y text 255 255 y guardar Vale ahora a continuación me voy a los expertos cojo dos vale Este y inserto nombre resumen imagen da igual y texto Vale ahora cojo otro insertar nombre texto Tex continuar vale Y ahora a continuación yo por ejemplo quiero decir que el por ejemplo el experto 1 sale en el capítulo 1 y el experto dos sale en el capítulo 2s o por ejemplo los dos expertos salen en el capítulo 2s Vale entonces para ello vamos a ver Por cierto me haría falta el número de capítulo pero entonces para ello voy a hacer una nueva tabla llamada capítulos expertos identificador clave primaria autoincremental y digo capítulos gu bajo nombre entero porque es una clave foránea expertos gu bajo nombre entero porque es una clave foránea vale con lo cual le doy a guardar pero ahora a continuación es cuando viene esta parte que os comento donde tenemos que hacer las restricciones de clave foránea para hacer las restricciones de clave foránea yo entonces vengo por aquí en vista de relaciones y digo eh capítulos expertos eh capítulos y digo en capítulos nombre corresponde a capítulos identificador guardar vale Ahora quiero otra que se llame capítulos expertos la columna de expertos corresponde a expertos identificador le doy a guardar y acabo de hacer las claves foráneas acabo de hacer los fks de este ejercicio acabo de hacer la parte que yo diría que yo creo que es la más difícil de este ejercicio lo cual quiere decir que ahora vamos a probarlo vamos a ver si es cierto Yo vengo por aquí y digo vale capítulos expertos quiero insertar un nuevo registro y digo en el capítulo uno de la arquitectura sale el experto Antonio Cano continuar pero ahora a continuación en el capítulo 2 la piedra Sale tanto Antonio Cano continuar como en la piedra sale También Constantino de la Fuente continuar capítulos expertos Yo veo que tengo ahí un campo numérico pero sin embargo a continuación vamos a hacer un left join y en el left join para completar el examen correctamente es imprescindible probar los datos con un left joint vamos a comprobar si esto ha funcionado ya sabéis que cuando Aquí vemos un mareo de números es que tiene pinta de que ha funcionado Vale entonces vengo por aquí y en capítulos expertos me voy a hacer un sql y digo capítulos expertos left join capítulos on capítulos expertos punto capítulos nombre es igual a capítulos punto identificador left join expertos on capítulos expertos nombre es igual a expertos pun identificador y aquí arriba digo capítulos punto título coma capítulos punto subtítulo coma expertos punto nombre y le puedo decir bueno sabes qué continuar y veo que en la arquitectura sale y veo que en la piedra sale Antonio Cano y Constantino de la Fuente luego por lo tanto tengo lo correcto luego por tanto tengo este left join y recordad que si queréis luego guardarme left joint pues me hacéis un crear vista y el definidor es yo mismo ver nombre es expertos en capítulos y ya está continuar vale Y he creado una vista donde puedo recuperar puedo en cualquier momento no perder puedo no olvidar el left join que he hecho entre las tablas ahora puede ocurrir que en un momento dado el modelo de datos que tenga sea incompleto y tenga que mejorarlo vale Por qué Pues porque aquí si os fijáis en la web si veis que en los capítulos vamos a ver en los capítulos he cogido el título pero claro me falta el número de capítulo vale me falta el número de capítulo con lo cual pues igual es necesario editar un poco el modelo de datos de los capítulos y por tanto vengo aquí y digo que en estructura pues por ejemplo creo un campo y lo llamo no sé sabes numerador qué quiere decir numerador pues numerador quiere decir que esto es capítulo I y si es necesario luego V o sea IV V vi o sea numeración romana vale Lo cual quiere decir que como ya os digo antes me había dejado probablemente eso fuera del modelo de datos pero al hacer el left joint me doy cuenta de que no de que necesito ese campo Pues bueno puedo modificar la estructura puedo editar la estructura y ya está Vale y de esta forma Pues ahora a continuación en la vista si edito la estructura de la vista dónde editar vista ahí vale eh aquí examen programación punto aquí punto eh título en numerador as numerador le doy a continuar errores que te pasa Okay Vale ya aparece capítulo un la arquitectura Antonio Cano capítulo dos la piedra Antonio Cano y capítulo 2s la piedra con sentino de la Fuente vale Y por tanto si me doy cuenta de que me falta algo en el modelo de datos Pues amplío el modelo de datos Y ya está haciendo esto como habéis visto pues aparte A falta de hacer cosas como que ya son más sencillas vale como el proyecto o documentación gráfica o todo eso Pues he utilizado pues las los ingredientes que necesitamos en el examen vale vamos a resumirlos qué ingredientes necesitamos en el examen pasos uno detectar y diseñar el modelo de datos con entidades y propiedades dentro de cada entidad eso debe ser el paso número uno en el examen ahora a partir de ahí crear las tablas básicas en la base de datos implementando el modelo de datos ahora crear las restricciones foráneas y tablas auxiliares Si fuera necesario y cuatro probar el modelo de datos mediante la inserción de elementos Qué es mediante la inserción si yo me voy a capítulos expertos Y le doy a insertar y veo que aquí me aparece inserta capítulo inserta aor yo digo ostras pues esto tiene buena pinta tiene pinta de que va a salir correctamente vale Esa es la primera forma de probar el modelo de datos Y luego cinco probar el modelo de datos creando una petición left join para juntar datos de las tablas y seis no olvidar eh guardar el resultado de la vista de la consulta join en una vista vale Y ya está nada de Procedimientos nada de eventos nada de disparadores todo eso será en trimestres siguientes y esto sería el examen de bases de datos Y ya está no tiene mucho más no sé si tenéis preguntas o consultas o lo que sea Vale pues a ver momento voy a ver vale Pues voy a parar la grabación a ver Luis es muy posible es altamente posible vale lo digo porque por una parte así eh Ya tenéis los textos para copiar y pegar no tenéis que empezar ahí a picar texto para crear productos o crear clientes o crear y pensar lo llamo Juan lo llamo manel o cóm llamo este cliente vale sino que no pensáis en ese punto de vista copiáis pegá y ya está Y es que a parte ahí tenéis un modelo que ya está en funcionamiento en una web que no habéis hecho vosotros vale con lo cual podéis ver que hay una relación entre los datos vale con lo cual es probable es muy probable y también así no lo veremos hoy todavía pero mañana en la clase de proyecto interdisciplinar veréis que eh Tendremos que unir todos los puntos Vale entonces la tabla de fk la tendríamos que hacer Sí o sí creo que te refieres más que a la tabla de fk a la tabla auxiliar Vale y La respuesta es que sí porque fk es decir foreign kys restricciones de clave foránea lo Vais a tener que hacer prácticamente Sí o sí os to que el ejercicio que sea ahora en este caso en el que hay una relación many to many Pues sí que tendríais que hacer una tabla intermedia que es esta tabla de aquí una tabla auxiliar para enlazar a los capítulos con los expertos vale o sea que sí si este fuera el caso sí correcto vale Y mira por ejemplo Antes de pasar a la siguiente asignatura te voy a demostrar un ejemplo sin el manyi to manyi vale un ejemplo de una tabla relacionada con la otra y ya está verás en documentación gráfica tenemos por aquí categorías y luego cada categoría tiene eh piezas digamos vale Entonces eso quiere decir que voy a hacer una entidad llamada vamos a verlo llamada documentación gráfica categorías identificador entero 255 clave primaria autoincremental a ver autoincremental okay Y nombre categoría y yo vengo por aquí yo vengo por aquí y en nombre categoría Ay le echas que no y en nombre categoría te digo Pues mira una categoría es archivo municipal de Burgos otra categoría es caray quita venga otra categoría es biblioteca nacional otra categoría es esta biblioteca otra categoría es esta biblioteca y otra es esta vale Yo ahora a continuación creo otra tabla derivada de una entidad que es documentación gráfica creo documentación gráfica identificador entero 255 índice primario incremental es imagen es texto y categoría es documentación gráfica categorías barra baj nombre categoría esto es marchar Y esto es un entero porque es una clave foránea Así que le doy a guardar y en documentación gráfica vamos a probar si el modelo de datos corresponde yo me vengo aquí creo un nuevo registro Y entonces digo la catedral de Burgos Ah momento aquí la catedral de Burgos no la catedral de Burgos eh copio la dirección de la imagen y en Ah documentación gráfica categoría espérate es que no he hecho todavía enlace externo no he hecho la foreign Key Vale pues fuera me voy a estructura me voy a vista de relaciones y digo eh documentación gráfica a categoría la columna es documentación gráfica la tabla es documentación gráfica categorías identificador y ahora sí si me voy a documentación gráfica vale realizo la comprobación 4 vale en la comprobación 4 Aquí no aquí en la comprobación inserto la catedral de Burgos inserto la imagen y en categoría la categoría es archivo municipal de Burgos vale Y ya veo que est Esto está empezando a funcionar bien y voy a insertar y digo la catedral de Burgos Trac atrás copio URL de la imagen esto es de archivo municipal de Burgos pero luego digo ahora inserto esto de aquí que es la catedral de Burgos copio imagen y esto es de la biblioteca nacional y yo hago así y pongo biblioteca nacional y digo Wow esto tiene buena pinta vale esto tiene pinta de que se ha enlazado correctamente continúo vale Y he comprobado he realizado la comprobación 4 mediante la inserción pero ahora además voy a hacer un left join y para hacer un left joint Fíjate que en este caso concreto donde hay un One to many vale una relación de uno a muchos pues yo me voy por ejemplo a documentación gráfica vamos a verlo Espera que haga así vale De hecho voy así vais el número uno bueno pues sql y digo left join documentación gráfica categorías on documentación gráfica punto documentación gráfica categorías nombre categoría es igual a documentación gráfica categorías identificador Y entonces ahora aquí en el Select digo documentación gráfica punto a ver un momento que me llaman deame un segundo Hola Estoy en clase dime cuenta Claro sin problema Ah voy Sí okay sí sí okay Vale pregunto porque están preocupados Ah por si acaso vale vale Okay Sí Ya ya vale claro Sí sí es que como has dicho apaciguar las aguas Generalmente las aguas se apaciguan cuando están revueltas Digo por si estaban revueltas okay ok Ya