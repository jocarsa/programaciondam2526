cuando creo un archivo por ejemplo en formato xml A diferencia de cuando creo un archivo html parece como que de alguna forma No tengo un conjunto de reglas que seguir esto quiere decir que si yo creo por ejemplo un archivo html Yo sé que el archivo html tiene que seguir unas reglas concretas tiene que tener una mínima cantidad de atributos tiene que tener unos nombres de etiquetas concretos y sé que si quiero que mi página valide correctamente como que el código html es correcto y es cierto y es válido tengo que seguir una serie de reglas Pero qué ocurre cuando hago un archivo xml Pues cuando hago un archivo xml técnicamente Yo me estoy inventando sobre la marcha las etiquetas que forman parte de ese archivo me las estoy inventando evidentemente en el mejor de los casos esperemos que siempre estemos en esos casos me las estoy inventando sobre un modelo de datos existente y previamente definido O sea no si yo he puesto por aquí nombre asunto email y mensaje es porque realmente espero enviar eh un formulario que tenga nombre asunto email y mensaje y en toda mi aplicación informática un formulario tendrá nombre asunto email y mensaje es decir he hecho esto así porque hay un modelo de datos que lo justifica pero de la misma forma que puedo un archivo html y lo puedo validar contra un conjunto de reglas pues técnicamente este archivo xml no lo puedo validar realmente contra nada para ello tenemos la definición de esquemas xml la idea a continuación Es que voy a definir un esquema y este esquema definirá si este xml es válido o no entonces de alguna forma esto que voy a mostrar a continuación puede no comprenderse porque vosotros podéis decir Bueno si te creas tu xml y te creas tu propio validador el validador lo vas a construir para que valide correctamente Este xml Entonces qué sentido tiene un validador Pues el sentido del validador consiste en que si yo por ejemplo defino que este es un xml válido y a continuación varias personas o varios orígenes de datos escriben xmls de formularios de contacto mediante la definición de un esquema me aseguro que todas aquellas personas sean yo o sean otras personas o sean programas automatizados que escriban un xml lo escriban de una forma válida y que yo tenga un validador para comprobar si esto está siendo correcto o no lo está haciendo para ello por lo tanto dentro de xml voy a hacer 007 esquema y lo voy a llamar en este caso xsd este esquema a continuación va a tener el siguiente código voy a poner en lugar de poner xml voy a poner xs es decir xml esema dos puntos esquema y voy a poner xml ns dos puntos xs y voy a establecer A qué estándar obedece este esquema vale obedece al estándar de http 2. bar w3.org bar2 xml esquema y cierro y vemos como a continuación me ha cerrado la etiqueta de xs esquema una vez que estoy aquí dentro voy a hacer lo siguiente voy a hacer una cosa que no me hace mucha gracia pero voy a dividir la ventana verticalmente del editor para ver por una parte el xml y por otra parte el esquema que voy a definir en este caso como tengo que estar constantemente saltando de un archivo a otro pues no me hace especial gracia trabajar así pero en este caso es ampliamente conveniente bien Ahora aquí dentro voy a especificar que un formulario válido tendrá un elemento cuyo name será formulario porque comprobamos que es cierto que hay un elemento que se llama formulario ahora un formulario tendrá una secuencia de elementos va a tener un tipo complejo Complex type va a tener una sequence va a tener una secuencia de elementos y ahora mi xml va a tener una serie de elementos muy concretos muy definidos Element name nombre y type puedo definir tipos de datos xs String en este caso el nombre va a ser una cadena démonos cuenta como incluso estoy definiendo tipos de datos no quiero etiqueta de cierre en este caso así que voy a poner una etiqueta de autocierre voy a hacer esto un poco más pequeño así Ahora a continuación copio y pego esta etiqueta y Quiero crear una etiqueta asunto una etiqueta email y una etiqueta mensaje en este caso las cuatro son de tipo String pero evidentemente depende del caso en el que estemos podemos hacer etiquetas de tipos de datos de entero o otros tipos de tipo String o de tipo numérico con esto por lo tanto ya hemos creado un esquema un validador para nuestra nuestro archivo xml y ahora a continuación necesito realizar algún tipo de validación necesito eh lanzar este xml contra este esquema y necesito que el esquema me diga si esto es válido o no es válido vamos a hacer una prueba correcta y ahora haremos a continuación un error hay varias formas de hacer esto entonces una de estas formas es utilizando el lenguaje de programación python que Bueno es sencillo en este caso para hacer ese tipo de pruebas Entonces vamos a ver un momento y vamos a ir a idle y dentro de idle El microentorno de desarrollo de python voy a hacer un nuevo archivo voy a guardarlo dentro de C donde esté el proyecto donde tengo el proyecto htdoc webs de José Vicente modelo de datos xml y aquí voy a llamar validador punto python voy a guardarlo como 008 validador bien Ahora a continuación digo from lxml es igual o import e3 no sé si tengo lxml instalado Dentro de este ordenador voy a pulsar f5 a ver qu pasa vale Sí que lo tengo instalado a continuación digo eh archivo es igual a 006 formulario xml y esquema es igual a 007 esquema xsd xml es igual a e3 pars y digo archivo o sea voy a procesar este archivo como un archivo xml y xml esquema es igual a e3 punto xml skema donde el file es igual a esquema vamos a pulsar f5 para comprobar que De momento todo va bien no hay errores perfecto bien y ahora a continuación digo si skema validate si xml skema pun validate del archivo xml en ese caso print valida Ok els print no valida Y de paso imprímeme también error esquema pun error log vamos a por ello vamos a ejecutar este archivo voy a pulsar f5 y nos dice valida ok nos dice que el archivo ha validado correctamente pero ahora a continuación lo que voy a hacer Es que este formulario lo voy a guardar como 009 error xml y voy a poner por ejemplo por aquí nombre con mayúscula y nombre con mayúscula Este es un xml válido Es decir de este xml para sí mismo para consigo mismo es un xml válido pero con respecto a este esquema no es un xml válido por tanto ahora a continuación me voy a python ahora en cuanto lo encuentre validador me lo guardo como 010 validador el archivo ahora de entrada es 009 error Así que pulso f5 y me dice no da error Ay cuidado me dice esema is not defined vamos a verlo a ver 006 formulario valida Ok vale Y ahora quiero error xml vamos a por ello vale Ahí está eh Y bueno básicamente aquí lo que nos está diciendo es No valida y nos dice Cuál es el dump del error nos dice dónde está en este caso el error la idea Por tanto si ahora Vengo al error y lo corrijo vuelvo a ejecutar f5 y ahora nos dirá valida Ok Voy a dejar el error tal y como estaba la idea Por lo tanto es que cuando trabajamos con archivos xml podemos crear un esquema que es algo así como una plantilla y este esquema se encargará de validar que los archivos xml que vamos a escribir validan correctamente con respecto a un estándar que nosotros mismos hemos creado que insisto esto que acabo de hacer en principio puede parecer una tontería porque digo Bueno si soy yo el que escribe los xml Cómo me voy a escribir cómo me voy a equivocar Pues en un sistema informático complejo hay varias hay veces que hay varias personas que pueden escribir un xml hay aplicaciones informáticas que escriben xmls y esas aplicaciones depende de la circunstancia pueden cometer errores si los seres humanos no han programado bien esa aplicación de escribir xmls evidentemente así que la idea el concepto es que disponer de un esquema a mano nos puede servir para comprobar que todos aquellos xml que se escriban en ese sistema inform sean xmls con un con una estructura y con una sintaxis válida según un esquema previamente acordado y decidido