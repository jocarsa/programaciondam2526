bien y vamos allá Vamos a continuar me voy a abrir evel y me voy a abrir e inserto un nuevo registro Oh mira qué bien se había insertado se había guardado correctamente no sé si lo había llegado a ejecutar Pero bueno da igual lo voy a ejecutar ahora vale le doy a f5 no ha ocurrido nada de relevancia si queréis puedo volver a abrir el div browser Y entonces en div browser vuelvo a abrir la base de datos de empresa y si me voy a clientes y me voy a la hoja de datos a ver un momento refresco no se ha guardado nada a ver Ah no no perdón si os fijáis había llegado hasta copiar el create Table Pero sigue siendo create Table no se había guardado el insert Vale pues Ahora insert into clientes valius y ahora bajo y pongo nul coma esto 1 2s 3 y cu Y entonces digo José Vicente carratala sanchiz info @ josevicenteabadcoca línea no ocurre nada porque no tiene por qué ocurrir nada pero yo ahora me voy aquí a la hoja de datos y veo que en ese cite browser en dp browser pues aparecen los datos correctamente insertados lo cual quiere decir que nos sirve como comprobación de que ha funcionado vale otra cosa que podríamos hacer es ir a la carpeta correspondiente y ver que en primero en programación en 6 en7 pues empresa ahora debería ocupar un poquito más Bueno 12,3 sigo ocupando Pero vale ya hemos hecho insert voy a poner comentarios voy a ir poniendo comentarios para que el código vaya quedando claro comentarios hasta el momento Y entonces vengo por aquí y digo importo la librería de conexión a bases de datos abro una de datos existente o la creo si no existe creo un cursor dentro de la base de datos y ejecuto una petición de creación de tabla en el caso de que no exista ahora inserto un aquí no que no inserto un registro nuevo ejecuto las peticiones y es una muy buena costumbre que cerramos los recursos que previamente hemos abierto Muy bien pues tenemos ya una instrucción de inserción vamos a continuación a por una lectura la r de read entonces vengo por aquí 009 Leo los registros y ahora a continuación para leer los registros Pues voy a venir por aquí y voy a decir python sqlite Select vale Y entonces aquí después del comit le digo vamos a ver bueno cursor execute a ver cursor execute Select all from clientes Select all from clientes ya está buena costumbre si acabamos las peticiones sql con un punto y coma y aquí y entonces digo filas es igual a cursor fetch all por tanto for fila inf filas print fila y esto ya lo hemos visto voy a bajar y esto ya lo hemos visto en esto Qué es quita no quiero esto ya lo hemos visto anteriormente en semanas anteriores con mysql que es for fila in filas Devuélveme la pila que por cierto os adelanto que va a ser una tupla vale va a ser una tupla Eso quiere decir que tiene paréntesis le doy a f5 y me devuelve Una tupla entre paréntesis y la tupla tiene pues cada uno de los elementos que hay dentro de los dos registros que he insertado dentro de la base de datos diréis Antes había uno claro es que cuando estoy volviendo a ejecutar estoy volviendo a insertar otro lo cual quiere decir que si vuelvo a ejecutar ahora habrán tres vale bueno no pasa nada podría parar esto y ya está Vale podría mutear y ya está con esto ejecutamos vamos a ver ejecuto una petición de selección almaceno el resultado en una lista y proceso la lista elemento a elemento y eh imprimo cada una de las filas más adelante voy a querer que el resultado en pantalla a ser posible en lugar de como tupla se me devuelva como diccionario porque recordáis de la semana pasada que si nos lo devuelve como diccionario luego lo puedo tirar para arriba en formato j son para marcas pero hoy no estamos en marcas vale Hoy estamos en programación con lo cual hoy de momento me lo quedo como tupla y más adelante ya lo convertiremos de una forma o de otra a Jason bien eh pues Vale pues bueno Solo nos quedan las últimas dos operaciones Y es que eh la siguiente de ellas es la operación de actualización 010 actualización entonces cursor execute aquí un momen Ah no ejecuto las peticiones Bueno sí va aquí no Esto va Aquí bien update clientes set apellidos es igual a García Martínez Where identificador es igual a un la misma sentencia update que conocemos de mysql vale actualízame la tabla de clientes Ponme apellidos igual a García Martínez pero solo donde el identificador sea igual a uno así que ejecuto vale ejecuto Y no va a aparecer nada Por qué Pues porque primero lista y luego actualiza después de haber listado pero si vuelvo a ejecutar comprobaré que el registro número uno sus apellidos no son carratala sanchis son García Martínez vale porque ha actualizado ha ejecutado la función de actualización del registro número uno y si tengo esto de la misma forma copiando y pegando 012 eliminación Pues voy a ejecutar una petición a la base de eliminación delete from clientes we identificador es igual a número uno elimíname de la tabla clientes solo aquel registro que cumpla la condición de que identificador sea igual a número uno así de entrada no va a funcionar Perdón parece que no va a funcionar por qué Pues porque primero listo y luego elimino con lo cual f5 y parece que no ha funcionado porque el registro un parece que sigue existiendo Pero no es así es porque primero he listado y luego he eliminado Así que si vuelvo a ejecutar os daréis cuenta como si bien antes el primer registro era el número uno ahora el primer registro es el número dos lo que quiere decir que me he cargado el registro Número Uno Vale con esto como veis pues lo que he hecho es una especie de megamix Frankenstein entre el código de python que hicimos el otro día para conectarnos a mysql y el código sql que hemos utilizado para mysql pero que también sirve para ese cite la diferencia evidentemente es que yo ahora si por lo que sea esto fuera un programa que ahora se va a convertir en un programa y yo os lo quisiera pasar vosotros fuerais mis clientes Vale pues yo simplemente os pasaría el archivo python os pasaría este archivo punto db y ya está y paso la aplicación y su base de datos con mysql no puedo hacer eso porque no puedo arrancar el servidor de mysql y llevártelo a tu ordenador habría que hacer una exportación y te paso el archivo sql y el tuyo lo importas y usuario y contraseña y toda la pesca vale por tanto para aplicaciones para escenarios en los cuales eh eso procede vale el darle al cliente la base de datos la base de datos sqlite es una forma fantástica de poder hacerlo en clases anteriores hemos trabajado con archivos de texto hemos trabajado con archivos Jason vale pero una base de datos sqlite nos da las comodidades del lenguaje sql Y es que tú escribes muy poco y el sistema por dentro ya hace toda la magia bien pues en la siguiente hora y media tal y como os prometí la semana pasada lo que vamos a hacer es lo mismo de Siempre vamos a crear una aplicación que tendrá una bienvenida que tendrá un menú que tú elegirás un elemento del menú y en base a lo que elijas te dejará hacer una cosa u otra vale insertar clientes la diferencia de hoy es que en lugar de insertar los clientes en mysql los vamos a insertar en sqlite vale es la misma aplicación de siempre así que a continuación me voy a crear un nuevo archivo y 012 eh docstring Entonces quito todo esto y digo programa agenda con eslite copyright 2024 por José Vicente carratalá versión 0.1 empezando en clase moraleja siempre empezamos igual Vale cuando vosotros hagáis un programa tenéis que empezar igual que yo siempre lo empiezo que es con un mensaje de bienvenida doc String documenta la aplicación todo eso a continuación 013 print de bienvenida y digo print voy a poner un pequeño separador esto es totalmente estético print programa agenda print por José Vicente carratalá print copio todo esto de aquí arriba de hecho hay un truco y es que como la letra en python es monoespaciada Pues yo puedo hacer esto y así técnicamente cuando pulso f5 pues se queda centrado vale es una de las ventajas de que la letra por defecto del Terminal sea monospace sea monoespaciada bien una vez que tengo el mensaje de bienvenida ahora ya sabéis el menú 014 menú entonces print selecciona bueno menú principal print eh uno crear un nuevo registro print dos listado de registros print TR actualización de registros print cuatro eliminación de registros vale Y luego haremos el clásico 5co salir a continuación 015 selecciona una opción Así que print no opción es igual a input selecciona una opción dos puntos ya sabéis es recomendable f5 selecciono una opción pulso la uno no ocurre nada porque aquí el programa se sale ahí el programa acaba y ahora a continuación igual que hacemos siempre atrapo la opción Así que atrapo la opción y digo If opción es igual a 1 va a pasar algo el If opción es igual a 2 va a pasar algo el If opción es igual a 3 va a pasar algo el If opción es igual a 4 va a pasar algo de momento pongo un print vamos a insertar un registro print vamos a listar los registros print vamos a actualizar un registro y print vamos a eliminar un registro f5 pulso número uno me salgo vale me salgo porque al acabar este If el If pues se sale y ya está siguiente paso que podemos hacer lo de siempre lo meto en un While true lo meto en un bucle infinito vale 017 bucle infinito hasta aquí esto es lo mismo de siempre While true Hay muchas formas de hacer un bucle infinito Esta es la más sencilla que yo conozco dos palabritas clave y ya está Vale f5 creo un nuevo registro toma eh listado de registros toma actualizo registros toma ya sabéis que control C para salir y si alguien se le atraganta al control c pues le dais aquí arriba a cerrar y ya está vale que a veces pasa a veces se puede enganchar bien Ahora a continuación si sigo con el trabajo con ese kulite he creado una tabla de clientes y recordáis los cuatro Campos cinco realmente que tiene esa tabla vale identificador clave primar incremental nombre apellidos email dirección tenéis ese modelo de datos en la cabeza vale Lo cual quiere decir que ahora 018 insertar te pido los datos Y entonces digo nombre es igual a input introduce un nuevo nombre vale si tenéis en la mente los datos el modelo de datos nombre apellidos email dirección introduce nuevos apellidos introduce un nuevo email introduce una nueva dirección claro cuando yo acabo esto si queréis voy a poner espacios los espacios son simplemente para que lo veáis mejor vale f5 crea un nuevo registro introduce un nuevo nombre a bbb ccc ddd Vale pues volvemos al menú principal es decir no hace nada porque no le he dicho que haga nada Pero qué es lo que voy a hacer a continuación pues lo que voy a hacer a continuación es meterlo en la base de datos cómo lo voy a meter en la base de datos Bueno pues voy a reutilizar voy a copiar y pegar el código que he hecho en el ejercicio anterior entonces me vengo por aquí Au aquí Me cojo el código del ejercicio anterior y digo import sqlite 019 importo librería import site ahora 020 Me conecto a la base de datos conexión sqit 3 Connect import OK ahora 021 creo un cursor Pues connection pun cursor no sé qué vale Y ahora quiero insertar Pues mira justo antes hemos hecho un insertar así que copio insertar cursor commit cursor execute Perdón este comentario me lo quito luego igual ponemos comentarios insert into clientes claro espérate aquí comillas y os acordáis de lo que hicimos el otro día que esto os confundió un lo cual es normal que es comillas triples más comillas triples vale hay otro formato que igual os confunde menos el de comillas triples funciona Porque lo vimos el otro día que funciona pero visualmente es como madre de Dios Cuántas comillas hay ahí Vale entonces igual otra forma que os confunde menos es con cadenas formateadas donde pongo una F al principio aquí al principio lo cual quiere decir te voy a formatear una cadena y aquí dentro lo que puedo hacer es poner llaves y entonces pongo nombre vale con lo cual parece que está dentro del String pero el sistema ya sabe que F quiere decir que me cambia lo que ponga ahí dentro por una variable entonces nombre apellidos eh Espera que te lo diga email y dirección vamos a ver si funciona lo digo porque el otro día os enseñé la sintaxis de la triple comilla hoy os enseño esta y a cada uno de vosotros elige cuál le gusta más O cuál ve más clara o con cuál se siente más cómodo o lo que queráis vale vamos a comprobar si funciona y por cierto al final debería hacer un conexión punto Close es una buena costumbre vale f5 quiero crear un nuevo registro el nuevo nombre es AAA eh los apellidos son bbb el email es ccc y la direcciónes ddd le doy a enter vaya por Dios vamos a ver s he cometido un error y es que aquí al final le he puesto una coma y como es el último campo no debe llevar coma vale pulso f5 creo un nuevo registro AAA bbb ccc ddd todo parece que ha ido correctamente pero yo ahora a continuación me voy a div browser recargo y veo que tengo AAA bbb ccc ddd es decir es un dato metido directamente desde el programa que he creado en python vale Vamos a continuar como veis básicamente lo que os decía hace un momento vamos a hacer Frankenstein es decir ahora vamos a ir copiando Trozos de este programa que hemos hecho al principio de la clase y los vamos a ir pegando Dentro de este programa hasta conseguir un programa crud completo como los programas que hemos hecho en la semanas anteriores pero hoy con sqlite Vale hasta que veáis Cómo hacer un crud de 1 formas diferentes pero siempre haciendo el mismo tipo de programa bien Ahora a continuación le digo 022 ahora listo los registros existentes entonces digo si opción es igual a dos Bueno pues me copio todo este bloque me copio todo este bloque y ya está Y catap plch le doy a aquí esto fuera vale le doy aquí a sangría Okay perfecto vamos a verlo f5 Quiero listar los registros le doy y se me listan los registros y vuelvo a empezar Ya vimos el otro día ya nos pasó con my sql que los registros de momento se listan un poco guarr tes es decir se me listan como tuplas directamente en la pantalla pero ya está no pasa nada no hay ningún problema vale luego ya sabemos que más adelante digo más adelante en la clase de hoy pues en lugar de decir print fila a lo bestia pues lo que haremos es formatearlos más bonitos y ya está Vale pero de momento lo que quiero es comprobar que los elementos crud me funcionan bien y ahora a continuación vamos a implementar las siguientes dos operaciones pues copiando y pegando vale Así que 023 voy a implementar la de eliminar es la más fácil si opción vamos a eliminar un registro identificador es igual a input indica el registro que quieres eliminar ID Ok vale Y ahora digo m Aquí y ahora digo cursor execute le pongo una F aquí le pongo unas llaves pongo identificador y el programa ya sabe que llaves identificador equivale a meter ahí dentro la variable identificador vale vamos a ver si funciona vamos a ver si esto ha funcionado ejecuto Vale y digo Quiero leer los registros vale veo que tengo un registro número dos con lo cual digo Vale ahora Quiero eliminar un registro indica el registro que quieres eliminar quiero eliminar el número dos no me dice nada podríamos poner un mensajito de retroalimentación de registro eliminado correctamente o algo así vale Y ahora quiero listar otra vez los registros y veis que empieza en el tres porque ya no tengo el dos es decir soy capaz de insertar soy capaz de seleccionar soy capaz de eliminar y ahora a continuación Pues por último y antes de hacer un pequeño descanso de 5 o 10 minutos vamos a eh implementar la última operación la cuarta operación así de paso ahora en la segunda mitad de la clase hablamos un poco de evaluación Igual que ayer hablamos de evaluación en lenguajes de marcas hoy hablamos de evaluación en programación los parámetros van a ser los mismos tranquilos vale van a ser los mismos para todas las asignaturas pero también así un poco sabéis pues qué va a aparecer en La evaluación de que va a ir el examen todo eso bien Así que me vengo por aquí y 024 actualización y a continuación sí Fran es lo que os decía antes vale Yo la idea es enseñaros cuantas más formas mejor de sintaxis y ya a partir de ahí cada uno pues elige la que quiere No hay gente que prefiere escapar cadena hay gente que prefiere cadena formateada lo que sea vale bien Y entonces ahora lo que voy a hacer es actualizar con actualizar evidentemente voy a este bloque de aquí el bloque de update y le voy a pedir los datos de Aquí vamos a hacer una cosa como Sony 52 vamos a hacer ahora un descanso de 5 o 10 minutos Vale ahora la vuelta voy a hacer un parón del vídeo