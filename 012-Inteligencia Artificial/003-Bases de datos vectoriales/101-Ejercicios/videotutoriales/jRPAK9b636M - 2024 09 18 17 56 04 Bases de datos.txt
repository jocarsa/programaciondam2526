espérate antes de nada La semana pasada me dos Monsters En una tarde yo lo hice una vez no yo lo hice una vez solo una vez okay si lo tienes comprobado Vale y vamos a ver Ah vamos a ver Ah sí Aquí y ahora quiero trabajo vale la semana pasada estuve trabajando bases de datos desde el otro ordenador con lo cual en primer lugar me voy a bajar php my admin me descargo php my admin me lo voy a instalar en el servidor voy a ir grabando Ah mira ya estoy grabando vale de esta forma también sabéis y vais aprendiendo que el php my admin técnicamente es una aplicación que os podéis Descargar vale Así que php my admin por aquí me lo copio me voy a dam me voy a pegar a crear un php my admin vale me lo pego por aquí y ahora voy a tener un problema y es que el lunes me instalé en este equipo un mysql Server pero creo que no ha creado el usuario de inicio vamos a verlo a ver si hay suerte localhost bar phpm admin Ok vale No se encontró la extensión mysqli bien No pasa nada porque yo vengo a continuación y digo sudo app install php-mysql contraseña Okay muy bien instalamos mysqli volvemos a intentar ejecutar Vale ahora tengo el acceso al servidor de mysql O sea al sistema y ahora usuario ni idea Root no va a ser que no allow no password Root no vale vamos a Root un momentín y la contraseña va a ser que no y qué usuario tengo yo de Linux mi usuario es José Vicente vale José Vicente y José Vicente Okay Ah no perdona No mi contraseña No es José Vicente Okay pues no bien así que qué es lo que tenemos que hacer a continuación pues niños de smr del año pasado os acordáis de este problema vale lo que tengo que hacer es entrar en la base de datos y crear vamos a ver un usuario bien para ello os acordáis y espero que os acordéis porque igual yo no me acuerdo mucho vale de sistemas operativos en Red os acordáis que mysqli Perdón mysql guu Root acceso denegado Vale y vamos a ver qué hacíamos porque lo que hacíamos era Añadir una contraseña Ah No espera sudo mysql guu root vale eso ya es otra cosa bien Ahora lo que voy a hacer os acordáis es crear un usuario en mysql Así que Perdona s mysql Así que mysql create user with password and sabes qué pasa ch gpt claro mysql create user José Vicente passw acc Así que create user José Vicente identified by José Vicente Ok query Ok bien a continuación gr all privileges On A todo a José Vicente Así que Ok vale último baja y por último flush privileges y pegar y Ok si todo ha ido bien he creado un usuario y le he dado permisos para todo un José Vicente facilito vale porque estoy O sea no estoy en producción estoy en un servidor local así que me voy a php my admin José Vicente Hola vale ventín José Vicente y Ya estoy dentro de actualizar contraseña Ya estoy dentro de php My admin vale eh A ver os cuento estáis en primero vosotros dos sois los que uno era Front y otro era Back no ahí estamos vale Ya sé quién sois bien entonces estábamos comentando antes el tema de contratación de eh un Hosting para subir la página web y todo eso vale entonces vosotros por ejemplo muy probablemente No vais a tener que pelear con un servidor de tipo Linux para hacer ese tipo de cosas pero en segundo ya no estamos hablando si conocéis a alguien de segundo de subir una página web a un Hosting No ya estamos hablando de programar aplicaciones y subirlas no a un servidor compartido sino a un vps a un dedicado y por tanto es donde probablemente nos hará falta conectarnos por terminal a un Linux y pelearnos un poquito con mysql vale lo digo sobre todo para la gente que conmigo hizo smr el año pasado que hicieron la asignatura de sistemas operativos en Red donde estuvimos peleando con Linux y acabaron hasta los de mí pero un poco para que sepáis que lo sé perfectamente tranquilos vale pero que sepáis que eso tal y como os dije el año pasado lo vamos a necesitar para construir aplicaciones porque el año pasado era un poco frustrante porque a vosotros de smr os decía bueno vosotros montáis un servidor para que luego venga un desarrollador y aplicaciones era un poco Como hostias se lo montó a otra persona Ahora no vale ahora os lo Vais a montar para vosotros mismos bien pues vamos a bases de datos Y como os digo la semana pasada en bases de datos eh lo tenía en otro ordenador en el Windows con lo cual lo que voy a hacer es que me voy a ir a editor de textos hicimos pocos códigos quiero decir tampoco hicimos muchos editor me voy a abrir aquí me voy a dam me voy a Primero me voy a bases de datos me voy a bases de relacionales me voy a modelo de datos no me voy a terminología Ok y me voy aquí os acordáis de create database mi empresa por tanto me voy a sql create database mi empresa y continúo Y ahí aparece mi empresa a continuación usar bases de datos bueno use mi empresa no hace falta crear tabla create Table empleados bar charar y lo que sea create Table empleados y por tanto ahí hay empleados y dentro de empleados tengo esto que estáis viendo aquí Vale pues Ahora sí yo creo que este es el punto en el que nos quedamos la semana pasada con lo cual Vamos a continuar a partir de aquí Ah no tipos de datos os acordáis que estuvimos hablando de los tipos Okay claves primarias vamos a por ello bien eh yo ahora mismo si yo por ejemplo inserto un José Vicente apellidos Mira sabes qué voy a hacerlo con sql Así que sql y digo insert into empleados vales e introduzco el nombre José Vicente los apellidos carratalá Sánchez el teléfono lo puse como no me acuerdo cómo lo puse pero lo tengo aquí como entero Vale pues número entero 1 2 3 4 5 6 7 8 y el email info @ José viicente carratala comom punto y coma buena costumbre copio continúo Data too long for email qué le puse a email le puse 20 Ah vaya Bueno pues jara.com ya modificaremos la longitud No pasa nada así que copio continúo y tengo un registro insertado y ahora a continuación me guardo esto en claves primari como insertar dos filas por qué dos filas vale Yo vengo aquí a examinar y veo que tengo una primera fila insertada a continuación voy a sql de nuevo voy a insertar el mismo dato y le doy a continuar y qué es lo que ha ocurrido Pues que tengo dos veces el mismo dato cuál es el problema en una base de datos contener dos veces el mismo dato Pues que puede haber una persona o perdon a dos personas que se llamen José Vicente puede ocurrir que esas dos personas se llamen José Vicente carratala sanchis bueno que el email sea el mismo no debería ocurrir evidentemente que el teléfono no O sea el mismo no debería ocurrir pero técnicamente podría ocurrir vale sería complejo pero podría ocurrir la idea de introducir una clave en las bases de datos consiste en introducir una pieza de información tal que el sistema genere una clave única y esa clave sea irrepetible para cada uno para cada una de las personas Tú puedes ser José Vicente carratala sanchiz y otra persona puede ser José Vicente carratala sanchiz pero es imposible que los dos puedan tener una misma clave Primaria para ello se pueden hacer dos cosas o bien se puede modificar una alter table para Añadir una clave primaria o bien puedo hacer un Drop Table empleados un momentín 005 eliminar tabla y así de paso os enseño Cómo eliminar tabla es Drop Table empleados punto y coma sql Drop Table continuar estás seguro que deseas hacer esto sí vale Y me acabo de cargar la tabla Drop Table y ahora a continuación voy a hacer lo siguiente voy a crear una nueva tabla llamada empleados que va a tener ya no cuatro sino cinco columnas y por tanto digo la primera columna se va a llamar como os dé la gana pero coged un poco un estándar de como vale puede ser ID puede ser identificador vale puede ser lo o clave primaria o como queráis pero Poner un nombre que siempre utilicéis a continuación voy a poner lo mismo de antes nombre apellidos teléfono email si queréis marchar lo mismo del otro día voy a poner 100 y ya está me cago un poco ya está 100 bien Ahora a identificador Cuándo le pongo va a ser un número va a ser un número entero si yo le pongo 10 quiero quiere decir que 1 2 3 4 5 6 7 8 9 y 10 quiere decir que puedes tener hasta este número de usuarios este número de empleados vale quiero decir que yo muchas veces pongo 255 porque siempre pongo 255 porque más vale que sobre que falte pero muchas veces es una barbaridad Y no sobra por todas partes voy a ponerle 10 Ahora Eso sí a continuación me vengo aquí a la izquierda a la derecha Perdona y veo que puedo tener diferentes tipos de índices hoy de momento vamos a hablar de índices primarios puede ser un índice único eh os he comentado el otro día en tipos de datos que dado que existen tipos de datos espaciales geométricos puede haber un índice espacial no lo quiero utilizar ahora vale espacial no quiere decir del espacio exterior sino de un espacio tridimensional bien Hoy quiero un índice primario acepto esto como viene y además no tiene por qué sea autoincremental pero yo quiero que sea autoincremental si yo no le digo que sea autoincremental cuando yo meto nuevos registros me estabilizo de yo hacerlo autoincremental pero si a my sql le pico el autoincremental se ocupa la base de datos y de entrada es mejor ahora para empezar bien eh Qué motor de almacenamiento quiero de momento y no deb ya os comentaré qué hace cada motor incluyendo este motor tan gracioso llamado agujero negro que literalmente es un agujero negro que se come la información Vale entonces por cierto una cosa muy Guay muy divertida de php My admin es que antes de darle al botón de guardar tienes un botón muy Guay de previsualizar sql es decir todo lo que has hecho te lo convierte a código sql y me viene muy bien para aquí para 006 crear tabla con clave primaria sql php admin me pone el código muy a lo bestia pero bueno No pasa nada porque yo luego hago así aquí aquí y aquí vale y todo esto que está dentro del paréntesis pues lo puedo poner con sangría para que veáis realmente la petición squele buena bien Así que acepto el sql guardo Y si os fijáis ahora tengo la misma una tabla que tenía antes pero tiene una llave es una clave primaria es un número entero ahora a continuación voy a recuperar eh Aquí voy a recuperar el insertar filas vale insert into empleados y ahora aquí pongo si queréis otra vez esto lo voy a bajar para que lo veáis más claro creo que el teléfono lo he puesto ahora como marchar Y entonces en vales pongo nul es decir te inserto un valor nulo en el identificador eh para que puedas meter lo que tú quieras bien Esto que estoy haciendo realmente es la sintaxis abreviada de la inserción de registros en sql Qué quiere decir lax la sintaxis abreviada no estoy haciendo referencia a la las columnas y Por tanto se entiende que tengo cinco columnas y que los datos van a caer en el mismo orden Exacto que yo los pongo a mí me gusta mucho esta sintaxis pero hay que reconocer que no es la más recomendable Así que vengo por aquí insert into empleados me voy a sql inserto ese sql le doy a continuar y comprobamos que funciona y donde yo he insertado nul comprobamos que automáticamente autoincremental se ha insertado el número uno la segunda sintaxis más recomendable esto es 007 eh insertar con clave primaria la segunda eh sintaxis más recomendable consiste en poner insert into empleados identificador coma nombre coma apellidos coma teléfono coma email si queréis lo pongo así para que se vea mejor Primero le avisas Aquí primero le avisas de qué es lo que Vais a introducir y a continuación le metes los datos que Vais a introducir esto es eh 008 insertar con números de columna copio eh sql pego continúo y fijaos que aunque he insertado los mismos datos pero el identificador es el dos por tanto la clave primaria que sirve para realmente identificar a ese elemento es el dos una cosa muy graciosa Es que yo ahora a continuación voy a borrar este registro y voy a insertar uno nuevo para borrar ese registro 009 borrar un registro voy a utilizar el comando de delete from empleados es decir borro de empleados pero falta ahí vale si yo hago un delete from empleados me voy a cargar toda la tabla empleados todos lo hemos hecho alguna vez yo suelo decir que nadie se puede llamar administrador de base de datos hasta que no se ha cargado una base de datos vale correcto o metes el we o no te van a dejar vale en este caso voy a decir que we identificador es igual a 2 por ejemplo me voy a cargar el segundo registro bien copio me voy a sql pego estás seguro que deseas eje sí estoy seguro bien eh empleados vale me he cargado el número dos y ahora lo más interesante viene cuando voy a volver a insertar un registro si yo inserto un registro si yo inserto un registro qué identificador diríais que se va a insertar qué diríais Claro que vosotros ya lo sabéis pero Qué diríais vale Fran y andrey dicen el tres vosotros qué decís el tres por qué ya vale pues Efectivamente es el tres vale vamos a verlo y la razón es muy sencilla veréis el identificador es algo así como el dni de registro claro con la diferencia de que el dni es solo para ciudadanos de un país dni para España mientras que un identificadores para cualquier persona de cualquier parte del mundo si yo tengo el número dos el empleado número dos y el empleado número dos se saca una cuenta bancaria y tiene 100 millones de euros y a continuación me cargo el usuario dos pero a un nuevo usuario que llega le asigno el dos al usuario dos el nuevo usuario automáticamente recibe 100 millones de euros lo cual no puede ser vale por eso es la razón por la cual el dos a partir de este momento nunca se va a utilizar A menos que yo lo fuerce es decir ahora mismo hay un hueco el programa Recuerda que hay un hueco y el programa no va a rellenar ese hueco otra cosa es que yo como ser humano a mi cuenta y riesgo y se supone que sabiendo lo que hago puedo forzar a que algo me rellene el número dos eh veréis que las los motores de bases de datos nos proporcionan un montón de herramientas y a veces esas herramientas para asegurar la integridad de los datos hay cosas que no nos dejan hacer eso muchas veces nos frustra mucho porque tú dices pero vamos a ver si es mi ordenador si es mi base de datos Cómo no me dejas hacer Esto vale cuando esos momentos lleguen os explicaré el Por qué un programa un una un gestor de base de datos no te deja hacer algo probablemente en la gran mayoría de casos os enseñaré a forzar que sí que te deje hacer eso pero cuando forzamos un motor de base de datos tenemos que entender lo que puede ocurrir vale bien siguiente cuestión a lo largo de estos meses os enseñaré también mediante línea de comando a hacer copias de seguridad de bases de datos en la clase de hoy os voy a enseñar ahora a continuación hacer copia de seguridad en plan fácil en plan sencillo desde aquí desde php my admin vale para hacer una copia de seguridad en php My admin sin línea de comando me voy a la base de datos me voy a exportar me voy a elegir el formato sql que es el que viene por efecto y simplemente le doy a exportar hago clic elijo dónde se va a guardar la base de datos por ejemplo en mi escritorio y ya está y compruebo como en mi escritorio ha aparecido una base de datos una exportación de una base de datos llamada lo que sea mi empresa. sql os lo voy a decir ah Fran un moment Ah Lu Dónde queda lo de o sea Dónde queda reflejado el dos os lo voy a decir No me haréis ni caso luego habrán Problemas siempre que vayáis a hacer una modificación de una base de datos y penséis que hay un mínimo riesgo de que os cargué la base de datos copia de seguridad muy de vez en cuando las el motor de base de datos de may sql cuando lo Windows puede fallar hay formas de arreglarlo Pero hay veces que ni Arreglándolo Vale cuando ese momento llega yo os diré dónde está tu copia de seguridad A lo cual vosotros me diréis no he hecho yo diré Pues a la Vale entonces de la misma forma que es importante para vosotros ahora ir haciendo copia de seguridad de del código que vais desarrollando en programación y en lenguaje de marcas también es muy importante hacer copia de seguridad de las bases de datos que Vais a ir trabajando vale Especialmente cuando además el código está en una carpeta que lo puedes sincronizar con github pero mysql no está dentro de github te está metiendo las bases de datos en una carpeta protegida con lo cual es más difícil de sincronizar lo que estoy haciendo eso sí como estáis viendo es guardaros todos los códigos sql para que tengáis todos los mandos que ido utilizando evidentemente porque si no se quedan atrapados dentro de php My admin o dentro de mysql o dentro de lo que sea bien sigamos a ver con qué nos dice ahora el temario que os debo hacer sufrir momentín dam estábamos con claves primarias dam y eh bases de datos Okay estábamos con eh claves primarias restricciones de validación hoy todavía no índices características no Ah uhu claves ajenas vamos a trabajar con claves ajenas vamos a ver veréis yo a continuación vamos a ver un momentín Aquí voy a crear un par de tablas más voy a crear por ejemplo a ver bueno una tabla más Mira empleados voy a crear una tabla llamada direcciones porque un empleado puede tener varias direcciones es decir si yo asumo en el modelo de datos Y ya os hablaré de normalización de bases de datos lo comenté la semana pasada os dije Creo recordar esta regla si un empleado tiene una dirección la normalización de bases de datos quiere decir que tiene que estar en la misma tabla en la tabla de empleados pero si un empleado puede tener múltiples direcciones se establece una relación de uno a n y por tanto deben ir en Tablas diferentes Eso quiere decir que yo ahora a continuación me creo una nueva tabla la llamo direcciones primera columna identificador número entero de 10 elementos y digo eh Pues calle código postal y país la calle es un marchara el código postal en España es un número pero en otros países incluye letras con lo cual voy a poner marchar país Bueno lo puedo poner como nombre de país o como código de país O podría hacer un enlace a otra tabla voy a dejarlo como marchar bien y aquí pongo calle pues 100 caracteres código postal 50 caracteres país 50 caracteres y el identificador es una clave primaria autoincremental me falta algo aquí a ver yo estoy guardando una dirección Pero esta dirección A quién pertenece tengo que guardar un campo más que sea a qué empleado pertenece esa dirección ahora bien agrego una columna se agrega una columna vacía y aquí viene la cuestión y es cómo llamo al empleado Cómo referenci la dirección a qué empleado pertenece Bueno pues si he creado una clave primaria en la otra tabla quiere decir que puedo llamar a empleados y voy a poner gu bajo empleados nombre Vale ahora veréis porque es una eh es un estándar de may sql para luego saber qué columna te saca Así que claro si yo estoy referenciando a un identificador primario de otra tabla es un entero es decir si el ID primario es un entero la referencia externa es un entero vale Yo vengo por aquí le digo 10 previsualiza sql aquí Esto va a ser 010 crear tabla de direcciones vale guardo y ahora digo voy a crear mira aquí este a este empleado lo voy a llamar Juan este es García vale esto que estoy haciendo es editar directamente en php My admin ya os diré Cómo es en update sql Y tal Pero de momento lo estoy haciendo plan rápido y aquí digo dónde estás insertar y digo el empleado uno vive en la calle principal H número cinco del código postal 4600 en España Claro si yo hago así Bueno lo pongo aquí que no esto no lo pongo aquí ahí vale esto quiere decir que cuando yo inserto esto que estáis viendo aquí empleados nombre coincide con el ID de ese empleado esto que he hecho recibe el nombre a nivel filosófico de restricción de clave foránea pero cuando digo a nivel filosófico quiere decir que realmente no he establecido una relación entre las claves o sea yo como ser humano lo sé pero mysql no lo sabe vale aunque mysql no lo sabe yo puedo hacer esto que voy a hacer ahora es difícil lo voy a hacer simplemente como demostración ya os lo contaré más pasito más adelante pero yo puedo hacer una consulta Cruzada yo puedo decir vale cógeme esta tabla y unelas con este dato un join Así que yo vengo por aquí insisto voy a hacer una petición esta ni se ocurre intentarla ya la haremos más adelante y digo Select all from empleados left join direcciones no on direcciones punto empleados nombre es igual a empleados identificador es decir ese campo de aquí coincide con ese campo de allá y ahora digo empleados punto nombre coma empleados pun apellidos coma direcciones calle coma direcciones códigopostal eso que es una petición Cruzada eh 011 petición Cruzada recordad que esto no lo tenéis que hacer todavía esto Solo una demostración y la ejecuto y funciona y me está reconociendo que el primer usuario José Vicente carratalá tiene la dirección calle principal de este código postal y también me dice que Juan García no tiene todavía ninguna dirección porque he hecho un left join ya os contaré los tipos de joins que hay bien hasta aquí como os digo yo he hecho una clave foránea filosófica pero ahora a continuación lo que voy a hacer Es realmente crear una restricción de clave foránea para que mysql sepa que de verdad eso está enlazado por tanto para crear una restricción de clave foránea me voy a estructura me voy a la vista de relaciones es una forma de hacerlo sencillo con php my admin ahora saco el código sql y entonces digo nombre de restricción e direcciones a empleados columna la columna empleados nombre corresponde a de la base de datos mi empresa de la tabla empleados a la columna identificador reconoce que es la única clave primaria que hay con lo cual me la pone directamente previsualiza un constraint 012 eh Añadir restricción ejecuto la restricción eh Ok vale Y ahora si yo me voy a direcciones si hago no hago click pero pongo el ratón encima del número uno me reconoce que es carratala sanchiz Vale ahora mysql sabe que hay una restricción y por tanto ahora esas dos tablas están relacionadas porque acordaos que lo que estamos viendo no solo dentro de esta unidad sino mayormente dentro de esta asignatura es bases de datos relacionales no solo creamos tablas al tuntun sino que luego hay que relacionar los datos de unas tablas con los datos de otras ahora bien hasta aquí aunque por supuesto el left join no lo sabéis hacer todavía Ya os enseñaré pero hasta aquí el concepto de relación más o menos queda claro vale que un dato está relacionado con la otra Ahora hay un problema y es que si todo va bien yo a continuación voy a intentar borrar al usuario José Vicente atención lo intento borrar realmente desea delete from empleados Where y empleados identificadores igual a 1 013 intento borrar usuario le digo Ok y me dice que no vale Por qué me dice que no vamos a leer el mensaje de error no puedo eliminar o actualizar una fila pariente falla una constraint una restricción de clave foránea es decir si tú borras José Vicente Pero hay una dirección que depende de José Vicente quiere decir que la base de datos se quedará en un estado no fiable es decir habrá una pieza de información que referenciar a un espacio vacío tú fíjate la frustración que produce intentar eliminar un empleado que yo he creado y que el programa no me deje una vez más Insisto que hay muchas soluciones algunas más limpias Aunque más laras otras más cortas Aunque más sucias vale como por ejemplo quitar la restricción eliminar el usuario y volver a crear la restricción vale Hay un montón de soluciones posibles pero En definitiva vale deciros que las aquí las claves ajenas son algo que vamos a utilizar un montón de veces bien a continuación vamos a hablar de vistas dentro de mysql Yo hace un momento una sentencia sql petición Cruzada vale ha sido una petición Cruzada que ha costado un poquito de elaborar veis que es una petición donde pido datos de una tabla datos de otra from con un join con vale tiene su sintaxis me la copio no me la ejecuto sql le doy a continuar yo ojo porque me he guardado ese código en un archivo porque si no si ahora mismo tengo el resultado pero hago clic y me voy a otra parte ese código lo acabo de perder vale lo acabo de perder en php admin hay otros gestores de bases de datos que te guardan las peticiones que vas haciendo pero aquí se pierden Cuando haces petición compleja Y esa petición te la quieres guardar si esa petición es de tipo Select es decir si esa petición es de tipo Dame datos en pantalla se puede guardar en lo que se llama una vista para crear vistas cuando yo hago una petición a una base de datos Y le doy a continuar hay por aquí un botón que se llama crear vista Yo también recomiendo en lugar de utilizar un botón aprender el código sql que tampoco cuesta mucho crear una vista y entonces digo create View eh Cómo la llamo empleados y direcciones as y todo esto de aquí o sea escoger la petición que ya teníais y meterle una línea más arriba así que bueno Esto es crear vista copio sql pego le doy a continuar Hola algo está que has que me falta aquí dos puntos o qué no Ah perdón No no escucha ch gpt siempre chpt mysql create View Ah las comillas vale Ok no hace falta comillas Vale y vengo por aquí da error voy a hacer como que no Ah sin vale le doy a continuar y fijaos que ahora tengo tablas y tengo vistas y siempre que quiera volver recuperar esa petición simplemente pincho en empleados y direcciones y el sistema ha empaquetado y ha guardado esa petición sql vale por tanto que sepáis que cuando hagáis peticiones sql complejas si las peticiones sql son de tipo ver de tipo Select de tipo Dame datos las Vais a poder guardar en una fórmula que se llaman vistas vale lo utilizaremos muy a menudo frecuentemente bien con esto vale vamos a no esto no lo vamos a saltar de momento vale lenguaje de descripción de datos vamos a Perdona usuarios y privilegios vale lenguaje de descripción de datos técnicamente Ya lo hemos empezado a utilizar que si el cre database que si el create Table que si todo esto lenguaje de control de datos es lo que trabajaremos para crear usuarios Grand privileges todo eso pero ahora mismo no y ahora mismo lo que más me interesa es esto de aquí realización de consultas el otro día os acordáis que os comente que en informática hay un concepto clave que es crud que es create read update delete vale crear actualizar no crear leer eh actualizar Eliminar todo este bloque tres del temario trata de seleccionar de dame Mientras que el bloque cuatro del temario trata de insertar borrar y modificar vale por tanto de crud a continuación en el bloque tres vamos a tratar la r y en el bloque cuatro trataremos la c la u y la d antes de empezar lo primero que voy a hacer es crear una tabla Pues que tenga unos cuantos registros divertidos vale para poder hacer diferentes peticiones para ello vamos a ver voy a crear una tabla nueva llamada clientes voy a ir a identificador voy a poner nombre apellidos em email y población edad sí bueno fecha de nacimiento es que eso de edad no es un dato muy válido en una base de datos Porque va a ir cambiando pero la fecha de nacimiento no vale Yo creo que más o menos ya vale venga identificador es un entero índice primario nombre es un barch esto es un barar email es un va a ser unar población va ser un y fecha de nacimiento va a ser un date motivos obvios Eh Esto va a ser Mira me cago 255 255 Ah date no aplica Así que previsualiza sql Eh Esto me lo guardo en no no quita en consultas en proyección vamos a empezar por aquí en 001 crear base crear clientes venga va clientes. sql vale clic aquí Ok bien y OK Vamos allá una cosa muy divertida que podemos hacer es que claro ahora diréis ahora ponte a rellenar clientes pero yo puedo usar One More Time chat gpt para decirle mira tengo esta tabla necesito eh que me des los insert para crear 10 clientes aleatorios para esa tabla y ya está así que vale Ahí lo tenemos quiero decir que hay veces que podemos utilizar chat gpt No solo para corregir código o para automatizar código sio hay veces que incluso para cosas como estas nos ahorramos un montón de vale copiar código me lo voy a pegar por aquí 002 clientes aleatorios vale pego ahí la información ahora me vengo aquí le digo insertar Perdona le digo sql insert into clientes le digo continuar y fantástico a vivir sabes Voy a no voy a insertar 1000 más pero voy a insertar 10 más de vez en cuando Hay que ser agradecido Muchas gracias dame 10 más porque así cuando chat gpt domine el mundo y nos mate a todos pues por lo menos igual se acuerda de los que eramos agradecidos yo que sé y nos mata 5 segundos más tarde pero en fin Vale pues vamos allá vamos a ver y Okay venga copiar código voy a pegar también esto por aquí me voy a local Host me voy a sql me voy a esto y ya está Vale perfecto pues una vez que tengo una mínima base de datos con la que trabajar vamos a volver al temario y vamos a analizar la proyección en primer lugar vamos a ver eh dónde estás aquí vale Y ahora es 003 selección bruta la selección el Comando de selección más bruto que puedo hacer sobre una base de datos es este de aquí en primer lugar Comando Select ya sabéis para read para leer asterisco que es dámelo todo from partícula obligatoria para especificar sobre qué tabla quieres trabajar y el nombre de la tabla así que de hecho literalmente si os dais cuenta cuando yo hago clic en clientes literalmente el programa está haciendo Select from client vale pero le doy a sql pongo yo Select from clientes y continuar Oye cuando me lo hace sql me pone estos acentos abiertos como en valenciano vale Por qué Pues porque técnicamente en mysql se aceptan espacios en nombres de tablas y si tú tienes un nombre de tabla con espacios mis eso no te lo va a reconocer May sql sin embargo si lo pones comillas o le pones acento abierto el acento abierto no colisiona con nada porque los ingleses no tienen acento abierto y por eso no colisiona con nada vale te permite poner espacio mi recomendación no pongáis espacio vale de la misma forma que mysql hace un montón de años que es un y code y te acepta eñes y acentos en nombres de tablas y nombres de columnas mi recomendación no pongáis acentos ni eñes en nombres de columnas vale antes habéis visto que bueno en la clase anterior cuando estábamos publicando una web que yo por ejemplo tengo un proveedor que se llama ionos donde habéis visto que yo he subido la web a un servidor Bueno ionos es un proveedor que es alemán Aunque da servicio a España pero es un proveedor que da alemán O sea que es alemán y si me pongo a averiguar resulta que el servidor Donde antes he subido mi página web es un servidor que está en carue que es una ciudad alemana que yo no sabía que existía pero en principio parece que para los oficionados al fútbol resulta que es una ciudad muy famosa porque hay un equipo de fútbol que se ve que es famoso no me gusta el fútbol con lo cual yo no lo sabía vale eso qué quiere decir pues que estoy subiendo mis datos a un servidor alemán igual le subo un acento y el servidor se queda como diciendo esto Qué es vale por tanto por compatibilidad No pongáis ni acentos ni eñes ni espacios en los nombres de columna y en los nombres de tabla y en los nombres de bases de datos otra cosa es en los datos vale Ahí evidentemente sí pero me refiero a los identificadores bien Select from Select all from clientes eh continuar y me lo devuelve todo bien a continuación os voy a enseñar poquito a poquito algo que antes he pasado rápidamente pero es que el temario está un poco así vale el temario hay veces que te hace hacer cosas que hasta el siguiente capítulo no ves realmente pero es el temario del boe bien Así que a continuación 004 yo puedo seleccionar columnas acordaos al final de la tarde que haga un Push de yit Hub y así subo todo lo que hemos hecho hoy Entonces yo puedo decir Select nombre coma apellidos de clientes no tengo por qué seleccionar lo todo copio pego continúo y solo tengo nombre y solo tengo apellidos más cosas que puedo hacer la proyección de Campos implica el que de cara al usuario final que eso es algo que tenemos que hablar el que se considera exactamente usuario final esta columna me la está poniendo como nombre pero yo digo nombre de qué pues aunque la columna se llame nombre 005 proyección con alias yo puedo decir nombre as nombre de cliente y apellidos as apellidos del cliente el alias de columna me permite que aunque internamente en la base de datos la columna se llama nombre minúsculas además sin embargo si yo hago una proyección y yo utilizo alias de forma estética de forma temporal aparece en la columna nombre de cliente y apellidos del cliente vale bien a continuación Dentro de este apartado se nos invita a que os enseñe cómoo ordenar registros por defecto los registros están ordenados por orden de clave primaria ahora bien yo en un momento dado puedo cambiar esta ordenación por defecto Mirad voy a poner identificador as ID de mysql coma guardo pego toco pongo continuar vale Y desde May sql y veis que está ordenado por este campo Pero y si yo por lo que sea imagínate que soy un profesor imagínate sabes y quiero ordenar mis alumnos por apellido lo típico de un profesor pues en ese caso que sepáis que yo puedo cambiar el criterio mediante el cual ordeno la información Así que 006 ordenar por campo y yo entonces digo order by nombre Perdona apellidos esto que he hecho es una mala práctica porque el order by admite dos partículas que es ask or desk Vale ascendant o descendant si yo no le digo nada por defecto es ascendant Es decir si son números es del menor al mayor si son letras es de la A la z en este caso apellidos le doy a sql ejecuto le doy a continuar y fijaos que Cano Castro Díaz Fernández Gil Gómez Y tal Pero por favor no hagáis esto acostumbrar 007 ask a utilizar aunque esté implícita vale pero la partícula ask es una buena costumbre no lo ejecuto porque va a dar lo mismo de antes otra partícula que podéis ejecutar que podéis Añadir es desk con la partícula desk Aunque el editor de texto no me la reconozca pero ya os digo yo que es válida me voy a sql hago así y le doy a continuar vale Y veis que empieza Vega Santos Sánchez Romero estoy viendo si hay nombres repetidos pero parece que no vale simplemente para deciros que yo puedo hacer por ejemplo 009 ordenar por varios criterios yo puedo decir order by apellidos coma nombre es decir ordéname por apellido Y si hay dos personas con el mismo apellido a continuación el siguiente criterio de ordenación es el nombre vale que en este caso no va a pasar nada porque no hay apellidos repetidos Pero bueno para cuando ocurra Okay vale una cosa que ahora mismo No es que no aprecié porque de hecho podéis empezar a apreciar Y es que hace un rato en programación estábamos guardando datos en una base de datos en texto en próximos días cogeremos ese texto y empezaremos a buscar ordenar y veréis que es un infierno hacer eso a mano mientras que sql es una delicia porque tú simplemente le dices lo que quieres y cóm lo quieres ordenado y ya se apañar mysql por dentro para interpretar tus órdenes y para devolverte los datos de forma correcta vale Por eso ahora mismo yo sé que no lo apreciáis Pero esto de que tú pongas esto internamente funcione eso es un milagro de la tecnología vale bien con esto hemos acabado la proyección selección y ordenación de registros de momento vale entiendo que todo claro todo okay bien sql es un lenguaje de realización de consultas no es un lenguaje de programación Aunque sin embargo tiene algunas características pequeñas de los lenguajes de programación Como por ejemplo vamos a ver que tenemos operadores y operadores de comparación y operadores lógicos Así que vamos a ver que momentín un segundin vamos a crear un nuevo espera siguiente apartado vale 001 operadores aritméticos punto sql bien eh vamos a ver porque ah bueno voy a esto y voy a decirle que aquí voy a poner 5 + as te lo sumo porque quiero o porque puedo Mejor dicho así que vengo por aquí selecciono me voy a mysql continúo e vamos a ver un momentín y 5+ 5 vamos a ver me deberías dejar Ah una coma vale espera le pongo el paréntesis Okay continúo y fijaos que me devuelve 10 de la misma forma que el otro día eh utilizábamos operadores aritméticos en python también se pueden utilizar en May sql y tú dirás Pero para qué quiero yo sumar cosas en python a perdón sql pues porque igual yo tengo una columna de edades y digo quiero a las edades sumarle Un año más O 100 años más o lo que sea vale es decir puedo hacer operaciones Matemáticas sencillas aquí dentro otra cosa que puedo hacer otra cosa que puedo hacer es lo siguiente vamos a ver un momentín eh sql Select para sacar cuántos años tienen momentín es el diferencial perfecto Vamos allá eso es una de las muchas funciones de tiempo que hay dentro de esto de may sql y digo 002 edad de los clientes vale pincho Okay nombre apellidos fecha de nacimiento cdate as edad venga Vamos allá si yo hago así si yo hago así continúo y me saca la edad que tiene el cliente Pero yo a continuación lo que quiero Oh son todos mayores de edad Bueno pues iba a hacer una Sí una petición de comparación para ver quiénes son mayores de edad y quiénes no son mayores de edad pero bueno puedo hacer una comparación para ver quién tienen más de 30 y menos de 30 Sí hay por ahí 1,29 así que a continuación voy a hacer lo siguiente vamos a ver cojo esto 003 comparación con edad y digo coma eh quieto copio pego menor que 30 vale o mayor o igual que 30 as mayor que copio sql pego creo que sí vale creo que no me equivoco en nada vamos a sa verlo igual Sí y si es mayor que 30 me da un uno o un true vale si es menor que 30 me da un cero Así que una vez más casi muy parecido a lo que hemos utilizado el otro día de comparar para poner dentro de un If en python hay If de hecho en mysql en este caso no me ha hecho falta utilizar un If pero tengo que my sql me está calculando Quién es mayor que 30 y quién no es menor y qui Es mayor que 30 esto nos llevará a una discusión a lo largo de los meses acerca de bueno si lo puedo calcular con python y lo puedo calcular con sql Con qué lo calculo no hay una respuesta Clara y concreta a esa discusión hay muchos criterios que podemos poner encima de la mesa para tomar una decisión u otra vale Sí que es cierto que en un momento dado eh vosotros habéis visto que estoy intentando separar las cosas por capas Vale entonces en un momento dado hay un criterio de decisión que es Cuanto más pueda hacer la base de datos mejor y más trabajo le estás quitando al lenguaje de programación y luego también si un buen día os acordáis que teníamos html en la vista python en el controlador my sql en los datos si quitamos peso a python el día de mañana podemos quitar python y podemos meter otro lenguaje de programación con más facilidad pero a la vez nos estamos volcando en mysql Y si el día de mañana queremos quitar mysql y poner otra cosa Tendremos que asegurarnos que tenga las mismas funciones que my sql vale Por eso digo que no hay un a o b sino hay criterios y hay vale diferentes formas de tomar la decisión pero hoy de momento lo que quiero es Pues digamos mostraros lo que aparece en el temario bien operadores lógicos y ahora digo vamos a ver un momento Espera que esto se me ha ido Aquí bien y ahora digo esto de aquí si esto de aquí esto es eh 004 operadores booleanos os acordáis de los peradores booleanos que son el fundamentalmente el and y el or hay un tercero llamado xor que es un infierno vale pero de momento and or Entonces yo copio esto y digo Si el usuario tiene mayor o igual que 30 and y además la edad del usuario es menor 40 en ese caso este usuario es treintañero por cumplir dos condiciones vamos a ver el ampersan yo creo que sí que es doble ampers o no no en sql es un ampers porque como al final un c cago de lenguajes en la cabeza vale o sea siempre me quedo con los conceptos pero la sintaxis sé que la voy a así que me voy a sql me voy a continuar vale y este de aquí es treintañero ese no menor que 40 Mira vamos a otro caso no no me da uno no puede ser voy a poner doble ound es más lo voy a poner aquí eh doble ersa m menor que Vale ahora sí vale entonces un momentín que le ponga doble pu por ejemplo este de aquí justo tiene 40 es menor que 40 ya no es treintañero este es 4 añero vale Este de aquí tiene 44 claramente no es treintañero este tiene 28 no es 30 añero tampoco pero este de aquí tiene 32 con lo cual es mayor que 30 pero es 30 añero vale porque está entre 30 y 39 OK Así que como veis En definitiva por supuesto dentro de sql al ser un lenguaje de peticiones de bases de datos no tenemos todos los operadores que hay en el lenguaje como python pero sí que tenemos los básicos como para vale consultas de resumen o lo que se llaman consultas agregadas veréis vamos a ver yo puedo 00003 001 eh consultas resumen. sql yo no quiero que me saques cuántos clientes tengo o sea perdona los clientes que tengo yo quiero saber cuántos tengo Así que Select count identificador as eh número de clientes ejecuto esta consulta me voy a sql ejecuto Y en lugar de sacarme la lista me dice tienes 20 clientes también por ejemplo puedo agrupar así que vamos a ver un momento que mira por ciudad vale puedo contar 002 agrupar por ciudad Así que count identificador coma ciudad as ciudad realmente ciudad from clientes Group by ciudad esta consulta no solo agrupa por número sino que puede agrupar a la vez por ciudad y por tantos criterios como queramos Así que copio pego continúo Hola No tengo ciudad yo creo que sí población Perdón población población y me dice vaya por Dios se ve que tengo uno en cada población Bueno voy a forzarlo un poco voy a decir que pues mira de Madrid pues este de granada está en Madrid este de Salamanca está en Madrid y de valencia pues este de Córdoba está en Valencia y este de Oviedo está en Valencia vale ejecutamos la consulta de nuevo estructura perdona ql y fijaos que Madrid 3 Barcelona 1 Valencia 3 Sevilla Bilbao y así una vez más cuando hago consultas de agrupación puedo elegir en base a que me interesa ordenar por ejemplo 003 agrupar y ordenar eh order by población ask esa consulta lo que hace es que me cuenta las ciudades Opa me cuenta las ciudades pero el orden de presentación Es orden alfabético ascendiente o 004 ordenar por número Yo puedo decir order by count identificador desk de tal forma que aparezcan primero los que más repeticiones hay y abajo los que menos hay sql y vale Madrid y Valencia bien a continuación en la siguiente hora agrupamiento composiciones externas consultas combinación nada quietos bien a continuación Quiero enseñaros unas cuantas cosas más de sql sobre lo que hemos visto hasta ahora esta tarde para sacarle partido llevamos 4 horas de clase Vale Nos quedan 2 horas de clase los miércoles hemos dicho que son muy duros vale porque llevamos dos horas de python una hora de marcas una hora de sql así que me gustaría hacer algo con lo cual pues despertara Vale algo que os interese y una buena forma de hacer que la gente despierte es tocar el money Así que vamos a hacer un ejercicio de sql que consiste en averiguar Mediante sql los números que tenemos que jugar a la lotería para que tengamos más probabilidades de que nos toque hay una de las múltiples loterías que hay una que se llama euromillones Los euromillones funcionan de la siguiente forma hay cinco números que van desde el uno hasta el 50 por cierto disclaimer vale con este ejercicio que voy a hacer no quiero fomentar la ludopatía y quiero fomentar el uso responsable del juego vale eso que vaya por delante y queda grabado en el vídeo que luego nadie venga a decirme que ha desarrollado una vale una ludopatía bien y luego hay cinco números del 1 al 50 y luego hay dos estrellas que van antes iban desde el 1 hasta el 11 y ahora van desde el 1 hasta el 13 ampliaron un par de estrellas para dificultar más todavía las probabilidades de que tocara además eh si Buscamos un poquito por internet vamos a encontrar que hay páginas donde puedes descargar en Excel los resultados de todo el histórico de los sorteos en euromillones hay dos sorteos a la semana jueves no perdona martes y viernes Quiero recordar Así que euromillones Excel euromillones resultados históricos de todos los sorteos vamos a ver me descargo una hojita de Excel me la descargo en ods ya sabéis que es Open document spreadsheet Por cierto que me la he descargado en ods Ah mira pero no sé si tengo en este equipo no verdad no tengo instalado el libre Office o el Excel vale en este caso libreoffice con lo cual voy a Descargarme el libreoffice mira que cuando el otro día me instalé el Linux aparecía un marcaje aparecía un campo que decía quieres instalar eh aplicaciones de ufim mática y dije no pues Pam vale tenía que haber dicho que sí pero bueno un momentín y ahora en un minuto se instala y así abrimos el ods y lo podemos trastear una buena noticia que os voy a dar yo suelo aprovechar este ejercicio para mostrar que php my admin cuando importamos tiene la capacidad de importar open document spreadsheet directamente en mysql vale por tanto es una buena excusa eso sí antes tengo que preparar bien el ods pero es una buena excusa para demostraros Cómo se puede convertir de forma rápida un archivo de hoja de cálculo en una base de datos mysql un momento instalando un segundin voy aprovechar para ver Okay abrir realmente lo que quiero es esto claro ahí estamos siguiente Ah Espera que se me ha apagado el monitor eh cóm que no finalizar no esto no vale vamos a ver que no quiero base de datos quiero calc Esto sí vale estoy abriendo libre Office calc una hoja de cálculo me voy a archivo me voy a abrir me voy a escritorio me voy a loto ideas vale me voy a abrir y tengo esto por aquí veis Esto es lo que no me gusta y es que me han combinado las celdas eso my sql revienta porque el mysl no entiende eso así que momentín vale Así que voy a cargarme ese campo esas filas voy a insertar filas arriba y pongo fecha n1 n2 n3 n4 n5 este esa columna que es para hacer bonito en Excel pero sql no le va a gustar nada elimino columnas y es estrella uno estrella dos ahora sí tenemos un formato que mysql puede entender o sea se puede importar ods pero formateando olo correctamente bien me voy a guardar esto eh fin Bueno aquí guardar vale cierro por aquí y como os decía quiero demostraros que Ah perdona No otra cosa que quiero hacer otra cosa que quiero hacer para que el nombre de la tabla derivado sea el correcto es que el nombre de la hoja aquí vale el nombre de la hoja sea eh euromillones Porque así automáticamente May sql creará una tabla llamada euromillones vale que no pasa nada que si lo hace mal luego lo puedo cambiar pero cuanto menos lo cambie pues mejor bien me voy a mysql me voy a importar selecciono el archivo para importar Y le digo la primera línea del archivo contiene los nombres de columna de tabla Así que click importo Hola Ah sí oh había que una cosa de zip vamos a ver Esto es un problema de php My admin esto y Ok y tengo que instalar una cosita en php Ah ta Esto sí eh A ver eh php ubun install php zip y ya está vale pues me voy al terminal y digo sudo app install php.zip sí Ok en principio se supone que debe haber re iniciado Apache Se supone ideas primera línea importar me cago en su bueno sabes qué pasa No pasa nada Mira a ver nueva tabla euromillones estrella un estrella dos no Perdona perdona número uno número dos número tres número cu número 5 estrella 1 estrella 2 eh Nada 10 y sobra 10 10 y ahora si no me lo ha querido insertar como ods hay otro formato que me puede para importar hay otro formato que me puede valer para importar que es el csv Ah ostia la fecha y la fecha Perdón al principio de la tabla la fecha y la fecha es un marchar de momento vale Esto me lo guardo como csv Ok csv sí okay importo csv vale Y para los que estáis en casa estoy importando el archivo tiene pues 1700 líneas bien poquitas ahora a continuación lo voy a exportar en sql lo voy a meter en github y así quien quiera lo puede y lo puede meter directamente desde github momento que está importando está tardando mucho pero bueno voy a ir haciendo voy a ir abriendo yh vale cuánto ocupa ese archivo eh lista 87 56 cas no me cuadra que para 56 cas vale voy a hacer así No sé qué está haciendo pero de hecho el procesador me está empezando a rascar que sea que es imposible con esto que estamos haciendo a ver qué procesos están gastando más cpu voy a hacer una cosa Yo creo que my sql se me ha quedado frito entonces me voy a sudo service my sql server restart Wow vale vamos a ver vale es que me extraña porque se ha quedado frito sudo service apach 2 restart Ahora sí Vale mi empresa tablas euromillones bien cuántos hay a 81 columnas o sea realmente se ha quedado a mitad de importar voy a volver a importar pero es que no me cuadra que se haya quedado tan frito para importar 81 columnas es imposible si estos datos son nada entonces Bueno voy a vaciar euromillones voy a importar ese archivo csv voy a cerrar el calc a ver si eso tiene algo que ver csv vale okay csv okay no claves foráneas y ya está es que no tiene más misterio Hala venga Si no voy a buscar otras fórmulas porque es imposible que ocurra esto vamos a ver va o es vale espera Okay otra cosa que puedo hacer es guardarlo como Excel prueba xlsx usar formato Excel paro esto paro Apache Me voy a phb my admin me cargo la tabla euromillones me voy a importar importo Dónde está prueba vale formato sql no Ah espera claro qué formatos me dejas importar vamos a ver vale otra cosa que os digo a ver eh euromillones es que igual tengo ya la base de datos por aquí euromillones sql interesante bien así que de Noemí Sí vale perfecto descargar en guardar vale esto en php My admin en la base de datos importo euromillones sql base de datos no seleccionada vale Okay importo euromillones esql esto es otra cosa y ahora vengo AB millones y veo que tengo 1684 vale igual nos faltan las tiradas del último año pero por lo menos podemos ir empezando a hacer cosas os voy a guardar ese sql dónde estás aquí en la carpeta de github Y así pues si lo queréis ir descargando lo podéis tener eh vases No consultas voy a ir a agrupamiento bueno os lo dejo aquí en el raíz vale me voy a github subo esto y así pues si alguien la quiere la tien en la carpeta de tal bien esto qué quiere decir pues que yo ahora por ejemplo puedo venir a euromillones puedo venir a sql y puedo decir Select all from euromillones le doy a continuar pero lo tengo todo en crudo esto no me ha ayudado mucho Por cierto este registro lo voy a borrar porque es el que tiene las columnas y no me sirve para nada Es más Igual me estropea los datos bien y a continuación Quiero saber para el número uno cuál es el número que más ha salido Cuál es el número que más veces se ha repetido así que me voy a sql aplico lo que hemos aprendido y digo Select n1 coma count n1 as el número propiamente dicho count as número de veces que se ha repetido ese número si yo ejecuto esta consulta no va a funcionar momentín Que guarde esto en el editor eh 005 repetición de números de número uno en euromillones vale le doy a continuar y me dice Claro si haces un count se supone que vas a utilizar un Group by Así que vengo por aquí y digo Ah venga va y digo 006 agrupar por número y digo Group by n1 copio pego continuar y me dice el 8o se ha repetido 78 veces el cco se ha repetido 128 veces pero yo digo esto En qué está ordenado no está ordenado es un lío yo no puedo ver nada ahí vale Así que ahora digo vale Ahora quiero ordenar los datos vengo por aquí y digo order by eh order by n1 por ejemplo vamos a verlo order by n1 ask ya sabéis estructura sql continuar Ah pues mira aquí ya empiezan a aparecer cositas dentro de que uno de los objetivos más adelante no es muy pronto pero es que cojamos datos de una base de datos para con un lenguaje de programación como python generemos una gráfica hay una librería de python que se llama matot que es que te lo hace solo vale pero antes de que lleguemos a eso quiero que sepáis que my sql tiene por aquí herramientas para hacer gráficas a partir de los datos que están muy chulas Así que pincho en Mostrar gráfico y tengo una gráfica a partir de los datos vale puedo sacarla como línea puedo sacarla como barra o columna no e al revés como columna bien y me dice mira en el número uno en la casilla número uno el número que más veces ha salido es el 01 luego el 02 el 03 el 04 y así bien eh otra cosa que puedo hacer vale es decir vale Ahora quiero el número dos 008 ahora el número dos porque eso de que en la casilla un el número que más sale es el un es un poco raro Aunque es así vale Así que n2 repito la consulta para el número dos contin continuo Hola Qué ha pasado n2 Ah perdón n2 momentín n2 vale Ok me voy a yo ahí no veo nada pero me voy al gráfico Oh interesante ahí vale Y veo que en la columna dos Pues los números que más sal son estos de aquí bien otra cosa que puedo hacer es decir no me rayes con columnas y con historias quiero ordenarlo por el que más ha salido O sea no quiero que me digas un 2 3 4 5 el número de veces quiero ordenarlo según las veces que ha salido vamos a por el ganador Así que puedo hacer un order Buy ordenar por número de veces que ha salido Así que Group order by Group by desk primero los que más y luego los que menos sql Select eh calma eh Uh madre mía Perdona que no count esto continuar y me dice que 80 y 80 veces ha salido el número 11 y el número 15 en sql también hay un parámetro que es limit que es como Mira no me cuentes movidas no me enseñes números Quiero saber el que más solo quiero ver uno así que para ello 010 limitar resultados y aquí le digo limit un como que dice limit 5 o limit 10 vale lo que queráis Así que copio sql ejecuto y te dice mira en la casilla dos tienes que jugar al número 11 porque ese número ha salido 80 veces bien antes de continuar teniendo en cuenta que son las evidentemente una pregunta que suele surgir todos los años porque este ejercicio lo hago todos los años es Oye pero realmente toca la respuesta es que si durante las siguientes semanas jugáis a euromillones con estos números os daréis cuenta de que estadísticamente toca más de la media pero a nadie nunca le ha tocado el premio gordo de los euromillones vale o sea que eh luego también os voy a decir ah no no y eh ayer a los de segundo les hablaba de aleatoriedad pero era los de segundo no a vros de primero y os debo decir que en cuanto a los euromillones las reglas que deciden Eh Al igual que las loterías españolas vale las reglas que deciden qué número salen más y qué número salen menos tienen que ver con cosas tales como por ejemplo Cómo fabrican las bolas Cómo fabrican el bombo también evidentemente si yo que soy un pelagatos me pongo a analizar con sql las tiradas como os podéis imaginar la gente que organiza los euromillones hacen esto a diario durante años y en el momento en el que se dan cuenta de que hay un número que destaca más que los demás pues igual El fabricante de las bolas le dicen tío que está saliendo más un número que los demás Igual me ha fabricado una bola un poco mal y Esa bola sale siempre con lo cual nuevas bolas vale con esto lo que os quiero decir por tanto es que Estamos trabajando estadísticamente Estamos intentando Buscar desviaciones en la estadística pero no os penséis que vale Ahora sí si jugáis y queréis hacer la prueba porque antes creo que eran o 1 o 2 eur por tirada no sé podéis jugar un mes sin esta este análisis y luego otro mes sin este análisis o sea con este análisis y veréis que con este análisis toca por encima de la media pero bamos por encima de la media 3 o 4 eur vale No creáis que va a ser 3000 por encima de la media pero probadlo y ya veréis bien con esto por lo tanto Bueno ahora a partir de aquí podemos generar diferentes tipos de peticiones Por ejemplo yo conocí a una persona hace muchos años él era muy friky del tema est de loterías que me habló de la suerte negativa o sea la suerte positiva es que si un número ha salido mucho es que va a seguir saliendo mucho la suerte negativa es que si un número no ha salido es que ahora le toca salir con lo cual Pues hay gente que toca a los números que salen más y gente que toca O sea que juega a los números que salen menos con lo cual en este caso Yo evidentemente podría decir que vamos a ver eh 011 suerte negativa vale Y por tanto eh un momen order by count ask limit 1 y por tanto Ahora me voy a sql me voy a continuar y me sale el número 44 porque solo ha salido una vez vale eh A partir de aquí voy a ejecutar vamos a ver Esto es desk voy a ejecutar 012 eh números completos vale por tanto esto es desk Vale n1 n1 n2 n2 Voy a hacer la prueba de si el s Ah sí correcto eso herencia Ah no el otro día no eso seo hace un rato en python no A ver te cuento dentro de a ver pero me gusta que hayas visto eso en el sentido de que estás viendo que hay un código que se repite y que lo único que cambia es este n2 que sería cambiarlo en cuatro lugares entonces en python hay una cosa fantástica que se llama procedimientos almacenados que es algo así como las funciones de python donde tú creas un procedimiento pones un parámetro como parámetro de la función y luego únicamente tienes que cambiar el parámetro vale eso existe os lo enseñaré pero no hoy todavía vale si nos metemos por aquí veréis que hay disparadores y hay por aquí operaciones mín vale Y si no en sql se puede crear un procedimiento es más Mira podría decirle lo voy a hacer rápidamente para que veas que se puede pero no es cosa de hoy esto ya os lo enseñaré es más me voy a chat gpt y le digo my sql create procedure du with n2 as parameter bueno n1 vale no no es que me he equivocado un momentín nuevo with n1 has para meter vale Okay qué rápido No bien hago así me voy a sql aquí me voy sql creo un procedimiento que como ya te digo Fíjate que tiene todo el aspecto de ser una función pero en sql un método si quieres llamarlo así con lo cual ejecuto Vale y ahora un momento que encuentre dónde están aquí los procedimientos almacenados aquí rutinas en rutina Fíjate que tengo una rutina creada y por tanto yo puedo ejecutar y puedo decirle que el valor es 1 Perdón n1 Así que continuar Hola momen no eh n n1 no me lo está ejecutando correctamente creo que lo debo haber creado incorrectamente in n1 ah Okay vale momentín v voy a tocarlo yo manualmente Eh mi procedimiento int a vale Ah Aquí está el problema we qué este we Hola ah no Group by n1 Group by a y este we es lo que no me cuadra creo que ese We no va ahí Creo que ese We no va ahí vamos a probarlo Ok Vale ahora eh rutinas mi procedimiento valor n1 es un entero Ah okay vale el número uno se repite 1600 tal Ahora vuelvo a ejecutar mi procedimiento el número dos se ha repetido vaya 1683 algo falla aquí tiene pinta de que está mal cuatro Sí vale está mal pero el mensaje es ese vale el mensaje es que lo puedes ejecutar métele únicamente el parámetro Y recuerda todo el resto del código para que no lo tengas que repetir vale Así que no de momento pero ya volveremos a procedimientos y verás que sí que se puede hacer lo que estás comentando entonces voy a ejecutar este código para comprobar que me da dos filas sql dos filas a ver si es cierto y perfecto y me da okay Y me da Okay perfecto Vale pues Ahora voy a repetir un momento que tengo que enviar una cosa bien entonces copio n3 Uy n4 vale Ahí has visto bien lo que estábamos comentando de la herencia el hecho de que cuando se repite el código hay algo que no Mola n5 n5 no nos olvidemos de las pobres estrellitas entonces e1 e1 E2 E2 ejecuto Esto me voy a sql Y qué sepáis que si queréis ganar a los euromillones tenéis que jugar al número 1 al número 11 al número 26 al número 38 al número 50 estrella 1 número 2 y estrella 2 09 luego no digáis que no habéis tenido la oportunidad Vale aparte por supuesto tened en cuenta que este sql es el de una alumna del año pasado con lo cual no tiene los el último año de tiradas lo podéis conseguir de por ahí de por internet y tened en cuenta pues que luego podéis mezclar los datos de diferentes formas para es decir por ejemplo no estoy usando todavía la aquí la columna de la fecha porque igual esto que voy a decir me lo acabo de inventar porque igual los martes salen unos números y los viernes salen otros Vale pues con campos de fecha es decir con operaciones de fecha puedo decir Quiero el filtrado pero solo quiero ver los números de los viernes o los de los martes vale la idea dentro de todo esto es pues poder hacer peticiones con los parámetros bien eh voy a continuar un poco más voy a continuar un poco más en estos 20 minutos que quedan no voy a ir a subconsultas combinación optimización nada eso todavía Vale Voy a meterme un poco dentro de la unidad 4 simplemente para enseñaros eh es tres comandos muy sencillos que son los comandos de insertar registros eliminar registros modificar registros técnicamente el de insertar ya os lo he enseñado antes así que vengo por aquí a ver el código me voy a los archivos me voy a dam primero bases de datos otra consultas vale Bueno realmente da igual Sabes porque tengo clientes me voy a ir a clientes vale Ok perfecto y vamos a ver las operaciones de inserción esto de Aquí lo guardo dentro de tratamiento de datos inserción vale 001 inserción de datos repetimos de antes insert into clientes valu y en values ponemos los valores recordamos que era identificador o sea nul porque es una clave primaria el nombre José Vicente los apellidos caratal sách email info @josé comom la población y la fecha de nacimiento que como es un date 04.1 y vamos a darle punto y coma al final copio Eh sql ejecuto continúo no eh aquí comillas continuar vale Y tenemos el cliente número 21 donde lo hemos insertado correctamente bien antes os he comentado que en insertar nombrar columnas técnicamente yo debería decir identificador coma nombre coma apellidos coma email coma población coma no me acuerdo fecha de nacimiento Esta es una inserción sql más segura dentro de lo que cabe mucho más adelante de transacciones que es otra forma de asegurar que si algo sale mal puedes echar para atrás vale pero es pronto todavía para transacciones qué ocurre Pues que también otra cosa que puedo hacer si nombro las columnas es 003 cambiar el orden de las columnas si yo digo que primero voy a meter apellidos y luego voy a meter nombre pues puedo meter primero los apellidos y luego meter el nombre y sé que el sistema lo va a hacer correctamente lo hace correctamente y luego aparece vale correctamente una vez dicho esto también os digo no lo hagáis O sea qué sentido tiene si puedes hacer lo correcto Para qué cambiar el orden solo quiero decir que como poder se puede por si algún día por el motivo que sea lo necesitáis otra cosa que puedo hacer al nombrar columnas 004 inserciones incompletas es que me Puedo saltar Campos solo quiero el los apellidos y el nombre pues los apellidos y el nombre copio pego eh email does have the value vale porque lo tengo como nul entonces Tendría que haber una he aplicado una restricción que me permita meter null como no lo he puesto no puedo pero esto que escrito ahí si no fuera por eso es válido bien una vez que hemos insertado a continuación tenemos que Eliminar ya sabéis que eh 005 peligro vale eliminar es delete from clientes pero si yo hago eso no lo ejecuté porque borraré veis toda la base de datos de hecho en otras bases de datos basadas en sqlite eh en mysql por ejemplo hay un comando que se llama truncate que es Vaciar la tabla no borrar la tabla sino Vaciar la tabla en otras bases de datos como por ejemplo el sqlite no existe el comando truncate y el modo correcto de vaciar una tabla es delete all from clientes vale con lo cual en mysql No pero en otras tablas sí no lo voy a ejecutar y el delete 005 delete conw debería llevar siempre un we que ese We no sea uno evidentemente porque í estamos igual ni tampoco sea we true vale sino que Where identificador es igual a Pues a 20 no sé cuántos a 23 identificador es igual a 23 sql consulto Seguro sí me he cargado una fila y compruebo que ya no existe el número 23 me quedó en el 22 y ya por último y acabamos esto y ahora hacemos un descanso 10 minutos pues el update es un registro es una consulta que me sirve para actualizar Campos por ejemplo Clara no se llama Clara María vale pero yo no quiero cargarme registro ni tampoco quiero insertar una Clara María quiero uno que existe y quiero modificarlo Ese es el último Comando de los cuatro básicos actualizar que es update clientes set nombre igual a Clara María una vez más si yo ejecuto esto y no pongo nada más que lo puedo hacer técnicamente pero no lo voy a hacer me va a actualizar todos los nombres de todas las personas a Clara María con lo cual al igual que con delete 008 actualizar con we set nombre we nombre es igual a Clara cuando te encuentres una Clara solo en ese caso actualiza la Clara María sql update clientes una fila afectada me voy a examinar Y compruebo que ahora Clara ya no es Clara sino que es Clara María vale bien eh vamos a hacer un descanso de 10 minutos para la siguiente clase entonces eh Por un poco repasar refrescar hacer un resumen de lo que hemos visto hasta ahora al igual que en el resto de asignaturas todavía no estoy entrando en los resultados de aprendizaje ni tampoco un momento un momentín aquí ni tampoco en Los criterios de evaluación vale de momento ya entraremos pero no hoy todavía de momento qué es lo que quiero que hagáis lo mismo que en el resto de asignaturas vosotros veis que yo hago un create database vosotros hacéis un c database y comprobándose Cuáles son los criterios de evaluación como veis que al explicar el contenido me estoy Ajustando estrictamente a los contenidos mínimos del sistema de gestión es decir a los contenidos que vienen del boe seguro que lo que Vais a hacer va a estar dentro de Los criterios de evaluación quiero decir que aunque todavía desconozca porque los tenéis ahí también os lo digo vale pero aunque todavía desconozca Qué ejercicios os voy a poner no va a ocurrir que ahora trabajéis con un código y yo luego os pida otro sino que vosotros tranquilos que si hacéis lo que yo estoy haciendo en la clase luego lo que os pida como evaluación va a estar en esa onda y va a incluir el código que yo estoy escribiendo vale por eso os digo que no os estoy diciendo todavía para el día no sé cuántos de noviembre el resultado uno y me tenéis que grabar un vídeo y entregar un documento no entre no entrado a eso todavía vale pero sí que os puedo ir diciendo ir haciendo el código ir preparándolo ir teniéndolo que ese código estará relacionado con los ejercicios de evaluación y desde luego eh siempre y en todo caso lo que quiero al deciros que hagáis el código es que comprobéis que tenéis el control sobre el ciclo es decir si vosotros veis que yo hago las cosas y me funcionan pues Claro que me funcionan porque soy el profesor Imagínate si no vale pero vosotros podéis decir vale el profesor sabe Pero yo sé o sea yo soy capaz a mí me está saliendo Esto entonces en programación no hay nada que te hag sentir más capaz que decir create database empresa que le des a enter y que ha pum toma tu base de datos tú digas wah metal vale me está saliendo y que tú digas create Table no sé qué no sé cuántos y Que aparezca y ojo que tú digas insert no sé qué no sé cuántos y que diga error y que tú digas Por qué Y que después de 2 horas de Buscar te des cuenta de que el error es que te faltaba una coma pero 2s horas después pero cuando 2s horas después encuentras la coma la pones y funciona dices me ha funcionado a mí no Ya solo al profesor sino a mí vale Y esa es la forma en la que vais a decir vale venga estoy aprendiendo de momento copiando código de momento copiando Mi código vale lo que hemos hablado varias veces estáis en la segunda semana esos objetivos que a veces tenéis de escribir código vosotros por vuestra cuenta desde cero segunda semana todavía no vale segunda semana el objetivo es copiar Mi código y que os funcione y ese va a ser el objetivo durante un montón de semanas o sea tranquilos que eso de escribir código vosotros desde cero en una página en blanco Eso va a tardar en llegar vale pero de momento no estéis con los brazos cruzados No ya aquí eso me da igual sino en casa vale cuando lleguéis a casa os miráis el vídeo lo probáis lo practicándole sabes arreglar los errores Pues sí que os digo copiar bloques de código mío y copiar y pegar y ya está porque puedes copiar sabiendo que sabes arreglar errores sabiendo que si sale algún error lo vas a arreglar ahora noos recomiendo tanto copiar Vale ahora tener mi código siempre pero no tanto para copiar solo vale voy a subir a github Ok subo todo github ahora iremos a la asignatura de entornos e paro la grabación o