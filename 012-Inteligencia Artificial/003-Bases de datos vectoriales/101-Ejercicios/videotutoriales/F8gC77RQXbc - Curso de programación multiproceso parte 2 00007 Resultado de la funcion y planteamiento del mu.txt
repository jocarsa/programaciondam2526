bien ahora a continuación lo que podemos hacer es bajar un poco el umbral por ejemplo voy a bajarlo a 20 volvemos a refrescar y bueno ahí vemos como van apareciendo más píxeles vamos a pasarla bien za igual me estoy pasando un poco vamos a verlo y bueno pues con 10 salen todavía más en definitiva lo que me importa ahora mismo lo que sobre todo me importa es cuánto está tardando el programa en calcular esta información vienes a desatar a 1 391 milisegundos que parece que no sea demasiado tiempo es prácticamente 0,4 segundos que para una imagen puede parecer poco pero supongamos imaginemos que yo quisiera aplicar esto a un vídeo y un vídeo va a 25 fotogramas por segundo así que una vez más pues lo que quiero es rebajar los tiempos y en definitiva lo que quiero es utilizar múltiples núcleos entonces lo que voy a hacer es crear múltiples núcleos de procesamiento para este ejercicio y voy a intentar que el programa calculé esto con diferentes núcleos no va a ser un ejercicio sencillo desde el punto de vista de lo que va a tardar en transferirse la información pero vamos a ver por qué vamos a dividir los cálculos y vamos a ver qué incluso es posible que en principio en las primeras iteraciones del ejercicio tarde más dividiendo los cálculos que es sin dividirlos porque hay que tener en cuenta lo que va a tardar en dividirlos vamos a comprobarlo y ahora veremos exactamente de qué estoy hablando vamos venid por aquí y cuando la función comienza vamos a ver tengo los píxeles y si tengo los píxeles digamos que pues bueno aquí es cuando puedo empezar a lanzar digamos vamos a esto por aquí esto es bueno voy a poner comentarios meto toda la información de los píxeles en una variable me toda la información correspondiente al lienzo de destino y ahora lo que hago es que recorro de los píxeles uno a uno y entonces en principio supongo que no hay un borde en el pixel que estoy registrando pero para cada uno para cada una de estas validaciones a ver un segundo que está activando el dictado para acabar más para cada uno de los píxeles compruebo si hay mucha diferencia de color o no la hay y esto es pixel de arriba a la izquierda pixel de arriba a la derecha pixel de la izquierda voy a poner en las preferencias el sonido en el auricular pixel de la derecha pixel de abajo a la izquierda pixel de abajo a la derecha entonces en el caso de que sí que haya un borde como en este caso pintó de negro y en el caso de que no haya un borde coma en ese caso pinto de blanco y esto es lo que estoy haciendo y realmente pongo la componente rojo a 0 pongo la componente verde en cero pongo la componente azul en cero cuidado muy importante pongo la transparencia opaca y ahora qué pongo la componente roja al máximo valor pongo la componente verde al máximo valor pongo la componente azul al máximo valor y la transparencia la sigo poniendo opaca bien ahora puedo llevarme los comentarios a su sitio bien entonces ahora es cuando vamos a empezar a pasar esto a alguno de los workers vamos a crear workers en primer lugar y ahora veremos qué hacemos a continuación entonces cojo la tarea 5 js la renombró la guardo como tarea 7 punto está ese y vamos a por ello vamos a decir qué número de núcleos es esto de aquí así que hasta aquí un número de núcleos ahora creo una raya de trabajadores e y a continuación les digo que su worker estaré a 7 puntos js vamos a enviarles información el problema que tengo ahora es que me gustaría digamos que como diría yo me gustaría que para cada uno de los píxeles le podría enviar la información y le pudiera en definitiva preguntar al programa qué es lo que tiene en los píxeles de alrededor podría enviarle la información de los píxeles yo aquí lo que quiero hacer es en definitiva enviar esta validación por ejemplo y bueno vamos a ver cómo lo podemos hacer vamos a ver cómo lo podemos hacer porque aquí tengo un post message en este caso una vez exactamente qué es lo que envío se me ocurre por ejemplo por poner un ejemplo que si tengo cuatro núcleos pues podría enviar un cuarto de la imagen entonces el programa me devolvería digamos ese cuarto de la imagen y luego al final le imprimiría vamos a probar eso esa es una estrategia hay otra estrategia que consiste en partir la imagen en lo que se llaman baquets los baquets son pues digamos porciones de la imagen vamos incluso si queremos acoger esta estrategia yo quiero que yo creo que incluso mejor así que en este caso lo que voy a hacer es que voy a decirle al sistema que quiero trabajar con estos cuadraditos y cada uno de los cuadraditos será lo que envíe al sistema entonces vamos a verlo número de núcleos bueno ahora veremos cómo lo hacemos