estamos actualmente metidos dentro de Prácticamente la recta final del Tercer mes entonces nos queda recordar todavía el cuarto mes para estar trabajando con plataformas y para estar trabajando con multiusuario y para estar trabajando digamos con juegos de jugabilidad 2D pero en esta semana quiero hacer una primera Introducción a la tercera dimensión y cuando digo una primera introducción quiero decir que y escucharme lo que os digo la entrada en la tercera dimensión va a ser tan traumática sí Pero insisto no pero va a ser tan traumática que Precisamente lo que quiero esta semana es que vuestro cerebro empieza a trabajar en tres dimensiones vale para que cuando llegue ese momento ese salto cualitativo en la dificultad de los programas pues no sea tan salto sino que de alguna manera ya tengáis en vuestra cabeza algo de tridimensionalidad esto si os fijáis también fue el objetivo del segundo mes que es que tuvierais la herramienta de trabajo Blender para que empezaréis a trabajar en tres dimensiones para que empezaréis a entender que no todo es xy sino que puede haber una tercera dimensión de profundidad que es la z así que por tanto lo que vamos a hacer esta semana es trabajar con la tercera dimensión pero de la manera más sencilla que podemos hacer lo que es a través de css concretamente a través de su parte de css que se llama css 3D Entonces esta parte de css 3D Vais a ver que relativamente sencilla de utilizar porque hace lo siguiente mirada voy a entrar voy a dar una demostración ahora que la encuentre vale es esta de aquí Entonces qué estáis viendo aquí viñetas pero esas viñetas están en 3D ahora mismo no Aparentemente no Entonces esto que estáis viendo Es como una especie de rejilla portafolio vale donde mientras yo no meta el ratón en la pantalla todo esto sigue siendo 2D pero en el momento en el que meta el ratón en la pantalla ocurre esto y es que si os fijáis cada uno de los elementos están flotando con respecto al fondo a una altura determinada lo veis además hay un pequeño efecto de javascript que nos está permitiendo variar el ángulo de los objetos en la misma razón en la que muevo el ratón Esto no es obligatorio y que sepáis que esto no es css eso es javascript controlando css siempre que yo muevo El ratón y hago alguna acción pues en ese caso lo que ocurre es que cambia alguna propiedad del entorno esto es por tanta esto es por tanto la tecnología con la que vamos a trabajar esta semana que es anticipando ese momento en el que la tridimensionalidad pues complicará mucho las cosas lo que vamos a decir hacer es decir no vosotros habéis trabajado con x y con Y bueno pues voy a enseñar algo con lo que metiendo Z de repente los objetos salen de la pantalla vale Y por tanto haciendo esto podréis ir entrenando la mente Para ir trabajando en tres dimensiones e ir entrando la mente no solo en la teoría sino también en la práctica Pero insisto a la vez produciendo cosas produciendo programas produciendo juegos y a la vez preparados para cuando llegue ese momento traumático del quinto mes donde enganchemos esa parte de mes 5 mes 6 programación 3D y luego mes 7 y menos 8 de un real y Unity bien cómo se hace esto por tanto Bueno pues vamos a crear un nuevo proyecto dentro de la carpeta de Sam bache de docs esto que voy a hacer hoy como es sencillo sí que podéis no es como el jueves que os dije mejor miréis en la pantalla Esto sí que podéis hacerlo porque no voy a ir muy rápido hoy Entonces voy a poner css 3D el nombre que queráis realmente pero bueno como trabajar en 3D pues pongo Así que digo Index punto html Le copio lo cargado verdad Le copio la librería jquery.js y bueno vamos a empezar a escribir ya sabéis la estructura de siempre La escribo la podéis copiar de algún otro documento lo que queráis body en el Head introduzco el Script src jquery.js y digo document punto function cuidado y ya sabéis siempre diréis Qué pesado siempre con el alerta insisto hacerlo hasta que estéis seguros de que lo hacéis correctamente vale bueno en este caso si queréis vamos a arrancar champ para lo que vamos a ver hoy y mañana no es obligatorio Sam Pero para lo que veremos el jueves y con lo cual pues lo tenemos ya arrancado Así que pongo localhost barra css 3D y dice hola vale Y si local os dice Hola Es que esto está funcionando correctamente esto de que sea tan pesado con el alert y del documento es por un motivo en particular y es porque a lo largo de los años he detectado que producís un montón de errores entre la carga de jquery.js y entre el documento ready algo que en principio Pues podría considerar algo muy sencillo y muy básico pero finalmente Hay un montón de errores que se producen ahí al principio vale por tanto el alert Es simplemente para comprobar que al menos al llegar hasta ese punto Pues sigue funcionando correctamente bien Ahora dentro del Body ya hemos preparado esto digo Deep y de es igual a contenedor y dentro del contenedor voy a crear un dip y de llamado pues por ejemplo yo que sé dip 3D como queráis es lo de menos VIP 3D Así que este 3D ahora mismo no tiene forma con lo cual lo que voy a hacer Es que voy a crear un poco de estilo y en el estilo digo el elemento que se llama dip 3D cuidado minúsculas Pues yo que sé Algo sencillo para verlo en la pantalla Vale entonces le digo with 200 píxeles hype 200 píxeles background red y Border un Pixel solid Black por ejemplo es decir algo que cuando recarga en la pantalla pues diga Hey Mira hundir de color rojo yo que sé Entonces la cuestión está voy a dejarlo al 100% esto realmente me da igual la cuestión está en que si yo hace SS no le digo nada que sí no pasa nada si es enorme Mirad hacer zoom porque probablemente sea que tengáis el zoom muy cercano vale pero en principio no deberías ser enormes y le hemos puesto 200 por 200 porque en el juego exacto No lo sé pero te cuento Sí te cuento la mayoría de navegadores guardan las propiedades de zoom por dominio Entonces eso quiere decir que si la semana pasada estabas en el localhost Aunque fueran otra carpeta e hiciste zoom por lo que fuera yo también lo hice de hecho fíjate que yo lo tenía si hicimos todo el otro día cuando estábamos trabajando sobre la imagen porque era muy pequeña pues aunque ahora estemos en otra carpeta que se llama cs3d para el programa Seguimos estando en localhost y por tanto todo ese dominio le aplica salud le aplica toda esa propiedad de zoom bien sigamos Entonces por defecto como os decía trabajamos en css si no le decimos nada siempre en 2D Si queremos trabajar en 3D se lo tenemos que decir específicamente por tanto para esto os daréis cuenta que para eso precisamente he creado un dip contenedor que lo está agrupando entonces lo que voy a hacer por tanto es decir que el Dif contenedor va a tener la siguiente propiedad es una propiedad que todavía no es estándar entre todas las plataformas y por tanto requiere que le pongamos el prefijo de compatibilidad entonces ponemos web kit en mi caso como estoy en Chrome voy a poner web kit si estuviera en firefox pues pondríamos vale De hecho lo lógico es que cuando pones un prefijo lo pones todos para asegurar compatibilidad con todas las plataformas Pero eso en mi caso me haría perder mucho tiempo escribiendo etiquetas de compatibilidad Por eso quiero deciros que si esto fuera un proyecto real sí que lo tendría que hacer pero como es un ejercicio de clase y únicamente estoy en Chrome pues lo hago únicamente para webkit Entonces vamos a ver el código Entonces vamos a apriserv 3D vamos a ver Esto es digo webkit transform Style es present 3D si os fijáis en este código que tengo desarrollado y este es desde hace tiempo esto tiene un par de años por lo menos dos o tres No lo sé bueno estará por ahí en la fecha Entonces si os fijáis tengo aquí abajo como veis lo mismo pero con la etiqueta move Pues habría que hacer lo mismo con la etiqueta mod con la etiqueta MS con la etiqueta lo que sea y una vez más os digo que una vez más os digo que todo esto de aquí de webkit lo Tendremos que poner hasta el día que no creo que falte mucho ya en el que digan Mira css 3D ya es estándar entre todas las plataformas todo el mundo lo tiene como estandarizado todo el mundo lo tiene como la etiqueta de base y por tanto ya no hace falta poner la etiqueta lo digo por si yo que sé por si Imagínate que ves Este vídeo dentro de dos o tres años y dices pero la etiqueta web que ya no es necesaria claro dentro de dos o tres pero a día de hoy Probablemente sí que lo sigue siendo bien Por tanto ponemos el web que Transformers Tile present 3D y lo pongo también en el dip 3D es decir lo pongo tanto en el contenedor como en el dip 3D y ahora voy a hacer lo siguiente mirado en el dip 3D vamos a verlo vamos a hacerlo fácil antes Tengo el Translate Z Vale pues voy a hacer Translate y voy a hacer 100 píxeles coma 100 píxeles simplemente para que veáis en la pantalla y me confirméis que os sale lo mismo que a mí me sale es decir lo que estoy haciendo es simplemente el objeto y trasladarlo 100 píxeles hacia la derecha 100 píxeles hacia abajo de la misma manera voy a quitar el Translate Ah sí Mira una cosa no voy a cometer un error para enseñaros el error y que no lo comentáis vosotros digo rotate 45 deg 45 de gris 45 grados entonces guardo y recargo Y qué nota es hay algo que ha funcionado bien y hay algo que deja de funcionar Translate ha dejado de funcionar estoy me da mucha rabia pero es como funciona hacerse 3D y el css en general vamos a ver yo te digo esto no es lo mismo yo aquí te estoy moviendo y yo aquí te estoy rotando pero para el programa Así que es lo mismo porque al final los dos son web y transforma por tanto Aunque la propiedad transformada no sea lo mismo el programa dice como el prefijo es igual como la propiedad es igual esta propiedad anula a esta de aquí no pasa nada sabiéndolo en ese caso lo que vamos a hacer es rotate lo pongo después pongo Translate lo que queráis un espacio en blanco y rotate lo que queráis Así que ahora guardo y recargo Este es el error que quería comentar para que lo vierais y lo que hacemos por tanto es que estamos trasladando y estamos rotando Cuántas transformaciones hay pues hay unas cuantas Mirad hay otra que es scale 1,1 no tiene ninguna diferencia uno es la escala original por tanto veis que el objeto se queda igual pero si yo digo 0.5,0.5 cuidado punto coma para separar vectores punto para separar decimales pues en ese caso el objeto se escala al 50%. por tanto uno equivale al 100%, 0.5 equivale al 50%, 2 al 200 por ciento y así esto que estamos haciendo al final son transformaciones quitado son transformaciones bidimensionales pero yo por ejemplo puedo decirle claro Fíjate que cuando yo no digo nada esto es mirarme un momento a ver espera voy a sacar el fumit para que pueda dibujar una descargas cuando yo estoy trabajando por defecto Blue esto es x esto es Y hay un eje que no puedo dibujar que me apunta que es el eje Z por tanto cuando yo no digo nada esto es x esto es y cuando yo estoy rotando en Z estoy rotando en ese eje que me apunta lo malo lo desafortunado es que pues el programa no lo dice Translate pues se supone que estés aquí se supone que esto es Z Pero si yo digo rotate x 45 grados recargo y veis cómo ha cambiado Sí ya lo sé bien rotate x mira lo voy a cambiar 5 grados para que veas lo que estoy haciendo 5 grados 10 grados 15 grados mirada de pantalla vas viendo cómo se va batiendo estaba haciendo Así es decir recordar veis Esto es lo que por lo que quería trabajar con css 3D entonces recordad que os he dicho que este es el eje x y ese es el eje y veis como está dando la vuelta a través del eje x vale hay una cosa por la que no lo estáis viendo correctamente que es los puntos de fuga si esto tuviera a punto de fuga si fuera una perspectiva cónica no una perspectiva isométrica lo veríais mejor Qué quiere decir eso de la perspectiva isométrica Mirad para eso hemos aprendido Blender entonces si yo Cojo un plano y lo avato veis que ahí está abatido ese plano tiene como puntos de Fuga que son los puntos de fuga los puntos de fuga son esto lo veis y los puntos de fuga en una perspectiva cónica convergen en el horizonte pero en una perspectiva isométrica los puntos de vista son paralelos veis que yo estoy abatiendo el objeto pero sin embargo no parece que se avata porque los puntos de fuga son paralelos esto exactamente esto es lo que está pasando ahora mismo en el navegador lo que estoy haciendo es abatirlo pero estoy en una perspectiva paralela no en una perspectiva cónica esto sería mucho más divertido y os va a abrir mucho más campo de acción si trabajamos en una perspectiva cónica por tanto para trabajar una perspectiva cónica simplemente lo que tengo que hacer es Establecer un factor de zoom un momento esto es el botín vamos a verlo Ah sí está aquí abajo está el javascript vale Ahí está entonces voy a Añadir una propiedad más esto fuera que es la propiedad de perspectiva esto no lo puedo bajar a la línea debajo porque este SS y debe estar en la misma línea pero lo que estoy haciendo es que te digo no solo te quiero mover no solo te quiero rotar No solo te quiero escalar sino que además quiero que lo hagas en una perspectiva cónica por tanto guardo ahora jugamos con eso recargo y digo a esto es otra cosa percibís una Fuga percibís que esta línea ya no es Exactamente igual no tiene la misma inclinación que esta vale siguiente cuestión la perspectiva es el punto de fuga atención Mirad yo con este punto de fuga si coloco una cámara un segundín que coloque una cámara creo una cámara le digo a la cámara que espera que te lo digo vamos a ver alinear vista sí está cerrado entonces alinear aquí yo puedo una cámara quiero que veáis que la cámara no se mueve del sitio veis que no se mueve el sitio pero yo vengo a la cámara y lo que hago donde estar aquí el lo que hago es abrir el campo de la cámara Qué pasa cuando abro demasiado el campo de la cámara pues lo que hace es que las rejillas se distorsiona qué es lo que hago cuando subo mucho el campo de la cámara Pues la rejilla casi se vuelve paralela la cuestión está en que la cámara no se ha movido del sitio pues esto que estoy tocando equivale a este parámetro de aquí al de perspectiva por tanto si yo le digo 100 y recargo Wow veréis que se nota mucho más el punto de fuga pero ese edit que es cuadrado aparece distorsionado aparece estirado porque aparece estirado pues porque si os fijáis momento si os fijáis cuando yo distorsiono mucho el punto de fuga los objetos aparecen como estirados vale veis este punto de la rejilla por ejemplo que es cuadrado pero aparece como si estuviera estirado este punto de rejilla un poco equivaldría a este plano de aquí vale por eso Bueno yo os he traído el preset de 600 quiero que probéis que nos practiquéis de hecho fijaos que pongo 1600 y parece que el objeto vuelve a ser paralelo no valores negativos no si me preguntas la verdad es que ahora mismo no tengo ni idea de qué haría un valor negativo vale nada bien porque ya te digo que valores negativos sería algo así como en Blender poner un valor negativo que aparte no me deja o en la vida real voltear quiero decir si no tendría representación física vale por tanto no tengo ni idea de incluso Si deja o no bien entonces lo voy a dejar a 600 ponerle a lo que queráis pero más que nada Es que habéis visto por ejemplo que a 600 como en esta demostración pues funciona más o menos bien Es decir da un cierto efecto de tridimensionalidad Así que si ya tenemos esto si ya tenemos algo estático vamos a ponerlo en funcionamiento vamos a hacer que esté animado Entonces vamos a ver lo que voy a hacer ahora es que entro dentro de una función Loop y digo función Loop y voy a hacer lo siguiente y digo bar contador o bar temporizador es igual a nada en ese caso voy a decir pam pam set Time out quiero ejecutar Loop en 1000 en un segundo lo que sea y el Loop ya sabéis que voy a decir Clear Time out quiero eliminar temporizador a lo cual vosotros me diréis o tienes que haber metido el set Time out en una variable Pues sí temporizador y ahora copio esto ya sabéis la misma estructura de siempre de entra en el temporizador en el segundo temporizador 1000 milisegundos una de casi que no vamos a ponerle 100 Así que ahora lo que hago es decir ángulo bar ángulo para ser más correctos es igual a cero por lo que sea y cada vez que paso por aquí digo ángulo más O sea cada vez que se ejecuta el Loop que para eso está el Loop lo que quiero es que el ángulo Vaya aumentando un valor Pues en este caso lo que voy a hacer es Añadir una función css y le voy a decir 3D le añado una función css donde atención Mirad la función css tiene comillas coma comillas y lo que va a hacer es web por aquí no se ponen los dos puntos porque para eso está la coma le pongo todo este bloque por aquí sin el punto y coma diréis hay un punto y coma así pero os dejaba escribir no de css vale por tanto esta coma sustituye a los dos puntos y no hay punto y coma de css y lo engancho aquí lo engancho con el ángulo Donde antes el valor de ángulo era estático Pues ahora el valor de ángulo va a ser completamente Dinámico así que guardo recargo Y si todo ha ido bien en la pantalla veréis que en un segundo el objeto empieza a rotar pero por primera vez empieza a rotar en tres dimensiones vale voy la idea Por tanto es que podemos rotar realmente en la dimensión que queramos Así que yo por ejemplo aquí en el javascript ya que estamos voy a poner rotate y digo ángulo deg y repito la misma fórmula que he puesto antes que esto es un rollo pero es así es que se me baja la línea de abajo y como es javascript pues una agencia imposible pero no es demasiado fácil bajar la línea de bajo Así que recargo Y si todo ha ido bien fijaos ahí como tengo un fantástico objeto rotando en dos ejes a la vez está rotando en x y he duplicado la fórmula para que rote en y voy a decirle que en lugar de 100 milisegundos vaya a 10 milisegundos esto no Esto sí en el Loop para que el movimiento sea más fluido Mirad ahí lo tenéis y daros cuenta por tanto como Pues como ya os digo Tenemos un objeto que estamos rotando en las tres coordenadas del espacio sí está rotando aleatoriamente Pero bueno de momento una primera toma de contacto con el css 3D la idea Está en que aunque estemos viendo una animación que es 3D para el programa realmente el Deep ocupa un espacio bidimensional es decir aunque yo esté trabajando en css 3D no podemos ignorar que finalmente yo estoy trabajando en el dom en el documento object model y el documento hasta el día que lo cambien pero siempre va a ser 2D Eso quiere decir que si yo le doy a inspeccionar efectivamente veréis que el contenedor e incluso el dip sigue siendo cuadrado hay que tener en cuenta una cosa y es que el dip este está alargado más que nada porque ocupa todo el contenedor Fíjate que está alargado más o menos en la misma proporción lo veis ahí en la misma anchura que habría entre el dibu original y el final de la pantalla también es porque al contenedor no le he dicho lo que debe ocupar sea el contenedor le dijera que ocupará 200 y 200 en ese caso tendríamos ese día alargado pero lo importante en este caso es que os deis cuenta de que finalmente el Live siempre va a estar dentro del contenedor o dentro del Body incrustado en un dip bidimensional incrustado en una etiqueta bidimensional la idea Está en que esto es css 3D pero no es todavía el quinto mes del Máster por tanto no hace falta que te preguntes Cómo darle volumen a esto porque no le podemos dar volumen es decir yo lo que estoy haciendo es trabajar con dips y los difs por defecto son planos los dips no tienen volumen por tanto yo voy a poder un dip y lo voy a poder mover y lo voy a poder rotar y lo voy a poder escalar en tres dimensiones pero ese dip siempre va a ser una cara plana tú lo que estás pensando es más bien Cómo cargar un objeto o bj por ejemplo desde Blender o En definitiva un modelo 3D que hayas hecho en Blender Y eso no podremos hacerlo hasta que no lleguemos a la parte 3D pura y dura del temario por esto Esta es una parte mixta donde vamos a estar trabajando en 3D pero lo vamos a hacer con elementos bidimensionales aún así Vais a ver que aún con esa aparente limitación vamos a poderle sacar un montón de jugo a esta utilidad del css 3D por tanto si te lo estás preguntando cómo será no será eso será en la parte 3D por ahí dura entonces la cuestión ahí está la cuestión Ahí está en que me voy a ir a vamos a verlo me voy a ir a css 3D me voy a ir a crear un archivo Index 2 punto html me voy a copiar un poco el código al menos a nivel de plantilla Vaciando por supuesto entonces vacío esto por aquí vacío esto por aquí y Vacío esto por aquí Así que voy a crear un dip y de tablero un tablero con un dip Class casilla y digo creo un montón de Casillas manualmente Sí porque luego lo haremos con javascript pero ahora de momento lo que quiero es hacer una creación manual no se ve nada en la pantalla pero yo ahora digo número Ah no ningún número en particular no pasa nada y digo casilla va a tener el siguiente contenido casilla va a ser with de poquito 50 píxeles High de 50 píxeles background que te diré yo no sé Yellow por ejemplo y le voy a decir esto es lo importante float si queréis voy a poner un Border un píxel solid Black para que tengamos Claro que lo que estáis viendo en la pantalla Mirad lo tenéis pues es un tablero vale son casillas de un tablero en cuanto al tablero le voy a decir que tenga un WiFi de 300 píxeles y un High de 300 píxeles Por ejemplo y con esto tendremos Pues un pequeño tablero entonces aquí es donde os voy a decir el número de dips que debéis tener no es que debéis tener exactamente los mismos que los míos pero digo Mira pues veo que los libros que tengo caray me sobra uno si quiero hacer un tablero de 5 por 5 Así que quito un dip me quedo con 25 bits y así tengo un tablero perfecto de 5 por 5 así Sencillamente voy a hacer una pequeña selección por Mouse over lo voy a hacer en javascript de digo lo voy a hacer en css de hecho y voy a decir casilla dos puntos hv es decir qué es lo que ocurre cuando pasas el ratón por encima de la casilla y digo background yo que sé red y ya está y aquí en el css de la casilla mirado un segundo voy a bajar esto voy a decirle transition all de un segundo que haga una transición la idea de la transición es que cuando yo pongo el ratón encima de la casilla fijaos como la casilla se vuelve de color rojo pero lo hace con un segundo de animación no lo hace automáticamente es el segundo de animación es el segundo que proviene de esta instrucción transition si quito transition que no lo quiero quitar realmente lo que hace la casilla es que se vuelve roja inmediatamente pero si activo transition lo que ocurre Es que la casilla realiza una animación al ponerse roja entonces lo que hago a continuación es trabajar con la parte de 3D Así que en la parte de 3D digo lo siguiente vamos a verlo en la parte de 3D digo el tablero tiene un web kit Transformers Style Freezer 3D y al tablero le voy a decir un web kit transform de perspective 600 píxeles y rotate en x por ejemplo de 45 grados 45 deg Así que guardo recargo Y si os fijáis lo que tengo en la pantalla es el tablero rotado en 45 grados y si os digo 45 os puedo decir 60 os puedo decir 70 os puedo decir lo que haga falta hasta que veamos el tablero volcado en la pantalla Entonces si os fijáis Mirad ahora lo que hago es poner el cursor encima del de la casilla y como podréis ver seleccionar casillas en perspectiva incluso cónica nosotros lo hicimos anteriormente en una perspectiva paralela pues Incluso en cónica en este caso en css 3D nos ahorra el tener que calcular las funciones trigonométricas para saber qué punto en el espacio 3D en el espacio 3D quería decir corresponde a la proyección en el espacio 3D y por eso es por lo que lo decía vale Pero aún así lo tenéis que haber aprendido porque tranquilos que en un momento u otro Aunque tengáis cs 3D tendréis que usar las funciones trigonométricas vale simplemente deciros que en cuanto a esto concreto Pues esta función os libera un poco de ese tablero sí no evidentemente sería un poco complicado de sacar pero no pasa nada más allá de eso quiere decir el último punto Lo único es que lo podríamos difícilmente porque habrían menos píxeles pero se podría también sin ningún problema puedo realizar más rotaciones por ejemplo a continuación digo me gustaría que fuera el típico tablero que una punta del tablero me apunta a mí en este caso me está apuntando una un borde del tablero sería correcto por ejemplo para hacer un ajedrez pero quiero algo más tridimensional Así que voy a decir rotate y voy a decir Z roto y Z donde estás aquí y voy a decir 45 deg Así que guardo y recargo Y si os fijáis lo que he hecho atención es primero rotar el tablero en x y luego lo estoy rotando en Z donde recordar que Z insiste una vez más ese eje si la pantalla es un plano pues Z es el eje que sobresalía hacia mí es el eje perpendicular al modelo por tanto confirma que tenéis esto en la pantalla y confirmar fijaos que tenéis un tablero en el que vais moviendo el ratón y sin ningún problema se seleccionan cada uno de los elementos que hay encima del tablero entonces efectivamente esto cae solo el que lo que vamos a hacer ahora a continuación es crear un ajedrez pero Hay un pero Y es que algo que nos puede chirriar un poco bastante es la idea de que hemos tenido que crear manualmente las casillas y sobre todo nos puede chirriar también bastante el que tendremos que crear más casillas Si queremos crear un ajedrez porque cuántas casillas tiene de la de un ajedrez más casillas ya vale caray 8 por 8 pues 64 Así que lo que vamos a hacer en este caso es crear una rejilla de 8 elementos por 8 elementos en este caso 64 Entonces yo pregunto crear un tablero es algo que ocurre x veces por segundo o que ocurre una vez vale por tanto donde diríais que lo voy a poner en ready efectivamente Así que borro Mirad momentín borro todo esto y en el document ready digo en el tablero quiero a pen a mirar a ver Quiero aprender pues o sea Añadir quiero y de Clash perdón casilla Ahí va Así que guardo y recargo y me aparece una casilla qué diréis que me falta un foro tiene toda la pinta de un foro entonces un Ford y digo bar y es igual a 1 hasta que y sea menor o igual a 64 me habéis dicho y más y coloco por aquí guardo y recargo y tengo 64 elementos claro no crecen correctamente porque el tablero tiene with 300 hype 300 vale voy a poner 500 a ver no 500 tampoco Pues será 4,50 o por ahí vamos a verlo 1 2 3 4 5 6 7 pues 450 ponerle 450 por 450 y ahí lo tenéis el tablero de 8 por 8 del ajedrez pero el ajedrez tiene Casillas blancas y tiene Casillas negras y en mi caso son todas amarillas Así que lo que voy a hacer Sencillamente fácilmente va a ser lo siguiente me voy a venir aquí a casilla y fijaos Mirad vamos a ver y le voy a decir si y partido 2 es igual a cero en ese caso pasa algo si no pasa otra cosa y lo que va a pasar Mirad qué cosa más curiosa Es que le digo si es igual a cero le digo que así ya espacio blanca y si es igual a negro es igual a casilla espacio negra que os parece esto de poner un espacio eso exactamente Yo siempre digo cuando declaréis una clase no pongáis espacios porque el programa va a dar error pero en este caso el Por ende espacio no es porque la clase sea casilla Blanca sino porque el objeto es a la vez de la clase casilla y es a la vez de la clase Blanca o es a la vez de la clase negra así que por tanto simplemente lo que tengo que hacer ahora es decirle Espera que queréis ver esto le digo blanca es background back ground White y negra es background black Así que guardo y recargo voy a eliminar en la casilla el background Yellow y al recargar empieza a salir esto que tenemos aquí bien no os preocupéis porque en este caso lo que tenemos que hacer es que cada vez que saltamos la línea tenemos que invertir el orden de los colores pero de momento veis que poco a poco empieza ya a aparecer por ahí por la pantalla un tablero de ajedrez Solo nos falta el que cada 8 le añadimos un cambio lo que tenemos que hacer ahora es simplemente hacer que las casillas no se repitan si os fijáis Es lógico que se repitan Porque si esta casilla es blanca a la siguiente casilla en la pantalla le toca ser negra pero vosotros diréis si esto Me parece muy bien pero no porque yo realmente lo que quiero es que esta casilla cambie de color hay algo que podría hacer mirar insisto ahí miles de maneras de hacerlo pero una manera de hacerlo es la siguiente Y es que vamos a verlo vale Y es que digo y porcentaje es decir el resto de la división entera entre 8 es igual a cero en ese caso y más Es decir me estoy saltando un turno Así que eso tiene una cosa buena y una cosa mala y es que yo guardo y recargo y veo que por una parte o Qué curioso vale digo si lo haces todo vale Voy a decirle No sé igual le digo 9 Pero bueno veo que por una parte me hace una parte del Casillero Espera que lo vea vale bien y por otra parte vamos a poner esto al final a ver si así aunque me vale ahora lo pone blanco Pues nada bien ya se le doy 9 verdad vale no no es al revés verás es que esa una es la que debería salir porque el problema está en que yo digo Aquí uno dos tres cuatro cinco seis siete y ocho pero aquí digo 1 2 3 4 5 6 7 no es que esa sobre es que sobra no sé qué le faltan todas las demás vale por tanto simplemente se puede arreglar metiéndole aquí por ejemplo más 8 pues 72 o 71 ahora te lo digo 72 Vale y poniéndole 72 para compensar todos esos saltos de contador pues en ese caso aparece el tablero de ajedrez completo si queréis como hacer un ajedrez así de entrada es complejo qué otro juego tenemos que usa el mismo tablero del ajedrez que es más sencillo de programar las damas vale Así que lo que voy a hacer en este caso es que voy a generar unas pequeñas damas para generar unas pequeñas damas voy a hacer lo siguiente vamos a ver dentro de cada bip Mirad dentro de cadavid voy a crear otro dip de clase dama luego Insisto que hay damas blancas y damas Negras pero bueno de momento vamos a trabajar con una dama y ya está y ahora luego nos preocuparemos de qué es lo que ocurre con las damas blancas y con las damas negras por qué Para lo que es el objetivo de la clase de hoy contener un tablero con x damas en la pantalla pues ya tenemos para ir empezando Así que ahora me vengo aquí al estilo y digo Qué es dama Cómo se representa una dama pues Una dama es with no sé 60% . ahí hay 60 por ciento dejadme que la pinta un momento de rojo ya sea grasa más son blancas o Negras pero para que la veamos en la pantalla y digo ya yo que sé para verlo yo luego ya lo cambiaremos de color va gris Así que Grey y le digo Border radios de no sé yo que sé 100 píxeles ya está Así que mira Esto es lo que ocurre en la pantalla y lo que ocurre en la pantalla es que empiezo a tener unos circulitos que hacen la función de damas una cosa que te voy a decir es que vamos a trabajar en 2D pero vamos a darle a los objetos sensación de que sean en 3D por tanto para conseguir esto con la dama y Exacto justo ahí me has visto para conseguir esto en la clase de hoy y con esto acaba la parte teórica de la clase de hoy voy a hacer un Box Shadow donde le voy a decir yo que sé 5 píxeles cinco píxeles 10 píxeles black qué es lo que estoy haciendo pues lo que estoy haciendo es poniéndole una sombra que se va hacia la izquierda 5 píxeles que se va hacia abajo 5 píxeles que está difuminada 10 píxeles y que es de color negro bueno Esto me causa un pequeño problema y es que claro la sombra negra sobre las casillas negras no se ve muy bien pero bueno de momento con que se me vean las casillas blancas pues ya me conformo ya una mala le puedo decir que en la casilla negra efectivamente en lugar de negro pues le doy un tono gris donde le digo no sé 40,40,40 para que la casilla negra no sea tan negra y por tanto pueda percibir la sombra de la ficha la sombra de la dama encima de la casilla azul bien pues hoy seguimos trabajando con css 3D Pero antes de explicaros lo que voy a hacer os lo voy a enseñar conceptualmente en Blender lo que quiero hoy es hacer un cubo y quiero moverlo con el ratón el cubo va a ser un poco una primera forma de trabajar en 3D de crear objetos tridimensionales mediante planos entonces lo que quiero que veáis es que si yo creo un plano lo primero que haré Mira es rotar ese plano en x 90 grados y me lo voy a llevar en y una unidad y ya tengo la primera cara del cubo a continuación me hago otro plano lo giro en x 90 grados y lo muevo en y una unidad veis Como creo un plano lo giro y lo coloco en el sitio ahora creo otro plano lo giro en este caso en y 90 grados y lo muevo en x una unidad por lo que ahora creo un plano lo giro en y 90 grados y lo muevo en x menos una unidad Así que finalmente tengo las cuatro caras de un cubo como os podéis imaginar únicamente me hace falta ahora crear un plano moverlo en Z una unidad Y por último creo un plano y lo muevo en Z una unidad Así que creando seis planos y con las transformaciones de rotación y de posición correspondientes yo puedo crear un cubo y luego con ese cubo puedo hacer lo que quiera Así que antes de meternos en la parte de programación entendéis digamos que es lo que quiero hacer voy a crear seis planos los transformar para crear un cubo tridimensional bien entonces lo que hago ahora por tanto es que dentro de champ no Esto va al revés dentro de Sam Bueno voy a abrir me voy a Sam me voy a ht dogs me voy a css 3D voy a crear el archivo Index 3.html cojo el contenido index 3.html cojo el contenido del ejercicio de ayer para tener un poco una referencia tener una plantilla y bueno eliminó ciertas cosas verdad Entonces el estilo fuera habéis cogido los pinchos de internet vale el estilo fuera el Script fuera a falta vamos a ver del document ready realmente hoy el Loop creo que no lo vamos a usar Así que lo voy a eliminar si hace falta luego ya lo volveré a crear Sí pero no pero que nosotros con el ratón lo podamos girar Entonces como el evento va a ser el ratón no me hará falta el evento Loop Pero bueno creo Claro luego podemos hacer las hojas a la vez que gire y a la vez que el ratón lo gire ahí sí que me haría falta un look Pero bueno Luego lo creamos Entonces quito el tablero y voy a crear Deep ID es igual a contenedor ahora dentro del contenedor digo Deep ID es igual a dado o cubo o lo que queráis cubo y ahora dentro de cubo voy a hacer dip y de cara uno vive esto es de clase cara y con las mismas voy a hacer seis caras más cara 2 cara 3 cara 4 cara 5 y cada 6 cada uno unida ya sabéis que el ID no se debe repetir nos daría problemas en jquery y cada uno con la clase cara así que se puede repetir y de hecho lo normal es que se repita Así que arrancó Jam si no lo tenía arrancado me voy a localhost Barra css 3D barra Index 3 punto html de momento no hay nada en la pantalla Entonces yo en el estilo pongo por defecto algo Como por ejemplo cara es igual a background Green quiero que tenga el fondo verde quiero WiFi anchura es igual al quieto a 100 píxeles High es igual a 100 píxeles y Border es igual a un píxel sólido black Así que guardo y recargo y como podréis comprobar pues me aparecen las seis caras del cubo pero puestas en una tira puestas en vertical lo que vamos a hacer ahora es convertir estas caras a lo que queramos bien a partir de ahí voy a decir lo siguiente el cubo va a tener una serie de propiedades y el contenedor va a tener también otra serie de propiedades tanto el contenedor como el cubo va a tener esto que veíamos ayer van a tener web kit Transformers Style present 3D es decir quiero trabajar en 3D el cubo además va a tener posición relativo las caras van a tener posición absoluta con lo cual si recargo Ahora parece que solo haya una cara pero no es así lo que ocurre ahora es que todas las caras están puestas una encima de la otra por qué Pues porque les hemos puesto vamos a ver les hemos puesto lo de la posición absoluta ahora por tanto lo que hago es que al cubo le digo lo siguiente transforma es perspective voy a poner 600 píxeles que a veces ayer que bueno está bien da una buena sensación y le digo Translate pues por ejemplo yo que sé 100 píxeles como 100 píxeles y rotate y por ejemplo voy a poner 30 deg 30 grados vamos a ver qué tenemos lo que tenemos en la pantalla es que he colocado el plano un poco en perspectiva para que veáis claramente que está en una perspectiva 3D perspectiva me ha servido para que haya puntos de fuga sal Translate me sirve para sacarlo de la esquina llevarmelo un poco al centro y rotar me sirve para girarlo recordar que el eje y es al vertical para girarlo un poquito en vertical Aunque yo haya girado el cubo realmente las seis caras están ahí colocadas en el mismo sitio por tanto qué es lo que voy a hacer a continuación pues lo que voy a hacer a continuación es cada una de las seis caras cada uno y voy a hacer recordar lo mismo que he hecho en Blender Pero dentro de la programación Así que digo cojo la cara uno y digo web kit Transformer y digo Translate Z y esto se va a mover 50 píxeles sí 50 píxeles Así que guardo y recargo y compruebo como la cara se ha movido 50 píxeles para la cara 2 le voy a decir web kit transform Translate Z menos 50 píxeles voy a decirle también a la cara Mirad atención web kit Transformers 3D ahí está así que de momento tenemos eso en la pantalla y lo que voy a hacer ahora simplemente es colocar el resto de las caras para colocar el resto de las caras voy a hacer también una cosa bueno dejando un segundo no A ver no porque tenéis otro punto de perspectiva pero es correcto al final tenéis lo mismo que yo aunque yo tenga sí no pasa nada lo tenéis al final es lo mismo Aunque parezca que no Bien voy a meter esto en una única línea porque si no me ocupará al final un montón de líneas y ahora digo cara 3 webkit transform y hago lo siguiente mirada rotate x 90 grados entonces Translate y 50 píxeles y ahí ahora digo con la cara 4 quiero rotar x 90 grados y trasladar y menos 50 píxeles Esta es la cara 4 perdón vale he dicho Translate y pero parece como que quiera ser Translate x Espera que te lo digo no y Translate Z Ahora sí vale es rotate x 90 grados Translate z50 grados y ahora evidentemente con las otras dos que me faltan digo rotate y 90 grados rotate y 90 grados vamos a verlo vale y Translate voy a probar la x vale voy a probar la y No pues tiene que ser Z Ahí está con lo cual fijaos que se me queda un dado la única cuestión es que hay un elemento que se me queda por delante un segundín que os digo cuál es la cara 5 ahí es la cara 6 vale Y no ese es el problema ese es el problema que es que no he renombrado correctamente Vale ahora sí con lo cual al hacer esto en la pantalla tengo ya un cubo puede que nos quede exactamente como el mío pero da igual realmente con que os quede un cubo Sí está como en otro punto de perspectiva pero no os preocupéis para Sí para el objetivo del ejercicio efectivamente estamos cambiando el punto de vista con ico No pasa nada Es correcto es normal bien pero un momento te has quedado loco No loco Te vas a quedar ahora después de lo que voy a hacer mira y ahora lo que quiero hacer es que con el cursor con el movimiento del Ratón yo pueda mover libremente este cubo y cómo lo voy a hacer Pues evidentemente en cuanto no hablamos de una propiedad estática sino Hablamos de una propiedad dinámica es decir depende del Ratón pues ahí estamos hablando de javascript Así que nos venimos por aquí y digo cuando sobre el documento haga Mouse move es decir mueva al ratón ejecutaré una función con el parámetro e digo eh Como quien dice ven como quien dice longaniza el tema es que le pongáis un parámetro y le diré lo siguiente selecciono cubo y le pongo un css que va a ser el siguiente recordad de ayer que el css en javascript es comillas coma comillas la propiedad css se pone dentro de las primeras comillas el valor de la propiedad se pone dentro de las segundas comillas Así que digo web kit transformo por aquí y le digo la propiedad css Mirad va a ser esta de aquí ojo estoy copiando la longaniza del css dentro del javascript y digo rotate y rotate x y digo la y va a ser cliente x e punto cliente x esto es la y Bueno la verdad es que esto podría ser la y griega y así atamos y con y la x va a ser el cliente x y lo escribiendo tener en cuenta el Salto de línea voy a probarlo bien bien y por ahí poco a poco se va moviendo no se mueve todavía como yo quiero pero no pasa nada de momento lo importante Aunque el punto de anclaje no esté en el centro del cubo Pero lo importante es que como veréis estamos empezando a mover un cubo en tres dimensiones sí no cuesta pero ya lo sé pero de momento lo que quiero comprobar es que lo mováis correctamente si os cuesta mucho de moverlo probablemente os voy a ayudar quitando el Translate 100 Así que quito el Translate a ponerte a crear tu si no aparte el Translate vamos a verlo Pues el Translate tampoco no ayuda no si no pasa nada porque lo que vamos a hacer es mover el origen de toda la coordenada Así que vamos a ver Translate 200 un segundo vale Ahí se va más sigue el nombre la vista siempre a ver si no os preocupéis porque simplemente es que el punto de rotación no está alineado con el centro del objeto Así que lo que tenemos que hacer es mover el objeto de manera que su centro de rotación esté alineado con el centro de la pantalla es decir que si el objeto esté así cuando yo le estoy diciendo que rote pues rote a partir del centro sobre sí mismo efectivamente entonces ahí lo primero que vamos a hacer también es lo siguiente Mirad dejadme que comente esta línea vamos a probar para trabajar mejor ese centro vamos a hacer esa función Loop y dentro de esa función Loop Bueno pues ya sabéis que voy a hacer bar temporizador es igual a nada aquí digo temporizador es igual a set Time out ejecuto el Loop en 10 milisegundos y luego dentro de Loop hago Clear Time out temporizador y digo temporizador es igual a zy Mouse lo que sea por tanto si hacemos esto Mirad puedo copiar esta línea puedo decir que bar ángulo es igual a cero puedo decir que ángulo más y por tanto en el rotate y le digo ángulo así que copiarlo ejecutamos y lo que quiero que tengáis en la pantalla es ese elemento tenemos el cubo en el que podemos ver como claramente está girando a partir de un punto que está fuera de su centro la diferencia en el ángulo de movimiento Mirad Es que yo ahora lo que voy a hacer es ir probando a cambiar el Translate cambio el Translate y daos cuenta como cambia el punto a partir del cual se mueve tengo Translate x y Translate Y si yo la pongo por ejemplo aquí 100 comprobáis que modifico el punto a partir del cual se mueve ese objeto es decir el Translate tiene que ver con El Punto de partida de la rotación también tiene que ver con El Punto de partida de la rotación la propia transformación de los elementos entonces este Translate que he puesto aquí ese Translate Z lo voy a complementar con un Translate x entonces digo para cada uno de ellos Translate x por ejemplo vamos a probarlo dejadme si queréis que lo pruebo yo y luego os lo digo 100 píxeles y esto lo copio lo pego y ahí lo tenemos vale con lo cual está casi en el sitio todavía no está en el sitio correcto vale pero está casi en el sitio Entonces si os fijáis en mi caso Mirad si tengo un cubo de 100% píxeles y el Translate es de 100 y 100 lo que he hecho es decirle que antes de empezar todo el resto de elementos le digo Translate x100 y luego las transformaciones que tuvierais anteriormente vale por tanto hacerlo así y veréis como el cubo o se empieza a rotar un poco mejor a partir de ese centro voy a probar una cosa voy a decirle si queréis lo pruebo yo primero Translate y Ahí está un poco más centrado no está todavía en el centro Pero vale está ahí mejor con lo cual ya podemos desatar la función que habíamos comentado simplemente para comprobar voy a poner esto a cero y a cero simplemente para comprobar mirar a ver déjame que comente esto a ver bien el y el X vamos a ver ahí por ejemplo bien fijaos Por tanto como voy a decirle cliente x como tras modificar esa línea la he modificado un poco veis como rotamos el cubo nosotros mediante el ratón lo que he hecho por tanto como os digo ahora me voy pasando lo que hago es modificar esta línea y daos cuenta que he dejado únicamente el rotate y lo he atado al cliente x copiando tal cual lo tengo Y veréis cómo sale Igual La idea es que realmente ese punto de Centro depende de la anchura del navegador por tanto fijaos que a mí me rota más o menos desde el centro ahora rota hacia el otro lado fijaos ahora rota perfecto y Mirad ahora rotar muy descentrado Entonces al final veréis que el punto de rotación también depende de la anchura de la pantalla Por qué pues por una razón muy sencilla Mirad es que el dip contenedor veis así como el dip cubo siempre me acabo ocupando más o menos lo mismo 531 lo que sea pero el dip contenedor ocupa el 100%. Así que lo que podemos hacer ahí Es simplemente decirle al contenedor que tenga un with de por ejemplo 400 píxeles y un High de 400 píxeles es decir un with previsible y con eso lo que conseguiremos mira es que la rotación sea igual por mucho que yo aumente o disminuya la pantalla De todas formas eso ahora mismo no me preocupa demasiado porque lo que quiero con este ejercicio son dos cosas Una que veáis como hemos conseguido generar sin problemas una geometría 3D y dos que veáis como a diferencia de ayer donde estuvimos trabajando con animaciones automáticas A diferencia de ayer la gracia de hoy es que yo puedo con el ratón interactuar yo puedo con el ratón especificar exactamente Cuánto se mueve la animación que si os fijáis este sencillo ejemplo es el mismo que visteis ayer en mi página web ves a la demostración que es esta de aquí que es que css 3D Mirad es el que hace que los elementos estén en 3D pero javascript es el que hace que cuando muevas el ratón el ángulo vaya variando Wow veis lo que le cuesta es que también incluye unos efectos css de desenfoque Y eso hace que consuma un montón de recursos vale por tanto Incluso en este ordenador que es un ordenador con una potencia razonable pues habéis visto como al principio se enganchaba vale por tanto vamos a hacer más allá de esta demostración pues algo más interesante que un simple cubo vamos a hacer un videojuego en 3D usando esto que hemos aprendido para hacer como una especie de simcity Vamos allá voy ahora a crear un nuevo archivo de hecho voy a crear una nueva carpeta la voy a llamar Sin City css 3D dentro de esta carpeta voy a copiar lo primero de todo jquery voy a crear un archivo llamado Index punto html voy a mover Index punto html y voy a copiar un poco la plantilla así que sin City css 3D ya sabéis que copio la plantilla elimino el css elimino esto de aquí y no perdona No lo voy a llamar Index punto html No Exacto Aunque hoy todavía no hagamos nada de php con este ejercicio pero lo quiero dejar preparado para cuando sí que lo hagamos que va a ser más bien pronto entonces dentro del Body es más así que vamos a hacer algo de php hoy entonces dentro del Body voy a decir did y de terreno y pongo por aquí un dip y dentro de ese dip es donde crearemos nuestro terreno luego pondré otro y de edificios por ejemplo y ahí más adelante poblaremos edificios pero de momento vamos a preocuparnos del terreno en cuanto al terreno le digo eso que es terreno pues va a tener un with de no sé mil píxeles y un hyde de 1000 píxeles un terreno Así apañado Así que yo vengo ahora y en el terreno Mira tú por dónde voy a abrir php para crear un pequeño bucle for y digo por y es igual a cero y es menor que no sé 1000 por ejemplo y más y digo eco VIP Class bloque terreno y ya está con él Sí porque sería Dinámico la cuestión está en que esto evidentemente en cuanto a esto le metamos base de datos va a salir de la base de datos Y esto ya está en php es mucho más fácil sacarlo de la base de datos si lo hago en javascript cuando lo hiciéramos la base de datos tendría que borrarlo deja javascript e intercalarlo aquí por eso para no hacer trabajar doble Pues para eso lo metemos ya en php y anticipamos ese momento Entonces si ahora guardo y recargo fijaos que parece que no ha pasado nada pero Mirad me voy al código fuente de la página y tengo mil bloques de terreno lo cual pues insisto no pasa nada está ahí claro yo ahora a todo aquello que sea lo que terreno le digo flotas a la izquierda tienes un with de no sé 40 píxeles por ejemplo vamos a probar con eso un hide de 40 píxeles claro un background Green un Border de un píxel solid black y con esto lo que pasa es esto Ahí va y el borde Ah sí que he puesto un guión Border dos puntos un píxel solid Black ahí me parece un poco aburrido entonces me voy a sacar una imagen de internet y voy a decir Sprite background grass miramos algo así madre mía Ahora me cojo una imagen como esa por ejemplo la guardo me la guardo en C en champ en https en simcity de 3D me hago una carpeta llamada imágenes y la guardo madre que es esto jpgc 200 quita Pues será pequeño 256 no 200 por 200 Sí pero ya te digo a ver podría abrir el que indica y cambiar el formato Pero mira da igual cogemos otra que me cuesta menos Sin City cs3d imágenes otra vez gif c200 Bueno pues no sé qué formato es ese pero lo voy a abrir claro lo convierto en el Gaming yo creo que lo están cambiando el formato adrede entonces edito con el game a ver vale Mirad lo edito me lo exporto como césped punto jpg y ya está vale Y ahora lo que voy a hacer es decirle que al bloque terreno le digo background URL entra en imágenes y Cógeme el césped punto jpg para que yo guarde recargue y como podéis ver ahí pues me sale el césped también le puedo decir background Size 100% 100% para que el tamaño del césped pues se adapte al dip y bueno como os podéis imaginar lo que voy a hacer a continuación es abatir este plano para que no sea un plano Pues no sé que esté mirando la pantalla sino que sea un plano que tenga cierta tridimensionalidad Vamos allá por tanto de hecho Mirad el dip terreno y el dip edificios lo voy a meter en un dip contenedor por tanto ir y de contenedor para qué pues para que ese contenedor sea realmente el que realiza el abatimiento por tanto me voy a contenedor y le decimos web kit Espera que te lo digo web kit Transformers Style present 3D y le digo webkit transform y digo por ejemplo pues rotate x 30 grados y rotate z 45 grados si hacemos esto en la pantalla vamos a verlo si ha funcionado bien vale pues si os fijáis Ah sí tengo ya un principio de rotación pero no parece cónico parece paralelo Por qué Pues porque no le he puesto perspective algo cercano a 600 píxeles Así que guardo recargo y ahora sí podéis ver ahí madre mía que distorsión podéis ver ahí Es que tengo un tablero muy grande como tengo ya un tablero ya os digo es que se pone hasta por debajo de la pantalla tengo un tablero en el que puedo empezar a trabajar y este tablero está directamente como podéis ver ahí en vista isométrica otra cosa que puedo hacer para que no se distorsione tanto es decirle Translate x menos 500 píxeles Translate y menos 500 píxeles Así que guardo y recargo y ya tengo por ahí una parte del tablero vale Lo único es que en mi caso este mil Pues igual deberían ser 5.000 No lo sé para que crezca Ah no al revés deberían ser 500 para que crezca correctamente ahora sí ahora mismo me da igual la verdad que uno de estos O sea que no sea simétrico lo que importa es que veamos un tablero y lo veamos con punto de fuga y hagamos un ejercicio como el que os voy a hacer a continuación Mirad bloque terreno dos puntos hv que era dos puntos hv cuando pasa el ratón por encima en css y digo Border un píxel solid White Así que guardo y recargo y fijaos como voy marcando la casilla en la que me encuentro ahora mismo pero me lo marca muy a lo bestia entonces acordaos ayer que hicimos lo de transición all un segundo vale para que pues tarde un segundo en activar la animación de la casilla estoy de zoom bien vale otra cosa que puedo hacer qué ha pasado voy no voy vale pues nada hago una cosita más y os dejo Box Shadow 0 píxeles cero píxeles 10 píxeles White in set y con esto ya me callo un poco y ahí se marca un poquito más el fondo blanco vale Así que copiarlo y fijaos como empezamos a tener ya en la pantalla un tablero de césped donde luego pues lo que haremos es poner edificios lo que quiero ahora es poner un cubo realmente vamos a reutilizar mucho del código que teníamos anteriormente Entonces yo ahora dentro de edificios me hago un dip y de es igual no y de No class porque va a haber muchos Class edificio dentro de clase edificio Mirad voy a copiar y pegar las seis caras que os ha pasado telepatas ya no realmente no por la s porque una cosa es el pack de edificios y otra cosa es el edificio con lo cual ya Bueno pero como lo llamo Pues un edificio yo que sé ahora lo que no puedo hacer es mantener esto ya que antes como solo tenía un cubo ponía podía poner una idea pero como voy a tener un montón de cubos ahora es he cuidado Esto no se vale Class cara uno Clash cara no esto no puede ser no se puede declarar Efectivamente es Class cara 1 no se puede porque la segunda declaración Class invalida la primera entonces solo puede haber una declaración Class Pero dentro de ella con espacio declaró tantas clases como necesite cada 4 cara 5 y cada 6 y ahora por tanto lo que voy a hacer lo que voy a hacer es que me copio esto de Aquí vamos a verlo me copio el cara y la cara en el css y digo cuidado esto ahora es también una clase clase clase y clase vamos a verlo a ver si se ve por alguna parte de la pantalla a que estará ahí arriba Ah no Mira está aquí vale he hecho zoom para comprobar que el cubo está pero está ahí está en un extremo de la pantalla pero bueno es fantástico porque ya tenemos Sí si no lo veis mira hace zoom hacia fuera y a mí me ha parecido en ese punto Y supongo que a vosotros también entonces lo que tengo que hacer ahora es el cubo donde está el cubo Ah no está claro esto es Class un edificio Vale pues le digo un edificio y le digo web kit transform perspectiva no hace falta porque ya la estoy declarando rotate no lo quiero rotar y digo Translate x menos 500 y menos 500 a ver qué pasa vale me lo ha creado a ver me lo ha creado allí así hay que decirle present 3D vaya bien y le digo Vale pues esto es más 500 un segundo ahí está vale lo que he hecho es esto lo que he hecho es decirle el un edificio le digo web y Transformer está el preset 3D y web kit Transformer Translate x 5 00 claro vamos a ver esa cara Cuánto mide Mirad mire 100 píxeles cuánto mide cada iteración del suelo 40 píxeles vale por tanto atención porque voy a cambiar un montón de cosas voy a cambiar todo este pack de 100 píxeles 100 píxeles por 40 entonces pongo 40 40 Estos son 25 Estos son 20 perdón 20 40 esto como os imaginaréis más adelante lo Tendremos que hacer en porcentajes o con alguna variable externa para que cuando cambie uno se me cambien todos a la vez pero de momento lo hacemos manual 40 tenemos con esto un cubo que ocupa uno de los lugares Así que ahora simplemente me hace falta Translate Z 20 píxeles y con esto Ahí está y con esto tenemos ya el cubo encima del tablero y con estos digo ya podéis copiar el problema engetic particularmente que en otros Editores igual no existe ese problema o igual existen problemas peores también os digo Y es que me marca correctamente el html y el php pero no es capaz de marcar correctamente el css que se encuentra dentro de la etiqueta Style Así que una solución sería la siguiente mirado una solución es que me voy aquí me creo un archivo externo llamado estilo punto css me creo un estilo externo derivo todo el estilo a ese estilo externo me lo marca fantásticamente bien Y entonces ahora lo único que tengo que hacer evidentemente es que le digo link es igual a esta el Sit H red es igual a estilo punto css y por tanto de hecho incluso ahora lo que puedo hacer es que segrego esta pantalla y así podéis ver a la vez tanto el css como el html su dónde creéis que me ponga Supongo queréis que me ponga aquí que es lo último que estábamos haciendo en un edificio entonces la cuestión está atención dejadme que vuelva a meter estilo aquí dentro vale luego lo podéis tocar de paso No ahora luego os lo paso si hace falta pero de paso os quiero enseñar un truco atención tras la pantalla súper sucio de php Super resolución pero que se usa una barbaridad Y el truco súper sucio Es que yo puedo poner php atención por edificio es igual a cero o a uno me da igual edificio es menor que 100 o sea voy a crear 100 edificios edificio más abro la llave y cierro php y ahora aquí abajo php Cierro la llave eso sí que tiene que estar si aquí Abre una llave aquí la tengo que cerrar eso se puede hacer eso no sólo se puede hacer sino que además Es legal bien la idea es que aunque aquí acabe la llave no acaba el Script php acaba temporalmente el Script Sí con lo cual Mira lo vas a poder comprobar atención cuando yo ahora recargo por aquí por la pantalla le doy a ver el código fuente de la página y vas a poder ver como una vez acabado el bloque terreno aparece Class un edificio Class un edificio es decir este bloque me ha servido para crear 100 edificios la idea Por tanto está en que hasta ahora lo hacíamos con un eco nos metíamos en el foro le decíamos eco lanzábamos el edificio y ya está Pero podemos hacerlo también así dime un momentín Vamos allá Porque si quiero darle una idea porque de hecho le quiero dar una idea diferente Pues yo puedo venir aquí y decirle ID sí sí sin ningún problema php Perdona y de a edificio eco edificio no simplifica Sí entonces recargo y dice edificio 1 edificio 2 edificio 3 edificio 4 y así tengo una clase para decir que es lo que le pasa a ese edificio Perdón qué es lo que le pasa a todos los edificios de ese tipo y un ID para localizar a ese edificio concreto con lo cual este ejercicio acaba fíjate que ahora tengo como 100 edificios ha emitidos dentro y no quiero eso ese edificio y digo este ejercicio acaba diciendo lo siguiente Style es igual a momentín que te lo digo aquí está él es igual a esto bueno Esto no hace falta realmente Esto sí está él es igual a eso de ahí lo estoy metiendo correctamente Sí vale Y ahora le digo Translate ya increíble brutal php eco randa desde cero o no desde menos 500 hasta Y eso mismo aquí qué estoy haciendo ahí pues que aparezcan un montón de edificios vaya no era de menos 500 hasta más 500 era desde cero hasta 500 creo no lo sé pues no vale pues desde donde hasta dónde es ahora veremos desde dónde hasta dónde es tengo que moverlo más todavía sí había menudos A ver Mira Sí pero vamos a verlo cero por aquí sí 0 por aquí Perdona perdón vale Translate y de 0 a 500 sí es cuando me parecía por ahí pero bueno no os preocupéis porque una manera le puedo decir de menos 1.000 a 500 y hasta que encuentre exactamente el punto donde está ese tablero vale otra cosa es que fijaos como los pueden haber intersecciones y de hecho los cubos no caen correctamente en el sitio pero yo ahora le digo a esto le quito un cero a esto le quite un cero a esto le quito un cero y lo multiplico por 40 porque lo multiplicó por 40 Pues porque 40 es la anchura de cada una de las casillas y con eso me voy a asegurar vamos a ver o debería que esto debería cuadrar en el sitio pues no 40 aparte se me habrán ido por ahí de menos 10 a 5 Ah sí claro de menos 10 a cinco de menos 10 a 5 porque los de multiplicando por 40 ahora empiezan a estar ahí veis como no coinciden todavía con la rejilla pero veis como ya no se solapan los unos a los otros veis como caen justo unos encima de otros vale antes tenía solapamiento ahora no lo único que tengo que hacer por tanto es ahora encontrar el rango del Random que me permite hacer que vayan desde esta punta hasta esta punta Pero la idea Por tanto es que veáis Cómo hacer múltiples edificios una vez que tienes hecho uno pues no os va a costar tanto así que digo esto es 15 dejadme que lo encuentre Y a partir de ahí si quieres paso el código y lo empezáis a trabajar vale bien Entonces esto es 25 vale esto es 25 vale tengo los cubos como por ahí esto es menos 30 vale esto es cero ahora sí aquí habrán 25 pues entonces esto es cero justo de menos 25 a 0 ahora más o menos Sí vale con lo cual Solo falta cuadrarlos con la rejilla daos cuenta como con la rejilla pues parece que quiere cuadrar le falta un poco igual es que están un poco levantados pero ya tenemos por ahí un entorno donde Pues bueno tenemos la ciudad corriendo y otra cosa que os voy a decir no os lo digo lo haremos mañana lo que iba a hacer es poner el terreno en rotación para que poco a poco veáis Cómo tenemos el terreno en 3D decir que fuera girando para que lo veáis en 3D Pero bueno Con que hagáis este bucle for ya tengo suficiente bueno Mirad simplemente en el php lo que dices lo siguiente aparte de las propiedades que estuvimos trabajando el otro día pues aparte del Translate Z que le puse al final para subir los cubos pues le puso un escape Z scale escalar solo en el eje Z que cuya escala está en un valor entre 0 y 30 partido 10 entre 0 y 30 partido 10 quiere decir que finalmente el valor está entre 0 y 3 con un decimal de precisión vale por eso veis que las cajitas Pues ahora tienen cada una altura diferente Bueno pues lo que os decía es que lo que quiero es averiguar un poco Cuál es el mapeado de cada una de estas caras para lo siguiente Bueno entonces me voy a conectar a Google y dentro de Google voy a descargar un archivo que sea mapeado 3D de cierra cuando entres allí bien entonces mapeado 3D vamos a ver imágenes sí perfecto vamos a ver algo así no realmente Google Maps coordinates y lo que estoy buscando Exacto es un mapa exactamente como este puede ser este de aquí puede ser este de aquí puede ser de hecho Incluso un mapa que tenga una flecha hacia arriba Lo único que quiero es un mapa como este o como este que cuando yo lo aplique me diga exactamente que es lo que está arriba y qué es lo que está debajo por tanto voy a descargar este mapa a ver si no está perfecto guardo imagen lo pongo dentro de c vamos a ver Sam ht dogs lo pongo dentro de vamos a verlo lo pongo dentro de simcity cs3d y lo guardo por ejemplo como V Y esto es lo que me va a permitir mirar que cuando lo coloque aquí dentro le voy a decir por ejemplo pues todo aquello que sea cara recordar abro el archivo css estilo css todo aquello que sea cara pues no quiero que tenga un background Green si no quiero que tenga un background URL imágenes barra v.png es decir ese archivo que he traído vale en el encara le digo que el background quiero que sea esa imagen Y por tanto lo que ocurre es que bueno tengo esto por aquí fijaos que es eso de ahí que raro no parece que coincida pero sí que coincide exactamente con esa parte del cero lo veis esa esquinita del cero es esa esquinita que tenemos ahí bueno Esto es porque no le he dicho que background size dos puntos 100% espacio 100% y con esto que consigo es decirle al background que lo que quiero es que esté atado esté asociado fijaos que es una especie como de edificio arcoiris vale Y esto me sirve para ver cómo por ejemplo en las caras laterales en estas dos caras de aquí lo que ocurre es que en principio parece Ah No mira esto debería aparecer con el arcoiris vertical entonces en esta cara aparece con arcoiris vertical pero en esta de aquí aparece justo al contrario vale por tanto simplemente lo que va a ocurrir por ejemplo esta cara de aquí es que tenemos que estas caras laterales y voltearlas para asegurarnos que la textura está igual en todas las caras por tanto en este caso vamos a ver claro Ahora hay que averiguar qué cara son Entonces si digo Translate x 40 grados pues digo 40 píxeles Pues voy a decir 60 píxeles para comprobar que esa no es la cara vale Esa es la cara de arriba veis como solo la de arriba se ha deformado se ha modificado dejadme que me acerque veis ahí bien pues Vale Esa no es así que sigo con la siguiente bueno está tampoco es evidentemente y digo vamos a ver vamos a probar esto bien Y esa no es fíjate que se ha movido la de atrás y la de atrás no es por tanto ya tenemos localizadas que sería por ejemplo esta de aquí esa de ahí Vale entonces lo que quiero hacer ahora por tanto con esa cara por ejemplo con esta de aquí es decirle algo como lo siguiente vamos a ver voy a decirle rotate Z voy a probar esto primero lo pruebo yo si queréis 90d lo roto 90 grados y luego hago toda la operación el problema como veis vamos a ver es que al rotar 90 grados en Z se me ha rotado en el eje incorrecto Bueno dale no pasa nada porque también lo que podemos hacer porque ahora Claro en rotate Tendría que ir probando y x tampoco y rotate x tampoco vale bien Sabiendo esto Sabiendo al final Quién es quién también puedo hacer lo siguiente miradme sí sí es que importa el orden de aplicación de las caras con lo cual tampoco quiero pelear demasiado con eso cuando podemos ganar de otra manera y Es que voy a decir building texture y debajo por ejemplo una textura pues como esta o cada uno como queráis realmente digo Mira esta que es un poquito más elegante lo que pasa es que está más horizontal que otra cosa bueno está abajo está bien así que me descargo esa textura me la guardo como atención en simcity imágenes edificio Pues no sé frente uno Así que ahora vengo aquí y digo todo aquello que sea cara 3 y cara 4 le voy a decir que background URL imágenes edificio frente 1 punto jpg esto lo aplico también a esa cara número 2 Quién ganará cuidado no lo sé porque también arriba le estoy diciendo UV bien parece que por ahí está ganando V Así que quito V por aquí y simplemente el background viene aquí dentro pero claro cuidado Valentín vale a ver que recargamos ahí cuidado porque le tengo que decir que background - Size 100% para que lo que ocurra de esta manera es Que aparezca la textura del edificio correctamente puesta fijaos que cada una de las líneas pues tiene al final su WhatsApp si queréis lo que voy a hacer es que las voy a bajar unas cuantas líneas y así las veréis mejor porque al final pues cada una ahora de estas caras que antes tenían una única propiedad Bueno pues ahora van a tener varias cada cuatro fijaos que es que el web que transforma pues es largo de escribir de momento es de lo más largo que hemos escrito hay alguna instrucción más larga ya la veréis Pero bueno no muchas más bien con lo cual le aplico esta misma lógica a la cara 3 que es la cara de atrás y por tanto en la cara 3 y en la cara 4 ahora tengo lo que sería digamos las dos caras frontal y posterior del edificio fijaos ahí las tenéis Ahora quiero las dos caras laterales por tanto si quiero las dos caras laterales lo que voy a hacer mirar Es que voy a entrar en imágenes voy a seleccionar edificio frente uno punto jpg lo voy a voltear 90 grados simplemente así de sencillo ahora veréis lo volteo imagen transformar rotar 90 grados en qué sentido era No lo sé vamos a probarlo así exportar como edificio frente 2 con lo cual a estos dos elementos de aquí uno y dos les digo edificio frente 2 vamos a ver si está bien Yo diría que sí no sé vamos a verlo sí sí porque hay una cosa aquí azul abajo y esa cosa azul aparece por aquí vale por tanto bueno no pasa nada porque fijaos le digo imagen transformar 180 grados exportar y ahora cojo la de edificio frente 1 y también la giró 180 grados y ya está Vale por tanto sobre escribo y al cargar esta imagen de nuevo pues teóricamente sí Exacto pues tendría que hacer algo como Quizás sí se queda en la caché como un incógnito o algo así Ahora sí vale Fíjate que efectivamente Ahí está en la caché pero ahí como he hecho una incógnito Pues hay una de caché y efectivamente me lo pone vale con lo cual Bueno de hecho Mira me voy a quedar aquí y ya que estamos también pues al techo le tendría que poner algo así como Mirad vamos a verlo me voy a Bueno me quedo aquí y digo building texture sí textura como del tejado hay una cosa así ese tipo de Roof no una cosa así Mira justo esto estaba buscando Entonces esto de hecho veo que había más algo así guardo imagen como tejado y por tanto ahora lo que hago como os podéis imaginar es que en estas dos en el pecho y en el suelo porque no pues digo Sí exacto de humos o de aire acondicionado en el tejado o lo que sea Así que recargo y como veréis pues ya tengo unos edificios que no son de color verde como ayer Sino que les hemos puesto un poco de textura yo a partir de aquí a partir de este momento y esto ya lo dejo a vuestra elección depende un poco Cómo queráis la estética de vuestro juego pues os puedo decir que si queréis les podemos quitar el Border de un píxel solid Black porque antes eran importantes para ver un poco donde acababa cada cara pero es que ahora que tienen textura vemos perfectamente donde acaba cada cara vale tenemos un poquito más un acabado en 3D pero es que igual me decís no es que a mí me Mola lo de la línea negra que marca pues cada uno como queráis de la misma manera que yo creo que después de un rato pues ya vemos el bloque terreno ya vemos cada bloque terreno lo que es con lo cual pues lo que voy a hacer es también quitar el borde al bloque terreno para Que aparezca un terreno continuo sabiendo que cuando coloco el ratón encima ya se marca ese importante Ya se marca ese cuadrante porque le he dicho lo del box Shadow de 0 píxeles cero píxeles 10 píxeles blanco hacia adentro inset vale por eso aparece como ese rectángulo blanco por ahí dentro con un poquito de transición Oye esa transición Me parece muy lenta por tanto ahí donde pone un segundo voy a poner 0.2 segundos y allí será más rápida muy bien y ya tenemos por tanto como veis Pues bueno configuradas las texturas para estos edificios me parecen un poco rosas a la que lo estoy viendo vale por tanto lo que voy a hacer en este caso es que los voy a abrir les voy a decir que en colores los de saturo en colores los de saturo de momento así sí no sé sí es que ya te digo como luego tenemos los filtros css luego podremos colonizar independientemente a cada uno de ellos era recargo y ahora es lo que comentábamos hace un momento verdad hasta que no me haga otra sesión y le fuerce al programa a recargar las texturas pues no se verán los cambios vale bien tengo esto por aquí ya hemos añadido un poco de texturas vamos a Añadir un poquito de interactividad al juego lo que quiero a continuación es que cuando yo pasé por aquí el ratón por cada uno de los bloques y haga clic pues se cambie a otro tipo de textura por ejemplo a carretera hasta ahora en este proyecto de aquí no hemos introducido prácticamente nada de interactividad y esto lo podemos notar en el Index punto php fijaos que el jquery ahora mismo está bastante vacío pero yo empiezo a escribir como siempre y digo documen puntos ready creo una función y esta función va a hacer lo siguiente cuando sobre un elemento que tiene el ID bloque terreno para que te lo digo bloque terreno en la clase bloque terreno cuando sobre un elemento que tiene la clase bloque terreno hago clic lo que quiero es ponerle otra textura vale me voy a dejar otra textura la que sea y voy a decir Road texture Y pues mira algo justo como esto estaba buscando algo así Bueno yo que sé algo así de momento ver imagen tú fíjate qué bonito y digo carretera Entonces le digo cuando haga clic voy a ejecutar una función local ya sabéis que diga a this a este elemento sobre el que he pulsado punto css y le digo background tu fondo me lo vas a cambiar a URL imágenes barra carretera punto jpg esto equivaldrá por tanto a que cuando yo haga clic sobre Ah mira cuando haga clic sobre uno de los elementos pues aparecerá una textura aún Qué es lo que está apareciendo un cachito efectivamente porque me hace falta también Esto para mí es un defecto de fss porque yo ya le había dicho a este elemento yo ya le había dicho Lo que terreno que bloque terreno background size 100%. Pero de alguna manera tiende a olvidarse por tanto cuando se olvida Pues yo se lo recuerdo Entonces le digo background Size y le digo 100% . y con esto por tanto lo que vamos a conseguir es que cuando hago clic pues fijaos como aparece ahí una textura y por tanto La idea es que puedo ir creando tantas texturas como necesite ahora como os podéis imaginar en la parte superior voy a hacer como una paleta de diferente en City de diferentes texturas que puedo ir colocando para ello por tanto como os podéis imaginar Mirad me voy por aquí a contenedor no me voy por aquí fuera de contenedor estoy justo después del Body y digo VIP y de paleta fantástico paleta y en paleta a paleta le digo que a paleta le digo position absoluto top 5 píxeles left 5 píxeles with no sé 500 píxeles High 10 píxeles y Border para que se vea solo simplemente Border un píxel solid Black vale Para que allá arriba con suerte Hola Dónde estás No te veo vamos a verlo paleta vamos a ver Body esto fuera Ah muy bien No lo he guardado fantástico también así que recargo Ahora sí vale Y tengo por ahí va Qué fuerte se me ha puesto sino 500 pero va vale dejar que voy a poner 50 pero no digo que fuerte que se me queda por detrás Entonces no pasa nada cuando eso pasa Simplemente porque se me queda por detrás Es lógico porque yo primero le he dicho que quería la paleta y luego le he dicho que quería todo lo demás con lo cual por orden natural esto se queda detrás Y esto se queda adelante ahora si le he puesto posiciona en absoluto yo puedo cambiar ese orden poniendo un Z Index por ejemplo de 10.000 el Z Index es como decirle no tú tienes que estar por encima de todo lo demás vale Así que tengo por ahí la paleta y ahora dentro de la paleta Pues voy a decir coloco una imagen que va a ser src imágenes barra carretera creo que era no sé de acuerdo Creo que sí no Espera que te lo digo y pam pam carretera punto jpg vale Así que madre mía Qué grande bien no os preocupéis digo paleta espacio img le digo hype 80%. esto lo que va a hacer es que paleta se adapte a lo que teníamos antes Claro pero no es regular Vale pues nada pues le digo 40 píxeles with 40 píxeles y yo que sé Border 2 píxeles solid White simplemente para que por ahí pues aparezca veis la textura que yo pueda aplicar vamos a descargar un poco más de texturas yo puedo descargar ahora algo así como mood texture que es como barro Pues no sé una que me guste la que vosotros llegáis madre 1600 por 1200 para este juego yo creo que no vamos a hacer un tamaño mediano cuando no pequeño no sé esta no que parece chocolate horrible pero está ni te cuento ya pero no sé una cosa así pues a esta le llamó barro punto jpg y me vengo aquí y digo img src pues barro punto jpg Y si recargo Pues fijaos que tengo ahí tengo asfalto y tengo barro qué más eso ocurre que podría descargar simplemente textura de suelo él bueno Ah por si quiere volver Claro que sí muy bien entonces efectivamente por si quiero volver pues le digo que esto era se llama césped es que no me acuerdo sí césped que tengo memoria de pez Así que césped Vale qué más agua Claro que sí entonces water texture sabéis que siempre lo pongo en aquí por ejemplo me pongo en inglés porque las probabilidades de encontrar resultados siempre son mayores Así que cojo esta imagen y la guardo como agua punto jpg y ya sabéis de aquí hasta el infinito y más allá que pues simplemente me estoy creando una paleta con x elementos vale esta paleta ahora mismo es feísima antes de que acabe la clase pues la haremos más bonita la ponemos bajo y lo que sea pero ahora mismo como veréis a mí me suele interesar primero que un programa funcione y cuando funciona Entonces ya lo hacemos bonito Así que lo que quiero ahora después de haber puesto estas imágenes es que cuando yo clic en una imagen el programa se entere de que lo que yo quiero es que el siguiente bloque que dibuje sea de esa imagen Pues ahora simplemente lo que voy a hacer en este caso es con javascript insisto estamos hablando de interactividad pues decirle que cuando sobre paleta espacio img cuando sobre claro Esta es como css lo bueno que tiene los electores de jquery es que están calcados de los selectores de css por tanto paleta espacio img punto clic y yo digo creo una función Y esa función se va a llamar pues vamos a ver voy a decir cuidado aquí Mirad bar textura actual es igual a nada para qué Para crear una variable que sea compartida entre todas las funciones por eso la creamos fuera hay veces que no interesa pero en este caso Sí y digo textura actual sí es igual a de este elemento en el que he pinchado su atributo src porque si os fijáis la imagen está en su atributo src Así que digo textura actual es lo que tú me digas aquí con lo cual es más Mira es más textura actual en lugar de inicializarlo a cero lo voy a inicializar a césped para que tenga un valor inicial antes de que pinches ahí por si acaso pero ahora le digo cuando hagas clic la URL es textura actual esto que hará Pues bueno Esto lo que hará es que cuando yo haga clic por defecto le ponga imágenes césped punto jpg pero cada vez que yo haga clic en una imagen de la paleta lo que voy a hacer es cambiar la textura actual por tanto guardo recargo en principio voy dibujando y no ocurre nada porque estoy dibujando la misma textura pero yo ahora Cambio aquí pincho aquí y pinto de asfalto ahora Cambio a barro pincho aquí y pinto de barro pincho aquí y vuelvo a pintar de césped lo que decíais y pinto aquí y le digo que estoy pintando de agua y así de sencillo por tanto puede ser trabajar con css en 3D Porque si os fijáis en este caso css 3D lo que está haciendo es calcular el directamente todo lo que son las transformaciones 3D y nosotros únicamente nos preocupamos de la lógica del juego ojo Esto no es Exactamente igual a lo que hicimos anteriormente con el juego isométrico porque esto Aunque parezca que no es isométrico eso es cónico por tanto esto es algo que no es que sea lo mismo que hacíamos Es que veis la perspectiva como va cambiando según la imagen Exacto Esto no es lo mismo que lo que hacíamos esto es más que lo que hacíamos esto es diferente esto nos permite tener un punto de vista pues más avanzado más Dinámico de la misma manera para demostraros que el css 3D pues os abre un montón de posibilidades nuevas también me gustaría poder girar ligeramente primero lo voy a girar la Bestia y luego lo voy a girar ligeramente el escenario que cuando yo mueva el ratón Pues un poco se gire en 3D para que veamos que estamos trabajando en 3D realmente Así que lo que voy a hacer ahora es lo siguiente Mirad cuando sobre el documento mueva el ratón os acordáis el otro día mover la caja Mouse quiero ejecutar una función que ya sabéis que tiene la letrita e la letra e como quien dice evento como quien dice longaniza entonces voy a poner evento para que veáis que si es una palabra en castellano es porque ponéis podéis poner la palabra que queráis y ahora digo contenedor seleccione el contenedor y le aplico una transformación css madre mía qué pedazo de transformación que va a ser Entonces le digo déjame que te lo diga voy a copiarte aquí donde está contenedor aquí madre mía y digo web kit Transformer digo web y el web que transforma es todo esto de aquí claro Es que no puedo cambiar una sola propiedad se cambia una propiedad me tengo que llevar toda la propiedades a la vez y le digo rotate Z atención Mirad digo evento punto page x Esto va a hacer una rotación brutal lo sé mírame entonces atención le digo recargo y fijaos que en cuanto meto el ratón hago así fijaos que super rotación bien Esto no es lo que quiero pero ya demuestra ya empieza a demostrar como realmente podemos interactuar realmente podemos mover esta rotación de hecho incluso fijaos que bestia No porque yo incluso la rotación en x que pone 30 Pues le voy a decir evento punto page y fijaos que ahora en horizontales horizontal y en verticales es vertical es decir tengo una órbita completa sobre el objeto lo veis pero Wow espero es un poco incontrolable vale por tanto a continuación voy a establecer una serie de ecuaciones para que esto sea mucho más controlable y mucho más agradable lo que yo quiero realmente es que cuando el ratón esté en el centro de la pantalla sea cuando está en el punto cero Así que voy a hacer lo siguiente Voy a hacerme esto grande para que lo veáis y voy a decir anchura pantalla es igual a Windows punto Inner altura pantalla es igual a Windows punto y por tanto yo ahora le digo lo siguiente el Root x la rotación X en este caso va a ser vamos a verlo quiero lo que sea menos evento punto page x partido 2 si queréis pongo ahí cero menos evento page x partido por dos esto es vamos a ver Vale cuando esto sea la mitad Esto será cero Esto es lo que quiero bien ahora todo esto lo dividiré por supuesto Entonces le digo roth Y esto es page y ahora empiezo a cambiar variables esto es Root x esto es Root y si eres tú soy yo pues seré yo vale Así que sigamos si yo tengo este código lo que tengo ahora es que el espacio está bien o debería estar bien cuando el ratón está en el medio de la pantalla Ahora parece que más o menos sí Ah mira la rotación Parece que va un poco al revés vale otra cosa que voy a hacer es que al body para evitar los problemas que vosotros mismos tenéis estos días le digo overflow hidden para que no me molesten las barras de scroll así vale para que esto está sí sí está al revés vale No pasa nada lo que hago ahora finalmente es que todo esto para que no vaya tan fuerte ahora voy lo parto por 100 esa es un poco la magia lo parto por 100 sí y al final 21 y al final a todo esto le digo lo siguiente la rotación x eran a ver espera que te lo digo si la rotación x eran 45 grados y la rotación inicial y eran 30 grados con lo cual si ahora recargamos Ahí os fijaréis como tengo lo mismo que tenía antes pero mucho más controlado Vale tengo ese efecto 3D diréis cara y este es demasiado controlado Bueno yo que sé cada uno de febrero como quiera si queréis lo partimos por 10 en lugar de por 100 para y veis ahí como tenéis mejor el efecto 3D Oye yo parece que lo tengo al revés entonces fijaos que izquierda de izquierda derecha es derecha pero cuando le doy arriba Y le doy abajo esto ya es como la clásica discusión de El invertir y en el mando de la Xbox que cada uno os lo Configura como quiere vale por tanto en este caso lo que voy a decir es que esto en lugar de sumar resta y lo que voy a hacer por tanto es que ahora sí no sé este comportamiento me parece un poquito más natural Pero insisto cada uno configurarlo como mejor veáis esto por tanto me permite seguir jugando tener sensación de 3D Espera que haga esto un poco más grande tener sensación de 3D y a la vez poder interactuar con las casillas es decir porque es que antes la relación era tan salvaje que no podía interactuar Por eso digo que a mí está incluso Me parece muy fuerte porque digo Ah pero no puedo trabajar correctamente pues yo me lo voy a poner partido 100 porque yo no quiero un gran efecto 3D Yo solo quiero un efecto 3D ahí veis algo que me permita Pues ahora poner por ejemplo decir estos barro y estos barro y esto es césped en estos tres ya lo tengo Y esto es carretera y por aquí pasa la carretera y tenga pues ese efecto 3D pero yo al menos en esto que quiero desarrollar hoy pues tampoco voy buscando un súper efecto espectacular y estoy aquí está muy bien pero me da un poco de rabia el hecho de que cada vez que recargo pues lo vuelvo a perder todo así que me gustaría empezar a meter esto en una base de datos muy bien antes de meter esto en una base de datos lo que quiero hacer es que los edificios ya no sean aleatorios porque los había hecho aleatorios simplemente para ver edificios pero ahora que estamos trabajando con interactividad pues ya no hace falta porque ya podemos poner nuestros propios edificios esto quiere decir que me voy a cargar de momento Esto me voy a cargar este bucle for vale Hasta aquí un segundo eh Porque solo quiero terreno ahora de momento porque quiero decirle que solo cuando pulso un edificio es cuando voy a querer crear un edificio Bueno vamos a verlo vale Voy a hacer lo siguiente cuando haga clic bien Así que voy a poner la textura de edificio aquí no le voy a poner aquí y digo edificio no como era frente eso es frente uno Mirad atención tengo eso de ahí y ahora el javascript le digo cuando bloque terreno haga clic todo eso de ahí Pero cuidado Además le digo si textura actual es igual a imágenes edificio frente no solo quiero como os podéis imaginar que me pongas la textura sino además quiero que me pongas un edificio veis ahí Mirad tengo edificio Y sí el Igual por supuesto porque si no es una asignación tiene que ser una comparación muy bien Así que lo que quiero ahora es decirle qué le digo pues a ver vale estoy pensando te puedo decir vale Voy a probarlo this punto apen realmente no Pero vale un momento this punto append y le quiero aprendizar todo este código madre mía le apendizo todo este código y voy a hacer lo siguiente miradme porque esto va a ser traumático vamos a verlo no pues lo voy a quitar lo voy a quitar sí sí sí edificio Pues mira de momento me voy a cargar todo esto de momento y ahora digo comillas comillas con esto lo que estoy haciendo es permitir que una cadena de javascript me falta aún más al final permitir que una cadena de javascript sea multilínea así que voy a encadenando Y esto es lo único que me va a salvar si quiero hacer una cadena de javascript multilínea porque en javascript A diferencia de php cuando bajo de línea os acordáis es una instrucción diferente entonces como decirle no bajo de línea pero no es una instrucción diferente Es la misma Así que guardo y recargo selecciono un edificio vale de momento nada a ver selecciono agua voy a hacer un console porque no creo que no está cargando vale console punto log nuevo edificio vamos a verlo clic nuevo edificio Sí pero debe estar creando el edificio en alguna otra parte lo que terreno lo que te reno ay muy bien pero no lo está poniendo está por ahí por alguna parte un edificio cada uno está por ahí por alguna parte bien pues ahí sí necesito decirle al programa donde está ese bloque vamos a verlo voy a hacer esto grande voy a copiarme esto el ID me da igual pero el estilo no hasta aquí y digo estilo esto lo pongo con comillas dobles Translate x 0 píxeles Translate y píxeles scale Z fuera Y esto no se lo apendizo Avis sino que solo aprendizo a edificios Así que guardo recargo clic hago clic Y es que por ahí por alguna parte lo que pasa es que tengo que hacer zoom Ahí está Vale Mirad hago clic y cuando cojo el edificio y hago clic aparece el edificio evidentemente no está apareciendo en el lugar correcto Simplemente porque aquí pone Translate x y Translate y a 0 Así que lo que tengo que hacer en este caso es localizar Cuál es la altura y cuál es la anchura con respecto a ese elemento voy a hacer lo siguiente voy a hacer una prueba y digo el nuevo edificio está en this punto left coma dis H punto top Así que guardamos y recargamos vamos a verlo selecciono un edificio y dice este edificio no es una función jquery position of set vamos a ver el offset y offset así que offset es igual a this y ahora digo offset.left y offset punto top vale pincho está en 146,120 está en 160,129 vale Ahí lo que está haciendo es que me está cogiendo las vamos a ver la distancia hacia arriba la distancia hasta este punto de aquí hay es 500 y pico 400 y pico vale lo que quiero por tanto es Cuál es la distancia digamos en bloques no en píxeles Cómo podría hacer eso verás algo con 40 Así que hay algo con 40 pero no es exactamente eso Entonces la cuestión es que esto está cogiendo Pixel a Pixel cuando yo lo podría partir por 40 para bloques de 40 Pero mi problema principal es que yo estoy queriendo una abatimiento en el plano y lo que está ocurriendo es que me está cogiendo la coordenada vertical y la coordinadora horizontal es decir el offset Salta digamos el 3D y lo que hace es medir la coordenada directamente hacia arriba demostración si pincho aquí fijaos que estoy en 84 100 y prácticamente 84 píxeles 100 píxeles es lo que hay hasta ahí si pincho aquí por ejemplo es 653 por 80 mucho en x muy poco en Y si pincho aquí por ejemplo tengo un poco de todo vale por tanto lo que tengo que hacer es averiguar en el cuadro en el que he pulsado Cuál es exactamente la posición de ese cuadro el principal problema de estos bloques de aquí de los bloques del terreno es que han caído ellos solos sin más esfuerzo quiero decir que Deep Class bloque terreno quien le dice a ese bloque terreno realmente donde está quién le dice dónde está en X Y Sí pero es un Ford unidimensional es este Ford de aquí y lo que está haciendo simplemente es crear bloque terreno y nos hemos aprovechado de la circunstancia de que ese bloque terreno digamos cae solo se va apilando el solito os acordáis del Flow left que teníamos por ahí Por tanto la idea es que efectivamente como os podéis imaginar vamos a convertir este bucle for en qué lo vamos a convertir tenéis que decir en un doble bucle has dicho que bien pues ya están aquí nuestros amigos los dobles bucles Ford siempre acudiendo nuestra ayuda Así que vengo por aquí y digo Deep Class bloque terreno y digo Style y digo position absolute left es igual a algo píxeles y top es igual a algo píxeles evidentemente left es igual a x hay porque no me lo pones porque es con comilla simple y top es igual a algo píxeles que es el y claro ahí sí si desencaminado no estabas por 40 algo de por 40 así que tenemos eso ahí vamos a verlo un segundin recargo bien qué me dices Mira un error en 3D Sí claro a ver Andy fine x Ah sí claro madre mía Pero si es que estoy en php si es que estoy en php y los más Son puntos y el dólar también falta y bueno acabáis de vuestro primer mensaje de error en 3D entonces guardo y recargo todo mejora en 3D bien Exacto qué pasa aquí donde punto y coma Ah no no no eso no está bien y eso no está bien vale otro error px top ostras a ver algo no le gusta no eso ahora teóricamente es correcto si quieres lo que voy a hacer Es que voy a encapsularlo para que el programa entienda lo que le estoy diciendo que entienda que es una operación matemática ahora sí cuidado si ahora Lo único es que mirar atención tengo 500 por 500 bloques que es un poco fuerte vale por eso igual lo que me conviene hacer ahora es recargar esto bien No pasa nada terreno vale bloque terreno está ahí left Ah mira no sí que llevan dos puntos sí correcto left dos puntos lo que no lo que me había equivocado es al poner donde iban los dos puntos y ahí ahora sí vale Y así fijaos que cada uno de estos bloques Ahora tiene su posición de exactamente dónde va es decir ahora ya no están cayendo porque sí ahora están cayendo porque ellos lo valen están cayendo porque se lo merecen están cayendo porque cada uno está indicando manualmente Cuál es su posición que os pongo claro ahora La idea es que si ya estoy poniendo una propiedad left y top es decir cada uno de los bloques ahora sabe exactamente en qué Pixel está pues ya lo tengo mucho mejor Mirad alguien está vibrando la mesa ya lo tengo mucho mejor para hacer lo siguiente ahora le digo vamos a ver aquí todo esto es lo que ocurre si textura actual es igual a imágenes es difícil diferente y digo bar pues x es igual a this punto css left o fíjate Qué curioso cuando css lo que hace es tener dos parámetros lo que hace es escribir te voy a escribir el left pero cuando css se tiene un parámetro lo que hace es leer No quiero que me digas cuál es tu left no te voy a escribir Yo uno Quiero que me digas El que ya tenías así que es un css como estos que hemos hecho aquí pero si tiene dos parámetros coma segundo parámetros porque va a escribir ese tiene un solo parámetros porque va a leer así que pues x y por y Vale y digo así que por ejemplo ahora digo pues x Bueno pues x por aquí pues y por allí y en el Translate por verlo más que nada y en el Translate Espera que es comida simple digo pues x y Translate y pues y esto lo meto en edificios sí Así que si todo ha ido bien Vamos a verlo No lo sé si todo ha ido bien recargo Vale Voy a la consola edificio cojo este de aquí y bueno Vale está un poco desfasado pero el nuevo edificio está en 2007 60 Ah no vale Esto está creando todo el rato al mismo sitio o lo que pasa aquí a ver pues puedo vamos a recargarlo a ver si edificio interesante no vale Sí me lo crea verde le suena el edificio no me va a pasar nada Ah sí muy bien No debe pasar nada no debe pasar nada porque yo no lo he dicho que pase nada Es decir pero no lo del edificio porque nadie le ha dicho que sobre escriba nada ya Entonces vamos a ver interesante no que lo ponga ahí Bueno voy a hacer lo siguiente también te digo y es barcos x es igual a nada va por y es igual a nada porque esto de estar declarando la variable cada vez pues tampoco Mola mucho así que así edificio ostras que qué misterio vale vamos a verlo vale Sí pxpx vale pues vamos a verlo por qué entonces inspección este edificio inspecciono y veo que efectivamente me pone pxpx y eso ya de entrada Pues evidentemente no porque no va a funcionar Así que lo que hago es que aquí le quito el px aquí le quito el px porque ya lo está heredando aquí al el left No solo está cogiendo el número sino que también está cogiendo el px entonces cojo el edificio No se crea en ninguna parte Aparentemente pero sí que se crea en alguna parte vale es lo único es que no están en el sitio que yo esperaba vale Sí que coincide la x sí hay un paralaje vale sí sí Pero de alguna manera Vale pues Bueno estamos cerca de momento lo que voy a hacer es que el Translate x No sé Déjame probar menos 500 deja de probar esto a edificio vale No es el X es el y Pero además estaría restando ahí pienso que Valente x sí ah bien pues ahora ya sí pues probablemente sea algo así probablemente es algo así lo que pasa es que efectivamente al el postx me lo está cogiendo con el px con lo cual no puedo corregir directamente sino que voy a tener que corregir haciendo un split separándola el px cogiendo el número sumando y volviendo a encadenar vamos a decirle Parts int de post x si no más 500 bien todo esto en un tal con px que pasa que claro No sí si no pasa nada porque es la variable que previamente tenemos arriba pero un momentín ese edificio claro vale Ah no me puedo hacer más zoom vale lo que quiero es que en contenedor en edificios Pues sí que parece que esté creando algún edificio pero igual no era más 500 y no menos 500 Así que recargo edificio vale eso tiene una pinta porque ahora en lugar de 500 le digo mil y fuerte claro Pues sí que ha funcionado el parcín Así que fantástico sí no pasa nada vamos a ver me lo está creando en el de al lado pero vamos pero eso ya está ahí con lo cual pues le digo Sí eso Vale pues bueno le digo lo mismo le digo Parts de post x menos 40 y le pongo exacto y le pongo ahí quieto sí px Así que edificio Vale pues bastante no Así que Bueno de hecho fijaos que no sé si igual es mi ordenador pero parece que gasta la animación de que crece hace placa Sí y crece sí Ah vale sí Bueno ahí Hace como un pequeño no sé cómo aparece poco a poco hace poco en lugar de aparecer a lo bestia pero bueno suficiente No lo sé pero tú a vos tornillo California sabes no lo sé Sí pero aún así No lo sé tendríamos que verlo Bueno pero de momento tenemos esto por aquí y lo que quiero En definitiva antes de resolver eso es empezar Ya a poner Uy madre mía a ver si me da tiempo a poner cosas en la base de datos vale para que cuando por lo menos cuando recargamos la pantalla pues sepamos que de alguna manera nos está cargando la información evidentemente y como os podéis imaginar lo que voy a hacer ahora es que voy a copiar de algún otro proyecto anterior por ejemplo Ajax creo que teníamos por ahí no Dónde estaba multijugador Claro que sí el multijugador voy a copiar el adminer Así que en adminer me voy a ir a simcity y por tanto voy a decir que en Sin City mira voy a abrir alminer punto php para crear una nueva base de datos sqlite cree una nueva base de datos se va a llamar ciudad a punto de B y empiezo a crear tablas una tabla que por ejemplo se llame bloques y la tabla de bloques la tabla de bloques pues por ejemplo dirá que estoy pensando de ir a postx dirá voz y dirá bloque luego igual modificamos la tabla pero de momento nos la quedamos así texto y texto posición x posición que guardo y ahora como os podéis imaginar pues me voy a crear un Script que me permita guardar Por aquí abajo del todo digo Ajax simplemente did ideas y por tanto para este dip y de Ajax le voy a decir cada vez que sobre bloque terreno hagas clic aparte de todo esto te voy a decir en Ajax punto load punto cargas guardaterreno punto php que lo que va a hacer evidentemente es guardar vamos a verlo lo que va a hacer es guardar el bloque terreno que hayamos usado claro qué es lo que terreno va a guardar Pues ahí lo que tendremos que ver es que y bloqueo es igual a más que más dónde estás textura actual bien vamos de momento con eso guardaterreno punto php y el bloque que guardas es textura actual me hago un nuevo archivo lo voy a poner en la otra mitad de la pantalla para que podáis seguir copiando lo guardo en sam en HD dogs en Sin City 3D en que estoy guardando aquí en guardador punto php y le digo guardador punto php lo que hace como os podéis imaginar de hecho lo voy a sacar de Esto va a ser casi una copia del Código de multijugador el guardador y digo abro la base de datos selecciono no inserto y se acabó ya está así de sencillo la base de datos se llama Ciudad punto de B insert into que pues intublo bloques valius y los value son tres vamos a ver el sql es insert intubloques values y los values son uno dos tres esto es 0 Y esto es Cómo se llama la variable que le he pasado la variable se llama bloquee Así que get bloque esto es como lo envío y esto es como lo recibo y tiene que coincidir Así que si todo ha ido bien Voy a insertar este guardador por aquí si todavía bien digo carretera me voy a bloques y no existen registros Vale ahora veremos esto es ciudad punto TV vale terreno Por si acaso terreno registros no existen registros vale vamos a ver eso estoy viendo insert into bloques incertidumbres values vale voy a hacer una cosa eco no Eso es correcto así que Ajax no me dice nada ese es el problema otras Espera espera muy bien ahí está ahí va a estar la cosa espero que lo encuentre guardador muy bien Ahí va a estar la cosa así que por tanto lo que hago es que cojo la carretera pinto un bloque de carretera me voy a la base de datos y comprobamos que efectivamente Aunque en cero y en cero de momento cero y cero pero ya me está guardando los bloques en la base de datos que estamos creando lo único que me quedará ahora evidentemente será decirle que no lo estoy guardando en cero sino que lo estoy guardando en el postx de momento lo único que quiero mirar de momento es decirle Pues mira para guardar esto vamos a ver esto lo pongo aquí arriba también y con esto acabamos la parte teórica de hoy y le digo Y pues x es igual a más por x y 2 y es igual a más post y de tal manera y un momentín que ahora os lo paso Mira la atención y es que le digo vengo aquí y le digo esto es por x Y esto es post y de tal manera Mirad de tal manera que cuando hago así pincho por ejemplo muestro los bloques y se me está guardando ya la posición de cada uno de los bloques lo primero que vamos a ver en la clase de hoy es muy sencillo Y es que usar css3 con respecto a programar en 2D con Canvas tiene ventajas y tiene desventajas la ventaja ya hemos visto que son las transformaciones 3D una desventaja es que requiere más máquina por ejemplo pero una ventaja es que no tenemos por qué trabajar con sprites porque al trabajar con css 3D las animaciones o bien en vídeo o bien en formato gif esto es un formato gif pues Vais a ver cómo están perfectamente soportadas Así que lo que voy a hacer en este caso mirar es que he buscado water gif animated he encontrado este gif por ejemplo y Mirad voy a guardar imagen como me lo voy a guardar dentro de fe dentro de champ dentro de HP dogs dentro de Sin City 3D en css 3D y Esto me lo guardo con formato gif esto lo voy a llamar agua punto con lo cual luego dentro del código dentro de la programación simplemente lo que voy a hacer va a ser cargar ese archivo gif Así que recupero el archivo que hay en C en champ en ht dogs en simcity css 3D como Index punto php saco también evidentemente una nueva instancia del navegador y lo que voy a hacer simplemente es cambiar ese agua punto jpg por agua punto gif y simplemente haciendo eso fijaos como ya tengo arriba en la paleta un agua animada Y si cojo el agua animada y la aplico sobre el terreno Ahora cuando quiera comprobaréis que solo por hacer eso ya tengo automáticamente un Sprite animado de agua Así que en este caso por tanto como os digo usar css Pues si esto lo probáis en un portátil de bajas prestaciones en un teléfono comprobaréis como pues le cuesta más de moverlo que el anterior ejercicio isométrico pero también pues tenemos ventajas como estas Y es que nos evitamos nos olvidamos completamente de los sprites porque simplemente con que pongamos Bueno nos olvidamos Si queremos Porque si queremos podemos también poner sprites pero no es obligatorio vale simplemente ponemos un gif y podemos comprobar como el gif directamente en la pantalla funciona antes de meternos en harina Es decir en la parte de recuperación de datos de la base de datos pues la vamos también a abrir un poco el estilo quiero vamos a verlo por aquí estilo punto css quiero que la paleta pues no esté abajo no esté arriba sino que esté abajo por tanto en paleta cambio el top por botón le digo 0 píxeles le digo un with del 100% e incluso le voy a decir que tenga background black es decir quiero que la paleta estoy trabajando ahora sobre el estilo de la paleta sobre el y de paleta pues quiero que esté en la parte de abajo quiero que ocupe el 100% quiero que tenga Pues un fondo negro para tener pues como una paleta de elementos por último pues vamos a trabajar un poquito con el padding para darle un poquito de margen interior y que por tanto los elementos queden correctamente centrados una cosa así más o menos le podéis dar más le podéis dar menos Eso ya depende de vosotros voy a darle 5 píxeles por ejemplo Así que guardo y recargo y por tanto Pues bueno me digo margin 5 píxeles por ejemplo para poco a poco como veis acabar alineando los elementos de la paleta cuando tenga más elementos de paleta ahí sin demasiado problema voy a poder meter un scroll horizontal así que bueno Eso no me preocupa mucho ahora mismo de momento vamos a ir creciendo con elementos y lo que sí que quería era que pues este esta interfaz de usuario fuera un poquito más limpia Así que ahora salud y este sería Pues un poco la parte como os diría yo la parte compleja de la clase de hoy pero que no va a ser muy compleja que es que si ayer conseguimos que si yo pensaba aquí y ponía agua Pues realmente si pusiera agua dentro del terreno es decir recordáis me voy a adminer abro la base de datos Cómo se llama esto Ciudad punto bebé y me voy a bloques pues fijaos que todo lo que estoy haciendo realmente pues tiene su sentido tiene su significado tiene su representación Bueno pues ahora lo que quiero es que cuando se cargue el programa cuando se cargue la página web el lugar o además de presentarme un terreno vacío pues además lo que debe hacer es ponerme los sprites de cada uno de los elementos que he dibujado lo que quiero hacer ahora por tanto simplemente Es que aquí donde había puesto edificios realmente voy a quitar edificios lo voy a llamar y de bloques y voy a hacer lo siguiente mirada tanto terreno como edificios en el estilo tanto terreno como edificios vamos a ver aquí está tanto terreno como edificios quiero que tengan un buen sitio absolute y quiero que tengan un top 0 píxeles y un led 0 pixeles Así que guardo recargo bien y esto veo que se empieza a mover por ahí voy a quitarle un momento el top y el left vamos a verlo ahí se empiezan a mover vale por tanto puedo seguir dibujando Lo único es que vamos a verlo Lo único es que ya no están tan en perspectiva si queréis incluso voy a vaciar un momento a la base de datos Cancelar a aquí pone voy a hacer una cosa selecciono todo y eliminó selecciona todo y eliminó os ha parecido así la perspectiva ha cambiado sí no pasa nada Es correcto de hecho comprobamos que aquí eso vale comprobamos que dibujo un edificio si el edificio no aparece vale Y esto es por tanto como no lo sé Vale entonces menos 1040 un segundo vale esta era la razón sí la razón está en que ayer no hicimos que el terreno y los edificios y los bloques fueran absolutos y por tanto Mirad atención Aquí estaba el terreno y nosotros esperábamos que los bloques estuvieran aquí pero como no les habíamos dicho Por si tienen fruta estaban aquí entonces cada vez que nosotros pensábamos aquí se creaba un terreno aquí hoy lo que he hecho es decirle por sitio en absolute para que los dos elementos estén en el mismo sitio Y si están en el mismo sitio ya no hace falta para la g técnicamente hace falta un pelín de paralaje por tanto lo que he hecho es decirle Pos y menos 40 pues x menos 40 vale por tanto un poquito de paralaje sí que le he dado pero ya no es el 1040 donde ayer puse 1040 hoy he puesto 40 y donde ayer ponía menos 40 sigo dejando 40 porque ese es correcto Vale entonces lo que voy a hacer ahora va a ser como os decía en el Index php donde pone bloques Quiero recuperar la posición de los bloques y recuperar la posición de los bloques como os podéis imaginar es muy sencillo porque voy a hacer lo siguiente esto que es vale vamos a ver aquí no tengo ninguno jump HP 2 y me voy a 3D me voy a guardador y voy a copiar este código este de aquí y en bloques por tanto Mirad le digo debe es igual a New sqlite sql es igual a Select * from bloques result es igual a bbqr y de sql y ahora simplemente lo que voy a hacer es lo siguiente vamos a verlo me voy a multijugador cargo multijugador crea bloque y ahí estamos voy a escribirlo lo más sencillo que se pueda esto es un While ya no es un y voy a escribir lo siguiente voy a decir que eco Deep Class bloque terreno position absolute left Pues voy a poner Row no me acuerdo Row post x en el top voy a poner Row por y en el background voy a poner url y en la url pongo la imagen el bloque Por cierto que creo que ahora haremos lo de los 40 pero de momento puedo quitar las px porque en la base de datos ya tenía las px para que no aparezcan dobles recordar también que es muy conveniente que pongamos background - Size es 100% espacio 100% sí de momento puede serlo ahora lo cambiaremos a bloque o algo así pero de momento hacerlo como bloque terreno en principio será válido Así que guardo recargo y fijaos ahí Que de momento no lo está poniendo en 3D pero de momento ya lo está poniendo Mirad atención elimino los registros miradme no tengo nada por tanto voy a hacer uno Espera que coja el edificio por ejemplo uno Hola uno dos 3 4 y 5 vale Ahí me ha creado uno raro pero bueno tengo una cruz simplemente para comprobar que será recargo sigo teniendo una cruz El único problema es que al recargarmelo no me ha puesto pues como te diría yo el edificio en 3D Pero porque pues porque yo tampoco se lo he dicho yo lo he dicho Dime un bloque terreno vale Así que es normal que no lo haya hecho déjame seguir comprobando cosas yo ahora Pongo aquí agua agua Así que recargo y comprobamos recargo Mirad comprobamos como sigue apareciendo en el sitio así que de momento Esto está en funcionamiento Así que pongo por aquí pongo terreno recargo y el programa al recargar me sigue trayendo el terreno luego de momento ya empezamos a tener todo a la vez digamos ya empezamos a tener tanto la posibilidad de guardar en la base de datos como la posibilidad de recuperar de la base de datos evidentemente como os podéis imaginar lo que voy a hacer ahora va a ser simplemente decirle Oye es un terreno fantástico pero es un edificio Ah entonces Ponme todos los bloques que yo espero que me pongas simplemente lo único que quiero decir ahora cada vez que yo repase un terreno es decirle Mirad dentro del While cada vez que yo haga un While lo que voy a hacer es preguntarme Oye es cierto que esto es un edificio si es cierto que es un edificio pega un bloque de edificio si no es cierto que es un edificio pega un bloque de terreno mira lo que acabo de hacer es simplemente copiar y pegar esa línea y meterla dentro del Else dentro del caso falso Cómo os podéis imaginar aquí dentro lo que voy a decirle Es decir Es cierto que Row bloque es igual doble igual a edificio espera un momentín edificio frente uno por ejemplo este de aquí que es el que delata el edificio pues en ese caso lo que voy a hacer es copiar y pegar todo este código que os dije ayer no lo borréis porque os servirá para algo vale que es este de aquí que es el que crea un edificio la leyenda es cierta al menos en este caso hay muchas otras veces que no que me dejo por ahí código copia de pegado por si me hace falta y al final nunca me hace falta Pero oye más vale que sobre que falte he copiado desde el dip Class un edificio hasta el cierre del DIF de ese un edificio un momento vamos a ver si ahora no el no está arriba en javascript este es el de php el que está abajo porque como lo que he hecho es meterlo De momento todo dentro de un eco y ahora voy a eliminar unas cuantas cosas por ejemplo vamos a ver y de fuera lo voy a modificar y de fuera Style una cosa que voy a poner por aquí vale Y ahora pongo web kit Transformer Translate x y pongo Row postx y Translate y Pues voy a poner Row post y es decir lo modifico el esquel Z lo voy a quitar lo modifico para adaptarlo a mis necesidades es decir quiero sacar tu posición x de aquí quiero sacar tu posición y de aquí y quiero bueno el Translate Z que ya teníamos Así que si todo ha ido bien No lo sé vamos a verlo Imagínate que funciona la primera Casi De hecho hay un trozo hay una cara que me ha puesto solo en esta cara es extraño Pero bueno básicamente Ah vale a ver si está casi está ahí lo único es que me está poniendo vale un elemento por delante me hace falta restarle 40 por una parte y luego por otra parte hay que poner el preset 3D Entonces vamos a ver dejadme que lo ponga web kit transformo creo que era hasta él sí verdad está él Freezer guión 3D priserve - 3D o primer guión 3D que No sabría será pensar tres de todo junto vale con lo cual guardo y recargo bien ahí hay algo que tenemos que mejorar porque el bloque parece que machaca al edificio Pero bueno pero empieza a estar por ahí luego También tenemos el problema del de que esto está un poco movido si os fijáis la cruz de edificios está un bloque hacia allí y un bloque hacia allá vale por tanto ahí sí que lo que tengo que hacer es el postx y restarle 40 y aquí sí que voy a tener que usar el quitar elementos vale el quitar el px voy a escribir la fórmula en la pantalla y así la tenéis ya masticada vamos a hacer un php replace que se hace realmente con ftr_replace entonces básicamente Aquí voy a decir str guión bajo replace y voy a decir me reemplazas px con nada en este elemento Así que aquí hay que poner aquí hay que poner un paréntesis más y por tanto con str replace vale vamos a ver la fórmula que es lo que busco lo que reemplazo y donde lo busco Entonces en este caso voy a decirle str replace más 40 vale por tanto ahora simplemente me copio toda esta fórmula vamos a ver si funciona déjame que lo ponga dentro de un paréntesis que siempre será más seguro y por tanto ahora lo copio y lo pego aquí y le digo que esto es lo mismo pero con y así que guardo y recargo bien Ahora directamente no me aparece y directamente nos aparece directamente no me aparece déjame inspeccionar el código vale porque en bloques vamos a ver dónde lo tengo entonces tengo left 920 top 600 Ah sí sí vale porque ahora sí que le he quitado el px ahora le tengo que volver a poner el px como se lo he quitado aquí para hacer la suma pues se lo tengo que volver a poner para que el programa sepa donde está así que esto es más px guardo y recargo bien fíjense en aparecer pero bloques vamos a verlo nuestro bloque terreno un edificio 1.238 le estoy sumando 40 más 40 sí translatex 960 640 voy a quitarle el más 40 con menos 40 sin embargo es que me desaparecen completamente pero vamos a ver claro Sí usted ahí con más 40 se han ido qué extraño Vale pues sí funciona No lo sé igual la cosa va por ahí pero bueno sí no pasa nada ya funciona lo único Mira a mí me pasa lo mismo que fíjate como el agua como que me machaca los edificios bien entonces simplemente aquí algún elemento de estos probablemente hablo que terreno él no no no es el web kit Transformer está el preset 3D que es parecido al Z Index pero en 3D vamos a verlo todavía me falta alguno básicamente a los bloques también los bloques y el terreno también le voy a decir terreno edificios preservar 3D es decir le tengo que decir a todo preservar 3D Bueno hasta que funcione porque es como el Z Index pero del 3D es decir el Z index por eso el preservar 3D claro ahora Espera A quién le puse yo en un momento dado Zeta indexa todo esto no solo a esto Solo a la paleta vale pues seguro que Exacto pues seguro que no era fetal Index Pues nada ahora tengo que encontrar cuál es el bloque aquí en le está faltando la propiedad depresor 3D vamos a ver bloques no está teniendo el primer 3D y terreno Ah mira Ciao Sí porque hay alguien en alguna otra parte arriba que se lo está diciendo vamos a ver vale No pasa nada hasta que lo encontremos Bien también te digo que hay una ya sabéis el típico truquete que es decirle no esto manda vamos a verlo contenedor parece el contenedor sí no Exacto a ver press 3D sí lo cual no tiene por qué ser necesariamente malo pero vale contenedor vale alguien lo está machacando Transformer Style vale esto es porque javascript lo está escribiendo muy bien Vamos a javascript y ya os digo lo único que tenemos que hacer es poner el present 3D por todas partes por tanto Sí es así pero es raro pero es así entonces le digo al contenedor le digo web kit Transformers Style y present guión 3D Así que guardo recargo y así hasta que todos aparezcan correctamente vamos a ver esto ya tiene que ser 3D vale Así que a continuación vamos al terreno no es extraño que me lo tache los bloques también vale dentro de bloques realmente el problema está aquí vale preset 3D a solo un bloque no lo creo vale Y luego bloque terreno muy bien 3D bloques bloques es bloques no tienes el presser 3D vale me dices que no yo te digo que esto es importante Y me sigues diciendo que no Vale pues bueno pues ahora en un momento dado lo tocaremos porque ya casi lo tenemos simplemente lo que hace falta es que el programa quiera hacerlo a ver bloque terreno porque bloque terreno así correcto Este no es tan correcto a césped Ah me lo está ordenando el automáticamente muy bien Bueno pues vamos a seguir dándole porque esto básicamente es la parte dura de la clase de hoy siguiendo esa lógica vamos a verlo vale siguiendo esa lógica podríamos asegurarnos el funcionamiento haciendo lo siguiente yo cojo este While quito ahora este edificios vale quito ahora este edificio pero lo que voy a hacer Mira es copiar este bloque de devolución de base de datos desde aquí a este edificios pero atención miradme Primero quiero que lo comprendáis Entonces le digo si esto es igual a un edificio en este bloque no me hagas nada Solo quiero el caso els solo quiero el terreno los bloques pero en el caso contrario eliminó el caso Else con lo cual lo que estoy haciendo es asegurarme que todo aquello que no es un edificio se va a bloques y todo aquello que es un edificio se me va a edificios entonces guardo recargo Y entonces funciona correctamente Por qué Pues porque los edificios deben tener algo en el css que sí que les mantiene la tridimensionalidad por tanto técnicamente no hemos resuelto el problema Pero si antes estaba funcionando pues hemos hecho que siga funcionando con lo cual ahora lo que hacemos Es que tengo por una parte bloques y por otra parte edificios y ahí sin problema pues cada vez que cree un nuevo edificio me lo seguirá creando con el apén la diferencia es que luego el que lo devuelve es php y por tanto pues ya tenemos las tridimensionalidad parcialmente resuelta un pequeño reto que bueno recordaréis evidentemente seguramente del simcity es el siguiente yo dibujo por aquí una carretera y dibujo por ahí carretera carretera carretera pero cuando hago así claro lo que esperaría es que el programa encontrará que realmente tiene a su alrededor otro espacio de carretera y por tanto ahí lo que haríamos es bueno primero en Sprite evidentemente hacer unos cuantos bloques de carretera gira a la izquierda gira a la derecha gira desde arriba gira desde abajo quizás alguna t y quizás alguna Cruz vale de momento con que resolvamos curvas Ya lo tenemos todo lo que quiero que penséis en esta siguiente media hora es cómo podéis hacerlo para que el programa lo detecte automáticamente se hacen el lado del cliente se hace en el lado del servidor No lo sé es algo que tenemos que pensar no hay una sola respuesta sino lo que quiero es que cada uno penséis una solución antes de ello sí que os voy a dejar hecho una sencilla cosita un truquete que es el tema de que cada uno de los bloques de los edificios y cada uno de los bloques de las casas aparezcan ligeramente más oscuretes para darle un poquito más de gracia al juego que no aparezca todo igual de verde y todos los ejercicios igual de grises sino que cada uno tenga un poquito de diferencia Cómo podemos hacer esto os acordáis de los filtros css cuidado que los filtros css pesan entonces Yo vengo por aquí y digo en el terreno vamos a verlo css3 filters en el terreno os acordáis que teníamos un filtro que es por ejemplo donde estás Riders aquí el primer esto es uno de brightness esto es un poquito más de brainers Así que copio esto y digo veis que va digamos con un decimal Así que digo pego por aquí brightness 1.7 a ver lo voy a poner primero estático Mirad a ver si Ay Ay Ay Ah vale Sí porque eso es lo que son los que pintados Sí un momentin pues lo quito de aquí no lo quería aquí bien qué me va a hacer Pues todos los terrenos a 1.7 vale Sí no es lo que quiero es lo siguiente quiero salir de php o sea salir del String y decir RAM de 10 a 20 nada de 10 a 15 va partido 10 de 10 a 15 partido 10 equivale a decir que va de 1 a 1.5 por tanto ahora guardo recargo bien vale que te pasa el qué has hecho un paréntesis me gusta lo que has dicho así que recargo bien y ahora fijaos que en un momento tengo cada uno de los bloques de terreno con Luego si quieres pones ahí 12 en lugar de 15 y un poco pues le dais ahí un poco de variación Que no quede tan cantón lo mismo con los edificios Mirad por ejemplo con los edificios yo digo lo siguiente brillo es igual a esto de aquí arriba al random brillo es igual a esto así que en el Deep Class un edificio le digo dónde estás aquí web kit filter mira lo voy a poner directamente creo que ni me va a hacer falta el brillo web kit filter brightness y lo que hace no sé si lo veis es que cada edificio lo voy a Elevar mucho cada edificio tendrá un brillo diferente Sí he perdido las paredes Ya ves tú Adiós paredes a ver mentira vamos a asegurarnos que es el problema Pues sí es el problema Así que si es el problema se lo pongo aquí está él es igual a esto y ahora sí le digo brillo porque le digo brillo Pues porque me haga para que me haga el mismo brillo en todas las caras sino me hará un brillo distinto para cada una de las caras que Oye igual es lo que queréis Vete a saber yo os pongo esto guardo y recargo y ahora veréis que cada edificio tiene un nivel diferente de brillo Sí ya lo sé me he pasado lo que lo he hecho específicamente para pues poder ilustrarlo un poco mejor vale lo hago así de 8 a 12 Por ejemplo y fijaos como ahora pues cada edificio tiene un nivel diferente de brillo bien Pues bueno os paso el código y podéis ir empezando a pensar en este dime qué Igual también os puede ayudar lo siguiente Y es que yo le he dicho al terreno que cada uno de ellos tiene un led y un top con lo cual en base a excelencia ese top puedo decir cógeleft 40 y eso es el que buscas pero claro Métete ahí dentro a buscar Entonces yo Ahí os puedo decir lo siguiente que otra solución es esta que os voy a decir vengo por aquí no el terreno aquí en el terreno aquí lo tenemos y en el terreno por ejemplo le puedo crear una nueva propiedad que nos sacamos de la manga que es x Así que digo x es igual a algo y es igual a algo y ese x es igual a esto de aquí y ese cuidado con esto de aquí y ese x es igual a esto de aquí y en y es igual a esto con lo cual Esto es lo mismo que ya tenía Porque fíjate que lo que he hecho es copiar y pegar el código pero lo he hecho con el objetivo y con la finalidad de extraer información y que por tanto hay y que por tanto fíjate que ahora cada uno de estos elementos tiene una nueva propiedad llamada x y una nueva propiedad llamada y por tanto ahora lo tenéis un paso más fácil para decir Oye cógeme la x de este Y seleccioname aquel elemento que tenga y por ejemplo -40 que es en este caso 480 Qué curioso Ah sí 480 Sí que ya no se sumará el javascript según la solución que yo propondría por defecto es javascript porque lo que haría es que cuando hago clic Búscame el que está justo a la izquierda y justo a la derecha el que cuya x es menos 40 y más 40 o la y ahora mismo no lo sé