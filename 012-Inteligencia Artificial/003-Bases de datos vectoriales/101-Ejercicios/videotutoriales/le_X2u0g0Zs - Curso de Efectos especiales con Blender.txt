vamos a trabajar con simulación de fluidos dentro de Blender para eso vamos a partir desde la escena original en la que se nos proporciona una caja una cámara y una luz voy a eliminar la cámara y la luz ya que no me sirven de momento para prender fluidos pero me voy a quedar con la caja que existe en el centro un elemento imprescindible dentro de las simulaciones de fluidos en Blender es El dominio es el contenedor de los fluidos toda aquella simulación de fluidos que realicemos tiene que quedar contenida en un contenedor por tanto como primer elemento voy a seleccionar esta caja a continuación lo que haré es colocarme en vista wireframe para poder ver dentro de esa caja y voy a crear una caja interior el contenedor contiene los fluidos pero en sí no es un fluido me hace falta una fuente de fluidos ahora que tenemos el contenedor lo que haremos es duplicarlo para escalarlo a continuación y comprobar como tenemos una caja interior que representará al fluido y una caja exterior que representará al contenedor por tanto lo que hacemos Es seleccionar el contenedor vamos a dinámicas y lo activamos como fluido este contenedor será un dominio por tanto una vez activado como fluido lo que haremos es hacer clic en tipo y activarlo como dominio No pasa nada porque aparezca el resultado de una simulación anterior simplemente esto es un efecto colateral cuando realizamos varias simulaciones y no borramos los archivos temporales ahora seleccionaré la caja interior y la convertiré en un fluido tras lo cual esta caja pasará a formar parte de la simulación de fluidos convirtiéndose en un fluido lo voy a escalar en el eje x para que adopte más o menos ese tamaño como podremos ver a continuación en los vídeos siguientes esta caja se convertirá en un fluido compacto como podemos previsualizar en restos de simulaciones anteriores y fluirá alrededor del dominio que es la caja exterior que ahora de momento se ha convertido en ese cálculo en ese resto de cálculo como bloque de fluido los parámetros para poder controlar la calidad del fluido y atención porque estamos en El dominio no en el fluido que tiene otros parámetros diferentes debemos estar con El dominio seleccionado son los siguientes resolución es la calidad final del fluido pero atención aumentar este parámetro aumentará geométricamente la cantidad de memoria usada con una resolución de 160 el programa me informa de que estaría gastando 27 megas de ram pero si es que esto lo multiplico por 2s por 120 lo multiplico por dos para pasar de 60 a 120 y paso a 167 megas si lo vuelvo a multiplicar por dos para ir a 240 estoy gastando ahora 1 con 3 GB por tanto cuidado con subir este parámetro y siempre mantengamos un ojo puesto en la cantidad de ram en la cantidad de memoria que vamos a usar voy a poner calidad es igual a 70 para gastar 33 meg de memoria si este parámetro resolución final hace referencia a la resolución total de la simulación preview hace referencia a la calidad de la simulación en pantalla yo siempre recomiendo Poner este parámetro al máximo o por lo menos a la misma calidad Que ponga la calidad final lo voy a subir a 100 calidad de previsualización a 100 render final nos muestra la calidad que tendrá el fluido cuando render evidentemente la calidad que suelo querer es final y View display nos dice la calidad que tendrá el fluido en el visor también suelo querer ver la calidad final para ver exactamente en el visor lo que se verá en el render Es cierto que hace que el visor vaya algo más lento pero con una buena tarjeta gráfica esto no tendría por qu ser un problema cuando ya he configurado todos los parámetros ahora mismo para este ejercicio tengo 70 100 final y final lo que hago es pulsar a este botón llamado Bake bakar tostar o En definitiva calcular lo que hace el botón de calcular es empezar el cálculo fotograma y lo voy a empezar en este momento haciendo clic sobre el botón si yo hago clic sobre el botón observo que la calidad de 100 había pasado a 70 y sobre todo lo más importante es que aquí arriba en la pantalla tenemos que fijarnos aparece un controlador de Progreso de la simulación ese contador lo que va a hacer es informarnos de Cuál es el progreso Cómo va el cálculo de esa simulación de fluidos Cuanto más detallada sea la simulación más podrá tardar ese cálculo y eso debemos tenerlo en cuenta puede tardar desde unos pocos minutos hasta unas largas horas hasta unos cuantos días si la simulación es Realmente compleja si me acerco ahora al objeto me daré cuenta de que ese mallado la calidad final Quizás es un poco elevada para un primer ejercicio por tanto lo que voy a hacer es parar la simulación y la voy a parar pulsando el botón de stop this Job el botón de la x Cierro la simulación ahora he parado la simulación y solo cuando he parado la simulación es cuando puedo hacer cambios porque lo que voy a hacer ahora es decirle que la resolución final la paso de 70 a 40 si la he pasado de 70 a 40 y ahora estoy usando 6 megas de ram pulso otra vez sobre el botón Bake y compruebo como ahora el tamaño del triángulo es mucho más grande el tamaño del triángulo es mucho más grande la simulación tiene menos calidad y por tanto el cálculo se va a realizar mucho más deprisa observo como va avanzando esa barra prácticamente con solo mirarla puedo apreciar fácilmente El Progreso y ahora ocurre lo siguiente desde hace unas pocas versiones de Blender parece que los fluidos no se han puesto en marcha la simulación de fluidos va a su rollo digamos Pero veo el primer fotograma congelado esto es porque mientras se realiza simulación yo puedo continuar trabajando con el programa e incluso puedo hacer scrubbing con el tiempo y visualizar cómo quedaría esa simulación eso sí Yo siempre recomiendo lo mismo yo siempre recomiendo tener paciencia porque este punto del tiempo representa más o menos a este fotograma si empiezo a mover el tiempo y supero el fotograma que está calculado como último fotograma es decir si trato de correr más demasiado y trato de ir más allá el programa se puede colgar por eso recomiendo tener paciencia dejarlo que acabe y una vez acabado ejecutar la simulación de hecho la simulación la veremos con mucha más cidad si ponemos ahora sí ya la simulación la visualización en sólido pongo la visualización en Sólido y ahora puedo comprobar como esa caja se convierte en agua y ese agua empieza a moverse a través del dominio una cosa muy importante es que el agua nunca va a salir del dominio en el que se encuentra me espero a que la simulación acabe y una vez que acabe la simulación puedo hacer varias cosas ejecutar la propia simulación y evidentemente esconder el objeto de fluido para ver cómo queda esa simulación sin esa caja tan presente ahora que la simulación ha finalizado ya puedo pulsar el botón de Play Y visualizar cómo queda Y en este caso lo que estoy viendo es como la caja se convierte en fluido cae y colisiona contra el contenedor Y a partir de ahí continúa hasta finalmente estabilizarse Qué cosas podemos hacer con esta geometría podemos hacer varias cosas lo primero que voy a hacer es evidentemente guardar Por tanto voy a guardar como ejercicio uno guardo y ahora lo que haré es atención meter la caja de fluido en una capa nueva Es decir de momento esconderla no eliminarla por si acaso pero sí esconderla y quedarme solo con el fluido y una vez que tengo el fluido aunque sea un objeto Dinámico aunque sea un objeto que está en movimiento y en constante cambio al final es un objeto de geometría y puedo aplicarle cualquier cosa que se le aplique a un fluido como por ejemplo qué pues como por ejemplo le puedo aplicar la propiedad de Smooth dentro de shading para que no aparezca como flat sino que aparezca como suave e incluso es posible reduciendo el rendimiento del ordenador por supuesto pero incluso es posible aplicarle un modificador de subdivision surface si le aplico un modificador de subdivision surface lo que hago es subdividir lo que hago es suavizar el agua aumento evidentemente Los polígonos y Por tanto se reduce el rendimiento del ordenador Pero eso sí aumento la suavidad de la geometría parece que haya más calidad de la que realmente hay Qué cosas más puedo hacer con este fluido Bueno pues por ejemplo también puedo vamos a ver también puedo aplicarle un material porque en sí es un objeto Así que si le aplico un material que simule el agua es decir voy a activar una transparencia r trce voy a bajar El Alfa y voy a aumentar un poco el índice de retracción para que parezca agua y también voy a activar el parámetro de mirror para hacer que refleje un poco a su entorno como el agua y aplico ese parámetro lo que tendré es un objeto que parecerá agua voy a complementar este objeto esta escena con un plano y con otro plano puesto arriba que vamos a ver vamos a hacer esto que tenga un material que esté auto iluminado por tanto lo que voy a hacer es shadeless Buscar un parámetro que se llama shadeless y ahora evidentemente poner una cámara voy a hacer que esta vista corresponda con una vista de cámara y en ceras en alinear vista voy a hacer alinear la cámara activa la vista actual si ahora renderizo si ahora le doy a render observaré como ese objeto adquiere el material del agua en este caso lo que he hecho es poner ese plano arriba para que refleje Y si calculo una animación obtendré esa simulación de agua vamos a representar este fotograma con el material transparente y con la reflexión del agua voy a hacer que este objeto también tenga un nuevo material que sea blanco de tipo shadeless para ver la reflexión y a continuación calculé fotograma a fotograma la animación para ver el resultado final ahí tengo el primer resultado tras finalizar la representación del cálculo de esta primera simulación tenemos el primer resultado que es renderizado como eh es esa caja se convierte en agua cae y colisiona contra El dominio con lo cual cuando rendiz y cuando vemos el resultado final se puede apreciar la calidad de esta herramienta y cómo nos puede ayudar a simular efectos con complejos a la par que espectaculares de una manera relativamente sencilla incluso también podemos ver en la pantalla Aunque este render sea de no demasiada calidad Pero podemos ver como no es necesaria una calidad extrema en la simulación para obtener un resultado interesante en pantalla en el siguiente ejercicio vamos a trabajar con un tipo de fluido llamado inflow por eso guardo hago un archivo nuevo y hago un nuevo proyecto de fluidos si la herramienta fluido me ha permitido convertir una geometría en un fluido en agua digamos la herramienta inflow Es como un Grifo abierto por el cual siempre entra agua por eso voy a volver en este segundo ejercicio a wireframe voy a duplicar con mayúsculas d esta caja y la voy a hacer más pequeña con escala porque ya no quiero que se convierta en un simple fluido sino que lo que quiero es que se vierta agua de manera constante al dominio a través de esa caja que llamaremos inflow vamos a convertir por tanto cada una de las cajas en el tipo de elemento que le corresponde selecciono la caja exterior voy al último botón físicas y convierto esa caja en un fluido donde este fluido será de tipo dominio selecciono ahora la segunda caja la activo como fluido y no se va a convertir ahora en un fluido sino que se va a convertir en un inflow introduce agua dentro de la escena para el inflow es muy importante la velocidad inicial no debe estar a cero quiere decir que el Grifo no tiene fuerza para echar agua Vamos a darle un poco de fuerza le voy a decir que en Z la fuerza es -1 Z es el eje vertical por tanto valor negativo es hacia abajo está echando ahora agua hacia abajo si Ahora vuelvo a dominio y configuro los parámetros de memoria lo voy a dejar en el 65 aumento la calidad de previsualización aumento la calidad final y cculo el único problema que tengo ahora es que si calculo estaré eliminando el resultado anterior el resultado del ejercicio anterior porque el cálculo de fluidos que realizamos no se guarda en la escena de Blender sino que se guarda en el disco duro para controlar donde se guarda cada simulación lo que podemos hacer es una carpeta nueva que se llame simulaciones donde por ejemplo podremos hacer una nueva carpeta llamada ejercicio 2s si ahora volvemos a Blender y dentro de esta línea lo que hacemos Es cargar una nueva carpeta vamos al escritorio simulaciones ejercicio dos aceptamos Y aunque ahora no veamos nada una vez la simulación esté calculada comprobaremos como toda la información de la simulación ha quedado guardada dentro de esa carpeta voy por tanto A Bear voy por tanto a calcular para que el programa pueda empezar comprobamos ahí cómo se ha convertido en la simulación anterior para que el programa pueda calcular Cómo el agua se va introduciendo dentro del contenedor observamos como poco a poco la simulación va corriendo si intentamos mover un poco la línea de tiempo observaremos como el agua cae dentro del contenedor voy a cambiar ahora ya a una vista sólida y lo único que tengo que hacer ahora es esperar a que finalice la simulación con paciencia para evitar cuelgues del programa y visualizar cómo ha quedado y realizar modificaciones si es necesario ahora que ya tenemos la simulación la ejecutamos para comprobar como la caja de fluido inflow actúa como un Grifo de Agua que va metiendo fluido dentro del cont tenedor de manera constante hasta Pues en el fotograma 250 prácticamente llenarlo o llenar media caja comprobaremos también realizando otra simulación como la velocidad de inflow afecta a la cantidad de agua que se vierte dentro del contenedor si por ejemplo ahora paro la simulación compruebo que en el fotograma 250 el agua no ha conseguido completar el contenedor si selecciono inflow y cambio la velocidad de Z lo paso de -1 a -3 ahora estaré metiendo el triple de agua cada segundo dentro de la escena por supuesto después de realizar un cambio en la simulación voy a tener que recalcular el programa no recalcula automáticamente sino que tendré que volver a rebobinar seleccionando El dominio seleccionando el contenedor que ahora mismo es el fluido y volviendo a pulsar el botón Bake para recalcular la simulación con este nuevo parámetro que es haber cambiado el inflow de -1 a -3 voy a calcular y una vez finalizado el cálculo repasar la simulación para observar Cómo realmente se han aplicado los cambios una vez finalizado el cálculo de esta segunda opción lo que hago es pulsar el botón de Play y comprobar como ahora el agua entra más violentamente ya que entra a más velocidad y rellena más rápido el contenedor hasta que llega un momento que sobresale antes en 250 fotogramas no había conseguido rellenar ese contenedor pero ahora sin embargo como estoy metiendo más agua más deprisa compruebo como el agua entra más rápido y Por tanto se llena más pronto ese contenedor voy a realizar un cálculo intermedio voy a poner el inflow niam -1 ni a os3 sino a men2 voy a realizar el cálculo y a continuación crearé un render para ver cómo sale Cómo se reproduce el efecto lo que hago ahora es visualizar el resultado lo he renderizado como secuencia de pngs y compruebo como una vez renderizado el fluido se comporta como un agua y poco a poco va llenando la cubeta hasta llegar hasta la parte de arriba voy a mantener el botón pulsado para comprobar cómo sería el resultado de ejecutar esta simulación a continuación y para el siguiente ejercicio vamos a trabajar con obstáculos Por eso voy a seleccionar esta caja la usaré como dominio y ahora duplico para tener un inflow otra vez dentro de esta caja con la diferencia de que voy a duplicar la caja original La voy a escalar en Z y la voy a colocar de manera que haga rampas sobre el contenedor coloco una rampa aquí coloco otra rampa aquí porque cuando el agua caiga de modo inflow no quiero que caiga directamente al contenedor sino que lo que quiero es que colisione con estos dos objetos hacer esto en Blender es muy sencillo simplemente selecciono este objeto y lo convierto en un fluido dominio selecciono este objeto y lo convierto en un fluido inflow al que le pondré velocidad Z negativa y ahora voy a seleccionar estos dos objetos y los voy a convertir en fluido obstáculo podr configurar Por una parte si el volumen de inicialización es el volumen es el shell es la carcasa es la superficie o es ambos como quiero que el volumen a colisionar sea el volumen Sólido del objeto voy a elegir volumen en el slip type es decir el tipo de deslizado voy a elegir Si quiero un deslizado eh parcial un deslizado libre es decir que no haya nada de fricción o no slip es decir que el agua se quede pegada al objeto en este caso voy a decirle partial slip donde puedo seleccionar el rozamiento del agua con el obstáculo en este caso lo voy a dejar como viene por defecto que es a 0,2 si ahora calculo voy a El dominio y le digo que quiero ver calidad final y en este caso voy a bajar la calidad de la simulación voy a bajar a 30 o a 40 para que se calcule en modo rápido pulsar ahora sobre bikar primero voy a guardar Eso sí voy a bikar para comprobar Cuál es el resultado en este caso de que el fluido colisione con estas dos cajas podemos comprobar ahora como la velocidad de la simulación es bastante alta porque la calidad del fluido es bastante baja en este caso que tenemos objetos por primera vez oblicuos se va a notar la pérdida de calidad en la simulación porque si ahora hago scrubbing en el tiempo comprobaré que esa pérdida de calidad se traduce en un evidente escalonado en la geometría compruebo como la geometría no está respetando la geometría precisamente de los obstáculos Pero no pasa nada sé que esto es debido a haber puesto una demasiado baja en la simulación y se también que si aumentara la calidad aumentando también el tiempo de simulación mejoraría el resultado final desde luego lo que me interesa ahora comprobar es que el inflow está metiendo agua y ese agua no cae directamente al fondo del dominio sino que está colisionando con las dos cajas que he puesto por tanto puedo simular como el agua colisiona y va jugando incluso puedo simular lo vemos ahí lo vemos en esta parte de aquí como la densidad del agua impide que todo el caudal caiga directamente no puede caer lo que tiene que hacer es sumarse es amontonarse un poco en esta zona porque no todo lo que cae puede caer otra vez hacia abajo y simplemente simulo acabo de calcular la simulación espero a que eso llegue hasta el final y a continuación una vez haya acabado la simulación pulsar Play para comprobar el ritmo de la simulación completa vamos a esperar unos segundos ya que como la calidad de la simulación ha sido baja no tengo que esperar mucho tiempo para haber completado la simulación elijo otro punto de vista elijo un punto de vista donde pueda ver lo mejor posible la simulación y ahora que me estoy acercando al final voy a darle ya a Play para comprobar el efecto tridimensional de la simulación compruebo el efecto de estos deflectores compruebo el efecto de estas colisiones y compruebo también que cuando el fluido colisiona nunca sale veo ahí el límite nunca sale del dominio por tanto puedo hacer El dominio tan grande como quiera eso sí pero siempre me tengo que ajustar al dominio ahora que ya la simulación prácticamente ha finalizado ahora ya finalizado ya puedo darle tranquilamente a Play y dejarlo en bucle para disfrutar y para visualizar y para comprobar el efecto incluso compruebo lo que pasa cuando se llena esto es muy divertido cuando se llena Simplemente no puede más cuando se llena esta zona de aquí y lo que hace es llenarse más rápido por la zona de la izquierda por la zona de la derecha quiero decir ahora que he conseguido simular correctamente y ver el efecto de la del fluido y también he comprobado Cuál es el efecto de bajar demasiado la calidad que es ese pixelado digamos no es un pixelado es un boxel porque son boxel son píxeles en 3D lo que voy a hacer ahora es seleccionar El dominio y decirle que quiero ver la misma simulación pero con más calidad voy a poner 70 Pasaré de 6 meg a 33 meg y ahora volveré a calcular eso sí ofreciendo todo el tiempo que sea necesario guardo antes siempre es recomendable pulso bikar y espero el tiempo que sea necesario para que la simulación quede correctamente calculada ahora que ha finalizado la simulación puedo ejecutar Play y compruebo como aún sigo teniendo voy a poner esta geometría en Smooth compruebo como sigo teniendo un cierto escalonado pero mucho menor que antes compruebo también por la cantidad de gotas y por los dibujos en la geometría como eh la el cálculo que he hecho ahora es de bastante mayor calidad que el que había realizado en la versión anterior por tanto puedo comprobar est ha tardado más o menos un cuarto de hora 20 minutos puedo comprobar como cuanta más calidad le asigne al fluido más calidad tendrá también en la geometría final pero más tiempo hará falta calcular para calcular un fluido en el que no se viera ningún escalón y en el que la calidad fuera óptima pues tendría que gastar alrededor de 1 o 2 gb de memoria RAM y gastar alrededor Pues de se a 8 horas de render Pero eso sí una vez calculado tendría una animación de una calidad excelente también puedo cambiar propiedades de los fluidos y propiedades de el mundo propiedades de El dominio donde se ejecuta la simulación para controlar efectos tales como que esto parezca agua y no parezca aceite Así que compruebo como si selecciono El dominio y voy a la pestaña domain World mundo del dominio puedo controlar eh objetos tales como la los preses de viscosidad donde por defecto parto con tres presets de viscosidad que son miel que son aceite y que son agua el cuarto preset manual me permite indicar manualmente la base en la que estoy trabajando es decir la cantidad de decimales de precisión con la que estoy trabajando y el exponente donde en este caso conociendo la base y el exponente del líquido que estoy simulando me permite simular cualquier líquido que pueda imaginar pero es muy importante para que esto funcione correctamente que la escala de la escena esté correcta porque trabajando con agua no es lo mismo soltar un vaso de agua que soltar un océano de agua la escala no es la misma por eso no solo es importante definir correctamente el fluido sino que en la en el mundo o en la escena trabajar correctamente con unidades y que los objetos en la escena miran las unidades correctas para la simulación que estemos definiendo y digamos que se simuló una inundación de una ciudad no lo está haciendo sobre algo del tamaño de un vaso de agua o de una pez c observaremos que la gravedad si selecciono el parámetro de gravedad la gravedad está desactivada por qué Porque según me dice estoy usando la gravedad de la escena Así que si quiero modificar la gravedad voy a poder ir visualizo el apariencia del botón Busco el mismo botón en los botones escena y compruebo como efectivamente la gravedad de la escena está activada 0 en x 0 en y -9 com8 en Z por eso si quisiera cambiar la gravedad Y hacer que el fluido se fuera hacia un lado o se fuera hacia arriba o se fuera hacia delante simplemente cambiando la gravedad aquí y por supuesto volviendo a calcular la simulación podría cambiar esos parámetros para crear efectos especiales y crear simulaciones no físicas del agua puedo usar el efecto control para eso voy a hacer lo siguiente voy a convertir esta caja en un dominio voy a duplicarla para crear agua y dentro del agua voy a Añadir un objeto de simetría un objeto de geometría llamado monkey es un mono una cabeza de mono quiero que el agua caiga en esta cubeta que no reconozca a esa cabeza de mono como un objeto colisionador pero que llegado un momento la cabeza de mono suba y como absorba al agua como que domine como que controle al agua por eso voy a hacer este agua grande y voy a animar activo el botón de animar en Blender voy a animar ese mono para que estando aquí se quede quieto y estando en el fotograma 150 por ejemplo suba porque Cuando suba quiero que el agua siga a ese objeto por tengo un objeto que de 0 a 100 se queda quieto y de 100 a 150 sube y yo espero que controle el agua por eso ahora convierto los objetos en geometrías convierto la caja exterior en un fluido dominio No pasa nada porque vea un resto del ejercicio anterior me vuelvo a cer a men1 y ya está convierto esa caja en un fluido la voy a convertir en agua y convierto a ese objeto en un fluido control además voy a poder especificar los fotogramas donde comienza y finaliza esa fuerza ese control ahora trabajaremos con eso y la fuerza de atracción y su radio y la fuerza de velocidad y su radio voy a seleccionar ese dominio voy a bajar la calidad del render a 50 por ejemplo y voy a calcular para ver el efecto final de la animación pulso Bake espero a que la simulación finalice y a continuación comprobaré el resultado de esa simulación me parece que es quizás demasiado detallado para una primera simulación para una primera prueba voy a parar esa simulación la voy a pasar a 40 6 megas pulso b y por tanto ahora tendré una malla de simulación más dura menos precisa pero a la vez la simulación la realizaré más rápidamente sin terminar la simulación observo que cuando cae el agua no cae correctamente sino que está haciendo una pequeña joroba esa pequeña joroba es producida por ese objeto que tenemos ahí que está empujando el agua está controlando el agua Hay un problema y es que ese objeto tiene un radio demasiado fuerte de atracción o de repulsión como lo queramos llamar por tanto esa joroba que vemos ahí se produce por este objeto si paramos el fluido y lo que hacemos Es por una parte aumentar la cantidad de subdivisión voy a subir el modificador y bajo este no me deja perfecto pues no pasa nada voy a aplicar este modificador y ahora en el fluido en el control lo que hago es bajar el radio está 0,7 lo bajo a 0.2 lo que haré es que el objeto no tenga un radio tan fuerte de atracción al fluido Ahora sí con esto corregido grabo cuarto ejercicio vuelvo a Bear y comprobaré como ahora el fluido no caerá de una manera tan fuerte y eh objeto no tendrá tanto radio de influencia sobre el agua ahora sí que tengo la simulación finalizada ya puedo comprobar voy a esconder de momento el fluido en otra capa ya puedo comprobar como el fluido en primer lugar cae y a partir del fotograma 100 levantándose el objeto de control ese objeto de control atrae al agua y el agua en ese momento adquiere forma de mono pero puedo comprobar también como el agua atrae al o el mono atrae al agua justo hasta el último momento en el que el agua cae Por qué Porque si cojo el objeto de control observo que en Time hay un Time de Start y un Time de end Así que lo que voy a hacer ahora es que el tiempo de finalización no sea cuatro sino que sea tres hasta el segundo tres o hasta el tiempo tres el objeto contendrá al agua y en el segundo tres simplemente lo dejará caer y al dejar caer el agua volverá a formar parte del fluido y por tanto del dominio por supuesto he cambiado el end Time de 4 a 3 y esto requiere que ahora vuelva a el agua y vuelva a calcular la simulación de fluidos cojo El dominio grabo por si acaso siempre es conveniente y vuelvo a pulsar el botón Bake para que el programa calcule de nuevo los cambios que a continuación veré aplicados reproduzco ahora la simulación para comprobar como el agua cae dentro del dominio a partir del fotograma 100 el mono atrae al agua y llegado un momento suelta el objeto de control el agua y vuelve a formar parte del dominio voy Incluso a ocultar el objeto de control en una capa aparte para ver únicamente el agua y ver el efecto recordamos que estoy trabajando a Baja calidad de subir el objeto de control y de repente soltarlo el objeto de control vuelve pasa a formar parte de el agua a continuación voy a hacer un cálculo de alta calidad en el que además conseguiré que el objeto de control se despegue completamente de El emisor de agua para ello lo que hago es modificar la animación del objeto de control diciéndole que suba más dentro del agua voy a colocarme en la misma clave y le digo que suba hasta aquí arriba ahora al fluido le diré que quiero calidad final por ejemplo 60 tras lo que calculé de nuevo los fluidos para ver ahora el efecto rebobino guardo calculo y espero a que el cálculo ahora con más calidad finalice Si ejecuto ahora la simulación comprobaré como ahora tengo más calidad en el cálculo y Al subir el objeto hacia arriba incluso me he pasado sale de la del dominio lo suelta y vuelve a entrar Lo que quiero comprobar es que es posible perfectamente separar el fluido del fluido madre con control compruebo como prácticamente están separados y como luego vuelven a caer y se fusionan de nuevo por tanto no hay ningún problema en que el control esté completamente separado del dominio de base y tampoco hay ningún problema en que luego se vuelvan a fusionar sube lo suelta y ya está voy a hacer una escena algo más compleja en la que una ciudad se vea inundada por el agua por eso voy a tomar esta caja como un edificio y voy a duplicar varios edificios para ver cómo el agua se cuela entre ellos voy a trabajar con Snap a punto de rejilla voy a crear unos cuantos edificios y voy a crear unas cuantas kilas de edificios si esto son los edificios me hace falta un suelo con el que trabajar así que para eso voy a duplicar una de las cajas la muevo hacia abajo y la voy a escalar para luego escalarla en Z y que me haga las veces de suelo voy a hacer además que esa caja esteé por aquí hacia delante para que contenga el agua que va a llenar los edificios ahora duplicar otra de estas cajas para convertirla en un emisor de agua escalo en X escalo en Z y las olas van a salir desde aquí y por supuestísimo me hace falta otra caja que me haga de en este caso podría hacer el contenedor en Z más pequeño pero el caso es que no estaría mejorando el detalle No estaría optimizando nada por tanto voy a dejar un contenedor grande y ahora defino todos los objetos y digo que en fluidos esto es un fluido dominio voy a irme al fotograma men-1 cada una de las casas es un dominio obstáculo voy una a una configurándolo como fluido obstáculo cuando acabe con las casas con los edificios evidentemente tendré que aplicar el mismo fluido obstáculo al suelo que en este caso también podría hacer que quitara el suelo y que El dominio esté correctamente alineado con la base de los edificios así se seguro que el agua no saldrá por abajo Lo más importante ahora En todo caso es activar fluido como inflow como entrada constante de agua y le diré que el fluido atención si el eje y va en esta dirección quiero que el fluido vaya en dirección contraria pondré eje y -1 ya que no quiero que el fluido caiga hacia abajo sino que vaya en dirección a la ciudad seleccionando El dominio bajo ahora la cantidad de detalles seguramente voy a tener una cantidad de detallle suficiente incluso para un primer cálculo pero vamos a empezar a probar file save as quinto ejercicio y vamos a empezar a probar seguramente veremos como el líquido con tan poco detalle cubre como una manta las cajas pero así luego sabremos más o menos por dónde ir mejorando los parámetros voy a pinchar Bake empiezo a realizar una simulación de fluido rápida porque tengo muy poco detalle y lo que veré lo siguiente como el agua colisiona y prácticamente más que meterse por el medio de los edificios lo que hace prácticamente es rodearlos sin embargo ya puedo empezar a ver como los fluidos están rodeando al menos en parte los edificios será más espectacular tendrá más olas cuando aumente el detalle de la simulación de todas formas puedo ir empezando a ver ya como esa primera ola vuelve y empieza a pasar el agua a través de las calles Eso sí hasta cubrir por completo la ciudad porque quizás he puesto demasiada velocidad de inflow vamos a reproducir y veo varias cosas primera que quizás inflow debería tener una velocidad algo más lenta - 0.5 y quizás que los edificios deberían ser más altos para no ser cubiertos tan rápido por eso escalo en ya que estamos escalo en una cantidad variable para que cada edificio tenga una altura y de esa manera simular mejor una ciudad algunos edificios más altos otros más bajos y con esto voy a volver a calcular selecciono el fluido vuelvo a pinchar Bake sigo calculando a Baja calidad no he subido la calidad porque esto Me permite como podemos ver aquí trabajar con una velocidad bastante alta Aunque trabaje con una calidad bastante baja a la vez Pero sabiendo que al menos la velocidad básica del fluido y la distribución básica se va a respetar acaba la simulación de hecho puedo empezar Ya a verla y comprobo que bueno quizás sigue siendo demasiado nivel de fluido ya que antes de llegar al final Prácticamente la ciudad se inunda Bueno lo que voy a hacer es ahora sí bajar más la velocidad del inflow - 0.2 subir más la velocidad la calidad del fluido 60 y ahora guardo y vuelvo a calcular Para esperar un rato y Ver el resultado final Bake y espero unos minutos a que el programa me muestre el resultado final de la simulación ha finalizado Y si ahora pulso Play comprobaré como las olas se empiezan a colar poco a poco entre los edificios y comienzan a inundar la ciudad bien pues lo que haré a continuación por tanto es aumentar un poco más voy a recuperar un poco más de velocidad de inflow y voy a aumentar la calidad voy a poner 120 de calidad al fluido para lograr ver como las olas impactan en los edificios y rebotan y ver con más calidad cóm el agua va pasando por dentro de las calles evidentemente y esto era de esperar en este ejercicio si tengo mucha geometría y mucho detalle llega un momento en que para verlo para conseguirlo tengo que aumentar la calidad de ese fluido pulso entonces sobre bit estoy gastando ahora 167 megas que tampoco es mucho y ahora compruebo como la calidad del fluido aumentará pero también el tiempo de cálculo se va a alargar ahora que tengo más calidad dentro de esta simulación si ejecuto Play incluso no la he finalizado puedo comprobar como empieza a ver las olas el retroceso de la ola y efectos tales como por ejemplo el agua colisionando por dentro de los edificios y creando olas internas lo divertido es ver esto desde varios ángulos por ejemplo cómo sería visto desde una de las calles o cóm se sería visto justo desde el frontal de los edificios me hace falta un plano evidentemente o como sería visto desde una de las calles por ejemplo la primera calle de línea de playa como el agua entra en las calles y va subiendo el nivel cada vez más evidentemente con más tiempo de render y más calidad obtendríamos un resultado más espectacular que luego podríamos renderizar para una toma de efectos especiales hecha con fluidos voy a trabajar ahora voy a hacer un ejercicio práctico en el que importaré voy a borrar todo voy a importar dos tubos previamente modelados por eso importo dos tubos en obj tengo aquí ya los dos tubos los voy a escalar para que sean más pequeños y ahora lo que quiero es que el agua pase por dentro de estos dos tubos por eso lo que haré es lo siguiente voy a Añadir un cubo que será el contenedor Este es el dominio por donde se moverán los fluidos luego lo que haré es Añadir otros dos tubos que serán inflow además voy a repartir la simulación en dos simulaciones diferentes voy a meter un inflow por aquí que meterá agua en ese tubo y otro inflow más adelante meterá agua en el otro tubo por eso ahora lo que hago es lo siguiente defino este objeto como dominio y antes de activarlo como dominio fluido dominio voy a cambiar la carpeta temporal donde guardaré los archivos de cach la voy a guardar en la carpeta de proyecto este elemento será un fluido obstáculo y este elemento de aquí será un fluido inflow además como en este caso tengo una geometría cóncava va a ser especialmente útil usar la opción de no trabajar con el volumen sino trabajar con el shell con la carcasa ya que trabajar con el volumen podría hacer creer al programa que el objeto es sólido cuando realmente no lo es ni me interesa que lo parezca si ahora realizo una primera simulación por ejemplo a 40 de calidad voy a ver si con 40 de calidad tengo calidad suficiente como para que el agua se meta por dentro del tubo guardo por supuesto como dos tubos y vaqueo y compruebo como el agua empieza a caer dentro de del tubo El problema es que tengo tan poca calidad que el agua no sabe bien qué hacer Por eso lo que voy a hacer es algo tan sencillo como parar la simulación y aumentar más la calidad voy a pasar a 60 de calidad evidentemente Cuanto más complique la situación y grabo Cuanto más complique la situación más memoria voy a necesitar y compruebo ahora como el agua sigue cayendo por dentro sigue sobresaliendo veo ahí como el agua sigue cayendo por dentro por tanto incluso sería momento de Elevar más la calidad del agua otra cosa que voy a hacer Voy a parar la simulación es bajar el tamaño del inflow bajo el tamaño del inflow aumento la calidad de la simulación guardo y vuelvo a calcular ahora la simulación tardará más en realizarse porque la calidad es mayor pero por fin conseguiré poco a poco evitar que el fluido sobresalga que el fluido interprete correctamente la geometría del tubo aún así la simulación Está realizando a una velocidad relativamente satisfactoria por tanto todavía podría usar veo ahí como el agua se va deformando todavía podría usar más Así que ahora que tengo esto voy a preparar ahora sí parando esta simulación una simulación de más calidad bajando el inflow voy a rebajar un poco la velocidad de emisión de agua y aumento la calidad a 120 y 120 de simulación tras lo cual ejecuto la simulación y dejo al programa que me muestre en dentro de unos minutos el cálculo resultante a continuación lo que voy a hacer es duplicar el emisor para recalcular el fluido pero cayendo ahora por los dos tubos de esta manera más adelante aplicaré un único material de agua o de agua coloreada para ver el efecto Por eso ahora selecciono el agua voy a aumentar un poco más la calidad voy a pasar a 200 estaré gastando 700 megas de ram por tanto no voy a pasar a 150 y si ahora guardo y calculo comprobaré como ahora los dos emisores los dos inflows lanzan fluido a la escena y por tanto ahora tendré dos fluidos dos chorros de líquido intercal dando vueltas entre sí mientras discurren por los tubos ahora que ya tengo el agua cayendo por los dos tubos ya puedo pasar a ocultarlos en otras capas oculto también los inflows y seleccionando esta geometría voy a hacerla Smooth tras lo cual haré lo siguiente voy a aplicarle un material que simule agua coloreada por tanto transparencia rayce con Alfa baja y or un poco alta y un color por ejemplo rojo esta manera simular agua de color un poco de mirror un poco de reflectividad y a continuación voy a poner una cámara en una ubicación un poco especial coloco una cámara frontal Si miro a través de la cámara comprobaré vamos a ver como el líquido cae hacia abajo pero yo no quiero que caiga hacia abajo yo quiero que vaya hacia arriba e incluso en diagonal por tanto lo que hago no es ya girar el líquido sino girar la cámara si giro la cámara así puedo simular como que el fluido surge de abajo a la izquierda hacia arriba y tengo ese efecto por tanto ahora renderizo voy a renderizar colocando un par de paneles luminosos siempre lo suelo hacer con cubo esa manía que tengo aplico un cubo con un material blanco shadeless voy a apartarlo para que no se vea en la cámara otro material shaders a contra Y si ahora renderizo grabo primero si ahora renderizo obtendré el efecto del agua fluyendo en Arcos alrededor del objeto lo que tendría que hacer ahora es conseguir que eh los objetos realmente emitan luz para que se note ese efecto rojizo además voy a decir que esto sea rojizo voy a hacer que el mirror también sea rojizo vamos a probar de nuevo el render Ahora sí Ahora tengo el efecto de agua de color rojo fluyendo no parece ahora mismo agua porque está muy triangulada evidentemente calculando esto con mayor precisión y o aumentándole el modificador subdivision surface para eh suavizar artificialmente el fluido conseguiría que el render tardara más pero a la vez parecería más suave evidentemente al final lo que haría es una combinación de ambos Por una parte subir la calidad del fluido y por otra parte aumentarle un modificador de subdivision surface para suavizar más todavía más el resultado final tengo ya por aquí el resultado que como vemos está compuesto voy a bajar el paspartu de la cámara por tanto voy a bajarlo Y de esa manera tendré una mejor sensación de que lo que está pasando Es que el fluido vuela por el aire en remolinos vamos a hacer un ejercicio en el que cubramos un bizcochito con mermelada con Nata Y con una capa por encima de chocolate por eso voy a partir de esta caja para trabajando con superficies de subdivisión crear a partir de esa caja un bizcochito Así que entro en el modo de edición de objeto entro en Face y voy a esconder esta ventana voy a esconder esta ventana y voy a crear extrusiones para poco a poco crear esa forma de bizcochito hago así y ahora cojo las caras debajo estuyo un poco para dar la forma de la base del bizcochito y ahora en estas caras de arriba lo que haré es una extrusión una escala escalo también un poco en x y una extrusión para hacer la base del bizcochito para ahí poder meter mermelada Nata Y luego más adelante por encima la capa de chocolate retoco un poco si hiciera falta las aristas para darle una forma No tan geométrica no tan regular al bizcochito y ya estoy preparado para empezar a trabajar y para empezar a crear Vamos a darle ahí un poco más relieve y para empezar a crear los fluidos que contendrá este proyecto tras visualizar la simulación compruebo Cómo ha mejorado la calidad en el render compruebo como ahora no rebosa por detrás pero sí que se produce ese rebose por delante por tanto lo que voy a hacer cuando rebosa es que se pare digamos y desaparezca por tanto en ese punto en ese momento lo que har lo que haría ahí ya es hacer que desaparezca aquí moveré esa clave para que en ese punto y no más adelante en ese punto desaparezca hacia delante es decir llegue hasta ahí y de repente pum desaparezca calculo de nuevo la simulación para ver cómo queda con la modif que acabo de realizar lo importante En definitiva Es que la simulación de fluidos vaya rápida para que ahí por ejemplo y ahí desaparezca para que eh pueda hacer tantas pruebas como sea necesario para afinar ese resultado quizás demasiado ahí a tiado En definitiva ya estamos cerca voy a sumar voy a unir más todavía en el dop sheet estas claves para que no haya ese resto de mermelada por tanto paro en el cubo animo las claves animo esta clave para que ocurra más pegado y ahora a continuación vuelvo a ejecutar la simulación todo el rato estamos animando según los factores de viscosidad del agua y para mejorar la calidad de la animación incluso podemos decirle que en el fluido aquí en el fluido inicializar remos empresas de viscosidad voy a usar por ejemplo miel que se parece más a la mermelada Claro que tras hacer esto tendré que reestructurar un poco la simulación ya que puede variar como vemos ahí puede variar el aspecto del fluido que de hecho es lo que quiero que parezca más denso por tanto vamos a simular veremos que en este caso es incluso mejor que el resultado anterior y ahí tenemos nuestra mermelada cayendo Bien voy a dejarme esa lengua de mermelada y lo que haré ahora por supuesto es aumentar mejorar la calidad de el líquido para realizar un cálculo final por tanto paro aumento una calidad a por ejemplo 150 y 150 grabo y recalculo si ahora que ya la tengo prácticamente completada a este nivel paro la simulación guardo la escena y repaso comprobaré como tengo ahí la primera animación correctamente hecha por tanto lo que haré ahora antes de continuar ya que tengo un problema con varios trabajar con varios fluidos a la vez estoy prácticamente obligado a ya los materiales ya que tendré que dividir este proyecto más adelante en varias escenas Por eso ahora lo que hago es crear un plano infinito Si miro desde la cámara veo que tengo esto por tanto voy a reenfocar un poco lo que ve la cámara voy a desactivar la autok y elimino en la cámara las claves Ahora sí y empiezo a renderizar para empezar a renderizar en este caso lo que voy a hacer es lanzar un primer render en el que la calidad evidentemente será bastante mediocre pero voy a mejorar esto bastante realizando los siguientes pasos Primero me voy a cargar la luz segundo voy a activar la iluminación de ambient occlusion en la escena de esa manera tendré una iluminación bastante ambiental segundo o tercero voy a poner materiales a los objetos por eso este objeto tendrá un material más bien amarillento Ahora luego le haré un ruido para que parezca de bizcocho mientras que este material tendrá un material bastante reflectante mirror bastante reflectante de color rojo mermelada vamos a refrescar mirror bastante reflectividad ahí lo tengo más reflectividad y un color también ligeramente rojizo si ahora además activo un poco de transparencia Esto va a ser delicado porque la mermelada es muy poco transparente empezaré a tener el material que necesito además me voy a apoyar en un cubo que como siempre con el material shadeless con el parámetro shadeless me ayudará a Añadir reflejos en este caso en la mermelada por eso le aplico un material nuevo le aplico el parámetro shadeless miro que O tengo cuidado que no se vea desde la cámara y ahora renderizo Así que puedo empezar ya a ver cómo el iz Cochito empieza a reflejar con mermelada de color rojo bueno además de hacer todo esto igual cambio el ángulo de la cámara para que no se vea esto caer por aquí porque quizás no quede muy bien Por tanto muevo la cámara roto la cámara para verlo desde el otro ángulo muevo un poco más la cámara todavía y ahora lo que haré es bajar el parámetro de luz ambiental para que no tenga tanta intensidad otra cosa muy importante en cuanto al material de mermelada es que no es un material no tiene un reflejo cristalino es traslúcido Es difuso por tanto aú a coste de aumentar tiempos de render voy a aumentar el parámetro de glossiness para que de esa manera como veo ahí el efecto sea más difuso sea más creíble y por supuesto también que voy a decirle a ese líquido que no esté facetado sino que esté suavizado más cosas que voy a hacer quizás me ha quedado un poco demasiado oscuro Por eso voy a poner un color rojo más claro y aquí un color rojo también más claro y En definitiva voy a hacer esto y voy a seguir haciendo esto hasta que consiga que el aspecto en la pantalla sea más de mermelada ya tengo aquí Este primer efecto y ahora voy a hacer más cosas como por ejemplo Añadir un poco de iluminación de estudio voy a Añadir una luz por aquí por la izquierda para eso añado una lámpara de área voy a probar diferentes ángulos de iluminación por aquí la giro le digo que proyecte sombras con bastantes samples y que disminuya su intensidad su energía aumentará su tamaño para que ahora al renderizar voy a hacer renders pequeños para que sean rápidos tenga este efecto demasiada intensidad Quizás por eso voy a seleccionar la luz y bajar su intensidad y voy realizando diferentes renders hasta que consiga obtener como veo ahí ese efecto tengo ya ahí mi bizcochito ese plano tiene una clave y se la voy a quitar para así poder hacerlo grande y que no salga en los límites de la cámara otra cosa muy importante es que si el bizcochito es de color crema voy a el suelo y ponerle un color más oscuro para que no resalte más que el propio objeto si hago así ahora resaltará más en la pantalla El bizcocho que el suelo y otra cosa que puedo hacer para completar una primera animación es simular voy a grabar que hace un rato que no grabo simular un tubo que esté soltando que suelte la mermelada por eso ahora coo una caja voy a aplicarle superficie de subdivisión hacerla más pequeña y aplicando lo que sé de superficie de subdivisión voy a preparar una especie de tubo desde el cual sale la mermelada ese tubo desaparecerá por la parte de arriba de la pantalla por la parte de aquí abajo tendrá como una especie de emisor de mermelada ahora pongo esto aquí y voy a animar el tubo de la siguiente manera el tubo tendrá que seguir a la emisión de la mermelada por tanto pongo el tubo aquí activo autocave y ahora hago que el tubo siga como podemos ver ahí siga a la emisión si hacemos así lo que estamos simulando Es que la mermelada sale del tubo cuando la mermelada se va el tubo se queda unos segundos en el sitio y luego poco a poco desaparece hacia arriba para salir fuera de cámara de esa manera podemos también animar para decir animación que empiece el men 100 y que el tubo de esta manera pueda bajar Y entonces lanzar la mermelada vamos a ver Esto es el fotograma cero pero aquí por ejemplo si ahora además hago que ese tubo tenga un material metálico mirror muy mucha reflectividad escaro glossiness y un color más bien gris guardo Y si refresco parecerá que es ese tubo el que está lanzando el la mermelada y ahora guardamos y rizam tendremos el efecto de que la mermelada está saliendo desde ese lanzador voy a poner un ángulo de vista más agradable más favorable y para eso voy a dividir el espacio de trabajo para bajar la cámara voy a probar este ángulo de cámara y subir bajo la cámara un poco más subo y ahora hago este plano gigante ojo que estoy aquí voy a eliminar la clave que he hecho de la cámara Porque es importante recordar que cuando no esté animando debo Desactivar autoc y repaso la animación y tengo ya la primera parte del ejercicio resuelto voy a realizar una animación de prueba para ver cómo se ve Y a partir de ahí continuar Por eso voy a asegurarme que grabo en ad jpeg y le digo que guardo y comienzo a renderizar fotograma a fotograma la animación una vez que tengo suficiente información lo que voy a hacer es parar el render y Revisar el vídeo que he generado el vídeo que he generado parece este vamos a ejecutarlo y comprobamos como tenemos ahí la animación voy a darle a repetir tenemos la animación de la mermelada cayendo evidentemente esto ya sería una cuestión de eh trabajar la viscosidad y trabajar la textura para que en lugar de parecer sirope de fresa pues pareciera o en lugar de parecer gelatina líquida parecera mermelada vale Pero tenemos ya ahí una primera aplicación de fluidos pero ahora vamos a hacer algo más difícil todavía que es lanzar chocolate lo que voy a hacer ahora por tanto es guardar esta escena como bizcocho mermelada y ahora prescindir inevitablemente de del fluido simplemente seleccionándolos yendo a modificar y aplicando el modificador si yo lo aplico pierdo la animación del fluido la pierdo pero la dejo ya ahí puesta para la siguiente pasada que es el chocolate por tanto en una escena tendré la animación de la mermelada en otra escena tendré la animación del chocolate y luego evidentemente fusionar las dos escenas lo que voy a hacer ahora por tanto es una nueva simulación de fluidos donde el chocolate caerá en tira encima del bizcocho Así que ahora El único problema que tengo es que la simulación no debe empezar en cero sino que debe empezar por ejemplo en 100 cuando la mermelada ya ha caído o por ejemplo en 120 Así que voy a crear una nueva caja nuevo cubo que va a ser el nuevo dominio y ahora voy a configurar los siguientes parámetros este objeto será un fluido dominio además importante voy a decirle que el caché esté en bizcochito cach 2 porque si no lo que estaría haciendo es eliminar el caché de la mermelada y no quiero eso resolución 40 preview 40 display final y ahora en lugar de empezar el fotograma cero o en lugar de empezar en tiempo cero voy a empezar en tiempo dos y voy a finalizar en tiempo 12 Por ejemplo que lo voy a dejar de momento a cu esta manera Por tanto la simulación de fluido no empezará en cero porque no me interesa porque ahí tengo la mermelada sino que empezará después creo ahora un nuevo cubo que será el lanzador de chocolate Lo pongo aquí arriba me aseguro de no estar trabajando con autoc lo hago más pequeño lo escalo y animo ahora por aquí desde el fotograma 120 ahora sí autok hasta el fotograma 220 por ejemplo con tiempo de sobra 120o por aquí durante todo tiempo esa barra estará lanzando chocolate vuelvo y configuro de la siguiente manera el domain es un dominio y la viscosidad será por defecto miel esta Barrita será fluido inflow el bizcocho seguirá siendo obstacle y el resultado de los fluidos anteriores también será obstáculo por tanto ahora puedo empezar a calcular para previsualizar la animación voy a guardar como bizcocho chocolate selecciono El dominio y calculo antes de baquear eso sí lo que voy a hacer es eliminar el Antiguo inflow ya que ya no me vale quo con este inflow y comienzo de nuevo a calcular esto es inflow voy a hacerlo un poco más grande y ahora calculo de nuevo donde lo he puesto otra vez de 0 a cu ya que como lo voy a montar en principio me da igual hao y calculo la simulación en este caso Tengo este objeto que comprobamos que la lanza fluidos de momento cubriendo el bizcocho evidentemente vamos a tener que trabajarlo más porque tenemos un problema ahí digamos con la calidad Así que paro aumento la calidad a 50 y guardo y recalculo como vemos ahí ahora ya tengo más calidad Ya estoy lanzando chocolate Pero como veo también tengo que animar el objeto antes así que voy a parar la animación voy a mover los Case de ese elemento que es cubo 6 y los paso esta clave la quito y los paso en lugar de empezar en 120 empiezan en cero Y en lugar de empezar y acabar en 220 acaban en 100 ahora rehago la simulación y veo por fin como estoy lanzando una capa de chocolate encima de este objeto para continuar quitaré autok para la simulación y continúo afinando eliminando la escala voy eliminar la escala las claves de escala de esa caja para hacerla más pequeña para que no rebose tanto el chocolate y vuelvo a calcular guardo de vez en cuando y calculo veo ahí ya como poco a poco me voy acercando tengo el chocolate que empieza a cubrir el bizcochito quizás le haga falta todavía derramar un poco pero no pasa nada porque en cuanto salga en cuanto ponga más calidad empezará a derramar correctamente también si bajara la viscosidad en lugar de miel voy a hacer que sea aceite y vuelvo a vaar lo bueno tiene evidentemente hacer pruebas a Baja calidad es que puedes hacer muchas pruebas diferentes y ahora ahí tendré que hacer que el chocolate otra vez desaparezca el emisor de chocolate en 100 voy a parar la simulación para decirle que en el fotograma siguiente en el fotograma 101 y ahora sí animando ese emisor de repente desaparezca si tenemos suerte dejará el menor rastro posible probaremos Cómo emite hasta ahí y ahí desaparece a ver cómo se ve esto voy a aumentar la calidad de 50 a guardo y recalculo y poco a poco veo ya el de caer voy a editar la animación de esa caja con el editor de curvas ya que cuando desaparece lo hace demasiado deprisa ahí lo tenemos voy a ese controlador veer controlo solo la posición en x para que ese movimiento se ha suavizado y ahora lo que tendré es que llegar hasta ahí y luego Pam desaparece con suerte probamos subo un poco más la calidad preview a 100 calidad final a 100 97 meg guardo y recalculo tengo ya una simulación inicial poco a poco empieza a forma pero ahora y de hecho este objeto que es la animación anterior voy a moverlo a otra capa para eh trabajar con más soltura ahora refinar la animación del emisor trabajando con los siguientes parámetros atención voy a ir a la vista de gráficas y sobre la Gráfica de X lo que haré es refinar esta gráfica dentro de esta gráfica lo que haré ahora es realizar las siguientes operaciones aquí vamos a ver aquí voy a crear una clave moviendo un poco y cada x fotogramas cada pocos fotogramas moveré un poco y realizaré un cambio porque así voy a tener gráficas suficientes como para poder realizar la animación que a continuación voy a explicar he creado nuevos puntos y ahora si me acerco a la Gráfica voy a trabajar estas gráficas para que hagan lo siguiente si ahora muevo esta gráfica y esta gráfica hace así si hace montañitas lo que conseguiré es que el carril que emite chocolate en lugar de ir en lugar de tener una velocidad constante tendrá como ahora veremos voy a refinar estos últimos pasos como ahora veremos irá un poco adelante un poco atrás un poco delante un poco detrás si ahora reviso el movimiento comprobaré como ahora irá si me fijo ahora irá así irá echando el chocolate poco a poco Voy a decirle además que emita menos chocolate y ahora recalcular para ver el resultado final guardo quizás voy a hacer esta barra un poco más grande escalando la en y para intentar que el chocolate rebose por los lados y vuelvo a calcular como al ejecutar la simulación parece claro que el carril de chocolate va demasiado rápido lo que haré es parar la simulación y urla esa misma animación atención a la pantalla la voy a hacer mucho más grande mucho más larga para eso cojo el cubo y desde cero escalo la animación para que ocupe por ejemplo 250 fotogramas y por tanto tenga tiempo de sobra de ir hacia delante es más puedo seguir trabajando con la Gráfica para que haga lo siguiente voy a trabajar con la Gráfica voy a eliminar puntos intermedios y voy a rehacer la animación de la siguiente manera primero haré un movimiento constante y ahora a continuación iré contando de fotograma en fotograma voy a eliminar también el resto de claves veamos cojo las claves las elimino me quedo solo con la posición en x porque ahora voy a hacer algo tan sencillo y tan regular como simplemente ir cada x fotogramas Por ejemplo si tengo de 0 a 250 voy a ir digamos cada 20 fotogramas creando una clave recordamos autok activado creo una clave de momento vacía Pero eso sí como es cada 20 fotogramas es una clave regular y lo único que quiero lo único que estoy haciendo como podemos comprobar aquí es crear claves en el tiempo que ahora me permitirán hacer cómodamente el movimiento de ondulación si ahora hago así y ahora hago así Ahora sí que me puedo fijar solo en la posición en x y empezar a trabajar con las gráficas dec y voy a trabajar haciendo esto trabajo solo con x vamos a ver aquí si hace falta Ahora lo exagerar más aquí y aquí para al final obtener un movimiento lo más regular posible en el que la banda vaya de delante hacia atrás por tanto ahora que tengo ese movimiento que ya parece más regular y parece más lento vamos a probar a ejecutar la simulación con esa barra selecciono El fluido guardo pulso bikar y espero a que la simulación finalice para recoger el resultado después de tocar parámetros tales como la densidad y la gravedad llegamos a este resultado que como podemos comprobar contiene el chocolate cayendo con el grado exacto de espesor para no derramarse como líquido la mesa ni quedarse solo encima del bizcocho sino derramarse lo justo con el grado justo de compacidad y el grado justo de espesor para parecer chocolate luego evidentemente con un material adecuado y con una iluminación adecuada acabamos de conseguir el efecto de esta representación y de esta animación en la que como podemos ver hemos eh configurado primero mermelada sobre el bizcocho y luego chocolate por encima vamos a estar trabajando ahora con fluidos y para hacer fluidos lo que vamos a hacer es lo siguiente voy a usar esta caja que tengo por defecto en la escena inicial de Blender esta escena que me aporta una caja y voy a usar esta caja para hacer fluidos voy a estar trabajando con el motor de render de Blender Aunque luego podré cambiar esto sin ningún problema a otro a cualquier otro motor de render Como por ejemplo cycles pero ahora de momento al menos de momento me voy a quedar con Blender render y con la caja seleccionada he seleccionado la caja con el botón derecho del Ratón me voy al último botón que es físicas donde los fluidos son una parte son un tipo de físicas disponibles dentro de brender dentro de aquí tengo todos los tipos de simulaciones físicas que puedo realizar en Blender donde tengo campos de fuerzas tengo cuerpos blandos tengo humo pintura dinámica tela colisión y tengo fluidos por tanto lo primero que voy a hacer es con la caja seleccionada hacer clic en fluido por tanto puedo comprobar como este objeto se ha convertido en un fluido lo que tengo que hacer a continuación Eso sí es definir Qué tipo de objeto fluido es Con qué tipo de objeto fluido estoy trabajando para definir el tipo de objeto fluido lo que voy a hacer es desplegar la lista que hay dentro de type y el primer objeto fluido el más básico el que tiene que existir yo diría en prácticamente cualquier tipo de simulación es el domain es el dominio es un contenedor donde dentro de ese contenedor va a existir el fluido nunca podrá existir fuera de ese contenedor para calcular las simulaciones de fluidos vamos a recurrir a una simulación por elementos finitos de esa manera necesitamos un espacio finito donde poder almacenar esa simulación lo que haré por tanto es empezar activando este objeto como domain para poder empezar a trabajar esta caja puede ser todo lo grande que yo quiera no tiene que ser de 2 m por 2 m puede ser más grande pero ojo Cuanto más grande sea la caja más memoria consumirá la simulación de fluidos por eso debo tener en cuenta debo tener cuidado y restringir la caja únicamente al espacio donde finalmente Existirá mi simulación ahora que ya tenemos un contenedor y por tanto un dominio y por tanto una zona un área un volumen donde van a existir las partículas o en este caso la simulación de fluidos vamos a introducir fluido Dentro de este contenedor hay varias maneras de introducir fluido la más sencilla consiste en lo siguiente voy a ponerme en la vista de wireframe la vista alámbrica para poder ver mejor dentro del cubo y para eso lo que voy a hacer es hacer clic en la visualización en visores 3D y voy a cambiar la vista por defecto que está en sólida a una vista de tipo Wi frame a una vista de tipo alámbrica más adelante cuando la simulación haya empezado la devolveré a una vista sólida y ahora voy a crear una nueva caja no me sirve esta necesito crear otra donde esa otra caja es la que se convertirá en un fluido por tanto voy a Añadir una nueva caja voy a add mesh cube voy a Añadir un cubo cuidado porque al Añadir un cubo probablemente se quedará fuera del cubo original lo que voy a hacer atención es mover ese segundo cubo hasta que tenga más o menos estas proporciones voy a mover ese segundo cubo hasta que sea más pequeño que el primero y esté sobre todo esto es importante esté contenido dentro del primer cubo el primer cubo que he creado es el que está en negro El que tiene los contornos negros el segundo cubo que he creado es el que ahora mismo Está seleccionado y por tanto es el que tiene ahora mismo los contornos de color naranja ahora con este segundo cubo seleccionado que es el que está contenido dentro del cubo primero voy a ir otra vez si no estaba ya seleccionado al menú de físicas que es el último botón que hay en la botonera de parámetros o propiedades voy a activar también esa caja como fluido lo había hecho antes sí pero para la otra caja cada caja tiene unas propiedades diferentes la activo como fluido Y en este caso ya no me interesa que esa caja sea un dominio porque ya tengo un dominio anterior lo que voy a hacer es hacer que este objeto se convierta en fluido por tanto lo que voy a hacer es crearlo como fluido y por tanto ya estoy preparado para realizar una primera simulación más adelante trabajaremos con otros parámetros como el volumen o la velocidad inicial pero de momento ya puedo realizar una primera simulación gracias al objeto de fluido aquel objeto que sea fluido se convertirá automáticamente en líquido Y aquel objeto que sea El dominio será el contenedor Digamos como una caja donde dentro de esa caja se va a mover el fluido el primer problema el que nos planteamos el que se nos presenta cuando empezamos a hacer simulaciones de fluidos es Dónde está el Play para la simulación puedo comprobar como aunque le de aquí a Play No pasa nada puedo comprobar que si hago scub manual No pasa nada pero para hacer una simulación en manual lo que tengo que hacer es primer paso seleccionar El dominio Primero me hace falta un dominio para poder contener a los objetos y segundo y más importante El dominio es el que contiene los parámetros de la simulación por tanto tiene que haber un dominio Así que comprobaré como hay un botón arriba del todo llamado Bake que en castellano sería tostar que se usa por muchos programas para unos cálculos y convertirlos a un cálculo estático unos cálculos dinámicos y convertirlos A estáticos además veremos ahora en el ejercicio por defecto que este Bake me dice que la memoria requerida son 27 meg vamos a ver qu es la memoria por defecto y ahora luego veremos Cómo podemos aumentar más la memoria y por tanto aumentar más la calidad pero también reducir el rendimiento reducir la velocidad de la simulación por tanto sin tocar ningún parámetro más lo que voy a hacer es hacer clic en el botón Bake y observaré atención primero que la caja se ha convertido en un líquido segundo que aquí arriba hay una cosa llamada fluid simulation que es una simulación de fluidos pero atención a diferencia de versiones anteriores de Blender el la línea de tiempo Sigue estando en cero Aunque aquí Voy avanzando la línea de tiempo Sigue estando en cero Eso quiere decir que la simulación va corriendo de fondo yo podría seguir trabajando en la escena y mientras tanto la simulación va corriendo y hasta que no atención hasta que no haga scrubbing hasta que no empiece a pasar el ratón por aquí no veré el resultado de la simulación ahora bien cuidado Blender todavía es un poco inestable cuando yo empiezo a pasar el ratón y encuentro el límite entre lo que no está calculado y lo que sí está calculado si a veces rebaso ese límite muchas veces hacia fuera o hacia dentro el programa se puede colgar por tanto yo más que estar empujando ese límite con la línea de tiempo suelo ser partidario de dejarle acabar de calcular y cuando haya acabado de calcular entonces ejecutar la simulación si tenemos prisa De todas formas voy a repasar un poco la simulación atención si quiero verlo mejor voy a poner ahora la vista sólida y voy a comprobar Cómo el objeto se convierte automáticamente en fluido cae colisiona y en ningún momento es capaz de rebasar los límites de la caja que hemos definido como dominio vemos por tanto como el primer objeto se ha convertido en contenedor y el segundo objeto se ha convertido en el contenido voy a dejarle por tanto unos minutos que acabe el cálculo y una vez haya acabado el cálculo pasamos a analizar el resultado ahora que tengo la simulación casi finalizada lo que voy a decir también es que en cualquier momento yo puedo parar yo puedo cancelar la simulación haciendo clic en este botón que tiene un aspa que está aquí arriba atención hago clic en este botón paro la simulación y no quiere decir que he cancelado toda la simulación sino que he cancelado solo a partir de ese momento lo que había calculado hasta ahora lo tengo vamos a comprobarlo porque ahora puedo o hacer bien scrubbing o puedo simplemente darle a Play con las teclas de reproducción que tengo dentro de la ventana de línea de tiempo y observo varias cosas voy a observar varias cosas como en primer lugar que ya tengo una primera simulación de fluido puedo observar que fluido no son partículas Es fluido realmente y por tanto la misma el mismo volumen que tenía contenido en esta caja es al final el volumen que acaba depositado en el fondo de la caja luego es un fluido con propiedades físicas no son partículas si le doy a Play observo que el fluido se comporta de una manera bastante realista vemos como cuando no cabe más empuje hacia delante vemos como gotea vemos como chorrea vemos como genera olas dentro del fluido ahora bien retomo lo que estaba diciendo antes de que para calcular este fluido para que los cálculos no se eternic lo que ha hecho el desarrollador es recurrir a una estrategia de cálculo por elementos finitos cuando realizamos un cálculo por elementos finitos lo que hacemos Es partir un problema en pequeños problemas con un área determinada y resolvemos cada uno de los pequeños problemas pero no puede haber un número infinito de Pequeños problemas Porque entonces sí que tenemos un problema sino que hacemos un número conocido de Pequeños problemas si yo miro este líquido de cerca veré que realmente Está compuesto por triángulos y lo que es más interesante o al menos a mí me parece más interesante si yo cojo este fluido y lo miro desde un lateral y paso a la vista alámbrica comprobaré como realmente el fluido Está compuesto por una serie de células de celdas regulares de un tamaño muy determinado esas celdas son las que hacen son las que constituyen la calidad del fluido podemos cambiar el tamaño de esas celdas para aumentar o disminuir la calidad pero siempre teniendo en cuenta que Cuanto más pequeñas sean las celdas más capacidad tendrá más calidad tendrá la simulación pero más tardará en calcularse desde luego la el parámetro principal que controla esa calidad es la resolución final no la resolución de previsualización que por defecto está 45 y a mí me gusta poner siempre a 100 voy a ponerlo a 100 veremos que prácticamente no produce ningún cambio y luego en render display lo que voy a hacer es cambiar esto de final o de preview a final voy a cambiar en lugar de preview voy a poner aquí siempre final por tanto en render tanto en viewport voy a poner final y ahora atención esos parámetros yo siempre recomiendo dejarlos así como los acabo de poner que es preview a 100 View por display final render display final y ahora el parámetro con el que vamos a jugar es el parámetro resolución final nos permite calcular la calidad que queremos para esa simulación recordemos es ahora mismo simulación lo que voy a hacer atención es bajar ese parámetro de 65 a 30 y observaremos que 27 no se va a partir por la mitad este parámetro sube en progresión geométrica y baja también en progresión geométrica por tanto si yo lo bajo de 65 a 30 la memoria gastada será 2,75 fijémonos en 65 eran 27 megas en 30 son 2,75 la mitad de parámetro 10 veces menos memoria pero a la vez si de 65 paso a 130 que es el doble de 65 27 no se va a multiplicar por dos sino que se multiplica por 10 Así que cuidado porque si digo en lugar de 130 quiero 300 cuidado porque voy a gastar casi 3 GB de ram Y si digo por ejemplo 500 voy a gastar 11 GB de ram debo tener en cuenta debo tener cuidado y tener esa cantidad de ram porque si no el programa se colgar pero ahora por defecto lo que voy a hacer es dejarlo a 30 voy a volver a calcular Y por supuesto lo que voy a decir siempre es que si yo cambio un parámetro aunque no pase nada en la pantalla Yo sé que tengo que recalcular la simulación para que ese parámetro adquiera validez Así que vuelvo a hacer clic vuelvo a pulsar el botón B y atención Mirad aquí arriba porque observaré como al tener menos calidad la simulación corre mucho más deprisa pero también observaré como el tamaño de las celdas es bastante más grande que antes y por tanto la calidad final es menor fijados ahora en un momento lo he calculado Y si le doy a Play observaremos por tanto también que la calidad es bastante menor que antes líquida es bastante más gruesa que antes de la misma manera que bajar la calidad la resolución final hace que baje la calidad visual y que también suba la velocidad que baje el tiempo también de cálculo si yo aumento la calidad atención tod la pantalla voy a poner calidad de 200 he puesto una calidad de 200 y la memoria va a ocupar 770 meg si yo ahora vuelvo a pulsar el botón Bake comprobaré varias cosas primero que la ram del equipo subirá de una manera bastante pronunciada vamos a ver la ram y comprobamos como en este caso ya ha empezado bastante alta porque no he sacado desde antes el cálculo pero también podremos comprobar atención có la densidad de la malla la tenemos ahí en pantalla ahora mismo atención Mirad la densidad de la malla es mucho más mucho mayor el Triángulo cada celda es mucho más pequeño y por tanto la calidad de la simulación final tendrá mayor nivel de calidad que cuando estábamos calculando a Baja resolución Aunque eso sí Ahora finalizar este cálculo completar este cálculo Pues nos puede llevar en torno a una hora y media o por ahí otra cosa que voy a decir y en este caso es buena en cuanto a la simulación de fluidos es que si nos fijamos en el procesador prácticamente el 100% del procesador se está yendo a la simulación de fluidos Incluso en un procesador en este caso que tiene cuatro núcleos esto quiere decir si miramos la tabla de procesos y miramos el uso de cpu que Blender en este caso está usando el 70 del procesador y quiere decir por tanto que tener un procesador con varios núcleos va a hacer que el cálculo se realice más deprisa en contraposición a lo que pasaba antes a lo que pasaba hace años que el simulador de fluidos de Blender solo aceptaba un núcleo esto quería decir que Aunque tuvieras ocho núcleos solo iba a uno y por tanto estábamos desperdiciando la mayor parte de potencia de cálculo vemos por tanto como en todo este tiempo solo hemos avanzado apenas una fracción de toda la simulación tendríamos que esperar un buen rato a que la simulación quedara completamente realizada voy a crear unos obstáculos donde voy a hacer un ejercicio con rampas más adelante puede ser cualquier objeto por ejemplo una copa de vino conteniendo líquido entonces voy a convertir estoy en una escena nueva convierto empiezo siempre convirtiendo la caja por defecto en un fluido y ese fluido va a ser El dominio es la zona que es abarcada por el fluido vamos a poner esto en wireframe lo que voy a hacer ahora es atención con el menú Añadir mes cu un cubo cajas y voy a darles forma sobre todo atención Mirad a la pantalla escalando y escalando en Z les voy a dar un poco de forma de rampa Así que si hago así hago una rampa por aquí duplico esta rampa y hago un pequeño de juego de un pequeño juego de rampas para que el fluido vaya por ahí por supuesto le he dado a esta caja fluido dominio Pero estas cajas no les he dicho nada por tanto cojo el primer colisionador activo fluido y le digo que es un obstáculo que hace que el fluido se pare cojo esta caja y le digo que es un fluido obstáculo y ahora lo que voy a hacer es arriba porque tengo un contenedor y tengo obstáculos pero no tengo agua no tengo fluido lo que voy a hacer es crear otro cubo voy a crear un tercer cubo que voy a poner más o menos a esta altura voy a hacer que tenga más profundidad una cosa así Mirad atención Este es mi montaje y lo que voy a hacer ahora es convertir también esta última caja en un fluido mediante fluido ahora tengo si vuelvo a esta vista un contenedor dos colisionadores y un fluido vamos a ejecutar la simulación para ver qué pasa recordamos que para ejecutar la simulación tengo que hacer clic con el botón derecho en el contenedor porque solo entonces hace este botón llamado Bake Así que hago clic en Bake y observo empiezo observando como solo la caja se convierte en un fluido y ese fluido colisiona ahí tengo el punto donde justo Todavía no he calculado por tanto voy a esperar un momento pero veo como justo esa caja se convierte en fluido se derrama pero al derramarse no cae al suelo directamente sino que colisiona con esta primera rampa con ese primer colisionador y ahora si sigo calculando si sigo esperando veré como de un colisionador pasa al siguiente y de ahí evidentemente llegará hasta el suelo ya tenemos por tanto este fluido y vemos por tanto el efecto también de los colisionadores sin embargo lo primero que echaríamos de menos es un flujo constante de fluido vemos como la caja se convierte en líquido pero ya está cuando la caja cae se acabó la simulación ya no hay más otra manera de realizar simulaciones es convertir a esta caja en lugar de en un fluido en un elemento que se llama inflow para entendernos en castellano un inflow es un Grifo de agua y un outflow es un desagüe un inflow es un agujero por el que constantemente va a entrar fluido y un outflow es un agujero por el que constantemente va a salir fluido un outflow no nos obliga a tener un inflow y un inflow no nos obliga a tener un outflow podemos tener uno perfectamente sin tener el otro lo voy a hacer Voy a parar esta simulación voy a esta caja y voy a decirle que esta caja de aquí ya no es un fluido sino que es un inflow por supuestísimo tengo que El dominio y volver a calcular y atención si Ahora vuelvo a calcular comprobaré como esa caja empieza a lanzar constantemente fluido el problema Mirad a la pantalla el problema con el inflow es que por defecto no tiene velocidad por tanto parece que el agua se resiste un poco a caer parece que el fluido está como Atrapado dentro de esa caja por eso es mu conveniente el inflow y decirle en inflow velocity velocidad de entrada en este caso para que fluya hacia abajo que la z es igual a -5 si Z es igual a -5 el agua caerá hacia abajo si quiero que caiga hacia allá será x positiva veis rojo si quiero que caiga hacia allá será x negativa voy a poner Z = -5 vuelvo va a quedar ya sabéis cada cambio que hago tengo que volver a baquear tengo que volver a pulsar el botón de baquear para actualizar los cambios y ahora compruebo ahora sí cómo se me empieza a llenar de fluido la escena voy a hacer una cosa voy a parar la simulación voy a bajar la calidad para que se calcule a una velocidad mayor aunque tenga menos calidad pero así que lo pueda ver correctamente en los visores sin tener que esperar demasiado y cuidado le he dado tanta fuerza le he dado tanta velocidad que en unos pocos segundos se llena toda la caja Por eso voy a parar voy a rehacer el fluido voy a decirle que Z = a -1 como he cambiado un parámetro tengo que volver a vaar tengo que volver a calcular la simulación cada parámetro que cambie tengo que volver a recalcular la simulación y compruebo ahora como ahora sí tengo una simulación Eso sí en unos pocos fotogramas Parece que la caja ha quedado completamente llena para eso Por supuesto Siempre puedo parar poner menos velocidad - 0.3 y volver a calcular este es un proceso que es un clásico en el cálculo de fluidos que es parar retocar y volver a calcular y otra vez parar retocar y volver a calcular y así hasta obtener el resultado que estamos buscando fijémonos como Aunque a Baja calidad evidentemente pero la simulación se va calculando de una manera bastante interesante y bastante animado podemos ver en la pantalla vamos a combinar varias cosas dentro de una simulación y además en este caso vamos a usar el motor de render cycles dentro de Blender y para ello voy a crear un contenedor lo suficientemente grande dentro del cual voy a crear varias cosas en primer lugar usando una caja atención y mediante modelado de superficies de subdivisión voy a crear una copa de champ una copa de vino una copa donde pondré algo así que voy a pulsar control 3 lo he convertido en una superficie de subdivisión o bien Podría importarlo si lo he modelado en otro programa y voy a modelar esto tal manera que voy a crear aquí la siguiente copa estoy modelando el interior de una copa de champag de vino o de lo que queramos y ahora estuyo un poco más esto es modelado de superfici de subdivisión o en cualquier otro programa Ahora vuelvo a extruir y ahí lo tengo Lo importante es que tenga para que el agua se pueda colar o el vino o el fluido que sea se pueda colar por un lateral y lo que haré ahora por supuesto es asegurarme que esa copa está realmente dentro de la simulación y lo que voy a hacer también es asegurarme que la simulación contiene a la parte correcta de la Copa atención pregunta el fluido en algún caso va a atravesar el culo del vaso y se va a meter por el pie no Entonces para qué calcular esta parte de aquí abajo podría decir Bueno pero es que igual el fluido entra rebasa y se cae y llega hasta el pie de la copa en ese caso sí que El dominio tendría que llegar hasta ahí abajo En definitiva tenemos que pensar qué tipo de simulación queremos y luego agrandar el dominio para que admita todo lo que nos interesa ver en la pantalla no más pero tampoco menos y ahora voy a poner un cubo un pequeño cubo que me va a hacer de inflow lo voy a poner aquí y este cubo va a hacer las veces de una botella de vino que está lanzando fluido dentro de la Copa tengo por aquí esto y voy a configurar los elementos atención porque voy a configurar que esto es un fluido que es un dominio No pasa nada porque veamos un resto de simulaciones anteriores ahora se quitará esto es un obstáculo donde voy a inicializar no solo el volumen sino también el shell y el volumen Así que digo both digo que inicializo no solo el volumen completo sino también la concavidad si quiero concavidad tengo que también shell cáscara Y por supuesto esta caja se tiene que convertir en el fluid inflow donde ahora voy a probar voy a empezar dándole un os1 en Z para que el fluido salga en vertical hacia abajo vamos a empezar calcular vamos a realizar un par de cálculos a Baja resolución ahora pondremos uno a alta resolución y voy a empezar seleccionando el fluido no nos preocupamos porque parezca que tenga otra calidad que sea de otra simulación porque de hecho es de la simulación anterior Pero en cuanto le doy al botón Bake se actualiza mi simulación empiezo a calcular observo Cómo cae quizás el momento no parezca vino sino que parece moco Pero no pasa nada porque es por tener una calidad muy baja cuando aumente la calidad tendrá un mejor acabado fijémonos en esa gota que parece más de gelatina que de vino pero eso sí vemos como llega al final y empieza a rebosar cuidado cuando trabajamos con superficies de subdivisión porque lo que está haciendo es trabajar con la malla original es decir con esta malla por eso lo que voy a hacer es aplicar colapsar la superficie de subdivisión para que el programa se dé cuenta de todos esos polígonos y ahora como no vuelvo otra vez a baquear es difícil Yo diría que casi imposible hacer una simulación que a la primera te salga bien lo más normal es ir haciendo simulaciones ir afinando parámetros hasta que al final queda como quieres y fijémonos cómo se empieza a llenar la copa hasta aquí al final queda completamente llena en este caso para que dure más la animación y para tener una simulación más interesante lo que voy a hacer es parar la simulación poner el inflow más hacia un lado tampoco que se caiga fuera y decirle que quiero menor velocidad -0.5 y vuelvo a calcular el principal problema de las simulaciones de fluidos cuidado ahí se cae un poco hacia un lado el principal problema de las simulaciones de fluidos es que hay veces que cuando las ponemos a alta calidad no salen Exactamente igual que las de baja calidad por eso aunque las pongamos alta calidad nunca salen tampoco a la primera sipr tenemos que hacer un par de repeticiones y voy cambiando parámetros en este caso voy a cambiar un poquito el ángulo para ver cómo queda ahora ahí lo vemos y lo divertido de este esta simulación de fluidos Es que yo ahora sin haber acabado la simulación de fluidos puedo cambiar a cycles render y puedo activar la vista de cycles y puedo hacer un render mientras esto se va calculando y digo Mira este vaso va a ser de cristal glas y este fluido va a ser de glas de color rojo y el fondo el entorno en el entorno voy a poner un Sky texture una textura de cielo y puedo ir buscando el mejor ángulo y sobre todo lo estoy buscando mientras la simulación se va ejecutando recomendable Eso sí si hago esto guardar de vez en cuando verdad Pero fijémonos como puedo hacer esto incluso con la simulación en marcha y para mí lo divertido es que eh incluso puedo consir efectos que en la vida real no podría conseguir porque a veces pensamos bueno el 3D para simular lo que podemos grabar con una cámara de vídeo para que lo queremos Pero Y qué tal un fluido que emita luz así que voy a parar la simulación voy a una cámara mejor voy a un punto de cámara para eso pongo una cámara tengo la cámara bastante picada por tanto voy a volver a sólido bien y me voy a llevar un poco la cámara hacia atrás una cosa así Y qué tal si ahora digo que en el fondo pongo un color RG que es negro y el fluido es un mix que por un lado es de cristal es un fluido de cristal y por otro lado es un emisor apago el entorno y ahora nos fijaremos como es el fluido el que emite la luz incluso lo divertido Porque ahora mismo podéis decir en la pantalla bueno no se ve gran cosa pero si yo ahora pongo un plano detrás un plano o cualquier otro recurso audiovisual en este caso más visual que auditivo pongo un plano y le digo que tiene un material difuso nos fijaremos como realmente la luz proviene de ese líquido actúa de bombilla y la luz cuando llega al es cuando emite es más lo que podemos hacer incluso Es que la copa esté tintada de no sé de rojo o de verde para comprobar si se da el caso en este caso no parece sí que se da nos fijamos ahí Cómo aparecen puntos verdes tendría que bajar un poco la intensidad de la luz voy a bajar un poco para comprobar ahí como es realmente el fluido el que emite luz y se escapa de la copa y nos daremos cuenta como este fluido blanco es el que está afectando a esta zona de aquí mientras que este fluido es el que está afectando esta zona de aquí y sabéis lo más interesante todo esto es con cpu por tanto si ahora me voy al render le digo que quiero en integrador un número de 100 pasos y le digo que use la gpu fijaos a la velocidad a la que sale es decir podemos hacer simulaciones que sean mejores incluso que en la realidad sobre todo la velocidad a la que vemos los cambios ahora voy a lanzar un render para la velocidad a que vemos los cambios como veréis es increíble voy a hacer una cosa voy a aumentar un poco Ah voy a solidificar quizás ese cristal para que no deje escapar el líquido pero En definitiva ahora lo que haré es dejar calculando una simulación eh más extensa una simulación a más calidad para que parezca un líquido más fluido y no tan viscoso Y a partir de ahí calcular el render Y veréis qué efecto tan divertido que hace lo que voy a hacer ahora por tanto es tomar el contenedor tomar el fluido y volverlo a calcular pero en este caso con más calidad digamos una calidad de 200 para tener un fluido de voy a guardar esta escena eh fluidos y voy a poner a calcular donde evidentemente en los primeros pasos todavía no tendré la calidad buena ahí pero desde luego la simulación va a tener una calidad mucho mayor que la que he hecho anteriormente fijémonos incluso que el fluido que era rojo me está dando puntitos rojos y el cristal que es verde me da puntitos verdes y fijémonos también a la velocidad a la que lo está calculando mientras se va calculando la simulación lo que he hecho es colocar unos cuantos materiales de cycles le he puesto un material traslúcido a la copa y le he seguido con el líquido fluorescente con el líquido emisor de luz que tenía anteriormente por tanto lo que voy a hacer ahora es eh activar la el render aunque no haya acabado la simulación de hecho voy a parar eh la simulación y voy a calcular el render de los fotogramas en alta resolución que tiene esta animación lo que tengo que hacer ahora sí es definir eh cuántas iteraciones cuántos samples tiene el render porque si está puesto a 1000 quiere decir que puede tardar unos 5 minutos en realizar cada fotograma voy a poner por ejemplo 100 voy a decir que el tamaño de render es HD 720 y con esto voy a renderizar por tanto ahora en output lo que hago es crear una nueva carpeta y lo llamo render copa acepto y empiezo a renderizar la animación donde en este caso lo que he hecho evidentemente es fusionar la simulación de fluidos con la simulación de cycles dejémonos cómo sale la translucidez empiezo a calcular la animación y para calcular animación eso sí lo que voy a hacer es quitar cycles dentro del visor para asegurarme que tod La potencia de cálculo se va a ir sola única y exclusivamente para el render otra cosa que puedo hacer otra cosa que puedo hacer para asegurarme de que el render sale suficientemente bien por lo menos para una primera demostración es calcular el render inicial por lo menos el inicial a Baja resolución voy por tanto ahora después de este cálculo a esperar a ver cómo sale el render y más adelante lo convertiré en una película en Adi en quicktime o en cualquier otra tecnología una vez que tenemos suficientes fotogramas voy a parar el render voy a visualizar estos fotogramas en una carpeta simplemente para ver el efecto combinado vamos a verlo Aquí vamos a ver la presentación aquí para comprobar Cómo se ve lo estoy pasando manualmente fijaos atención en la pantalla el efecto de la translucidez combinado con el cálculo de agua con la simulación de fluidos y podemos ver como el efecto es muy interesante si lo paso rápido lo vuelvo a pasar y ahora ya evidentemente con más tiempo de render y quizás un pase de producción de quitar ruido tendríamos ya una animación completamente limpia efectivamente ya a partir de ahí la cantidad de efectos esto sido algo sencillo hecho en un momento la cantidad de efectos y de variaciones que se puede hacer pues puede ser grandísimo a continuación vamos a ver cómo hacer simulaciones de humo dentro de Blender serie 2.5 lo primero que necesitamos para hacer cualquier simulación de humo es un contenedor es un dominio El dominio contendrá el humo y eventualmente se convertirá en él para eso vamos a seleccionar un cubo por ejemplo el cubo que se crea por defecto en Blender voy a empezar trabajando en la vista fire frame en la vista alámbrica ya que aún así veré correctamente el humo y antes de convertir esta caja en un dominio lo que voy a hacer es duplicarla para obtener un generador de humo por tanto con mayúsculas d duplico ahora tengo dos cajas y escalo la segunda para que quede contenida dentro de la primera en este primer ejercicio esta caja será el contenedor mientras que esta caja será el emisor de humo para convertir estos objetos en contenedor y en emisor seleccionaremos el primer objeto iremos al último botón físicas y activaremos el botón Smoke el botón humo tras lo cual Tendremos que configurar cómo queremos definir a este elemento como dominio contenedor del humo como Flow generador de humo o como colisión en este caso voy a activar esta caja como dominio y la caja interior la activaré como Smoke Flow solo por hacer esto sin necesidad de backear la solución lo que voy a hacer es ponerme en el fotograma cero de la animación y pulsar Play al pulsar Play el programa Calcula en tiempo real la solución de humo además mientras Calcula puedo moverme según la capacidad de mi ordenador alrededor de la simulación para comprobar su aspecto una vez que la simulación ha quedado completamente ejecutada por primera vez las siguientes veces queda cacheada en la memoria queda almacenada en la memoria y la Reproducir más rápido que la primera vez compruebo que existen aquí abajo una serie de fotogramas clave en color rojo que ha creado automáticamente el sistema de humo evidentemente esos fotogramas clave esa memoria temporal serán automáticamente borrados sin modifico algún parámetro de la simulación a continuación vamos a trabajar con los parámetros del dominio seleccionamos por tanto El dominio localizamos sus parámetros de Smoke y ya que lo hemos activado como dominio vamos a configurar aquellos parámetros que tenemos dentro del grupo de parámetros Smoke para empezar resolución divisiones nos permite controlar la calidad del fluido bajando las divisiones tendremos menos calidad pero más velocidad de cálculo podemos comprobar como los grumos digamos de humo que aparecen aquí abajo son más grandes la animación se reproduce prácticamente en tiempo real pero la calidad es menor puede verse claramente aquí abajo por defecto en Blender partimos con el parámetro 32 el mínimo parámetro configurable es 24 si por ejemplo pongo 128 evidentemente se reinicia la simulación se pierde el cálculo anterior y si ahora pulso Play comprobaré como tengo un humo de más calidad pero que cuesta más de calcular voy a parar la simulación voy a poner subdivisiones a 64 para ver un término medio pongo entonces recuperado el parámetro 32 pongo el parámetro 64 sin llegar a 12 porque crece exponencialmente para comprobar como ya a 64 la calidad de las partículas es mucho mayor ya que como vemos ahí el radio de cada elemento de cálculo es mucho menor por tanto el objetivo es ponernos en un nivel de calidad intermedio vamos a segir a 32 que es la calidad por defecto para hacer las primeras previsualizaciones y ir aumentando cuando necesitamos hacer Ya el render final las partículas de humo suben crecen se mueven a la velocidad que el programa estima velocidad real sin embargo en tiempo lo que puedo hacer es aumentar o disminuir esa velocidad si aumento la velocidad de tiempo por ejemplo voy a subirlo a 1.5 la simulación se realizará más deprisa de lo que debería realizarse si lo pongo por ejemplo a 0.2 comprobaré como la simulación se realizará a cámara lenta es decir a ese humo le cuesta mucho más le cuesta cinco veces más subir No ya por sus parámetros de densidad o su diferencia de temperatura con el aire que ahora trabajaremos con los parámetros sino porque simplemente a grandes rasgos lo que estoy haciendo es izar la animación una cosa que habremos observado es que cuando el humo voy a devolver el tiempo a escala uno cuando el humo llega hasta arriba llega hasta el techo se pierde Y si fuera una caja cerrada Yo lo que esperaría ver es como el humo se difunde por los lados cuando el humo llega arriba se pierde porque en el siguiente parámetro hemos configurado que en Border collisions en colisiones con los bordes en este caso el único borde con el que colisiona es el borde superior la caja está vertically Open es decir verticalmente abierta le puedo decir si la caja está Open y estaría abierta por los seis lados verticale Open para estar solo abierta por la parte de arriba o si le digo colide all lo que conseguiré es que el humo cuando llegue a la parte de arriba vamos a ponerlo en ortográfico no sobresalga sino que se difunda por los laterales de la caja comprobamos como ahora ya no es capaz de salir como antes que escapaba hacia arriba voy a aumentar la escala de tiempo a 1.5 para que nos dé tiempo a ver más humo difundiéndose por la caja ahí como tengo el humo subiendo y cuando llega arriba se difunde no es capaz de salir lo que va a hacer por tanto es amontonarse a los lados de la caja de hecho si le doy más tiempo al cálculo por ejemplo en lugar de empezar en uno y acabar en 250 le digo que acabe en 1000 podré disfrutar mucho más del comportamiento de ese humo que cuando empezaba a hacer algo interesante pues se acababa la animación se acababan los 250 fotogr de tiempo lo divertido es ver como si he activado colide all el humo se va a ir acumulando arriba y cuando ya no quepa más humo no va a tener más remedio que bajar Por qué Porque no cabe más arriba en simulación ahora lo que haré es decirle dar de alta más de 250 fotogramas de animación continuamos trabajando con los parámetros correspondientes a El dominio dentro del dominio los parámetros de behavior los parámetros de eh comportamiento nos permiten definir Cómo se van a comportar los emisores de humo dentro de ese dominio y atención voy a poner una luz vamos a Añadir una luz para tener un poco de sombreado rebin pamos Play bien grabando y dentro de densidad lo que voy a hacer es eh comprobar Cuál es la diferencia de densidad entre el humo y el aire así que el al ponernos sobre el parámetro nos dice que valores más altos nos permiten hacer mayores velocidades Así que pongo parámetros más altos y comprobamos como el humo tarda mucho menos en subir hacia arriba ya que la diferencia de densidad con el aire ahora es mucho menor si pongo valores más altos todavía comprobaré como el humo tarda menos todavía en subir con valores más bajos evidentemente al humo le costará también cada vez más subir la diferencia de temperatura entre el humo también afecta a la capacidad de subir o de bajar del humo en este caso además puedo comprobar como si pongo una diferencia temperatura alta y positiva el humo subirá pero si pongo una diferencia de temperatura alta y negativa el humo bajará ya que el aire tendrá más temperatura que el humo comprobaré como si la diferencia de temperatura es baja e incluso negativa y reproduzco la simulación el humo tenderá más a bajar que a subir le doy a Play y compruebo como con una diferencia de temperatura alta y negativa el ambiente tiene más temperatura que el humo y por tanto el humo baja la vorticidad es la capacidad del humo de hacer rebolos de hacer turbulencias con una vorticidad de cero el humo sube directamente en este caso baja voy a poner la temperatura con el aire mayor y así el humo subirá como vemos el humo sube prácticamente recto haciendo poco remol con una vorticidad alta estaba a dos lo pongo a cuatro el humo sufrirá muchos remolinos muchas turbulencias Y eso le impedirá subir completamente recto compruebo como antes veía una columna Clara de humo subiendo hacia arriba ahora la vorticidad ahora las turbulencias afectan mucho al humo con el que estoy trabajando por defecto el humo no desaparece si quiero que el humo desaparezca lo que tengo que hacer es activar el parámetro dissolve disolver con un tiempo de disolución me dice la vida que tiene la partícula de humo en este caso dura muy poco porque tiene cco fotogramas de vida aumentando la cantidad de vida conseguiré que el humo viva más antes no se extinguía ahora se extingue con 60 fotogramas de vida compruebo como con 60 fotogramas de vida prácticamente desaparece no es capaz prácticamente de llegar arriba ya que desaparece antes sí ya hemos visto los parámetros de El dominio o por lo menos parámetros básicos vamos a ver ahora los parámetros del Flow del flujo el flujo nos permite trabajar con una densidad absoluta donde podemos especificar manualmente la densidad y la temperatura del humo donde cuanta más densidad tenga más le costará subir Así que aumento la densidad en este caso está al máximo disminuyo la densidad para hacer el humo más liviano y que tenga más facilidad para subir en El dominio voy a Desactivar dissolve vuelvo atrás pulso Play voy a activar como dominio y vuelvo atrás y pulso Play y veo ahí como con menor densidad El inflow sube más fácilmente en este caso además voy a desactivar las partículas que se han activado para El dominio estoy trabajando por tanto con Flow y compruebo como bajando la densidad digo es hacer que el humo suba más rápido todavía con diferencia de temperatura también conseguiré mayor diferencia en la subida en la velocidad de el humo cuanta más diferencia de temperatura haya más rápido subirá cuanto menos diferencia de temperatura haya menos rápido subirá incluso pudiendo conseguir bajar si es lo que hago ahora es bajar la diferencia de temperatura incluso llegando a parámetros negativos lo que consigo es que el humo caiga en el contenedor no es este parámetro de diferencia de temperatura duplicado que el del dominio no hace lo mismo el que tengo en El dominio la diferencia de temperatura es un multiplicador con respecto a la diferencia de temperatura que tengan los emisores de humo mientras que los emisores de humo tienen la emisión correcta cada uno de humo esto se produce ya que puedo tener varios emisores de humo voy a duplicar este emisor de humo puedo tener varios emisores de humo dentro de un Flow voy a seleccionar este y voy a activarlo como un Flow y comprobaré como ahora tengo varios emisores de humo con propiedades diferentes por ejemplo ahora el humo de este sube Mientras que el humo de este Baja porque cada uno está emitiendo humo con temperaturas diferentes y ahora por ejemplo este tiene una temperatura de una diferencia de temperatura de uno y este por ejemplo va a tener una diferencia de temperatura de cinco si rebobino y renderizo comprobaré como el efecto no es el mismo siendo la misma simulación es posible incluso asignar voy a eliminar este emisor es posible asignar una velocidad inicial al humo si seleccionamos el Flow encontraremos que en velocidad inicial puedo multiplicar la velocidad inicial del humo como máximo por dos y esto hará que si Elo sube suba con más fuerza si baja con más fuerza Si en lugar de subirlo de uno lo que hago es bajarlo de uno multiplicaré negativamente la velocidad hasta ahora hemos estado trabajando con cajas sin embargo no hay ningún problema en trabajar con objetos en cuanto a emisores de humo que no sean cajas Por ejemplo yo voy a crear un mono y voy a comprobar puedo emitir perfectamente humo a partir de esa geometría si coloco esta geometría aquí abajo y activo la caja como Smoke dominio y el objeto como Smoke Flow comprobaré como la emisión de humo se produce a partir de la geometría que ha generado el humo y por tanto puedo observar en cierta forma como el humo que sube hacia arriba tiene la forma original del objeto tiene en este caso la forma del objeto original cabeza de mono vamos a trabajar ahora con obstáculos los obstáculos nos permiten que el humo pueda llegar a colisionar voy a ponerme en vista wireframe voy a duplicar esta caja para generar un emisor de humo que de hecho va a ser un emisor de humo bastante largo vamos a escalarlo en Z y ahora voy a duplicar de nuevo esta caja para crear colisionadores voy a poner un colisionador Aquí voy a poner otro colisionador aquí lo que haré a continuación es activar una simulación de humo donde en físicas a la caja la definiré como dominio a esta caja de aquí abajo la definiré como Flow como flujo y a estas dos nuevas cajas que he creado las voy a definir como colisión además la colisión en humo de momento no tiene parámetros simplemente colisiona con el humo y ya está si ahora rebobino y pulso Play comprobaré como el humo empieza a subir pero no puede Vamos a darle más diferencia de temperatura comprobaremos como no es capaz no puede subir directamente sin colisionar con las cajas voy a especificar en esta caja en las partículas que no quiero emitir desde las caras sino que quiero emitir desde el volumen de la caja y voy a decirle que la diferencia de temperatura sea mayor le doy a Play cculo humo le está costando subir y por tanto lo que haré es trabajar mejor con los parámetros de diferencia de temperatura en este caso puedo comprobar ya como el humo en ningún momento está rebasando los obstáculos sino que los evita voy a darle más temperatura el Flow le doy más temperatura un multiplicador de velocidad y en cuanto al dominio multiplico también la diferencia de temperatura y multiplico también la densidad si ahora le doy a Play comprobaré como el humo sube más rápido Al subir más rápido colisiona con los colisionadores y se escapa por la única vía de escape que tenga disponible Así que los colisionadores me permiten o bien direccionar el humo o bien me permiten realizar efectos complejos tales como generar formas mediante colisionadores probablemente el máximo rendimiento con el humo lo sacamos cuando lo combinamos con partículas por tanto voy a crear una caja por ejemplo la caja que tengo por defecto Y antes si quiera de empezar a trabajar con humo voy a empezar a crear un emisor de partículas por tanto creo la caja me voy a sistemas de partículas el botón que hay justo antes de dinámicas y con el botón más añado un nuevo particle systems añado un nuevo sistema de partícula si ahora reinicio y le doy a Play comprobaré como la caja ya está emitiendo partículas parámetros que puedo controlar en estas partículas por ejemplo el Start y el end por defecto las partículas empiezan en uno y acaban en 200 puedo comprobar como en 200 se acaba se para la emisión de partículas amount es la cantidad de partículas emitidas Cuanto más partículas ponga más partículas aparecerán en pantalla pero evidentemente más le costará al programa de calcular en lifetime obtengo la vida de la partícula cuanto menor sea su vida más poco durarán en la pantalla cuanto mayor sea su vida más se alargará su duración Y por supuesto con Random puedo elegir un valor aleatorio para que no todas las partículas mueran al mismo tiempo puedo emitir desde los vértices desde las caras o del volumen en este caso emitir desde las caras tiene un efecto bastante notable Y es que emito desde las seis caras de un cubo puedo ver como una especie de seis trenzas saliendo de la geometría si emito desde los vértices pues Es evidente el efecto que hace si emito desde el volumen voy a emitir desde el volumen completo lo cual me da un resultado bastante más homogéneo que emitir desde las caras o desde los vértices En definitiva podemos omitir desde cualquier elemento que quera amos emitir muy importante me parece la velocidad indica la velocidad con la que emito las partículas por defecto emito con una velocidad de uno con respecto al vector normal de las caras el vector normal voy a poner en faces es el vector que sale a 90 gr de cada cara si pongo mayor velocidad normal como veo lo que hago es alejar a las partículas con más velocidad de las caras tangente es una fuerza tangente que es lo contrario de normal en lugar de salir a 90 gr s siguiendo a la superficie puedo darle fuerza de rotación a las partículas y lo más divertido puedo voy a volver a eso cero Puedo trabajar con una fuerza directamente controlada con vector x vector y vector Z si este es el vector x y le doy x positivo lo que haré es emitir partículas hacia el eje x negativo emitiré partículas hacia el lado contrario y voy a aumentar el tiempo hasta 250 y positivo y negativo Z positivo y z negativo así que lo que voy a hacer por tanto es trabajar con estas partículas y decirles que quiero poner una velocidad en x de 10 y tengo un chorro tengo una emisión de partículas que va hacia delante pero ahora quiero que estas partículas además no eh vayan hasta el infinito y más allá sino que colisionen por eso voy a crear un plano y compruebo de todas formas como las partículas por defecto no están colisionando con este plano Por qué Pues porque necesito desde físicas definir este plano como un objeto de colisión en cuanto defina a ese plano como objeto de colisión las partículas empezarán a colisionar con él además esa colisión tiene parámetros tales como el dumping o la fricción con las partículas que nos permiten conseguir que las partículas se queden quietas y no viajen como si el colisionador fuera de hielo lo que vemos ahí es que consigo parar completamente las partículas a darle un poco más de realismo voy a seleccionar otra vez el emisor de partículas y de vuelta a partículas voy a elegir un poco de Random voy a aumentar la aleatoriedad de las partículas de esa manera si no tengo aleatoriedad las partículas Salen todas en un chorro uniforme si aumento el parámetro Random tendré un chorro un poco más diversificado que siempre nos da evidentemente un efecto más real Por eso tengo ahí ya mis partículas y voy a crear un segundo plano duplicando el primero vemos como es bastante divertido trabajar con partículas y hago que las partículas al final reboten en ese suelo y en Esa pared convertir ahora este sistema de partículas en un emisor de humo va a ser una tarea realmente sencilla lo primero que voy a hacer es seleccionar el emisor de partículas Y en lugar de dejar el nombre por efecto particle System lo voy a cambiar a humo para asegurarme que más adelante es reconocido perfectamente ya sabemos que un emisor de partículas y por tanto un sistema de humo no puede existir sin un dominio por eso lo que voy a hacer es crear un cubo aumentar el tamaño del cubo y convertirlo en El dominio que contendrá a las partículas aumentaré su escala hasta que tenga la escala correcta para contener al sistema de partículas y a continuación lo que haré es lo siguiente seleccionaré vamos a verlo aquí seleccionaré en la caja exterior y en dinámicas activaré Smoke y dominio y en cuanto a la caja pequeña voy a activarla también como Smoke Flow donde en este caso no hace falta aplicar un sistema de partículas automático ya que se hereda y es importante comprobarlo el sistema de partículas humo y por tanto Ahora comprobaré como si Rem movino y ejecuto Play es ahora el sistema de partículas el que está emitiendo el humo en la escena y por tanto no es necesario crear un sistema de partículas automático cuando puedo crear uno manual y controlar mejor la cantidad de partículas y la característica de estas que se están emitiendo y ahora evidentemente puedo seguir controlando puedo seguir trabajando con los parámetros que ya conozco que son por ejemplo la densidad que son por ejemplo la diferencia de temperatura y que son estos parámetros que previamente hemos trabajado lo que acabo de hacer es bajar la densidad y bajar la diferencia de temperatura para que esa columna de humo no suba tanto o por ejemplo puedo en El dominio a aumentar activar el parámetro dissolve para que ese humo viva únicamente 16 fotogramas antes de disolverse un problema con el que nos encontramos cuando intentamos representar El ejercicio es que vamos a dejar el humo corriendo es que si ahora enfoco la cámara y pulso f12 pulso render no sale nada en la pantalla no sale nada en la pantalla porque que lo que estoy viendo es la caja del dominio sólida Aunque en el visor se vea bien se vea correctamente tengo que aplicar al dominio un material para que en el render también salga humo Cómo haremos este material lo haremos de la siguiente manera voy a entrar en material voy a aplicarle un material nuevo al dominio y le voy a decir que ese material sea un volumen no sea una superficie no sea un sólido sino que sea un volumen cuya densidad sea de Cero y ahora veremos como Aparentemente desaparece ya lo tengo casi pero ahora hace falta un poco más porque lo que estoy viendo Ahora son las partículas lo único que hace falta ahora es activar una textura una nueva textura de tipo boxel Data en boxel Data comprobaré cóm puedo activar el file format Smoke Pero eso sí definiendo Cuál es el dominio sobre el que voy a renderizar cuál es el dominio en este caso es cubo 001 Así que en dominio me aseguraré de elegir cubo 001 si ahora renderizo veré un poco mejor el humo en pantalla El único problema que tengo hasta ahora es que esto que estoy viendo aquí no es el humo sino las partículas por tanto es muy recomend vamos a ver es muy recomendable que seleccion las partículas y el menú de partículas desactive el parámetro de render en render voy a decirle sin render y en display voy a decir que quiero ver puntos de esa manera en el render no veré el Halo de las partículas sino que prepararé a las partículas para representar únicamente el humo vale para hacer que el cubo no se vea lo que haremos es seleccionarlo porque ahora mismo tenemos la sombra del cubo Aunque el objeto es invisible la sombra sigue saliendo y esto nos molesta por tanto lo que haremos es seleccionar el cubo y aquí bajo en opciones dentro del parámetro del material desactivar la opción trazable desactivando esa opción trazable ya no saldrá ni el cubo ni su sombra sino que podremos trabajar directamente con el humo que sale de la caja el humo que calculamos por defecto tiene bastante poca calidad Ya sabemos que siempre podríamos seleccionar en El dominio aumentar las divisiones y por tanto aumentar la calidad Pero esto también aumenta de manera dramática el tiempo de cálculo por tanto vamos a ver que existe un parámetro llamado Smoke High resolution que está dentro del dominio bajo de los parámetros de dominio donde este humo de alta resolución nos ayuda a simular no calcular sino simular un humo de alta resolución generado a partir del de baja resolución por tanto no tiene tanta calidad y tanto realismo como tendría el humo calculado con muchas divisiones pero no nos ayuda a simularlo si yo activo Smoke High resolution voy a cambiar las subdivisiones que por defecto aparecen de uno los voy a cambiar a tres y en método de ruido voy a cambiar a fft que para humo es algo más realista si ahora calculo si ahora le doy a Play observaré dos cosas observaré lo siguiente si le doy a Play observaré como el humo ahora es mucho más suave es mucho más detallado pero también observaré que el programa Va más lento porque está calculando fotograma a fotograma ese ruido fft esa distorsión del humo también me voy a fijar que aquí abajo a medida que va corriendo la barra aparece una línea de color gris oscuro esa línea de color gris oscuro quiere decir que el humo de alta resolución está siendo precalculo para que la siguiente vez que pare Y pase la animación vaya mucho más deprisa si ahora paro la animación y rebobino comprobaré como hasta el punto donde he precalculo el humo ahora va mucho más deprisa a alta calidad y en el punto en el que ya no he calculado ahí para y vuelve a ir lento por tanto este parámetro de humo de alta calidad me va a ayudar a asignando un poco de tiempo de render y en cierta manera vaqueando al disco duro pero me va a permitir obtener un humo de más calidad sin tener que recurrir a divisiones que aumentaría eso S muchísimo más el tiempo de cálculo voy hacer un ejercicio en Blender que me ayude a practicar con los sistemas de partículas aplicados a humo para eso parto desde una escena vacía voy a seleccionar todo dentro de la escena y voy a crear un nuevo texto desde ad Añadir texto para escribir un texto personalizado debo entrar en el modo de edición Así que entro en el modo edición tengo aquí un cursor y ahora puedo poner un texto lo más normal En estos casos suele ser poner empezar probando con el nombre de uno así que no me voy a salir de la costumbre y voy a poner mi nombre además voy a volver ahora a modo objeto además trabajando con texto comprobaremos como tenemos un menú extra representado por esta letra f que es el menú de texto donde puedo realizar operaciones tales como por ejemplo extrusiones por tanto voy a destruir el texto para ponerlo de frente a la pantalla voy a girar el texto para ponerlo horizontal y a continuación crearé una cámara Añadir cámara para que esta cámara enfoque frontalmente al texto ahora sí tengo la cámara enfocando frontalmente al texto E incluso lo que puedo hacer es hacer que esa cámara trabaje en modo ortográfico para que no haya perspectiva sino que enfoque de manera frontal a ese texto bien pues trabajando con humo lo que voy a hacer a continuación es que el texto no sea visible el texto no aparezca en pantalla y sea el humo Al subir el que colisione con el texto y lo revele por tanto voy a crear aquellos elementos que me hacen falta para trabajar con humo como son por supuesto un cubo que va a hacer de contenedor nos aseguramos que el texto esté correctamente contenido Incluso un truco que voy a hacer por si el texto pasa por delante al revés por si el humo pasa por delante del texto y no me deja finalmente ver el texto puedo hacer que el contenedor esté un poco más atrás del texto por tanto sé que esa zona de texto seguro que siempre la voy a ver y ahora puedo colocar bajo un una caja que emitirá partículas voy a duplicar para escalar para crear un emisor un Flow de humo que afecte al texto ahora que tengo los tres elementos lo que haré es seleccionar El dominio y en Smoke activarlo como dominio seleccionar el humo y activarlo como Flow y seleccionar el texto y activarlo como objeto de colisión El único problema es que al ser un texto ahora mismo no me permite trabajar con otra cosa más que campo de fuerzas por tanto tendré que convertirlo a un texto de geometría plana una manera fácil y rápida de conseguir que el texto sea reimport es atención exportarlo y volverlo a importar por tanto voy a exportar este objeto por ejemplo en el escritorio como texto punto obj y ahora lo vuelvo a importar tras lo cual comprobaré como tengo duplicadas también las cajas Pero no pasa nada porque las elimino y tengo ya el texto convertido a geometría elimino este texto o eh lo pongo en una capa aparte selecciono este texto que ya es de geometría pura es decir es un texto que he importado y exportado y ahora sí lo puedo activar como Smoke colisión porque aunque parece un texto visualmente para el programa ya no lo es una geometría ahora sí que tengo ya un flujo un dominio y un texto que me actúa de colisión y puedo por fin empezar a darle a y probar la simulación de humo recordamos que si tengo como podemos ver en la pantalla si tengo el humo de color negro es porque no tengo una luz por eso si lo que quiero es tener el texto sombreado tendré que activar una luz que ilumine que sombree correctamente el humo y veo ya como el humo en este caso está cubriendo está pasando de momento al alrededor y por detrás de el texto otra cosa que puedo hacer para asegurarme que la única vía de escape del humo sea a través del texto es escalar en y El dominio tal que el texto siempre sea mayor que El dominio escalo también el texto y así me aseguro que si ejecuto vamos a mover un poco la cámara si ejecuto la simulación el humo solo tendrá como vía de escape aquellos resquicios que le deja el texto por supuesto no voy a esperar una gran calidad en la simulación ya que tengo un humo de momento muy vasto y un colisionador de momento muy fino como es el texto por tanto Veo aquí los boxel bien grandes del humo y por tanto como me puedo imaginar veo cómo está rodeando al texto aunque evidentemente hay zonas por las que no va a poder pasar porque el tamaño ahora mismo de celda Es mayor que los huecos que le deja el texto pero En definitiva sí que estoy viendo ya como el humo pasa alrededor pasa a través del texto para calcular una simulación por tanto lo que voy a hacer es realizar las siguientes operaciones voy a bajar la densidad voy a aumentar la diferencia de temperatura y en cuanto al dominio escalo la velocidad y aumento también la diferencia de temperatura de esta manera lo que intento conseguir es que el humo suba lo más rápido posible como estamos viendo ahora en la pantalla el humo sigue siendo poco detallado por tanto sé que no se empezará a colar a través de las letras hasta que no rebaje la cantidad de subdivisiones otra cosa que voy a hacer es rebajar el humo en z hasta intentar alinearlo con la pantalla y decirle que no esté abierto por arriba sino que colisione para qué para que cuando el fuego para que cuando el humo llegue a la parte de arriba colisione con la parte de arriba y vuelva observo ahí como el humo empieza a colisionar empieza a subir y Cuando suba lo que debería pasar es que debería colapsar aunque ya es momento de empezar a subir por ejemplo I a 48 para intentar conseguir mayor calidad en la simulación por supuesto a Costa de la velocidad de cálculo si trabajo con el humo voy a aumentar la densidad y todo ello para que tenga más partículas con las que trabajar otra cosa que puedo hacer es entrar en las partículas y aumentar el número de partículas por defecto por eh Por defecto 1000 lo voy a subir a 10,000 ya que de esa manera teniendo más partículas tendré un humo más denso y podré compensar Esa pérdida de partículas Con la falta de densidad a medida que hacemos mayor calidad en el humo obtenemos como podemos comprobar mayor fidelidad en cuanto al humo que se cuela por dentro del texto pero llega un momento que todavía no tengo esa calidad que necesito y por tanto el humo no puede pasar más allá por lo que ahora lo que haré Y en este caso no me va a ayudar el High Quality todavía en este caso lo que haré sin remedio es aumentar todavía más voy a poner 64 y es un buen momento ya para grabar Vamos a darle el nombre de humo 3 es un buen momento ya para grabar porque a partir de 64 la complejidad del humo puede ser tal que empiece a ir realmente lento vemos ahora que Cuanto más aumento la calidad del humo mejor se empieza a colar por entre las letras ya es momento también de activar una luz por lo que voy a parar la simulación y voy a Añadir una luz como va a ser por ejemplo una luz de tipo Point activo la luz Dipo Point voy a colocarla más o menos por aquí y voy a reiniciar el cálculo del humo para reiniciarlo le doy un número diferente de partículas Y de esa manera Estaré forzando al programa a rehacer el cálculo del hubo si le doy Ah a renderizar comprobaré como ahora sí las partículas están sombreadas según la dirección de la luz que acabo de colocar Así que antes de activar veo ahí el humo subiendo alrededor de las letras más gruesas antes de activar High Quality voy a aumentar una vez más las divisiones por ejemplo a 84 para que antes de activar High Quality por lo menos obtenga el humo pasando a través de las letras por lo menos las más gruesas veo como High Quality es la mejor manera de aumentar la calidad del humo pero que también evidentemente hace que el render vaya el cálculo el visor vaya más lento sigo aumentando hasta obtener por tanto un compromiso entre calidad y rendimiento paro V veo claramente como la calidad del humo es mucho mejor Cuanto más subo las subdivisiones lo paso a 100 siempre que subo las subdivisiones guardo porque corro el riesgo de subir tanto las subdivisiones que el programa se me quede colgado y pierda los últimos cambios que haya he realizado compruebo en este caso como 100 subdivisiones ya empiezan a ralentizar sensiblemente el Play en el visor Si antes iba a prácticamente 24 fotogramas por segundo ahora estoy yendo a un fotograma por segundo Es decir de subirlo de 32 a 100 estoy yendo prácticamente 24 veces más lento a cambio observo como el humo se empieza a colar por zonas Donde antes no cabía si se ha colado entre la i y la c Pues bueno espero que sea capaz de colarse entre otras zonas como la J o la o zonas de igual dificultad si ya tengo el humo que se ha empezado a colar por entre esas letras ya puedo activar la opción de Smoke High resolution y rebobinar guardar y calcular voy a dejarlo unos minutos calculando para obtener el efecto final de esta animación al Pues los humos en Blender la simulación de humo se hace de una manera bastante parecida a la simulación de fluidos en primer lugar porque voy a esta caja me voy a ir a la pestaña de físicas la pestaña de dinámicas Y en lugar de convertir esta caja en un fluido si quisiera que se convirtiera en agua o en un cloth si quisiera que se convierta en una tela hoy lo que voy a hacer es hacer clic en el botón Smoke porque quiero que esa caja se aparte de una simulación de humo de hecho incluso me voy a poner en una vista lateral para verlo mejor porque el humo que voy a calcular va a ser un humo 3D pero la mejor manera de verlo al menos al principio es en una vista lo más gráfica posible y ahora además me voy a volver a la vista en wireframe vista alámbrica para eso voy a pulsar este botón y voy a cambiar a la vista en modo wireframe porque quiero duplicar esta caja y hacer una más pequeña dentro que sea la que emita uo porque esta caja va a ser un contenedor va a ser un dominio mientras que la caja pequeña que hay dentro va a ser un emisor de uo por eso para duplicar pulso mayúsculas d hago clic con el ratón y a continuación escalo con la letra s para crear una caja más pequeña dentro de anterior atención hay una caja más pe dentro de la caja grande y la caja grande se va convertir en un dominio la caja Peña se va a convertir en un emisor de humo vamos a hacerlo si ahora pulsamos Play comprobaremos como de momento nada pasa en la pantalla pero si yo ahora lo que hago es la caja grande y en Smoke la convierto en un dominio ya he habilitado esta caja para que contenga humo Pero de nada me sirve que contenga humo si luego realmente no hay nadie que esté lanzando humo a la simulación por tanto voy a esta caja más pequeña Y en lugar de convertirla en un dominio la voy a convertir en un Flow en un flujo de humo la convierto por tanto en un flujo de humo y por tanto ya tengo el sistema preparado para darle a Play pulsar la tecla Play y poder comprobar Cómo se ejecuta esta simulación lo primero que voy a ver dentro de la simulación de humo son dos cosas primero al activar un Flow automáticamente a la caja pequeña se le ha asignado un sistema de partículas llamado Smoke particles al cual no me voy ahora mismo a preocupar demasiado simplemente voy a saber que está ahí para luego poder tocarlo y la segunda cosa que voy a ver es que en cuanto pulso a Play la simulación comienza ejecutarse qué quiero decir con esto pues que no hace falta backear una simulación de humo sino únicamente tengo que darle a la tecla de Play ahora haciendo clic en cada uno de los objetos podemos comprobar Cómo dispondremos de varios parámetros que nos permitirán controlarlo ahora iré desgranando parámetro a parámetro de la simulación de humo pero de momento lo que voy a hacer es fijarme en que en Border collision si tengo el contenedor El dominio seleccionado en Border collisions tengo que la caja está vertically Open verticalmente abierta Eso quiere decir que cuando el humo llega arriba del todo en lugar de colisionar y expandirse por la caja mágicamente desaparece Pero si yo activo la opción de collide all Y por supuesto rebobino para que el programa rehaga La simulación comprobaré como el humo al llegar a la parte de arriba de la caja no escapa sino que va rebotando y va llenando la caja de humo funciona un poco si queremos al revés que los fluidos caen y rellenan la caja por bajo el humo sube y rellena la caja por arriba otro parámetro que voy a decir otro parámetro sobre el que voy a trabajar Es uno que está a la derecha de Border collisions que hemos dejado en collide all que es la diferencia de temperatura difference si la diferencia es positiva quiere decir que el humo está más caliente que el aire ya que estamos simulando que dentro del contenedor hay aire si el humo o el gas es más caliente lo que hace es subir si el humo es más frío lo que hará es bajar por tanto si estoy trabajando con la diferencia de temperatura valores positivos harán que el humo sea más caliente sin embargo si lo muevo hacia valores negativos y por supuesto rebobino para ver la diferencia comprobaré Entonces como en ese caso el humo no sube sino baja ya que el humo en ese frío el humo en ese caso está más frío que el aire que lo rodea antes de seguir trabajando con los parámetros que sobre todo tengo dentro de domain voy a devolver la diferencia de temperatura un valor positivo para que el humo suba hacia arriba y me interesa mucho ver un tipo de objeto que es colisión así que atención lo que voy a hacer es una nueva caja por tanto voy a ir a Añadir malla cubo voy a Añadir un nuevo cubo a la escena y lo que voy a hacer es darle forma a este cubo forma un poco de placa poco de plano y atención voy a hacer así voy a hacer así estoy colocando el cubo para que claramente se interponga en el camino del humo si yo coloco ese cubo en esa posición y rebobino podré comprobar como ahora mismo el humo está pasando completamente atención a través de ese objeto que he puesto en medio sin embargo atención Mirad todos a la pantalla sin embargo lo que voy a hacer es seleccionar ese objeto convertirlo en Smoke y convertirlo en el tercer tipo de objeto del cual dispongo que es colision lo que va a hacer es que el humo sea capaz de reconocer a ese objeto y pasar a través Perdón no pasar a través sino que colisionar con él y ahora atención rebobino pulso Play y cuando el humo encuentra ese objeto lo que hace es provisionar e intentar huir de él fijémonos como el humo intenta huir y se cuela por aquellos lugares por los que realmente se puede colar al trabajar de esta manera con el humo nos estamos dando cuenta de que el humo funciona de una manera muy parecida al agua en cuanto a que está basado en un sistema de cálculo por elementos y lo podemos comprobar por el gran escalonado que hace el humo al encontrarse con el obstáculo el humo por tanto funciona de una manera muy parecida a los fluidos en Blender y tiene por tanto un parámetro de calidad donde en ese parámetro de calidad podemos controlar el nivel de subdivisiones que afecta aumentando el nivel de subdivisiones a la calidad visual final pero también al tiempo necesario para calcular esa simulación de ubo por eso lo que voy a hacer es volver ahora a el contenedor al dominio y me voy a fijar que el primer parámetro que aparece es el parámetro de divisiones el parámetro de divisiones que por defecto está puesto 32 me permite medir la calidad del humo de esta manera si yo lo que hago atención es bajar ese parámetro de 32 a 16 observaré que al ejecutar la simulación irá más deprisa pero tendrá menos calidad puedo ver como los cuadros las divisiones la escalera es bastante más grande si yo cambio estaba 32 lo he bajado a 16 me dice que 24 es el mínimo si yo lo subo a 64 he multiplicado por 2 32 debemos tener en cuenta que la calidad no va a duplicarse sino que va a aumentar exponencialmente o va geométricamente y veremos ahora como al programa le cuesta bastante más realizar esa simulación veremos como la velocidad de cálculo es bastante menor que antes por tanto yo siempre recomiendo lo mismo que es hacer previsualizaciones a Baja calidad y sacar el render final a alta calidad eso sí también estaremos observando que el tamaño de los cuadros es mucho menor y por tanto la calidad visual mucho mayor que calculando a menor resolución cuando queremos que la simulación se quede permanentemente grabada en el disco duro lo que hacemos Es recurrir a este grupo de parámetros que encontramos en El dominio llamado Smoke cach por defecto aparecen desactivados sin embargo hay un cartel que me está diciendo aquí abajo que la cach está desactivada está deshabilitada hasta que el archivo se guarde por tanto lo que voy a hacer es ir a file save as me voy a ir al escritorio y voy a guardar esto como humo lo guardo como humo Es más voy a hacer una carpeta llamada umo donde guardaré ese archivo aquí en humo y ahora sí tengo el Smoke H me permite guardar ese humo es más lo puedo guardar dentro de un file name es decir en un nombre de archivo concreto voy a guardar SIM umo v1 y podremos comprobar aquí atención como aquí ya aparece que esta simulación se va a guardar dentro de un archivo llamado SIM humo v1 podemos guardar la simulación de humo usando una compresión ligera Light o usando una compresión heavy la diferencia es que la compresión light lo que va a hacer es ocupar poco procesador pero no comprimir demasiado el archivo de humo al final ocupará bastante y lo digo suelo ocupar bastante en disco duro sin embargo la compresión heavy requiere bastante procesador pero lo que hace es al final guardar un archivo mejor comprimido más pequeño en el disco duro como en este caso para este caso estoy grabando Este ejemplo con un quadcore con un procesador de cuatro n núcleos lo que voy a hacer es activar la opción heavy la opción de que use bastante procesador para guardar Ya que en principio Tengo suficiente procesador como para poder por un lado calcular humo y por otro lado comprimir el cacheado por tanto lo que haré ahora será pulsar el botón Bake elijo En qué fotograma voy a empezar elijo En qué fotograma voy a acabar en este caso voy a acabar en el 250 podría acabar más tarde si mi simulación fuera más larga y lo que haré ahora será pulsar el botón Bake para que el programa empiece a calcular empiece a guardar esa simulación guardar una simulación puede tardar bastante puede durar bastante sin embargo cuando acabe el cálculo tenemos eh asegurada esa simulación lo que también puedo hacer voy a cancelar lo que también puedo hacer es bajar las divisiones por lo menos para realizar una primera eh un primer cálculo pero atención fijaos lo que me ha pasado Y es que al parar la simulación me dice que ya no puedo tocar Las subdivisiones por qué porque aunque lo he cancelado había calculado un fotograma Por eso siempre que quiera volver a editar parámetros tendré que pulsar el botón free Bake es elimina esa cach free Bake bajo a 32 guardo por si acaso me coloco en el primer fotograma y ahora sí pulso el botón b y espero a que el programa acabe de calcular otra cosa que voy a decir antes de ponerme a calcular voy a pulsar escape otra vez Es que puedo activar el Smoke High resolution el Smoke High resolution lo que hace es aumentar la resolución Además del parámetro divisiones ahora de momento para este primer cálculo no lo voy a activar para más adelante activaré y veré el efecto de Smoke High resolution Así que ahora sí voy a realizar un primer cálculo y vemos como estoy calculando a 32 subdivisiones estoy calculando con compresión alta no he activado de momento Smoke High resolution y lo que voy a hacer es esperar a que finalice esta este cálculo de humo cacheado al disco duro usar la cach implica que el programa Va a crear una carpeta que está situada a continuación del archivo que hemos guardado por eso es obligatorio guardar archivo que se va a llamar Blend caché humo si el archivo se llama humo la carpeta se llama Blend cachet humo y dentro de esa carpeta vamos a poder encontrar que por cada fotograma que se ha calculado el programa genera un archivo que ahora mismo está ocupando cerca del Mega cerca de 1 mega por cada uno de los fotogramas Así que si al final después de 250 fotogramas sacamos el cálculo de cómo degr es esa carpeta no nos damos cuenta de que ocupa 200 megas 200 meg solo por calcular 250 fotogramas Y eso que está con mucha compresión por eso es importante lo de activar la compresión o por lo menos tener cuidado porque si no puede llegar un momento que nuestro disco duro se puede llenar de archivos temporales la ventaja Eso sí es que una vez que ha acabado ese cálculo de Smoke cach veo que aquí abajo ya no hay una barra azul como había antes sino que hay una barra gris y si ahora muevo el tiempo veré como el humo está calculado y veré que da igual las veces que lo ejecute porque siempre va a hacer el mismo dibujo por eso esto no está mal ya que nos permite trabajar a nuestro albedrío nos permite trabajar sin cachear y ya nos apañar demos con lo que salga en el render cada vez puede salir una cosa diferente modo sorpresa si queréis llamarlo así o bien cachear y saber que como esté calcul siempre va a salir así a partir de aquí a partir de Aquí vamos a aprovechar para hablar de Smoke High resolution lo primero que estoy viendo Es que eh puedo comprobar como los parámetros han quedado bloqueados ya que si la cach está creada La cach refleja estos parámetros si yo quiero tocar los parámetros lo que tendré que hacer es eh free Bake es liberar el vaqueo liberar la caché lo que quiere decir borrarla cach por tanto voy a hacer un free Bake vemos por tanto como la simulación se queda ahí guardada de momento pero en cuanto toque un solo parámetro ya ha desaparecido evidentemente bien lo que voy a hacer ahora es activar Smoke High resolution me permite vamos a bien Smoke High resolution me permite aumentar muchísimo la calidad de ese humo esa calidad se va a ver reflejada en la cantidad de y en el detalle interno de ese humo Pero cuidado Smoke High resolution lo que va a hacer es que los cálculos van a tardar bastante más en realizarse voy a volver a cachear y mientras cacheo observaremos por supuesto también como el tiempo para cachear va a aumentar es decir el rendimiento va a bajar observaré por tanto como decía como tengo smok resolution sube la calidad del humo pero también tenía arriba parámetros subdivisiones que también sube la calidad del humo Cuál es la diferencia entre uno y el otro aumentar las subdivisiones lo que hace es aumentar realmente la calidad disminuir el tamaño de las celdas y por tanto hacer un cálculo de mayor precisión Smoke High resolution lo que hace es trabajando con las celdas que esté trabajando interpola internamente dentro de esas celdas por tanto Smoke resolution lo que hace es intentar su subir la calidad pero sin realmente realizar más cálculos sin hacer celdas más pequeñitas como yo siempre digo lo que tenemos que hacer es Buscar un balance entre uno y otro de nada sirve que pongamos Smoke High resolution si luego tenemos una calidad muy baja en subdivisiones y por otra parte subir mucho las subdivisiones hará que el cálculo tarde mucho pero no nos dará tanta calidad si lo aumentamos y lo complementamos con Smoke High resolution por tanto mi consejo en esto y en todo siempre suele ser equilibrio no te pases de uno y no pongas Nada del otro sino que ves subiendo los dos a la vez ahora de momento lo que hecho es aumentar poner el Smoke High resolution ahora que tenemos fresco en la mente el resultado de del cálculo anterior para ver cuál es la diferencia con respecto al cálculo anterior ya tengo el humo calculado tengo la simulación cacheada puedo comprobar como vuelve a aparecer la línea de color gris oscuro en la parte de abajo y lo que he hecho ahora es calcular a 32 subdivisiones con Smoke High resolution Y con el caché de humo y fijaos como el humo parece que tenga más detalle que antes no sé si recordaréis el vídeo anterior pero si no os recordáis siempre podéis ver el vídeo anterior y veréis que parece que tenga más detalle pero sin embargo algo al colisionar con el colisionador con el obstáculo veréis que los obstáculos son igual de grandes que antes pero sin embargo también si os fijáis en esta parte de aquí al lado parece que el humo tenga más detalle de lo que tenía en la primera simulación si os fijáis en el tamaño de estas piquit de aquí parece que tenga más claridad por tanto esto es lo que hace Smoke High resolution lo que hace es no realmente subdividir el humo sino dentro de las subdivisiones que haya interpolar esa calidad para que parezca que hay más calidad veréis por tanto voy a darle a Play veréis por tanto como activando Smoke High resolution no tardamos mucho más tardamos un poco más pero no mucho más pero parece que haya más calidad de la que realmente hay por tanto ahora lo que voy a hacer en el siguiente cálculo es aumentar las dos cosas Si he aumentado Smoke High resolution voy a aumentar también las subdivisiones Así que para ello lo que haré es parar voy a hacer clic sobre free Bake voy a liberar el vaqueo y ahora Subiré las divisiones a 64 subiendo las divisiones a 64 y activando Smoke High resolution voy a poner subdivisiones 2s para que tenga más calidad Todavía ahora de nuevo pulsar el botón Bake tras lo cual tendré que esperar ahora sí unos pocos minutos para que la simulación quede completamente realizada a continuación Voy a aplicar un material porque el cubo por defecto tiene un material plano tal que aunque en el visor parezca que va a salir correctamente si yo renderizo sale una caja sólida si yo le pongo un material básico también seguirá saliendo una caja sólida por eso lo que hay que para en lugar de ser una caja salga el material es lo siguiente paso número uno le digo que el material de la caja y por tanto el material del humo no va ser un material de superficie no va ser un material sido sino que va ser un material volumétrico de volumen a par de ahí una vez que he cambiado de surface a volumen estoy en el botón del material el de la bola estos dos parámetros que tengo aquí abajo los voy a cambiar densidad está un este está densidad está al máximo este está al mínimo pues densidad lo voy a bajar y escala de la densidad lo voy a subir por ejemplo a 10 por tanto en densidad he puesto cer y en escala de densidad he puesto 10 aún así lo que he hecho es que segua sin salir pero por lo menos esa caja ya no aparece porque si no es que la caja sale como material y ahora lo que haré por último si ya tengo el material configurado es ir a la textura que es el botón de al lado añado una nueva textura y le digo que es boxel Data es datos voxelizer que hay aquí dentro es un boxel Data domain object es de tipo Smoke por supuesto domain Data es el cubo ya empieza a aparecer Y por último quiero que afecte a la densidad y a la misión tras hacer esos Pasos Por fin tendré ya humo aunque sea de color rosa humo dentro de la pantalla lo que estoy haciendo por tanto es darle a ese objeto un material de humo primero creando un material transparente no sé si os fijáis pero aquí al fondo aparece como un pequeño humito Así que le pongo un material transparente con abo y escala de densidad alto he puesto 10 voy a probar ahora 100 vemos como va cambiando atención esto era 10 y esto es 100 lo que hago por tanto es 50 es ir probando con diferentes parámetros de densidad de material y luego lo que realmente lo gobierna es la textura es la que hace que aquí lo cambia boxel Data datos de los boxes para decirle que este tipo Smoke tipo humo el objeto que proyecta el humo y que afecta los canales de densidad y de emisión y gracias a eso como podemos ver ya sale humo en la pantalla vamos a ver la Cómo funciona la dinámica del sólido rígido dentro de Blender tiene una manera un poco especial de funcionar ya que la hacemos funcionar a través del motor de videojuego que lleva incorporado Blender sin embargo Aunque lo vamos a hacer funcionar a partir del motor de videojuego veremos como más adelante esa colisión a tiempo real se puede volcar al motor de render interno o a cycles o a cualquier otro motor de render que lleve Blender por eso lo primero que voy a hacer Aunque parezca extraño es cambiar el motor de render en la parte superior de Blender y no voy a elegir ni Blender render ni voy a elegir cycle render sino que voy a elegir el motor de render llamado Blender game es el motor de render que hay dentro de Blender por tanto podré comprobar como al arrancar el motor de videojuego al arrancar el game engine algunos parámetros cambian algunos desaparecen otros cambian y otros aparecen nuevos por tanto Veo que evidentemente ya no puedo renderizar Donde antes ponía render imagen o animación ahora pone game Start puedo arrancar Puedo comenzar el videojuego de hecho compruebo como le doy a Start y arranca un videojuego en la pantalla pero todavía no hemos configurado nada que funcione siempre que estemos dentro del modo videojuego y queramos salir simplemente pulsamos escape y volvemos a la interfaz principal por eso primer paso lo que hacemos Es activar Blender game dentro de la lista de motores de render por tanto lo que vamos a hacer ahora es convertir el objeto que tenemos por defecto en la pantalla que es una caja en un objeto Dinámico en un objeto que va a tener comportamiento que va a reconocer la colisión con otros objetos puedo comprobar como si entro dentro del videojuego esta caja está completamente inerte porque todavía no tiene ningún comportamiento Dinámico Por cierto decir que la tecla rápida que hace que comience el juego que sustituye el botón Start es la letra p de Play pensad en play the game jugar al juego y pulsé la ap y entráis directamente al modo juego y ya sabéis que siempre con escape conseguimos salir ahora con la caja seleccionada lo que voy a hacer es hacer clic en este botón en el último botón de el set de parámetros si no vemos porque puede ser que si la pantalla es pequeña el botón haya quedado escondido por la parte de la derecha Pero no pasa nada porque ya sabemos que hacemos clic y arrastramos en la separación de las dos ventanas y vamos a conseguir ver la botonera entera Ya que una de las grandes ventajas precisamente que tiene Blender Es que su interfaz es completamente redimensionable por tanto voy a hacer clic dentro de partículas y lo que voy a hacer es convertir este objeto de estático a Dinámico veo por tanto dentro de physics como este objeto en physics type en tipo de físicas es estático un objeto estático no se mueve en cualquier escena nos va a interesar tener objetos estáticos Por ejemplo si hacemos un derrumbamiento de un edificio el suelo tiene que ser estático Así que voy a cambiar este objeto de estático a rigid Body un objeto Dinámico puede cambiar pero un objeto rígido va a colis sin perder su forma por tanto para hacer dinámica del sólido rígido vamos a apoyarnos evidentemente en el tipo de objetos llamado cuerpo rígido y veremos como por supuesto al activar Este cuerpo rígido se van a activar otras otros parámetros tales como por ejemplo sus atributos la masa el radio y el factor de deformación lo que haré ahora para comprobar si esto ha producido algún efecto en la pantalla es pulsar Play y comprobar có la caja desaparece por bajo voy a volver a repetir pulso Play compruebo como la caja cae hasta abajo y cae hasta abajo hasta el infinito porque no hay un suelo que la detenga ya sabemos que siempre que queremos salir lo que hacemos Es pulsar escape salimos del motor de videojuego y volvemos al Estado inicial en el que hemos empezado a trabajar por tanto para evitar que la caja caiga hasta el infinito y más allá voy a poner un objeto colisionador lo primero que voy a ver y esto realmente nos conviene es que los objetos cuando los creamos por defecto se convierten en estáticos por tanto son objetos colisionadores o objetos que van a recibir la colisión de otros objetos en este caso para que la callega no la caja no caiga hasta abajo del todo voy a crear un simple plano o una caja muy pequeña para situarla en el suelo por tanto lo que voy a hacer es Añadir un plano desde ad Añadir nueva geometría voy a ir a mesh malla y voy a Añadir un plano que es la primera forma con la que voy a crear como os digo este plano que va a recibir la colisión el plano por defecto que nace con Blender puede pasar desapercibido atención a la pantalla porque tiene la misma dimensión que la caja atención voy a hacer click y ha aparecido un plano de la misma dimensión que la caja ha aparecido ahí abajo en el suelo lo que voy a hacer ahora es escalarlo entonces para escalarlo recordamos que con el ratón más o menos por aquí no quiero el ratón ni muy pegado al centro ni muy lejano más o menos a una distancia media voy a pulsar la letra s de scale de escalar y ahora sin hacer clic voy a arrastrar el ratón para estirar el plano cuando esté contento con la escala lo que haré es hacer clic para finalizar la escala y si aú así no estoy contento podré repetir la operación de escala hasta que la el plano tenga el tamaño que yo quiero a la vez recordamos que estamos en una vista predeterminada y que si en cualquier momento quiero alejarme o acercarme de la vista una tecla rápida es rodar la rueda del Ratón para conseguir hacer un zoom Por tanto así podemos estirar más como vemos el plano que es el que va a recibir el impacto por tanto como he dicho cuando creamos un objeto en este caso un plano si no le hemos dicho nada por defecto se convierte en objeto estático lo cual nos conviene porque así la caja va a colisionar va a caer contra el suelo vamos a comprobarlo vamos a pulsar Play y comprobaremos como la caja ha caído encima del plano En este caso además lo que voy a hacer es lo siguiente estoy orbitando la vista y para orbitar la vista lo que estoy haciendo es pulsar con el botón central y mover para ser capaz de ver mejor cuando colisiona y cuando no bien pues lo que voy a hacer porque tengo una caja cayendo plana y có cae una caja plana es bastante aburrido porque vemos que no es prácticamente espectacular lo que voy a hacer es girar la caja para que caiga de canto y vea mejor có va rebotando en los diferentes cantos de la caja lo primero que voy a hacer por tanto es hacer clic con el botón derecho en la caja para seleccionarla y puedo rotar de dos maneras o bien pulso la letra r es de rotate me sirve para rotar o bien atención puedo pulsar este botón de aquí abajo que es el manipulador de rotar objetos por tanto de cualquiera de los de las dos maneras lo que voy a hacer es conseguir hacer que cuando la caja caiga no caiga plana cuidado esto es peligroso porque ahora mismo al rotar la caja una Arista se me ha metido dentro del suelo y eso no me conviene Así que usando el manipulador de mover que es esa flecha que hay ahí bajo lo que voy a hacer es subir la caja un poco más en Z para asegurarme que realmente va a caer desde una cierta altura y una vez que he hecho esto lo que haré simplemente es hacer Play y comprobar como la caja ha ido a caer de canto Pero de alguna manera no ha caído correctamente sigue cayendo plana y un vértice se ha metido dentro del suelo por tanto lo que vamos a hacer a continuación es cambiar Por una parte rigid bar a dynamic bar y por otra parte cambiar a collision bouns para informarle al programa Cómo debe tratar la geometría de ese objeto Así que hemos comprobado como si pulso Play de alguna manera el programa todavía no está reconociendo correctamente el volumen de colisión de este objeto que estoy lanzando que en este caso es la caja comprobamos como pulso una vez más Play y comprobamos como el vértice se hunde dentro del suelo en este caso lo que tenemos que hacer y este caso nos va a pasar prácticamente siempre que estemos trabajando con Blender e lo que vamos a tener que hacer es definir mejor los límites de la colisión los límites de la colisión los tenemos en este grupo de parámetros llamados cision bouns dentro de colision bounce por tanto vamos a poder informarle mejor al programa de cómo tratar esa geometría creo que no hay que decir que si estoy trabajando con una caja el mejor límite con el que voy a trabajar es precisamente el límite llamado Box caja vamos a comprobar lo que pasa lo que hago es pulsar Play y comprobar como ahora sí se produce una colisión de mucha mayor calidad entre los vértices de la caja y los vértices del plano voy a comentar brevemente el resto de opciones donde veremos que tenemos esfera Si trabajamos con esfera cilindros conos tenemos algunas primitivas y sobre todo tenemos malla triangular caja lo que va a hacer caja esfera o cualquiera de estos lo que va a hacer es el objeto y encapsular dentro de una caja mientras que Triangle mes lo que va a hacer es no encapsular un objeto dentro de una caja sino calcular vértice a vértice la colisión de ese objeto la cuestión es que si yo encapsulo un objeto dentro de una caja estoy simplificando su colisión si simplifico su colisión el programa calculará esa colisión mucho más rápido si uso Triangle mesh estoy haciendo una colisión de mucha más calidad Pero en cuanto tenga muchos objetos que calcular el programa puede ralentizarse y puede gastar mucha memoria es por esto que en este caso particular dado que estoy trabajando con una caja en ningún caso me voy a plantear usar cualquier otro colisionador que no sea Box repetimos una última vez y a continuación vamos a complicar un poco más este ejercicio lo que voy a hacer por tanto ahora es Probar con un objeto que no es tan sencillo como una caja voy a probar un objeto cóncavo y en Blender hay un objeto cóncavo muy sencillo que es una cabeza de mono la podemos encontrar dentro de add dentro de Añadir dentro de malla mesh voy a Añadir este objeto que tengo por aquí llamado monkey mono lo que hago por tanto atención es hacer click dentro de Monkey y aparece esta cabeza de mono vamos a ver cómo colisiona este objeto vamos a ver cómo colisiona Comparado con la caja es un objeto por defecto estático por tanto si yo hago click evidentemente todavía no va a caer lo voy a convertir en un objeto rígido en un objeto eh rígido un cuerpo rígido por tanto hago clic observo como que mientras la caja tiene una malla discontinua que se adapta a la caja el mono tiene una especie de círculo que lo engloba voy a darle a Play y voy a comprobar que la colisión de ese sólido rígido es de muy baja calidad es de hecho muy irreal para arreglar esto lo que puedo hacer en este caso es cambiar colision bounce no Ya por caja fijaos que caja lo que está haciendo es simplificar el modelo de Colón a una caja le doy a Play y puedo comprobar como al colisionar es como si quisiera ser una caja pero no lo es por tanto en objetos cóncavos y la cara de mono es un objeto cóncavo puedo elegir entre Triangle mesh y con h si yo elijo Triangle mes lo que estoy haciendo es calcular vértice a vértice los vértices de ese objeto cóncavo y cuesta bastante de calcular le doy a Play y puedo comprobar como la colisión es completamente realista Aunque al programa le ha costado un poco de calcular otra solución es usar convex Hol lo que hace es hacer que el objeto se convierta en una malla cóncava si noos fijamos cuando ha caído la barbilla del mono se ha visto un defecto en la col ahí parece que hay un vértice escondido esto es porque aunque el objeto parezca cóncavo el programa internamente lo simplifica a una malla convexa donde las mallas convexas son mucho más fáciles y mucho más rápidas de calcular que las mallas cóncavas explicado esto diré Cuándo usar mallas convexas Cuándo usar mallas cóncavas cuando la concavidad del objeto sea importante realmente para la colisión recomiendo poner Triangle mes pero cuando la concavidad del objeto no sea relevante sea muy ligera lo que haré es poner convex hul Porque esa pequeña concavidad estará complicando mucho los cálculos e igual no vale la pena voy a continuar por tanto eh complicando la situación añadiendo muchos objetos colisionadores voy a eliminar esta cabeza de mono voy a quedarme con la caja voy a hacer un par de pruebas con la caja y lo que voy a hacer con esta caja es duplicarla recordamos que la tecla para duplicar es mayúsculas d hay dos maneras de duplicar Realmente si pulsamos mayúsculas d estamos haciendo una copia independiente quiere decir que luego lo que le pase a una no le pasa a las demás si pulso alt y d estoy haciendo una copia dependiente una copia de pendiente quiere decir que luego lo que le pase a una le pasa a todas las demás Por tanto lo que voy a decir y esto es un poco incontrolable es que lo ideal es trabajar con un bloque de construcción asegurarnos que ese bloque de construcción Está correcto Y entonces empezar a duplicar el resto de bloques de construcción Porque si cuando ya hemos duplicado muchos nos damos cuenta de que estaban mal no vamos a ir cambiando uno a uno tendríamos que eliminarlos cambiar el primero y volver a duplicar digo esto porque las colexion rígidas no suelen ser simulaciones de uno dos o tres objetos sino que al final pueden incluir a varios miles de ellos y no vamos a cambiar manualmente varios miles de objetos para este ejemplo lo que voy a hacer es pulsar alt y la letra d para duplicar con relación atención alt d me llevo este objeto hacia arriba y voy a crear un par de copias más para ver cómo colisionan los objetos entre sí he creado en este caso cuatro cajas y observamos como debido a que la primera caja tenía ya las propiedades de física cuerpo rígido y colisión de caja no necesito volver a definir estas propiedades en los objetos copiados porque están heredando esas propiedades con respecto al objeto original lo que voy a hacer ahora por tanto atención es pulsar Play y comprobar cómo colisionan los objetos entre sí Y cómo por tanto automatizamos muchísimo la simulación de colisión entre varios objetos voy a complicar más la cosa todavía para comprobar como al aumentar bastante el número de parámetros y el número de objetos la velocidad del sistema no decae muy deprisa sino que lo aguanta bastante bien pero claro tengo que ahora duplicar caja a caja no voy a seleccionar estas cuatro cajas y las voy a duplicar a la vez recordamos que para seleccionar varias cajas hay que hacer clic con mayúsculas pulsado Porque si yo cojo de caja a caja si yo cojo una caja pierdo las anteriores pero si yo hago clic con el botón mayúsculas pulsado hago clic con el botón derecho y con el botón mayúscula expulsado lo que hago es seleccionar varios objetos a la vez por tanto con esos objetos seleccionados atención voy a pulsar otra vez al d y al D en este caso estoy duplicando de cuatro en cuatro objetos en un momento ya tengo unas cuantas cajas en pantalla de hecho Tengo tantas cajas atención Mirad que si le doy a Play como comparativamente el plano es más pequeño casi que se van a caer la mayoría de ellas por el borde pero si queremos que no se caigan simplemente seleccionamos el plano con el botón derecho del Ratón pulsamos la tecla s y estiramos un poco para hacer el plano más grande y así conseguiremos atención que las C no se caiga observamos por tanto como las cajas caen correctamente y la velocidad del sistema apenas se ha inmutado a continuación lo que voy a hacer antes de complicar todavía más la escena porque la podemos complicar bastante más y el programa sigue rindiendo bastante bien es que quiero que vayamos todos al botón de render al botón de representación y dentro de display en el último grupo de parámetros que probablemente nos resulte nuevo porque no está en el motor de render solo aparece cuando hemos puesto el game engine y voy a activar tanto theb properties como frame rate and profile haciendo esto Esta herramienta nos viene muy bien porque de esta manera al pulsar Play aquí arriba en la parte superior izquierda del visor aparece los fotogramas por segundo a los que estamos ejecutando que es 60 porque 60 ahora mismo es el límite y sobre todo a mí Lo que más me importa es el porcentaje de procesador que está siendo usado por cada una de las partes de Blender cuánto usan las luces cuánto usan las físicas cuánto usan los polígonos y así en este caso me está diciendo el programa que las físicas lo podemos ver en la segunda línea ocupan el 0,7 por de procesador O sea que tenemos Potencia de procesado en principio suficiente como para calcular escenas más complejas y vamos a comprobarlo estoy trabajando con unas pocas cajas y funcionan 60 fotogramas por segundo atención tengo que ahora seleccionar todos estos objetos mediante la selección uno a uno no recordamos que la tecla a sirve para no seleccionar nada la tecla a sirve para seleccionar todo y no seleccionar nada a la vez y luego la letra b atención cuando tengo el visor puesto de una manera que me convenga Como por ejemplo ahora la letra b lo que hace es permitirme crear un grupo de selección rectangular y de esa manera voy a seleccionar múltiples elementos con una sola operación y ahora que tengo todas estas cajas seleccionadas atención voy a hacer lo siguiente voy a pulsar al D para copiar varios grupos de cajas y voy a lanzar de nuevo atención voy a pulsar varias veces la B para capturar a todos los objetos Mirad pulso al d y he creado un montón de cajas parece que el sistema no vaya a aguantar este cálculo pero si os fijáis si pulso la letra Play atención comprobaré como el sistema prácticamente ni se inmuta comprobaré como los fotogramas por segundo siguen a 60 y como ahora las físicas ya no son 0,7 son el 11 por. pero caray con respecto a la gran cantidad de objetos que tenemos fijaos que funciona en tiempo real y solo estamos usando un 13 por o un 12 por de procesador por tanto lo que os voy a decir es que este sistema de físicas nos va a permitir realizar cálculos realmente complejos sin que nuestro ordenador sufra demasiado por ello nos habremos fijado que al ejecutar una animación con el Play con la letra p los fotogramas por segundo van siempre prácticamente al 60 esto es porque si vamos a la bola del mundo al icono de la bola del mundo que es el tercero y llegamos hasta físicas physics encontraremos un parámetro fps que es los fotogramas por segundo a los que va a intentar llegar el programa si yo cambio ese parámetro fps de 60 por ejemplo a 25 y vuelvo a ejecutar el juego con la letra Play comprobaré como ahora por una parte funciona 25 fotogramas por segundo Pero por otra parte si nos hemos fijado el movimiento en pantalla es bastante menos fluido que cuando iba a 60 fotogramas por segundo puedo dramatizar lo más si pongo cinco fotogramas por segundo y vuelvo a ejecutar compro haremos como ahora la animación va a golpes por eso lo que hacemos en este caso es aumentar los fotogramas por segundo Por una parte para hacer la animación más fluida pero por otra parte atención a la pantalla también debemos tener en cuenta que Cuantos más fotogramas por segundo pongamos más lento irá el programa porque más le costará de calcular Así que lo que vamos a hacer en todo caso hasta un máximo de 60 fotogramas por segundo es configurar el fps probamos como si ponemos 120 sigue poniendo 60 pero configuramos los fotogramas por segundo en base a este criterio de fluidez fijémonos lo he puesto a 15 y a 15 la animación va mínimamente fluida Pero si nos fijamos en las cajas como caen veremos como van un poco a golpes mientras que si ponemos 60 van mucho más fluidas por qué no más de 60 bueno el ojo humano apenas puede diferenciar más de 40 o 50 fotogramas por segundo Por tanto para qué poner más de 60 ese extra de calidad realmente no se va a notar voy a hacer un ejercicio clásico de ribo con colisión rígida con physics y para ello voy a una caja la voy a escalar de tal manera que parezca una pequeña plaquita de madera por eso la voy a escalar en x la voy a escalar también un poco en z hasta que parezca algo como una ficha de Domino ahora lo que voy a hacer es crear un plano y con ese plano construir el suelo el plano será estático pero la ficha de Domino evidentemente la voy a convertir en un sólido rígido usando primero Blender game salto pongo coloco el motor de videojuego de Blender y solo en ese momento fijaos como se activan los parámetros de rigid Body y esto lo configuro como un rigid Body y en colision bounce le digo que es una caja vamos a comprobar cómo sale le doy a Play y compruebo como cae correctamente y colisiona correctamente como una caja Bueno pues un ejercicio bastante divertido que yo suelo hacer consiste en ir duplicando voy a ir duplicando con alt d esta caja para hacer lo siguiente atención alt d y hago clic para dejarla en el mismo sitio y ahora con la x lo muevo para separarlo un poco vamos a ver qué aspecto tiene esto le doy a Play y veo como las dos cajas caen incluso una parece que se ha balanceado un poco por la colisión lo habéis visto voy a continuar ahora cojo estas dos cajas y las duplico hacia arriba pero las giro 90 gr en Z y tengo bloques interpuestos le doy a Play y compruebo como los de arriba vienen a sujetar a los de abajo Así que voy repitiendo este proceso varias veces intentando no dejar demasiado espacio entre las cajas y ahora lo que hago atención es seguir duplicando al D y repito Este paso para crear algo parecido a una columna ya sabemos que con la letra b podemos crear una selección rectangular ya tengo una pequeña columna voy a ver qué aspecto tiene esto le doy a Play y observo que la columna de momento se mantiene de momento se mantiene Esto es lo que de momento tiene gracia más adelante haremos que se caiga pero ahora antes de hacer que se caiga lo que quiero es complicar un poco más el ejercicio voy a decir que quiero ver la información de física y frame rate estoy usando un 2% del procesador lo cual de momento parece que todavía voy bien y voy a continuar el ejercicio duplicando también en horizontal y duplicando en los dos ejes qué tengo al final como si fuera la estructura de un edificio de juguete voy a hacer el plano más grande también para que si se caen las piezas las pueda recoger el plano y no caigan al infinito a Play y fijaos como alguna pieza poco a poco empieza a caer pero el procesador está al 99% todavía de potencia Qué pasará cuando el procesador llegue al 100% vamos a comprobarlo vamos a ver qué va a pasar la buena noticia que os voy a dar es que no va a pasar nada simplemente lo que va a pasar es que el programa irá más lento pero no parará ni se detendrá ni fallará la simulación ni nada aparecido Así que voy a duplicar esto para complicar el ejercicio como vemos lo estoy complicando bastante probablemente ahora voy a llegar al 100% de procesador ya tengo Digamos como la estructura de un edificio y ahora cuando pulso Play compruebo como el procesador está al 75 por si sumamos los porcentajes prácticamente llega al 100% pero la simulación sigue realizando tal vez la simulación vaya más lenta tal vez vaya más fluida que antes pero yo creo que si tenemos en cuenta la gran cantidad de piezas que hay y la de interacciones que se están calculando el programa Gracias a que Calcula esto en la gpu está calculando la simulación a una velocidad realmente alta y desde luego el resultado en pantalla como mínimo es atractivo si no interesante hasta ahora tengo el pequeño problema de que cada vez que hago una simulación esta simulación existe únicamente a tiempo real en el motor de videojuegos comprobamos como le doy a Play en este caso el edificio se derrumba pero cuando le doy a escape y vuelvo a la escena la animación no se ha aplicado si de hecho cojo la línea de tiempo y empiezo a moverla de delante a atrás veo que no existe tal animación luego esa animación únicamente existe cuando el motor de videojuegos está en marcha y esto no es interesante porque yo lo que quiero es hacer que esto se convierta en una animación normal que yo luego pueda renderizar y de la cual pueda sacar un vídeo bueno la solución es muy sencilla pero atención a la pantalla voy a guardar esta escena antes de simular o antes de realizar la simulación lo voy a grabar en documentos por ejemplo voy a grabar en escritorio y lo voy a grabar en simulación si lo grabo en simulación atención si ahora Lo abro veré como sólido rígido ocupa 700 no simulación ocupa 2s con un megas 2 megas sin embargo ahora lo que voy a hacer es lo siguiente si quiero hacer que esa simulación se vuelque a Blender realmente salga del videojuego y entre en Blender voy a game y le digo record Animation con record Animation que por defecto está desactivado pero vosotros Vais a activar la simulación que hagáis solo la que hagáis por tanto tened cuidado no salgáis antes de tiempo de la simulación que hagáis va a quedar guardada atención le doy a Play Quizás vaya más lento porque ahora no solo la está calculando sino que además la está guardando yo lo que hago de momento es esperar fijaos que físicas está al 30% Pero porque la memoria de intercambio Swap está a 0,082 y s Graph está al 50% Qué es s gra s Graph es animación y convertirla a un gráfico de la escena y cuando ya creáis podría haber hecho el plano grande pero bueno Siempre se pueden hacer muchas cosas cuando ya creáis que la animación Está bien entonces puls escape cuando puls escape aquellos fotogramas y solo aquellos fotogramas que hayáis calculado pulso escape se quedan guardados lo podré comprobar en cuanto a que si hago así compruebo cómo empieza a caer el edificio si veo que me quedo sin fotogramas No pasa nada porque le digo que quiero ver más fotogramas por ejemplo 500 y acabo de ver cómo se derrumba el edificio pero ese derrumbamiento ya no es del motor de videojuego ahora lo hemos pasado Ya a Blender incluso os digo más podemos quitar Blender game ir por ejemplo a cycles render y renderizar con otro motor de render Como por ejemplo cycles que evidentemente nos va a dar la calidad que ya sabemos que nos da cycles y por ejemplo si yo quito esta luz y al fondo le pongo una imagen de cielo pues tendré la simulación rígida con un cielo de cycles y ahora evidentemente si le pongo gpu irá más rápido todavía y combino la mejor de Los cosas y luego evidentemente buscando un ángulo de cámara interesante por ejemplo este ángulo para ver cómo las piezas caen hacia Nosotros acabamos de hacer la magia un ejemplo de cómo combinar dos piezas clave de Blender una cycles como motor de render y otra la colisión rígida lanzada y exportada a un proyecto de Blender Eso sí tras realizar esta animación podremos comprobar y no Ya por haber activado cycle sino eh con cualquier motor de render que si grabamos esto como simulación 2 y ahora vamos a abrirlo nos daremos cuenta que simulación ocupa 2,1 megas mientras que simulación 2 ocupa 184 meg es decir realmente el programa ha guardado en cada uno de los nodos la animación Y esa animación esa información al final pesa en memoria en este caso tenemos una escena relativamente sencilla con escenas más complejas nuestras escenas pueden llegar a ocupar gigas con lo cual se nos haría imprescindible usar la versión de 64 bit de Blend para poder ocupar y para poder manejar toda esa memoria sin que el programa se cuelgue un parámetro que frecuentemente es obviado es ignorado es un parámetro de masa los objetos dentro de las colecciones rígidas pueden tener masa y para hacer esto voy a hacer un ejemplo donde voy a crear una pequeña báscula una pequeña balanza voy a crear una caja está caja ser estática voy a duplicar esta caja y esta caja va a ser un sólido rígido atención a la pantalla voy a poner Blender game voy a hacer que esta caja sea un rigid bar tras lo cual voy a pulsar Play antes de eso en colision boun voy a activar una caja atención a la pantalla Mirad le doy a Play y vemos como la caja está ahí en suspensión voy a ponerla un poco más arriba y veremos Cómo cae realmente ahí lo veis ahora lo que voy a hacer es aumentarla en x voy a volverla a ejecutar y ahora lo que voy a hacer es poner dos cajas para trabajar con cajas porque así lo veremos con más sencillez voy a poner dos cajas que son rigid bodies que son cuerpos rígidos y las voy a poner una a cada lado cuál va a ganar Las dos son iguales voy a poner colision bounce en box le doy a Play y ninguna gana Por qué Porque las dos tienen la misma masa otra cosa es que hubiera puesto una más arriba del todo pero es que entonces no estarían compitiendo en igualdad por tanto lo que estoy haciendo es ponerlas Exactamente igual Bueno pues quiero deciros que si Cojo un elemento dentro de sus propiedades y dentro de sus atributos hay un atributo que se llama masa la masa es la cantidad de masa la cantidad de fuerza que va a ejercer sobre los objetos que tiene abajo ahora el de la izquierda tiene uno de masa el de la derecha tiene 10 de masa Aunque van a caer a la vez no van a hacer la misma fuerza y por tanto puedo comprobar como al pulsar Play evidentemente el que tiene 10 kg de masa se lleva al que tiene 1 kg de masa por tanto en algunas situaciones no se aprecia prácticamente el efecto de la masa pero en otras Como por ejemplo donde hay equilibrios sí que se ve claramente que ese parámetro de masa tiene su significado cuando yo coloco objetos para una colisión rígida debo tener cuidado y no colocarlos demasiado cerca por ejemplo en esta escena voy a colocar un plano y ahora voy a colocar una serie de cajas justo encima del plano Por eso voy a al motor Blender game voy a convertir la caja en un rigid Body y le voy a poner colision bounce de caja y me fijo que hay un parámetro llamado margin lo que voy a hacer ahora es usando el Snap voy a ajustar a vértice y atención todos a la pantalla voy a duplicar esta caja y pegarla justo encima de la otra justo encima voy a repetirlo otra vez justo encima y si ahora le doy a Play vamos asegurarnos de que está pegado al suelo más o menos Y si ahora le doy a Play observaré vamos a verlo esto es estático más margen observaré lo empieza a ver ahí cajas se empiezan a repeler un poco vemos como las cajas deslizan un poco alrededor de las otras Esto es por la sencilla razón de que cada caja tiene un margen de colisión Cuanto más margen tengan creo que lo habéis visto ahí estáis viendo cómo se mueven un poco Cómo se desplazan Cuanto más margen tengan más se van a repeler ese margen creo que se ve como bailan un poco en la pantalla ese margen es el que hace que las cajas se repelan entre sí por tanto lo que puedo hacer es para que no se repelan bajar el factor de radio y el margen de cada colisionador a cero de esta manera los objetos no se van a repeler pero debo tener cuidado Allí se están todavía repeliendo un poco pero debo tener cuidado porque si bajo ese margen a cero corro el riesgo de que el margen sea tan apretado que las cajas se atraviesen entre Sí por eso al final es bueno dejar un poco de margen el mínimo y aceptar ese pequeño salto o que voy a tener que dejar los objetos un poquito separados para que no bailen al colisionar entre ellos mismos an