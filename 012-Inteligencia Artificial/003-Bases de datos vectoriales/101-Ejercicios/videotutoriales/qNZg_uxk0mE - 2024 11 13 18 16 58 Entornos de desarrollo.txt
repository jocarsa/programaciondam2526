y luego vamos con el simulacro de examen del examen de entornos de desarrollo donde os acordáis el otro día que en entornos a ver entornos de desarrollo eh No no aquí vale os acordáis el otro día que en entornos de desarrollo comentamos qué en primer lugar presentar vuestro jeip correctamente creado compartido conmigo y con la información correctamente estructurada como mínimo como la mía vale aquí pues no hay mucha no hay mucho simulacro que hacer en el sentido de que pues ya está es decir es que tengáis el jit javal día la pregunta cuatro que es justifica en qué entornos de desarrollo está Estás usando en el ciclo Y qué entorno para cada lenguaje Y por qué pues ya está es una justificación vale no tiene tampoco muchos simulacro que me escribáis Pues más o menos una página aproximadamente vale a ver vale entonces una página aproximadamente que me digáis pues Por qué Y ya está ahora hoy sobre todo el simulacro va a ser esto de aquí vale la refactorización de un código inicial que va a ser en Ay perdón aquí que va a ser en python vale donde va a ser el código que hayáis hecho en programación y aplicaremos técnicas de extracción a funciones y nombrado correcto de variables y otros identificadores vale vamos a ver esto y a continuación en la pregunta 3es sobre ese mismo código realizaremos una prueba unitaria sobre una función entonces para ello voy a cerrar por aquí voy a por aquí vale Y voy a cerrar por aquí me voy a ir a idel y en idle me voy a el punto en el que me había quedado en el examen anterior y entonces ahora a continuación empiezo la pregunta número dos de entornos de desarrollo la pregunta número dos de entornos de desarrollo es extraer esto a funciones vamos a extraer a funciones y de hecho a continuación ahora veréis por qué vamos a crear un objeto Así que vengo por aquí y digo extraer listado a selección o sea Perdón extraer listado a función quería decir Vale entonces vengo por aquí y digo Death seleccionar Def seleccionar es esto de aquí Así que la primera técnica de extracción a funciones consiste en este código de aquí pegarlo aquí resangrado pillado vale Okay pues paro vuelvo a lanzar vale confirmadas si lo veis Okay decidme algo okay Vale perfecto Pues yo lo que he hecho es todo el código de seleccionar y meterlo aquí en seleccionar y ahora Llamar a seleccionar Vale y vamos a probarlo f5 listos los registros y bueno squiz Tex eh estas líneas Vale y tengo estas líneas de aquí o sea funcionar funciona Pero está bien vale yo os pregunto esto que he hecho o sea está bien vale estar bien está bien pero podría estar mejor qué me decís que hay algo que Siempre os digo que no se debe hacer y yo ahora mismo lo estoy haciendo qué me decís Hay algo en la función que no está del todo bien qué me contaréis y es muy importante an para la refactorización qué me contáis no hay a repetir todavía no nos ha ocurrido eso no no todavía eso más adelante aquí igual nos ocurre Vale ahora hablamos de esto cuando lleguemos Aquí sí que vamos a hablar de eso pero no todavía no nos ha ocurrido lo de repetir lo único que he hecho es este código que antes estaba aquí dentro lo he metido en una función y por supuesto he llamado la función y funciona vale Fran efectivamente return ese es el problema vale siempre que eh extraemos a funciones y En definitiva siempre que utilizamos funciones da igual en Qué lenguaje de programación estemos porque siempre os digo una función tiene que ser una burbuja que tiene que tener un punto de entrada si es necesario y el punto de entrada es los parámetros de la función y una salida que es un returno y Siempre os digo que el hecho de que una función haga print cuando antes no era función y era código directamente en el programa pues Oye haces un print porque no hay más remedio pero cuando hay una función la función no debe hacer un print debe hacer un return Así que 011 return para devolver en la función y ahora en lugar de print Pongo aquí return le pongo filas Y entonces aquí digo print seleccionar ejecuto le doy opción uno funciona vale funciona y parece que hemos hecho lo mismo pero os aseguro que no es lo mismo vale os aseguro que para que cuando el programa crezca y la complejidad crezca y sin embargo sigamos teniendo el control esto que acabamos de hacer es muy importante para conseguir ese objetivo ahora una vez que tenemos esto pues vamos a continuar vale continuamos Y en este caso 012 extraigo función de insertar esto ya va a ser un poco pues más fácil no entonces vengo por aquí Más que nada porque la función de exp de insertar no devuelve nada realmente Vale y digo insertar aquí realmente deberías selecciona qué selecciona capítulo vale Porque algunos haréis capítulos otros haréis expertos otros haréis eh bibliografía vale con lo cual inserta capítulo vale Y aquí si pongo seleccionar capítulo pues Pon seleccionar capítulo vale el tema de renombrar para que sea entendible entonces inserta capítulo voy a poner aquí una vale una un espacio inserta capítulo hago así conexión comit vale hago así print nada y voy a decir return true Vale y aquí lo que hago es que inserta capítulo Okay Ok vale esto por cierto des sangro dident vale Y esto es print realmente print inserta capítulo Okay Vale ahora hago lo mismo 013 extraigo función de insert de eliminar Vale y vengo aquí y digo Def elimina capítulo Okay desangro Vale print filas no voy a poner un return true aquí digo print elimina capítulo vale Y por último Def actualiza capítulo cojo esto espérate aquí sí que hay código que se repite vale Def actualiza capítulo Okay Y print filas fuera y return true y print actualiza capítulo bien una vez que tenemos esto Una vez que tenemos esto a continuación lo que puedo hacer es eh empezar a derivar en archivo externo el elif 5 se ha movido buen se ha movido no ha desaparecido no O Ah no perdón perdón aquí se ha movido no lo he cortado Yo sin querer me he pasado aquí vale me he pasado yo en el punto en el que cortaba si tengo esto ahora a continuación pues me puedo ir a la carpeta y puedo empezar una extracción vamos a ver la extracción un momento un segundo aquí vale dam primero eh esto lo estaba poniendo en programación en simulacros simulacro 2 vale Y ahora Aquí voy a crear 014 archivo externo vale con lo cual en 14 archivo externo voy a crear el archivo principal y voy a crear también un archivo de funciones punto python vale con lo cual me vengo por aquí me vengo por aquí Perdona no al contrario esto es funciones lo que me cargo es esto Okay vale Y ahora abro principal vale Y en principal me cargo todo esto de aquí tengo por una parte principal tengo por una parte las funciones ahora mejoramos más todavía las funciones Y entonces digo eh from funciones import todo y vamos a ver si funciona si he hecho esto correctamente le digo f5 le digo listar los registros y me lista correctamente los registros vale Así que en principio todo va Okay bien pero yo quiero más yo quiero mejorar esto ya es ya está bien vale para esta primera pregunta de refactorización pero yo quiero que esté mejor todavía ya así que para que esté mejor todavía me voy ahora me voy a No aquí me voy a 015 y parametrizar funciones allí donde ahí donde se puede hacer ahí donde sea necesario Así que skill vale me voy a funciones abrir con idle y digo claro es que cuando yo inserto ttulo Pues yo técnicamente podría decirle aquí el parámetro de lo que quiero insertar entonces claro aquí puedo insertar título coma subtítulo coma imagen coma vídeo coma texto lo cual quiere decir lo cual quiere decir cuidado que yo lo que voy a hacer es que en el programa principal cuando inserto todo esto pido todo esto en el programa principal eh este cuál es parametrizar este no vale en insertar pido todo esto y al insertar capítulo inserto texto o sea título subtítulo imagen vídeo y texto Por qué y vosotros diréis Por qué Así es mejor vale No entiendo por qué Así es mejor pues porque de la misma forma que os digo que una función no debe hacer print tampoco una función debe hacer input porque de la misma forma que os digo que la salida de una función es un return la entrada de una función no es un input la entrada de una función son los parámetros Y eso quiere decir que si necesitas poner input Me parece bien pero no puede ser dentro de una función vale tiene que ser fuera de la función y cuando llamas a la función Le pasas esos inputs pero como entrada vale como parámetros de la función ahora sí Parece que no pero esta función está mejor pero quiero que esté mejor todavía aquí por ejemplo en eliminar capítulo veis lo mismo tengo un input no puedo tener inputs en funciones de la misma forma que no puedo tener prints no puedo tener inputs Así que cierro por aquí parametrizar eliminación vale me voy a funciones me voy a principal vale Y me voy a elimina capítulo y identificador es un parámetro de la función identificador input introduce el parámetro y por tanto ahora digo identificador en el parámetro vale Y así eliminar se queda mucho más limpio porque eliminar toma su entrada desde aquí ponemos esto por aquí vale Y ya está vamos a probarlo Por cierto f5 inserto un registro título tat y Ok Vale qué ha pasado colum count does mat value at Row One curioso no Ah Sí perdón Qué ha pasado Bueno pues lo que ha pasado es que si os acordáis antes en el otro examen en otro examen cuidado con esto lo que he hecho es que he ampliado el modelo de datos en examen programación en capítulos he puesto un numerador vale me voy a cargar numerador o bien tendría que ampliar el modelo de datos da igual vale lo que sea me cargo numerador ya se ha quedado otra vez frito qué rabia me da cuando esto pasa Okay Vale capítulos numerador estructura numerador elimino Ok y ya está no sé por qué de repente se queda enganchado vale vamos a volverlo a hacer y inserto un registro Perdona inserto un registro tiqu y ya está Vale funciona Exactamente igual el funci ento al refactorizar tiene que ser exactamente igual pero el cómo funciona No es igual Vale ahora es mucho mejor ahora vamos a hacer lo mismo con actualizar capítulo vale hay inputs no debe haber inputs dentro de una función así que esto es copio pego eh 017 parametrization abro Okay y digo actualiza capítulo vale actualiza capítulo los inputs no pueden estar aquí los inputs tienen que estar esto es elimina No aquí y aquí qué rabia me da Vale entonces actualiza capítulo tengo que pasarle el identificador el título el subtítulo la imagen el vídeo y el texto y de la misma forma tengo que actualizar la entrada de parámetros de la función para que sea cierto que admite eso de ahí vale una vez que tengo esto Una vez que tengo esto ahora a continuación lo que tendría que hacer es Eh parametrizar Esto de aquí parametrizar esto de aquí para que lo pueda reutilizar Vale entonces para ello vamos a verlo vamos a ver cierro por aquí espera qué me ha dicho que me ha dicho que me ha dicho Ok actualiza capítulo vale Ok vale pues ahora refactorización y al refactorizar repetición y con esto acaba esta pregunta del examen vamos a verlo vale act a capítulo Vale cuando yo veo que hay un trozo que se repite técnicamente vamos a verlo cursor vale Yo puedo crear una función Def actualiza campo con qué campo Pues con el tipo de campo vamos a ver vale actualiza campo eh identificador o entidad coma cadena vale actualiza campo aquí e e esto Ahora sí vale actualiza campo Ah no cadena solo vale petición es esto actualiza campo de cadena esto lo tiro para atrás y entonces esto es cadena Y esto es cadena a ver cuidado esto es cadena Ah Wow gu Guau cuidado no Espera espera vale Okay cadena y valor esto cadena y esto es valor Okay y identificador Vale entonces si esto es cierto llamo actualiza campo la cadena es título el valor es título y el identificador es identificador creo yo diría que sí vale claro ahora actualiza campo y entonces ahora al subtítulo le actualizo el subtítulo y ahora actualiza campo a ver un momentín sí a ver qué quieres decir editar en caliente la petición a sql Sí Ah sí sí desde luego Sí ahora lo hacemos Sí eso cuesta nada correcto Vale pues vengo por aquí y esto es imagen vale aquí lo mismo con vídeo y por último creo que es por último aquí Ah y este retur true va al final actualiza campo de texto y texto vale Y con esto lo que acabo de hacer por tanto es que toda esa meare repetición que teníamos ahora la tengo almacenada la tengo digamos en una burbuja dentro de actualiza campo y lo llevo lo llamo cada vez que lo necesito vamos a comprobar si funciona y ahora a continuación vamos a ver esto que comentabas vale lo del input entonces pulso f5 No aquí no Por cierto actualiza campo y aquí le hace falta dos puntos vale a ver dónde está principal no esta principal vale principal Ok f5 vale e actualizar un registro introduce el número uno introduce el nuevo título y y ok Un momentín vale cursor is not defined vale cursor is not Define en funciones en la línea 54 l numbers línea No aquí no línea 54 y 54 o aquí claro actualiza campo cursor is not defined Vale pues cursor me lo paso de aquí Ok vamos a volver a ejecutar principal vale Quiero actualizar número uno Ah Ah Ah okay todo correcto así tengo un ret return true en cada uno de ellos vale No pasa nada y ahora me vengo aquí me voy a capítulos y veo que el primero es a Vale hasta aquí ha funcionado y ahora este código Ahora sí es mucho mejor y ahora vamos a hacer lo que Comenta Fran Y es que claro cuando yo Estoy actualizando Pues voy un poco a ciegas en el sentido de que no sé realmente qué es lo que ponía antes en ese campo Vale entonces voy a cerrar por aquí voy a cerrar python y ahora a continuación Hola así y Ok vale me voy a duplicar este proyecto y esto efectivamente tiene que más que ver con la usabilidad con que la aplicación sea agradable de usar para el usuario entonces digo 019 Mostrar lo que había antes claro Mostrar lo que había antes no Es realmente parte aquí no es realmente parte de actualizar es parte de introduce el identificador y enséñame vale introduce el identificador del capítulo actualizar hasta que yo no introduzca el identificador no me sabrá decir que es lo que había antes lo cual quiere decir que me va a obligar a hacer una función llamada selecciona uno o sí selecciona uno realmente vale vengo por aquí y en selecciona capítulos claro seleccionar capítulos en plural y luego Esto seleccion será seleccionar capítulos porque entonces yo ahora vengo por aquí y Fran me voy a hacer una función llamada selecciona capítulo y selecciona capítulo requerirá un identificador de esta forma Select all from capítulos Where identificador es igual a identificador acordaos que cuando usamos corchetes tenemos que poner una F al principio para decir que es una cadena formateada bien entonces si yo hago esto Si yo hago esto yo cuando actualizo introduce el identificador del capítulo actualizar Y entonces aquí okay Y entonces yo aquí digo selecciona capítulo de identificador vale Y ahora digo campos es igual a selecciona capítulo de identificador y me lo está almacenando en una variable llamada Campos Si quieres voy a poner print Campos f5 le digo eh actualizar un registro y introduce el identificador el uno y me dice vale identificador un pues te digo todo esto de aquí vale con lo cual ahora a continuación introduce el título del capítulo Pues ahora vamos a enlazar esta información de aquí cuando diga subtítulo enlazar remos el subtítulo vale Y ahora verás que en un momento lo tenemos hecho de esta forma voy a poner aquí f y digo antes era llave y digo Campos punto No es esto es que siempre me lío con javascript e Campos título vamos a probar si esto ha funcionado f5 Quiero actualizar un registro identificador uno bien okay venga mas be integers No strings integers integer no va a ser que no campus pun título f5 actualizar uno no tiene título vale identificador Ah Es una Ray es una aray Perdón vale Ok campos de cero título vale cuatro Okay Espera que esto se ha quedado un poco frito vale f5 vale 4 un caray bueno diccionario título la leche 4 1 vale introduce el nuevo título del capítulo en blanco para no modificar antes eraa a vale Okay entonces si ya tenemos esto pues ya podemos hacer esto y esto es subtítulo esto es imagen esto es vídeo y esto es texto vale Así que hago así y digo escojo una opción cuatro el identificador uno vale el título a Ah el subtítulo bbb el este fff ddd ah espera y e Vale ahora Quiero actualizar un registro el uno antes era AAA antes era bbb antes era ccc antes era este de ahí vale Y antes era e vale Y ahora funciona y entonces me está mostrando qué es lo que había antes en ese campo voy a ver que en uno de ellos se ve que me he olvidado de poner la f vale Y por eso parecía Campos vídeo Simplemente porque me había olvidado de hacer pues la el String formateado vale Y ya está Esto es lo que hay que hacer en la primera pregunta falta la segunda pregunta que es la prueba unitaria bien entonces en este caso a continuación yo voy a una de las funciones vamos ahora con la parte de generación de prueba es decir la segunda parte del examen vamos a verlo voy a cerrar todo el python que ahora me interesa vale Y me vengo aquí Mostrar lo que había antes vale y pego y ahora digo 020 prueba unitaria en caliente sobre una función Qué función la que queráis vale es cogéis una y lo que queráis y entonces yo a continuación le digo vamos a ver funciones abrir con idle vale Yo tengo a continuación selecciona capítulo identificador bien qué ocurre si yo porque el capítulo identificador Espera que el cliente eh envíe una un número pero qué pasa si envío una letra f5 y le digo eh actualiza un registro e introduce el identificador el capítulo de actualizar a que tú dirías Pero qué tonto Pon una a está claro que es un identificador pues cualquier usuario puede poner una a Así que hago así y me da error vale Y me da error y se me sale el programa Entonces eso quiere decir que mi función no está correctamente preparada para atrapar todos los tipos de casos Vale entonces vengo por aquí y digo vale lo primero que necesito es eh asegurarme de si esto es un número o no lo es entonces voy a ver qué forma tengo de aquí lo más sencillo de hacer e python check If is number o le digo menor que o mayor que o algo así no lo sé ahora veremos y instance Ah Pues ah qué Guay Ah pues mira pues fantástico Esto me ha encantado vale Y entonces digo Estoy en prueba unitaria vale selecciona capítulo yo digo si is instance vale en ese caso vengo por aquí y digo identificador si es instancia de int solo de int en ese caso return cero o return false lo que ocurre en este caso es que si yo ahora edito el archivo principal aquí vale campos es igual espérate aí ha una capítulo vale Okay entonces digo si Campos no es igual a false en ese caso vamos a actualizar lo que tú quieras que actualicemos en caso contrario els print Ah Perdona y actualiza capítulo en caso contrario print el identificador introducido no es válido vamos a probarlo f5 actualizar introduce identificador una letra a y me dice el identificador introducido no es válido y vuelve al menú principal vale Y si os fijáis acabamos de hacer una prueba sobre una función acabamos de detectar una debilidad de esa función y a continuación lo que hemos hecho es arreglar esa debilidad Vale y hemos mejorado nuestro código debido a esa prueba la hemos hecho en caliente vale Generalmente lo que habría que hacer es esto separar este o sea esa función separarlo a un archivo externo hacer las pruebas mejorarlo y luego traerlo de vuelta lo que hemos heo es hacer la prueba directamente en caliente vamos a hacer más pruebas vamos a ver y ahora copio pego f2 eh comprobamos Rango de identificadores Oye qué ocurre si yo por ejemplo vale le meto yo sé que le puedo meter un entero vale Pero qué ocurre que si le meto un entero que no tengo entonces digo eh vamos a ver digo actualizo un registro introduce el identificador 1000 no lo tengo o 1000 o os3 vale es más Qué pasa si pongo menos Bueno vamos a probar 1000 luego ponemos -3 el identificador introducido no es válido vale ha devuelto un error y por tanto dice el identificador introducido no es válido vale veo que la mejora que he hecho antes me cubre también este caso fantástico si digo uno entonces sí vale Perdona No 4 un Ah no es válido Espera espera no no he hecho mal la refactor ición porque si le digo uno sí que me tiene que decir que es válido a ver qué ha pasado If is instance identificador de int A ver vamos a probar otra vez vale 4 un no e Qué pasa instance a verín eh python check If variable espérate Sí pero claro pero yo aquí vale If is instance int de identificador de int vamos a verlo ahora dónde estás espera esto aquí vale venga 4 1 Ok vale Ahora vuelvo a ejecutar 4 a Okay Vale claro vale vale vamos a ver este If no me ha funcionado vale con lo cual lo que puedo hacer es lo siguiente try vale try identificador es igual a in identificador Ok Catch o except a ver un momentín el except error a ver error return false Vamos allá ahora f5 4 no rabia me da cuando hace eso vale 4 1 Ok Vale y venga que sí vale 4 a No por qué pero si le he dicho si le he puesto un try a ver Esto es comprobamos Rango identificadores vale try esto except Ah error is not Define muy bien Vamos a probarlo 4 a Ok vale Y ahora 4 1 Perdón 4 uno Ahora sí Tri vale 4 a muy bien Y ahora qué pasa si pongo 4000 Okay Vale ahora otro error perfecto list Index out of Range es decir la lista en este caso está fuera del sitio Vale pues Ahora me vengo por aquí y digo a ver cómo puedo modificar el capítulo vamos a ver o sea cómo puedo modificar iic ador para que esto no de error porque me dice título input en blanco claro vale return filas returo filas Me da me tiene que dar algo vale vamos a ver pues aquí por ejemplo yo le voy a decir If filas no es igual a Ray vacío return filas pero si filas sí que es igual a Ray vacío return false porque retornar false me volverá a decir me volverá a decir el identificador introducido no es válido por otro motivo diferente probablemente vale pero me lo dirá Así que f5 y filas Perdón dos puntos vale f5 vale 4 1 es correcto vale 4 a no es correcto 4 1000 no es correcto vale el identificador introducido no es válido con lo cual vamos viendo como cuando vimos el tema de pruebas unitarias hace un tiempo que eh A partir de una función original pues vamos encapsulando y vamos protegiendo el código para intentar adaptarnos y para proteger el código siempre que podamos para que ponga lo que ponga el usuario no nos pueda destrozar el código vale o no pueda hacer cualquier cosa con el código o no pueda hacer lo que sea vale Y con esto La idea es hacer pues dos o tres mejoras vale en este caso he hecho dos mejoras sobre una sola función Pues igual si en el examen os digo que tenéis que hacer tres mejoras Pues bueno dos sobre uno y pilláis otro otra función y hacéis otra mejora una mejora sobre otra función y con eso tendríais el examen y este sería el simulacro del examen de entornos de desarrollo vale bien el simulacro de examen de entornos de desarrollo como os podéis imaginar está relacionado con el simulacro que haremos mañana de proyecto interdisciplinar Más que nada porque esto que estáis viendo aquí como os podéis imaginar hoy son funciones que ejecuta una un programa de comandos de python pero mañana serán rutas que haremos mediante un servidor flask y si lo hacemos con un servidor flask pues Será para luego hacer una pequeña inserción una pequeña integración con la página web que estamos diseñando vale para que al final Pues veáis el empaste de todo y en empaste que no empastre que son conceptos diferentes y es más probablemente Son Opuestos y que En definitiva de paso que hacéis un examen Pues de paso también eh veáis Cuál es la relación de todo lo que estáis haciendo y veáis que de paso que estáis haciendo el examen también a la vez estáis practicando para hacer el proyecto interdisciplinar Vale entonces por hoy poco más porque ya tenemos todos los simulacros finalizados de hoy de las asignaturas de hoy quiero decir así que en principio desde aquí a las 9 no tenemos nada más que hacer Así que yo lo que haría es continuar por un poco de contenido por ejemplo de má más que la semana pasada nos quedamos un poco con el c+ má que hicimos la introducción y ya está vale lo digo porque vosotros diréis quiero decir que podemos hacer eso O si estáis muy agobiados si preferís centrar en los simulacros y que no os maree más hasta los exámenes y ya en cuanto pasen los exámenes ya hablamos de c+ más y de todo lo que queráis No lo sé decidme lo digo porque quedan dos horas de tarde y por mí pues la idea es aprovechar las dos horas de tutorías pero si depende de loos que estéis vale Así que decidme bueno decidme si estáis vivos alguien vale Luis estás vivo OK Pero ahora además de estar vivo Vale pues sí Ok sin problema ya os digo que ahora mismo la prioridad es eh okay sí medio vivo obviamente la prioridad es hacer los exámenes y aprobar el trimestre vale Lo que pasa es que yo pues claro de tener clase hasta las 9 pues me encuentro que son las 7 y digo ahora qué hago con mi vida yo 2 horas vale Pero a ver Vale entonces avanzar proyectos con nuevas fechas y avanzar Ah vale Supongo que lo que está diciendo Piero viene a ser lo mismo que lo que dice Fran vale Y es eh En lugar de avanzar contenido de segundo trimestre el dedicar tiempo a acabar las prácticas que tengáis pendientes que se entregan para este domingo y tal Vale pues sí sí me parece bien o sea que vale pues hacemos eso vale pues