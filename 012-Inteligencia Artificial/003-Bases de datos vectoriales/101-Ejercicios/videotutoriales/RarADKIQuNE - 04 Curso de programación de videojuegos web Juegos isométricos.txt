nuestro primer objetivo en la sesión de hoy en el ejercicio que empezamos ahora es crear un juego isométrico os voy a dar una fantástica noticia y es que el juego el soft métrico requiere trigonometría desde principio así que vale que se va a hacer pero esta trigonometría más o menos sencilla ahora veréis entonces en primer lugar qué es lo que queremos conseguir pues voy a poner algunos ejemplos en pantalla del tipo de juegos que queremos conseguir realmente la temática del juego me es completamente indiferente pero en definitiva la jugabilidad y los assets del juego son estos que estáis viendo en pantalla es decir es un juego que podríamos denominar de 2 5d es decir 2.5 de iu que en definitiva son juegos que están basados en una matriz en una rejilla bidimensional pero que esa rejilla bidimensional está abatida para darnos la sensación de que estamos trabajando en 3-d cuando realmente es en dos de próxima 25 porque es como 2d pero que intenta simular el 3-d pero no llega bien a partir de aquí por tanto mirada voy a poner isométrica grid para hacernos una idea de cuál es la rejilla con la que queremos trabajar nosotros queremos trabajar por tanto con una rejilla de apariencia más o menos como la que veis en pantalla vamos a empezar por tanto con una rejilla ortográfica y a partir de ahí la pasamos a una rejilla isométrica y veréis que no es tan difícil como en un principio puede parecer empezamos por tanto un juego me voy al samp directamente no trabajo ahora al principio con phonegap sino que voy a trabajar con html puro y duro y ya llegará el momento de transformarlo en la aplicación móvil por tanto me voy a ir a la carpeta que está en fe en samp en hd docs y dentro de esa carpeta voy a crear una carpeta nueva llamada isométrico al estoy en el disco ce local en la carpeta del sunp en htc touch box y dentro he creado una carpeta isométrico dentro de la cual salud voy a crear un archivo index.hr ml una vez más vamos a necesitar yo diría que prácticamente vamos siempre a necesitar la librería de jquery por tanto lo que voy a hacer en este caso es vamos a ver aquí en ww pues voy a cargar jquery 1 punto lo que sea es más yo os diría mirad que casi me la voy a volver a descargar por tanto me voy a entrar en internet voy a ir a jquery puntocom y en este caso mirad voy a ir a download jquery y voy a descargar la librería jquery 2.0 la 2.0 se diferencia de la 1.0 en cuanto a que la 2 no soporta internet explorer 6 7 y 8 por tanto como no son plataformas a las que en principio nos vayamos a dirigir lo que voy a hacer es descargar la versión comprimida de producción de jquery 214 jquery 2 y lo que haya en este momento así que estoy en descargas un momento y ahora en cuanto llegue a descargas bien lo que hago es que me copió esta librería jquery 2 lo que sea me voy a camps ht docs isométrico la pego ahí dentro en mi caso tenía una coletilla porque la tenía duplicada y empiezo a trabajar una vez que tengo estos dos archivos los voy a abrir los dos no quería decir voy a abrir el archivo index html y vamos a empezar a crear nuestra programación lanzó el archivo index html lo llamó en localhost isométrico y empiezo a escribir diciendo qué doc type html una etiqueta html por aquí esta etiqueta lleva un gel esta etiqueta lleva un boli ya sabemos que en el body me gustaría realmente ahí poner el script dentro del head pero no puedo por tanto digo div y de escenario script y aquí es donde voy a poner el script completo del juego por otra parte en el head lo que sí que voy a poner es la llamada por tanto script src y llamó a quien llamó a vamos a ver lo llamo jquery 214 y lo que sea es decir aquí estoy cargando la librería aquí estoy cargando el escenario y aquí voy a poner un script donde ya sabéis que siempre pongo lo mismo documento punto 9 función local y yo diría algo así como console log algo así como hola estoy funcionando por tanto si todo ha ido bien me voy a consola me voy a recargar y fijaos que si todo ha ido bien aquí abajo poner hola estoy funcionando con lo cual podemos empezar a continuación dentro del escenario voy a dibujar un canvas con el escenario canvas no se puede llamar escenario ya sabéis porque esa palabra ya está usada es y está usado por el propio vídeo por el propio depp quería decir y voy a hacer los siguientes de momento guys es igual a 500 píxeles height es igual a 500 píxeles esto me lleva a querer crear un pequeño estilo donde voy a decir que aquí el objeto que tiene canvas pues de momento tiene un borde de un píxel sólido y simplemente para verlo es decir para guardar y recargar y comprobar que hay en la pantalla pues ya tengo un dip un contenedor en este caso pues aquí lo he creado este es el canvas y cuidado madre mía qué es esto aquí se tiene que cerrar la canvas y aquí se abre canvas aquí se cierra canvas bien pues sí aquí tengo escenario canvas y es realmente una etiqueta canvas pues aquí le digo que creó un estilo para el canvas que es de un borde de un píxel sólido grises y por lo menos pues lo podemos empezar a ver en la pantalla bien ahora lo que voy a hacer es algo tan sencillo mirad cómo lo siguiente en el documento reding voy a quitar el consumo el punto logs por qué principio simplemente es para ver que todo está funcionando correctamente y voy a decir lo siguiente bar contexto contacto en el contexto es igual a voy a sacarlo del juego anterior porque así acabamos antes a eso métrico esto es flat space esto es w esto es index bien y vamos a ver para empezar esto extracción vale lo que hago es creo un qué contexto se es igual a document.getelementbyid y de mi canvas no es escenario canvas y digo contexto hoy como estamos trabajando con un juego 2.5 de pues sigue siendo 2 de existir como el elemento que tenga el y de lo que sea y le asignó un contexto bidimensional a partir de aquí en primer lugar lo que voy a hacer es voy a crear una matriz bidimensional de ortográfica de rectángulos vamos a hacer la primera ortográfica y luego lo que haremos es trabajar un poco con la iso metri a los senos y los cosenos por tanto yo digo lo siguiente contexto punto field style es igual a red es decir a rojo y ahora digo contexto punto fil rect es una función y digo pues vamos a ver digo 0 10 01 10 como nike mag 10,20 como 20 por tanto guardo recargo a ver si tengo algún error en principio parece que no y lo que tengo es un rectángulo un solo rectángulo de color rojo que está ubicado en x 10 y 10 que tiene 20 x 20 de dimensiones lo que voy a hacer ahora por tanto es que mi atención es muy importante voy a crear una parrilla voy a crear una matriz bidimensional x y yo en cuanto digo eso en mi mente aparece doble núcleo for alle por tanto me voy ahora aquí y digo bar x es igual a 0 x es menor que te diría yo 10 por ejemplo x + + y ahora dentro de ese bucle for digo four y es igual a 0 y es menor digamos que 10 y más vamos a poner espacios uniformemente y así queda más aseado así que ahora aquí mira digo este contexto fil rec lo voy a mover aquí dentro con texto fil recta y no quiero 1010 2020 sino quiero x por 10 y por 10 por tanto lo que ocurre en este caso de hecho se me va a salir de la pantalla pero bueno lo que ocurre en este caso es que guarde y recargo y tengo por aquí x partido 10 x partido voy a ponerle x 30 casi impuestos por 30 porque si no se me juntan ahí las tengo y tengo una matriz de 10 elementos en horizontal por 10 elementos en vertical como os podéis imaginar por tanto este multiplicador en x en y lo que hace es decir como de separados están estos objetos por tanto y la parrilla mmmm y de 500 píxeles y lo estoy separando por ejemplo de 50 a 50 pues ahora sí la parrilla medirá prácticamente toda la todo el canvas todo el rectángulo de hecho hay un rectángulo que se me está saliendo que está justo aquí a la derecha pero bueno me da igual es simplemente con ver esta parrilla en la pantalla ya estoy viendo el resultado de crear esta parrilla bidimensional de elementos en el canvas vamos a hablar ahora un poco de trigonometría porque yo no quiero que esta rejilla sea ortográfica sino que yo quiero que esta rejilla sea isométrica es decir que esté como abatida en un espacio tridimensional para yo poder empezar a construir hacia arriba a partir de ella os voy a decir os voy a decir que las rejillas isométricas puras son rejillas que hizo métrica es decir que sus ángulos son iguales donde está su mitad aquí y por tanto eso quiere decir que teóricamente mirad este ángulo es 60 este ángulo de 60 y este ángulo de 60 eso es una rejilla isométrica pura todos aquellos que se lo saltan yo por ejemplo podría hacer un juego así o podría hacer un juego así eso no sería isométrico pero también se considera isométrico en el argot de los videojuegos es exacto serían un tipo de perspectiva paralela aunque no exactamente isométrica bueno nosotros en definitiva vamos a hacer una perspectiva isométrica porque nos cuesta lo mismo hacer la isométrica que no es sobre ética la cuestión esta mirada es en que y este es el análisis importante de la clase de hoy en que se asume por ejemplo imagínate que ese es el punto cero porque ese pues porque me ha llamado por ahí digamos que es el punto cero digamos que el punto 11 sería ese vea y el 1.10 quería decir el punto 20 sería de ser el asumiendo como que x crece en esa dirección y asumiendo que y crece en esta dirección lo veis es como si tuviera la pantalla pero lo hubiera abatido en ese espacio por tanto como os digo eso es 3 040 esto es 0 1 0 2 esto es 4 vale es decir es lo mismo tener una rejilla ortográfica pero abatido en una rejilla isométrica cuesta verlo al principio lo sé vale entonces yo lo que tengo que trabajar en todo momento yo lo que tengo que saber en todo momento es que yo trabajo en isométrico pero el canvas va a trabajar siempre en ortográfico para el canvas siempre para el canvas siempre x dónde estás tú para el canvas siempre x es esto y es esto así que yo en definitiva necesito una manera de transformar y decirle al programa que todo aquello toda aquella transformación que yo quiero que esté en x me la debe transformar al x dentro de las coordenadas locales de la biometría así que en definitiva lo primero que tengo que averiguar es este ángulo cuánto es pues ese ángulo es 30 ese ángulo es 32 que desde ese ángulo para allá es 60 30 60 90 a los 90 grados de ver ángulo recto por tanto yo voy a empezar dibujando un ángulo recto y a dibujar un elemento recto pero luego para hallar su coordenada lo que voy a hacer es decirle tu coordenada real es en x el coseno de 30 en y el seno de 30 vale cosenos y se nos siempre es igual que lo que hicimos anteriormente vale por tanto vamos a ver si funciona vamos al código y digo tú x no es x 50 x es x 50 x más puntos ojo 30 pero hay un problema y es que en trigonometría en la gran mayoría de sistemas informáticos los ángulos no van con grado sexagesimal es sino que ya sabéis que van con radiales por tanto un radial es más un tope y por dos espí por 2 por tanto 30 vamos a ver calculadora 360 partido 30 son 12 pues es más p partido 2 esos son 30 grados y por dos partidos y diréis por qué no escribes más y partido 6 pues mira también podría es lo mismo entonces voy a hacer esto un poco más grande y ahora digo valemos x por 50 pues y por 50 por más sim demás por 12 así que guardo y recargo vamos a verlo por 12 vamos a ver match.com punto y en principio esto empezaría a dar la rejilla isométrica pero no la está dando vamos a ver por qué en principio la rejilla parece que no quiere hacer eso pero yo creo que sí que es esa así que le digo x 2 vale ahora le digo x 3 bien me está saliendo abatida únicamente en una dirección y aquí voy a decirle uno yo entonces fijémonos que la y en este caso la y siempre es cero vale y probablemente esto no es una multiplicación sino que es una suma quiero decir qué en este caso 50 por el seno por esto de aquí y por dos déjame ponerlo por 500 y eso siempre es uno para ahora mismo siempre es cero de hecho y por dos partidos 12 parece que esto esté dando 0 así que con sólo un punto bien y digo más punto seno de todos vamos a verlo el resultado por tanto siempre es 0 49 y lo que sea efectivamente entonces la cuestión es sumar ahora y por 500 y siempre es lo mismo vale pues vamos a ver la función matemática la fórmula efectivamente finalmente es esta de aquí es esta que tenéis esta línea de momento vamos a tirar con una fórmula como ésta x por 50 más puntos y fijaos que estoy tirando el x por el seno y luego él y por el coseno y esto es en cuanto al componente x en cuanto al componente y es y por el más punto coseno x por el más punto cero y en este caso estoy restando y estoy restando por la sencilla razón de que la y crece en negativo por tanto en este caso quiero como que crezca hacia arriba esta es la fórmula si queréis para hacerla más fácil y para hacer menos longaniza voy a separarlo un poco y digo componente x es igual a esto para que lo veáis mejor componente x es igual a esto componente y es igual a esto y así igual lo veis mejor y ahora digo tamaño x es igual a 5 por ejemplo tamaño y es igual a 5 y así ahora pongo componente x componente y coma tamaño x tamaño y ahí por tanto tendría por una parte la separación de los parámetros en una función alternativa en una declaración de variables externas y luego ya en el contexto field rect llamó a cada una de las variables ahora mismo sólo estamos viendo una porción de la rejilla mirad porque digamos que esto es x y xv a creciendo hacia allá y x desaparece de la pantalla digamos que esto es y lo tengo por aquí con lo cual básicamente lo que vamos a hacer es que un bucle for no tiene por qué empezar en cero un bucle ford puede empezar en negativo entonces yo puedo decir que el bucle for en lugar de empezar en cero empiece menos cinco con lo cual fijaos que si este es el grado cero fijaos como el bucle va creciendo también hacia la izquierda y tampoco tengo por qué hacer fijaos que este puede empezar en menos 5 tampoco tengo que hacer que éste llegue hasta 5 puede llegar hasta 15 en lo que quiero al final es tener la pantalla rellena de una rejilla de momento no parece muy isométrica a la haremos isométrica pero en definitiva una rejilla proyectada sobre la pantalla es decir una rejilla sobre la cual podemos trabajar correctamente entonces una vez que tengo esto lo que quiere una vez que tengo digamos lo que llamaríamos los puntos de anclaje de cada celda isométrica lo que quiero es no trabajar con puntos rojos que no son más que puntos de anclaje para comprobar que todo va bien si no quiero trabajar con bit maps ya que al final pues cada terreno cada casita cada carretera o cada granja no será más que un bit map todavía entonces voy a descargar un mismo peso métrico y os lo paso por correo voy a descargar por tanto un bit map vamos a ver creo no lo sé isométrica vamos a verlo por ejemplo ahí mira qué fantástico pues algo así que digo de la imagen y fijaos atención y guardo imagen me lo voy a guardar en sant pere chepe docs en isométrico me creó una carpeta llamada imágenes isométrico soporta el art déjame hacer una cosa a ver si podemos encontrar hola a ver si podemos encontrar elementos como estos ya con transparencia por ejemplo algo como esto pero me gustaría algo que fuera más y algo así ahora qué bien pues me guardo este elemento como pm je este elemento se llama suelo y lo voy a bajar de tamaño lo voy a evitar con el gimp y por tanto lo editó con el guión para que tenga menor tamaño porque bueno ahora mismo tiene 300 x 150 lo voy a escalar para que tenga 150 x 75 me lo exportó como suelo png y vamos a trabajar con esta imagen ahora por tanto lo que voy a hacer es hacer lo siguiente mirad digo condiciones iniciales del juego y digo bar suelo es igual a new image y digo suelo punto src es igual a entrar en la carpeta de imágenes y localizar suelo punto png así que por tanto cada vez que vengo aquí pues no digo contexto fil recto sino contexto trimage y voy a decir quiero dibujar suelo coma en el componente x en el componente y coma con tamaño x coma con tamaño y ya sabéis que pongo tamaño como os podéis imaginar porque no quiero usar ninguna ñ ningún acento en el nombre de una variable otra cosa es el valor de la variable pero en el nombre nunca así que guardo recargó vamos a ver así y lo que está pasando en este caso es que las imágenes todavía no se están cargando por tanto no se están cargando las imágenes y esto quiere decir que necesito una función de juego en la función de juego ya sabéis función juego y haremos más adelante un juego preparatorio o algo así pero de momento un punto en juego y el función juego también sabéis que acaba con un time out diciendo que quiero ejecutar juegos cada de momento cada 1000 milisegundos cada segundo un juego de este tipo no tiene los mismos requerimientos de interactividad que un juego de naves digamos así que todo este código vamos a ponerle aquí esto fuera crear una matriz bidimensional ortográfica ya no es ortográfica de rectángulos va a estar en juego y por tanto esto lo voy a poner fuera trató del canvas y simplemente es la misma estructura que teníamos hasta ahora simplemente el documento read y lo que hace es lanzar el juego con lo cual nuestro juego queda de la siguiente manera condiciones iniciales del juego trato el canvas document ready que lanza el juego y luego ya el juego se empieza a lanzar a sí mismo a lo largo del tiempo creó una matriz ortográfica no isométrica no es todavía muy isométrica pero ahora lo será así que si os fijáis en la pantalla empiezo a tener eso que estamos viendo claro no lo vemos porque el tamaño x el tamaño y todavía parecen un poco pequeños ahí va cuando ocupa cuánto ocupa aclaró cuánto ocupa este archivo claro este archivo ocupa 150 por ser el x 35 mirar lo que voy a hacer es que este archivo tamaño del lienzo va a ocupar 150 x 150 y la imagen va a estar centrada en pantalla y así esto es mucho mejor vamos a estar trabajando ahora veréis vamos a estar trabajando con imágenes cuadradas y así con imágenes cuadradas nos aseguramos mucho mejor de que trabajamos con el grado correcto de curvatura de la imagen fijaos como las imágenes ya quieren coincidir al menos en uno de los lados con lo cual pues ya estamos más cerca ahora ya tendríamos que pensar cuál es la dimensión sabes que no me gusta que el tamaño sea xe y porque al final es el mismo tamaño así qué tamaño es igual a por ejemplo 80 y ahora no voy a poner un tamaño diferente para x y pongo el mismo tamaño ahí lo vemos y fijémonos como los puntos fijémonos como los elementos empiezan a coincidir fijándonos que llegados a ese punto démonos cuenta hoy baa mirad mirad en la pantalla del curioso mirad yo le digo atención veis una línea blanca ahora no lo veis ahora no lo veis agrada veis otra vez veis la línea blanca los elementos línea blanca ahora no lo veis ahora no sabéis ahora no habéis porque por una razón muy sencilla y es que antes de empezar vacío el canvas se está dibujando una y otra vez encima por tanto recordad que con texto punto clear recto de 0 a 500 como a 500 de momento es decir estamos haciendo un canvas de 500 x 500 pero luego ya sabremos que haremos un canvas de la misma dimensión que tenga la ventana en la pantalla vale pues efectivamente la razón por la que no es perfectamente isométrico es porque en la parte de arriba usado el más mientras que en la parte de abajo he usado el por vale por tanto usamos más en ambos casos vamos a verlo ahí lo tenemos vale ahí lo tenemos en principio fijaos que funciona correctamente lo único está en que requiere si os fijáis ese espacio básicamente es el mismo espacio que me sobra arriba y abajo así que lo que voy a hacer es introducir un factor correctivo en el componente y donde voy a decir por ejemplo más claro si digo por ejemplo vamos a ver si digo por ejemplo más 50 esto no vale para nada porque lo que estoy haciendo es tirarlos todos para abajo con lo cual yo lo que tengo que hacer es por ejemplo más 50 x y vamos a verlo recargo voy a eso no muy bien voy a hacer una cosa un segundo atención todos juego lo voy a poner cada 100 y así se me recarga más rápido vale por cinco y bueno pues necesito ahí poner un factor corrector para que cada una de las filas se me vaya un poco para arriba más que nada porque ahora mismo es de juego parece escalonados se acordáis había un juego los 80 era así de una pelota que iba subiendo y bajando pero no es lo que quiero ahora mismo bien vamos a ver otra manera de trabajarlos la siguiente mirad esto de aquí es x esto de aquí es x con lo cual hay una fórmula aquí que es incorrecta voy a trabajar un poco esta combinación y ahora os digo el resultado pone de momento estos factores correctivos que estoy mostrando en la pantalla esto es en el componente x lo que estoy haciendo es que le estoy restando y por 50 mientras que en el componente y le estoy sumando x por 25 esto lo que hace es que tengo una rejilla isométrica no es la rejilla isométrica perfecta que estoy buscando pero de momento para el papel en este caso además fijémonos como la rejilla finaliza a mitad de pantalla bueno lo que voy a hacer es una vez más con el force le voy a decir que empiezo en menos 25 a cabo en 25 con él y le digo que acabó en menos 25 y que acabó en 25 por tanto ahí al final lo que tengo es una rejilla isométrica en principio infinita muy ineficiente más adelante hablaremos de esto porque no nos tenemos que preocupar llegado un momento de no dibujar más ladrillos de los que valga la pena es decir detectaremos que ladrillos haber en la pantalla sólo dibujaremos los ladrillos pero en definitiva de momento vale tenemos hasta aquí en la pantalla para poder empezar a trabajar ahora quiero sobre ese fondo de césped poner de vez en cuando algún edificio así que mirada atención crea una matriz bidimensional y digamos relleno con terreno de base este doble bucle for ha sido rellenado con terreno de base así que ahora voy a hacer de vez en cuando pongo alguna casa así que para poner de vez en cuando pongo alguna casa voy a poner vamos a ver isométrica art mira me descargo alguna casa alguna que ya estén isométrica bueno cómo estás más o menos a una cosa como estas me hace más ilusión todavía pero el problema es que ésta no es isométrica cuadrada está así por tanto voy a usar esta así que guardo esta imagen escaneada descargo como bar realmente es un coffee shop me voy atención mira muy importante vale problema miradme me voy a suelo png claro lo malo de que el suelo png y ahora se me gusto por correo lo malo del suelo png este en el centro es que si quieres que hacia arriba bien pero se me corta solo pues no pudieron puede crecer hacia abajo por tanto lo que voy a hacer es poner ese grafismo mirad abajo del todo a efectos del juego es exactamente igual no hay diferencia simplemente está un poco desplazado hacia abajo era lo que voy a hacer miradme esque ese bar me lo descargo un momento escalo imagen a 150 mirad me copio y pego y voy a hacer que ese bar coincida en posición con el fondo por tanto mirad me esto es el fondo y ahora esto lo exportó como bar de hecho así que tenemos ya estos dos grafismos el suelo y el bar y ahora vamos a ponerlos en el juego vamos a poner alguno de estos bares voy a decir lo siguiente verdad así que bar edificio es igual a new image y digo edificio punto src es igual a imágenes barra bar png voy a hacer una otros dobles bucle for muy ineficiente era copio este doble bucle for diréis hombre por lo directamente en el otro no aunque sea ineficiente quiero separarlo de momento conceptualmente vaya componente x se repite cuando algo se repite es que más adelante lo sacaré alguna función externa pero de momento no quiero refractor izar y digo el bar el edificio realmente el edificio lo voy a hacer atención todos la pantalla de la siguiente manera mira número es igual a más random y ahora digo número es menor que 0.1 en ese caso dibujo un edificio vamos a ver qué quiere decir esto recordamos que más punto random va desde 0 hasta 1 entonces yo estoy tirando un dado es edad no me va a dar un número desde 0 hasta 1 y yo le estoy diciendo si el número va de 0 a 0.1 en ese caso me dibujo a su edificio sino número dibujas eso qué quiere decir que tengo un 10 por ciento de probabilidades de dibujar un edificio y un 90% de probabilidades de no dibujar un edificio así que guardo recargo y si os fijáis el programa va abriendo bares de vez en cuando bien claro en este caso lo que estamos haciendo realmente es que cada vez que el juego se reinicia estoy poniendo el bar en un lugar diferente así que me gustaría que el juego parara un poco vale así que para que el juego pares mirad voy a quitar el setting out y aquí en juego voy a decir set time out atención y digo function juego como mil no lo sé vamos a verlo recargamos un segundo y ahí se cargan las imágenes y ya tengo las imágenes cargadas en pantalla ya tengo algunos edificios dentro de este juego ahí va que el problema no lo vamos a resolver hoy pero fijaos que aquí parece que todo va bien pero aquí hay algunos edificios que se montan incorrectamente el programa no está cogiendo correctamente quienes adelante y quién está detrás más adelante durante la semana hablaremos de esto pero de momento lo que tenemos es que en uno de cada diez bloques aparece mirar un edificio pensar y también lo cogen correctamente si pongo 0.05 pues lo que estaría haciendo es que en uno de cada 20 bloques aparezca un edificio y si digo 0.5 lo que estaría haciendo es que en uno de cada dos bloques aparezca un edificio se trata por tanto de una pequeña función de probabilidad para decir en qué casos para decir en qué cuadrícula dibujo cada uno de los rectángulos hay muchos controles que en un momento dado queremos poner en este juego como por ejemplo pues añadir diferentes tipos de casa y todo eso pero lo que seguro que quiero hacer ahora es empezar a poner una serie de flechas para poder moverme hacia la izquierda hacia derecha hacia arriba y hacia abajo esto quiere decir por tanto que este juego la gracia de este juego no va a estar en ver únicamente lo que estamos viendo en pantalla sino tener digamos un universo infinito donde podamos construir todo aquello que queramos ya vemos lo si queréis como una especie de minecraft pero en 2 5d entonces lo que voy a hacer ahora mirad voy a buscar por aquí por arrows en imágenes de google hombre algo así entonces busco algo como esto a ver si tiene transparencia claro ahora cuidado vale porque lo que voy a hacer es lo siguiente cuatro flechas pero encima de estas cuatro flechas voy a hacer algo como lo que vais a ver bueno son verdes cuidado no es un color muy afortunado no pasa nada porque mira así acaso lo que hago es que cargó las cuatro flechas y exactamente y en colores digo que de saturn o mismamente y ya está así que sobre escribo cuatro flechas son de 800 x 7 778 no me gusta entonces imágenes tamaño del lienzo 778 para que esté recortado para que sea perfectamente cuadrado así que sobre escribir y ahora voy a hacer lo siguiente mira atención dentro del escenario tengo un canvas bien ok correcto y ahora digo tengo un día y de controles dentro de este vivo y de controles voy a hacer lo siguiente el libro que tiene el ibr controles tienen los siguientes elementos otra cosa el escenario tiene posición relativa los controles tienen posición absoluta están en botón 0 píxeles están en raid 0 píxeles y por tanto esto tendrá vamos a ver los controles aclaró por favor abrir esto le abren esto en varias líneas porque si no llega un momento que no lo veremos y lo que voy a hacer mirar es decir background url imágenes cuatro flechas punto png además lo que voy a hacer es decir qué wifi es igual no sea 200 píxeles y jake es igual a 200 píxeles ahora sí guarde recargo y si todo va bien vamos a verlo dónde está si vamos a verlo por aquí de escenario canvas deep y de control es momento que los controles no me están saliendo y estaba ahí vale consiste en absoluto un sitio en relativo escenario y controles los controles se me están yendo si os fijáis ahí a la derecha cuando deberían irse a la parte debajo del elemento escenario vale pero sobre todo lo que me preocupa es que no se me está viendo background la imagen así otra cosa que os digo claro que sí ya sé porque no se me ve es que background 6 100% 100% ahora guardo y recargo y ahora se ven las flechas pero no se ven donde yo quiero por tanto lo que voy a hacer en primer lugar es atar estas flechas en el botón sí que es correcto aclaró por supuesto y esto es porque el canvas guys 500 píxeles height 500 píxeles y el escenario es guys 500 píxeles hija de 500 píxeles no le estoy diciendo cuánto mide ese escenario por tanto ahora si lo que hacemos es poner las cuatro flechas en el sitio y vamos a empezar a trabajar con los controles para poder detectar cuando hacemos clic sobre cada una de estas flechas esto es un es imposible que yo llegue a detectar colisión con estos botones porque forman parte de una misma imagen pero casi que lo quiero así para trabajarlo todo como un solo grafismo pero ahora voy a hacer lo siguiente dentro del escenario controles quiero decir que vive y d arriba bieber dib y de abajo bip dib y de izquierda dip y vive derecha l ahora cada uno de estos elementos va a tener la clase control de momento nada en la pantalla es normal y ahora digo control va a tener un wifi de no lo sé 50 píxeles un height de 50 píxeles y un background de momento red simplemente para verlo en pantalla y sale eso de ahí y es correcto pero es que feo ya lo sé pero es correcto y yo ahora lo que tengo que hacer es colocar mira con sitio en absoluto colocar cada uno de los elementos en el sitio que le corresponde que os quiero decir pues que todo aquello que es arriba va a ser pero píxeles left no lo sé voy a decir 50% a ver qué pasa sí pero no es decir 20% y no 20 presión tampoco pues vamos a probar 40 por 140 más o menos ahora digo izquierda si queréis voy a poner 0 por ciento en lugar de 0 píxeles digo izquierda es 0 left a ver top 40 % left 0% si os fijáis izquierda entonces derecha es top 40% left no lo sé 90% a ver 1 80% el doble pues tampoco pues nos el 70 por ciento habrá cosas y ahora le digo abajo es igual a top 70 por ciento left 40% que es lo que estoy haciendo pues lo que estoy haciendo es posicionando cada una de estas cajitas super feas lo sé pero las esté posicionando encima de las flechas ahora tendría que afinar un poquito más para que yo sobre ellas pueda hacer clic por tanto mirad en consola voy a decir algo como lo siguiente en el documento web y digo cuando sobre un elemento que tiene la clase de control hagas clic me ejecutas la función anónima que dice console punto log ha expulsado un botón y por tanto ha expulsado un botón mirad guardo y recargo y hago clic y me dice ha expulsado un botón ha expulsado un botón es decir esos cuatro cuadrados están hechos están pensados para ser zonas sensibles en las que yo pueda pulsar lo que voy a hacer ahora es que ahora que he detectado correctamente que estoy haciendo clic en cada uno de los botones ahora los voy a esconder esto para que fuera esto isométrico los voy a esconder es decir voy a hacer qué control background nada pero están ahí mirada la cuestión es que no se ven pero están ahí ha expulsado un botón y ahora en javascript voy a hacer lo siguiente condiciones iniciales bar desfase x es igual a cero que esto es navegación en x en el juego bar desfase y es igual a 0 qué es navegación en y en el juego y ahora hago lo siguiente lo que hago ahora para navegar la atención es algo tan sencillo vamos a verlo como esto que vais a ver recupero el set time out del juego y recuperó el set time out cada 100 y digo que los componentes los dibujos mira esto de aquí más desfase x estoy aquí más desfase y lo mismo aquí abajo más desfase x más desfase y ahora simplemente en el documento 9 digo lo siguiente cuando sobre arriba haga clic ejecutó una función local que dice qué dice desfase y menos es un poco duro voy a decir menos igual a 5 porque si va de píxel a píxel tardaremos una eternidad del mover el escenario hago lo mismo para cada uno de los botones arriba abajo izquierda derecha desfase y más igual a 5 desfase x menos igual a 5 desfase x + igual a 5 y lo que va a ocurrir en pantalla si todo va bien estamos aquí estamos en los controles de los botones voy a comprobarlo verdad es que vamos a ver cuidado es que prestan la línea 57 function desfase haber en las 57 clic funk guión pero me faltaba una t en cada una de ellas ahí lo tenemos y por tanto aclaró fijaos cómo veis cómo empiezo a mover el terreno veis el terreno de fondo por lo menos y arriba y abajo bueno evidentemente verdad lo que voy a hacer lo que voy a hacer es que el sistema no haga un número infinito de variaciones de casas sino que tenga una distribución de casas preparadas desde el principio cuando estamos hablando de poner casas al final estamos hablando de un elemento que se repite muchas veces y cuando hablamos de una repente de un elemento que se repite muchas veces es una matriz por tanto mira voy a hacer lo siguiente declaro una matriz de casas y yo ahora digo lo siguiente bar casa es igual a mi rey y ahora digo lo siguiente atención casa es igual a igual rey aquí en condiciones iniciales decidido para que elementos de array al casa o no y ahora digo bar y es igual a 0 y es menor que 10.000 por ejemplo y más y ahora lo que voy a hacer aquí diez mil cuadros digamos posibles de juego debe ser un millón vamos a empezar con 10.000 voy a decir lo siguiente el número es igual a más punto random y ya está así que sí número es menor que 0.1 en ese caso casa es igual a 1 en caso contrario casa es igual a cero es decir estoy recorriendo la matriz y para cada elemento de la matriz estoy diciendo si hay casa o no hay casa así que ahora en la parte de abajo he dejado esta parte de arriba aquí lo he sido para cada elemento de array si hay casa 1 me voy atención aquí a esta parte de abajo era miradme y no voy a hacer un más punto random no lo que voy a hacer es lo siguiente contador es igual a cero aquí al final contador + + y aquí lo que hago es lo siguiente vamos a ver casa de contador es igual a 1 en ese caso dibuja me un edificio vamos a verlo realmente esto tendría que ir todo aquí dentro así que ahora os lo pongo en pantalla comprobamos que funciona y lo podéis copiar vamos a recargar todo ok y fijaos por tanto que las casas no van cambiando con el tiempo sino que las casas permanecen siempre igual porque las casas voy a pasar el juego a 100 porque las casas se crean en la matriz principal veis ahí por tanto que puedo subir puedo bajar puedo navegar por este mundo infinito y no se me están re declarando en casas en cada momento sino que las casas están inicialmente creadas en una matriz al principio del juego voy a empezar por tanto nos quedamos con la corrección que he acabado haciendo en el componente y del terreno lo que he hecho es anular si veis esto que pone y por cero esto es algo que evidentemente se puede eliminar vale entonces se segrega por cero va a ser cero y por tanto finalmente al final la corrección de desfase la encontramos tanto en x como en y dentro del componente y lo que quiero ahora es implementar un poco de zoom y por tanto para implementar un poco de zoom voy a hacer lo siguiente zoom icons entonces voy a entrar en su maicon por ejemplo algo como esto no la verdad es que me gustaba más el zoom icons png transparente entonces bueno algo que tengan los dos a la vez y que a ser posible sea transparente no pasa nada porque si no es transparente me lo generó yo entonces voy a abrir el gimp y voy a retocar la imagen a los lo paso entonces lo que voy a hacer mirar es que voy a abrir las cuatro flechas a continuación voy a abrir en sant en hd en isométrico en imágenes voy a abrir zoom hay con miras que tiene transparencia perfecto así que me gustaría el color la transparencia capas y transparencias y con el alfa no está eso porque estoy en escala de grises entonces a imagen modo rgb y ahora sí transparencia color a alfa y le digo que el blanco quiero que sea transparente porque tras lo que puedo copiar y pegar y ponerlo en la nueva capa y por tanto digamos colocarlo por ejemplo por ahí para escalar tengo esta herramienta estos iconos con lo cual tengo el zoom más y el zoom menos sobre escribo cuatro flechas y por tanto la progresión a la vez que ejecuta el juego pues sabré que tendré estos dos botones dentro de las flechas tras lo cual pues voy a crear un par de diversos para hacer que podamos hacer clic dentro de los botones a continuación una vez que tengo las dos flechas las cuatro flechas quería decir más el zoom me voy a ir a html y en el mismo sitio donde tengo arriba abajo izquierda y derecha pues voy a poner ahora div iré trump clase control y d zoom out class control y cierro el dip tras lo cual dejadme que le ponga un rgb 02 55 000 punto 3 simplemente mirad para que veamos un momento otra vez dónde están los controles y por tanto veamos que ahora tenemos dos controles aquí arriba nuevos que son el zoom in y el zoom out son dos rectángulos que ahora como os podéis imaginar pues tengo que me out decirle que todo es igual a 40 por ciento pero left es igual a pues no lo sé vamos a ver el left pues al 30% y le voy a decir que el wifi sea de vamos a verlo de 25 píxeles vamos a ver cómo queda esto casi ha acertado left 35 por ciento y ahora sí tenemos un rectángulo rojo justo encima de la lupa con el signo menos con lo cual simplemente me queda copiar esto os muestro las dos cosas tanto el html como el css y por tanto ahora 40 por ciento les pues 55 por ciento y este es el zoom y por tanto ahora aguarde recargo casi y lo paso al 50 por ciento vamos a verlo ahora y ahora si tengo dos nuevos rectángulos en este caso situados justo encima de las lupas de más y de menos ahora cuando lo tengamos lo que haré es desactivar el color rojo semi transparente para que el usuario final no lo vea así que interactúe con ello pero no lo vea pero de momento lo voy a dejar porque en la pantalla nos ayuda a saber exactamente qué estamos haciendo con esos dips arriba abajo izquierda derecha y para qué sirve todo esto que estoy creando lo que vemos por tanto es que necesitamos un valor de zoom inicial para el programa así que en las condiciones iniciales de juego voy a hacer lo siguiente voy a hacer aquí un separador ahí para marcarlos bien donde empiezan y donde acaban las condiciones iniciales de juego para que veáis que las condiciones es todo aquello que ocurre desde esto hasta esto entonces vengo aquí y digo creo un valor inicial para el zoom del juego entonces yo ahora lo que hago es decir bar zoom es igual a 100 por ejemplo entonces vamos a darnos cuenta simplemente crear una variable zoom la asignado por ejemplo el valor para brace vamos a darnos cuenta que cuando yo estoy dibujando dejadme que pegó un salto voy a ir hasta la función de juego cuando yo estoy dibujando y estoy dibujando aquí ahora me vuelvo a la componente x me vuelvo a la componente y verdad entonces voy a decirles lo siguiente veréis no es curioso este 25 lo dejamos estar resolver es el número de baldosas que creamos solo se queda así se puede cambiar pero no depende de lo que voy a hacer ahora nos fijamos que 50 es la mitad de 100 y que 50 es la mitad de 100 y que 25 es un cuarto de 100 y qué tamaño evidentemente este es curioso vale entonces lo que voy a hacer es qué tamaño es igual a zoom 50 es igual a zoom partido por 2 50 es igual a zoom partido por 2 y lo podéis poner un paréntesis mejor para que el programa recuerde los donde procedencia y si no nos recuerda pues lo indicamos zoom partido por 2 zoom partido por 2 es un partido por 4 y 25 es un partido por 4 con lo cual si todo ha ido bien si todo ha ido bien lo que ocurre es nada es decir yo recargo el juego y el juego sigue funcionando exactamente igual cómo funcionaba hasta hace un momento pero evidentemente lo que ahora quiero es de alguna manera responder a ciertos eventos y que cuando haga clic en esos botones pues cambie el zoom del juego y a continuación vamos a especificar mirad que cuando sobre su min zoomin haga clic en ese caso ejecuta una función que dice zoom igual a 5 ahora veremos es menos o más y cuando haga zoom out pues son más igual a 5 aprovecho para presentaros esta función que hice ayer es la copia 6 porque ya la hice en la hora de práctica pero básicamente es una función que hace lo mismo con las teclas de las flechas vale por tanto lo que podría hacer ahora es ampliar también esta función de la misma manera que puse los cuatro códigos para los cursores del teclado pues también poner por ejemplo las flechas de más y de menos las teclas de más y de menos para hacer zoom hacia adentro y hacia afuera un poco para que el juego por accesibilidad sea jugable tanto en la plataforma táctil como con un teclado en la pantalla que cada uno pues trabaja de la manera más cómoda posible entonces javascript charco les digo plus en un pad vamos a verlo aquí code values for numérique tumba de eso es vamos a verlo transformadas también puedo hacer esto jquery ciprés porque él jquery key press mirad tiene una demo muy chula que te dice no pulsa me algo y yo te digo que tecla ese entonces yo pulso el más y me dice que el kiko qué curioso es el 43 no me lo esperaba espero vale otra donde más alto pues le digo si pulso el 43 pues en ese caso zoom es igual a menos igual 5 y si pulso el vamos a ver el menos el cuidado el menos es el 45 tampoco me lo esperaba tan bajo zoom más igual a 5 cuidado en este caso con los cursores hay una cuestión y es que en lugar de usar que hay pres espero que os deis cuenta estoy usando el que hay down porque los cursores son unas teclas especiales no responden akipress sino que únicamente responden aquí down así que bueno guardo recargo vamos a probar si se ha funcionado entonces le doy al más vale de momento lo que estoy haciendo es zoom sobre el terreno veis ahí zoom sobre el terreno pero no sobre las casas compruebo el más y el menos vale el más y el menos no me están funcionando ahora vamos a por ellos entonces vale ahora coge otras teclas entonces la idea es que tengo que hacer lo mismo que he hecho con el zoom ahí va mira aquí abajo de vez en cuando pongo alguna casa pues donde me encuentro 50 pongo un partido 2 donde me encuentro 50 pongo un partido 2 donde me encuentro 25 pongo es un partido de 4 y donde me encuentro bien pues pongo azul así que guardo y recargo y comprobamos fijaos como agosto hacia afuera y zoom hacia adentro para y de esa manera puedo comprobar perfectamente me falta la función de las teclas de zoom pero bueno puedo comprobar perfectamente cómo me puedo alejar funciona al revés estoy viendo que me está funcionando al revés veis el psuv más se aleja el zoom - se acerca bueno eso es típico con lo cual aquí le pongo un más y aquí le pongo un menos y asunto solucionado así que guardo recargo ahora fijaos cómo otra vez ah claro es que además va aquí más y menos creo que lo ha cambiado a y bueno ahora veremos ahora si estuv más para acercar me hizo menos el azul del 0 no se mueve pero es ahora mismo me da igual y ahora puedo acercarme por tanto y puedo alejarme voy a capturar a ver qué teclas son el más y el menos del nombre según esta tabla el agua y el substrato son el 107 y el 109 con lo cual voy a probarlo entonces digo en lugar del 43 es el 107 en lugar del 45 es el 109 por tanto guardo recargo y ahora si efectivamente ahora si responden a esas teclas de zoom y ni sumado techo la puedo dejar pulsada y responder recurso la mente bien por tanto ya tenemos un zoom una vez que tengo un zoom permitidme que esconda estos dips que ya los hemos usado por tanto voy a decir background es igual a rgb a 000 y así tengo los dips pero están transparentes y no los puedo ver a continuación lo que quiero no es que el sistema mira por aquí no es que el sistema cree casas aleatoriamente esto lo he querido para empezar un poco para ir colocando casas pero a continuación lo que quiero sin embargo es que yo pueda definir cuáles son esas casas por tanto voy a quitar aleatoriamente voy a quitar el foro que tengo aquí decidido para que el elemento de array hay casa o no así que voy a putear este código voy a voltear este código refrescamos en la pantalla y vemos que no tenemos de momento ninguna casa es decir que hacía este código lo que hacía era recorrer la matriz y a partir de recorrer la matriz empezaba a crear casas yo no quiero hasta ahora yo lo que quiero es ser capaz de que podamos crear nuestras propias casas donde queramos hoy todavía no vamos a detectar el clic sobre la pantalla eso es más complejo vamos a hacerlo de una manera más sencilla de momento para programar más compleja para el usuario para jugar evidentemente vale pero lo que queremos es ir avanzando poco a poco y progresando poco a poco en este juego así que me voy a html y voy a crear un nuevo deep y de crear a casa y en el dis crea casa voy a hacer un input type y de color x place holder es igual a dime la coordenada x a otro input type text y ve y place holder dime la coordenada y el place holder igual es demasiado grande vamos no mira está bien perfecto y por ultimo un botón button y crear un nuevo bloque con el id crea bloque con lo cual si todo ha ido bien tengo aquí un campo input donde dice dime la coordenada x dime la coordenada y cuando pulse crear nuevo bloque que de momento no hace nada lo que hará es la equis que les puesto aquí la y que les puesto aquí y te pondrán un bloque en la ubicación concreta lo que hago ahora es que me voy a decir lo siguiente creo un contador inicial para la matriz y digo para madrid de crear casas y crees y digo cuenta matriz es igual a 0 bar cuenta matriz es igual a 0 y por tanto ahora donde estaba ese bloque digo lo siguiente creo un elemento nuevo de la matriz y dijo cuando sobre el elemento crea bloque el elemento con el de crear lo que haga clic quiero ejecutar una función local qué va a decir lo siguiente cuenta matriz más y ahora bar x es igual a x punto vale el valor récord x y es igual a y punto mal y por tanto lo que digo ahora es ese elemento de la matriz que variable tiene y digo vamos a hablar casa de cuenta matriz es igual a 1 eso está claro pero ahora tengo que replantear el juego porque el programa simplemente iba rodando lamadrid y yo lo que quiero hacer ahora es ser capaz de decirle cada uno de estos elementos de la matriz que qué posición tiene por tanto dentro de condiciones iniciales de juego donde declara una matriz de casas recordáis ayer que aquí declara una matriz de casas digo bar casa x es igual a new array bar casa y es igual a new array y por tanto ayer lo que hacía era declarar un solo parámetro para decir si cada casa estaba activado no estaba activada hoy mantengo ese parámetro pero además creo dos parámetros más que son dos matrices donde digo que cada una de las casas tendrá un parámetro que es su posición en x y otro parámetro que es su posición en y entonces ahora tengo que replantear este código el código de poner el terreno no relleno con un terreno de base s quiero que sea así lo que tengo que replantear es esta estructura de control mirad que lo que hace es a el terreno elemento a elemento es decir coge el terreno bloque a bloque en x en y antes iba diciendo pongo k'asa no pongo k'asa pongo k'asa no pongo k'asa yo no quiero ahora eso yo no quiero ahora revisar el terreno y decidir pongo k'asa o no pongo a casa lo que quiero hacer es recorrer la matriz y para cada uno de los elementos de la matriz ver dónde está la equis y dónde está la y de esa matriz entonces lo que hago por tanto es lo siguiente en primer lugar dijo casa x de cuenta matriz es igual a x casa y de cuenta matriz es igual a y es decir por una parte para cada elemento de la matriz no solo almacenó si la casa está activa o no sino que además también almacenó la x la y que he indicado aquí lo no difícil pero sí elaborado mira va a ser esto vamos a ver este bloque luego lo eliminaré y ahora yo no quiero realmente recorrer x y no yo quiero formar y es igual a cero quiero recorrer la matriz y es menor que cuenta matriz punto link punto y coma y más entonces para cada uno de estos elementos de la matriz ya no recorro el tablero sino que recorro la cuenta matriz lo que hago es poner su componente y su componente es la siguiente mirada voy a hacer esto más grande si casa aquí vamos a ver si casa es igual a 1 es decir si está visible pues casa x vamos a ver el componente x perdón digo casa x bay casa y de ahí desfase x lo dejo como esta casa y vi casa xvii el desfase lo dejo como está el fútbol dejó cómo está y ya está por tanto si todo va bien y yo creo que sí dejadme probarlo y ahora os pongo el código para que lo podáis ver verdad recargo y ahora digo 11 crea un nuevo bloque vale vamos a verlo déjame diagnosticar me voy a la consola bien y cuando hago clic digo con sólo el punto no creado a ver crear lo que crea matriz más vamos a verlo y digo un ayuno pero no bloque creado va a probar 22 creó un nuevo bloque creado pero no lo estoy viendo bien con lo cual vamos a ver aquí donde dibujo las matrices console punto log bloque 1 y 1 creó nuevo bloque pero no está entrando dentro del bloque así que es menor o igual 1 y 1 creado pero cuenta matriz punto link entonces cuenta matriz es igual a 0 cuenta matriz + + un segundo cuenta matriz cuando recargo 1 y 1 2 y 2 bien en principio esto funciona correctamente no está entrando aquí con sólo el punto no entro 1 yo no pero no entra juntos hola vale con lo cual lo que está ocurriendo es que este foro no lo está ejecutando ninguna vez cuenta matriz punto link vamos a ver la longitud de la matriz en javascript efectivamente la cuestión es que cuenta matriz es una variable normal no es un array con lo cual no quiero el link sino lo que quiero directamente es la matriz ahora está entrando con lo cual ahora puedo hacer lo siguiente le digo uno y uno creó un nuevo bloque y atención una cosa ya sé que me diréis que esto es lo menos jugable del mundo vale lo sé era esto es cero esto es uno y uno ahora digo quiero otro bloque en 10 y creó un nuevo bloque y me crea un nuevo bloque en 10 esa posición no es muy correcta vale vamos a verlo quiero un nuevo bloque en 22 y me crea un nuevo bloque hay este es el caso de un poco raro vale quiero 1 bloque en 33 ahí quiero un bloque en 0 3 crea un nuevo bloque me aparece ahí lo curioso en alguna posición no lo he hecho correctamente porque el 0-3 debería aparecer por ahí a ver 13 y 113 con lo cual debe obtener algún error porque los ceros no lo escoge bien vamos a poner ahora 23 bien fijaos que estos de aquí van a escalonados vamos a verlos 1 y 1 2 y 1 ahí está 3 y 1 s va mal 01 ese va mal 1 s de ahí pero si hago 12 me vaya 13 14 qué curioso los bloques de las casas van mal cuando no tendrían que ir mal si no tendrían que alinearse vamos a ver qué pasa con ellos lo que ha pasado no simplemente que en el dibujo de la casa me he dejado sin sustituir una equis por aquí esta y la puedo quitar y una y por aquí con lo cual había un par de variables sin sustituir pues ahora sí que veréis que funciona correctamente una de las novedades de html5 es que en lugar de crear este tipo de slider es momento que desactivé este con solo el punto del ojo bien entonces en lugar de crear el tipo de elementos de texto simplemente aquí donde pongo input type text pongo input type number entonces el html cambió mirad los text por number y fijaos que aparecen un par de flechitas que me permiten subir y bajar los números amén de poner números como lo hacíamos antes vale por tanto si queréis poner números negativos pues simplemente podéis pinchar hasta que salgan negativos y ya está pero bueno esto simplemente un detallito el hecho de que se puede poner number realmente al final no lo haremos así al final lo haremos pinchando en la pantalla al hacer clic que aparezca esto y tal personas complejo vale por tanto de momento hoy lo que quiero es empezar con este tipo de slide es por ciento vamos a probar que funcionan entonces crea un nuevo bloque y ahora digo 1 y 0 correcto se monta encima de eso no me preocupa ahora mismo 13 y así fijaos cómo voy creando un nuevo barrio y ahora quiero 24 y ahora quiero 04 y fijaos cómo puedo ir eligiendo exactamente dónde donde pongo mis bloques pero nos enfrentamos al que yo creo que será el problema más complejo de la clase de hoy y es como que este no era lo más complejo no lo que viene ahora lo más complejo no es complejo en cuanto al código que también lo es sino también es complejo en cuanto a la al concepto que es el concepto de persistencia con el juego de la nave realmente el que cada vez que empiezo el juego me reiniciará el juego y si yo he matado un malo que el juego que el malo vuelva a aparecer cuando reinicio el juego es lo que se supone es decir yo no espero que el juego tenga memoria y que si yo me he cargado un mal o ese mal o no aparezca es que la próxima vez que recargue el juego como mucho podría requerir memoria de la puntuación que he sacado pero poco más en cambio en este tipo de juego en el juego isométrico la memoria la persistencia es algo que se da por hecho porque es un poco rollo el que yo ahora me cree una ciudad pero yo sé que en el momento que cierre o incluso un y cerrar en el momento que yo regrese la pantalla todo vuelve a empezar desde cero vale por tanto la persistencia en algunos juegos como este es lo que me va a permitir pues oye virtualmente crearme una ciudad infinita es decir saber que yo estoy jugando y que yo ahora igual recargo pero cuando recargue la ciudad se va a mantener e incluso os diría yo y ahora puedo cerrar la pantalla y cuando vuelva a arrancar la pantalla que yo puedo apagar el ordenador si quieres volver mañana y que la ciudad va a estar ahí todavía vale por tanto vamos a ver qué mecanismos de persistencia tenemos para conseguir este objetivo vamos a continuación a hablar de la persistencia entonces para persistencia tendríamos varias alternativas hemos comentado por tanto que cookies es un método para conseguir persistencia en el navegador y para una pieza de información está bien para múltiples fechas de información no lo está un archivo de texto sería una obra de solución a mí de hecho eso se llama flat file en cuanto a persistencia es decir persistir en un archivo de texto plano porque semaf las file a mí me gusta mucho es una filosofía que me gusta mucho y la uso siempre que puedo pero en este caso javascript por razones de seguridad no nos deja persistir en archivos de texto plano entonces es una buena alternativa en este caso es usar una cosa que se llama web sql entonces web sql es un entorno donde podemos guardar información en el navegador con la misma estructura y con las mismas ventajas que tenemos en un sistema sql en primer lugar por tanto en condiciones iniciales del juego mirar voy a hacer lo siguiente condiciones de interés de juego no esto es hacer un apartado web sql y lo voy a hacer aquí voy a hacer un apartado solo para web sql y ahora voy a copiar el siguiente código y antes de ello atención a la pantalla voy a hacer esto miradme voy a revisar si veo que tengo en research es aparte de cookies que el local juegos de momento no el guardado ninguna cookie tengo web sql y tengo index debe entonces esto es novedad de html5 de hecho no hay mucha gente que lo use no es de lo más famosa de html5 pero es perfectamente posible para estos casos viene muy bien entonces en webb sql fijaos insisto que no hay nada quiero que veáis que 9 sql está vacío vale voy a copiar me este código y este código es el siguiente y os lo voy comentando dice baar debe creó una variable bebé se podría llamar lo organizaron de menos pero dice open data veis se va a llamar agenda no se va a llamar isométrico sin acento por favor isométrico en su versión número 1 y digo ajena telefónica pues se va a llamar esto base de datos para el juego a continuación el siguiente parámetro que viene es muy curioso de momento dejadlo en dos por un byte y por un byte por un cai por un k entonces en este caso lo que estoy diciendo es la cantidad de memoria que va a ocupar esta base de datos es un poco al contrario de cualquier otro sistema que haya disponible conocer de sql donde dices no tienes la base de datos tuviera llenando y voy creciendo en web sql no con sql como en muchos incluso formatos de texto plano tuvieses exactamente el número de bytes el límite que vas a escribir pero 2 x 1024 ahora mismo es una cantidad suficiente para ir empezando a trabajar pero son 2 megas es decir es un club byte es x 1024 es un megabyte multiplicado por dos son dos megabytes 2 megabytes para lo que vamos a hacer hoy en clase creo que nos sobra por todas partes entonces a continuación yo he creado una variable para ahora crear una transacción sobre la variable por tanto debe punto transaction creó una función con un parámetro y digo atención create table si no existe para que no me la mancha que cada vez y digo que estoy creando la estructura de la tabla y digo agenda no posiciones y voy a decir coma por equis coma y como activo estoy creando una tabla cómo se forma tabla de excel donde digo en esa tabla voy a guardar de momento creo yo cuatro condiciones voy a guardar el id voy a guardar la coordenada x voy a guardar la coordenada y un campito más que se llama activo así que si todo ha ido bien mirad si todo ha ido bien guardo recargo veis que llueve se cuele está vacío pero ahora recargo y si no ha habido ningún error ahí va ahora web sql tiene una pica y si pincho en la pica tiene isométrico por cierto que podemos hacer tantas bases de datos como queramos tampoco es normal vamos a hacer una pero se pueden hacer varias y eliseo métrico encuentro una tabla llamada posiciones que sí que vale que la tabla posiciones evidentemente está vacía no puedo esperar que ella esté llena pero de momento lo importante es ver que he creado una estructura que es mucho más grande y mucho más estable que una cookie y donde además en revisar hacer un revisado hacer un parcheado de todas las cookies que hay una página web no es un suicidio en cambio hacer un parcheado de una tabla de sql es claro exactamente es select all from tabla lo que sea vale por tanto ahora veréis que aunque es bastante más complejo que de escribir que una cookie pero finalmente nos va a dar muchas más ventajas lo que voy a hacer ahora antes de hacer que mi programa realmente empiece a guardar posiciones lo que voy a hacer es realizar un guardado de prueba para comprobar que todo va bien entonces por aquí vamos a ver puebla no este es un select esto quiero un insert entonces voy a hacer una transacción el pueblo este me lo voy a quitar moment in a ver un segundo que os lo comentó y digo creo una base de datos y ahora digo voy a insertar un registro de prueba y digo insert into posiciones y ve como por equis y como activo values y voy a hacer una cosa mira esto fuera esto es una cosa del último ejercicio que dice que es 1,5 1 es decir en el nivel 1 inserto la coordenada x 5 la coordenada y 5 y activo en este caso es igual a 1 esto fuera y esto fuera eso es de otro ejercicio que hice el año pasado así que si esto ha ido correctamente si esto ha ido correctamente ahora me vengo aquí para que lo podáis ver me vengo aquí recargo y quiero que veáis que ahora dentro de web sql existe la base de datos y su métrico dentro de la base de datos isométrico existe posiciones y mira tú por donde ya tenemos un primer registro insertado dentro de la base de datos que si os fijáis es el id es igual a 1 coordenada x es igual a 5 coordenada y es igual a 5 activo es igual a 1 y como os decía hay algunas versiones de chrome que anti anteriormente te ponen row y d es igual a lo que sea tampoco os sorprendáis si aquí o en casa o donde sea es haciendo esto 16 porque no me aparece el ruido que estoy haciendo mal igual no está haciendo nada mal igual es simplemente que te ha tocado una de las versiones de chrome que no sé por qué te esconden el río guaire vale pero muchas de ellas últimamente lo que hacen es mostrarlo así que estos cuatro campos los he creado yo que es de core x core y activo y road es un campo que me añade un y de ese sí clave primaria auto incremental que me añade automáticamente el sistema lo que quiero ahora por tanto es que este código que tengo aquí para copiar y pegar me va a servir de hecho voy a cortar y me va a servir para que cada vez que yo creo un elemento nuevo de la matriz atención todo es la pantalla lo voy a cortar me lo llevo porque si no cada vez que recargan me hará un registro nuevo y tampoco quiero eso entonces me lo corto y me lo llevo a creó un elemento nuevo de la matriz y hago lo siguiente insert into posiciones y atención hago lo siguiente i d es cuenta matriz por equis es igual a bueno x directamente x core y es igual a y activo es igual a 1 que no vais para esto va perdón esto va aquí en los barrios esto es ir como por equis por y coma activo es decir primero indicó cuál es la estructura de la tabla y luego indicó los valores que voy a insertar si esto ha funcionado correctamente ahora voy a hacerlo siempre atención recargo vuelve sql ahí tengo mi posición mira creo un bloque en 22 crea un nuevo bloque pero lo importante es que si yo ahora recargo atención señora recargo ahí todo ha funcionado correctamente ahí tengo que con el líder vale uno en este caso he creado el elemento 22 si ahora creo un elemento mirad en 55 claro no está en 11 bien entonces ahora 55 estará por ahí de hecho ahí está le digo 21 pero mira estoy creando bloques entonces lo que ocurre es que aunque no aparezcan ahí hay están entro y salgo y aparecen todos los bloques que yo he ido creando ya lo sé tengo ahora mismo unos cuantos sitios duplicados me da igual vale pero fijaos ahí como por tanto el programa ya es capaz de recordar cada vez que yo creo un nuevo bloque me lo mete dentro de esa base de datos el problema está por supuesto mirada en que yo ahora recargo en la pantalla web sql recuerda a todos los datos que yo he puesto pero tengo el pequeño mini problema de que no estoy devolviendo los bloques en pantalla hasta ahora me he preocupado de hacer una transacción de inserción pero ahora a continuación lo que tengo que decir es que cada vez que recargue lo que voy a querer es sacarme todos los registros de la base de datos puebla me las casas y a partir de ahí continuamos jugando es decir recuperar todo lo que hice en la edición anterior del juego y a partir de ahí continuamos jugando tengo unos cuantos duplicados así que dejarme que haga dejadme que haga un botón mira la atención por aquí abajo voy a hacer un botón bouton atención borrar memoria por si me interesan al momento borrar manualmente la memoria borra memoria y le digo básicamente que por aquí es un botón que tiene de líder por la memoria mira por la memoria con lo cual hago lo siguiente y vivo cuando sobre borra memoria haga clic ejecutó una función local y la función local va a copiar esta transacción mira copia esa transacción para decirle del it all from posiciones de élite fueron posiciones pues sabes que más que el front posiciones truncado béisbol posiciones trunca y table posiciones quiere decir vacía para la posición es entonces si todo va bien guardó recargo un error donde tengo el error en el especto que hay legal porque me falta meter aquí una comida para cerrar el string entonces tengo aquí borrar memoria vamos a comprobarlo tengo isométrico posiciones si todo va bien le doy a borrar memoria entra en posiciones todavía no vamos a ver por el porqué bien en principio bueno drop table si no pero claro es que drop table posiciones vamos a ver lo tengo ahí posiciones le digo borrar memoria vale y posiciones ya no existe con lo cual ahora lo que voy a hacer es lo siguiente del table posiciones y voy a creer create vol existe es decir la borró ya continuación la creo vamos a verlo por tanto guardo y recargo isométrico ahora mismo tiene posiciones y si yo digo 22 creo 32 creo y ahora le digo borrar memoria con lo cual me la vacía lo que he hecho básicamente es eliminarla y a continuación volverla a crear simplemente es repitiendo el código que tenía arriba ahora por último lo que quiero hacer es que cuando empieza el juego no ya cuando el juego empieza a nuclear sino en las condiciones iniciales del juego me vengo aquí creo un elemento nuevo de la matriz antes de eso y digo saco todo lo que exista previamente en la base de datos esto es un poco más complejo tampoco mucho más porque mira tengo el código por aquí y aquí está faros quietos un segundo porque eres madre mía no será todo eso no es todo vamos a ver resultados igual a una matriz transactions electo el from lo que sea y aquí está y esto fuera y necesito esto un momentín vale esto va afuera esto sí que lo necesito porque esto es el correspondiente al wild en otros lenguajes fuera y esto templo esto fuera mantén tus limpio vamos a ver y digo para todos los elementos de la matriz voy a hacer lo siguiente foro no os cuento está diciendo el resultado es una matriz así que quiero realizar la siguiente transacción la asignatura sección es selecto all from posiciones y arrancó una función que tiene tx y rs fíjate una cosa aquí tengo una función aquí tengo una función corro el riesgo de cometer el mismo error que es básicamente no cerrar los dos vale y ahora lo que voy a hacer dentro de esta función va a ser simplemente recorrer el elemento de la matriz y sacar para cada uno de los elementos la posición x la posición y el tiré del elemento a continuación por tanto voy a seleccionar este contenido vamos a ver voy a borrar momento esto voy a comentar un momento esto y voy a decir cuenta matriz déjame verlo dónde estás cuenta madrid dónde están las condiciones iniciales aquí cuenta matriz más así que mira cuenta matriz más y por tanto yo ahora digo por equis cuenta matriz es igual a row por equis y de cuenta matriz es igual a row y espera que te lo digo no os mováis color y no a escasa x madre no era corea era casa x casa y escasa de cuenta matriz es igual arrow activado ya puedo eliminar esto y por tanto si todo va bien si todo va bien ahora cada vez que el juego empieza lo que va a hacer es introducir crear elementos en la matriz tantos como haya en la base de datos voy a probarlo por tanto recargo bien parece que hay un error vamos a verlo un momento unexpected toquen en la línea 135 y esto es por lo siguiente esto es porque este foro no lo he cerrado correctamente ya que me he cargado la llave antes de tiempo así que ahora en principio si recargo mirada de atención vamos a ver revisor 6 web sql de momento no hay nada y mirad me dibujó una casa en 22 crear un nuevo bloque no se ve pero está ahí ahora dibujo una casa en 02 y está ahí sí todo ha ido bien ahora las casas están aquí en la base de datos pero lo más interesante vamos a cruzar los dedos es que ahora le doy a recargar vale me voy a isométrico me voy a posiciones y en principio las casas no han aparecido en la pantalla con lo cual vamos a ver qué nos falta se le front posiciones y voy a hacer una cosa aquí al final voy a decir console punto log cuenta matriz también lo que puedo hacer es crear una casa nueva en 03 una casa nueva compruebo cómo se crea correctamente y si quise de haber creado correctamente porque el ide es correcto vale vamos a verlo con lo cual el ide fijaos que es tres miran recargo y en console vale vamos a verlo la matriz es dos puntos más cuenta matriz la matriz es cero esto es lo que no es correcto entonces si le estoy diciendo cuenta matriz y la matriz cuenta matriz es 0 es porque no está pasando por este bucle foro select o from posiciones ins o métrico posiciones y parece que no está cogiendo correctamente los datos vamos a verlo de hecho le digo con soul punto log estoy aquí dentro guardo y recargo vale estoy aquí dentro sí que parece que lo hace luego entonces porque cuenta matriz me dice que es 0 cuando debía ser al menos más pero transaction cuenta matriz espera que te lo diga con soul punto lo cuenta matriz y digo la matriz es 1 2 y 3 pero fíjate que dice la matriz es 0 de alguna manera este dato se está ejecutando después es decir la madrid es cuenta matriz vamos a verlo dice la matriz es 0 la matriz es 1 la matriz es 2 la matriz es 3 vamos a verlo estoy aquí dentro ya no lo quiero la matriz es uno la matriz es 2 y la matriz es 3 así que alert cuenta matriz recargo y me dice 0 con lo cual como pueden ser cuenta matriz 0 si aquí me llega a decir que es 3 nos parece que está tardando unos milisegundos en la información por tanto si se tarda unos milisegundos en la información vamos a verlo cuando llega a la función juego vamos a verlo ahí cuando llega ahí a cuenta matriz le estaba diciendo que es 0 voy a decir una cosa moment in atención fijaos voy a decirle que cuenta matriz al principio es 5 a ver qué pasa recargo 5 sí pero pese a que va sumando no me crea correctamente déjame que quite el ajuste de texto no me creía correctamente estos elementos vamos a ver casa x de cuenta matriz es igual a row x voy a decir con sólo el punto log probablemente vale pero tengo que hacer eso de trabajar más casa x + casa y 522 ahí lo está cogiendo pero cuenta matriz no vamos a verlo voy a probar a primero cargará el juego voy a hacer una función llamada función carga bebé la función carga debe va a hacer todo esto y voy a decir que la función carga debe va en un set out que se ejecuta tras un segundo de cargarse el juego un poco para darle tiempo al juego de aparecerá fijaos qué se carga y un segundo después mirad aparecen las puntuaciones ahora lo que quiero hacer al final bien es decirle con sólo el punto al ojo cuenta la matriz a ver qué tal recargo y me dice 5 cuenta matriz ahora lo está cogiendo lo que no acabo de ver es porque no me pintan las casas con sólo un tono voy es decir se supone que está pintando y las casas pero de alguna manera parece que no les he puesto la información correcta x de cuenta matriz por equis vamos a ver por qué no me cuadra la razón por la que no funcionaba es más sencilla de lo que había y de hecho suele pasar y es que la columna yo le había llamado ha activado y la columna es activo por tanto es activo por aquí por qué pues porque si el valor de activo no lo estaba cogiendo correctamente fijaos que si casa 1 es igual a 0 sólo entonces dibuja bien pues ahora comprobamos por tanto mirad de hecho esto este es el time out podría hacer que tardará un poco menos caracas y mira de momento lo que voy a hacer es borrar un momento y hago lo siguiente coordenada pero uno coordenada menos 11 coordenada menos 12 coordenada menos 22 4 y 5 y me he creado ya por ahí un barrio lo que quiero comprobar por tanto es cómo mirar ahora le doy a recargar y compruebo como incluso si queréis puedo cerrar el navegador puedo volver a abrir el navegador recargo el juego y me aparecen las casitas tal cual la se creado eso quiere decir que gracias a este web sql gracias a esta web sql lo que estamos haciendo es guardar de manera permanente hasta que queramos le damos borrar memoria y lo borramos pero estoy guardando de manera permanente y persistente la información en mi navegador qué quiere decir por tanto que ya puedo hacer la ciudad todo lo grande que quiera que pues en definitiva como veréis pues voy a poder no perder esa información cada vez que salgo del juego ahora a continuación me gustaría programar aunque sea mínimamente el hecho de poder elegir entre varios edificios así que atención fijaos mírame claro pero cuidado aquí me va a hacer falta otra tabla otra columna dentro de la tabla ahora veréis dentro del gimp me voy a abrir bar y voy a buscarme un par de edificios más así que atención isométrica art me busco de momento imágenes que sean cuadradas a los bosques muy bien hoy a ver casi está más bonita está por aquí y eso también mola bastante y la granjita entonces cojo imagen con imagen cojo imagen entonces madre mía está la cajita del chocolate entonces me guardo esto y me guardo esto vale y ahora en el gym exactamente hasta que tenemos gráficos generados por nosotros que eso será al mes que viene entonces género esto y esto de aquí y miradme con lo cual copio pego y lo que necesito esto es muy importante es saber que coincide de lo que coincide quiero decir que pongo ese elemento ahí y tiene la misma forma tiene la misma geometría tiene la misma base ahí que el barco bien esto es por tanto mirad torre png vale ahora por aquí la casita del chocolate bien vamos a ver la calidad es la calidad y algo así venga cortes tendréis tenga a ver mirar por aquí cojo eso y esto es casa vamos a hacer una cosa esto va a ser casa 3 veréis y por último la granjita la escalo me la llevo al sitio más pequeña y esta será casa 4 ahora miradme me voy a ir a la carpeta imágenes y voy a hacer esto no va a ser bar sino que va a ser casa 1 esto va a ser casa 3 casa 4 y me falta la torre debajo que es casados ahora me voy a javascript bueno primero que html y digo vive y d casas y pongo unas cuantas casas y digo img src imágenes barra casa 1 punto png y de casa 1 cargo todas las imágenes casa 2 casa 3 casa 4 casados casa 3 casa 4 en el css voy a decirle que casas img que flote a la izquierda para que las casas no aparezcan de arriba a abajo sino que aparezcan de izquierda a derecha si os fijáis aparte de que juraría que hay un error hay dos errores vamos a verlos draw y más claro porque me he cargado la imagen evidentemente entonces ahora me vengo a javascript pero bueno ahí tenemos las casas como podéis ver entonces me vengo a javascript y le digo la casa es casa 1 punto png derecho esto va a ser mirado casa 1 y esto es casa 1 punto src así que lo que hago de hecho voy a colapsar estas dos líneas es cargar variables casados casa 3 casa 4 casados casa 3 casa 4 y digo bar casa actual es igual a casa 1 con lo cual yo lo que hago es decir casa actual moment in casa 2 casa 34 y vale prácticamente y digo que esa actual quiero dibujar casa actual por tanto lo que voy a hacer mirada es que dibujo ahí las cuatro casas pero lo que quiero es pasar el código moment in prefiero que miréis casi mejor a la pantalla lo que quiero es que en el momento en el que yo hago clic en una de estas casas se entienda que casa actual es la casa en la que he hecho clic entonces para eso hago lo siguiente condiciones iniciales aquí está time out aquí está y digo especificar cuál es la casa actual y eso es cuando sobre un elemento de clase coge casa un elemento de clase coge casa haga clic en ese caso ejecuto la función qué me dice casa actual es igual a dis punto a tr y b si todo ha ido bien si yo ahora hago clic en esta casa vamos a ver qué es actual de casa actual claro me iré y el ibex es casa 1 vamos a verlo clic y desaparece me enferma cosa alert casa actual casa 1 casa 2 en principio vale claro ese es el problema casi lo tengo pero vamos a redefinir la variable no lo puedo asignar directamente con lo cual lo que voy a hacer es decir un switch de atributo y digo en mi caso de que sea casa 1 en ese caso casa actual es igual a casa y break acordaros del bloque switch que nos sirve para meter multitud de casos diferentes que es casados casa actual casados que es casa tres casa actual casa las actual igual casa 4 con lo cual ocurre lo siguiente y es que si yo ahora le doy a este bloque fijaos que todas se me convierte en ese bloque no es exactamente lo que quiero pero la veremos si pincho en esta todas se me convierten en ese bloque y si pincho en esta todas se reconvierten en ese bloque porque pues por una razón muy sencilla y es que yo lo que he hecho es poner llamar a casa actual claro lo que estoy haciendo es que casa actual se me convierta digamos en esa matriz y por tanto como yo estoy dibujando casa actual estoy dibujando todas nuestras actual si casa actual es igual a esa casa todas se convierten bien lo que quiero hacer realmente no es eso lo que quiero hacer es crear una propiedad crear una matriz donde cada casa pueda tener su propiedad de qué tipo de casa es necesito por tanto crear esa nueva propiedad es bar tipo casa que es igual a new rey entonces lo que hago es decir lo siguiente vamos a ver y digo bar nueva casa es igual a casa uno por ejemplo y ahora digo nueva casa aquí no es casa actual sino nueva casa es igual a casa 1 nueva casa con lo que yo ahora lo que hago es decirle al programa lo siguiente cada vez que hago un clic cada vez clic crear lo que pronto clic digo tipo casa de cuenta matriz es igual a nueva casa es nueva casa creo recordar un acuerdo tengo así bajo la casa así que ahora en esta parte debajo le digo casa actual es nueva casa d déjame que borre la matriz porque estos no tienen información bien por la memoria de hecho tengo quizás algún error cierto draw image bien claro porque no tengo esa información bien por la memoria que de hecho no va a dejar borrarlo ahora vale ok entonces pincho aquí coordenada 0 y 0 creó nuevo bloque bien drivers vamos a verlo provide value no es del tipo no es del tipo am vale no vamos a verlo eso está muy limpios no no es una variable temporal ahora verás vale tipo casa la nueva casa un momento me dice que no le puedo asignar un beat map es casa 1 si nueva casa he dicho aquí arriba que es igual a casa 1 me estás dando el error en la 22 8 bien y es igual a casa 1 bien vamos a ver dar nueva casa es igual a new image vamos a declararlo guarde recargo nueva casa es igual a casa 1 sin embargo déjame que borre memoria vale ahora hago clic aquí le doy a crear y es cuando intenta crear un nuevo bloque en la línea 22 8 cuando al crear un nuevo bloque dice que nueva casa de iu no es valerón es decir no es del tipo html element o html canvas element de tipo ritmo vamos a verlo vale entonces ay ahí está entonces el problema y está vale bien vale tiene que guardar el nombre casa 1 casa 3 en casa 4 y por tanto ahora vuelvo por aquí a pegar un switch copio y pego un switch porque ahora necesito transformar de vuelta esa matriz string esa cadena a una matriz entonces switch nueva casa y digo nueva casa es igual a casa 1 o imágen digamos img es igual a casa 1 img es igual a casados img es igual a casa 3 y mgs igual a 4 con lo cual si todo esto bien madre mía esto es 30 claro bien muy bien nueva casa es igual a casa 1 ahora es un streaming con un bar me diréis por si acaso y le doy un switch casa 1 casa 2 y ahora por tanto aquí pongo img vale ok pincho 0 y 0 creo un nuevo bloque no se me ha creado o si bien entonces pincho este ahora cree un nuevo bloque en menos uno de momento pincho a mira sigue cambiando todos bueno eso por supuesto pero viene después el desarrollo de crear casas entonces la nueva casa cada vez que hago clic en un elemento claro bien sí pero no vale lo que estoy haciendo con nueva casa es decirle a todos los elementos que son de tipo nueva casa porque esto es nueva casa ahí estás switch no es nueva casa sino que swisher sweets es tipo casa donde estas tipo casa vamos a verlo deberían aparecer dos elementos por ahí un segundo con solá img is not be fine bien sí vale vamos a borrar a crea un nuevo bloque bien ahora hago clic aquí pero uno crea un nuevo bloque y ahora me crea un bloque diferente pero dos de este de aquí y me crea un bloque diferente y de tres la naranjita y me crea un nuevo bloque ahora sí ahora si es cuando nos planteamos eso y es que si yo recargo y m notifight porque no estoy guardando para cada elemento en la base de datos el tipo casa por tanto ahora lo que voy a hacer es lo siguiente en las escrituras de la base de datos digo insert no digo create table if not exist posiciones activo tipo casa entonces activo como tipo casa y ok coma tipo casa nueva casa directamente bien y ahora en el selecto le digo tipo casa de cuenta madrid es igual a row tipo casa guardo y recargo vamos a verlo bien bien eso sí buena memoria y ahora a 0 y 0 momento que el nuevo bloque recargo ahora sí pero no sale bien cojo este nuevo bloque ahora veremos la base de datos que el nuevo bloque y vamos a ver en la base de datos bien no me está escribiendo pues no me está escribiendo con lo cual sólo falta asegurarnos que realmente escriba las posiciones correctas nueva casa 1 2 3 4 y 5 sí pero dime 1 2 3 4 y 5 1 2 3 4 y 5 es decir el que está fallando es este de aquí voy a guardarlo todo voy a parar casa 1 simplemente para asegurarme por cierto que esto va con claro así que fallaron isométrico posiciones lo que ha fallado es simplemente que como ahora estaba guardando números no hacía falta comillas pero en el momento en el que empiezo a guardar cadenas de caracteres hace falta unas comillas extra así que nueva casa yo creo que ahora sí vamos a comprobarlo pincho de esta casa le digo 22 - 2 1 bloque muy bien y ya está vale entonces cojo esto digo menos 20 y ahora digo este era digo este éxito de bien me voy a inspeccionar elemento y entonces veo como en isométrico me da guardando posiciones y me guarda al tipo casa y ya la prueba de fuego es que recargo por aquí y me encuentra todas las casas en el lugar correcto hay otra cuestión mirad que me gustaría recordar ya que estamos aquí y no nos cuesta mucho y es que yo hago un determinado zoom un determinado scroll terminado lo que sea pero en el momento en el que recargo me vuelve a cero ya que estamos trabajando con un web sql no nos cuesta mucho también guardar esa información por último lo que voy a hacer es que voy a guardar también la posición del zoom entonces digo create table of no existe vamos a verlo ahí scroll no sé posición vista y digo y de me da igual y digo x y así que en este caso lo que voy a hacer es lo siguiente trípoli no existe voy a también hacer esto cuando pulse el botón de borrar también quiero borrar esa tabla posición vista y ahora hago lo siguiente cada vez que hago clic aquí lo que hago es que inserto bueno aquí voy a tener que meter un poquito más de código vale busco el inserto qué proyecto quieto no tengo por qué hacerlo en cada uno de ellos y aquí al final sólo los tres nos quedan y luego insert drop table posición vista crea table posición vista e insert into posición vista qué es x como hay y cómo azul los valores de momento pero desfase x desfase y eso me sobra por lo que si todo esto ha ido bien recargo isométrico tiene posición vista y en cuanto empieza a hacer así ya moverme posición vista tiene x 50 y 0 eso que quiere decir de hecho fijaos que voy moviendo así y lo que voy haciendo es que voy modificando la posición del zoom así que finalmente lo que vamos a poder hacer es recuperar esa información de la base de datos y colocarnos en el lugar correcto vamos a verlo en el lugar correcto del zoom así que miradme condiciones iniciales de juego vale me haga una función vale sí carga bebé ahora otra vez esto y digo select el from posición vista esto me da igual y digo desfase x es igual a row x desfase y es igual a row y zoom es igual a zoom desfase y ahí estamos necesito bebe bien vamos a verlo vale y ahora me muevo aquí digamos me muevo hasta que pues no sé allí veamos así que ahí es más justo la granjita a la izquierda por tanto si lo veo bien recargo y justo la granjita a la izquierda será la granjita se queda arriba vaya que son las flechas en fin para corregir eso y probamos el zoom también me acerco a la naranjita el zoom con las teclas fijaos ahí como todo ha salido correctamente si ya no se guarda sino con las teclas y bien ya lo tenemos así que a practicar vamos a trabajar con la altura del terreno y para ello voy a abrir game nuevo para que vosotros lo abráis ahora mismo sino para hacer una cosa y que entendáis en la pantalla exactamente qué es lo que voy a hacer en el siguiente bloque de la clase pero si miráis sería brutal sería mejor bien entonces lo que voy a hacer mirad insisto esto es la representación gráfica de lo que continuación voy a ser matemáticamente entonces supongamos que yo creo un terreno y digamos que es de por ejemplo 500 x 500 píxeles entonces les doy a que aceptar y tengo un terreno uniforme digamos que tengo un terreno blanco como el que tengo hasta ahora y cuando digo uniforme quiero decir un terreno donde se asume que la fe está la altura de cada uno de los puntos exactamente la misma así que lo primero que podría hacer y de hecho es lo primero que vamos a hacer matemáticamente es simplemente crear una especie de grano una especie de ruido una especie de aleatoriedad sobre el píxel para ello por tanto lo que voy a hacer es en este caso en el gimp añadir un filtro de ruido y decir que quiero un ruido rgb en mi caso lo que voy a hacer es que no quiero leer egb independiente quiero que el rg sea dependiente es decir que los tres sean iguales porque al final voy a hacer esto que estáis viendo en la pantalla es decir esto que estáis viendo en la pantalla si os fijáis es la idea de añadir ruido a cada uno de los píxeles de la imagen si queréis como tiene un fondo blanco lo que puedo hacer previamente es pintarlo de color gris un tono intermedio ahora le pongo ruido digo ruido rgb ahora sí que tengo un ruido mucho mejor porque fijaos que se va tanto hacia blancos como hacia negro es decir hacia arriba y hacia abajo el problema es que imaginaos que genera un terreno a partir de este ruido generar este ruido informáticamente es realmente sencillo es decir píxel a píxel de un doble bucle for para x y para y decirle que píxel a píxel random y hacia arriba hacia abajo pero el problema está en que imaginaos que yo genero un terreno a partir de estos píxeles pues fijaos que tengo una montaña tengo un valle o sea tengo una concavidad tengo una montaña una concavidad no puede ser que cambie tan rápidamente de píxel a píxel por tanto esta es la primera operación que voy a hacer que simplemente añadir caos a los píxeles a continuación y esta es la parte difícil lo que voy a hacer es darle a filtro darle ha difuminado darle a desenfoque gaussianos y al darle a desenfoque gaussianos y por ejemplo fijaos que se desenfocó con cinco píxeles pues ya aparecen un poco más como montañas es decir lo que está en el programa ya no es tanto ruido píxel a píxel sino que lo que ocurre es qué está haciendo un suavizado y al hacer un suavizado tengo como montañas por aquí y tengo como valles por aquí evidentemente cuanto más suavizado haga en la pantalla vamos a ver desenfoque gaussianos por ejemplo de 15 píxeles pues más suaves van a ser las montañas que vamos a hacer en nuestro terreno y más suaves van a ser los valles así que esta podría ser una aproximación aleatoria a la generación de terrenos donde luego por último lo que haremos es que cada bloque lo subiremos lo bajaremos en función de esa altura pero en definitiva lo primero que quiero matemáticamente es conseguir esto primero generar un terreno aleatorio y luego suavizarlo para homogeneizar la presencia de montañas y de valles continuó por tanto voy a abrir el código en este caso y voy a hacer lo siguiente cuando le doy el botón borrar en ese momento que le doy a el botón borrar voy a generar un nuevo terreno así que abro el archivo y no tengo ningún archivo guardado estoy en mi usuarios y bueno pues vale pues me voy a el samp me voy a hc docs me voy a isométrico me voy a index html y en chrome lo que hago es localhost isométrico pues es una buena pregunta la respuesta es no entonces evidentemente me va a dar error hasta que le vea estar a apache y ahora si isométrico me dará ok bien entonces mirad habréis un poquito más el zoom vale lo que voy a hacer a continuación es lo siguiente cada vez que le dé al botón de borrar carga bebé no esto estará por aquí arriba creo un elemento nuevo de la matriz vamos a verlo aquí está cuando lo sobre borra memoria haga clic primero reinicio la base de datos y segundo lo que voy a hacer es crear un terreno aleatorio al crear un terreno aleatorio voy a hacer lo siguiente pero x barber x es igual a cero pero x es menor que cuanto pues no sé por qué la había creado por aquí arriba el terreno en alguna parte espera que te lo digo al terreno hasta que el terreno en mi caso va de menos 25 a 25 vale pues voy a crear por tanto una matriz que empiece el menos 25 y que llegue hasta pero x más este es el primer bucle foro a continuación creó un segundo bucle fort que diga va a ser y es igual a menos 25 pero y es menor que 25 y más lo que es una matriz de barrido mx y en y ahora lo que voy a hacer va a ser básicamente decir lo siguiente pero altura pero de altura tiene que ser una matriz vale así que cuenta terreno es igual a cero y digo pero altura de cuenta terreno es igual a más punto random y bueno voy a hacer lo siguiente por diez menos cinco eso es un valor aleatorio que irá desde más 5 hasta -5 claro tener altura cuenta terreno de la altura tiene toda la pinta de ser una matriz y por tanto previamente en las condiciones iniciales del juego voy a tener que crear una matriz así que me voy a las condiciones iniciales y aquí está y digo condiciones iniciales para la altura del terreno y digo bar pero altura es igual a new arre así que con esto lo que estoy haciendo por una parte creo que la altura de los definió como un niño a rey por otra parte en cada elemento del terreno bueno y luego por supuesto cuenta terreno más lo que estoy haciendo es que a cada uno de los elementos del terreno les doy una altura diferente ahora mismo no veo nada porque de hecho si recargo el juego simplemente la altura es un parámetro que se ha creado en la memoria pero que todavía no tiene reproducción gráfica por tanto lo que voy a hacer a continuación es que ese parámetro realmente tenga representación gráfica es decir que los bloques de terreno se vean afectados realmente por esa representación me voy ahora a juego 2 y lo que voy a hacer es realmente dibujar esa altura me voy a ir al terreno mirad relleno con terreno de base atención todos y digo contexto otro we mail suelo componente x componente y tamaño y tal bien quiero que veáis una cosa ver a dejadme que dibuje un momento con el summit el ser su mente está por aquí que debería estar su atención en fin entonces esta es no voy a dibujar en rojo primero esta es mi x y esta es mi y pero en el juego ahora dibujo en azul esto es x esto es y esto es z lo ves entonces en este caso sigue trabajando en seta puede comprobar la zeta del juego realmente con perdón la aceta del juego realmente coincide con la y del canvas así que levantar un elemento en z equivale básicamente a trabajar long y con la diferencia y es que z en mi juego crece en positivo pero en el canvas crece en negativo vale por tanto en base a esta lógica lo que voy a hacer voy a capturar por aquí lo que voy a hacer es lo siguiente en la componente y del suelo voy a decir componente y menos en lugar de decir más que sería sumar la altura lo que hago restar la altura porque va al revés pero digo menos será altura de que pues de un contador claro sí pero cuando terreno que realmente no lo sé así que dar mi cuenta es igual a cero digo aquí mi cuenta y ahora digo mi cuenta más el típico contador con el tiempo intentaremos evitar el uso de contadores porque gasta memoria pero de momento nos vienen muy bien para hacer cosas fácilmente entonces si todo ha ido bien y todo ha ido bien recargo no tiene por qué ocurrir nada de momento demasiado un momento e inspeccionó elemento a ver si tengo algún error vale en este caso no parece que tenga errores pero sin embargo esa prefiero claro sí vale también es que el hecho de dibujar píxeles a medias vamos a ver un más punto round en altura mi cuenta vale luego y luego hay otra razón mirad y es que el programa dice vale te la altura me cuenta que es esa tiene altura no sé que esté a la altura entonces hasta que no borre memoria no aparecen por ahí los bloques al aparecer los bloques por tanto lo que quiero que veáis en pantalla es como ahora miran si queréis le vuelvo a dar borro memoria y quiero que veáis que cada vez que borre memoria los bloques aparecen a una altura diferente veis como estaban moviendo ence está ahora en el grafismo del bloque crearemos algún gran sismo para que tenga profundidad porque ahora mismo que hay debajo de la profundidad pues no hay nada vale algún espacio blanco que es ese espacio blanco el canvas es decir el fondo transparente otra cosa que puedo hacer si queréis permitirme el truque t es un toque muy rápido muy sencillo es decir selecciono canvas ya lo tenía seleccionado por aquí y le digo background black el background black simplemente es para que el fondo aparezca de color negro un poco por debajo del terreno pues no hay nada entonces ahora mismo al borrar memoria alex fijémonos como pues cada uno de estos pixeles aparece mirad como en la imagen de game que está que os decía atención antes de ser el suavizado veis como cada pixel tenía en blanco o negro independientemente de los demás esto es lo que está ocurriendo aquí entonces claro esto es muy caótico si queréis puedo venir aquí y puedo decir que el random mirador de estas random el rango lo tengo por aquí pues todo esto lo multiplicó yo que sé imagínate por 5 y al multiplicarlo por 5 lo que estoy haciendo es hacer más tamaño más distancia entre los bloques pero ya os digo eso es casi que peor porque cuanta más distancia tengan mira hay de casualidad hay una meseta y parece que hay un valle hacia abajo pero eso es la menos de las veces entonces a continuación lo que vamos a hacer es dejarme que dibuje un poquito de grafismo y a continuación lo que haremos es suavizar antes de hablar del suavizado para evitar estos huecos negros estos agujeros negros lo que voy a hacer básicamente va a ser buscar un grafismo entonces digo isométrico art terrain block y voy a buscar algún grafismo de algún terreno que tenga volumen como por ejemplo pues estos grafismos de aquí o estos grafismos de aquí entonces bueno voy a o venga open game art pues algo así voy buscando por ejemplo un grafismo como que tenga terreno como que tenga tierra por bajo voy a buscar este voy a usar este así que guardo imagen como terreno esta página no la conozco yo así civilizar página buenos mil 464 pues vamos a quedarnos esta página en favoritos claro entonces voy a abrirlo con gimp y dentro de kim mira lo que voy a hacer es que voy a abrir uno de estos bloques voy a quedarme uno de estos bloques me lo copió y ahora me abro el terreno actual el suelo y lo pego cuidado no lo puedo pegar tan así bien en primer lugar que esta nueva capa en primer lugar mirar no es solo ya que me voy a ir a capa transparencia color alfa y le voy a decir que el color va a ser este de aquí un segundo qué color es ese tiene pinta de ser verde puro ese color es verde puro vale pues voy a decir acá para transparencia color a alfa y el color que quiero como transparente es verde puro tengo por aquí también sí claro bueno vale otra cosa que puedo hacer es usar la varita mágica para eliminar todos estos colores bien pero no solo voy a hacer esto también evidentemente podría escalar este elemento que tenga la misma anchura que sprite sino que además lo importante es que no lo voy a poner a la altura del elemento anterior sino que lo tornó poner más alto este juego poner más alto para que el terreno porque se haga así mirad en cuanto se desaparece un poco hacia abajo se va a ver entonces algo así lo grabó en sobreescribir me lo voy a dejar abierto estoy sobre escribiendo como les está costando porque te cuesta tanto y yo diría que efectivamente vale vamos a recargarlo vamos a recargar le voy a borrar memoria y fijaos como ahora cada uno de los elementos sale con una altura nueva el problema en este caso una vez más es que no estamos poniendo correctamente quién está delante y quién está detrás es algo que también tenemos que hacer pero no entonces me dejo este grafismo preparado no sé lo que me dejó el grafismo preparado voy a seguir con éste y le voy a recargar y vamos a trabajar el suavizado pero más adelante pensaba introducimos una función de reordenación pero alejandro samart le ha dejando familia rebelde al proponer por el correo alejandro zamit pues ha venido con un algoritmo vale mucho más sencillo de reordenación que ha consistido en poner en lugar de menos 25 a 25 pues partir de más 25 llegar hasta menos 25 por tanto hemos cambiado el menos por el más hemos cambiado el más por el menos hemos cambiado el menor o igual por mayor o igual y hemos dicho que x menos vale por tanto con este caso lo que conseguimos es que tengo que analizar el cómo y el por qué pero lo que conseguimos quiero decir suena lógico está perfectamente lógico y evidentemente lo que funciona y ya está y encima está solución es mucho más sencilla que la que yo tenía en mente y probablemente de hecho fíjate que en este caso incluso puede que sea más sencilla y además más eficiente ya que todo perfecto vale con lo cual pues esta función nos permite reordenar de una manera más fácil así que nos quedamos con ella vale y vamos a por ella bien y a continuación por tanto si ya tenemos esto pues ya podemos empezar con lo que os comentaba de el suavizado del terreno porque ahí se puede ver mucho mejor como cada uno de los bloques de renova a su rollo y esto evidentemente pues no es lo que queremos lo que voy a hacer ahora es suavizar el terreno y cuando hablo de suavizar el terreno habló de crear valles y crear montañas creo que en definitiva la diferencia como veis ahí fijaos qué montaña vaya en montaña el valle no sea tan grande sino que ocurra como os he enseñado antes en el gimp que yo vengo aquí le doy a filtros difuminar desenfoque gaussianos y fijaos cómo desenfoque los píxeles entre ellos y los suaves el desenfoque realmente es más sencillo de lo que podáis pensar a nivel matemático y consiste quieto y consiste en que cada bloque va a mirar a su vecino y yo digo eres negro pero tú eres gris así que de qué color es hombre pues igual no eres tan negro iguales cristalito de igual manera a este le digo tú eres gris el helado es negro con lo cual le digo bueno pues igual de nuestra crisis igual es más oscuro y tú eres blanco y el de al lado es gris pues igual no está en blanco igual es un poquito más gris es decir se trata de evaluar esto es una familia de dos por dos trata de evaluar y reescribir el color teniendo en cuenta que el color no debe ser el color del píxel sino que debe ser un promedio del color principal y los píxeles vecinos esto nos causa un pequeño problema y el pequeño problema que nos causa es que como yo tengo una matriz lineal y en una matriz lineal mirad yo sé quién es este y luego a este y luego a este y luego este y lograr este y luego a este y cuando acabo la fila aparece este y éste y éste por tanto en una madrid lineal averiguar quién está antes y averiguar quién está después es fácil averiguar quién está abajo y quién está arriba es posible pero no es tan fácil así que vamos a por ello lo primero que quiero por tanto es crear una función de suavizado lineal que se dé cuenta de quién está antes y quién está después llega un promedio el tu tienes un valor ahora lo que quiero es que me des el de antes me eres el de después y hagas un promedio entonces para esto por tanto debemos tener cuidado porque haremos lo siguiente vamos a alguien y ahora lo que hago es rellenar con terreno de base rellenar contra la base no lo que hago es generar una matriz dónde estás aquí web sql mira crear un terreno aleatorio y ahora lo que voy a hacer es suavizar ese terreno para esto lo que se suele hacer es lo siguiente mira he creado tela altura asunción y ahora al lado de la altura voy a crear bar temp altura es igual a new array de la altura es la terrena es la altura del terreno real temp altura es la altura del terreno temporal es un valor de prueba es un valor temporal para trabajarlo así que he creado temp altura que es igual a un nuevo rey y por tanto ahora vengo aquí abajo y digo temp altura cuidado ahí le asigne otro random vale número es igual a ese número de aquí y ahora digo que la altura es igual al número y temp altura es de 40 terreno es igual a número de altura es la matriz en la que voy a leer temp altura es la matriz de la altura es la matriz en la que voy a escribir temp altura es la matriz desde la que voy a leer así que para suavizar el terreno otra vez me voy a otro bucle for anidado y digo por bar p x es igual a 25 tx es menor que veinticinco tx más aquí abajo bar y es igual a menos veinticinco y es menor que 25 t y más y ahora yo empiezo con ese suavizado lineal y digo lo siguiente pero altura pero no cuenta te es igual a cero pero altura de cuenta te es igual a paréntesis voy a ampliar la ventana voy a ampliar la pantalla tempo altura fijaros que imponente la altura y aquí ponerte en altura de la altura de cuentas más tem altura de cuenta t1 más temperatura de cuentas menos 1 partido 3 evidentemente sumó tres valores pues los partos por tres nos divide por tres y por supuesto no os olvidéis de cuenta temas más por tanto de lo que estoy haciendo es que la altura realmente ahora ya no es la altura tal cual sino que es un promedio de esa altura de ese píxel del siguiente y de la anterior pero esto no es perfecto porque con esto lo que estaría haciendo es como una especie de suavizado direccional mira atención sound in con esto lo que estaba consiguiendo ahora lo veréis lo que quiero conseguir lo que querría yo conseguir es un desenfoque de dos pero lo que estaba consiguiendo realmente es un desenfoque de movimiento qué es un desenfoque en una sola dirección ya es un desenfoque pero no es exactamente lo que quiero por tanto si vengo aquí y recargo le doy a borrar memoria y fijaos como ya empiezo a tener si os fijáis en esta dirección veis en esa dirección fijaros como en esa dirección si queréis voy a aumentar un poco el terreno un momento voy a multiplicar esto por 5 fijaros como en una dirección fijaos en por ejemplo dirección veis como cada uno de los elementos no sube o no baja demasiado pero fijaos en esta dirección en esa dirección hay saltos mucho más grandes fijaos que en esa dirección hay saltos mucho más grandes que en esta dirección cada caminito salsero arteria que ver bueno cada caminito en x en y veréis como en x hay poca variación en y puede haber un montón de variación por qué pues porque lo que acabo de hacer es esto lo que acabo de hacer es un difuminado sólo con el pixel siguiente y anterior pero qué pasa con los de arriba pues vamos a por ellos para entender el problema para entender la problemática y la solución a la vez mensaje de gimp ok mirad voy a hacer una imagen de 9 x 9 de 3 de 4 x 4 en esta imagen de 4 x 4 voy a añadir un poco de ruido una vez más lo que quiero es la represión gráfica del problema lo pinto de color gris para que entendáis cuál es el problema y con la resolución ruido rgb bares quiero que miréis una cosa atención este es el 10 11 12 a 7 con suficiente a partir del recordáis que acabo de hacer menos 1 y más 1 cierto así que ahora lo que tengo que hacer es averiguar quién es 3 y quién es 11 y yo pregunto yo sé que la anchura es 4 y sé que la altura es 4 igual que mi terreno sé que la altura es de menos 25 a más 25 son 50 prácticamente son 51 porque el 0 cuenta pero digamos que son 50 entonces qué es lo que voy a hacer en este caso pues lo que voy a hacer en este caso es que si quiero averiguar cuál es la relación entre 7 y 3 tengo que 7 y restarle la anchura lo veis y si quiero llegar a de 7 a 11 tengo que 7 y sumarle la anchura porque 7 - anchura 4 son 3 y 7 más anchura 4 son 11 cierto por tanto como veis no es tan sencillo como decir sube un píxel no puedo hacer eso pero tampoco es tan sencillo llegar al valor de la matriz que es tribus que tampoco es tan difícil llegar a valores la matriz que estoy buscando así que me vengo aquí y digo cuidado que ahora viene una longaniza y digo bar anchura es igual a 51 luego moveremos esto entonces digo pero palabras para una longaniza para hacerlo es más sencillo de altura momento a ver dijo fila 1 compilador realmente es esto lo voy a hacer matemáticamente más ineficiente pero más sencillo de leer en pantalla y ahora digo todo esto lo copió y digo cuenta t menos anchura 1 cuenta t a ver cómo lo hago vale cuenta que menos anchura menos 1 cuenta te menos anchura 1 y cuenta te menos anchura menos 1 cuente menos anchura para el píxel de arriba cuenta t menos anchura más 1 para el píxel de arriba a la derecha y cuenta que menos anchura menos uno para el pixel de arriba a la izquierda ahora repito este bloque fila 3 y digo cuenta t más anchura para el pixel debajo cuenta t más anchura más uno para el píxel de abajo a la derecha y cuenta t más anchura menos uno para el píxel de abajo a la izquierda y por tanto ahora al final digo tem altura es igual a fila uno más fila dos más fila tres partido tres es decir un promedio de esas tres filas teóricamente la longaniza que hubiera escrito hubiera sido la longaniza de todo a la vez y luego lo hubiera partido por nueve porque son nueve píxeles pero bueno lo hago así luego en tres filas y luego cojo parciales agua el total y así pues en la pantalla no entendéis mejor aunque matemáticamente gaste más recursos por tanto guardo y recargo momento ahora supongo la pantalla guardo y recargo no aparece nada borro memoria y ahora si os fijáis vale es que lo he puesto muy grande espera por 2 ahora si os fijáis veréis que el terreno está suavizado en todos los restos óseos fijáis veréis que el terreno pues hace muchas menos se fijáis por ejemplo ahí claro de vez en cuando pues sale alguna montaña es inevitable pero creo que se ve perfectamente como ahora intenta suavizarse en cada bloque de 9 píxeles otra cosa es que tendríamos que averiguar el agro y el algoritmo porque ahora diréis bien esto con 9 píxeles ya nos hemos muerto un poco como lo hagamos con 25 píxeles o con 30 fricción esto ya puede serlo más vale hay un algoritmo para suavizar pero ahí de momento lo hacemos a mano luego hay otra cuestión es que es temperatura de cuentas borrar memoria bien y esto estera altura cara y una altura de cuenta de recargo ahora sí ahora está mucho más suavizado déjame que le ve ahora a más caña por 5 recargo borro memoria y ahí fijaos cómo tengo un suavizado todavía mayor por tanto claramente ahí tengo el mapa entonces ahora lo que quiero es y esto va a tener muy buena pinta mira tengo un bloque azul como se llama ese bloque adjunto no acuerdo para que te lo digo por ejemplo pues lógico pues voy a hacer una cosa esto ya no va a ser sobre lo azul sino que va a ser agua entonces digo agua punto src de el juego mira la actuación del juego eliminó este bloque azul beige contexto otro women componente lo que sea a ver esto fuera esto lo voy a comentar me da miedo borrarlo por eso el documento sí las líneas de arriba son las que me cuadran pero no voy a dejar así y ahora luego en un rato si vemos lo borramos y voy a hacer lo siguiente miradme atención a la pantalla ahora relleno con el terreno de base y por tanto le digo que la altura me cuenta pero ahora digo lo siguiente digo sí pero altura mi cuenta soy pera altura mi cuenta es mayor que 0 en ese caso voy a rellenar con el terreno pero sí no pero els lo que voy a hacer en ese lugar es con texto true image y en lugar de dibujar atención suelo voy a dibujar agua ya la componente y no le voy a restar el más punto round de la altura porque eso sería que el agua también hiciera el terreno y no quiero eso quiero que el agua esa sea plana vale por tanto algo así era algo así pongo de altura me cuenta mayor que 0 y con esto lo que voy a asegurarme es que siempre que luego supe si queréis podemos bajar el nivel del mar vale pero siempre que ter altura sea mayor que cero habrá terreno pero siempre que la altura sea menor que cero habrá agua y luego incluso no mentir porque ahora de hecho ponemos agua transparente entonces hago así recargo o mira todo es agua vale entonces borro memoria y fijaos de hecho puedo hacer zoom fijaos como hay zonas de agua y hay zonas de terreno así que daros cuenta como ya tengo un terreno donde tengo zonas de agua vosotros me diréis ya pero qué pasa en este caso con el agua que es demasiado presente no pasa nada porque si en lugar de esto pongo mayor que 1 fijaos atención como el agua es menor y ahora digo menos 3 recargo borro y fijaos que cada vez tengo como el a gritos y si pongo por ejemplo -5 recargo borra memoria y tengo las ritos más pequeños es decir que la altura mi cuenta es mayor a lo que sea es lo que sea es el nivel del mar a que sí esa es la idea entonces bueno estamos jugando con terrenos esperar a continuación como os podéis imaginar vamos a ver qué es lo que pasa él porque cuando yo recargo en la pantalla parece todo agua porque aparece todo agua pues muy sencillo porque no estoy de momento guardando la información del terreno de la misma manera que ha guardado la información de las casas y la información de la exposición tengo que guardar la información del terreno que género ahora lo que voy a hacer es que mirada de atención mirando la pantalla fijaos como cada vez que recargo el juego se pierde el terreno se pierde hasta que lo voy a borrar memoria por tanto en borrar memoria que podríamos llegar a borrar la memoria de nuevo el juego o algo así miradme que os lo perdáis en borrar memoria me voy aquí borra memoria vale reinicio la base de datos cree un terreno aleatorio suavizó ese terreno y ahora voy a crear un nuevo bloque que se va a llamar y guardo el nuevo terreno en la base de datos para guardar el terreno en la base de datos como os podéis imaginar voy a hacer lo siguiente primero en las transacciones digo drop table terreno create el table if not exist terreno y va a ser y de equis y altura entonces lo que voy a hacer es decir primero estoy creando una base de datos primero estoy creando una tabla en la base de datos pues ahora introduzco nuevos elementos en la base de datos y digo lo siguiente atención y aquí voy a hacer un solo no va a ser varios bien y estoy pensando que en lugar de hacer hay un doble bucle ford mira puede aprovechar este doble bucle for y guardo el terreno en la base de datos lo estoy metiendo dentro de ese foro dejadme un segundo y puedo hacer esto tiene que copiar pego y limpio mira qué limpio vale y ahora digo insert pinto terreno insert into terreno y de como x como ay y como altura values y digo vamos a ver comillas más comillas como comillas comillas más comillas y digo esto es cuenta te cuidado que cuenta te va después esto es tx esto este y esto es ser altura de cuenta t es decir cada vez que estoy generando el terreno ya de paso que lo suavizó aprovechó ese doble bucle for para tampoco meter más bucles form e inserto en la base de datos la información de cada uno de los elementos del terreno un segundo dando un segundo y antes de hacer nada compruebo que funciona correctamente y sin errores mirad me recargo borro memoria me voy a web sql me voy a webb sql me voy a bien algo no va bien y vamos a recargar y algo no va bien alegría y table if not exist terreno principio es correcto esto es el botón borra memoria recargo pero no me genera ese terreno drop table terreno crea temor y protestas en principios correcto no nada que ver porque vamos a ver es teoría para crear la tabla aunque desde luego es muy desafortunado esto de aquí el hecho del parámetro vale por tanto voy a llamarlo de x pero donde me está dando el fallo no es ahí en la inserción donde me está dando el fallo es aquí en la creación y ahí todavía no existe px pero bueno vamos a probarlo isométrico y luego otra cosa que te digo es que esto también estaría bien que lo creara aquí arriba por tanto aquí arriba le dimos create table if not exist terreno vamos a verlo ahora y ahora si lo único es que terreno está vacío con lo cual borro memoria y le doy a terreno vale y ahora sigo teniendo el problema de que el terreno en este caso no me está haciendo caso pero de momento el haber puesto terreno aquí arriba ya está haciendo que por lo menos algo de información tenga voy a probar una cosa solo yo para poner 00 estoy insertando cuatro valores déjame ver en iso métrico le voy a borrar me voy a terreno vale y ahora voy a recargar porque fijaos que de momento tengo aparentemente un problema y es que 9 se cuele a posiciones y sentí posición vista ahora si estaba guardando bien pues lo que he hecho simplemente mirar es introducir valores vacíos cierto ahora lo que hago es decirle que poco a poco digo no quiero volver es vacíos ahora aquí quiero wind ate recargo tengo ahí una memoria bien le voy a borrar memoria dejamos que hay pero tengo fijaos que hay está bloqueado entonces si todo va bien lo que estaba haciendo ahora es realizar un montón de inserciones y ahora un momento si todo va bien insert hay te pone de aparecerán nuevas y les ahí lo tengo pone 2500 ese es el problema veis como ha tardado unos segundos y ahora ya funciona se había quedado congelado unos segundos es porque está realizando un 2500 intenciones del tirón en la base de datos bien entonces cuenta te porque es 2500 porque no ejecuta eso hasta el final ahí está el problema vale entonces voy a hacer una cosa mira en un segundo voy a hacer una cosa qué es realmente un proceso anidado donde digo lo siguiente la cadena es igual a nada y ahora aquí esto lo voy a llevar abajo ahora podéis copiar un segundo y digo cadena más igual a esto de aquí cadena es más igual a esto punto y coma habrá al final ahora es muy importante porque al final digo execute de sql cadena en lugar de ir elemento a elemento introduciendo en la base de datos lo que estoy haciendo es hacer un recopilado de los 2500 elementos y luego al final hago una única petición vamos a verlo un segundo dejadme probarlo primero les voy a borrar memoria me voy a isométrico vamos a ver de momento está vacío martín y supongo que ahora en unos segundos aparecerá terreno ahora aparecerá todo esto porque error no está dando calculo que debe estar introduciendo en la base de datos otra cosa que puedo hacer mirar un segundo bien es replantear la grabación de los datos así que voy a replantear lo grave grande voy a decir terreno y voy a decir y de toma datos y de comodatos y ahora voy a hacer lo siguiente miradme no ves nada todavía esta cadena primero quiero que miréis lo que funciona insert into terreno y de comodatos y graficó datos es igual a nada y ahora digo datos más igual tem altura más un guión insert into terreno datos voy a poner cero y aquí voy a poner datos de hecho lo que quiero también es antes de insertarlo con sobre el punto datos guardo y recargo le doy a la consola y en la consola aparece eso que estáis viendo en la pantalla qué es una colección de todos los datos que tenemos en nuestra escena tengo un problema no me demasiada gracia los decimales en este caso y esto lo puedo solucionar simplemente diciendo que esto es más punto round rechaza esta información lo que hago es que lo pasó a entero en consola le voy a borrar y fijaos como tengo todos los elementos como números enteros tengo un nota number es interesante pero bueno lo que sea tengo un nota number y es que parece que hay elementos de la matriz por delante y por detrás que no están definidos pero bueno me da igual luego tengo otros elementos que tampoco están definidos vale así que ahora hago lo siguiente insert into terreno y de datos values estos datos con lo cual así todo ha ido bien no lo sé vamos a terreno y fijaos que en la base de datos en lugar de enchufar los datos en vertical los enchufado en horizontal quiero decir que los datos ahora están en un único campo pero con esto lo que he hecho es conseguir introducir correctamente los datos ahora a continuación lo que tengo que hacer es sacar los de la base de datos y para sacarlos la base de datos voy a tener que masticar los un poco voy a tener que sacarse esa longaniza y empezar a cortar por guiones yo tengo ya almacenada una información en la base de datos ahora lo que quiero es que cuando cargó el juego mira create table no cuando hago document red y lo que voy a hacer miradme es que obtengo los datos de la base de datos en cuanto al terreno déjame que quite el ojo donde está suavizar terreno y guardo el terreno en la base de datos con sólo el punto no fuera vale así que por tanto recuperó un segundo mirada del juego 2 un momento el momento carga de aquí está vale obtengo los datos de la base de datos y digo select all from terreno y digo simplemente lo siguiente bar rock es igual a eso y digo datos terreno es igual a row comillas no me acuerdo comillas datos el momento no era correcto con lo cual después de hacer esto digo compruebo que estoy leyendo los datos correctamente así que con soul log datos terreno si todavía bien recargo con sólo tengo un error unexpected en off impute en la línea 3 1 y eso quiere decir que me falta algo en alguna parte y lo que me falta es aquí una llave y un paréntesis así que guarde recargo datos terreno is not be fine a tantos terreno más igual por cierto para datos terreno es igual a nada recargo y ahora sí en console aparece 0 lo cual ya raro vale otros terrenos es igual a hola recargó hola vale select all from terreno es terreno lo que yo estoy buscando terreno sí robó datos para row eso de ahí datos terreno más igual arrow datos vamos bien voy a hacer una cosa digo con su punto no aquí vamos a ver la consola hola aquí estoy llegando datos terreno es igual ahora los datos aparece como vacío con solo un tono aquí los datos ahí está fijaos ahora sí entonces ah claro vale aquí los datos entonces simplemente lo que estaba ocurriendo es que cuando llego aquí no me ejecuta esta función entonces time out con soul datos terreno ejecuta melo dentro de un segundo ahora si lo tengo vale simplemente nos estaba cargando con nos estaba cargando a tiempo vale ya lo tengo y esto realmente ya lo tengo ya estoy seguro de que estoy cargando los datos realmente en la pantalla ahora mira de streep o los datos separándolos con el guión con lo cual ahora vivo bar destripado es igual a dejadme que consulte comodín javascript split es string split y es con string explicar estas entonces digo esto es datos terreno punto split por el guión esto sabes que lo que ponen aquí dentro y así trabajo con más seguridad vas destripado es igual a eso dentro del funk song y ahora sigo con soul log destripado me va a decir que no me lo muestra porque es un array fijaos yo tengo veis como tengo un array de elementos y por tanto lo divertido de que sea una raíz de elementos aparte de que le quite lo que funciona lo divertido de que sea un array de elementos es que ahora puedo hacer un bucle for vamos a ver y digo recorro la matriz y asignó las alturas del terreno y digo por bar y es igual a cero y es menor y destripado punto leen porque eso sí que es la matriz ahora y más y digo como es la altura del terreno que me acuerdo cómo se llama esa variable pero altura de altura vi es igual a destripado rey vamos a verlo a ver si no se produce mucho cambio que no debería un segundo que lo ejecutó y vamos a ello lo ejecutó esta para un segundo pero se crea y sobre todo lo que quiero es asegurarme de que borra la memoria y el terreno que aparezca recargo bien hay un problema por qué aclaró sí pero qué está pasando ahí porque me está creando un terreno sin agua como un terreno positivo vale pues a mí no ah vale pues parece que algunos y otros no ahora lo vemos bien parece que el problema efectivamente lo tenemos con los guiones entonces mirando una cosita mirando la pantalla podríamos usar barra baja pero yo lo que suele hacer en estos casos es usar el pipe que expulsando al xerez y el número uno porque sí seguro que eso no lo usamos para así que miran un segundo al xerez y el número uno 'el país' vertical mirad el split lo voy a poner por el país vertical en un segundo mirar un segundo en cuando creo un terreno aquí le digo que lo enganchó en lugar del guión con la barra vertical y por tanto si ahora recargamos de nuevo el terreno y le doy a borrar memoria vamos a ver lo vamos a ver ahora la consola en la consola sigue poniendo ahí lo tenemos vale ahora sí fijaos bien entonces borró la memoria me sale por aquí un ladito recargo la pantalla y un segundo después me sale exactamente el mismo ladito es decir la misma información que estoy metiendo en la base de datos es la misma información que estoy metiendo la matriz y no estoy cogiendo ese guión que evidentemente no me conviene para nada ahora para empezar esta parte de práctica nos tenemos que ocupar un poco de qué es lo que pasa con cada una de las casas cuando la creamos en pantalla y con esto lo que quiero decir es que si yo ahora creo una casa y la dibujo en 0 cree un nuevo bloque pero claro es que esa casa en 0 no coincide por qué pues porque el bloque estará más alto o estará más bajo y la caja si la casa siempre está a cero ahí por tanto lo que tengo que hacer es cuando creo una casa detectar ese bloque en qué altura está y darle la misma altura a la casa y por tanto tenemos que pensar cómo lo hacemos porque las casas están en una matriz y los bloques están en otro entonces mira voy a hacer lo siguiente vamos a ver claro mira vale vamos a verlo aquí por tanto en webb sql veo como cada casa tiene una coordenada x y una coordenada y pero el terreno no tiene esa coordenada vale por tanto lo que voy a hacer en primer lugar es que les voy a dar a las casas a la base de datos de la casa una corta coordenada zeta hago lo mismo para el resto de posiciones vamos a verlo posición vista z y de momento pongo x ponga y coma 0 así que existe todo bien mira si todo va bien guardo recargo y ahora parece el terreno voy a borrar y así no aparece nada vale digo coordenada cero que el nuevo bloque pero ahora lo que tengo que hacer es mirar quién está en la coordenada 0 en la coordenada 0 ahí tengo que evaluar la matriz y tengo que ver que lamadrid realmente es esta de aquí mira la matriz esto determinó 25 hacer 25 tengo temp altura con lo cual me voy a crear atención donde está el terreno vale voy a crear va a tener x terreno x es igual a mi red y es igual al rey lo quiero si quiera que lo copié es simplemente que lo miréis y que lo entendáis y ya nos pasó el código warter x iter y es igual a nueva red así que ahora cuando creó el terreno pero el terreno esto está por aquí vale y dijo vamos a ver entonces ver x de cuenta terreno es igual a 0 x que hay realmente una coordenada ser y de cuenta terreno es igual a cero y esto es peligroso porque es peligroso que la variable se llame igual que la matriz por tanto voy a hacer que la matriz se llame con dos erres y así no coincide y con lo cual cuando yo creo un elemento mira cuando yo creo un elemento cree un terreno vale pero luego tengo que guardar el terreno bien vale ahora haremos eso entonces me voy al objeto aquí está no esto es el juego esto es cuando hago clic espera no encuentre dónde está el creador vamos a ver borra memoria cree habló que haya estado bien con x con zeta y lo que tengo que hacer es y decir lo siguiente x que x otra vez que no es conveniente x es igual a menos 25 terreno x es menor a 25 terreno x más y lo mismo para y pues aquí digo una colección realmente digo sí terreno x vamos a ver es un foro que es un foro ahí está dejarlo estoy pensando es un cambio de tercio aquí donde pone nota number voy a poner lo siguiente esto me lo dejó fuera del momento y para cada elemento del terreno que meto en la base de datos dónde estás aquí el terreno en la base de datos aquí vale y digo destripado es igual a otros terreno split esto es correcto borra de memoria arc muy bien y digo y bigote x más ahora si queréis usamos bien bajo más té y más bajo master altura esto que va a hacer pues lo que va a hacer es otro que vais a ver borro me voy a 9s ql y fijaos que pone coordenada x coordenada y coma valor y siempre igual se está introduciendo para cada elemento de la organiza no sólo el valor sino su coordenada x su coordenada y entonces ahora lo que necesito es parchear estos elementos para cada altura está atada con el valor y ahora digo lo siguiente ahora si recargo no me sale el terreno porque da error entonces aquí hay un split y digo bar mas destripado es igual habéis privado eso es una matriz multidimensional es igual a destripado punto split por bajo y por tanto esto es de la altura es igual a más destripado de 31 dedos de dos porque el cero el 0 es la x la y es el 1 y el altura es el 2 recargo y ahí aparece bien ahora lo que tengo es que en la memoria aparece para cada uno de los elementos la x la y ahora me vengo aquí aparece la x la y la altura para cada uno de los elementos del terreno con lo cual ahora me voy a ir a un foro parecido a éste y voy a averiguar cuál es la altura para elemento x y la altura para el elemento y vale por tanto ahora cuando dibujo la casa y creó un bloque y ahora casa y pues casa z de cuenta matriz es decir la casa necesita una posición z es igual a z y ahora vamos a ver qué es z casa z será una nueva matriz eta es igual a new a red y por tanto ahora tengo que adivinar que exceda de z lo que tengo que hacer es recorrer la variable la matriz vamos a verlo y ahí poner la jeta y condición vale ahora tengo que recorrer la matriz esa matriz qué es y es igual a 0 y es menor que algo punto link y más es algo que es pues ese algo es la matriz del terreno la matriz del terreno ay y destripado realmente es esto hoy dónde estás crea bloques aquí destripado y ahora digo para x para mí x es igual ha destripado if punto split bar destripados destripado clip porque esa es local para cada uno del bucle foro entonces en este caso no pero es local del bucle for y con esto claro y por tanto estaba cambiando en cada interacción del bucle por lo que puede hacer si quieres es esto es aprovechar ese código vale ya le digo sí vale sí mas destripado de 0 que es la equis es igual a equis mas destripado de 1 es igual a y ala y del elemento en ese caso se está es igual a más destripado de 2 y por tanto eso quiere decir que yo ahora me voy aquí ellos me ponen cero le pongo seda siempre debería dar un resultado de hecho en el no es nada en él se sigue o sea yo estoy lo que usted no es barrer cada una de las casillas si no es esa casilla si ésta es la equis y esta es la y funciona si no es que no es la x la griega no hace falta el hojas de notable para dar falso con lo cual no va a hacer nada entonces recargo vamos a verlo si no tengo ningún error pero bien vamos a verlo entonces tengo algo en las casas bien entonces cojo una casa le digo 00 vamos a ver qué pasa le digo crear nuevo bloque tengo un error vamos a verlo destripadores nos difamen en 2 3 destripado punto link en este caso me dice que no existe y no existe porque será local de una función vale pues le digo aquí arriba le digo aquí arriba bar destripado es igual a nada para convertirlo en una variable global bien pero pinchó creo nuevo bloque de tenis notifight y m6 notifight muy bien vamos a ver otra cosa crea bloque de taiz notifight y lo que más me extraña es que en el 352 a imágenes notifight vale pincho he pinchado pero pinchó y m6 notifight el 3-5-2 esto es la imagen aceptáis notifight ahora debería haber creado por ahí vale muy bien notifight no voy a poner una cosa voy a poner en cualquier caso espero que no fuese salud crea bloque vale en cualquier caso voy a decir antes que nada z es igual a cero vale creo y localizó la casa 00 crear un nuevo bloque no sé si se ve allá arriba hasta la casa pero no está en el sitio correcto entonces lo que estaba ocurriendo es que aquí esto no ha dado verdadero en ninguno de los casos y por qué no ha dado verdadero a ninguno de los casos supongo que es porque está x es un string y aquí lo que se está pidiendo es un número por tanto voy a hacer una cosa un segundo para empezar con su blog quiero comprobar si estoy trabajando con números o con strings más destripado no aparte luego aparte quiero el consumo de punto log y déjame desactivarlo sigamos no está entrando ahí es lo que está pasando mañana vale s no estando ahí así que ahora aquí y tampoco entrando allí con solo un ojo hola sí no al hacer split automáticamente se convierte en matriz otra cosa es que mas destripado vamos a verlo vale el barrio donde bien no estamos igual problemas que no estoy entrando ahí dentro voy a solucionarlo lo que quiero hacer ahora es simplemente decirle al sistema que igual que he hecho anteriormente con el juego anterior mirada real css y le digo el body quiero que sea margin 0 para bien pero y ahora lo que hago es decirle al script en el documento 9 amplio el canvas para que ocupe toda la pantalla entonces digo simplemente que el elemento canvas su atributo which es windows punto dinner with y su atributo height esto es igual que lo que hicimos en el juego anterior su atributo height es windows punto org inner hyde así que aguardo y recargo vamos a verlo no sé se ha cambiado un poco a ver eso es porque se ha rescatado vale sí espera que vea esto al cien por cien esto ahora mismo ocupa 500 por 502 digamos ahora desbloqueo esto guardo recargo se ha puesto como más isométrico porque ahora ocupa 624 por 4 64 yo diría que no ocupa toda la pantalla la intenta ocupar eso sí creo que muy bien también eso es otra muy bien el canvas está dentro del escenario con lo cual el escenario wish 500 píxeles en 2 pixels así que with 100% hack 100% vamos a verlo ahora vamos a ver quién más puede ser el responsable escenario vale y algo de html voy a decirle wef 100% height 100% guarde recargo vale y luego aparte de esto creo recordar del juego anterior de flap space creo recordar que tuvimos que el windows directamente el window height winner haik vale pose altura canvas el wef y el hype voy a decirlo por ebay y de escenario canvas y el escenario canvas y sigue es más grande pero si ya atado vamos a verlo de hecho realmente no del css de hecho no lo tengo así interesante muy bien pss perfecto bien ahora tengo un problema aparte de que el sml voy a decirle overflow hidden overflow quieres que me quite las barras efectivamente pero entonces me han desaparecido el resto de elementos claro entonces para ello lo que voy a hacer simplemente es decir que esos elementos están en crea a casa así que voy a poner esto aquí entonces aquel elemento que se llama crea casa que creo que no está le vivo un sitio no absoluto bolton 0 píxeles pero píxeles ahí está eso es crea casa lo mismo voy a hacer con casas a casas les voy a decir botón 20 píxeles y permitirme hacer un truque te como las casas se interponen por medio pues voy a decirle y grasas zoom 0.5 entonces esa propiedad son 0.5 lo que hace es que coge un elemento y lo hace más grande más pequeño como si fuera chicle y por supuesto le doy aquí y le digo momento que lo ponga un poco más arriba el 50 y le pinchó aquí 00 creo nuevo bloque y aparece esa ay pincho aquí y le digo 10 y aparece esa con lo cual sin ningún problema con las casas ocurre lo mismo que antes pero es decir lo mismo que se superponen pero ahora a las casas les podríamos aplicar lo del foro la cuestión está en que aún así voy a aplicar la misma lógica tuya del foro para que la casa que ponga por detrás no me aparezca por delante simplemente es que el terreno se llevará bien con el terreno la casa se llevará bien con la casa pero de momento cómo se dibuja todo el terreno y luego se dibujan todas las casas de momento nunca una casa está estaba portadas del terreno vale pero de momento con que hagamos lo del móvil doblegó que force pues ya nos va bien entonces aclaró pero eso no es igual eso no es igual eso tenemos que pensar cómo hacerlo porque mientras que el terreno es un doble bucle for aquí estás la casa espera que encuentre la casa es un force de matriz bien bueno lo pensaremos cómo hacerlo un pequeño adelanto para mañana voy a hacer lo siguiente cuando sobre el documento 9 vale mirada respecto el clic sobre el canvas entonces digo cuando sobre el escenario canvas haga clic en ese caso function qué y digo alert punto event x creo que es vamos a verlo recargo clic en find bien espera jquery click x y getting the x r acordaréis click function x no es viven x sino space x hago clic 306 hago clic en 65 hago clic en inversión bei 6 con lo cual es exacto creo que ha caído es expulsado en más page x coma más y punto page y entonces clic expulsado en 1718 expulsado como 3 253 211 el gesto es el que está por encima expulsado 605 385 esta es la primera parte y con esta primera parte lo que conseguimos es detectar el clic sin saber lo que hay dentro del canvas en el canvas me da igual lo que haya dentro estoy detectando clic en x en y con lo cual para mañana lo complejo matemáticamente complejo será el tomar esos datos y decir vale ahora quiero transformar la x la y de la pantalla en la x y transformada del mundo isométrico de los bloques del terreno a que sí anteriormente hemos visto cómo vamos a ver al isométrico mirad cómo hago clic es justo lo último que hicimos y ha expulsado en una dimensión concreta pero lo que quiero hacer ahora es usar comportamiento drag and drop para mirar para hacer click y arrastrar y el hecho de que cuando yo suelte esta imagen pues esa imagen aparezca en la pantalla por lo menos el programa reconozca el comportamiento de drag and drop entonces hay múltiples maneras de implementar drag and drop desgraciadamente jquery no incorpora un comportamiento del hagan drop a una alternativa sencilla pero pesada y por eso no la voy a usar mira es ir a una librería llamada jquery white puntocom jquery user interface si os fijáis es un proyecto de jquery es decir si os fijáis es un proyecto derivativo pero sin embargo mirad yo pincho aquí por ejemplo me descargo las versiones y fijaos como la descarga de base de entrada ahora lo vais a ver con 392 megas es 10 veces más que claro mirada y son 393 las casas he dicho megas que quería decir cash vale por tanto ya de entrada es aproximadamente como 10 veces más que la descarga de jquery y total para usar uno solo de los elementos que es el tragamón hydropower por tanto dentro de que se puede hacer pero al final nosotros lo que queremos es intentar pues usar cuantas menos cosas mejor lo que suele recomendar es descargar algún complemento concreto porque mirar si me voy a jquery by digo fijaos bera tengo de la gumball tengo otro papel tengo risa isabel tengo selecta bold tengo sorda bolt tengo acordeón tengo de piquet tengo un montón de cosas que yo realmente no voy a usar entonces ya os digo tenemos dos alternativas mirad o busco jquery drag drop y busco una librería parecida pues por ejemplo mira más de 150 plugins para jquery drag and drop vale hay mogollón de plugins disponibles o bien otra alternativa mirad es la siguiente yo me voy a jquery guay pero en lugar de descargar me la versión estable que tiene de todo que yo no necesito lo que voy a hacer es que me voy a custom download entonces en custom download yo puedo elegir qué versión quiero voy a la 1 11 4 en principio soporta versiones superiores aj acuario 1.6 o sea que de sobra y yo ahora lo que voy a hacer es lo siguiente vamos a ver en wii core voy a seleccionarlo todo unicorn o debo de seleccionarlo ahora bien no quiero soltar el no quiero select a bolt no quiero revisar isabel está seguro de que tal si ok no quiero acordeón no quiero auto completo es decir no quiero ningún widget realmente no quiero ningún efecto realmente y ya está así que me quedo con el core con el widget con el mouse y con el position me quedo con draga ball y con drop a ball que es lo mínimo que necesito ya continuación bueno en cuanto a tema voy a decir que no quiero ningún tema visual porque básicamente ahí lo tenemos porque básicamente voy a usar un drag and drop no voy a usar acordeones ni fechas ni nada que requiere un tema es decir lo que estoy haciendo es descargar es minimizar lo máximo posible lo que va a ocupar esta descarga si más adelante nos damos cuenta de que necesitamos otro elemento pues venimos lo descargamos y ya está y no pasa nada entonces le digo download y bueno aún así las descargas se me piden se me sigue quedando en 145 cash pero ya la he pasado a la mitad vale por tanto lo que voy a hacer es que mira la atención me voy a extraer esto atención mira novedad me jquery you hay donde estás aquí abajo entonces le doy aquí y fijaos como de estos archivos que se han descargado vamos a comprobar que esto es lo correcto si día 3 vale entonces yo encuentro que tengo archivos externos claro me está cargando ya jquery pues yo eso no necesito porque ya tengo jquery cargado y luego aparte veo que tengo jquery y css significado uy js unificado es decir hay un montón de archivos realmente en esa carpeta cuál es el único que yo necesito js entonces me voy a mi carpeta en el escritorio o en hd o en champ me voy a isométrico y lo que voy a hacer es que voy a copiar y voy a pegar únicamente jay query min js o sea que al final si os fijáis de todo ese pack me estoy bajando únicamente una descarga de 44 cast así que he conseguido lo que quería pero personalizando lo que contiene ese archivo js en este caso lo primero que quiero hacer mirad es simplemente cargar esta librería por tanto en la parte de arriba cuando estoy cargando las librerías creo que lo hacía aquí arriba efectivamente entonces lo que voy a hacer es decir lo siguiente duplicó la etiqueta de script ojo y evito la que está debajo porque primero se debe cargar jquery y luego se debe cargar jquery wine en específico que quiero llamar a este archivo es decir le digo su nombre y ya está y lo que voy a hacer ahora mirar es decir que quiero ir al local juegos dicho métrico voy a ir a inspeccionar voy a ir a la consola a ver un segundo aquí en la consola y compruebo como en la consola no hay nada y que la cosa no hay nada quiere decir que no está generando ningún error de no lo encuentro no carga es erróneo o lo que sea bien a partir de aquí por tanto voy a generar mirad un con un ejemplo de drag and drop me voy al documento ready me pongo por aquí reconozco drag jandro y voy a hacer lo primero de todo mira atención fijaos recargo mirad y si yo pincho este elemento fijaos una cosa quiero que veáis que es semi transparente y que el cursor pone como prohibido qué quiere decir eso que estoy arrastrando la imagen complemente en html pero eso no es un drag and drop vale así que voy a hacer lo siguiente voy a seleccionar los elementos que están dentro de ese vídeo y digo casas img vale así que digo vamos a ver mirada opción aquí y digo casas ing hasta ahora no podía usar esto porque esto es de jquery pero en el momento en el que activo jquery guay pues ya puedo usarlo entonces recargo voy un momentín a inspeccionar comprobamos que no hay ningún error en la consola es decir ha reconocido el comportamiento drag a bolt y ahora si pincho y arrastro mirad fijaos cómo puedo la casita y soltarla por donde sea cuidado esto ahora mismo es mentira quiero decir que yo lo hago así y comprobarás que la casita realmente todavía no está en el escenario pero lo que quiero que veáis es que no es un comportamiento de mentira sino que vale veis que va a la mitad de velocidad que el ratón bueno si va a la mitad de velocidad del ratón mirad esto es por el comportamiento que le pusimos ayer el de zoom 0.5 por tanto le voy a devolver el comportamiento de zoom 1 ahí veréis cómo se arrastra perfectamente y simplemente en casas img le voy a decir wifi pues 33% o algo así es decir a 29 33 13 % una cosa así y ahí sí puedo arrastrar las casas que sean y puedo llevarme las donde sea aparentemente lo que voy a hacer ahora es detectar ahora simplemente estoy arrastrando la casa lo que voy a hacer es detectar donde suelto la casa es decir estoy ahora trabajando con el comportamiento drag voy a trabajar ahora con el comportamiento drop esto es arrastrar tengo que ahora detectar qué es lo que pasa cuando el suelto un elemento hacer que soltemos un elemento es un poco más complejo entonces voy a ir a jquery why drop otro papel pero pavón y mira vamos a ver lo que hago es drag me to my target al entonces cuando lo suelto y es capaz de reconocer que alguien ha soltado un elemento encima de él así que nos damos a view short y en este caso lo que hago es lo siguiente mira tengo este ejemplo así que aquí en el documento 9 esto es drag y ahora digo en el canvas es gro para bolt no confundir a arriba con draga ball y dentro del drop a ball yo digo lo siguiente dentro del drop a ball voy a poner unas llaves directamente s imponer function ni nada de eso pongo unas llaves y ahora digo ahora amigo drop dos puntos y pico function y ahora si una función local una función que tiene los siguientes parámetros y bent uy así que en este caso puedo hacer algo como por ejemplo alert lo has soltado por tanto guardo recargo y compruebo cómo puedo seleccionar un elemento y cuando selecciona un elemento y lo suelto si todo ha ido bien me dice lo ha soltado así que por una parte las casitas son arrastra bless y por otra parte cuando suelto algo en el escenario es capaz de reconocer que alguien ha soltado algo encima de él a continuación me gustaría saber qué es exactamente lo que he soltado entonces voy a hacer lo siguiente las casitas como las localizó yo entre ellas pues las casitas tienen por ejemplo el ide entonces el y dm localiza cada una de ellas pues me puedo venir aquí y puedo venir a soltado la casa y digo más punto this no sé si lo va a vamos a verlo creo que no tr vamos a ver lo guardo recargo y creo que me va a dar el líder el canvas han soltado la casa escenario canvas es decir con this lo que está haciendo es cogerme el id del escenario canvas y no el escenario de la casa entonces en este caso lo que voy a hacer es escoger algo como el event o el i es decir lo que quiero es especificar que me reconozca vamos a verlo ahí que me reconozca and i find vale que me reconozca exactamente el elemento que ha arrastrado no el elemento sobre el que lo he arrastrado así que en este caso lo que voy a hacer es decir un punto drag a bolt me faltaba el we punto del atributo iré al entonces vamos a ver vamos a verlo ahora simplemente arrastro la casa suelto y me dice has arrastrado la casa dos suelto y me dice has arrastrado la casa a uno suelto y me dice has arrastrado la casa 3 hay una cosa que yo quiero hacer y es que yo realmente no quiero arrastrar estas casas es decir yo quiero que cuando arrastró a las casas el sistema reconozca que casa había arrastrado pero que luego automáticamente me la vuelva a dejar en el sitio es decir quiero que me cree una copia dentro de ese escenario pero luego que me vuelva a dejar la casa en el sitio para a partir de ahí continuar pegando más casas en este caso lo que voy a hacer es decir que quiero esta función de vamos a ver aquí en dragonball por tanto voy a poner estas llaves en dragon y voy a hacer un river pto así que mira le doy a river vamos a ver esto qué es esto está aquí me voy a river no sé de dónde sale no hasta aquí con juego hasta ese punto voy a quitar todos estos comentarios porque están muy bien pero son demasiados return julián muy bien vamos a comprobar si funciona así que guardo el recargo y si ahora arrastró un elemento ha soltado la casa 2 vale y no puedo poner la propiedad original position of and i find vale entonces bueno el data es una draga vol así que el data en este caso sería casas ing vamos a verlo ahora así que arrastro casados original position and i find voy a dis pero this punto data muy dragón y realmente allí realmente no voy a poner gris ahora busco otra solución pero no la deja en el sitio original no un segundo la solución que voy a adoptar la de sacaba de aquí entonces de ahí no aquí he cogido esta solución por el cual lo que voy a hacer es mantengo el river mantengo la función eliminó todo este código y lo cambio era por esto de aquí entonces lo que voy a hacer es usar distinto animéis a este elemento sobre el resultado harina vuelo y ánima melo hasta su posición 0 píxeles su posición top 0 píxeles su posición left 0 píxeles así que de verdad recargo y ahora compruebo como pincho me dice ha soltado la casa 2 y ahora la casa 2 me la devuelve al sitio me la devuelve al sitio simplemente porque previamente habré creado una copia de esa casa en el canvas vale lo que quiero resaltar la pero a partir de ahí pues tener otra casa disponible para seguir trabajando una vez que tengo esto una vez que tengo esto déjame que cierre aquí estos botones y una vez que puedo reconocer donde he soltado esta casa a continuación lo que quiero hacer es reconocer el punto donde he soltado la casa a partir de ahí vamos a empezar las transformaciones antes de eso quiero aprovechar este momento para contaros algo que no tiene nada que ver con este juego concreto sino que tiene que ver con programación en general entonces yo ahora mismo hasta ahora y probablemente durante los siguientes meses voy a seguir escribiendo el código de esta manera que digamos es para niños entonces este código fijaos que yo todo en todo momento lo estoy escribiendo así para que veáis claramente dónde empieza esto dónde acaba lo estoy sangrando para que veáis que esto está dentro de esto y lo estoy sangrando para que veáis que esto está dentro de esto y lo estoy sangrando para que veáis que esto está dentro de esto y así sin embargo esto lo estoy haciendo así evidentemente por claridad pero estoy malgastando una gran cantidad de espacio por aquí por tanto es normal que cuando veáis programas digamos por llamarlo entre comillas de corte profesional no vais a ver este código así como lo estoy escribiendo sino que lo vais a ver así fijaros una cosa un momento antes de cambiarlo fijaos como este código es perfectamente legible tú le pegas un vistazo y dices sobrecasas img draga bold y hago esto y river se lanza una función y llamó a este elemento y lo animó y agosto de aquí pero lo que se suele hacer cuando ya llevas un tiempo programando con jquery es hacer esto algo así y fijaos que lo que me ocupaba prácticamente diez líneas pues ahora me ocupa una línea entonces una cosa que quiero que veáis es que llegará un momento en el que empecéis a investigar cosas por internet y veréis que la gente a nivel entre comillas profesional lo que hace es esto y esto es lo mismo que estoy aprendiendo la única diferencia es que en lugar de estar en varias líneas de sangrado está en una sola línea no lo hago así y tardaré en enseñaros a hacerlo así porque claro esto es si llevarle sobre casas img draga bolt y digo madre mía toda esta longaniza qué quiere decir claro si tienes paciencia y vas diciendo no vamos a ver aquí veo un pack y esto es animéis y sobre bis animated vale y entonces reconozco que esto está dentro de una función y entonces reconozco que esto está dentro de un river y reconozco que eso está dentro de un dragón pues hay ningún problema luego otra cosa que te digo y es que si tú le pones todo en líneas diferentes que serán grado reconocer cuando te falta un paréntesis cuando te falta una llave es donde sencillo aquí ponerse a contar llave que cierra llave que paréntesis que cierra paréntesis que llave que cierra llave y paréntesis la probabilidad de cometer errores sube bastante vale por tanto que sepáis un poco a puntear a que visto este código que de normal en modo digamos profesional este código se pondría así se modificaría digamos pero no es en absoluto necesario lo más normal es que sigáis escribiendo de esta manera al menos durante todavía un buen tiempo los voy a hacer una pequeña muestra de cómo modificar y cómo verificar de una manera muy sencilla antes una copia de seguridad entonces si estoy en heavy hay una cosa que es lo siguiente quiero reemplazar contra barra r por nada y reemplazo todo vale ahora reemplazo contra barra n por nada y fijaos y ya tengo eso ya era el reemplazo contra barra t por nada y fijaos que lo que acabo de hacer es significar este archivo y ponerlo todo en una sola línea quiero que veáis una cosa atención recargo así vale esto y me voy a isométrico y quiero que veáis que el archivo significado ocupa 11 casas mientras que el archivo significar ocupa 13 casas es decir lo que quiero decir es que los retornos de carro y las sangrías ocupan memoria no mucha memoria pero si algo de memoria por supuesto este archivo ahora mismo funcionaría quiero decir que ahora vengo aquí recargo y fantástico no funciona normalmente no es equipo de haber pasado pero algo me cargaron bien búscalo hay efectivamente bien si supongamos que funciona lo bueno de esto no es todavía una ofuscación pero lo bueno de esto es que yo me voy a ver código fuente de la página y ahora le puedes decir a cualquier persona bueno me quieres piratear el código pero te ame lo cual ya podéis buscar lo que quiera seguir dentro no con lo cual de verdad es totalmente posible que haya sido exactamente por eso desde manía de no poner mi mala manía a mi mal hábito pero poner punto y coma vale pero si ponemos punto y coma pues hay funcionalidad perfectamente bien pues voy a hacer mayor voy a dejarlo como estaba voy a recuperarlo muchos puntos no tenido alguno si no te digo muchos punto y coma me faltarán por tanto si en algún momento exacto lo que haremos es poner puntos y coma y mini ficar para asegurar primero que ocupe poco y segundo que quien quiera para crearnos un poco el tema pues no es que lo va a tener imposible pero no nos lo vamos a poner tan fácil si veréis que si entráis en cualquier página de nivel gmail y todo eso que intentáis ver el código pues suele ocurrir lo mismo que te dicen vale tú quieres mi código pues ahí tienes el código y mira a ver si lo puedes atraparlo entonces bueno esto es un poco lo que haremos aparte de usar técnicas de ofuscación y ahora una vez que lo he de significado voy a volver y lo que voy a hacer es en el documento punto 9 en el dragón vale mirar y digo vamos a verlo digo ha soltado la casa en la posición y ahora digo lo siguiente más uy dragón y esto era paige x creo esperado un segundo que os lo voy a decir pese a que espera esperas para esperar los suelto en la posición and design moment in que voy a averiguar cuál es la posición y lo añadimos en el código voy a probar esta solución donde lo que voy a decir es un offset left bajo aquí hasta el código estoy aquí arriba y le digo we offset left recargo suelto y me dice 116 vale por tanto y ahora le digo en la posición coma más y offset top y comprobemos lo que funciona correctamente porque yo cojo la casita la suelto hasta arriba y si la suelto hasta arriba me dice menos 6 menos 1 es correcto y si cojo la casita y la suelto hasta aquí por ejemplo me dice 3 22 14 es decir me está reconociendo las posiciones correctamente damos cuenta que estoy hablando mirad porque diréis porque ha sido negativo porque el punto de anclaje de cada deep es el punto de arriba a la izquierda por eso si mueve la casa aquí es normal que la equis la y me den negativas porque el punto de anclaje arriba a la izquierda está fuera del escenario vale por tanto compruebo que esto será x grande y pequeña x grande y pequeña y esto será x pequeña y grande eso quiere decir que correctamente estoy reconociendo el punto en el que suelto el elemento dentro del canvas ahora lo que tengo que hacer es seleccionar cada uno de estos elementos y decirle al programa mirada el programa voy a reiniciar de hecho voy a decir que quiero borrar memoria empezó desde cero voy a decir que quiero cada uno de estos elementos y quiero añadir un elemento en esa posición de momento todavía ahora y para empezar el fomit de momento y todavía ahora para empezar voy a trabajar en un sistema de coordenadas perpendicular a la pantalla quiero decir que este es el punto cero crecer hacia aquí y hacia aquí con lo cual cuando pongo un elemento digamos aquí pues elementos se pondrá aquí cuando el pongo un elemento aquí el elemento se pondrá ahí cuando pongo un elemento aquí el elemento se pondrá aquí es decir vamos a trabajar primero con coordenadas cartesianas para que me las ponga en isométricas y luego lo que haremos es abatir esas coordenadas cartesianas isométricas por tanto lo primero que necesito mirar es partir estos elementos por 2 por 100 perdón porque por 100 porque es el zoom no toquéis ahora el zoom por defecto entonces le digo esto partido zoom y todo esto si es posible le digo más punto round algo así esto es el top y vamos a verlo entonces suelto una casa la suelto por aquí y me dice 2 es decir ya no me lo está mirando en cuanto a cada pixel sino que lo que está haciendo de hecho vamos a verlo a 21 el zoom si era de 100 vale 0 aquí sería 52 faltará algún paréntesis lo que estoy haciendo por tanto es vale es reconocer en unas coordenadas e insisto todavía cartesianas cuál sería el offset en bloques ahora a continuación lo que voy a hacer es bajo de este alerta crear una función de añadir terreno donde está la función de añadir terreno o añadir edificio pues está por aquí abajo entonces en crea bloque punto clic aquí está bien pues lo que voy a hacer es que le digo mira me copió todo este bloque momentín este más destripado a ver de strip a dos puntos split ha seguido del zeta vale pues voy a todo esto mirad digo cuenta matriz + + cambia todo este bloque de hecho y ahora lo voy a limpiar aquí mira el segundo un segundo y ahora pasó el código destripado no aquí está creo una casa nueva cuando hago drop y digo el foro de destripado de momento dejadme que lo ponga que elimine todo el ego zetas igual a 0 x es igual a esto de aquí x ya no escoge me la coordenada x es cógeme donde yo he soltado y es con gm de donde yo he soltado iceta de momento dejadme que lo deje a 0 por tanto cuenta matriz + casa cuenta matriz es igual a 1 activado casa xx y desigual y casa zetas igualada zeta tipo casa es igual a nueva casa y con sólo el punto lo cuenta la matriz y por supuesto inserto en posiciones así que además dejadme que mute el alert y voy a hacer lo siguiente mira recargo y ahora con esta casa la suelto por aquí y se me crea en cero la casa no es la correcta vale ahora si bien ahora la suelto por aquí y se me crea en esa posición la suelto por ahí y se me crea hay es decir quiero que veáis que mientras vosotros visualmente estáis viendo este espacio el sistema por contra está viendo este espacio entonces yo cojo esta casa y la suelto en cero y se me crea y ahora le pongo un poco más abajo y se me crea y veis ahora le pongo un poco más a la derecha si no pasa nada no ahora no es un efecto óptico es un efecto óptico y se me crea allá entonces lo que está ocurriendo básicamente es que yo estoy trabajando en un espacio perpendicular y el sistema me los está transformando a un espacio isométrico pero por alguna parte tenemos que empezar y luego otra cosa que os digo es que aquí seguimos teniendo el problema que tendréis que resolver a lo largo del fin de semana de las posiciones el como esto estaba en una matriz el saber quién está delante y quién está detrás ahora luego os daré una pista para resolver los deberes y la pista es que por suerte para vosotros si me voy a resortes si no había resorces me voy a web sql me voy a isométrico y me voy a posiciones cada una de las casas tienen su coordenada x y su coordenada y por tanto como cada una de las garras tiene su coordenada que su coordenada y es fácil filtrar estos elementos y decir devuélveme los en orden de equis y en orden de y pero vale será los deberes así que recargo y además no recuerdo casas vale cuenta pero porque aquí hay posiciones en ese momento se cargaban por algún error donde cargo la exposición es un segundo 90 como que de la matriz y hablé select el from posiciones muy bien entonces vamos a ver entonces digo casa z de cuenta matriz es igual a row vamos a verlo ahora ya que estamos voy a poner unos cuantos puntos y coma la mitad o más quizás entonces recargo y ahora si tenemos aire vuelve a todas las casas perfecto vale con lo cual lo que tendríamos que hacer eso hago un algoritmo de ordenación para decir selecto el from posiciones pero no me las devuelvas tal cual aparece en la base de datos sino ordena me la das por top y por leer descendiente ascendiente pero no es algo muy parecido a la solución te planteaste el otro día pero en este caso en lugar de equis y con el x y de la base de datos y estudiando últimas esas pistas qué pasa con las casas déjame que borre memoria entonces yo cuando cojo esta casa y la suelto aguas y clic y lo que ocurre es que el programa me crea una como esta porque acordamos que para seleccionar una casa es lo que primero que tenía que hacer era primero un clic y luego soltar la casa y fíjate ahí como aparece y tú dirás ya pero no mola entonces lo que ocurre en este caso es que déjame que borre es que para seleccionar la casa tenía que hacer un key press donde yo os recomiendo que más que un key press un momento vamos a un clic coge casa apuntó clic mirada atención el clic es un comportamiento con el completo en javascript de mouse down y mouse up entonces claro yo he hecho manos down pero no he hecho mouse por tanto el clic no lo reconoce ahora bien en jquery hay un mouse down ahí está donde lo que hace es detectar sólo el clic down entonces voy a cambiar este clic por mouse down así que recargo arrastro y por tanto se arrastró esa casa ahora me reconoce esa casa y se arrastró esa casa me reconoce esa casa es decir ya no hace falta hacer clic porque con el mouse down en cuanto hago el primer clic sin soltar hacia arriba ya me ejecuta el código vale la fórmula que estoy buscando es la siguiente yo digo más punto round y todo esto lo multiplicó por el más punto cost más punto partido a ver más un top y por dos y 60 es partidos 61 partido 12 como la otra vez no deja de hacerlo partido 6 para averiguar 60 grados esto por aquí con lo cual cuando arrastro un elemento vamos a ver vamos a borrar memoria arrastro este elemento ahora mismo me dice que es 0 bien ahora mismo le digo que es de 0,5 0001 vale allí me va gustando 0 1 entonces esto es en cuanto a la posición de y de x perdón ahora yo sigo pintando y digo cuando yo voy pintando para aquí realmente estoy pintando estos puntos de aquí tengo la equis ale y ahora lo que quiero para este elemento es más punto round de esto de aquí más termina que pasa paréntesis voy a hacer porque si no ahora nos vale haremos y ahora quiero el maf punto round de todo esto el más puntos de todo esto es un equipo pero eso es y esto es un más y ahora todo esto lo multiplicó por más puntos in de más partido 2 por 6 déjame verlo así es ese 0 muy sospechoso y aparte yo diría vamos a ver más punto round todo esto por más puntos paréntesis vale este paréntesis sobra y ahora es correcto bien vamos allá entonces hago así bien algún error quizás tal vez paréntesis bien a un error de paréntesis tenía que haber missing tal vale pues vamos a ver dónde está el error entonces más puntocom bien más puntos y ahí me falta un paréntesis seguro por ahí no s no pero en general si eso es porque haya puesto uno general recargo ahí lo tengo con lo cual voy a borrar mi memoria y ahora suelto esta casita y me dice 0 perfecto suelto por aquí y me dice 13 perfecto suelto por aquí y me dice 18 si os fijáis poco a poco ya lo está empezando a reconocer si queréis para no hacer un poquito tan grande digo bar componente x 4 x 2 es igual a toda esa longaniza porque es que espera que ahora para la otra longaniza al entonces caló por eso digo si ya así va a ser difícil pues todo esto lo pongo en fx y ahora voy a crear fe y aquí al final por tanto pondré fx fe y ahora un segundo y ahí lo tenemos y ahora vamos allá ahora fe y es el seno de esto por el coseno de este otro así que si todo ha ido bien a ver no porque es el seno el top claro pero quiere pillar el coseno del top porque si le digo aquí left el griego aquí top mira cojo el tópico joel sin es lo mismo que el top y el zinc sabes entonces aquí es left pero porque cojo el zinc y aquí es todo pero porque cojo el coso es decir intercambio de ellos y de esto que estoy diciendo sí pero el seno y el coseno claro en las proyecciones no son las mismas pero exacto pero aún así no estoy diciendo que vaya a funcionar seguro así que lo suelto aquí y me dice 0 ahora lo suelto aquí y me dice 13 en el momento es creíble lo suelto aquí y me dice 1822 bien pues por tanto ahora voy a empezar a actualizar esta información y digo aquí en la equis voy a poner x y aquí voy a poner y otra cosa que os digo por cierto es que en todo esto al final voy a hacer un más punto round madre mía así que más punto round es un sorbete pero guardo exacto recargo borro memoria y vamos a probarlo entonces suelto y arriba ahora mismo no cuadra perfecto pero me da igual bien en 00 hay dejadme que quite el alerta queremos está un poco ahora vale 00 ahora suelto esto por aquí vale momento no va exactamente déjame ver como va para los renuncio ahora abajo y ahora hay para casos que algunos quieren coincidir voy a poner con solo el punto log y así vemos mejor donde lo está poniendo vale el morro memoria y digo 00 suelto ahí y me dice 11 vale hay una componente que es al revés pero llamamos bien 21 vale ahora suelto ahí y me dice 11 23 muy bien por tanto ya estoy cerca en el sentido de que probablemente uno de estos dos es menos habla al revés un segundo contigo y ahora eso con cuidado ahora ya está empezando al colocar las casas en el sitio claro ahora nos hace falta afinar un montón el parámetro fíjate si fuera un tema de proyección se medirían iones descarte dibujando mira aguas y aparecen 0 si fuera un ángulo fíjate si fuera se verán a un ángulo incorrecto abrir una casa que sirve a mogollón y hago así y más o menos aparece en el sitio no los ángulos son correctos ahora hace falta afinar esos en falta pero los ángulos yo creo que son correctos ahora falta afinar lo