ahora mismo mi chat es un poco ciego porque si yo escribo algo y le doy a enviar se va directamente a la base de datos pero no aparece en la propia ventana de chat así que ahora me voy a ir a la página principal voy a decirle qué mensajes le pongo un borde de un píxel solid black algo así voy a hacerlo un poquito más bonito verdad voy a decirle background murray y margin d 10 píxeles así un poquito más bonito bien y wi-fi del 95% el 90% para que ahí verdad tiene un poquito más bonito y ahora le digo qué el background en lugar de ser gris tan duro que sea rgb 220 420 bien ahora sí ahora si los mensajes aparezcan allí bien para esto por tanto lo que tengo que hacer es que cuando inicio ejecutó una función llamada carga mensajes y la función carga mensajes va a hacer lo siguiente carga mensajes dice dentro de aquel elemento que tiene el y de mensajes punto load un archivo php llamado carga mensajes punto php ojo que éste hace referencia a guarda mensaje php pero éste efe referencia a carga mensajes punto php bien en este caso evidentemente y como os podéis imaginar tengo que crear un archivo nuevo llamado carga mensajes php va a hacer lo siguiente me vengo aquí este es un delito me copió una estructura de control de conexión a base de datos mysql a ser posible con una revolución en forma de bucle while voy a eliminar comentarios dejo y digo select all from chat selecciona me todo lo que haya en chat y ahora digo echo fila mensaje y punto br para que cada mensaje baje abajo del todo si todo va bien algo así bien vamos a ver a cuidado tengo que cambiar los datos de conexión en chad efectivamente no me conecto a crm sino que me conecto a cuidado que ahí me he cargado una comillas y aquí me cargado otra así que guardo recargo bien y me dice hola adiós adiós es decir aquí puedo enviar mensajes aquí puedo cargar los atención mira voy a enviar bolita yo quiero una cosa mirando que os voy a decir le voy a enviar se ha enviado la masa de datos pero esto no lo sabe solo si le doy a recargar a hipólito porque no lo sabe por una razón muy sencilla y es que esta función la función carga mensajes se ejecuta una sola vez al principio del código pero no se vuelve a ejecutar otra vez por donde carga mensajes voy a usar un truco de javascript un truco que atención hay que usar con mucho cuidado que es hacer un bucle infinito cuando estuvimos hablando de los bucles infinitos estuvimos hablando de que son peligrosos cuando están descontrolados pero yo quiero hacer un bucle infinito que esté controlado entonces lo voy a hacer con un set time out una función de time out que se carga a sí misma entonces le digo carga me carga mensajes cada 1000 milisegundos porque si le pusieron número 1 me cargaría esa función 1000 veces cada segundo y eso quiere decir que estaría haciendo mil peticiones por segundo a la base de datos que pasa con una base de datos que pasa con un servidor de base de datos cuando le hago mil peticiones por segundo que se me cuelga que pasa en un hosting comercial cuando hago un ajax mil peticiones por segundo que me penalizan que me llama la atención porque estoy haciendo un mal uso de los recursos estoy acusando vale por eso le pongo un segundo pero no quiero que me refresque es mil veces por segundo con que te vayas a la base de datos y preguntes cada segundo para un chat es suficiente entonces fijaos como guardo y recargo y digo hola dos envío y dentro de un segundo aparece volados pero no es porque al pinchar aquí haya enviado este contenido aquí arriba sino que al pinchar aquí lo he enviado a la base de datos y desde la base de datos me viene hasta este elemento de aquí arriba hasta el dif donde se cargan los mensajes