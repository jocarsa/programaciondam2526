Bueno pues vamos a empezar a trabajar con programación orientada a objetos dentro de php para ello voy a empezar abriendo una ventana de github y eh voy a crear un nuevo repositorio al que voy a llamar y esta vamos a bueno Esto lo voy a abrir con un readm Así que este es el nombre del repositorio a ver un momento por aquí vale Y voy a crear un repositorio tras lo cual a continuación voy a clonarlo Así que github a ver no sé si se abierto github creo que no y desktop Ahora sí vale Y como decía voy a clonarlo pero claro tengo que clonarlo en eh en una carpeta donde tenga accesible php entonces bueno primero voy a seleccionar la carpeta de php poo y voy a volcarla dentro de htdoc dentro Pues aquí mismo así que htdoc se va a crear una carpeta llamada phpp oo Le pulso le doy a clonar bien y ahora pues todo lo que haga dentro de mi equipo automáticamente aparecerá voy a abrir un editor de código como brackets aparecerá eventualmente cuando haga un Push y un commit vale aparecerá en la carpeta correcta de github Bien voy a abrir una carpeta nueva voy a ir a samp voy a ir a hddc voy a ir a phpp oo y aquí es donde vamos a empezar a trabajar una serie de conceptos clave acerca de la programación orientada a objetos en php por lo tanto voy a crear una nueva carpeta voy a llamarla eh 003 fundamentos de programación orientada a objetos y vamos a empezar voy a crear una nueva subcarpeta voy a llamar creación de una clase Voy a hacer lo siguiente vamos a crear un documento 001 creación de una clase luego igual hago subcarpetas y voy a empezar creando un archivo php en el cual eh lo que haré en este caso es eh crear una serie de demostraciones de conceptos que luego aplicaremos por supuesto en un ejercicio práctico Así que voy a empezar creando escribiendo la palabra reservada Class y teniendo en cuenta que el ejercicio práctico clásico de php es el crear una tienda online algún tipo de comercio online pues eh voy a crear una clase producto es el típico ejemplo con lo cual creo una llave de apertura y de cierre y con esto Acabo de crear una primera clase vacía si por cierto ahora ejecuto esto si me voy a bueno primero tengo que comprobar que tenga shamp arrancado que no lo sé a ver shamp Ah estaba ahí shamp no está arrancado arranco e Apache arranco php vale Y entonces me voy a ir a local Host barra pp-pa de una clase y de momento no ocurre nada evidentemente porque pues no tiene por qué ocurrir nada vale porque de momento he definido únicamente una clase bien a continuación lo que voy a hacer es crear una cosa que se llama el método constructor Así que vamos a crear el constructor que consiste en este caso en establecer bueno dentro de una clase existen diferentes tipos de elementos existen las propiedades y existen los métodos las propiedades son objetos estáticos Son elementos estáticos son variables dentro de clases Así que voy a decir que por ejemplo tengo pues una variable llamada precio si tengo un producto tengo precio una vez que he hecho esto realmente no son todavía no es todavía constructor son eh propiedades Así que propiedades propiedad realmente ejecut Okay bien y en principio de momento lo que debo especificar es Cuál es el tipo de variable Entonces yo en este caso voy a poner public precio para indicar que lo que tengo es una variable Que de momento va a ser pública ahora luego la cambiaremos a otro tipo de variable llamada privada pero vamos a razonar en primer lugar el porqué de las cosas a continuación una vez que hemos aprendido a crear propiedades en un objeto en una clase dentro de php vamos a crear métodos Qué son los métodos Pues si las propiedades son variables dentro de una clase los métodos son funciones dentro de una clase por tanto voy a hacer lo siguiente voy a poner public y voy a crear una función public function y dime precio así que de esta forma lo que voy a hacer es voy a crear un método mal creado mal hecho es eco precio Así que tengo por aquí un método esto de eco no es nada elegante pero quiero crearlo así para luego Enseñar cómo se hace de forma an lo hago primero mal para luego hacerlo bien vale con lo cual métodos Vale tengo esto por aquí y ahora a continuación una vez que tengo una primera propiedad y tengo un primer método vamos a utilizar esta propiedad Así que voy a guardar instanciación o básicamente lo que es lo mismo creación de objetos Y entonces vengo por aquí y digo producto 1 es igual a New producto con lo cual con esto acabo de realizar una instanciación de la clase y a continuación lo que voy a hacer es decir lo siguiente un punto precio es igual a 40 recargo bien en este caso vamos a especificar precio Vale ahora sí del producto uno su precio es igual a 40 en este caso suponemos que serán 40 y a continuación digo de producto un quiero Bueno quiero hacer eco de producto uno Dame el precio recargamos me dice 40 y luego voy a poner aquí eco obtengo el precio de forma directa brto y coma y eh eco obtengo el precio mediante un método y a continuación selecciono eco y le digo dime precio y una vez más Ah momentín me falta un punto y coma en alguna parte sí me falta un punto y coma aquí porque los dos puntos van aquí vale vamos a ver me dice obtengo el precio de forma directa un br por aquí Ok y bueno ahora no quiero el eco precio vale sino que lo que quiero es poner por aquí un dis precio Ahora sí obtengo el precio de forma directa obtengo el precio mediante un método de esta forma por lo tanto podemos observar como Declaro la variable precio aquí en método voy a poner dis precio que es más correcto vale obtengo la variable de forma directa o sea es decir puedo leer la variable incluso una cosa que puedo hacer puedo escribir la variable puedo obtener la variable y puedo obtener la variable mediante un método esto se hacer pero no es especialmente recomendable hacerlo por una razón muy sencilla y es que si trabajo con programación orientada a objetos es decir si encapsulo las cosas es porque quiero algún tipo de protección sobre los datos quiero asegurarme que no cualquier persona puede leer digamos esa información Así que para ello vamos a hablar de la encapsulación que es otro concepto clave dentro de la creación dentro del trabajo con el Es más voy a hacer una cosa eco producto dime precio No pues Antes de hablar de encapsulación voy a hablar de return encapsulación es que hay varias cosas que hay que arreglar en esta clase en primer lugar esto de que el atributo en la propiedad sea pública nos permite acceder tanto para leer Como para escribir desde fuera de la clase pero eso a veces en ocasiones no siempre pero en determinados escenarios nos puede llevar a problemas de seguridad Así que en lugar de poner public voy a poner private Y entonces vamos a ver qué ocurre cuando en lugar de poner public pongo private recargo el ejercicio cargo la última versión Y entonces me dice que ya no puedo acceder a una propiedad que es privada antes sí que podía porque era pública Así que esta línea de aquí ya no funciona ni para leer ni para escribir en este caso me dice que el error está en la línea 12 Pero porque ha parado la ejecución si no parara la ejecución me diría que el error está en la línea 12 y también me diría que el error está en la línea 14 de esta forma por lo tanto ahora a continuación eh yo lo que tengo que hacer es poner Bueno voy a quitar de momento estas líneas vale Voy a quitarlo todo De hecho y voy a crear una serie de vamos a ver aquí una serie de métodos donde pongo dime precio y public fun Pon precio son métodos set y get Pon precio pone un precio dime precio devuelve el precio Así que en este caso Pon precio nuevo precio y ahora a continuación digo dis precio es igual a Nuevo precio haciendo esto tenemos lo siguiente una vez que creo un producto le digo producto uno Pon precio y el nuevo precio es de 50 y a continuación digo producto uno Dame dime precio y ejecutamos esto y ahora comprobamos que ahora no puedo acceder directamente a esa propiedad que es lo que tiene que ocurrir pero Eh pero en este caso digamos Sí que puedo acceder si utilizo un eh Un par de métodos en este caso Pon precio para poner un precio de hecho esto a public function sí que está puesto vale Es que se me ha ido a la siguiente línea y dime precio para recuperar el precio vamos a eh continuar trabajando este eco tiene muy mal aspecto hemos empezado a arreglar un poco la clase vamos a seguir arreglándola no es conveniente que desde dentro de una clase se haga un eco en html no es limpio no es elegante es mucho mejor que desde la clase eh haga un returno entonces para ello 006 return en el método php y eh lo que voy a hacer ahora es que en lugar de poner eco voy a poner return que es mucho más limpio con lo cual claro evidentemente el número seis dejará de funcionar Pero porque aquí tengo que poner eco producto uno dime precio si aquí hago un return quiere decir que ya no estoy yo haciendo un eco Pues en el propio código del programa tendré que especificar si quiero hacer un eco o quiero guardar ese valor en la base de datos o lo quiero guardar en memoria únicamente o lo que sea de est forma Ahora sí la clase tiene eh Pues digamos una forma bastante más limpia pero no hemos acabado todavía hay muchos conceptos que nos quedan por ver esto de que primero cree el producto y una vez creado el producto le ponga un precio pues no es especialmente no es muy amigable por una razón muy sencilla en el momento en el que creo un producto en el mismo momento de crear el producto debería ponerle el precio esto de que le ponga el precio a posterior pues no es todo lo limpio que debería ser por ello a continuación voy a trabajar con una vamos a ver momentín vale voy a trabajar con un concepto clave que es el concepto de constructor Así que para ello 007 constructor php y el constructor es un método un poco especial que se encarga de definir cosas que ocurren cuando creamos el objeto de esta forma y ahora vengo por aquí pongo public function y pongo gu bajo construct pongo una llave y démonos cuenta de una cosa y es que el resto de métodos les he puesto el nombre en español pero este método constructor primero he puesto ahí dos guiones bajos no ha sido por capricho y segundo lo he llamado constructo Eso quiere decir que ese método no se llama como yo quiera que se llame el resto sí que se llaman como yo quiero pero ese método constructor se tiene que llamar construct para que el intérprete de php reconozca que ese es el método constructor Así que a continuación lo que voy a hacer así como por ejemplo en Java el método constructor recibe el mismo nombre que la clase pero en php la regla cambia el concepto es el mismo pero la regla cambia bien Y entonces vengo por aquí y digo precio y a continuación digo dis gu precio es igual a precio esto que quiere decir pues esto lo que quiere decir es que ya no tengo por qué crear una nueva instancia de la clase en un objeto y a continuación Llamar al método set es decir al método Pon precio sino que en el mismo momento en el que creo la clase ahí mismo le puedo poner el precio del producto Así que vengo por aquí y a continuación recargo constructor y vemos como el resultado sigue siendo el mismo porque de esta forma como podemos comprobar pues eh tengo por aquí vale los datos del producto una vez que hacemos esto podemos extender la clase tanto como nos haga falta para especificar eh nuevos atributos y nuevas propiedades Así que voy a crear el ejercicio 008 y nuevas propiedades php Así que eh voy a poner propiedades tales como por ejemplo Tampoco voy a crear muchas pero eh private el nombre del producto el precio del producto y private eh descripción del producto por ejemplo podría poner también eh propiedades tales como por ejemplo el peso las dimensiones No lo sé no depende un poco también del producto pero eh en todo caso digamos está claro que pues yo creo que cualquier producto tendría eh precio nombre y descripción bien así que eh vengo por aquí y HM Vale ahora voy a decir que precio Pues voy a poner nombre coma descripción coma precio y por tanto ahora voy a poner cuidado voy a poner dis pun nombre es igual a nombre dis descripción es igual a descripción y claro ahora ya no puedo poner producto 50 Estoy adquiriendo un compromiso que consiste en que claro argument count error to few arguments yo he prometido que el constructor va a recibir tres parámetros en la creación pero solo estoy dando Uno Vale por tanto voy a poner aquí zapatillas es el nombre del producto eh zapatillas deportivas de color blanco coma 50 si ahora recargo Veo que esto vuelve a funcionar y una vez que tengo estas nuevas propiedades pues eh puedo crear si es necesario ojo nuevos métodos por ejemplo 009 nuevos métodos php y por ejemplo pues voy a crear un método llamado Dime nombre que me va a decir el nombre del producto pues eco producto un dime precio eco producto un Dime nombre tendría que poner por aquí un br Pero bueno más que nada para que salte a una línea diferente nuevos métodos Vale y tengo eh un 50 y tengo un zapatillas de hecho ni siquiera tengo por qué eh crear diferentes métodos voy a crear un método 010 método que devuelve a Ray entonces puedo crear por ejemplo un public function dime datos Dame datos no me des solo un dato Dame todos los datos y voy a decir return y creo una array y digo dis pun nombre coma dis pun descripción coma aquí no coma dis pun precio si ahora hago un br y ahora hago un Dame datos cuidado en este caso porque lo que va a ocurrir al intentar devolver una Ray directamente en php es que a punto y coma me falta un punto y coma en alguna parte sí me falta un punto y coma aquí vale nos dice Warning a ra to String conversion vale no puedo devolver directamente un array como String pero sí que puedo utilizar bomp para convertir el array en String y ahí pues comprobar que me está cogiendo el nombre comprobar que me está cogiendo la descripción y comprobar que me está devolviendo el precio Así que como vemos poco a poco estamos extendiendo nuestra clase pero a partir de aquí Vamos a continuar trabajando con más conceptos eh más conceptos digamos típicos y voy a hacer lo siguiente en este caso eh A partir de producto imaginemos que quiero derivar dos subproductos donde en este caso tengo producto físico Que es un producto que voy a vender voy apuntarlo en un wordpad vale tengo producto Mira es más tengo voy a apuntarlo voy a dibujar el esquema en un programa de dibujar gráficos un segundo y aquí vale creo un documento nuevo Okay vamos a hacer así vale Yo tengo una entidad arriba del todo voy a quitar el color de trazo y esta entidad se llama producto pero en una tienda online puede existir lo siguiente puede existir un producto virtual donde un producto virtual por ejemplo no tiene peso no tiene dimensiones porque es virtual pero un producto virtual suele tener una URL de donde descargarlo por tanto digamos que producto virtual sería un hijo vamos a ver por aquí sería un hijo de producto pero qué ocurre pues lo que ocurre también lo que ocurre también es que yo puedo tener otro tipo de producto que es producto físico y el producto físico voy a duplicar esto y el producto físico tendrá parámetros tales como por ejemplo el perdón el peso o las dimensiones pero un producto físico no tendrá un parámetro como la URL o los kilobytes que ocupa Por qué Porque no se aplica a un producto físico en una implementación entre comillas mala de programación orientada a objetos yo cogería la clase producto y le pondría URL y le pondría eh dimensiones y le pondría peso en kilobytes y le pondría peso y luego según el producto que declarara pues Us ía unas propiedades u otras vale Y me dejaría algunas propiedades sin utilizar y eso sería válido pero desde el punto de vista de la programación orientada a objetos pues estaríamos infrautilizando todo aquello que la programación orientada a objetos nos puede ofrecer entonces existe un concepto en la programación orientada a objetos que es la herencia que sirve específicamente Uy no parce aquí el in escape vale que sirve específicamente para implementar este diagrama de herencia de clases donde producto pasa a ser una clase Superior y producto físico y producto virtual pasan a ser clases hijas digamos Esta es la clase madre y Estas son las clases hijas bien entonces Yo vengo por aquí y a continuación voy a hacer lo siguiente voy a poner el código un poco más pequeño y voy a hacer lo siguiente Class voy a poner producto no tiene que empezar con mayúscula producto físico no lo voy a poner con acento no me gusta mucho poner acentos en los nombres de los identificadores en php y prácticamente en cualquier otro lenguaje me da mal rollo Por retrocompatibilidad entonces pongo Class producto físico y a continuación lo que voy a hacer es que Class producto físico extends extens producto por tanto cuando yo creo un producto físico automáticamente pues eh hereda todo aquello que tenga producto es decir si yo vengo por aquí y digo Quiero crear no un producto sino un producto físico vamos a ejecutarlo Uy esto es método que devuelve a Ray no madre mía esto esencia esto es 0111 herencia estaba trabajando sobre el mismo archivo anterior y no debe ser así que esto es producto vale Y ahora sí en no es al revés vale venga esto por aquí y ahora en método que devuelva Ray elimino Esto vale me voy a herencia y voy ar esta página en el navegador y comprobamos que todo sigue funcionando correctamente Cómo puede funcionar correctamente si producto físico está vacío no tiene nada pero es que producto físico extiende a producto y eso quiere decir que automáticamente obtiene todo aquello que tenga producto pero por supuesto No solo obtiene todo aquello que tenga producto sino que también puede tener sus propias propiedades Así que copio por aquí y voy a decir que producto físico tiene eh Pues anchura tiene altura y tiene profundidad Y por último tiene también peso un producto físico evidentemente puede tener otros muchos atributos otras muchas propiedades Pero con esto creo que queda claro Vale ahora con continuación voy a crear otra clase pero esta clase se llama producto virtual extiende producto podría extender producto físico vale pero extiende producto de esta forma implemento el esquema que he dibujado antes no solo es posible este esquema sino la que la herencia dentro de programación orientada objetos admite una un esquema y una estructura prácticamente infinita lo cual es muy positivo bien y un producto virtual tiene por ejemplo la URL de descarga del producto y e vamos a ver y por ejemplo la altura pueses lo voy a poner como peso en kilb más que nada para entender que no es este mismo peso que estaba trabajando antes para cuando realice instanciación Y eso quiere decir que por ejemplo en el caso del producto físico Pues ahora a continuación podremos utilizar métodos para digamos para establecer Cómo se comportan cada uno de los productos por ejemplo vamos a ver otro concepto clave bueno Esto vale he creado un producto físico no he creado un producto virtual pero creo que más o menos nos hacemos la idea otro concepto clave de la programación orientada a objetos es el polimorfismo quiere decir que si yo creo un producto y tengo Dame datos me está devolviendo una Ray con estos elementos de aquí pero a continuación voy a crear polimorfismo todo esto evidentemente es un ejercicio teórico que ahora luego o ahora luego en el siguiente vídeo cuando sea se convertirá en un ejercicio práctico de programación de una tienda online vale pero de momento de lo que se trata es de revisar los conceptos con un ejemplo que nos permita entender el porqué de las cosas y ahora luego lo eh lo aplicaremos en un ejercicio práctico bien pues eh A continuación voy a hacer lo siguiente eh voy a seleccionar este método public function Dame datos donde Por ejemplo si estoy trabajando con un producto físico quiero tomar este Dame datos y eh lo que quiero en este caso es decir que también quiero Voy a bajar ya que php me lo permite y así el código se va a quedar mucho más limpio hay otros lenguajes donde hacer un retorno de carro es peligroso pero justo en php no así que quiero anchura quiero altura quiero eh profundidad y también quiero peso pero si tengo un producto virtual Pues dame datos y eh nombre descripción peso url y vamos a decir y peso en kilb de momento no está definido Por cierto vale Pero no pasa nada Así que ahora a continuación puedo decir que vamos a ver aquí primero creo un producto uno que es producto físico y a continuación voy a crear un producto dos que es un producto virtual esto es Eh Pues no lo sé es manual de usuario esto es manual en PDF y vale 20 Así que vamos a ejecutar esto es polimorfismo ejecuto vale producto físico nombre vamos a ver es un Warning técnicamente vale con lo cual ahora veremos vale vamos a ver tengo zapatillas deportivas de color blanco Vale ahora veremos qué ha pasado aquí con esta propiedad nombre en la línea 35 nombre en la línea 35 vale okay Ahora traemos todos estos elementos vale pero nombre y precio y sin embargo aquí me da el zapatillas deportivas de color blanco me da la descripción Qué curioso tengo el nombre tengo el precio pero no se queja de la descripción Bueno aparte de que descripción lo he puesto con acento lo cual no Mola descripción Vale ahora ya se queja de la descripción Ahora sí bien Vamos a verlo y un segundo vale porque tendré que pasar las propiedades de aquí al resto de clases con lo cual ahora vamos a ello vale teniendo en cuenta que las variables anteriormente las propiedades las hemos hecho private pues vemos que digamos no hay forma de acceder desde la clase hija hasta estas propiedades porque para eso precisamente las hemos hecho eh privadas Pero hay dos soluciones que podemos obtener una solución poco elegante que consiste en tomar esa variable y declararla como pública pero entonces sería accesible desde fuera por eso sería accesible desde esta clase pero también sería accesible desde fuera así que probablemente no queremos eso y luego también hay otra solución bastante más limpia que consiste en lo siguiente consiste en tengo dime precio tengo Dime nombre voy a decir public function dime descripción Así que dis punto descripción y por tanto Ahora aquí abajo no puedo como los métodos dime son públicos no puedo decir eh nombre pero puedo decir Dime nombre no puedo decir descripción pero sí que puedo decir di mi descripción y no puedo decir precio Pero sí que puedo decir dime precio lo mismo aquí abajo Así que copio Así que pego y ahora a continuación voy a ejecutar de nuevo el programa y veo como en este caso bueno cuidado porque tengo en producto dos Y aquí en el bardom vuelvo a tener producto 2s Dame datos recargo y veo como tengo una Ray de siete elementos que tiene zapatillas deportivas con un precio y de momento el resto de propiedades están nul No pasa nada porque no he creado todavía los métodos set y luego a continuación tengo una Ray de cinco elementos donde tengo manual de usuario manual en PDF y un precio de 20 y nul en las otras dos propiedades con esto por lo tanto vemos como eh mediante el polimorfismo si yo llamo a una a un método aquí se comporta de una forma si yo llamo a un método aquí se comporta De otra forma sobreescribe el anterior si yo llamo aquí se comporta De otra forma y no hay ningún problema porque de hecho probablemente es lo que quiero vale Así que vamos a por ello vamos a ver eh vale vamos a ver más cosas vamos a ver vale vamos a ver más cosas por ejemplo me gustaría también hacer Pol polimorfismo en el método constructor de esta forma voy a guardar 013 eh constructor polimórfico php y voy a decir lo sigui vamos a ver Quiero un public fun construct donde lo pongo por aquí donde lo pongo por aquí voy a poner vale método constructor vale Y ahora a continuación voy a hacer que el nombre sea dis nombre la descripción sea dis dime descripción y el precio sea dis dime precio pero a continuación este constructor va a tomar otros parámetros relacionados con la clase bien así que dentro del constructor puedo decir disme nombre dis descripción dime precio y ahora puedo decir eh un momentín no realmente no a ver Ah constructor realmente no porque lo que quiero ahora es poner el nombre Así que vale Okay así que nombre descripción precio vamos a ver precio y ahora voy a poner anchura altura y profundidad y peso y de esta forma eh No puedo poner aquí un dis punto nombre Sí que puedo poner el resto de atributos el peso me falta mm vale por qu ahora Este es el peso Esta es la profundidad cuidado Espera que me estoy perdiendo aquí Esta es la profundidad Esta es la altura Esta es la anchura vale Y ahora con estos tres elementos lo que voy a decir es dis tengo dime precio Pon precio y es precio tengo que crear Pon precio Pon nombre y Pon descripción bien Así que Pon nombre dis pun nombre es igual a nuevo nombre dis punto descripción es igual a Nueva descripción con lo cual ahora sí que puedo decir Pon precio Pon nombre Pon descripción y Ahora pon nombre del nombre y Pon descripción de la descripción bien de esta forma una vez que hago esto puedo seleccionar este método construct lo puedo poner en el producto virtual y simplemente Aquí voy a decir URL y peso en kilobytes elimino profundidad y peso porque no se aplican al producto virtual y Ahora pon nombre Pon descripción Pon precio y URL y peso en kilobytes estos dos no sirven para nada en este caso y ahora Ur es URL y peso en kilb es peso en kilobytes si todo está bien que yo creo que sí si todo está bien ahora al crear un producto físico tengo que especificar que quiero la eh A ver un momentín producto físico que venía primero anchura altura profundidad y peso Vale pues anchura altura profundidad y peso y en el producto virtual quiero por una parte la URL de descarga https 2 bar José Vicente carratala comom baradar PDF coma y el peso en kilb son 500 si esto ha ido bien Vamos a verlo vamos a recargar la siguiente parte eh constructor polimórfico un momento que no está apareciendo aquí ahora bien vale expected blick Dónde está blick en la línea 75 que es blick Ah Es public me ha ido por bajo no sé por qué Así que public vale Y ahí lo tengo y ahora vemos que tengo un constructor sobrecargado tengo un constructor polimórfico que se puede comportar de formas diferentes en base al eh al tipo de digamos producto que yo tenga ahora mismo vamos a ver más conceptos con respecto a fundamentos de programación orientada a objetos dentro de php y el concepto es lo siguiente vamos a ver en este caso eh vamos a hablar de eh las clases abstractas dentro de php donde yo por ejemplo eh voy a crear ahora el producto cero que es igual a New producto y en New producto pongo eh producto ficticio vale producto coma descripción y coma precio 50 Y esto teóricamente es correcto si yo ahora a continuación quieto no quiero esto fuera y ahora Quiero crear un ejercicio 14 clases abstractas php vale creo un producto cero Ahora sí es correcto ahora sí recargo clase abstracta y tengo un producto cero que es una instancia directamente de la clase madre de todas que es producto pero ahora viene la cuestión un producto digamos que en una tienda on Line puede ser o bien un producto físico o bien un producto virtual Pero tiene que ser uno de los dos o es físico o es virtual o es de cualquier otra categoría que puedo crear vale no tiene por qué ser solo de estos dos pero claro yo aquí al instanciar un directamente un producto Pues he hecho algo que teóricamente no debería poder hacer porque claro este producto de qué tipo es pues este producto no es de ningún tipo esta clase producto está sirviendo como plantilla como patrón para que a partir de esa plantilla yo pueda derivar Dos clases más concretas que son producto físico y producto virtual pero no se debería poder acceder poder instanciar directamente de esta clase debería estar diseñada solo para que otras clases la extiendan cuando eso ocurre lo que voy a hacer en este caso es que aquí donde pone Class producto voy a poner abstract Y eso quiere decir en este caso que no puedo crear un objeto directamente a partir de esta clase sino que lo que puedo hacer únicamente es extender heredar Pero esto va a fallar con lo cual si ahora recargo vamos a ver otra vez clases abstractas veremos que no puedo instanciar la clase abstracta producto porque para ello la he declarado como abstracta con lo cual ahora elimino esta línea esa línea ya no debe funcionar recargo y vuelvo a tener el contenido correcto en la pantalla ahora vemos como esta clase abstracta existe pero no existe para que un usuario la pueda instanciar directamente sino existe como plantilla para que otras clases ahí sí la puedan instanciar vamos a ver vale vamos a ver qué más podemos hacer vamos a finalizar este repaso inicial al trabajo con objetos dentro de php creando un concepto explicando un concepto que a veces puede resultar confuso como es el concepto de interfaz de interface cuando creamos una interfaz especificamos eh una plantilla donde todo el resto de clases deben eh implementar Esa plantilla Entonces yo por ejemplo tengo eh aquí producto virtual que tiene un método llamado Dame datos y tengo producto físico Que eh tiene una función llamada Dame datos entonces antes de todo esto voy a crear una interface llamada Eh Pues no sé Dame datos por ejemplo o dar datos y voy a hacer lo siguiente voy a decir eh public function Dame datos y voy a especificar que dame datos ya está no va a tener ningún parámetro vale Dame datos existe dentro de esta interfaz y ahora vengo por aquí y digo Bueno pues e producto físico extiende producto e implements dar datos Ahora vengo por aquí producto virtual extiende producto e implementa dar datos esto qué quiere decir pues Ay qué Manía clases abstractas caray 015 interfaces php y en clases abstractas voy a quitar el implements para que en cada ejercicio pues quede claro Cuál es el avance y el interface fuera vale Ok venga entonces volvemos a interfaces Ok recargamos vale Y esto es lo mejor nada ha pasado nada ha ocurrido Entonces si nada ha ocurrido para qué hemos hecho lo que hemos hecho bien y ahora supongamos que vengo por aquí y digo en lugar de decir Dame datos voy a poner dame mis datos si yo no hubiera implementado la interfaz esto sería válido pero como yo implemento la interfaz como yo implemento dar datos establezco un compromiso mediante el cual me comprometo a que mi clase tendrá un método llamado Dame datos pero mi clase no tiene Dame datos tiene dame mis datos entonces guardo y recargo y veo que en este caso algo ha fallado Bueno tengo por aquí dame mis datos vamos a verlo Vale ahora sí ahí lo tenemos qué es lo que ocurre en este caso pues lo que ocurre es que tengo que implementar Un dame datos claro Es que aquí tengo Dame datos también Dame datos bien Voy a porque como implementa esto voy a hacer esto un momento voy a cargarme esto recargo Ahora sí vale entonces en este caso producto virtual contiene un método abstracto y debe ser declarado que es Dame datos vale Ok y debe ser declarado anteriormente que es Dame datos en un momentín en la línea 67 vale Ahí está el problema implementa dar datos vale con lo cual en lugar de poner dame mis datos pongo Dame datos Y comprobamos como a ver ahora en este caso funciona Dame mis datos en la línea 93 quito dame mis datos en la línea 93 vale Y comprobamos que ahora sí es decir si yo implemento dar datos tengo que tener un método dar datos ahora voy a desbloquear esto para evitar la confusión vale Cuál es la cuestión ahora o yo por ejemplo podría implementar Aquí también es cierto eh la cuestión está en que para qué obligarme a algo a lo que parece que no tengo obligación de obligarme vale Para qué ponerme esa restricción por una razón muy sencilla cuando yo declaro un interface yo lo que hago es declarar un estándar de cómo se tien que comportar mis clases porque si una clase tiene Dame datos Y la otra clase tiene d mis datos cuando yo instancie va a ser un lío tener que acordarme de que unos unas instancias tendrán darme datos y otras instancias tendrán dme mis datos Pero si yo creo una interfaz y en la interfaz establezco algo así como un estándar de Cuáles son los métodos que tiene que tener cada clase luego tendré una implementación mucho más limpia y mucho más predecible porque sé que independientemente de Qué producto instancie al final cada producto tendrá el mismo método Dame datos Porque ese método habrá sido declarado en la interfaz Vamos a continuar con el desarrollo de la programación orientada a objetos en php entonces bueno anteriormente nos quedamos vamos a ver en la creación de interfaces donde aquí lo tenemos vale donde en este caso Vamos a continuar creando más clases creando nuevas clases allí donde esté justificado bien para ello voy a vamos a verlo voy a plegar por aquí esta parte de fundamentos y una vez que hemos visto una serie de fundamentos pues vamos al ejercicio práctico de lo que sería este bloque que sería vamos a ver y nueva carpeta 004 ejercicio práctico o tienda online o algo así es decir Vamos a darle utilidad a esto voy a abrir la última versión interfaces y me la voy a guardar dentro de El 04 tienda online 001 e proyecto y carrito vale dentro de lo que es el carrito voy a guardar esto voy a guardar index.php vale una vez que tenemos esto hemos visto que anteriormente habíamos creado un producto que era un producto físico Que eh tenía un nombre y una descripción y pues una serie de cosas vale como en este caso pues vamos a verlo el nombre la descripción y el precio pero no porque el producto físico es nombre descripción precio anchura altura profundidad peso bien qué es lo que ocurre cuando en una tienda yo realizo una compra pues lo que ocurre es que yo no compro un solo producto sino que compro varios productos y cuando compro varios productos Cómo puedo almacenar esa información Bueno pues la puedo almacenar de varias formas por ejemplo vamos a ver voy a quitar por aquí estos métodos y voy a decir que producto uno es igual a un nuevo producto físico y voy a decir que producto dos vamos a verlo producto dos es igual a zapatillas de color azul con lo cual con esto básicamente tengo eh dos productos en dos variables pero est no parece una forma muy eficiente de guardar la información por lo tanto vamos a ir un momento a documentos no vamos a ir a c vamos a ir a shamp vamos a ir a htdoc vamos a ir a poo y en tienda online pues esto sería varios productos entonces eh Quiero esto fuera vale a continuación algo que yo podría hacer varios productos sería crear un array de productos así que por lo tanto ahora abriría brackets Okay me encuentro la carpeta No pasa nada y yo haría lo siguiente por ejemplo yo podría decir que productos es igual a New array o productos es igual a array vacío Y entonces a continuación puedo decir que productos punto Push y lo que pusheo lo que añado es un nuevo producto físico y productos pun Push otra vez añado un producto físico y ha sido modificado el disco fuera de brackets eh volver a cargar vale No sé dónde está siendo cargado porque en principio solo hay un braet creo que voy a reiniciar pero mientras tanto voy a hacer un bardom de productos vale Así que ahora cierro por aquí me voy a phpp oo vamos a cargar tienda online vamos a ir a proyecto array de productos y a Ah Es aray Push vale php aray Push es aray Push vale es array gu baj Push Como cada lenguaje tiene su propia sintaxis en la gran mayoría de lenguajes es Push directamente bien y Eh bueno en este caso vamos a ver eh debe ser de tipo array vale porque el primer parámetro array Push array Okay venga estaba usando la sintaxis javascript Así que productos coma New aray productos coma ni un producto físico venga ahí lo tenemos con lo cual hasta el momento tenemos un carrito de la compra que tiene dos elementos y evidentemente como nos podemos imaginar Pues si puede tener dos esto quiere decir que puede tener tantos productos como yo quiera pero probablemente a continuación vamos a analizar que probablemente pues una Ray es una estructura eficaz para contener la información pero probablemente no es la mejor estructura que yo podría utilizar voy a reiniciar y vamos a hablar de esto Muy bien pues tal y como estaba comentando voy a plegar por aquí interfaces estábamos trabajando con Ray y eh evidentemente si yo quiero crear un carrito de la compra probablemente voy a hacerlo mejor si eh creo una clase que sea carrito de la compra de esta forma vamos a separar esto en clases para que el archivo no sea demasiado grande shamp htd phpp oo tienda online vale separación en archivos y en separación en archivos voy a crear una carpeta llamada clases y dentro de la carpeta llamada clases voy a crear un nuevo archivo llamado producto punto php de esta forma voy a cortar todo este código de este interface hasta aquí y lo voy a pegar en producto.php y aquí en index.php voy a hacer include clases producto.php para que el programa siga funcionando mejor pero un poco separemos la lógica de declaración de las clases con respecto de la lógica principal voy a arrancar el samp voy a aquí no voy a arrancar un navegador voy a local Host aquí tenemos y vamos a tienda online vamos a proyecto y vale aquí lo tenemos Exactamente igual interface dar datos por qué Pues porque en producto no he puesto que esto es php desde aquí hasta allá Así que ahora sí recargamos Y ahora sí tenemos el vomitado de la Ray el vomitado de la Ray que esto lo que quiere decir es que pues es una Ray que nos está dando voy a ver si voy a probar a cambiar de ratón un momento vale vamos a ver y ahora pongo este ratón aquí porque estoy empezando a sospechar que me estoy quedando sin pilas vale vamos a probar ahora bien entonces eh Como decía tal y como decía eh puedo guardar la información en una Ray pero probablemente si Quiero crear un producto Pues un producto no solo va a ser una colección de objetos sino que además probablemente en el producto en el carrito necesitaría algún método Como calcula total o algo así y además no solo tendré en el carrito eh una Ray de productos sino que también tendré un cliente entonces Claro en el momento en el que digo en un carrito hay productos hay cliente hay propiedades Pero hay métodos también Calcula total o Calcula peso o Calcula dimensiones Pues yo digo eso es un objeto eso es una clase la estructura ideal para guardar toda esa información es una clase Vale entonces vengo por aquí me voy al proyecto voy a crear una nueva iteración y voy a crear la clase carrito bien así que me voy a la clase carrito y lo que voy a hacer en este caso es en las clases voy a crear un nuevo archivo llamado carrito.php donde Pues bueno voy a hacer voy a empezar por lo sencillo voy a hacer una Class carrito y la Class carrito tendrá un método bueno constructor aunque esté vacío vale así que bueno voy a tener una serie de propiedades voy a tener una private eh productos private productos que va a empezar siendo Bueno voy a decirle Por aquí private productos y ahora crearé un constructor eh private Cliente por ejemplo diríamos que productos van a ser varios pero cliente en principio en un carrito de compra es uno y luego por aquí tengo un public function construct donde voy a decir que dis pun productos es igual a Ray vacío no quiero parámetros en el constructor Aunque técnicamente cuando Bueno voy a decir que no quiero parámetros en el constructor pero cuando creo un carrito en principio diríamos que quiero decir ya A qué cliente pertenece ese carrito esto que acabo de decir evidentemente no es lógica pura de programación de bases de datos sino que depende un poco más de flujo de datos que hayamos especificado para nuestra tienda online desde el punto de vista más de la lógica de negocio que desde la programación orientada a objetos y muy importante este elemento lo he declarado como private porque yo ahora no quiero ser capaz de directamente los productos sino que por ejemplo voy a hacer public function listado productos Bueno antes de listado productos voy a Añadir un producto vale Así que Añadir producto voy a reemplazar la voy a reemplazar por una n y Aquí voy a poner un producto Así que a continuación voy a decir que esto es eh array gu B Push y en this productos quiero Añadir un producto Ok esto quiere decir que ahora a continuación voy a hacer lo siguiente en el Index esto de momento fuera vale productos nada include quiero incluir también clases carrito y ahora a continuación voy a decir carrito es igual a New carrito y por tanto ahora de carrito voy a utilizar el método llamado anade carrito añade carrito que sería era anade carrito anadir producto ya ni me acuerdo de lo que escribo anadir producto y en el producto voy a meter un New producto físico ahora a continuación carrito anadir producto y son zapatillas dos zapatillas deportivas de color azul vale Y con esto vamos a ejecutar y con esto lo que hemos conseguido unexpected token en la línea 12 en carrito php1 eso tiene pinta de no carrito de un punto y coma míralo un punto y coma Ahí está Vale recargo ok Ya lo tengo ya he metido productos en el carrito pero claro Ahora quiero listar los productos en el carrito Porque si por lo que sea me voy a index.php y digo eco carrito punto No ec carrito punto productos me dirá dos cosas en primer lugar no puedo vale No puedo acceder a una propiedad privada pero es que además aunque pudiera acceder tampoco podría acceder porque eh Yo realmente en este caso lo que tengo es una aray no podría hacerlo con eco Bueno voy a dejarlo ahí con error porque quiero ver pues Cómo solucionar ese error y para solucionar ese error lo que voy a hacer es crear un nuevo proyecto Y en este caso se va a ser listado productos Bien voy a crear una Ahora sí un método en las clases carrito que es public function listado productos o listar productos por aquello de poner un verbo y ya está Vale entonces en este caso no lleva parámetro este método y voy a hacer lo siguiente Voy a pues por ejemplo return productos así a Palo Seco a ver qué pasa de momento no estoy formateando nada return dis productos luego ahora veremos si formateamos quizás formateos Entonces ahora vengo por aquí y en el Index en lugar de llamar a productos llamo a listar productos hacemos así recargamos proyecto listado claro y ahora tal y como decía antes pues como es una ray en php no puedo hacer una r to stram conversion así de forma directa Pero ahora sí Vale ahora vemos como pues tenemos una Ray que tiene dos elementos el cero es un producto físico lo podemos ver aquí y el número uno es otro producto físico Que es este de aquí vale Así que bueno tenemos ya un carrito de compra funcionando voy a crear otro método yo creo que será un método también bastante útil que es un método de Calcula total el típico método de un carrito de compra Así que Calcula total yo creo que en la lógica de lo que es la aplicación puede que parezca que la creación de clases complica la escritura del código pero yo creo que si hacemos las clases luego se ve claramente como después de haber hecho las clases Pues el acceso a los elementos es mucho más claro en carrito creo un nuevo carrito añado productos y dame los productos es decir la lógica al final resulta mucho más clara pienso utilizando programación orientada a objetos Bueno pues eh me voy al carrito y voy a crear una otra un método llamado Eh pues sumar total o algo así sumar total Así que ahora a continuación lo que hago es lo siguiente tengo un listado de productos además en la interfaz de los productos en la interfaz de los productos pusimos el precio vale Eh bueno public function Dame datos en la interfaz podríamos poner dentro de la interfaz el precio y así nos asegurarías que cada producto tiene precio vale Pero bueno pues voy a hacer lo siguiente ahora eh vamos a arrancar un php for each a ver for each productos as producto voy a decir eh vamos a ver voy a decir private total pedido o algo así que digo total es igual a cer empieza siendo cer0 y ahora a continuación lo que hago es decir total más igual a producto propiedad eh precio con lo cual al final del todo hago un return limpio total Así que vamos a por ello me voy a Index esto ya no lo quiero esto ya he visto que funciona y quiero eco carrito Y esto es sumar total carrito flecha sumar total y si todo va bien recargo proyecto Calcula total expected token línea 21 tiene pinta de que me he dejado un punto y coma Ahí está así que vengo por aquí vale vamos a ver for each argument debe ser Ah Sí perdón cuidado en el carrito es productos dis productos no es tal cual product as producto vale recargo vamos a ver Warning Bueno me dice cero vamos a verlo undefined property producto físico precio dis con precio vale a ver un segundo en carrito en la línea 20 en la línea 20 Entonces esto es producto precio vamos a decir un bomp producto Okay vale Y aquí debería tener claro el problema está en que el precio momento que te lo digo precio del producto es privado entonces probablemente no me lo va a dar ahora bien creo recordar que en el Ah no tengo un dame precio Ah sí dime precio venga dime precio pues no puedo acceder directamente a esa variable pero sí que puedo decir dime precio por lo tanto recargo Y si estoy comprando dos productos voy a quitar el bardom si estoy quitando dos productos estoy añadiendo Perdón dos productos y cada uno de ellos vale 50 pues Es lógico que la suma del carrito pues sean 100 en este caso euros el programa no sabe ahora mismo si esto son euros dólares o lo que sea porque yo ningún momento estoy Estableciendo la moneda al menos de momento vale pero aquí lo tenemos bien Por lo tanto Vamos allá ya tengo pues como estamos viendo un carrito que tiene una serie de métodos vale que tiene una serie de funcionalidades que le podemos Añadir más funcionalidades y evidentemente en un momento dado le añadiremos más fun nor alidades Y por supuesto ahora en un momento vamos a hacer que este proyecto sea lo más real posible porque ahora mismo dirás bueno Esto realmente es un simulacro más que una tienda online porque estás añadiendo tú Los productos a mano Sí cierto ahora hablamos de eso pero de momento vamos a ver que poco a poco vamos avanzando en la creación de esta tienda online el siguiente paso que voy a dar yo creo que está claro 007 proyecto que voy a crear un eh clase Cliente por lo tanto el diagrama de clases de la creación de un cliente de una tienda online puede ser complejo voy a intentar simplificarlo al máximo posible entonces en la clase cliente Voy a crear un nuevo archivo llamado cliente.php Aquí voy a incluir cliente.php y por lo tanto en cliente voy a Pues un poco la plantilla de carrito y digo Class cliente private nombre private apellidos private email y private teléfono eh tengo un construct y bueno en el construct Pues voy a poner directamente nombre coma apellidos coma email coma teléfono y por tanto dis nombre dis apellidos dis email dis teléfono pues Esto va a ser igual a nombre a apellidos a email y a teléfono y en principio no voy a hacer mucho más aquí en principio porque yo ahora hago así en principio y vamos a ver ahora a continuación en el Index cuando creo un carrito le voy a decir claro carrito cliente no porque en carrito cliente es private y así debe ser por eso voy a poner public anadir cliente y básicamente anadir cliente nuevo cliente y voy a decir dis cliente es igual a Nuevo cliente Ahora sí puedo ir a Index y puedo decirle qué carrito anadir cliente es igual a New cliente donde voy a decir que el cliente es José Vicente coma carratalá sanchiz coma vamos a ver correo info @josé viicente era Qué era primero email teléfono vale José Vicente carratala comom teléfono 1345 y de esta forma si ahora revisamos el contenido de la clase pues veremos que eh tenemos una clase que se llama carrito que contiene un cliente porque por un tema de lógica de negocios pues se supone que un pedido tiene un cliente Pero además de tener un cliente tiene también pues eh una serie de productos vale esto quiere decir que eh yo ahora a continuación pues puedo presentar en pantalla la estructura del carrito en forma de factura en forma de pedido en forma de confirmación en forma de lo que sea una vez que he hecho esto como digo tengo ya la lógica de lo que la lógica básica evidentemente de lo que sería la tienda online eh Por ejemplo con el tema de cliente pueden haber pues otras subclases No ya en cuanto a herencia sino en cuanto a cosas que puede tener una clase Porque por ejemplo vale No quiero complicarlo mucho pero sí que lo quiero hacer a modo demostración vamos a ver eh clase dirección y un cliente puede tener x direcciones Entonces en este caso lo que voy a hacer es que en clases voy a crear un nuevo archivo llamado dirección php y en dirección PP Pues voy a copiar esto Class dirección y pues en este caso voy a poner private vamos a ver private calle private población private código postal y private cómo era no localidad y país por ejemplo esto es técnicamente localidad esto de hecho Bueno si va esa voy a poner localidad aquí abajo vale con lo cual Ah y private tipo lo voy a poner arriba del todo esto es fuera esto lo voy a poner aquí esto lo voy a poner aquí y digo dis tipo dis calle dis código postal dis localidad dis país es igual tipo calle código postal localidad y país Así que tipo calle código postal localidad y país y de esta forma ahora en el archivo principal incluyo dirección y por tanto ahora en el producto voy a decir que vamos a ver producto físico Ok en el producto no perdona en el cliente vale private direcciones bueno no lo voy a meter ahí pero básicamente pues puedo Añadir una dirección public function Añadir dirección nueva dirección y en este caso lo que voy a hacer es que a Rush y a direcciones le añado la nueva dirección lo cual quiere decir que al cliente vamos a ver vale que al cliente index aquí puedo añadirle un nuevo cliente y luego a ese cliente le podría Añadir una nueva dirección bien en este caso vamos a verlo vamos a empezar a crear un poco el carrito de compra de tal forma que yo aquí pueda mostrar digamos una exposición un muestrario de productos y en los productos eh aparezca digamos un listado una vez que tengo productos aparezca un listado a partir del cual yo pueda ejecutar para ello voy a empezar trabajando con un archivo jas vengo por aquí y vamos a hacer lo siguiente proyecto 009 y listado productos vamos a poner ya la tienda en marcha vamos a ver que esto que estamos aprendiendo realmente sirve para algo vale Y aquí voy a crear una nueva carpeta llamada base de datos donde en base de datos voy a crear un nuevo archivo llamado productos. Jason este Jason va a ser un Jason estático de momento va a ser un jas estático más adelante evidentemente pues este Jason saldría de la base de datos de mysql o de lo que sea pero para no estar ahora mareando con dos conceptos con base de datos y programación orientada a objetos vamos a trabajar con un Jason y así facilitaremos pienso las cosas vale creamos un primer producto y voy a crear aquí una plantilla y voy a poner lo siguiente productos qué tiene a ver nombre descripción eh precio vale Okay nombre descripción precio intentamos evidentemente que el modelo de datos sea el mismo longitud anchura altura y peso bien una vez que hacemos esto Pues ahora tenemos que crear una serie de productos vale Y una vez que creamos los productos pues vamos a poner quiero productos deportivos zapatillas de tenis zapatillas para poder practicar tenis de forma cómoda precio 30 longitud pues 40 por 30 por 20 peso 2 nombre raqueta de tenis raqueta para poder jugar al tenis cómodamente precio 50 longitud 30 anchura 40 altura 5 y peso un No lo sé y vamos a poner por aquí calcetines de deporte calcetines blancos para poder hacer deporte precio 10 No lo sé pues 4 5 y 6 y peso 0.2 ya tenemos en este caso un jasón donde tenemos tres productos podríamos tener 3500 millones de productos pero vamos a trabajar con nuestros productos y eh ahora a continuación lo que quiero es que en el Index quiero mostrar los productos para mostrar los productos pues puedo ir directamente voy a borrar esto ahora Lo volveré a sacar vale Y ahora a continuación Quiero leer el jas vamos a ver un momento vale vamos a ver Quiero leer Jason y quiero mostrar los productos en pantalla vamos a ver para ello yo digo productos es igual a vamos a ver file get contents de entrar en la carpeta deb y productos. json pero claro esto en formato js es igual a j son de code de eh vamos a verlo de productos vale Así que Ok productos J son de code vale Okay y ahora a continuación voy a decir lo siguiente for each J as producto voy a decir eco y ahora pues vamos a maquetar un poquito a formatear un poquito quiero escribir cuanto menos código mejor voy a crear un artiel voy a crear una etiqueta de cierre de article y voy a decir eco vamos a ver vale esto no h3 p y pues p también p voy a poner producto prcio no producto nombre Perdón producto descripción y producto precio euros Así que recargamos no esto es clase vale en as token carrito línea 24 carrito en la línea 24 public function Añadir cliente vale ha fallado al abrir este archivo porque es bd vale Por otra parte en carrito public función y no sé desde cuándo estará así ahora Muy bien Entonces vamos a ver ahora sí me voy a Index Okay tengo aquí pues estos tres artículos preparados para comprar bien son un poco grandes vale Y aparte ahora a continuación Pues un poco para hacer una plantilla vamos a hacer una pequeña plantilla visual proyecto plantilla y en la plantilla voy a crear una carpeta llamada plantilla donde voy a poner un archivo llamado cabecera php y un archivo llamado pied pagina.php en la cabecera voy a poner un doc type html un Head un Body en el body voy a poner header Voy a poner Main voy a poner footer en el footer voy a poner copyright 2023 José Vicente carratalá en el header voy a poner h1 tienda online h2 José Vicente carratalá y ahora lo que voy a hacer Bueno aparte de que en el Head voy a poner title tienda online html lang es igual a y en el también voy a poner un Style no un link rel es igual a Style sheet href es igual a css estilo.css y a continuación voy a hacer varias cosas en primer lugar el Main me lo voy a llevar a pie de página además voy a crear una nueva carpeta llamada estilo no la carpeta se llama estilo o cómo se llama css y dentro de css voy a crear un archivo llamado estilo.css y luego en el archivo principal al principio del todo voy a poner include plantilla cabecera php y al final del todo voy a poner include de página php para que cuando yo recargue esto pues haya una plantilla visual aunque no lo parezca Y eh Y esa plantilla no me modifique lo que estoy escribiendo en este artículo pongo un pie de página pongo una cabecera y ya el resto del programa se encarga vale voy a poner un poco de estilo body html es background Gray font family sanif en Main foter y header voy a decir que background White with 800 píxeles margin auto y por tanto pues ocurrirá Esto vale tengo una mínima página vale como podemos ver y ahora voy a decir article with 300 píxeles o 250 No lo sé 200 no s Line no display inline block vale para que los elementos Pues salten digamos y ya está y ahora pues bueno evidentemente a los productos podría ponerles imagen y todo esto pero no hace falta por ahora y voy a decir que header coma footer pues textalign Center vale dicho esto ya tengo una tienda online y ahora a continuación lo que quiero es eh Añadir el producto lo que quiero es eh que ahora mismo yo digamos que no tengo un producto o sea digamos que tengo pues un carrito desde cero pero una vez que empiece a pinchar en estos productos pues lo que querré es ir añadiendo estos productos poco a poco en el carrito vale por tanto hasta este punto tenemos la tienda online con nuestras clases y nuestros productos y nuestras cosas y ahora a continuación evidentemente en el momento en el que empiece por aquí a poner un botón de bueno a href algo con un Button por ejemplo con un buton en el que ponga Añadir al carrito y en el ahref pues ahí pasará algo evidentemente donde Pues ahí lo que haremos es llevar a la propia página pero diciendo que si hemos hecho clic en el botón Pues añadiremos el producto al carrito con el que estamos trabajando a continuación vamos a eh vamos a crear un carrito de compra porque hasta ahora tenemos un momen antes de crear un carrito de compra por cierto Me gustaría eh crear un archivo de funciones proyecto funciones Por qué Pues porque en este caso vamos a ver tengo por aquí Hala qué ha pasado plantilla y funci está vacío no sé qué he hecho yo se suponía que quería duplicar Vale ahora funciones que más adelante igual se convierte en un objeto puede ser vale pero de momento esto de aquí pues Quiero crear una nueva carpeta llamada Inc o funciones o algo así Dentro de Inc voy a poner un archivo llamado php más que nada para todo esto cortarlo pegarlo aquí function listado productos bueno Esto es php y function listado productos y por lo tanto Aquí voy a pegar esto y aquí dentro del Index php Pues voy a hacer include Inc funciones.php esto lo puedo poner Pues aquí arriba del todo realmente con las inclusiones principales y aquí pues voy a llamar a listado productos y de esta forma el contenido sigue siendo el mismo vale proyecto funciones pero la página principal la página de Index pues se queda lo más sencilla y lo más limpia y lo más entendible posible bueno y ahora una vez que he hecho esto lo que voy a hacer es pasar vamos a pasar un nuevo producto y pasar producto por url pasar producto por URL lo que va a hacer dentro de funciones es que en el hre voy a decir p producto es igual a qué bueno pues vamos a verlo porque vamos a ver porque lo que quiero es convertir el producto vamos a ver vamos a verp y aquí vale lo que quiero aquí es del producto Quiero un jas encode del producto y de esta forma ahora si yo vengo por aquí y recargo y pincho por aquí veremos que aquí arriba lo que aparece es el J son del producto que estoy pasando de hecho aparece todo el producto aparecen todos los datos del producto aparecen tantos datos que me puede resultar un poco incómodo incluso Mostrar tantos datos por aquí por la URL entonces lo que puedo hacer es aquí 14 o 13 Perdón es codificar jas y al codificar Jason Pues voy a seleccionar aquí funciones y voy a poner eh base encode de Jason encode de esto de aquí y recargo y pincho y vemos que ahí dentro Se está enviando una cadena base 64 que realmente consiste en la información del objeto modificada Ahora quiero un carrito Así que ahora vengo por aquí me voy a 014 Quiero crear un carrito y para crear un carrito lo que voy a hacer en este caso es crear un elemento vamos a ver voy aquí al Index y voy a hacer lo siguiente eco vamos a verlo Vale pues sí eco section o aside el aside es una etiqueta html donde eh Me voy a ir ahora al estilo esto es codificar js cuidado esto no esto lo quiero aquí eide en el css voy a decir que el aside va a ser Pos absolute with 400 píxeles height no sé 600 píxeles vamos a verlo background White pading 20 píxeles y ahora bottom 20 píxeles y right 20 píxeles y si yo ejecuto esto veremos que aquí aparece un carrito más pequeño 200 por 300 píxeles a ver ahora ahí aparece un carrito y ahora voy a decir un pequeño Box shadower píxeles 5 píxeles 10 píxeles rgba 0.23 para que emita una peñ sombrita voy poner 1.4 vale Y ese es el carrito de compra con lo cual una cosa son los productos que tengo disponibles para comprar una cosa son los productos que puedo comprar y otra cosa muy diferente son los productos que hay en el carrito vamos a ver cuántos productos hay en el carrito aquí dentro de la Side voy a poner un h4 carrito vamos a verlo ahí bien y ahora a continuación lo que quiero es lo siguiente cada vez que yo haga click aquí en el carrito quiero por una parte que se añada el producto al carrito y luego por otra parte lo que quiero es que eh cómo te diría yo que se liste en el carrito vale de esta forma aquí al principio voy a decir lo siguiente si no existe una variable de sesión llamada carrito en ese este caso creo una nueva variable de sesión vamos a hacer esto en un proyecto nuevo variable de sesión Vale y de esta forma Ahora sí aquí voy a decir si no existe la variable de session llamada carrito en ese caso la variable de sesión llamada carrito es igual a New carrito vamos a verlo si todo va bien que debe ser que sí Ok y Ok bien Esto no va a funcionar a menos que haga un session Start A menos que arranque una sesión solo de esa forma php recuerda las sesiones Ahora sí bien a continuación lo que voy a hacer es decir si existe la variable de URL llamada p Por qué Pues porque aquí he creado inventado una variable llamada p como me podía haber inventado cualquier otra variable pues en ese caso voy a decir que session carrito punto vamos a ver carrito qué método aceptaba punto aadir producto y ahora veremos qué añadimos vale Y mientras voy a decir eco base 64 I bajo de code de la variable de URL p esto qué quiere decir pues que si recargo está tomando esta longaniza que hay aquí arriba y la está descomprimiendo la está descodificando para que veamos que realmente hay algo ahí dentro Vale ahora lo que quiero es convertir eso en un objeto Esto va a ser un poco más difícil Esto va a ser un poco más difícil Aunque técnicamente lo puedo hacer ahí fácilmente vale porque añado producto físico vamos a ver vale porque ahí necesitamos hacer un jas en code a ver entonces jas es igual a jas en code de code Ok y ahora digo Añadir producto New producto físico y digo J son de nombre coma vamos a poner esto aquí abajo ya que php tiene bastante buen soporte para los saltos de línea J son descripción J son precio J son longitud J son anchura J son altura y J precio peso con esto Loy haciendo es Añadir un producto al carrito pero claro ahora a continuación en el carrito lo que quiero es aquí no un listado de productos sino que lo que quiero es session carrito vamos a verlo el carrito recordamos que tiene un método llamado listar productos vale Venga pues bardum sesión carrito listar productos vamos a verlo recargamos Ok col Define aadir producto vale aadir producto es anadir producto carrito anadir producto vale Index php sesión carrito es igual a New carrito y voy a hacer un bardum de sesión carrito vamos a parar un momento esto Ah Es un incomplete Class vale Ok no pasa nada incomplete object vale No pasa nada tenemos el producto pero aparece como incompleto Vale pues no pasa nada vamos a ver cómo podemos hacer que el producto esté completo Vale pues en este caso lo que voy a hacer es incluir las declaraciones de las de los objetos antes del session Start para que el session conozca las definiciones de las clases vale con lo cual recogemos ahí ok vale perfecto bien y ahora añado al carrito objeto carrito perfecto y ahora que el objeto en principio está completo vamos a cargarlo en la memoria añado al carrito vale Ok y vamos a ver ahora el objeto está completo Voy a hacer una cosa voy a hacer una cosa Voy a cargarlo en una sesión de incógnito porque en principio sí que debe tener vale añado al carrito Ok y vamos a ver anir producto me extraña porque sí que está cogiendo sí que está cogiendo el listar productos pero no está cogiendo anadir producto carrito anadir producto Index recargamos vale aadir producto voy a decir hola Okay tenemos lo mismo vale New carrito y me extraña en principio que sí que esté siendo capaz aquí Este es el problema Vale ahora sí tenemos ya un producto en el carrito tenemos zapatillas de tenis tenemos click ahora tenemos dos productos tenemos raqueta de tenis y zapatillas de tenis esto de aquí arriba lo puedo quitar ya puedo quitar el bardum Vale y En definitiva vemos como estamos poniendo productos en el carrito Claro que evidentemente pues queda un poco mal entonces para hacerlo un poco mejor vamos a esto creo que lo puedo devolver ya aquí vale añado al carrito se añade un elemento y como digo ahora a continuación pues vamos a Añadir algo más bonito por tanto variable de sesión ahora voy a decir formatear carrito y al formatear el carrito voy a hacer lo siguiente aquí donde pone bardom listar productos pues no voy a hacer lo siguiente for carrito as producto y voy quetar un poquito de html voy a decir eco Table intento meter el mínimo html posible pero pues llega un momento en el que pues es necesario es imprescindible y aquí digo eco TR TD TD y aquí voy a poner pues h5 y ahora voy a poner el nombre que es producto eh nombre voy a poner un p que es producto descripción voy a bajar esto un poquito y voy a sangrar lo también un poquito y aquí voy a poner Pues un p con el precio y voy a poner euros Así que si todo va bien Ahora recargo la siguiente versión formatear carrito for it vamos a ver for falta un punto y coma aquí vale ahora me falta otro punto y coma aquí vale Y ahora unexpected token ech Ah pues por qué porque esto este for aquí fuera vale Lía 48 aquí falta un punto y coma Vale y vamos a ver at to property Warning on String interesante listar productos has producto teóricamente listar productos en el carrito teóricamente devuelve una Ray vamos a verlo bardum sesión carrito listar productos es interesante es una Ray del cual pues Ah tiene un String devuelve un String se ha convertido en String vale bien No pasa nada porque J son producto es igual a j son de code de esto de aquí por tanto jas producto as producto vale J son decode el J debe ser de tipo String un momento Ok esto es listar productos esto es producto vale property nombre Ah muy bien y J son producto J son precio vale vamos a ver eco j producto J decode producto Vale pues vamos a lanzar Ecos esto Qué es arr stram conversion muy bien ahora es New producto físico ni producto físico interesante porque esto devuel Ahí está Vale por tanto este array a ver qué estoy metiendo yo aquí Au qué dolor es que estoy metiendo esto madre mía como un String normal Muy bien pues Hala Ahora quiero eliminar la sesión vale añado al carrito Ahora sí vale Okay venga Ahora sí Ahora a ver esto Qué es array un esto fuera esto lo tengo Claro ya vale producto físico can convert en String okay No pasa nada en la línea 3 38 okay No pasa nada producto producto vale undefined property producto físico nombre bardom producto a ver qué me da producto Ya casi lo tenemos producto físico precio nombre y descripción Debería ser correcto producto físico nombre claro espérate No es que sea nombre es que de producto nombre precio y descripción vale dime precio Dime nombre y dime descripción Venga pues de producto Dime nombre Ok descripción dime descripción y dime precio vamos a verlo ahora Okay ya lo que tenemos es mucho mejor vamos a formatear un poquito Bueno he ido metiendo al final un montón de zapatillas vale vamos a ver un poquito de css vamos a estilizar el carrito 017 estilizado del carrito y con estilizado del carrito Pues ahora me voy al css y le digo a todo pading cer píxeles margin cer píxeles no quiero nada de esto quiero recargar asida veo aquí que tengo a ver Bueno pues aside h5 no meos está cogiendo formatear carrito esto es estilizar carrito okay Bueno ahora me haría falta voy a volverlo a hacer voy a hacer otra 60 porque tenía el carrito lleno Vale tengo el carrito vacío agrego al carrito veo que tengo ahí zapatillas de tenis eh raqueta de tenis vale veo que tengo ahí Pues ahora en el carrito dos cosas en el carrito también lo que voy a hacer es overflow y scroll y así Si meto algún elemento más pues se me va yendo ahí abajo Vale y ahora quito esto ya tengo algo en el carrito y por ejemplo en el carrito ahora a continuación voy a utilizar la función del cálculo del total 018 calcular total y para el cálculo del total pues voy a usar esta función que había desarrollado antes el método que había desarrollado antes entonces vengo por aquí y digo eco TR TD total TD y aquí voy a poner sesión carrito me voy a las clases me voy al carrito sumar total pongo el símbolo de los euros me vuelvo atrás calcular total me falta un punto y coma Vale y veo que al final pues efectivamente me está calculando el total de lo que tengo acumulado en el carrito voy a poner un poquito de font size 11 píxeles para que quea todo un poquito mejor ahí y con esto En definitiva pues vemos como eh Ya tengo el carrito en el sentido de tener los productos voy a meter por ejemplo calcetines de deporte vemos como se meten los calcetines y ahora una vez que tengo esto y un poco para ir cerrando la tienda online pues y para utilizar la clase cliente Pues voy a crear un formulario de alta de cliente un formulario en el cual el cliente se pueda dar de alta en la aplicación vamos a por ello Así que vamos a ver Bueno antes de ello voy a reorganizar un poquito el código porque aquí ya voy teniendo cosas un poco extrañas Vale entonces vamos a ver en funciones voy a crear vamos Air por aquí 19 proyecto y externalizar en funciones y ahora en la parte de externalización de funciones pues vengo por aquí funciones y digo vamos a ver Esto es function crear carrito si no existe copio y pego esto es Añadir producto al carrito Así que selecciono esto es function anadir producto al carrito y lo copio y lo uso vale l estado productos esto de aquí es el carrito vale Así que Eh Esto me lo llevo esto me lo llevo esto es function Mostrar carrito y ahora esto lo copio y me lo llevo y vamos a probar que sigue funcionando externalizar y ya está y sigue funcionando pero ahora el código de la página principal es mucho más entendible en el sentido de que pues prácticamente en una página lo tenemos Y si Queremos saber qué es lo que hace cada una de las funciones pues simplemente tenemos que ir a la al archivo de funciones y en las funciones pues podemos ver qué es lo que está ocurriendo en cada momento Bueno pues vamos a Añadir el cliente al carrito entonces para ello vamos a hacer lo siguiente voy a duplicar el proyecto 020 eh datos de cliente y voy a hacer lo siguiente vamos a ver vale en el carrito en las funciones que es Mostrar carrito voy a crear un botón eco a hre buton procesar pedido buton a y procesar pedido va a llevar a eh datos cliente Entonces yo de esta forma lo que voy a hacer es decir lo siguiente si vamos a ver o esto es página es igual a datos cliente ejemplo digo si no is set la variable get página en ese caso lían los productos en caso contrario si la variable get página es igual a datos cliente H eco h4 por ejemplo datos del cliente vamos a verlo a ver si está bien Vengo por aquí Eh vos esto fuera datos del cliente unclose porque me debe faltar un punto y coma en alguna parte a ver un momentín funciones línea 60 funciones línea Uy no Qué me falla aquí me falla ostras que me falta aquí cerrar esto parece Okay Vale entonces veo que hay un procesar pedido entonces pincho procesar pedido y dice Vale pues ya no te muestro como podemos ver aquí ya no te muestro los productos sino que te muestro los datos del cliente vale en datos del cliente pues evidentemente lo que voy a hacer ahora es un pequeño form donde el method es post y el action es yo voy a el modelo de datos del cliente no voy a incluir direcciones de momento de cliente el modelo de datos es nombre apellidos email y teléfono de momento vale de heo instructor tiene esto así que digo input type text name nombre y copio pego apellidos email y teléfono y input type submit Así que vemos que tenemos ahí El pequeño formulario vamos a crear estilo formulario sin que tampoco sea una obsesión porque el objetivo de este ejercicio no es tanto el estilo Pero form input pues with 100% pading top 10 píxeles pading bottom 10 píxeles margin top 20 píxeles vamos a verlo Ok procesar pedido vale una cosa así y vamos a Añadir un poquito más de p introduce el nombre del cliente poquito más de ayuda visual y email y teléfono los apellidos del cliente el email del cliente y el teléfono del cliente un poquito mejor vale Y ahora a continuación lo que voy a hacer es que le doy a enviar y quiero enviar el pedido vale De hecho quiero enviarlo diciendo que página es igual a procesa pedido de tal forma que digo si página es igual a datos cliente OK Pero el If página es igual a procesa pedido Pues voy a poner otra cosa eco h4 tu pedido se ha procesado correctamente Vale ahora veremos qué quiere decir esto de tu pedido se ha procesado correctamente pero de momento eh vamos a ver de momento me falta un punto y coma en alguna parte sí aquí vale de momento le doy a procesar al pedido introduce el nombre del cliente le doy a enviar y tu pedido se ha procesado correctamente vale Qué quiere decir que el pedido se ha procesado correctamente Pues nos hacen falta yo creo básicamente dos operaciones principales la primera operación que nos hace falta es Añadir el cliente al pedido y la segunda operación que nos hace falta que de eso tenemos quear largo y tendido es guardar el pedido para ello vamos a ver voy a duplicar el proyecto 02 y proyecto estilo del formulario esto es Añadir cliente al pedido al carrito realmente vengo por aquí index y procesa pedido vale Y entonces digo lo siguiente recordemos que en las clases el carrito Perdona Añadir cliente esto es vale carrito punto Añadir cliente sesión vale session carrito Añadir cliente y el cliente es un New cliente donde el constructor recordemos que tiene post nombre coma post apellidos coma post email coma post teléfono Okay Añadir cliente proceso pedido tacat Tac le doy a enviar atento read property no property a New cliente clases cliente en la línea 11 la línea 12 cliente línea 11 o nul vale voy a hacer una cosa voy a decir nuevo cliente es igual a New cliente añado nuevo cliente y así vemos dónde está el error exactamente vale No es la propiedad aa Ah cuidado aquí esta coma sobra vale on nul cliente ahow no cuidado esto es un igual esto es un igual esto es un igual Ahora sí vale Y ahora una vez que he guardado ahora a continuación lo que quiero hacer es bueno voy a hacer un bardum del carrito a ver qué tiene ahora el carrito más que nada para comprobar que ahora el carrito tiene productos físicos zapatillas vale Y que el cliente o sea y que el carrito tiene un cliente que lo tiene aquí todo vale con lo cual ahora me faltaría Prácticamente la última parte que consiste en guardar el pedido y vamos allá guardar el pedido Index eco tu pedido es procesado correctamente vamos a ver vamos a hacer un decode y aquí okay Así que cadena es igual a j encode ses carrito me lo paso a Jason a continuación digo file put contents y en pedidos guardo el date u pun Jason tengo que crear evidentemente una carpeta llamada pedidos vale y ya está así que si todo va bien Vamos a ver qué aspecto tiene esto Ah y otra cosa que quiero hacer es session destroy vale vamos a ver hago así proceso el pedido a bbb FC ddd envío tu pedido se ha procesado correctamente Y si ahora recargo vale en principio Ah session Star y session destroy no me lo ha no me lo ha hecho y voy a ver si en pedidos me ha guardado algo parece que no dónde estoy Añadir cliente al pedido no estoy en el 22 tengo que estar el 23 vamos a verlo guardar procesar a bbb cff ddd envío Ok file put content espera dos argumentos Por qué Pues porque claro tengo que decir dónde lo guardo Y qué guardo quiero guardar la cadena vale recargo OK ahora veo que se ha creado un pedido salgo de aquí veo que se ha vaciado el carrito y tengo un pedido Au este pedido está vacío Se ha guardado en Jason pero el J son está vacío vale a ver dónde está el error vamos a ver J Sol en code del este a ver voy a hacer una cosa destroy lo voy a posponer un poco añado y añado al carrito proceso el pedido envío el pedido se ha procesado nuevo pedido pero se me está guardando el jotas son vacío Por qué se me guarda el jotas son vacío ah estoy guardando la cadena voy a hacer una ec cadena más que nada para ver qué ocurre proceso pedido y el pedido está vacío J son encode vamos a hacer un bomp del sesión carrito Vale y vamos a ver en principio es correcto Debería ser correcto vamos a ver qué puede ser vale Voy a implementar una serialización en las clases que incorpora incluye Bueno aquí estoy guardando ahora borraré Esto vale que incluye en las clases implementar la posibilidad de serializar entonces en el carrito voy a hacer que implements J son serializable y voy a crear un método público que es js serialize que devuelve Esto vale de la misma forma productos cliente total Bueno ahora veremos vale a continuación este implement seri serialis lo voy a meter también en producto físico voy a meterlo en producto y esto me devuelve vamos a ver y esto me devuelve J son sería la isable Vale y con el cliente lo mismo con el cliente implementa con el cliente pongo este método vamos a verlo ahora okay bien y Eh vale vamos a ver que se ha guardado y aquí pues ya empiezo a tener un jas que dice los productos que se han guardado el cliente al que pertenecen vale Y en principio todo okay eh otra cosa que puedo hacer es verlo a ver jas validator para verlo un poquito más bonito para verlo en lugar de así pues verlo así y ver que tengo una sección de productos una sección de cliente un total que me parece nul preocupa mucho porque sol lo puedo calcular a posterior vale pero vamos a ver si eh s tengo vamos a ver si puedo guardar un jas un poquito más bonito vale Y voy a Añadir esta función al js lo quiero bueno esto ya no hace falta esto ya no hace falta J son encode Esto vale Así que me vuelvo Ah ahora también quiero hacer lo del session destroy Vale y vamos a ver proceso pedido nombre de cliente envío el pedido se ha procesado correctamente vuelvo pedido vaciado me voy al Jason y ahora sí tengo un Jason mucho más bonito y mucho más entendible donde puedo ver el pedido completo que se ha enviado a la página web vale dicho esto ahora y vamos a ver voy a hacer un par de cosas por una parte a ver redirigir al acabar esto es redirigir al acabar y voy a poner un header que es redirigir esto es refresh 5 Ok y aquí voy a poner un p y redirigiendo en 5 segundos y la URL es yo mismo Vamos allá así que redirigiendo añado al carrito proceso el pedido relleno mis datos le doy a enviar el pedido se ha procesado redirigidos en 5 segundos y en 5 segundos aquí estamos de nuevo en la página principal preparados para hacer un nuevo pedido voy a pedir muchos muchas unidades de un producto total del pedido 580 proceso el pedido pongo mis datos le doy a enviar el pedido Se ha guardado y ahora si me voy a la base de datos no perdona si me voy a pedidos me voy a ver el último pedido y veo que efectivamente pues se me han guardado todos los pedidos y se me han guardado todas las piezas de inform bien Vamos a limpiar un poquito el proyecto Así que 25 esto es Eh externalizar bueno eh vamos a ver proyecto refactorizar y en la refactorización me voy a la al archivo Index que ahora se me ha quedado un poco más sucio y bueno Y aquí Pues básicamente me voy a ir a Inc me voy a ir a funciones y voy a poner function formulario cliente y en el formulario cliente Voy a seleccionar todo este eco y lo voy a poner en formulario cliente Okay formulario cliente y ahora aquí en funciones voy a poner una función confirmación pedido o envía pedido me voy a Index selecciono todo esto me voy a funciones lo pego en envía pedido copio la función y de nuevo Pues creo que el código vuelve a ser entendible código vuelve a estar controlado es decir tenemos todo en una página principal donde yo creo que la lógica de negocio se entiende bastante bien y si quieres averiguar algo más de qué es lo que hace cada función pues ya te vas al archivo de funciones y ya averiguas lo que quieras averiguar vengo por aquí vale proyecto refactorización un producto otro producto me voy a procesar pedido e cuidado qué ha pasado aquí datos cliente a ver formulario cliente no lo he guardado muy bien No pasa nada recargamos procesa pedido Ahora sí envío redirigiendo en 5 segundos y ahí lo tenemos y ya está y ahí tenemos un nuevo pedido realizado dentro de perdón dentro de pedidos dentro de El último pedido hasta el momento todo esto que estamos haciendo pues técnicamente lo deberíamos estar cuadrando con la base de datos deberíamos estar guardando algo en base de datos pero en este caso todavía no quiero porque en este bloque nos estamos centrando en la programación orientada a objetos el objetivo de este bloque es demostrar la utilidad de la programación orientada a objetos y no quiero mezlo digamos con otros conceptos que al final también resultan complejos como la gestión de bases de datos que ya llegaremos más adelante