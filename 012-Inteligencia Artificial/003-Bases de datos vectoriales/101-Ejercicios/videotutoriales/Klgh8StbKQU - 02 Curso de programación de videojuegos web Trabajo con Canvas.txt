hasta ahora por tanto hemos estado trabajando con ejercicios como estos donde al final nuestros elementos gráficos están en diferentes bits de html que es perfectamente válido pero tenemos el problema mirad de que podemos incurrir en rendimiento escaso cuando elevamos demasiado el número de elementos por ejemplo en el caso de este archivo index 10 en el momento en el que yo digo por ejemplo que quiero 500 fichas pues recargo y veo que las fichas van a golpes creo que las fechas van un poco pasadas este es realmente el límite de nuestro rendimiento en cualquier juego razonablemente moderno y no te digo ya de peces sino incluso de móvil parece que pueda mover tantos elementos como estos sin tener demasiada para alegación o al menos no tanta como está entonces lo que está ocurriendo aquí en la pantalla simplemente es que si voy a inspeccionar elementos al final inevitablemente pues tengo aquí entonces lo veis todo el html lleno de elementos concretamente hay 500 elementos y cada uno de estos elementos pues a su vez tiene un montón de propiedades que están moviendo en tiempo real ese es el problema del rendimiento vale entonces ha sido fácil para nosotros de comprender el trabajar con dibise independientes y cambiar cada uno de estos tips pero en cuanto a rendimiento y sobre todo para hacer juegos no es la opción más óptima la opción más óptima por tanto es la que vamos a ver es un poco más difícil que la que hemos trabajado hasta ahora por eso no la vemos de inicio pero es una herramienta llamada canvas así que la herramienta llamada canvas que puede ser canvas 2d y canvas 3d evidentemente vamos a pasar con canvas donde es básicamente un lienzo donde podemos dibujar cosas la cuestión está en que cuando dibujamos quinientas cosas sobre ese lienzo al final en html el lienzo es uno aunque dentro tengáis quinientas cosas pero el paquete es uno y por tanto nos permite mejorar mucho el rendimiento con respecto a hacer cosas como estas formato débil así que vamos a empezar lo primero que hacemos por tanto es que me voy a crear la carpeta 2 voy a crear un archivo me lo voy a guardar dentro del escritorio no quiero buscar otras carpetas dentro de jose vicente dentro de fundamentos me voy a crear el otro día tenía una carpeta de 0 1 hoy me creó una carpeta 02 y voy a crear una carpeta llamada geometría donde voy a empezar con un archivo llamado index e.html y voy a cambiar vamos a ver esto voy a hacer lo siguiente miradme como os podéis imaginar de la carpeta 01 me voy a copiar el jquery a la carpeta 02 también quiero esa librería y también como os podéis imaginar de la última del último ejercicio que hicimos me voy a copiar la estructura del html del javascript del css entonces guardo recargo y como siempre me quedo la estructura me quedo la estructura de la cabeza el cuerpo el título el char set la importación de jquery el script que puedo empezar a crear el estilo y el escenario lo voy a cargar evidentemente pero dos index.html y lo cargo dentro del navegador y a partir de aquí puedo empezar a trabajar a partir de aquí por tanto mirad house a partir de aquí lo que voy a hacer es que dentro del escenario voy a crear un canvas calmas y voy a decirle y de es igual a escenario no puedo llamarlo voy a llamarlo mi canvas una noticia que os doy ahora que más adelante veremos cómo solucionar pero de momento canvas me obliga a ello es que el weeks y el height no pueden darse en html css sino que tienen que darse en html así que voy a poner por ejemplo en guys 800 píxeles y height es igual a 400 píxeles atención todos a la pantalla que como le estoy dando los estilos en html y css en html se dan con el signo igual y no con los dos puntos como si fuera css por tanto hago algo parecido a css pero la sintaxis es diferente a continuación también lo utilizo un poquito en css y le digo mi canvas es border un píxel solid grade por qué pues porque quiero verlo en la pantalla porque sólo si hago esto mirad es cuando aparece el canvas realmente representados y no pongo eso el canvas y que está pero yo no diferencio el blanco del canvas del blanco del fondo porque por defecto un canvas un lienzo está blanco para empezar a pintar dentro de él lo que hago ahora es utilizar una estructura de control que me permite empezar a dibujar dentro de ese canvas esa estructura de control la voy a sacar de algún juego anterior de vicente karate la barra código barra arkanoid mismo y la estructura de control es la siguiente en primer lugar voy a hacer lo siguiente voy a copiar estas dos líneas y estas dos líneas tienen el siguiente código en primer lugar me creó una variable que puedo llamar como quiera y le digo que esa variable es fe por ejemplo y le digo que esa variable equivale a del documento tomar el elemento que tiene el y de mi canvas voy a ir escribiendo cosas mira esto lo pongo en un documento punto 9 function ya sabéis esa estructura de control es prácticamente obligatoria dentro de esa estructura de control pongo este código y lo empiezo a comentar así que voy a decir tomo el elemento que tenga el y de mi canvas a continuación en la parte de abajo digo le asignó un contexto bidimensional y al asignarle un contexto bidimensional lo que estoy haciendo ni más ni menos es decirle al sistema que me ponga a mi disposición todas las herramientas de dibujo 2d que tenga y evidentemente que no ponga a mi disposición las herramientas de dibujo 3d porque no las voy a usar a partir de aquí voy a hacer lo siguiente a partir de aquí vamos a ver vale podría trabajar con un contexto punto arc esto lo haremos ahora luego vamos a empezar por algo más sencillo así que código así que game of life este es mucho más sencillo y por tanto un segundo está y por tanto voy a hacer lo siguiente a continuación le doy un color a aquello que voy a dibujar y digo contexto feel style rgb y voy a decir 25 500 lo que en html y css equivale al color rojo es decir la primera componente de rojo la segunda es verde la tercera es azul la estoy diciendo que quiero mucho rojo nada de verde el color resultante seguro que va a ser de color rojo y diego por aquí el rojo a continuación y a continuación le digo dibujó un rectángulo y por tanto para dibujar un rectángulo hago lo siguiente digo con textil recta y digo su posición va a ser 20 su posición en x su posición en y va a ser su tamaño va a ser 30 su tamaño va a ser por tanto si esto ha funcionado correctamente lo que hago es recargar en la pantalla ahora vamos a inspeccionar elemento ahora lo que haré aparte de ver aquí la consuela con texto is not be fine por qué porque es con texto así que con texto y contexto así que ahora recargo en la pantalla y comprobamos como en la pantalla aparece un rectángulo de color rojo y así de sencillo simplemente lo que he hecho es que darle lamento decirle que voy a trabajar en 2d le digo con qué color voy a trabajar y por último le doy las propiedades del rectángulo que voy a dibujar y a continuación lo que quiero es ser capaz de con el teclado por ejemplo con las flechas mover este cuadrado por la pantalla es decir que el sistema reconozca mi interacción y que participe de ella qué es lo que voy a hacer por tanto ponemos a continuación digo escucho si se está pulsando una tecla para ello por tanto voy a hacer lo siguiente grado lo saco de aquí y digo lo siguiente fue inicio el juego un zombi dyn ambas dibujó la pelota vamos a ver estas son las condiciones de inicio colecciona con los bloques tengo por aquí ah no vale por ejemplo aquí tengo el mouse move bueno vale venga pues el ratón vamos a hacer el ratón así que voy a hacer lo siguiente voy a poner aquí el rectángulo se mueve con el ratón así que digo cuando en el canvas solo cuando el ratón esté en el canvas haga un mouse move lo que voy a hacer es actualizar la posición x del evento pero claro esto me va a dar un problema y voy a hacer lo siguiente gr contexto punto fil rec y quiero que en la pantalla ponga lo siguiente event punto posición x la vamos a ver dónde está aquí en fin vamos vale y ven cliente x como event punto cliente y coma 30-30 es decir de este método por tanto estos cuatro parámetros son la posición en x la posición en y la anchura y la altura así que me voy ahora a refrescar me voy ahora a refrescar y si todo ha ido bien atención cuando muevo el ratón lo que estoy haciendo es dibujar un rectángulo así que acabamos de crear nuestro primer paint dentro de canvas usando javascript la cuestión está en que a mí lo que me gustaría y esto es una constante en prácticamente cualquier juego que hagamos hasta ahora es que a partir de ahora es que cada vez que yo dibujé algo nuevo lo que quiero es borrar lo anterior como os podéis imaginar hay un método que consiste en que antes de dibujar yo aquí nada lo que voy a hacer simplemente es dibujar un rectángulo blanco en el fondo pero un método más sencillo es hacer lo siguiente con texto punto clear rect es decir es un rectángulo de borrado de claire y le digo 0 800 400 porque 800 400 pues porque recordar que justo son los parámetros que le dan al canvas esto más adelante lo meteremos en variables pero de momento hoy ahora lo metemos en números estáticos por tanto guardo y recargo y observo que aparentemente lo que estoy haciendo es que él el rectángulo rojo siga a mi pantalla siga a mi pantalla por tanto esto quiere decir que tengo algo así tengo algo parecido a un cursor animado claro tengo aparecido algo parecido a un curso de animales en el típico juego que cuando metes el ratón de cambiar el cursor alguien es un cursor personalizado pero el problema es que sigo viendo el curso normal sigo viendo el curso legal un poquito de css en este caso así que voy a esconder el cursor y voy a decir algo tan sencillo como cursor no es decir el cursor típico de html no te digo ya ni siquiera que quiero que me lo cambies porque se puede cambiar lo que quiero es que me lo oculte es directamente así que guardo recargo y fijaos que cuando me meto dentro del canvas cuando salgo de fuera del canvas yo tengo cursor pero cuando me meto dentro del canvas no tengo cursor sino que el cursor es directamente el rectángulo que estoy dibujando y como podréis ver por tanto ese rectángulo hace las veces de cursor y me sigue la pantalla no me sigue realmente la pantalla sino que lo que está ocurriendo es que cada vez que novo el ratón borra la pantalla y dibuja borrar la pantalla y dibuja siempre que yo me esté moviendo pero qué cursos más aburridos es este que consiste en un rectángulo rojo evidentemente yo lo que voy a hacer prácticamente la mayoría del tiempo es usar una imagen y trabajar esa imagen como cursor es decir o bien ahora me bajo un cursor de internet o bien más adelante lo que haré es dibujar un cursor en el segundo mes cuando estemos en un grafismo por tanto lo que voy a hacer ahora es irme a google y voy a poner cursor png transparente no momento un momento vamos a pedir algo así no lo sé si no lo trato eso es lo que menos hombre ocupa ahora mismo el que sea grande lo que más me preocupa es que sea transparente de hecho se supone que lo es o no porque hay bajo pero es que el monitor más muy bien si se desea mucho mejor el monitor se ve como blanco entonces guardo imagen me la guardo en escritorio en jose vicente en fundamentos en geometry aquí voy a crear ya sabéis una carpeta llamada imágenes y esto antes de pasar os lo voy a poner como cursor de hecho probablemente si sabes qué pasa tienes razón voy a uno más divertido más cursor no me les pasa que recoger este vale puedes guardar la imagen a mac cursor pues igual pues vale pues cursor 2 y ahora lo que quiero evidentemente es editarlo con un programa de retoque fotográfico para que finalmente ocupe menos porque éste ocupa pues menos en píxeles quiero decir es que ocupa 286 puntos 29 es decir el cursor es más grande que mi propio juego por tanto no puede ser así que me voy a estar la imagen me voy a por ejemplo 32 píxeles por 21 una cosa así ahora lo que voy a hacer es tamaño del lienzo asegurarme que lo ajustó a 32 la dimensión y ahí lo tenemos y ahora por tanto lo que voy a hacer es exportarlo para exportar joyas sobre escribir cursor 2 y ahora los paso para que lo podáis usar una vez que tenemos este cursor copiado y pegado en la carpeta lo he llamado cursor 2 png es un archivo con transparencia lo que voy a hacer es cargarlo y para cargarlo voy a hacer lo siguiente lo que voy a hacer es decir estas tres líneas vamos a verlo del lugar por tanto de dibujar un rectángulo y voy a hacer lo siguiente así que voy a comentar línea a línea para que lo veáis limpio la pantalla ahora digo creo una nueva imagen como objeto en la siguiente línea digo el vecino el origen de la imagen y por último dibujo la imagen en el canvas así que qué imágenes pues no es jugador png sino es entra en la carpeta imágenes o como sea que se llame nuestra carpeta busca la imagen cursor 2 punto png y digo dibujo la imagen vamos a ver en cliente ibm x coma cliente punto y bent y todo esto me lo llevo un poco para atrás y ya está vamos a verlo esto no pulsa el retorno de carro simplemente a mí se me ha ido abajo porque la línea es demasiado larga y me lo ha bajado pero teóricamente va todo seguido teóricamente va todo recto así que guardo recargo y al recargar vale cliente is not the fine vamos a verlo claro no es cliente vamos a verlo function event y un segundo porque client is not y find y voy a ver en este caso event evento cliente x le puesto al revés en punto caliente x event punto cliente y ahora sí guardo recargo altura canvas es not be fine vamos a verlo y esto aclaró muy bien esto es ing even cliente y así que fijaos que por tanto lo que estoy haciendo es cambiar el cursor cuando entro dentro de ese canvas y ahora la gracia está en que ese cursor podría ser cualquier cosa ese cursor podría ser cualquier dibujo por favor con transparencia png eso sí que podáis sacar de internet ahora se nos plantea una pequeña disyuntiva yo tengo él yo tengo el ratón que está situado digamos encima de un lienzo blanco ahora quiero por ejemplo mirar si busco aquí geométricas y pongo imágenes por ejemplo y pongo por aquí ahora buscaremos geometrías icons quiero mirar ya está aquí quiero este me voy a bajar esta imagen voy a llamar a esta imagen de escritorio esa imagen muy importante la voy a evitar con gimp para decirle que quiero que tenga 800 x 400 porque 800 x 400 x porque es el tamaño de mi juego así que 800 x 400 centrado redimensionó sobre escribo y ahí lo tengo la cuestión está en que ahora imagínate que quiero poner esa imagen de fondo de mi proyecto si quiero poner esa imagen de fondo de mi proyecto yo puedo hacer lo siguiente lo voy a hacer pero no lo hagas nosotros porque no os lo recomiendo yo creo una nueva imagen bar img fondo y digo img fondo punto src el cursor 2 png y ahora por tanto digo el contexto puntos rob image quiero img fondo punto cero me la pones en cero y esto es quiero que sea fondo punto jpg así que guardo y recargo aquí vamos a verlo no es fondo punto jpg dónde está ese escritorio punto jpg y ahí lo tengo no sé si veis como tengo el cursor mío es diferente más la imagen de fondo cierto y funcionar ha funcionado pero esto es lo más ineficiente del mundo porque yo cada vez que estoy refrescando la pantalla estoy volviendo a redibujar yo lo que estoy haciendo aunque no se vea porque ocurre muy rápido es que estoy borrando todo el fondo y estoy poniendo el fondo de geometrías y estoy poniendo el cursor lo que estoy haciendo para que creéis que sirve redibujar todo de un tirón no sirve para nada si el fondo se fuera a mover entonces en ese caso tendría que redibujar lo pero si no se va a mover qué sentido tiene estar cargando inútilmente al sistema lo que voy a hacer por tanto por eso lo he dicho no lo hagáis lo que voy a hacer por tanto es simplemente decirle de momento al menos que mi canvas tiene background url imágenes escritorio jpg que consigo recargo y consigo exactamente el mismo efecto pero ahora la imagen de fondo está estática lo único que estoy borrando y escribiendo cada vez es el cursor no la imagen entera vale por tanto insisto ocurre muy rápido y por tanto ahora mismo probablemente no noto prácticamente penalización pero evidentemente sí que la tendría qué es lo que vamos a hacer ahora bueno lo que vamos a hacer ahora os acordáis al principio del juego es que aparece por aquí un ladrillito que va a dar vueltas vale aparecer la brillito que va a saltarnos la pantalla voy a entrar en el gimp dentro del gym voy a crearme una imagen nueva de 800 x 400 vamos a trabajar un poco una demostración de qué es lo que estaremos aprendiendo durante el segundo mes entonces tengo el fondo veremos que trabajamos con capas y al crear capas a esta capa la voy a llamar degradado así que esta capa de degradado será un degradado que irá de blanco a negro así que un degradado por aquí ahora quiero crear otra capa de fondo que será un fondo de color azul por tanto esto es lo que estamos aprendiendo en el próximo mes creó un fondo azul y ahora lo que hago es que esa capa la multiplicó para decirle que el degradado lo quiero multiplicado sobre el fondo azul y luego veréis que puedo jugar con el peso de cada capa sobre el fondo final quiero otra capa que sea cuadrados así que voy a simplemente dibujar aquí con el signo más dibujar cuadrados una cosa aproximadamente así y con ello por tanto estoy generando los gráficos de este juego bien una vez que tengo esto lo pintó de color blanco bien vale y fijaos ahí vale pintado de color blanco y ahora lo que voy a hacer es simplemente fusionar lo sobre la pantalla con lo cual fijaos que tengo por ahí pues la capa azul la capa de cuadros la capa de degradado y ahora vamos a verlo y ahora lo que voy a hacer es poner un texto y el texto se va a llamar geometría curso así que lo seleccionó lo subo de tamaño claro ahora tengo que buscar una fuente que sea interesante en cuanto a que sea una fuente digamos pixelada entonces para ello solo recurrir a vamos a verlo aquí suele recurrir páginas como la font puntocom entonces anda font pongo 2 matrix y empiezan a aparecer fuentes un poco de ese tipo no voy a poner matrix y algo así por ejemplo printer estoy intentando acordarme cómo se llaman las impresoras pues bueno voy a algo como la calidad salido antes esta de aquí así que habrá descargo así que en la carpeta la muestro extraer no escribe matrix la voy a instalar y lo que sí que os voy a decir es que tendré que con toda probabilidad reiniciar el gym para que se dé cuenta de esta fuente por tanto escritorio josé vicente fundamentos geometría imágenes fondo punto x cf lx cf estaremos viendo que es un formato propio es un formato específico del game no es compatible con un videojuego el xtf es el archivo original el que tiene todas las capas el que tiene toda la información lo que voy a hacer siempre evidentemente es guardar una versión en formato xtf y luego exportar la versión en formato png jpg otra cosa que os digo es que esta imagen que me ha bajado de internet no sé si se ve en la pantalla pero tiene como compresión con pérdida se nota como tiene algo de pérdida de calidad vale por tanto lo que voy a hacer ahora veréis lo que voy a hacer en este caso va a ser sencillamente guardarla en png para no perder esa calidad en el degradado he tenido que reiniciar simplemente para que se dé cuenta de que he instalado una nueva fuente tipográfica y ahora a partir de ahí la pueda usar quiero decir que no estaréis una fuente y a continuación la busques en este programa en la lista de fuentes porque pueden no haberse actualizado en este caso no reiniciamos el equipo entero pero simplemente reiniciamos el programa para que se dé cuenta de la nueva fuente momentín que está tardando así que aprovecho recargo ahora este archivo que he guardado fondo punto x cf por cierto este lo voy a invertir ahora así y dentro del río mitri curso lo que voy a hacer es decirle que la fuente no va a ser sants sino que la fuente va a ser aquí lo tenía screen los he visto sans 3 estamos así que gm tree curso bien ahí lo tenemos a centrar esto un poquito además fijándome un poco en la imagen original vemos que tenemos bueno pues un cierto color así que tenemos voy a ponerle un color verde ahora voy a duplicar esta capa la suba para arriba para decirle que a la imagen original y le voy a poner un color verde más oscuro y de esta manera digamos que parece como la sombra parece que tenga como un poquito de relieve ahora lo que puedo hacer es crear me una imagen momento crea una imagen con vino hacia abajo con vino hacia abajo con eso lo que he conseguido es que el texto se me quede como una sola capa y ahora puedo duplicar por ejemplo para hacer que pues por ejemplo para hacerle un brillo y contraste brutal para que se quede blanco y ese color blanco lo que voy a hacer no tiene para abajo lo que voy a hacer es hacerlo más grande filtros difuminar desenfoque gaussianos para que tenga como una especie de brillo es lo veis que sale más allá del texto estoy sin brillo esto es con brillo luego si no pasa nada esto lo que tiene que componer por capas pero ya veréis cómo se hace luego por ejemplo lo que hago es pintar de negro colapso con el día hacia abajo le digo que herramientas a imagen colores brillo contraste mucho brillo para que aparezca eso para que aparezca como una como un reborde blanco si os fijáis lo que estoy buscando es un poco reborde negro reborde blanco entonces bueno para lo que digo es colores invertir tengo el reborde negro era aquí en el reborde blanco es el reborde blanco por ahí así que duplicó déjame ocultar unas cuantas cosas ahora colores invierto ahora filtros difuminado no más desenfoque gaussianos ahora colores brillo contraste brutal y por tanto al final lo que obtengo vamos a verlo ese es el fondo blanco así que este tiene que ir sumando donde esta suma al este es el fondo negro así que este tiene que ir multiplicando y ahí bueno queda un poco raro pero tenéis el geométrico curso con blanco y con negro bien suficiente vamos a darle un poquito más los difuminar desenfoque gauss ya no más caña y ahora en colores con brillo contraste quiero contraste pero quiero brillo ahora sí así que al final me colapso todo esto y bueno no quiere nada así que me duplicó esta capa le digo la invierto le digo que capa transparencia color alfa lo quiero con transparencia eso es la sombra mover capa activa eso es la sombra es normal hay ahora por tanto con filtros y ya está desenfocó un poquito le bajo transparencia y ya lo tenemos ahí vale yo metro y curso y al final hemos usado x capas la idea la gracia está por tanto era en que yo por una parte me guardo esto como un formato x cf pero yo no puedo meter un formato xtf ni aunque pudiera lo querría porque estaría cargando contra esas capas a la vez lo que quiero es exportar y lo guardo como fondo mío punto png para que pues para ahora decirle al sistema que lo que quiero es cargar aquí está fondo mío punto así que en fondo mío punto png que ahora os paso cargo y tengo yo me trick urso con el cursor y ahora lo que haremos evidentemente en pantalla es poner la animación de un bloque que vaya a dar los saltos voy ahora a diseñar el bloque con el que vamos a empezar a jugar entonces digo geométricas itunes sale esto así que bueno estos son ejemplos de iconos que tenemos dentro del geometrías lo que voy a hacer es crear uno personalizado la verdad es que todo es molas mirar voy a crear uno como éste que es el más básico verdad entonces para ello no voy a usar en este caso camps sino que voy a usar en que skype es otro de los programas que estaremos usando para trabajar con gráficos en este caso vectoriales estoy arrancando inkscape o eso creo así que parece que está arrancando y ahora dentro de inkscape pues voy a dibujar un el elemento voy a dibujar un cursor básico de momento más adelante iremos dibujando más cursores es un segundo que es que está arrancando y ahora cuando quiera una vez que tengo en que es que en la pantalla voy a configurar me un documento voy a decirle que voy a trabajar en píxeles y este elemento será vamos que te diré yo de unos 30 x 30 píxeles así que cierro veo que tengo ahí 30 x 30 píxeles y ahora lo que hago es dibujar fijar es como la diferencia entre game en que skype está entre en que camps perdonen que es un programa de trabajo vectorial por tanto vengo aquí eliminó este objeto diferencia ahora voy a crear aquí un rectángulo no sé por ejemplo de color vamos a ponerlo azul o verde que ya tengo mi elemento de ese color vale ahora este elemento también de color verde quizás lo haga un poco más pequeño lo quiero alinear con la pantalla por tanto tengo por aquí por alguna parte las herramientas de alinear distribuir y fijaos cómo vamos a verlo alinear al centro me aseguro que estén alineados al centro y ahora con las herramientas de borde quiero relleno borde color de trazo quiero que el trazo se ha redondeado y bueno pues ahí lo empezamos a hacer si pienso yo vale no está simétrico pero me da igual luego cojo esto me lo lleva hacia la derecha hasta que esté aproximadamente simétrico y ahí lo podemos empezar a tener bien una vez más me guardo esto en primer lugar esto es fundamentos 02 imágenes un icono y luego por supuesto lo exportó en formato png esto se va a llamar escritorio se va a llamar jose vicente es fundamentos geometry imágenes y se va a llamar y exportado la página quería exportar como jugador exportar y ahora también os voy a pasar dentro de imágenes el jugador en formato png y el icono que corresponde al jugador en formato scalable vector graphics o lo que es lo mismo el original lo que quiero ahora es que por una parte el icono que yo he dibujado vaya por aquí abajo empieza a rodar por aquí abajo y que en definitiva saber hacia la derecha y luego haremos cuando hagamos clic salte pero en el momento en el que yo digo el icono va hacia la derecha evidentemente esto equivale a una función de juego es decir una función repetitiva esto quiere decir por tanto que dentro del código voy a hacer lo siguiente voy a acabar llamando a una función de juego y por tanto diego función juego la función de juego ya sabéis que acaba diciendo say time out juego en 33 milisegundos o lo que queráis luego se puede cambiar y yo ahora realmente lo que quiero es que todo este código se ejecute bueno donde se va a ejecutar pues esto es un poco lo complejo mirad voy a empezar a repartir yo no quiero poner el contexto dentro de esta función porque estaría redefiniendo el contexto a 30 fotogramas por segundo yo no necesito redefinir el concepto yo lo que necesito es redefinir la posición del jugador pero no el contexto entero por tanto mirad lo que voy a hacer es sacar este contexto en la línea de get element by haití y la línea de get context las voy a sacar fuera a sacó fuera y compruebo como el juego de momento sigue funcionando camp nou read property ticket context of noon vale ahora vamos a eso en la línea hay un problema el problema es el siguiente mira a todos cojo la script y me lo bajo al final de la página y entonces sí que veréis que funciona el juego porque entonces sí que funciona el juego la respuesta es muy sencilla bar get element by heidi mike ambas pero cuando ponía el escrito aquí mike ambas todavía no existía y por eso la error es decir pongo el script como una como un truco sucio al final del todo para asegurarme que cuando se haga referencia a mí canvas mica más realmente exista así que nos lo ponemos al final abajo del todo ahora a continuación lo que quiero exponer todo este código - la llamada a juego evidentemente dentro de la función juego y por tanto vamos a ver mouse move esto realmente el clear lo quito el clear rec lo quito no lo quito lo que voy a hacer es ponerlo dentro de la función de juego es decir dentro de la función de juego lo primero que quiero hacer es limpiar la pantalla vamos a verlo vale ahí lo tenemos se nos ha quedado el recuadro rojo no pasa nada veis como deja incluso una estela sólo aparece el cursor cuando muevo el ratón lo cual es correcto me vale voy a eliminar el rectángulo rojo le doy elimino el rectángulo más adelante dibujaremos rectángulos ahora voy ahí lo tenemos y de momento ya estamos correctamente por tanto recargo y comprobar que os funciona hasta el momento correctamente un problema que tengo es que el cursor me empieza a ir terriblemente lento y la razón de esto es que yo estoy declarando un nuevo objeto en memoria cada vez que paso por aquí y eso no puede ser así que él creó una y nueva imagen como objeto y define y defino el origen de la imagen lo pongo también en las declaraciones globales recargo ahora y por tanto ahora veréis que el programa aguanta la ejecución mucho mejor y por tanto tardará mucho más rato en eventualmente corromperse si es que se llega a corromper a continuación lo que queremos es poder responder al clic del objeto pero antes de ello necesitamos dibujar el objeto y que dibujar el jugador y que vaya de un lado a otro de la pantalla por tanto mirad vamos a ver voy a eliminar algún espacio vacío y ahora vivo posición defino una posición inicial para el jugador y digo 2x es igual a digamos 0 defino una altura inicial para el jugador y digo pos y es igual por ejemplo a 300 estoy contando que estoy diciendo vamos a ir avanzando en contenidos pero hay muchas cosas que se van a repetir pues equipos y muchas veces en muchos juegos tendremos pues equipos y la función de juego el set time out hay cosas nuevas pero ya no esto de nuevo como la semana pasada bien ahora digo quiero dibujar dibujó el personaje dibujo el personaje es que hago lo siguiente atención mirad aquí arriba digo defino sólo una vez el objeto imagen del personaje y por tanto digo bar img personaje es igual a new image y ahora digo defino cuál es el beat map del personaje y esto es img personaje es muy importante punto src es igual a imágenes barra personaje pm porque creo recordar que personaje punto png era como había llamado pero jugado el jugador punto png y ahora por tanto dentro de la función juego digo dibujo el personaje así que con textos row image ing personaje como 2x y recordad que en el canvas al igual que ocurre en cualquier otro elemento en el canvas el punto 00 es este de aquí arriba así que recargo y fijaos que por ahí tengo el personaje pero el personaje está quieto en la pantalla y yo no quiero que esté quieto así que para que no esté quieto lo que voy a hacer simplemente va a ser aumentó progresivamente la x del personaje y digo por equis más igual a 1 lo cual quiere decir coge lo que valiera equis y sumarle 1 y lo que tengo en la pantalla por tanto es que el personaje va avanzando igual avanza un poco demasiado lento por eso lo que puedo decir es pos x + igual a 4 por ejemplo y así lo que estoy haciendo es variar la velocidad del personaje tengo por tanto un personaje en pantalla que se va moviendo pero este problema porque cuando el personaje desaparece por la derecha simplemente no vuelve a aparecer así que como os podéis imaginar lo que quiero es que cuando la posición del personaje sea más de 800 que vuelva a ser 0 y eso se hace de una manera muy sencilla lo que hago es cuando el personaje salga por la derecha que vuelva a entrar por la izquierda así que lo que hago ahora por tanto es que if 2x es mayor que 800 en este caso pues x es igual a 0 recargó y si todo ha ido bien ahora veréis en la pantalla como cuando sale por la derecha vuelve a entrar por la izquierda ahora lo que quiero es simplemente detectar empezar a detectar cuando hago clic sobre el canvas y voy a decir que cuando haga clic sobre el canvas quiero que la pose y de repente se vaya hacia arriba tendrá que saltar personaremos a luego momento simplemente quiero que se vaya hacia arriba así que digo lo siguiente digo cuando sobre el canvas haga clic le voy a decir function y me digo post y igual 50 de hecho estoy pensando un momento que lo voy a poner aquí en el documento así que digo cuando sobre la imagen haga clic y el personaje me he puesto aquí vamos a probarlo mirad entonces hago clic ahí va y compruebo como efectivamente cada vez que hago clic realmente estoy subiendo al personaje compruebo que hago clic y el personaje empieza a subir en la pantalla lo que hecho es poner por tanto dentro del documento edit de momento lo que es poner esa función cuando sobre el canvas haga clic ejecutó una función anónima que básicamente lo que hace es decir a la posición y le quito 50 píxeles ahora lo que quiero no es nada demasiado fácil tenemos que hacerlo de la manera más menos digamos intensiva posible menos común computacionalmente cara posible y así lo que quiero es que cuando le haga clic al objeto de un salto que de un salto básicamente equivale a que al principio su y de crezca pero ese salto mira dos lo dibujo con el zoom it ese salto tiene que ser de la siguiente manera atención ese salto tiene que ser una cosa así una cosa sí que quiere decir que primero sube bastante pero luego sube menos pero luego sube menos llega un momento en el que directamente no sube y empieza a bajar a bajar eso técnicamente una vez más estilo parabólico pero tampoco quiero ahora empezar con la posición la aceleración la velocidad de rollos de esos primero porque es complicado para nosotros para como humanos y segundo porque también es complicado para el programa al calcular habla senos y cosenos cuando realmente no hace falta así que voy a hacer lo siguiente cuando sobre fijaos te voy a definir una variable defino una variable inicial velocidad vertical y digo bell y es igual a 0 porque en el momento verdad está a cero y así que ahora digo lo siguiente cuando sobre aquí está cuando sobre canvas haga clic no voy a decir la posición menos igual a 50 voy a decir bell y es igual a 230 por ejemplo bell y es igual a 30 es la velocidad con la que el cursor va a salir así que por aquí digo lo siguiente compruebo si el personaje está en estado de salto y digo si es cierto qué velocidad y es mayor que 0 es decir que está saltando en ese caso digo lo siguiente y menos igual bell y ahora digo bell y igual 5 por ejemplo que nos da esto que nos da esto mirada nos da un salto un poco raro porque yo recargo y hace así bien hace así fijaos que lo que hace es la primera parte del salto pero quiero que veáis cómo hace plan y empieza a saltar aunque se queda ahí arriba lo que queremos por tanto es que la velocidad y en un momento dado aquí la velocidad y pueda ser negativa es decir que no sólo pueda subir sino que además pueda bajar así que finalmente probablemente lo que quiero no es ya medir la velocidad en y porque quiero que sea posible que sea menor que cero sino que lo voy a decir cuando vamos a ver cuando la velocidad de y es igual a cero no voy a hacer lo siguiente saltando es igual a 1 es decir define un estado de salto aquí arriba defino un estado de saldo y digo van saltando es igual a cero saltándose igual a 1 así que digo si saltando es igual a 1 en ese caso todo esto de aquí y ahora digo si vamos a ver si pos y es menor perdón es mayor que 300 en ese caso saltando es igual a cero y en ese caso pues y es igual a 300 vamos a ver os voy a explicar qué es lo que he hecho aquí primero veamos que funciona mira tengo ahí ya el personaje saltando el personaje sigue saltando tanto como quiera y ahora os voy a contar qué es lo que he hecho en primer lugar lo que hago es que defino un interruptor como un interruptor de la luz encendido apagado de un estado de salto en este caso lo que estoy haciendo es definir que saltando es igual a cero donde cero podríamos decir que equivale a falsa falso y saltando uno es igual a verdadero así que cuando haga clic sobre el canvas lo que hago es decirle activo la función de saltando activo el estado de saltando y lo que voy a hacer al final es que compruebo si el personaje está en estado de salto y le digo para poder copiar y le digo la posición está en función de la velocidad y digo sí mulos la fuerza de la gravedad para que la velocidad de crezca ahora en el caso de que el jugador haya vuelto al suelo en el caso de que el jugador haya vuelto al suelo es que la posición y es mayor que 300 evidentemente en este caso desactivó el estado saltando reinicio la posición vertical del jugador y ahí lo tenemos por tanto ahora ya es una cuestión decir bueno por ejemplo la velocidad quiero que sea mayor vamos a verlo y como veis ya tengo el personaje que voy empezando a jugar con él y voy a empezando a saltar con él aunque javascript dentro de los lenguajes de programación es un lenguaje especialmente permisivo pero eso no quiere decir que yo no deba adaptar ciertas buenas costumbres entonces cuando usó una variable no tengo por qué poner la palabra bar pero cuando la declaró sí que debo poner la palabra var así que por aquí arriba lo que hago aquí no veis porque aquí estoy definiendo una propiedad ing punto de sencilla declaró img pero estuve declarando pulse equipos y debo el javascript funciona vale pero es buena costumbre sobre todo para cuando lleguemos a php y cuando lleguemos a temas más todo esto quede claro en las variables lo mismo con bar del y ing personaje no porque realmente es una propiedad de la variable img que declara ahora mismo realmente si es una propiedad de hecho porque es una instancia de un nuevo objeto ahora mismo podríamos decir que tendríamos algo así como un flap y berg o tendríamos algo así como esa pantalla del río métricas donde tengo que ir saltando para no pegarle con el suelo digamos cuando esté en el yo métricas así que él sobre todo ahora lo más importante es que existe es la pantalla principal y digamos yo paso a la segunda pantalla con el clic del botón derecho mirad digo clic mira sabes que no vas espaciadora entonces barra espaciadora y así detectamos el uso de alguna tecla barra espaciadora para el uso de alguna tecla momentín dejadme pensar donde tengo algún trozo de ese código para copiar y pegar a eso lo tengo en mi servidor a ver el segundo a continuación por tanto voy a usar este código para capturar una tecla y voy a decir lo siguiente cuando pulse la barra espaciadora salto al juego real copio de este código y este código dice code es igual a el code o punto which depende de lo que coja el navegador y dirá si code es igual a 13 code es igual a 13 a que corresponde realmente es decir a qué tecla corresponde la respuesta es no lo sé vale por tanto yo me voy a sacar un navegador de google y digo javascript code table es javascript y copei vol me saca una tabla donde para cada una de las teclas te dice qué código tiene entonces en este caso el dónde estás el space bar si hubiese por el space bar me lo decís bakespace space missing fantástico x 32 así que 32 pues vamos a verlo pues si es correcto digo alert o mira console blog expulsado la barra espaciadora si todo va bien por tanto bien y snow -define entonces kiko with un segundo por qué y press esto mucho mejor entonces digo cuando sobre canvas ciprés y kiko que el número había dicho el 32 dijo con solo el punto no pulsado espaciador dejadme comprobarlo recargo vale la ceca 32 parece que no es así que vamos a buscarlo venga veamos lo voy a por ejemplo la tecla a 65 y aquí en lugar de canvas pongo documento guardo recargo y la no la está cogiendo un segundo no que todavía voy a pasar esto al método principal vaya estoy en la consola y no me está cogiendo la 65 voy a ver qué pasa cogeré este código y lo que he hecho en este caso es que para que no me declaré el equipo es en cada momento al igual que el canvas punto click lo he sacado fuera el ciprés también lo he sacado fuera al documento punto ready es decir lo he quitado de juego ahora me dice alert ha expulsado entero pero yo voy a hacer una cosa que no es exactamente lo que va a funcionar que me va a llevar voy a la detención de a la atención del juego que es que voy a decir cuando pulse enter quiero entrar en juego 2 y juego 2 es una función llamada juego 2 digamos que juego sería la pantalla de inicio alert estás en juego 2 y juego 2 sería el juego real es decir el juego es la pantalla de inicio y juego 2 es donde vamos a empezar a jugar a algo parecido al flap y ver pero problema mirad recargo y voy recargo atención pincho salto pero pulso enter me dice estás en el juego 2 pero aunque entrado en el juego 2 el juego 1 se sigue ejecutando así que he conseguido ejecutar el juego 2 pero me tengo que asegurar que soy capaz de parar el juego 1 cuando estamos creando un temporizador porque el set time out no es más que un temporizador ahora mismo estamos un poco descontrolados porque le estamos diciendo al temporizador que se ejecute cada vez pero cuando por ejemplo saltamos al juego 2 no tenemos manera de decirle al sistema que pare el juego 1 que para el juego original es la manera de hacer esto es la siguiente mira digo bar a tiempo es igual a séptimo juego en 33 esto que hace pues simplemente hace lo mismo atención recargo y fijaos como el juego funciona igual lo único es que he declarado el set time out en una variable llamada tempo de hecho como la voy a declarar de declarar permitirme que la des declaró y ahora simplemente en la función juego 2 cuando él se ejecuta la función juego 2 es cuando se supone que tiene que parar el sistema tiene que parar el juego uno lo que hace es clear time out y tiempo no es una cadena es una variable tiempo si todo ha ido bien guardo recargo y cuando el pulso enter y me dice estás en juego 2 y fijaos como el juego 1 ha parado así que para un time out en principio es imposible de la manera que lo estábamos haciendo hasta ahora a menos que hagamos esto que acabo hacer en la pantalla cuidado mirad qué divertido estoy haciendo esto vale con lo cual he parado el time out pero se sigue ejecutando lo de que cuando el ratón cambie de lugar bien nuestro ocupe esto es normal esta está previsto se aparece un error del sistema como cuando window se cuelga pero está previsto otra cosa que podemos hacer mirad atención es esto tempo is not the fine vale y ahora digo 91 bentín bar tiempo un segundo lo que he hecho es declarar mira lo que he hecho es declarar primero una variable tiempo vacía declaro una variable tiempo simplemente para que exista y abajo otra cosa que se puede hacer es clear time out tiempo y marcó tempo que estoy diciendo pues en cada bucle lo que le digo es para y vuelve empezar para y vuelve a empezar cuando empieza el juego 2 le digo para y ya está y no vuelvas a empezar así que ahí lo tenéis nos fijamos que tengo un juego en el cual puedo hacer clic y puedo ir saltando y en el momento en el que pulse enter pues estás en juego 2 y aquí es donde estaremos continuando y aquí es donde lo que haremos es simplemente empezar el juego en la siguiente sesión ya que ahora entramos en la parte de práctica lo que vamos a hacer por tanto ahora es empezar trabajando con la parte de creación del escenario recordamos que estamos en la parte ahora mirar dónde vamos a empezar a trabajar con el propio juego ya hemos pasado digamos la parte de donde puedo hago clic y entró al juego y todo lo que queráis y ahora cuando pulsó enter es cuando estás en juego 2 y entro dentro de la función de los recordamos que esto se nos queda frito es correcto ahora veremos qué hacemos con ello venga vamos a empezar un poquito con ese juego 2 simplemente para evitar que aparezca algo en pantalla para evitar que se vaya quedando el código el cursor en pantalla entonces para esto veréis yo lo que voy a hacer para evitar que se quede el cursor en pantalla o lo que es lo mismo porque se está quedando el cursor en pantalla pues se está quedando porque yo tengo por aquí vamos a verlo una función que dice mouse move entonces cuando el canvas es mouse move lo que voy a hacer es women entonces qué está pasando aquí veréis hay funciones de ejecución única y hay funciones de ejecución continua entonces como os podéis imaginar el mouse move es una función de ejecución continua es decir siempre que se mueva el ratón no necesitas estar en un bucle para que se detecte y se haga algo cuando el ratón se mueva esta es la razón por la que cuando yo recargo y le doy a enter aunque el juego técnicamente el bucle se ha parado el temporizador se ha limpiado pero podéis comprobar como aún así el ratón sigue moviéndose y esto es porque sigue en funcionamiento la función mouse move lo que voy a hacer por tanto no es row image sino que voy a crear un par de variables nuevas y yo lo que voy a hacer en este caso yo lo que quiero es crear un par de variables para algo que sé que va a variar que es la posición del ratón entonces cuando yo sé que algo se va a quedar estático lo que hago es no creo variables pero cuando yo sé que algo se va a ir modificando con el tiempo lo que hago es crear variables entonces declaró variables para la posición del ratón y ahora el nombre la palabra bar el nombre de la variable ya sabéis que es el que vosotros queráis y voy a poner por ejemplo ratón x es igual a cero por ejemplo es decir creo la variable ya que estamos le doy un valor y ahora digo para ratón y es igual a cero y con eso lo que hago es crear un par de variables y las inicial hizo entonces ahora lo que hago mirad es en este mouse lo que hago es sacar sacó el contexto draw image del mouse move y digo ratón x es igual a event cliente x y ratón y es igual a even cliente y qué está pasando en ese caso pues que yo ahora en el draw y me pongo ratón x y pongo ratón y qué quiere decir voy a poner un comentario ahora el cursor que yo ahora realmente cuando muevo el ratón cuando hago el mouse move lo que estoy haciendo no es dibujar el cursor es poner nuevos valores a la variable de ratón y qui sheraton y fuera de la función lo que he hecho nuevo lo que modificado es todo este bloque y fuera de la función lo que estoy haciendo es dibujar el cursor y esto para que lo he hecho bueno pues esto lo he hecho para que ahora cuando ejecuto de nuevo el juego cuando pare el juego el mouse move va a ir actualizando las variables es inevitable eso es lo que quiero pero el mouse move no va a dibujar el ratón es decir el ratón ha quedado fuera el dibujo del ratón ha quedado fuera del mouse move y por tanto lo que va a pasar es que yo puedo parar el juego estás en juego 2 pero el cursor ya no se redibuja internamente por dentro yo sigo teniendo una función mouse move y esa función lo que sigue haciendo es actualizando las variables de ratón x y ratón y las variables siguen en juego las variables siguen actualizando se pero lo que no estoy haciendo es cambiar el ratón x y el ratón y en cuanto al dibujo por tanto como veis ya no se está dibujando vale hay el ratón y ahora lo que puedo hacer en función juego 2 es quitar ese molesto alert y poner algo como contexto punto clear rect que va desde 0 hasta 800 400 recordamos que esto se hace para borrar el escenario y comprueba por tanto estoy ahora en juego 2 como recargo y en el momento en el que pulsó la tecla enter vamos a ver con texto clear rect el juego todos sí que es contexto aclaró sí evidentemente porque no está pasando nada pues simplemente porque recordamos que con texto quiere borrar el canvas borra todo lo que haya dibujado en canvas pero el fondo no está dibujado en canvas sino que os recuerdo que el fondo está puesto en css ahora a continuación lo que quiero es diseñar un nivel entonces en este juego debemos tener en cuenta que finalmente todo va a estar orientado a un juego de 800 x 400 y todo va a estar orientado a la creación de bloques a los que presuponemos que todos van a tener el mismo tamaño por tanto vamos a hacer lo siguiente en primer lugar voy a arrancar el ejemplo voy a hacer un escenario los pasos la plantilla y a partir de ahí lo podéis modificar entonces la idea es que quiero diseñar un escenario de la manera más sencilla posible y para ello realizaré la siguiente acción en primer lugar me voy a archivo nuevo podríamos pensar que hago un escenario de 800 x 400 no lo que quiero es hacer un escenario cuanto menor posible lo voy a estirar entonces yo ahora vengo y digo vamos a verlo si tengo un escenario de 800 x 400 de cuánto será cada bloque no lo sé así que vamos a hacer una estimación fondo mío este sería el escenario así que por ejemplo voy a hacer un bloque de aproximadamente 50 x 50 cabe entero dentro de 400 es correcto pero me parece un bloque un poco grande por tanto voy a poner a probar 40 x 40 me parece un tamaño de bloque bastante mejor por tanto sé que en este escenario voy a tener bloques de 40 píxeles cada uno y eso quiere decir que 400 entre 40 me cambia 10 por tanto sé que voy a crear un archivo nuevo de 40 píxeles de altura en cuanto a la anchura voy a empezar con 800 lo que equivaldría a 8000 píxeles es decir lo que valdría una longitud de 10 pantallas de momento vamos a pasar por ahí siempre lo podemos cambiar así que pulso aceptar y esto es mi escenario ahora tengo que establecer una convención es algo que decidimos algo que definimos algo que acordamos y que a partir de ese momento va a ser así entonces yo digo cuál es el color del fondo y cuál es el color de un ladrillo el color puede ser el que queráis me da igual por eso es una convención entonces digo por ejemplo el color del fondo va a ser azul va a ser azul ayestas va a ser 0 255 y voy a pintar todo el fondo de azul y ahora cojo el lápiz le doy un tamaño de un píxel ya lo veis un píxel me parece un poco pequeño 40 vale claro por favor es que he hecho una altura de 40 cuando tenía que haber hecho una altura de 10 píxeles de bloques de anchura 800 ahora me parece un poco grande así que voy a hacer 10 200 acepto ahora este es el nivel lo pintó de color azul me voy al lápiz y con el lápiz voy a pintar con color rojo es decir azul será el fondo rojo serán los bloques porque lo hemos decidido así porque lo hemos definido así entonces si me vengo aquí y dibujo una serie de bloques por ejemplo digo que esto es un bloque esto es bloque lo que estoy haciendo es hacer ese nivel de geometrías donde tienes que ir volando sin tocar a los elementos de derribe debajo sobre lo que os digo al entonces yo simplemente como veis estoy dibujando un nivel de la manera más sencilla y más indolora posible quiero decir con esto que esta es la manera más rápida que podéis encontrar que simplemente dibujando píxeles en un programa de dibujo para hacer un escenario luego la gracia es que tenemos que hacer que el programa nos dibuje una cajita un bloque de escenario en cada uno de los píxeles así que por cierto no voy a por los pinchos cada vez pero pinchó y los pinchos de internet entonces hacer una cosa así enferma cosas así y no sé supongamos que de momento tengo eso me pasó esto y luego podéis dibujar todo lo que queráis por aquí así que esto lo voy a guardar por una parte del escritorio en jose vicente en fundamentos en geometría en imágenes como escenario juego y ahora lo voy a exportar como escenario juego png por ejemplo así que guardo exportó y os lo paso lo ideal ahora cuando os voy a enviar el correo es que cojamos la imagen pequeña y usando javascript la escalamos a grande el problema de esto es que tenemos que usar más javascript el que quiero usar hoy entonces lo que voy a hacer ahora es cerrar un momento esto voy a cerrar un momento esto voy a abrir el fondo no el escenario juego punto png y lo voy a escalar tramposamente hasta vamos a ver hasta que estos sean pero serán ocho mil que son diez pantallas escalón no cuidado weissel suavizado no quiero ese suavizado así que imagen es crear la imagen le digo que esto no pasó a 400 y la interpolación quiero ninguna y él hace de interpolación ninguna me mantiene me respeta el pixelado así que ahora lo exportó y digo escenario juego grande y con esto por tanto os envía un correo para que tengáis todo ese material a continuación una vez que habéis pegado las imágenes dentro de la carpeta de imágenes del proyecto vamos al código y dentro del código aquí tenemos el código voy a estar trabajando sobre la función juego 2 en este caso es completamente diferente al que nos ocupaba ayer porque por una razón muy sencilla y es que ayer pusimos el fondo de fs s porque os dije si el fondo no se va a mover para qué redibujar lo cada milisegundo pero y es diferente hoy el fondo de la mujer y el personaje se va a mover así que lo que quiero hacer por tanto mirada es lo siguiente para empezar la imagen del juego digo bar img espera un comentario delfino la imagen del fondo del juego en movimiento así que digo bar y el eje fondo es igual a new image ahora digo destino donde está la imagen en cuestión y por tanto lo que hago es img fondo junto src es igual a imágenes barra importante barra escenario juego grande png barra escenario juego grande punto png ahora lo que hago es pues poco más porque ya la tengo y ahora simplemente lo que voy a hacer es en el escenario mirad tengo img fondo y tengo img el fondo punto src así que en el escenario lo que hago es dibujar por tanto borro el escenario dibujo la imagen de fondo del escenario y para dibujar la imagen de fondo del escenario digo contexto draw image es igual a img fondo en 0 guardo recargo a ver qué pasa entonces compruebo como el juego se ejecuta y yo vengo aquí y le doy a play y pum tengo la primera imagen del fondo ahora yo lo que quiero de momento es que el escenario empiece a transición hacia la izquierda por tanto eso quiere decir que tengo que hacer una función mirad donde digo el juego 2 también consiste en un bucle que se va realimentando por tanto un amigo bar o digo temporizador 2 es igual a set time out el cuidado temporizador 2 el 2 tiene que ir dentro del título es igual a 7 out donde voy a ejecutar juego cada por ejemplo 30 milisegundos recordad que lo estoy metiendo en una variable si hace falta por aquí arriba digo bar declaro la variable del temporizador 2 y digo bar temporizador 2 simplemente para que se cree simplemente para que el programa sepa que existe con eso qué es lo que estoy haciendo pues que el juego 2 también se mete en un bucle que se va ejecutando constantemente y ahora por tanto mirad ahora por tanto lo que voy a hacer va a ser mover progresivamente ese fondo hacia la izquierda como muevo ese fondo hacia la izquierda una vez más si me voy a mover algo y ese algo se que por ejemplo su posición x es una variable que va a ir variando ya no puedo decirle que el juego se inserta mira en cero porque ese cero va a ir variando entonces lo que necesito es crear una variable para la posición x del fondo ahora yo te digo la posición x del fondo va a ir variando si la posición y del fondo en vertical va a ir variando no por tanto no tengo que ver variables realmente para algo que nos van a hacer falta así que únicamente me voy a la parte de arriba y digo declaró una variable para la posición x del fondo del juego y ahora digo bar fondo x es igual de entrada a 0 creo la variable y además la inicial hizo y con esto que es lo que consigo bueno pues con esto lo que consigo es que ahora por aquí en img fondo digo fondo x la el fondo no se inserta en 0 estático sino que se inserta en el cero dinámico de la variable y en el cero estático de la verticalidad y ahora de paso digo cada vez que pases por aquí quitarle un valor al fondo quítale un valor a del fondo teniendo en cuenta que el fondo no se mueve hacia la izquierda y el fondo de la izquierda eso equivale a restar por tanto lo que voy a hacer en este caso es que fondo x menos igual a 1 es decir fondo x vale lo que valiera a fondo x menos 1 así que guardo y recargo vamos a ver qué pasa tengo la pantalla inicial pulsó el botón de enter y si os fijáis ya lo que tengo en la pantalla es que el escenario se va moviendo y se mueve el escenario rápido o se mueve lento pues una vez más puedo crear una variable llamada perdona a qué velocidad de movimiento del fondo y digo bar velocidad fondo es igual por ejemplo a 43 y ahora vengo y digo fondo menos igual velocidad fondo y con eso lo que estoy haciendo mirad es definir cuál es exactamente la velocidad del fondo es decir eso pasa a formar parte de una variable porque pues porque más adelante puede variar porque más adelante puedo decir la velocidad va a depender de en qué nivel estés o quizás incluso en el mismo juego quizá sobre goya lo decidiréis pero en el mismo juego la velocidad va a ser más en menor al principio y mayor al final del juego una vez que hemos trabajado el fondo una vez que hemos trabajado la alineación del fondo probablemente llega un momento en el que quiero ya meter al personaje así que para meter al personaje voy a hacer otra vez la copia de este código mira vamos a verlo dibujó el cursor dibujo el personaje lo que hago es que me lo copio y cuidado porque aumentó la x del personaje eso no lo quiero compruebo si el personaje está en estado de salto en los ciclos no quiero ver a dibujo el personaje y su código lo quiero y me lo llevo vamos a ver comprueba si el personaje está en estado de salto y en el caso de que el jugador haya vuelto al suelo eso me lo copió también voy a eliminar espacios en blanco y dejadme comprobar que funcionará correctamente fijaos que tengo ya ahí al personaje saltando en la pantalla eso es lo que tengo y ahora lo que tendremos que hacer es definir la colisión del personaje con el fondo antes de continuar y antes de programar la colisión que va a ser lo más difícil de la sesión de hoy lo que me gustaría ver un poco es organizar el código porque ahora mismo debido a los comentarios nos está ocupando el doble de lo que podría ocupar nosotros ahora mismo tenemos una pantalla algo que en desarrollo de código profesional se considera un error que es la sobre documentación tenemos un sobre comentario hay una regla en refactorización que dice que si necesitas comentar cada línea que haces es que algo no estás haciendo bien quiero decir que el código debería ser claro por si mismo pero insisto no vamos a modificarlo ahora porque lo estamos haciendo así específicamente porque estamos aprendiendo y porque queremos documentar mucho el código porque incluso queremos entender nosotros qué es lo que estamos haciendo en cada línea pues en algún momento nos queda claro así que voy a hacer lo siguiente mirad vamos a ir a editar preferencias y dentro de editar preferencias voy a decir desactivó el ajuste de texto cual desactivar el ajuste de texto lo que hago el texto permite que salga por la derecha y ahora para ahorrar espacio lo que voy a hacer es poner los comentarios al final de cada una de las líneas mirad como el elemento que tenga mi canvas esto va aquí le asignó una un contexto bidimensional eso va aquí creó una nueva imagen como objeto eso va aquí defino el origen de la imagen esto va aquí y lo que quiero por tanto es que pongáis los comentarios en línea con cada una de las líneas con cada una de las instrucciones que van a definir qué vamos a hacer con esto pues sencillamente lo que vamos a hacer con esto es simplemente comprobar es simplemente documentar que todo funciona correctamente pero también lo que quiero al final no gastar el doble de líneas de las necesarias así que lo que estoy haciendo y vosotros conmigo es que vais a ir cortando las variables ahora además lo que hago es a ahorrar espacio lo que voy a hacer es eliminar espacios muertos y con esto como es desactivado el ajuste de texto ahora veréis en la pantalla como he desactivado el ajuste de texto fijaos que si hace falta los comentarios se van a salir de la página esto quiere decir que lo importante que es el código se va a quedar a la izquierda y lo menos importante porque tampoco es normal que esté consultando los comentarios a cada momento pues se va a quedar a la derecha conozco un espacio prudencial y a partir de ahí continuamos trabajando lo mismo puedo hacer sobre el resto de las funciones mirad por ejemplo tengo aquí un comentario que me está afectando de cuatro líneas claros donde lo pongo realmente pues este igual sí que lo puedo dejar arriba porque se lo pongo a la derecha molesta un poco lo mismo que este de aquí así que vosotros podéis decidir cuando os conviene poner un comentario de derecha mirar por ejemplo ese comentario de limpio de la pantalla me conviene poner la derecha pero ese comentario del rectángulo se mueve con el ratón pues igual no tanto así que en definitiva aplicar la regla para aquellos comentarios que realmente comenten una sola línea este lo voy a dejar esto lo voy a dejar pero éste no por tanto no os recomiendo ahora que estáis aprendiendo que quites comentarios porque los comentarios os sirven a vosotros para entender lo que estáis haciendo y a mí si tengo que corregir el ejercicio me sirven para entender que habéis hecho y tardar el menor tiempo posible hasta llegar a la información y luego por supuesto lo que hacemos es ahorrar espacio y aún así el juego va ocupando pero lo que quiero es tener cierta escalabilidad entendiendo escalabilidad el que el juego pueda ir haciéndose grande pero que el juego hacerse grande no quiere decir que se me vaya haciendo una pelota es decir no quiere decir que llegue un momento que digamos es que me es incómodo que el juego sea así de grande porque cuanto más grande es el juego más incómodo es trabajar eso es no escalar bien lo que quiero con esto que estoy haciendo y con otras técnicas que os enseñaré más adelante es permitir que el juego pueda ir creciendo en tamaño y no se me vuelva incómodo trabajar con el juego así que pongo comentarios en línea en aquellas ocasiones en aquellos lugares donde sea necesario y ahora vamos a abordar el tema de la colisión lo que quiero hacer ahora es poder hacer poder detectar cuando el personaje está colisionando con un elemento del fondo y esto va a ser difícil en el sentido de que canvas tiene otras muchas ventajas pero la detección de un píxel no es una de ellas les voy a explicar cómo funciona en otros muchos entornos de trabajo gráfico cuando queremos detectar el color de un píxel simplemente decimos cuál es la x del píxel cuál es la y del píxel y ya lo tienes y no detecta pero en canvas no en canvas si yo tengo por aquí mira un escenario lo que va haciendo es que la primera fila es el primer elemento de la matriz y la matriz sigue linealmente como renglones de un documento con lo cual cuando yo quiero averiguar un píxel lo que tengo que hacer es averiguar cuántos renglones cuántos caracteres ha habido en el documento es un poco rollo pero ahora lo vais a ver entonces para ello por tanto lo que voy a hacer es que dentro de juego 2 digo de texto el color del píxel primero del escenario voy a usar en este caso una función llamada get color at y esa función mirad la voy a sacar del siguiente documento que vais a decir o qué documento más guay lo quiero tener entonces yo pongo en internet html5 canvas sheets it o la hoja de trampas la hoja de trucos entonces hay chipsets para prácticamente cualquier lenguaje entonces esta hoja de trampas esta hoja de trucos que de hecho me la voy a guardar dentro de imágenes del proyecto es luego cómo lo voy a pasar por el por la intranet puesto tendréis disponible vamos a ver cómo tengo por aquí get emails data entonces get emails data en contraposición a put emails data que sirve para que me ayuda sirve para leer y put y mencionó tan sirve para escribir gettyimages data me sirve para especificar para saber qué color hay en cada pixel así que gettyimages data en este caso lo voy a trabajar de la siguiente manera vamos a ver déjame que lo localicé en algún programa donde haya hecho esto anteriormente lo que quiero ahora es ser capaz de detectar los píxeles de color de la imagen y para eso voy a hacer lo siguiente en primer lugar voy a hacer un getty image data esto lo voy a hacer sacando este código del servidor y para ello aquí estás mira digo bar evalúa es igual a contexto y punto getty images trata tengo que especificar exactamente de qué quiero atrapar los datos pues quiero atrapar los datos de 0 a 800 400 es decir todo el escenario con eso lo que estoy diciendo es la zona del escenario con la que quiero trabajar también lo que puedo hacer por ejemplo es especificar que la zona del escenario con la que quiero trabajar es únicamente el pixel dónde está el jugador así que el pixel dónde está el jugador mira es lo siguiente el jugador dónde está pues el jugador está dónde estás en pos equis coma post 2 x 1 como coma post y recordamos que las variables de posición x y posición y son las variables que me definían dónde estaba ese personaje de hecho la posición y es la que hemos estado usando para el ejercicio del salto es decir var evalúa lo que le estoy diciendo es oye coge ms pixel getty image data cógeme los datos de ese pixel así que ahora lo que quiero es evaluar estos datos y ahora digo x bar y es igual a 0 y es menor que evalúa punto link el valor de la matriz nos explicó eso más igual a 4 y ahora os lo cuento también y ahora digo con soul evalúa d y vamos a ver que nos da eso voy a comentar que ese trozo de código me sirve para extraer los colores del pixel evaluado así que guardo y recargo saco la consola y al sacar la consola vamos a ver si todo va bien recargo dentro del juego vale fall to execute sí y el canvas ha sido tentado y así ha sido interceptado por cross origin data no tendríamos que enfrentarnos a este error así que vamos a solucionarlo ahora cuando el sistema diga cross origin quiere decir que el canvas de html5 está pensado para ejecutarse en un servidor yo estoy ejecutando el canvas yo estoy ejecutando ahora mismo el juego en un servidor no yo no esté ejecutando directamente pero eso qué quiere decir que tenemos ahora que empezar a colgar el juego en un servidor técnicamente sí pero qué rollo verdad entonces lo que quiero hacer es convertir a mi ordenador en un servidor web de la manera más fácil en que lo pueda convertir la manera más sencilla de convertir nuestro ordenador en un servidor es usar un software que se llama amp así que voy a ir a apache friends punto o hereje punto en este caso es para la versión en castellano me voy a descargar el samp para el sistema operativo con el que estoy trabajando ahora mismo que es sant para windows me lo empiezo a descargar son 107 megas el tiempo de descarga evidentemente pues irá en función de la velocidad de la red en la que estéis ahora mismo y una vez que haya finalizado la descarga del software lo que voy a hacer es instalarlo mira la atención cómo lo voy a instalar pues vamos a ver pues voy a hacer clic voy a ejecutar y una vez que ejecutó simplemente voy a ir pantalla a pantalla bien cuidado me dice tienes el control de acceso de usuario el wafd activado en tu sistema enlace existe desde windows vista entonces te dice que puedes continuar tal vez el antivirus te pueda parar el sham como si fuera un virus pero no lo es por tanto le doy a ok lavilla next acepto todo me instalo todo acepto la carpeta de instalación por defecto que es el samp no quiero saber de más de vida me y ya está y ahora simplemente lo que tengo que hacer es esperar a que el samp quede correctamente e instalado dentro de mi equipo una vez que el samp que dé correctamente instado dentro de mi equipo os enseñaré la carpeta en la que tenemos que trabajar a partir de ahora nuestros juegos pero momentín porque para ello primero tiene que instalarse el programa una vez que esto está instalado me dice quieres arrancar el panel de control al acabar le digo que sí y por tanto mirad aparece este panel de control dónde voy a decir que quiero arrancar apache y quiero arrancar mysql bien en este caso apache no me ha arrancado simplemente atención inmediatos la pantalla es muy importante porque es skype es el principal responsable de que no arranque apache así que si en algún momento tenéis skype arrancado los arrays y veréis por tanto que vamos a verlo y veréis como ahí se arranca correctamente lo que quiero por tanto una vez que tengamos el panel de control arrancado es confirmar que tanto apache como mysql están ejecutándose correctamente y una vez que apache mysql estén cargados correctamente mirad voy a hacer lo siguiente voy a seleccionar el juego donde lo estoy desarrollando fundamentos geometría ahí lo tenemos lo voy a copiar lo copio y lo pegó en jump hd docs y ahí lo pego voy a llamarlo geometry curso con lo cual lo que he hecho es pegarlo en la carpeta de publicación del servidor en ce sam hd docs pego la carpeta del ejercicio y ahora la llamo de la siguiente manera localhost geometría y curso al decir localhost james de curso lo que le estoy diciendo al sistema es que quiero acceder vamos a verla y quiero acceder a esa carpeta ahí pero usando el servidor usando el samp como si estuviera accediendo a una dirección de internet solo lo que no estoy haciendo una dirección de internet sino que estoy accediendo a mi propio servidor y veréis cómo hay de momento por lo menos ya no nos da el error que nos daba antes ahora mucho cuidado con el heavy porque de cara a abrir el head y miradme yo no quiero ya abrir el archivo de antes yo lo que quiero es abrir el archivo que está en biometría curso que está en htv que está en sham que está en el disco ce para asegurarme que estoy editando realmente la versión correcta del archivo por tanto guardo y recargo y lo que voy a hacer ahora es asegurarme vamos a ver con soul aquí debería estar haciendo ya mostrarme el consuelo de momento no me lo está mostrando así que voy a hacer una prueba con soul punto lo hola así que guardo recargo aquí me está diciendo hola bien por algún motivo no se me está ejecutando él evalúa contexto get inmediata así que ahora veremos ir arrancando y ahora voy a ver qué es lo que pasa para que no se me estén extrayendo los colores de la posición que yo he especificado el paso que me saltado en este caso es que en evalúa mira tengo que hacer esto entonces en evalúa digo bar data es igual a evalúa punto data eso es lo que lo convierte en una matriz entre sí ahora digo lo siguiente y es que digo bar data esto es la matriz así que es igual a 0 y menor que data link ahora sí aquí vuelvo a poner los equipos y coma pues x1 como a post y más 1 igual luego quito los más unos y vamos a verlo ahora así que guardo y recargo vale me vuelve a decir a mí find fijaos que si mal en tiza una barbaridad el consumo el punto love pero vale y ahora digo data apuntó y pero por lo menos gran atención tanto que el ordenador se me queda un poco colgado incluso recargo un segundo atención mira inspeccionar elemento diámetro y curso vamos a verlo ahora bien vale y m3 curso le doy a enter y ahí empiezo a tener por tanto valores así que ya podemos tener esto en pantalla mirad lo que quiero es que copies el siguiente código donde en el siguiente código el riego detecto el color del píxel a continuación el color lo pongo en una matriz ahora extraigo los colores del pixel evaluado y ahora os digo lo siguiente mirad el rojo es data de iu el verde es data de i + 1 el azul es data de iu + 2 eso es lo difícil de un color con el canvas entonces yo ahora lo que tengo que hacer mira ahora viene un poco ya hemos pasado difícil que es atrapar el color del pixel ahora simplemente me tengo que preguntar entonces digo atención mira si data day es mayor que 127 es que si el rojo es mayor de 127 es que está colisionando os acordáis que antes hemos dicho atención todos a la pantalla a ver aquí localhost y m3 curso recordáis que antes hemos dicho que azules no colisión rojo es colisión cierto por tanto lo que está ocurriendo aquí es que si data si el rojo es mayor que 127 entonces estás colisionando else nada así que alerta has perdido el juego y ahora por tanto en el caso el nada vamos a ver si funciona este juego va a ser muy difícil para las perdido el juego bien claro cuidado evita no espera que sea se ha colapsado en console el lugar de alerta console punto no has perdido el juego y una cosa que voy a hacer mientras la pantalla es decir post y es igual a 400 que es lo que quiero con ese post y sirva de 400 pues quiero decirle al programa el personaje empieza a mitad de pantalla para darle un poco la oportunidad así que recargo otra vez a ver qué pasa le doy a enter o has perdido el juego es perdido el juego el sistema me dice has perdido el juego he entrado en un poco de bucle tengo que ver qué pasa por equipos y por qué me está diciendo que he perdido el juego me parece un poco pronto para haber perdido el juego un segundo que recargue y ahora os pongo el código bien hay ahí algún tipo de problema aclaró muy bien dónde está el jugador no eso pasa siempre eso lo mismo está pasando siempre es que le dé donde le dé enter a acelerar si entro a acelerar el juego tan guay realmente ahora veremos pero en definitiva mira y ahí se acaba el juego en definitiva y lo que tengo que ver es porque no estoy mostrando el personaje lo que he hecho simplemente para que el juego funcione aprecien todos a la pantalla es que he hecho simplemente el contexto de weich dibujo el personaje lo he puesto al final del todo para asegurarse que sí o sí el personaje se dibuja al final terminar lo que pasa la pantalla esto no es el problema pero vemos lo que viene ahora lo que viene ahora es que cuando la play el personaje se dibuja ahora veremos si el personaje realmente salta o no salta pero independientemente de que salte no salte va muy lento porque va muy lento pues porque he introducido esta condición extra que es hacer un foro y además hacer un ife entonces el foro el leaf es un poco inevitable porque yo tengo que comprobar que no estoy colisionando con ese objeto el foro es lo que quizás me puedo evitar porque vamos a verlo lo que voy a hacer es quitar el foro aparte cuidado también estoy poniendo el contexto de rugby mike dentro del foro lo que también está ralentizando una barbaridad pero igual tampoco quiero eso así que pero tienes aquí lo que quiero hacer ahora mira simplemente es quitar el foro y decirle si data de 0 es mayor que 127 en ese caso ejecuto que es lo que tengo aquí y realmente pues me estoy evitando un if lo que estoy a perdonarte habitando un foro lo que estoy haciendo es evitarme cálculos inútiles no quiero realmente parchear toda la matriz porque sé que el dato cero es rojo porque sé que el primero que aparezca el rojo así que simplemente lo que hago es evaluar en este modo vamos a ver porque ahora lo que tengo que hacer es averiguar por qué el personaje no está respondiendo a la pantalla aparte luego voy a decir has perdido el juego aquí la atención has perdido el juego donde estás personaje y fijaos solo cuando parece vamos a ver lo que le da algo rojo y has perdido el juego lo ves mirad solo cuando colisiona veis como haya aumentado has perdido el juego tienes que mirar aquí abajo a ver atención esperar que vuelvo atendiendo la pantalla y dice has perdido el juego solo cuando colisiona con el rojo vamos a verlo un segundo y no colisiona ahí no colecciona y no colisiona y ahora que aparece una montañita atención allí mirada consola hay colisiona con el juego es decir ya empieza a tener una pequeña un pequeño feedback de que está detectando la colisión con esas piezas con esas fechas ahora mismo el personaje no está saltando y por tanto lo primero que vamos a probar porque no es colocar aquí está en la condición del salto detrás del dibujo del personaje entonces pulso enter donde está el personaje está bien ese es el problema vamos a verlo vamos a ver antes de llamar a juego 2 aquí antes de maná juego 2 que lo recete el que de todo vale entonces diría pues x es igual a un problema pues x es igual a 100 por ejemplo pues y es igual a por ejemplo 400 digamos ahí a 100% perfecto pues y hacen así que refrescó enter sigo sin tenerlo desde luego los eternos mala idea y yo intuyo que el estado de salto en este caso es el que en cierta manera me está fastidiando entero no reconoce parece al menos que no reconozca el estado de salto así que yo ahora lo que voy a hacer es que en el clic voy a hacer con soul punto log saltando guardo recargo bien saltando y ahora saltando en el clic me lo reconoce y ahora lo que quiero es evaluar la variable saltando es correcta así que lo que no se llega a ejecutar en el juego 2 es esta estructura de control de aquí una vez más voy a poner console punto warn para decir estoy aquí es decir lo que quiero en un momento dado es comprobar si se está ejecutando ese bloque estoy aquí lo veis dice estoy aquí pero sin embargo sigo teniendo el problema de que no me está ejecutando el salto démonos cuenta de una cosa mirad ha sido cuando he puesto a la comisión cuando ha dejado de funcionar que pasa se desactiva la colisión estoy aquí y ahora no es modesto es decir cuando deja de funcionar algo aquí estoy aquí lo que tengo que hacer es averiguar exactamente dónde se ha producido el fallo así que saltando es igual a 1 y es igual es menos igual a velocidad y en este caso estamos atrapados dentro de este bucle estoy aquí saltándose igual a cero como si griegas mayor que trescientos voy a desactivar este trozo a l por lo menos este trozo funciona entonces lo que está ocurriendo es que la posición y ahí está es igual a 400 la porción y es igual a 100 aclaró ya sé el error en función juego 2 no debo decirle al sistema qué posición y es igual a 100 porque lo que estoy haciendo estamos haciendo métricas lo que estoy haciendo es reiniciar la posición en todo momento no esto no lo quiero eso estaba bien al principio del juego pero no ahora sí vale pues ya hemos encontrado el error consiste en que estaba inicial izando los datos en todo momento estaba inicial izando la posición y en todo momento guardó recargo vamos a probarlo ahora bien adiós entonces vamos a decirle sí exacto escriba decir vale a 400 vale mira y ahora ya puedo empezar a jugar has perdido el juego hemos dicho antes que el juego era difícil ahora lo corregimos pero por lo menos ya tengo el juego en movimiento lo que voy a hacer por tanto es pasaros a cuidado tengo otro error mirad la atención mirad si yo salto demasiado y ha sido muy bien puedo perder no te digo que no pero si me paso hacia arriba el juego se para porque el juego se para leamos el mensaje nos dice no puedo leer algo que está fuera del escenario por tanto ahora tendremos que poner a la vuelta del descanso alguna estructura de control para establecer qué es lo que ocurre cuando el personaje sale fuera del escenario en la parte gráfica por tanto lo que vamos a hacer va a consistir en sustituir estos colores por bloques reales entonces claro ahí tenemos un poco que tener en cuenta que es lo que hacemos exactamente con el tip de fondo quiero decir vamos a trabajar con dos bloques que por ejemplo me voy a bajar de internet entonces por ejemplo voy a poner 'super mario' blogs le damos a imágenes mismamente y digo me bajo ese bloque y me bajo algún otro bloque digamos que este es un bloque de colisión así que digo bloque 1 y ahora quiero un bloque que yo pueda considerar que es un bloque de fondo digamos que el fondo no quiero que sea tan azulito quiero que tenga como un bloque más marcado supermario models a un bloque como ese de fondo algo parecido o un bloque así lo que hace sin ir más lejos pues lo que va a hacer lo siguiente voy a abrir ese bloque 1 ese bloqueo no lo voy a recortar lo voy a pegar y lo voy a reducir a escalar la imagen 20 por 20 porque hemos hecho que 20 por mentes en tamaño del bloque en este juego así que 20 x 20 es 20 por mente seguro que no ese caso sería 40 por 40 porque en 10 bloques entonces escalar la imagen 40 x 40 escalo ahora sí y esto me lo exportó como bloque 1 punto pm g ahora me voy a hacer una imagen también de 40 x 40 y por ejemplo para poner algo voy a poner digamos un color azul y ahora os lo pasó esto con el lápiz con un color azul y tomás oscuro voy a hacer una cosa así un segundo voy a hacer una imagen nueva con mucho cuidado ahora duplicó la capa colapsó la capa con vino bien ahora duplica una vez más bien ahora lo que voy a hacer al combinar ahora así es duplicar la capa y la voy a girar y al girar la voy a girar 90 grados y roto y con eso lo que consigo como podéis ver es una rejilla y esta rejilla aparte de guardarla como se haga la otra bloque uno pues aparte de guardarla como bloque dos punto x cf la voy a exportar como bloque 2 png y por tanto ahora pues os paso estos dos elementos los pasos estos dos elementos mirad me voy a hd docs me voy a geométrico curso ahí va a donde lo he guardado le ha guardado una carpeta antigua y esto no puede ser así que escritorio josé vicente fundamentos geometría imágenes bloques me los copio aquí ahora os los pongo en el correo y ahí los tenéis para a continuación descargarlos y ponerlos dentro del juego ahora lo que hago va a ser simplemente mirar en juego 2 me voy a crear una estructura de control que diga localizó el color del primer píxel de cada bloque y esto lo hago rastreo la imagen en x y en y por tanto rastreo la imagen en x en y existo siempre que os pase esto eso equivale a hacer un doble bucle for un four por aquí y un four por allá vamos a verlo entonces dentro de ese doble bucle for mira voy a hacer lo siguiente formar x es igual a cero empiezo en cero x es menor que 800 es decir el valor máximo de x que recordamos que es 800 de largo x + + ahora digo formar y es igual a 0 y es menor que 400 porque recordemos que la vertical de este juego son 400 y más perdona y más y x más no eso lo que haría es hacer uno a uno cada pixel no yo lo que quiero es x más igual 40 y más igual 40 quiero que no vayas de uno en uno sino quiero que vayas de cuarenta en cuarenta de bloques de cuarenta en cuarenta revisando el fondo así que por tanto lo que hago ahora es sencillamente lo mismo que he hecho antes qué es poner atención lo siguiente mirad para mi color como la lejía es igual a contexto get emails data en atención en x y quiero que me mire sólo ese pixel mi color es el pixel que vas a en cada uno de los elementos y ahora digo para datos color es igual a mi color punto data y por tanto una vez que tengo esto lo que voy a hacer sencillamente datos color es evaluar exactamente cuál es el índice en ese punto así que if datos color de 0 es mayor que 127 eso quiere decir rojo en ese caso voy a hacer una cosa en caso contrario haré otra es decir en caso positivo digo pinto ladrillos en caso negativo pinto el fondo lo que hago por tanto básicamente es en primer lugar rastreo la imagen en segundo lugar atrapó el color en ese punto de la imagen y digo datos color de ceros es decir el componente rojo es mayor que 127 eso que tiene que pintar ladrillos porque eso es que es rojo si es menor que 127 eso es que es azul y por tanto tienes que pintar el fondo así que ahora lo que tengo que hacer una vez que tenga este sistema puesto es introducir la parte de las imágenes antes de poder probarlo hay que cargar las imágenes por tanto cargar las imágenes es algo que ya sabéis se hace arriba del todo así que vivo bar imagen en ladrillo es igual a new image la imagen del ladrillo ahora digo imagen ladrillo punto src es igual a imágenes barra bloque 1 punto png le digo dónde está la imagen concreta de la misma manera digo mar bar imagen fondo es igual a new image y digo imagen fondo punto src es igual a imágenes barra bloque 2 punto png porque creo que al final las he llamado así me acuerdo de memoria pues me voy a imágenes bloque a uno y bloque 2 si pero efectivamente bloque 1 png y bloqueos png entonces ahora lo que voy a hacer es lo siguiente si todo ha ido bien si es imágenes bloques dos punto png si todo bien y con esto prácticamente acabamos el contenido teórico esperemos que vaya bien es que le digo vamos a ver no en fin digo contexto image y pinto atención y pinto imagen ladrillo es que no me acuerdo ni de las variables que nombró imagen ladrillo si en x y en y sí no si es falso pinto el fondo y la imagen del fondo creo que era imagen en fondo en x y en y comprobemos si funciona a ver si funciona y va a una velocidad respetable vale entonces dice vamos a ver de shorts wef y seréis ciro vale entonces tendría que decir x 1 y más 1 vamos a verlo bien y ahí lo tenemos se ha parado fijémonos que no es que se ha parado sino que va muy lento pero dentro de que era muy lento efectivamente va muy lento no te digo que no fijándonos lo lento que va muy lento porque tenemos que optimizar ese bucle for pero por lo menos ya tenemos el objetivo cumplido de que pues como podéis ver en pantalla e incluso mirad la calidad tan lento me sirve para poder jugar mejor pero tenemos el objetivo en pantalla de saber que de fondo tenemos un mapa en blanco perdón en azul y rojo pero que el sistema nos lo va a cambiar automáticamente a ladrillos este juego ahora mismo está para optimizar en cuanto al rendimiento de esto claro porque valentísimo pero una cosa que quiero que veáis atención es que una vez que lo optimicemos el sistema este de generación de mapas es brutalmente bueno porque yo ahora por ejemplo puedo ir al gym y puedo evitar esta imagen voy a editar recordáis el mapa del juego y le doy a escenario juego y ahora por ejemplo lo voy a pintar todo un momento de azul lo pinto todo de azul pero azul lo pintó todo de azul y ahora me voy al rojo y si yo quiero diseñar un nuevo escenario y ahora simplemente tengo que pintarlo de rojo y decir por ejemplo hacia arriba hacia abajo hacia arriba hacia abajo hacia arriba hacia abajo mira de lo que estoy haciendo y acordaos lo que estoy haciendo ahora por aquí en diagonal es decir no es el mismo escenario que antes como podéis ver claramente incluso no tengo incluso por qué rellenar esa parte de arriba si lo hago es por hacerlo manualmente pero lo que quiero deciros con esto es que yo ahora guardo yo ahora exportó como escenario el juego grande yo ahora abro escenario juego grande ya sabéis que lo paso es claro la imagen a 400 por lo que sea sobre escribo y simplemente lo que tengo que hacer con el juego es recargar la pantalla y el escenario se ha recargado no sé sí no voy a refrescar unas cuantas veces a ver el escenario grande comunidad cuidado que lo estoy guardando sobre escritorio así que si camps ht prox kilométrico imágenes escenario juego grande ahora sí refresco enter y ahora sí fijaos que simplemente por hacer esa acción ya he cambiado el escenario del juego quiero decir por tanto que para algún error quizás tal vez así porque me ha salido bien me salió por arriba quiero deciros por tanto que este juego desde el punto de vista déjame que recargue desde el punto de vista del programador pues está programado y funciona pero desde el punto de vista del diseñador y ahora le puedo dar este mapa a un diseñador este mapa de aquí a un diseñador y le digo mira píntame de color rojo lo que quieres que sea bloque de color azul lo que quiere es que sea azul y el diseñador no tiene por qué aprender a programar sino que yo cojo su diseño y yo como programador no tengo que luego su diseño y empezar a picarlo manualmente como se hacía antaño sino que yo digo tú pasame tu diseño que el juego automáticamente va a entender que es cada cosa otra tarea que haremos mañana en el pasado además de estar optimizando el juego introducir la posibilidad de poner varios colores por ejemplo azules fondo rojo es un bloque de colisión y por ejemplo verde es un bloque que si lo tocas tienes un punto extra lleva la moneda la mayor estrella llamarlo portal llámalo como quieras llamarlo pero en definitiva que no estamos obligados a positivo o negativo rojo azul sino que con esta convención recordad la palabra que usado al principio de que una convención es algo que acordamos pues podemos acordar lo que queramos y podemos hacer tantos colores como sean necesarios siempre que coincida el color que pongamos en el escenario con el color que luego cojamos en la programación quiero decir que si aqui pinto más adelante mañana mismo por ejemplo un bloque verde y digo esto es porque no vale si voy al 88 grande y dijo esto es un bloque verde y yo pinto aquí un bloque verde pues sea experto un bloque verde luego en la programación me tengo que acordar de decirle cuando detecte es un color verde quiere decir que la vida le sumás bien que la velocidad sea la bajas o se las nubes o lo que tú quieras hacer definitiva pero no decir es colisionado otro motivo por el cual veréis que de vez en cuando es normal que se cuelen el juego es porque estamos dentro de un temporizador incontrolado ves dentro de un temporizador incontrolado lo que voy a hacer es al principio del juego clear time out temporizador 2 entonces eso lo que hace es evitar que con el tiempo evitar que con los minutos el juego en el navegador se pueda llegar a colgar así que ponerle claire thibout y en principio ya lo tenemos bueno pues lo que vamos a hacer ahora por tanto es trabajar con gráficos vamos allá en cuanto al fondo voy a hacer una cosa que se llama en efecto para la chs entonces el efecto parallax me permite hacer lo siguiente me permite simular como que el fondo se mueve a una velocidad diferente que el frente y por tanto da un poco de sensación de tridimensionalidad o de profundidad al menos así que voy a poner background voy a poner algo así como vea este éste no estaba así que voy a ver imagen no voy a guardar imagen como me lo guardo en fe en htv docs samp en geometría y curso en imágenes como fondo para la chs y atención mirad lo voy a editar un poco vamos a ver editarlo con gimp miradme este tiene 5000 píxeles bueno no está mal voy a hacer un recorte por aquí más o menos voy a decirle que la imagen la quiero de tamaño de imagen 8000 porque recordamos que el escenario tenía ese tamaño la sobre escribo y ahora mira lo que voy a hacer dentro de la programación digo bar imagen fondo ya la tenía bar fondo para la chs es igual a new image fondo para la chs punto src es igual a imágenes barra no me acuerdo barra fondo para la expo jpg y ahora voy a crear una variable llamada posición fondo que es igual de momento a cero entonces ahora lo que hago es que momento enviar o si quieres paso el código prefiero más que lo miréis y que lo entendáis entonces lo que voy a hacer es que no quiero dibujar el bloque de fondo solo quiero dibujar los ladrillos porque aquí arriba voy a decir dibujo el fondo y eso quiere decir que contexto draw image dibujo el fondo para la chs en qué una posición de fondo pero qué hace eso bueno eso de momento lo que hace eso de momento lo que hace al recargar es que pulso play y no sé si veis como de momento lo que está haciendo es poner el fondo está poniendo el fondo lo que quiero es que el fondo aparezca por detrás y en este caso el fondo está poniéndose por delante déjame que lo ponga aquí arriba así claro cuidado no a ver claro que pongo ahí el fondo era pasar esto y es que me vuelve a poner el fondo porque no me está respetando los ladrillos vale ahora hablamos de eso pero sobre todo lo que quiero es que le digo posición fondo es igual a cuánto vamos a verlo cuánto es la velocidad si recordáis por aquí es velocidad de fondo partido 2 con esto lo que voy a conseguir es que ahora cuando empiece el juego el fondo vaya entonces lo veis cómo va decreciendo pero la idea lo que yo quiero vamos a verlo lo que yo quiero es que el fondo vaya a una velocidad y los ladrillos vayan a otra diferente el problema es que el problema es si dibujo el fondo antes de los ladrillos no cogen el color pero si lo dibujo después pasa exactamente lo mismo ahí lo tengo lo que quiero en definitiva lo que quiero en definitiva es que sobre ese fondo se pinten únicamente los ladrillos vale bueno puedo hacer lo siguiente vamos a ver es guardarme esto en una variable es que también puedo hacer esto pero no quiero contexto de mi mente lo pinto aquí le digo que es posición fondo y pero esto me va a machacar prácticamente todos los ladrillos estamos ahí esos ladrillos que así me los está machacando déjame pensar cómo hago esto voy a hacer lo siguiente voy a crear bar ladrillo es igual a new array lo acabó y ahora os envío esto por correo es la brillo es igual a la nueva red así que ladrillo x es igual ánimo al rey bar ladrillo y es igual a mi rey y bar contador es igual a cero así que vengo aquí y dijo contador es igual a cero este contexto de image lo voy a sacar esto lo voy a sacar si esto es cierto bar ladrillo también es una red entonces en vigo ladrillo interesante contador + + y digo ladrillo x d contador es igual a equis la brilló y de contador es igual a y por tanto ahora aquí abajo puedo decir por z igual a 0 z es menor que el ladrillo x punto lento z + + ahora digo dibuja me un ladrillo en la brillo x de ez y en ladrillo y de zeta y esto previamente haber dibujado el fondo vamos a ver si ahora esto funciona qué interesante vale es el mundo protector vamos a verlo fondo para la xx posición fondo y esto es posición fondo coma pero ahí ya tengo vamos a ver tengo el personaje mira tengo una serie de ladrillos que no están bien pero la veremos porque no están bien y tengo el fondo que estaba moviendo a cierta velocidad entonces el ladrillo x de no esté contador vale la brillo x contador es igual a equis y ladrillo x de zeta va aumentando voy a ver por qué si estamos en un nuevo día debemos acordarnos de que el servidor samp es decir la combinación de apache y mysql no tienen por qué arrancar automáticamente cada vez que arrancamos el equipo así que lo primero que hago es arrancar el sham control panel y hago clic en arrancar tanto apache como mysql probablemente dado que realmente y técnicamente lo que hemos hecho es primero instalada pacha y luego realizar un reinicio es muy probable que si ayer apache se nos daba error en color rojo hoy dará verde aún así realmente quede rojo que de verde no importa porque lo único que importa es que cuando saquemos el navegador por ejemplo en este caso crown le demos al localhost en este caso por ejemplo le vemos a localhost y nos saque el dashboard y no nos dé un error y le vemos al local jo si el nombre del ejercicio y comprobemos como efectivamente funciona correctamente en la pantalla por tanto en primer lugar arrancamos samp arrancamos como mínimo apache bueno me paso arrancamos mysql para ir comprobando el que arranca correctamente en nuestro equipo para futuras operaciones de la formación y a partir de ahí simplemente nos aseguramos que en esta dirección carga correctamente el ejercicio también ya sabéis arrancamos head it arrancamos el editor de texto ya partir de ahí empezamos a trabajar me estoy arrancando el editor ahora cuando quiera por tanto recuperó el último archivo me aseguró aquí arriba en la ruta si no se ve se recortado pero bueno me aseguro de que esté cargando el archivo que está en champ nfc ox en diámetro y curso y por tanto a partir de ahí empezamos a trabajar lo primero que hemos visto de este juego es que la pantalla principal va razonablemente fluida pero en cuanto entramos en lo que es el propio juego pues el juego va lento simplemente por esta cuestión de que estamos trabajando fotograma a fotograma esta estructura de control donde todo esto de aquí realmente es un bloque que lo que hace es detectar los colores de fondo así que mirad lo que voy a hacer es dejarme que por un momento bloquee imagen ladrillo aquí está bloque todo esto simplemente para demostraros cómo entró en el juego y sólo por no tener esa parte el juego va perfectamente fluido entonces lo que tenemos que hacer por tanto esta mañana en primer lugar es un trabajo de optimización lo que tenemos que hacer es preguntarnos exactamente qué es lo que pasa con ese juego y si acaso tal vez quizás es cierto que es necesario esta pregunta se esté realizando 30 veces por segundo y la respuesta es que no es ya acaso antes una respuesta de si podemos eliminar el doble bucle for que desde luego esa respuesta siempre esa pregunta siempre hay que hacérsela un doble bucle for en principio siempre hay que intentar evitarlo pero en este caso necesitamos hacer un parcheo de equis y de y estamos comprobar las filas y columnas de algo con lo cual un doble núcleo for probablemente será inevitable lo que desde luego es evitable es ese doble bucle for treinta veces por segundo porque la cuestión está en este juego en que el personaje realmente o el escenario realmente no cambia a cada fotograma el mismo escenario que tengo al principio es el que voy a tener al final para que realizar tantas veces estas preguntas si realmente las respuestas en que va a ser la misma así que el objetivo por tanto mira en lugar de saltar a juego 2 lo que voy a hacer es crear una función intermedia me meto en el medio y lo llamo juego 2 preparatorio va a trabajar va a preguntar una sola vez acerca de las condiciones necesarias para el juego y lo que haremos por tanto es en ese juego dos preguntarnos una sola vez cuáles son los bloques que debo calcular y realmente llevar esa información ya pre calculada para cuando empiece el propio juego lo que tengo que hacer también os digo por tanto es preparar un escenario secundario en el que voy a cargar ese segundo juego así que me voy a ir a la parte de html y dentro de la parte de html que estaba arriba voy a crear un segundo canvas ya tenía un canvas con y de llamado mi canvas pues ahora voy a crear un y de unir el secundario llamado chivato que va a tener en este caso creo que eran 8000 píxeles por 40 píxeles es decir va a tener la resolución del escenario en baja resolución cuando tenía el escenario en baja resolución pues no me acuerdo de memoria así que voy a abrir el archivo y ahora os lo voy a decir creo que era también por 400 no sería por 40 en todo caso vamos a verlo en baja resolución claro entonces vamos a ver escenario juego entonces tiene no mira 200 x 10 claro porque cada bloque eran 40 píxeles entonces la resolución que tenga el escenario original 200 x 10 lo que me diga el gimp es lo que yo tengo que poner ahí así que en este caso 200 x 10 y muy importante el y de que sea diferente y lo tengáis localizado en este caso le he dicho chivato lo que hago por tanto es decir declaro el canvas del chivato y digo vara si es igual a document.getelementbyid ojo las mayúsculas al principio de cada palabra chivato a continuación defino el contexto del chivato que va a ser 2 d y digo bar con texto si es igual déjame que baje esto un poco para curar es mejor es igual a saber a si punto de contexto que va a ser dos de dos y ahora voy a decir defino la imagen del escenario en baja y vivo bar escenario low es igual a new image y digo escenario low punto src la fuente del escenario es en mi caso carpeta imágenes barra no me acuerdo barrand escenario juego barra escenario juego así que por tanto al final lo que hago mira por ejemplo pues ahí no pero aquí sí dentro del juego 2 lo que hago es decir contexto sí roumette y dibujo déjame ver qué dibujo y dibujo escenario low en 00 y entonces es cuando lanzó el juego 2 quiero decir con esto déjame ver esto dónde está a dónde está cuando el pulso la tecla enter está aquí en juegos preparatorio mira y localizó cuando pulse la barra espaciadora que al final fue la tecla enter salto al juego real entonces en lugar de saltar a juego 2 salto a juego 2 preparatorio en juego 2 preparatorio lo que hago es cargar la imagen en el escenario low y ahora así lanzó el juego 2 y si todo ha funcionado correctamente guardo y recargo y cuando pulsó enter vamos a verlo al cuidado juego dos preparatorios vamos a verlo juego 2 preparatoria y de ahí salta a juegos y cuando estoy pulsando enter no me está mostrando nada vamos a ver si tal vez quizás tenga algún error bueno de repente parece que tengo 15 errores bien cuidado si en este caso me dice que escenario juego no existe es cierto que no existe porque más que sea png que probablemente será constante que sea png parece que es una cuestión de que el escenario juego png está en la carpeta del escritorio y tiene que estar en sham en ht docs en biométricos o en imágenes en el escenario juego punto png y ahora si pasamos a preguntarnos igual si efectivamente es punto png bien vamos a ver esto ahora así que pulsar enter ahora sí y si todo va bien mirad por aquí abajo se carga el chivato entonces el silbato es el que nos va a permitir saber qué estructura tiene el escenario luego evidentemente ocultaremos el chivato pero de momento lo que queremos es que esté ahí en la pantalla lo que voy a hacer ahora por tanto recargo por aquí lanzo por aquí atención mira lo que voy a hacer ahora es que ese doble bucle for junto con el contador igual a cero no lo voy a dejar dentro de la función juego 2 es decir recortó desde revisar los colores el contador es igual a 0 y me llevo el doble bucle for lo saco de juego 2 y lo meto en juego 2 preparatorio que es lo que estoy consiguiendo de momento con eso pues que la pregunta de dónde están los bloques ya no se va a ejecutar 30 veces por segundo sino que se va a ejecutar una sola vez antes del juego en primer lugar por tanto pongo el contador lo pongo es igual a cero actualizó los datos de la imagen porque sé que el chivato no tiene 800 x 400 sé que el chivato tiene 200 x 10 y sé que los bloques no están pintados cada 20 píxeles sino que están pintados cada un pixel es el escenario en baja resolución así que no le digo más igual 40 sino que les digo más igual a 1 a partir de aquí lo que estoy haciendo es igualmente el contexto datos color y lo estoy almacenando en la matriz llamada ladrillo en posición x y ladrillo en posición y tras lo cual por tanto lo que voy a hacer es simplemente limpiar un poco de código acabo de eliminar el caso else del if porque no estaba eliminando el caso no estaba usando el caso else una vez que tengo esto lo que voy a hacer mira es que me voy abajo y digo imagen en ladrillo de ladrillo mx por 40 era por 40 cuando ocupaba nada cada ladrillo 40 y ladrillo y por 40 y de momento lo que quiero que comprobéis es que tenéis en la pantalla esto en funcionamiento pulsamos enter y tenemos por ahí el ladrillo en funcionamiento el problema ahora mismo voy a mirar el problema ahora mismo es que yo guardo recargo va más o menos rápido pero no hace nada porque no hace nada atención a la pantalla miradme porque yo cuando estoy revisando los colores le estoy diciendo en este caso estoy en un juego de los preparatorio está en la función juegos preparatorio estoy en este doble bucle for entonces cuando x es igual desde 0 a 200 y salta de uno en uno cuando y es igual a 0 hasta 10 de 11 mírame mirando la pantalla entonces a quién va a saber su color cuidado a contexto y que es contexto tener en cuenta que contexto es el contexto grande y contexto si es el contexto pequeño yo le estoy diciendo que todavía se fije en los colores de contexto grande pero realmente en que se tiene que fijar es los colores de contexto sí así que le digo contexto sí a partir de ahí continuó tal cual y si ha ido correctamente mira se ha ido correctamente aparte de que quiero que os fijéis que el dibujo aquí el dibujo de dibujar el contexto si lo he metido dentro de juego para luego os cuento por qué entonces si tengo esto en la pantalla aseguraros que tenéis ya el contexto si cuando está la pantalla de inicio le doy a enter y ahí tengo aunque de momento inmóviles los ladrillos del juego de momento inmóviles sí lo sé lo que quiero que veamos ahora por tanto es que de momento he podido dibujar los ladrillos y ahora haremos que transición en hacia la izquierda ahora lo que quiero es decir que los bloques también se muevan hacia la izquierda por tanto que los bloques se mueven hacia la izquierda en primer lugar localizó donde estoy dibujando los bloques en base a la matriz dibujo ladrillos y atención mira digo ladrillo x 40 eso es la posición del ladrillo y digo menos posición fondo por ejemplo partido 4 vamos a verlo vamos a hacerlo dejadme que lo vea bien vale a la vez es más posición fondo pulsamos enter y hay fijaos ahí lo tenéis daros cuenta como el fondo va a transición 'no podemos probar el lugar de partido 4 le ponemos partido 2 y lo que quiero que veáis es como tengo la matriz se ha calculado una vez tengo el fondo los ladrillos que se van moviendo pero en x lo que van haciendo como veis es aparte de el valor de la matriz van cogiendo una velocidad es decir posición en fondo cuál es el posición do la posición del fondo que habéis creado cierto entonces en ese caso por tanto lo que va a ocurrir es que le estoy diciendo quiero que valga lo que dice la matriz que vales más un valor cambiante que es lo que se va animando el fondo mirad si posición el fondo no estuviera partido por dos el ladrillo iría a la misma velocidad que el fondo daros cuenta por ahí por esa parte como los ladrillos van pegados al fondo pero si yo le digo posición fondo por ejemplo partido 2 lo que hago es que el fondo tenga una velocidad pero los ladrillos tengan otra diferente y con eso por tanto lo que consigo es ese efecto parallax es decir ese efecto de que el fondo se mueve más rápido o más lento y por tanto como veis en la pantalla ejemplo 1.5 da esa sensación de profundidad si tengo el juego y el juego va demasiado rápido digamos que el salto es demasiado rápido para poder jugar con normalidad por ejemplo a un flap y ver lo que hago por tanto es la velocidad y de 5 abajo a 2 pero ciudad menos igual a 2 con esto mirad lo que estoy haciendo es simular qué la ficha tarda más en bajar la velocidad de es menor de hecho fijaos puedo poner velocidad menos igual a 1 y la ficha ahora va a tardar menos todavía en bajar pero claro cuidado porque se me sube demasiado hacia arriba para que no se suba demasiado hacia arriba posición y menos velocidad y partido por ejemplo 3 o 4 y jugando con esos parámetros es decir velocidad menos igual a lo que sea y velocidad y a partir de un valor es como voy a conseguir fijaos ahí controlar la velocidad de ese elemento y por tanto el salto y a partir de ahí es cuando en este caso porque tengo los bloques muy cerrados pero en ese caso puedo jugar un poco mejor en la pantalla y especificar pues cuando salta cuando nos salta cuando vive cuando no vive y así lo único que hecho por tanto es modificar estos dos valores de saltando por cierto que ya no me hace falta de este estoy aquí es un control punto warning porque ya sé lo que hace más que nada lo que os quiero decir es que los con soul es punto los hilos con soul es punto warning usarlos cuando sea necesario pero cuando ya no sean necesarios quitarlos por dos razones una les dan pistas a vuestros usuarios de cómo funciona nuestro juego internamente en cuanto a la programación y dos ralentizar el juego que el ordenador tenga que calcular los mensajes de consola es una operación más que tiene que realizar cuando yo no cumplen ninguna función pues no hay ninguna razón para mantenerlos y por tanto los quitamos de momento mantenemos lo que has perdido el juego y ahora más adelante en la parte de los deberes veremos qué hacer con esto resaltando es igual a 1 hay por ahí otra vez un aquí está hay por ahí otra vez un con soul punto lo que dice es igual a 1 pues bueno ahora veremos dónde está vamos a poner lo siguiente con sol punto y el programa nos va a mostrar dónde están los encuentros y con sol saltando así que éste también lo quito para que el programa pues no pierda tiempo no pierda operaciones digamos de juego entonces voy a transformar este juego en un algo así como un flap y entonces voy a decir flap y vert voy a hacer imágenes y me voy a bajar un poco los mira aquí hay variaciones luego podemos pintar nuestra radiación a lo que voy a hacer por tanto es lo siguiente floppy ver background voy a un fondo más o menos como este es repetible bien ver imagen y me lo guardo así que me lo guardo ht box a background y ahora atención ahora os lo paso no os preocupéis y digo escenario juego esto es para la chs parallax para las perlas para nuestra la chs así es que estoy en el escritorio efectivamente samp ht docs tiene recursos imágenes y ahí tendremos fondo para la chs y por tanto ahora lo que hago es que cargo esa imagen de atrás descargado pues no lo sé debería estarse y bien y hay la cargo vale es una imagen 800 por mil 748 mil por mil 61 no puede ser tamaño de 8000 por 400 bien ahora me llevo el fondo pero que ese fondo quizás es un poco todavía demasiado pequeño pero no pasa nada porque siempre lo puedo rellenar a parte pero bueno de momento lo pongo ahí algo que voy a hacer es mirada duplicarlo una vez duplicado con vino ahora vuelvo a duplicar con vino vuelvo a duplicar con vino vuelvo a duplicar claro con vino vuelvo a duplicar creo que ya con él y con vino ahora sobre escribo y ahora lo que voy a hacer es que en cuanto al fondo en cuanto a los objetos en cuanto a las tuberías pues voy a alguna tubería de estas en imagen esta imagen me la guardo esta imagen la abro mirando voy a seleccionar algún elemento de estos con la cuchilla lo corto me voy a asegurar de que el tamaño sea cuadrado es proporción y ahora me aseguro de que en escalar la imagen sea de 40 x 40 así que esto como os podréis imaginar es bloque 1 por tanto por lo tanto esto por aquí se hará recargo el juego pues tengo eso por ahí veis el efecto parallax creo que se ve entonces ahora lo que voy a hacer es evitar tanto el personaje como el escenario así que me voy a flipy flap y verde transparente es una cosa así de la imagen me lo guardo qué nombre tan fácil de recordar entonces me busco este archivo me cojo ese objeto bien cuánto tiene esta imagen tiene 19 por 20 digamos 20 por 20 digamos 20 x 20 yo lo quiero pasar escalar la imagen ya sabéis a 40 x 40 sin interpolación el problema aquí tengo el fondo no puedo usarlo de quitar el fondo por tanto en este caso voy a usar la varita mágica si el programa me deja claro porque si no la podría usar a ver qué pasa vale bueno pues selección invertir copiar pegar ahora sí bien y me lo exportó como personaje 1 jugador reemplazo voy al juego tengo un flap y geometría y tengo ahí por tanto efectivamente en pantalla bien y ahora lo que voy a hacer lo que voy a hacer es rediseñar el escenario para que se parezca más lo que esperamos de un flap y entonces me voy a escenario el juego os acordaréis que es este de aquí los colores por convención siguen siendo los mismos así que dibujo con color azul y ahora pues evidentemente ese tipo de juego requiere que con un tamaño de un píxel voy a dejar al jugador un poco respirar pero requiere que haga unos niveles más o menos así sí un poco difícil pero siento algo más fácil ahora vamos a dejarle al jugador un poco respirar y estás incluso la gran ventaja ahora lo ponemos un poco más difícil y esta es la ventaja y es que daros cuenta como yo he programado yo he realizado una programación pero a partir de ahora diseñar x niveles diferentes con x bloques diferentes no es programar más si no es simplemente retocar esta imagen esto es escenario el juego recargo el juego y ya está ahí está el entonces ahora pues tengo de momento esto a cuidado porque además se queda ahí en 40 tenemos que arreglar también eso creo que hay pan bien ahí tenemos que ajustar un poquito más pero bueno ahí tenemos el juego en funcionamiento con el efecto parallax que os contaba antes así que bueno pues vamos allá otra cosa que quiero arreglar es un poco la presentación del juego lo que quiero ahora es mejorar la prestación del juego porque miran solo como pantalla completa pues está en un fondo blanco está orientado hacia la izquierda se ve el truco no tiene título bueno pues lo que tengo que hacer simplemente ahora mira ves los siguientes esto es muy fácil es un poquito de html y digo h1 flap y clase entonces dentro del flap y clase lo que hago es un poquito de instrucciones y digo para mantener el juego en movimiento debes evitar keflavík toque las columnas con instrucciones y ahora con un poquito de fs s mirad en la clase con un poquito de css porque fijaos que css tengo bastante poco de ellos acordáis que el primer día le puse borde de un píxel sol y gray ya no hace falta esto porque ya sé cómo queda el juego así que border de 0 pixel solid grade y digo el escenario es with 800 píxeles martín auto y digo body es color blanco fondo negro y en el escenario voy a decir que text align centre en body voy a decir que font family y es sam's sheriff lo que tenemos por tanto por aquí es que simplemente por hacer eso pues hombre se centra en la pantalla el juego queda más interesante en cuanto a lo que es una presentación de juego el truco se ve por tanto lo que puedo hacer es que aquel elemento que tiene el y del chivato lo que quiero es display no display none equivale a decir oculta me lo por tanto tú como jugador no lo ves pero el sistema sí que lo ve que es la idea vale entonces fijaos como con unos pequeños retoques pues ya tenemos el juego en movimiento con unos pequeños retoques que además si os fijáis prácticamente sí si ejecutamos este juego en un móvil podéis jugar al juego porque al final todo el juego se juega con un tab con lo cual ahora mismo no es lo más eficiente del mundo de hecho sería un juego vía navegador web pero esto ya se puede jugar en un dispositivo móvil lo subo ahora los hubo un momento en el servidor y ahora si queréis con el móvil lo podemos probar antes de subirlo al servidor dejadme hacer una modificación entonces para hacer esta modificación valen a juegos preparatorios dónde estás clic aquí así que mirar mirad lo que voy a hacer voy a subir este juego a mi servidor y a partir de ahí lo podemos probar el código se empieza a complicar ya sabéis que además lo que quiero hacer es siempre reestructurar un poquito por ejemplo los comentarios voy a poner los comentarios en las líneas debajo pero no sólo esto no solo quiero hacer esto sino que además lo que quiero es no digo ya siquiera todavía externalizar porque de momento nos viene bien que esté todo en un mismo juego pero lo que voy a hacer es poner marcadores visuales como en un libro más o menos así algo así era te pongo condiciones iniciales entonces con este marcador yo lo que estoy haciendo se hace falta lo hacemos más grande para que se vea para que resalte para que sobresalga entonces la idea con estos marcadores que no es más que un comentario es definir visualmente claramente dónde empieza y dónde acaba cada bloque se hace falta en pro de la claridad bucle inicial del juego y bucle inicial del juego acaba aquí y ahora vengo abajo y digo y lo lanzó hacia atrás y digo juego inicial en la pantalla de bienvenida y entonces lo que voy a hacer es lo que haga falta para que ahí lo tenemos para que yo finalmente pueda revisar cómodamente el juego y pueda saber exactamente arábigo juego principal cuando superamos la pantalla de bienvenida entonces a medida que el juego se hace más complejo pues cada vez van a ser más necesarias estas ayudas visuales como paso previo a que en un futuro empecemos a separar en archivos diferentes empecemos a derivar funciones empecemos a realizar extracciones y cosas así pero de momento estos bloques me permiten saber dónde empieza y dónde acaba cada bloque para que el código no sea toda una tijereta vertical cargamos el juego por tanto por donde lo teníamos en última instancia recordamos que cada día que abrimos tenemos que abrir el panel de control de sant y arrancar como mínimo apache y eso vamos arrancando mysql para usos futuros pues mejor que mejor aunque hoy todavía no usamos mysql pero por lo menos arrancamos apache así que lo que voy a hacer es que le doy a los ajos le doy a la carpeta del curso y a partir de ahí lo retomamos por donde lo habíamos dejado ayer a partir de aquí por tanto lo que vamos a empezar a plantear es cuáles son nuestros objetivos futuros en cuanto a que yo ahora mismo tengo vamos a ver a quien camps en htc en diámetro y curso pues lo que tengo son una serie de imágenes donde tengo el fondo para la chs y tengo un escenario juego pero yo lo que quiero primero que quiero conseguir es poder crear varios niveles para poder jugar así que en primer lugar lo que haría es crear una carpeta llamada niveles por ejemplo en este caso pues lo que haría es que fondo para la chs y escenario el juego me los llevo a niveles y los voy a llamar escenario nivel 1 y los voy a llamar fondo nivel 1 escenario define lo que serán los bloques de colisión del escenario y fondo define la textura de fondo claro de la misma manera yo ahora voy a hacer lo siguiente escenario nivel 1 lo voy a editar con el gym o con cualquier otro programa de retoque fotográfico y a partir de aquí me voy a hacer un segundo nivel recordamos que por ejemplo en este primer nivel mirad tenía una serie de barras rojas verticales pues lo que voy a hacer en este caso es que voy a poner en primer lugar el fondo azul no y pongo el fondo azul pinto todo de azul con más opacidad y lo que voy a hacer ahora es por ejemplo pintando de color rojo con el lápiz pues no sé pinto un segundo nivel con triángulos con bloques por ejemplo triángulos con bloques más que nada para diferenciarlo del primer nivel para que quede claro que el segundo nivel es diferente que el primer nivel y ahora esto como os podéis imaginar lo voy a exportar como no guardar como sino exportar como y luego exportó como escenario nivel 2 con lo cual ahora en esa carpeta tengo el escenario nivel 1 y tengo escenario a nivel 2 y evidentemente más del poder en niveles diferentes fondo nivel 1 voy a hacer exactamente lo mismo voy a editar este nivel y voy a buscar en internet porque todavía no hemos llegado a la parte del grafismo algo como por ejemplo game background table game background y le hable para poder localizar pues más fondos de videojuego entonces me voy a imagen me localizó un fondo de imagen que me guste como por ejemplo este en definitiva cada uno el que queráis voy a poner algo como utilizable 8 bits pero insisto esto se movilicen para mí tampoco es eso lo que yo quería pues la y busco trab le encuentro este que bueno me gusta me guardo la imagen me la guardo en imágenes la cargo dentro the game y mirada atención a lo que hago pues es esto que copio pero dentro de fondo nivel 1 claro ahora lo que hago es escalar la herramienta de escala hasta aquí escalo para que sea más pequeño y a partir de ahí lo que voy a hacer es como comentábamos el otro día duplicar así que me lo pongo aquí duplicó la capa con este botón que lleva debajo de las capas ya sabéis que duplicar no os olvidéis de combinar hacia abajo porque así entonces ya no duplicó de uno en uno sino que duplicó de dos en dos con vino hacia abajo duplicó de cuatro en cuatro y así digamos la idea al final es ahorrar tanto trabajo que no podáis con vino hacia abajo tampoco el corte pero igual y duplicó me acerco para intentar que el corte se note lo menos posible y por último combino hacia abajo y duplicó la última vez evidentemente me va a dar este fondo al final tiempos final todo esto me lo exportó como fondo nivel y por tanto lo primero que he hecho es crear los recursos gráficos para los dos primeros niveles del juego pero ahora necesito establecer un poco la lógica del juego para que llegado un momento pueda cambiar de escenario lo primero que necesito es averiguar cuando el juego ha acabado y el juego ha acabado si yo sé que esta imagen es de 8000 píxeles pues yo sé que el juego ha acabado cuando yo tenga una variable por aquí que se llama posición de fondo x entonces cuando yo venga por aquí y diga atención if fondo x es mayor que 8000 porque recordamos que el escenario tiene 8000 pues en ese caso digo alert de momento el juego ha acabado más que el juego ha acabado es que has llegado al final del nivel detectar cuando has llegado al fondo del nivel y comprobamos que cuando estoy jugando cuando estoy dentro de este juego detectamos como ahora cuando llegue cuando el juego llegue a 4000 8000 pues acabará dejadme que lo ponga más rápido recordad que tengo una variable por aquí llamada velocidad fondo la voy a poner a 16 así que recargo fijaos como ahora pues va más rápido bien así que hago justo cuando iba a llegar al fondo y subir demasiado y se ha colgado el juego ahora arreglamos también lo de que no puedan subir más allá de la parte superior qué poca mano tengo sí pues mira si está estudiando por minados porque le esté dando y lo dejo en la parte de abajo efectivamente y ahora comprobamos como al llegar al final del juego mira cuando llega a 8000 pues hace ahora pues va a ser menos efectivamente no eso se reinicia cada vez que inició pero en este caso efectivamente es que el juego sea menor que menos 8.000 porque efectivamente va restando un salto claro entonces hay que cambiar también el signo de mayor que a menor que entonces sabes que de hecho realmente es menos 8.000 más 800 porque es la pantalla entera así que bueno vamos a probarlo lo dejo abajo 9 abajo lo dejó abajo me espero a que la pantalla finalicé y el juego ha acabado parece que acaba de un poco pronto ahora así que voy a aclarar esto quita voy a ponerlo con console punto y fondo x es menor que es raro acaba demasiado pronto vamos a verlo fondo x sí pero estaba parando antes de 8000 de 6.600 desde 1400 he puesto a ver mantiene he puesto a ver que vea el cursor he puesto menos ocho mil vamos a verlo y cuando llego más o menos ahí es cuando dice el juego ha acabado y eso en principio no parece que esté bien entonces bueno tendré que detectar porque en este caso fondo x que es menos igual a velocidad de fondo claro porque está clarísimo porque el fondo va a doble velocidad restante hay que poner o 16.000 o 32.000 acordaros que el fondo va a doble velocidad con respecto a al frente así que bueno en definitiva detectó cuando ocurre una cosa es decir cuando he llegado supuestamente al final del nivel y a partir de ahí lo que voy a hacer es por ejemplo recargar el juego pero al recargar el juego ahora veréis va a ser en el siguiente vídeo lo que quiero decirle al programa es que recargar el juego no quiero que todo esto vuelva a empezar desde el principio sino que quiero cargar el nivel 2 y ahora hay el juego acabado eran 16.000 bien pues ahora digo menos 16.000 más 800 ahora sí y lo que tengo que hacer simplemente mira es decir lo siguiente me voy a crear una variable inicial en las condiciones iniciales para voy a hacer un nuevo vídeo creo por tanto la condición en la que voy a decir indicó el nivel en el que empieza el juego y digo bar nivel es igual a 1 entonces si bar nivel es igual a 1 yo lo que hago es lo siguiente la mirada yo lo que hago es que vamos a ver en la imagen nivel aquí está realmente imagen vale os digo bar imagen nivel todo seguido es igual a new image entonces yo ahora digo lo siguiente imagen nivel 1 punto src es igual a imágenes barra niveles barra no me acuerdo barra fondo nivel 1 punto jpg entonces yo vengo y repito esta operación para tantos niveles como tenga imagen nivel 2 es fondo a nivel 2 tengo 50 niveles 50 variables ahí probablemente no podemos hacer mucho más o si no lo sé pero de momento lo vamos a dejar así entonces lo que hago es que digo imagen nivel 1 es igual a eso imagen nivel 2 es igual a eso entonces yo ahora digo lo siguiente mirad en el juego 2 no sé si habéis copiado básicamente son tantas imágenes como niveles y cada imagen pues dime a nivel 2 efectivamente sí entonces en juego 2 y ahora digo lo siguiente donde está lo de borrar el ing fondo dibujo la imagen de fondo del escenario no esto de hecho tenía que ir en muy decidido y mirada y mg personaje no si lo que busco imagen fondo y fondo de x y esa es y en el fondo momento que compruebe img fondo es igual a imágenes escenario juego grande ese no imágenes fondo para la chs fondo para la chs busco fondo para la chs fondo para la chs ahí estás no tengo comentario no tengo rastreo pues ahí digo el dibujo la imagen de fondo en modo parallax veis para qué están los comentarios para poder localizar correctamente y digo lo siguiente en primer lugar lo que quiero es especificar cuál es la imagen que quiero dibujar les digo dif nivel es igual a 1 doble igual porque es una comparación en ese caso digo nivel actual es igual a vamos a ver nivel actual es igual imagen nivel 1 por cierto qué a nivel actual es una nueva imagen así que nivel actual bar nivel actual es igual a new image hago lo mismo para todos los demás mira si nivel es igual a 2 entonces nivel actual es igual a imagen nivel 2 y así haría con todos los que fuera necesario pero al final no voy a decir fondo para la chs sino que voy a decir nivel actual dejadme que compruebe que funciona y ahora os lo pongo para copiar entonces lo único que me hace falta es que en la condición de finalización le diré nivel más el nivel más momento nivel más le digo fondo x es igual a 0 y vamos a probarlo miradme hago clic entonces estoy jugando con el personaje que está ahora mismo en el nivel 1 la idea a ver si va correctamente es que cuando acabo el nivel 1 cuando acaba el nivel 1 si todo va bien empiezo desde cero ahí vamos a verlo vale y bien algo ha ocurrido pero fijaos que ha querido cambiar de escenario si lo que ha hecho en este caso ahora veréis es que ha desaparecido uno ha empezado el otro pero no he reiniciado la variable si no reinicio la variable lo que voy a hacer por tanto es asegurarme que reinicio la variable fondo x es igual a 0 voy a poner fondo x es igual a 0 luego por otra parte tengo fondo x vamos a buscar un post x vamos a ver cómo empieza a fondo x pues x es el personaje fondo x es igual a 0 pero estoy viendo que aún así el fondo x no está haciendo exactamente lo que yo espero de él entonces fondo x en este caso yo lo que haría exponerlo por ejemplo a 8000 vamos a verlo ahora recargamos voy a decirle además los x es igual a 200 para la próxima recarga y ahora cuando el juego acaba vamos a comprobar qué poner ese fondo x a 8000 hace realmente lo que espero el juego acaba bien vale el fondo x vale vamos a ver el fondo para la chs por quien está dibujado contexto de momento posición fondo esto es lo que está ocurriendo correctamente no solo fondo x sino también posición fondo es igual a cero estas dos variables son iguales a 0 vamos a comprobarlo como al llegar al final del juego recordad que multiplicado la velocidad por 4 para que vaya más rápido al final no era así de rápido y vamos a comprobar como al bajar esa variable posición fondo también a 0 volvemos a empezar pero con un nivel diferente y llegamos al final artificialmente al final y empezamos de nuevo desde el principio tanto con el fondo como con los bloques pero los bloques ahí tenemos lo siguiente que tenemos que hacer recordar que el juego ahora mismo son dos cosas es el fondo y son los bloques yo tengo el fondo del nivel 2 pero no tengo los bloques del nivel 2 vamos a trabajar con eso ahora además otra cosa que quiero hacer es que en el fondo los ladrillos las tuberías lo que sea que pongamos también cambie entonces vamos a ver dónde está eso recordamos atención que eso se preguntaba una vez en el juego 2 preparatorio lo que hicimos anteriormente de sacarlo de la función principal y meterlo dentro de esa función entonces ahí lo que vamos a ver es que teníamos con textos y contextos y era esa imagen mira y aquí me voy a vamos a ver limpio la pantalla en red y donde estoy dibujando el personaje en el escenario pues lo estoy dibujando por aquí vamos a ver limpia la pantalla liarte mount imagen personaje contexto chito image ahí lo tenemos estoy en el juego y digo dibujo el mapa en el canvas escondido y digo el mapa es importante porque la colisión se toma de él entonces una vez más voy a hacer lo siguiente mira aquí arriba en la definición digo bar mapa 1 es igual a mi image mapa 1 punto src es igual a imágenes barra niveles barra escenario nivel 1 punto pm g de la misma manera mapa 2 es igual a escenario nivel 2 punto png y bar mapa actual es igual a new emails de momento vacía entonces a partir de aquí lo que hacemos una vez que hemos dibujado hemos llamado a las imágenes de los dos mapas es hacer una condición parecida a la que hemos hecho anteriormente copiarlo y ahora continuamos ahora lo que hago es decirle yf nivel es igual a 1 en ese caso vamos a decir a nivel actual es igual a verlo a perder mapa actual no nivel actual mapa actual es igual a mapa 1 sin nivel es igual a 2 en ese caso mapa actual es igual a mapa con lo cual con textos y draw image y voy a decirle en este caso cuidado que ahí tengo un pequeño problema y es que voy a decir ahí mapa actual tengo un problema esta va a funcionar en tintín un segundo entonces esto no va a funcionar porque esto se está ejecutando en la función de juego y la función de juego recordad que es la pantalla inicial entonces cuando se acaba un nivel y yo voy al siguiente nivel no vuelva a pasar por la función de juego así que lo que voy a hacer es copiar todo esto y ponerlo también en la función de reinicio en la función en el pequeño a la estructura de control y que dice si fondo x es demasiado grande entonces el juego se reinicia vamos a verlo vamos a ver si funciona y a partir de ahí programamos estrellas porque es la pantalla emisión así podéis eliminarlo no pero lo necesitamos porque es la primera ejecución digamos de momento lo dejamos hace más bien que mal digamos entonces llegó al final mirad atención a ver si llego al final ya llegará al final si todo va bien no sólo cambiará el mapa debería de haber cambiado los ladrillos pero no están cambiando vamos a verlo nivel 2 en ese caso mapa actual lo que está pasando por tanto es que el contexto si así 666 y mirad claro y digo juegos es decir necesito ahora sí abres vamos a ver lo que hago por tanto es decirle que cambió el nivel que aumentó el nivel y quiero a no juego 2 no por favor juegos preparatorios porque si no se está ejecutando así mismo infinitamente no quiero eso y por tanto ahora veréis cuando llega al final si todo va bien mirado debe cambiar tanto el escenario como el mapa jairo tenés otra de las cosas que tenemos pendientes para el trabajo del fin de semana es crear otro elemento aparte del propio tubo el tubo es un momento dado negativo en cuanto a que se te chocas con el tubo el juego debe pararse o establecer una penalización pero yo también quiero algo que me pueda dar puntos algo positivo en el juego entonces me voy a ir a fondo a nivel 1 creo que lo tenía abierto por aquí es escenario nivel 2 así que descartamos voy a abrir el fondo nivel el escenario nivel 1 y lo que quiero mirar una vez más por convención es que yo vengo por aquí y digo pues mira de color verde puro verde digo voy a poner por aquí un objeto verde un objeto verde y ese objeto verde va a ser algo positivo digamos una estrella entonces ahora por supuesto sobre escribo y mirad me voy a buscar pues algún png supermario estar png como sí algo así en fin no sé png transparente busco alguno que tenga transparencia como esté atención claro por supuesto esto es estrella me lo abro en el gimp para decirle que lo quiero a 40 x 40 mira qué bonito con brillo y todo 40 x 40 vale 40 x 45 pues 40 aquí y ajuste de lienzo le digo 40 y centrado sobre escribo y por tanto ahora en el juego lo que voy a hacer es algo tan aparentemente sencillo como en juego 2 preparatorio voy a hacer otro barrido y digo este es el doble núcleo foro y vigo reviso los colores en busca de estrellas y ahora contador de nuevo es igual a cero y digo formar esto de aquí y digo si datos color de uno porque recordamos que el 0 era rojo y el 1 es verde y el 2 es azul es mayor que 127 en este caso atención mirad ladrillo esto no es ladrillo es estrella así que bar estrella es igual a mí este fin de semana entonces el ladrillo y esto es ahora bar estrella x es igual a mi rey ibar estrella y es igual a mi rey entonces a partir de aquí por tanto lo que hago es que estrella x es igual a equis y estrella y es igual y vamos a verlo todo ok por tanto ahí lo que estoy haciendo es dibujar crear la matriz de las estrellas por tanto lo que quiero ahora es en juego 2 localizar el elemento donde estoy dibujando los ladrillos y también dibujar las estrellas así que estrella x links contexto otro email a imagen ladrillo imagen estrella x estrella y ahora no olvidemos que debemos definir bar estrella es igual a new image y estrella punto src es igual a imágenes barra estrella punto png por tanto si todo va bien te voy a recargar bien imagen estrellas notifight por qué es imagen estrella no es estrella porque si no el programa se me estrella así que ahora observo por ahí que tengo una estrella y la idea es que si el personaje en un momento dado toca la estrella pues en un futuro obtendrá puntos digamos obtendrá cualquier refuerzo positivo que vosotros queráis otra cosa que lo tengo pendiente este rato permitidme que lo haga aquí es momento ya de impedir que el flap y se puedan subir más allá de la pantalla para hacer que no se pueda subir más de la pantalla es muy sencillo es juego 2 y le digo impide que el personaje se salga de la pantalla y digo cuando pos y es mayor que 400 en ese caso pues y es igual a 400 así de sencillo cuando él posee y perdona no es mayor que 400 es menor que cero porque recordamos que arriba es 0 abajo 402 y es igual a 0 es así de sencillo así que vamos a verlo recargamos y me intento ir hacia arriba pero fijaos que no puedo algo source 0 voy a decirle 1 quiero subir no puedo subir y además no genera error generador shoreside contexto rendering 0 tengo que ver qué pasa porque ver otra variable que es la que está generando error falto que se ayude en la línea de los 22 en la línea de los 22 con texto gettyimages data en la posición 2 y le voy a decir en este caso mira pero bueno debe funcionar correctamente console punto no y vamos a verlo uno hay son 60 entonces como efectivamente al ponerlo en esta posición parece que puede llegar a ser menos uno pues lo que voy a hacer en este caso es que esa estructura de control aquí impidió que el personaje salada de la pantalla lo voy a poner antes de la línea que genera error que es la 222 quitó el console punto love porque ya no hace falta recargo y ahora comprobemos como no puedo salir y ahora ya no debe generar ningún error porque estoy poniendo esa condición después de todas las operaciones que en un momento dado tenga que hacer en la geometría muy bien pues por aquí por tanto tenemos unas cuantas operaciones hacer esto ahora paso el código y lo que quiero en la clase de hoy a modo de práctica es algo relativamente difícil y es que lo que quiero es que el fla bieber pueda disparar balas lo que quiero ahora es que flap y sea capaz de lanzar balas entonces para eso yo de lugar pienso balas múltiples elementos son matrices por tanto era yo digo voy a crear balas en matrices yo digo bar va la contador es igual a cero de momento no he tirado ninguna bala ahora bar vale x es igual a new rey bar bala y es igual a mí a ride ella está entonces de momento voy a ser una bala inmóvil en el sitio voy a decir lo siguiente cuando sobre el juego pulse la tecla que tecla no lo sé javascript que ésta nos daba error charco de la misma la 32 vale este referente aquí según estaba 32 es el espacio pero un momento el 13 es que estos son los hace igual no es lo mismo table charco ves entonces la es el número 65 según esto así que si la tecla pulsada de la 65 digo lo siguiente primero creó una nueva bala no quiero ni que copiar sino simplemente que miréis queremos pasar el código no os preocupéis pues cree una nueva bala entonces esto quiere decir que vaya a contador dónde estás aquí vale al contador más ahora digo bala x de bala contador es igual a post x lo que donde esté ahora mismo pues x porque posee que es la posición del jugador así señor al ratón x bien os x ahora digo bala y de bala contador es igual a 2 y por cierto que hay dibujar una imagen ahora veremos entonces aquí lo que hago es crearon una bala y en el juego 2 digo dibujo todas las balas que tenga en el escenario así que digo por y es igual a 0 y es menor que cuenta a bala era cuenta bala 30 balas de acuerdo un contador va las balas contador madre mía que vale al contador esto qué es el mío pero mejor así que bien corto esto de aquí me lo llevo a mis condiciones iniciales llegó hasta aquí me voy a dibujo todas las balas por ejemplo aquí no era cuenta va la era bala contador entonces digo bueno y por supuesto y más y ahora digo en el contexto de güímar voy a dibujar imagen bala que todavía no la tengo ahora la creo en la siguiente posición embala x de iu como embala y de iu no tengo la imagen bala por tanto me voy a arriba y digo bar imagen bala es igual a new image y digo imagen bala punto src es igual a que me descargo alguna bala super mario all blacks png transparente y me quiero esa bala esta mismo si tiene transparencia me la guardo porque va a ajustar el contrario imagen escala de imagen 40 píxeles por ejemplo y le digo transformar voltear horizontalmente la exportó como bala punto pm y por tanto ahora en el código lo que hago es decir que quiero imágenes bala punto pm si todo ha ido bien pero si todo bien guardo pero hoy y cuando el pulso la tecla vamos a verlo cuando pulsó la tecla primero déjame detectar si estoy recogiendo correctamente la tecla entonces console punto ay no es muy posible entonces vamos a ver seguro navidad vale pues digo sí pulsó la tecla no me acuerdo entonces en ese caso digo cuenta bala contador más y digo vale x vale contador es igual a post x y digo bala y de bala contador es igual a post y pero vamos claro bien y ahora aquí digo console punto no bala lo primero que quiero es detectar que no está cogiendo la uich 5 vamos a ver qué tecla puede ser dado que esta no está funcionando la voy a sacar a un documento triples nuevo para que la estructura de control sea completamente diferente no me está escogiendo la hewitt 65 si no pasa nada 13 65 que es una cosa bala pues mira yo lo voy a hacer yo lo voy a hacer aquí porque no estoy usando ese trozo de código entonces click vale perfecto muy bien en este caso por tanto lo que estoy haciendo allí es crear diferentes balas y ahora una vez que he creado diferentes balas no acaban de correctamente la pose y producir lo que quiero ahora es que la y es la correcta pero la x no lo es la bala medir hacia adelante entonces en este caso lo que quiero hacer es lo siguiente contexto otro movimiento la bala x pues debe ser algo parecido a bala x más posición fondo realmente no haber por eso claro porque en ese caso la bala la va a poner vete a saber dónde entonces digo lo siguiente balance vale x les necesito poner una nueva propiedad qué es bar bala ballan hombre que es igual a mi rey es igual al mismo rey entonces solo cuando creo esto de aquí digo bala donde de bala contador es igual así que yo ahora digo las balas bala dónde y más y ahora amigo bala y más balas hombre para donde es un desfase de deposición y con eso lo que consigo es que cada bala tenga una posición independiente ahí tengo que ver porque de vez en cuando se desfasaron pero un poco lentas son un poco misiles de largo alcance con lo cual digo bala dónde más igual 10 por ejemplo y por tanto vemos que con matrices puedo dibujar las balas que quieran y ahí ya pues tenemos que ver tengo ahí el desfase tengo que ver por qué de vez en cuando no sale correctamente puede ser que se puede ser que sea por eso pero bueno definitiva vale hemos visto como gracias a la matriz pues puedo conseguir generar balas tengo que ver qué pasa balas a partir de la posición estoy pensando en el tema de las estrellas de que cuando pase por una estrella pues desaparezca pero estoy pensando que trabajar con matrices escribió una veguería que no veas entonces para eso que así que mejor voy a preferir una propiedad nueva llamada bar bala activado es igual a new rey con lo cual voy a decir lo siguiente creo las balas y digo bala activado bala contador es igual a uno por defecto cuando iba al avalaba la bárbara para 33 una bala es una estrella así que dónde estás bala activado esto es una estrella entonces esto es barra bar estrella activada es igual a navarra por tanto aquí donde están las estrellas en el preparador entonces preparatorio estrellas y digo estrella activado contador es igual a 1 puedes a partir de aquí en las estrellas lo que voy a hacer es lo siguiente si en algún momento el personaje cubre una estrella es decir vamos a ponerlo por aquí para empezar para dibujar las estrellas para esto estrella activado dz es igual a uno solo entonces me dibujas la estrella qué es lo que estoy haciendo aquí pues lo que estoy haciendo aquí estrella activado es notifight como que estaría activado es notify no lo he creado estoy activada es la mar una llamado entonces fijaos que las estrellas aparecen porque están activadas cierto pero si yo ahora vengo aquí y cuando creó la estrella activado digo que es igual a cero en ese caso no hay estrellas porque no es sólo que se creen además tienen que estar activadas que es lo que voy a hacer ahora pues que cuando el flap y toque una estrella la estrella está es active entonces ahora lo que voy a hacer es lo siguiente mirado y ahora mucho cuidado con esto porque esto puede detectar puede ralentizar un poco el juego yo digo detectó si el personaje colisiona con una estrella y si es así la ves activo entonces en este caso lo que voy a hacer es otra vez este doble bucle este bucle for lo cual le insisto una vez más lo estoy haciendo así para hacerlo fácil pero me chirría porque digo si tengo que hacer otra vez el bucle for porque no utilizo este pero eso es para más adelante para optimizar no les digo miradme bala contador naval a contador estos son las estrellas lo que quiero son estrellas aquí formar z estrella x bien entonces digo sí estrella x de zeta realmente no es tipos equis que es el personaje es mayor porque quiero es comprobar que esto realmente no lo puedo hacer es decir estrella x de zeta y también es cierto que pos y es igual a estrella y dz en ese caso y sólo en ese caso estrella activado activada no me acuerdo ya activado vamos a verlo ahora ya ha llegado activado en ese caso es igual a cero en este caso de z es igual a cero eso qué quiere decir estoy desactivando la estrella pero cuidado esto es muy difícil de cumplir es que el juego va un poquito más lento porque tendría que pasar justo la posición de la estrella para que la estrella se desactivará es decir no es prácticamente imposible para esto exacto con un píxel efectivamente eso es lo que os quiero decir entonces eso es prácticamente imposible y lo que voy a hacer por tanto es un rango vamos a ver si la posición en x es mayor qué estrella zeta 40 y también es cierto que la posición quiero copiar que la posición de x es menor que estrella zeta y es cierto que la posición y es mayor que la estrella que está más 40 y además también es cierto en la posición y es menor que posición de estrella en ese caso la desactivas antes lo que estaba haciendo era al píxel prácticamente imposible ahora lo que estoy haciendo es un cuadrado de 40 x 40 pero claro una vez más lo que estoy haciendo es introducir una condición más compleja vamos a ver si y además sea cierto irán otra vez voy a hacer una cosa es una cosa que es decir con sólo el punto tocados y placas o lo que sea recargamos en cuanto a qué es que no tiene nada que ver pero ya ves que no estoy cogiendo el punto verde del mapa no lo que estoy haciendo es la posición con respecto a la estrella x entonces estrella x menos 40 y también es cierto es decir esto nunca es cierto voy a hacer esto va a ralentizar el juego una barbaridad bien tocado ahí está el ecólogo hasta ahí llega entonces estrella x de zeta voy a hacer una cosa menos 240 es decir lo que estoy haciendo es cuidado 240 y había puesto más le he puesto una área muy grande pero y el cónsul punto no está con solo placas para detectar de alguna manera aclaró sí bien voy a hacer una cosa con sólo el punto log 2x y ahora más estrella x es decir quiero ver la posición de la estrella con sólo el punto aquí esta es la cuestión las ha descrito ya está claro bien estoy en juego 2 en el 2009 y por tanto esta es muy probablemente la razón porque no está detectando las estrellas el personaje siempre está en 200 con respecto a la pantalla claro es la estrella la que va variando su posición técnicamente desde el personaje no va avanzando es el escenario el que va retrocediendo bueno vamos a verlo un buen fin