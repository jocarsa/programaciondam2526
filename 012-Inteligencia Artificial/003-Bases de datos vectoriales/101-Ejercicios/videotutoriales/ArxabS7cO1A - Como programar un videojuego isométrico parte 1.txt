el objetivo por tanto es empezar a trabajar creando programando un videojuego directamente desde cero es decir hay múltiples formas de crear un videojuego y de ahí un poco la pregunta de qué programa vamos a utilizar vale entonces depende del tipo de creación de videojuego que se vaya a seguir pues se utiliza un programa o se utiliza otro por ejemplo hay un programa muy conocido para hacer videojuegos que se llama juniti que es y unity3d este no es el que vamos a usar ver porque juniti es un programa en este caso al menos no lo vamos a usar que es para hacer juegos en 2d y en 3d pero es para hacer prototipos de juegos y quiere decir que es un programa muy agradable de usar es un programa muy potente pero que no nos da la misma potencia que si empezamos un videojuego desde cero el objetivo por tanto de esta formación es empezar un videojuego completamente desde cero entonces para ello lo único que necesitamos es un editor de código y me da igual que editor de código sea es decir este curso se va a centrar sobre todo en la creación de código fuente para un programa informático que va a ser un videojuego que procesador utilicemos que editor de texto utilicemos para crear esa aplicación es completamente irrelevante yo voy a trabajar con un editor que se llama brackets punto y yo en este curso vamos a estar trabajando sobre todo con html y con javascript entonces cualquier editor de código como por ejemplo visual studio code como por ejemplo el sublime como por ejemplo cualquier otro editor nos puede ser de utilidad yo en este caso como te digo voy a usar brackets y la única condición para elegir un editor de código sobre otro momento que cierre los archivos que tengo por aquí abiertos momento estoy cerrando código para empezar desde cero vale o que la única condición es que sea un editor especializado diga mucho en cierta forma en crear código fuente para lenguajes informáticos en el sentido de que a medida que vamos escribiendo código pues el código se colorea es decir no me vale ni un text edit es decir ni un bloc de notas ni un word ni un microsoft word vale porque son editores de texto pero no son editores de código fuente para lenguajes informáticos entonces puedes utilizar perfectamente sin ningún problema visual studio code vale entonces ya te digo el resultado o sea cómo lo vamos a trabajar ya lo que vas a llegar va a ser exactamente igual independientemente del editor que uses y luego necesitaremos cómo vamos a estar programando videojuegos en html5 necesitaremos un navegador web en este caso estoy utilizando krumm más que nada porque es el navegador web más utilizado hasta este momento puedes utilizar firefox puedes utilizar ópera puedes utilizar e incluso edge break one vale lo que voy a hacer también es que yo prácticamente todo el rato pues voy a tener el editor de código fuente que va a ocupar más o menos la mitad de izquierda de la pantalla y el navegador web donde voy a ver el resultado de lo que estoy desarrollando que va a ocupar la mitad derecha de la pantalla vale hay gente que se lo pone al revés eso ya un poco depende de cómo te sea cómodo pero en definitiva sí que lo que quiero es eso sí que lo que quiero es tener pues la pantalla digamos dividida en dos para ver por una parte del código de lo que hago y por otra parte el resultado de lo que hago ahora a continuación dentro del editor de código que sea que estés utilizando en mi caso brackets voy a ir a archivo nuevo aparece un archivo sin título y lo primero que voy a hacer es que lo voy a guardar así que me voy a archivo me voy a guardar como me voy a escritorio me voy a crear una carpeta llamada videojuegos y dentro de la carpeta de maná videojuegos dado que este archivo inicialmente es un archivo html voy a llamarlo index html si luego creamos más archivos html podrán tener el nombre que queramos pero por un tema de convención de servidores web cuando creamos varios archivos el archivo de entrada se requiere que tenga el nombre index.html y luego como digo el resto de archivos pueden tener más o menos el nombre que queramos va a tener el nombre index punto para la extensión y luego las letras de la extensión que es html ya que principalmente este archivo estará programado en el lenguaje html aunque luego va a contener mucho javascript le doy a safe y ahora lo que voy a hacer es que voy a ir al navegador y voy a localizar la carpeta de videojuegos y voy a lanzar el archivo dentro del navegador web para asegurarme que estoy viendo lo mismo que se supone que estoy viendo es decir para que este archivo que estoy viendo aquí pues lo pueda ver aquí una comprobación que voy a hacer una comprobación por tonta pero mira para empezar es que voy a poner aquí o la voy a guardar y si ahora recargo aquí en la pantalla aparecerá o la señal de que estaré trabajando con el mismo archivo en los dos casos y si yo aquí pongo la 2 y le doy a archivo guardar y aquí le doy a recargar pues veremos cómo aparecerá hola 2 yo voy a estar aguardando cada noche cada 30 segundos cada minuto o por ahí tú no me vas a ver guardar pero no me va a saber guardar simplemente por la razón de que usó la tecla rápida de guardar entonces yo te recomiendo que efectivamente uses la tecla rápida de guardar que si estás en windows es control s si estás en linux también es controles y si estás en mac es como ese vale pero en definitiva sea cual sea la tecla definitiva la idea es siempre guardar cada pocos segundos no es que los editores de código se cuelguen cada poco tiempo de hecho prácticamente nunca se cuelgan pero bueno es una buena costumbre ir a asegurando el trabajo que hemos hecho y aparte es que hasta que no guardemos no veremos el resultado en el navegador la siguiente cuestión es que yo ahora mismo tengo el tamaño de la letra en el editor probablemente un poco pequeño para que mes atrás viendo digamos entonces voy a ir en momentos preferencias esto no hace falta que lo hagas tú voy a aumentar un momento el tamaño de la fuente y así pues me verás mejor y luego ya cuando el ejercicio se vaya complicando y ya haya mucho código en la pantalla pues ya haré el tipo de letra más pequeña para que quepa todo el código vale pero siempre buscando un compromiso entre que pueda trabajar cómodamente y que tú me veas en la pantalla que tú veas el código correctamente voy a eliminar un poco de espacios muertos esto ya es un tema más visual que otra cosa es simplemente para que no haya márgenes y que de esa forma digamos podamos aprovechar al máximo el espacio así que como digo una vez que nos hemos asegurado que tengo el mismo archivo tanto el editor como el navegador voy a cerrar incluso esta pestaña ahora continuación vamos a empezar a trabajar bien entonces ahora que nos hemos creado un archivo para poder trabajar vamos a darle una estructura vamos a crear la estructura mínima del archivo que es darle doc type html con esto lo que estamos diciendo es que este archivo es de tipo html 5 y ahora aunque vayamos a crear un videojuego lo correcto digamos es que le demos la estructura mínima la estructura que debe tener cualquier documento que esté correctamente formateado en html entonces pues le damos un head le damos un body y ya sabemos que dentro del head viene lo que va a ir al navegador y pues videojuego vale y vamos a ver y ahora aquí a continuación pues vamos a meter las etiquetas correspondientes a lo que sería dentro del videojuego hay muchas maneras de crear un juego hay muchas tecnologías a nuestra disposición yo en este caso lo que voy a hacer es utilizar una de las más utilizadas que es utilizar un framework que de hecho lleva integrado html5 que es el framework canvas se traduce como lienzo digamos en español así que voy a crear por aquí una etiqueta llamada canvas como ya te digo aunque muy poca gente la utiliza para desarrollar webs estándar porque es más una etiqueta para este tipo de aplicaciones gráficas pero sin embargo es una etiqueta estándar de html5 y voy a ponerle una idea va a ser por ejemplo lienzo vale puede ser libre 15 y voy a decir por ejemplo de momento wifi es igual a 512 píxeles hyde es igual a 512 píxeles porque esto no me hace mucha ilusión desde el punto de vista en el que bueno ya sabemos que asignar atributos en línea dentro de las etiquetas no es una costumbre muy buena pero ahora mismo lo quiero simplemente para poder ver este elemento y luego ya le cambiaremos las dimensiones mediante javascript o mediante efe ss voy a utilizar de hecho el tema de fs es ahora mismo en un momento voy a crear un poco de css interno pero no para lo que piensas no lo voy a utilizar ahora mismo para cambiar la anchura y la altura del elemento porque si no para eso por 30 segundos diferencia lo hubiera puesto aquí no lo que voy a hacer simplemente es poner un borde de un píxel solid black simplemente porque ahora mismo ahí hay un canvas pero no lo puedo ver no lo estoy viendo para entonces simplemente he hecho esto voy a guardar para que cuando recargue vamos a ver así fantástico muy bien 13s muy bien formateado y entonces voy a decir que esto del borde se aplica al canvas guardo y recargo y ahora si veo en la pantalla que tengo un lienzo tengo un canvas como un lienzo de un cuadro digamos para que te hagas la idea a continuación una vez que tenemos ya localizado digamos el canvas voy a hacer una cosa voy a aumentar un poquito el zoom del navegador siempre sabiendo que realmente estamos trabajando a 512 pero un poco para maximizar la experiencia y luego ya cambiaremos el tamaño del lienzo mediante javascript pero así empezamos a dibujar un poquito cosas bien vamos a crear una etiqueta script para empezar a meter el javascript y la teoría de html dice que las etiquetas script de javascript deberían ir dentro de la cabeza pero es lo que dice la teoría y yo siempre respeto mucho la teoría pero hay un problema y es que en javascript por defecto yo no puedo hacer referencia a algo que todavía no existe y si yo pongo el script aquí arriba antes de que exista el canvas cuando llamé al canvas no va a existir más adelante utilizaremos un framework que se llama jquery para gestionar los eventos y ese framework que se llama jquery es capaz de decir no hagas algo hasta que toda la banda toda la página no haya cargado pero no es mi objetivo ahora mismo vale por tanto si estás viendo que pongo la etiqueta script después del canvas dentro del body en lugar de meterlo en el gel que sepas que sé lo que estoy haciendo es decir que sepas que sé que la teoría dice que hay que meterlo dentro del head pero si intentas meterlo dentro del gen te das cuenta de que hasta que no aumenta es uno de esos una frameworks pues verás como no funciona en un momento dado como ya te digo voy a instalar voy a meter la librería de jquery para gestionar eventos porque me parece que para gestionar eventos pues realmente vale la pena pero también te voy a decir que dentro de lo posible salvo para esa cuestión concreta es algo para gestionar eventos voy a intentar reducir al mínimo el uso de frameworks externos más que nada para no empezar a meter mogollón de frameworks que al final no sepamos qué es lo que hemos hecho nosotros qué es lo que hace jamás típicos lo que hacen los frameworks les voy a intentar programar digamos al nivel más bajo posible al nivel más purista posible yo soy poco purista pero voy a hacerlo así digamos para intentar reducir la dependencia de frames de desarrollo externos al máximo posible vale a continuación lo que voy a hacer es crear un contexto en una variable de javascript llamada contexto y voy a decir que la variable contexto es document punto jet element by amy es decir quiero un elemento del html según subir y subir el lienzo evidentemente y ya que tengo cogido el lienzo a continuación voy a poner punto de contexto 2 de siempre que programó esto a continuación uno ya sabemos que estamos en javascript y por tanto las líneas deberían acabar en punto y coma siempre vale voy a cerrar un poquito esto para trabajar con más comodidad entonces lo que he hecho ahora es crear un contexto para trabajar en dos dimensiones y siempre que hago esto algún alumno me pregunta oye si hay dos de también hay tres de mi respuesta es sí vale vamos a empezar ahora trabajando en 2d y yo también voy a decir lo siguiente y es que hacer un juego en javascript con canvas en 2d es factible digamos a mano trabajando haciendo los cálculos ahora veremos los cálculos trigonométricos a mano se puede hacer perfectamente es decir la complejidad intelectual es abordable por cualquier persona ahora las transformadas de 3d son prácticamente inasumibles para cualquier persona entonces de cara a hacer videojuegos 3d no recomiendo trabajar con el canvas puro en 3d sino que recomiendo usar una librería que se llama por ejemplo ce y punto js para hacer juegos en 3d vale pero no es lo que estamos haciendo ahora mismo vale simplemente para responder a la pregunta de si hay dos de hay tres de también si lo hay pero no es lo que vamos a hacer ahora mismo entonces ahora mismo que ya tengo un contexto delimitado ahora es cuando voy a empezar a crear cosas le voy a empezar a pintar en la pantalla voy a empezar un momento a demostrar que podemos pintar entonces si tengo ahí contexto vemos que de hecho contexto se ha creado como una instancia de un get con texto quiere decir que automáticamente pues se tiene una serie de métodos y de propiedades pongo punto fill vemos como aparecen ya vale en el desplegable los métodos de las propiedades voy a poner fin style es igual a como es una propiedad es un igual no es un paréntesis que está si fuera un método voy a poner por ejemplo red es decir el fill style es el estilo del relleno aquí dentro de estas comillas se admite cualquier color compatible con css con los 127 colores css o bien un color en formato hexadecimal o bien un color en formato rgb pero yo de momento para hacerlo fácil voy a poner red ya que a continuación voy a poner con texto punto y recto vemos que incluso si me quedé ahora mismo parado el propio programa me está un poco blando la chuleta me dice mira te voy a pedir cuatro parámetros el primero es la equis el segundo es la y el tercero es el wifi y el cuarto es el height un apunte esto que te voy a decir te va a dar mucha rabia pero es así que se va a hacer y es que en la xl y el punto 00 es la esquina superior izquierda eso quiere decir que la equis crece hacia la derecha esto es esperable pero la iv crece hacia abajo entonces eso es poco intuitivo porque generalmente esperamos que si la equis crece a la derecha la llegaría a crecer crezca hacia arriba pero no es así no lo puedo cambiar no lo he hecho yo así que no pasa nada simplemente pues en este caso como estamos trabajando con un método con una función pongo un paréntesis más que nada para diferenciar las propiedades de los métodos y ahora voy a decir que por ejemplo 10,10 2020 es decir voy a crear un rectángulo que empezará en x 10 y tendrá 20 de grosor y 20 de altura le doy a guardar le doy a recargar y comprobamos como tengo por aquí un rectángulo en la pantalla esta es una de las formas más sencillas que podemos utilizar vale ahora luego veremos por cierto voy a ir poniendo por aquí html5 canvas sheets y los chipsets las hojas de trampas son hojas de trampas que encontramos en internet entonces por ejemplo la hoja de trampas de html5 está muy bien la hoja de trampas de canvas este término 5 está muy bien porque nos dice todo lo que hay es decir cuando yo hago un field rect generalmente mis alumnos lo que suelen preguntar a continuación es ay qué guay que más cosas puedo hacer ya sé que puedo hacer un rectángulo vale que más cosas puedo hacer pues yo siempre digo que tener esta hoja a mano pues te viene bien para saber pues que podemos hacer tenemos rectángulos tenemos padres tenemos texto tenemos círculos también está por ahí el arq hay varios tipos de formas que podemos dibujar y por supuesto como te puedes imaginar y ahora le iremos a hacer eso también podemos cargar imágenes y pegarlas en el canvas vale estamos empezando con lo más sencillo y ahora evidentemente iremos a lo más complejo del momento es que me voy a dejar por aquí abierto en una pestaña para consultarlo cuando sea necesario el chipset de html5 canvas y mientras tanto me voy a venir aquí a esta pantalla a seguir trabajando bien como en cualquier lenguaje de programación como en cualquier lenguaje de programación un momento que voy a asegurarme que tenga la salida de audio en hoy en los auriculares muy bien vale como en cualquier lenguaje de programación hay comentarios y en este caso voy a empezar poniendo los comentarios pero comentarios de este tipo estamos en javascript los comentarios son como en cualquier lenguaje derivado 12 son como de java son como php como son como en fe son como en cualquier lenguaje como digo derivado de g voy a empezar poniendo comentarios los comentarios en principio parece que van a ser digamos bastante tontos pero este programa que empezado en sencillo ahora luego se va a complicar vale por tanto es bueno que nos vayamos acostumbrando a poner comentarios más que nada porque ahora mismo tenemos tres líneas evidentemente sabemos lo que hacen pero ahora luego dentro de un rato probablemente vamos tener 300 líneas y tenemos que tener un mecanismo digamos de cuando veamos el código de 32 líneas podría identificar qué es lo que hace cada cosa entonces yo recomiendo pues o bien escribiendo bien dictando bien con la metodología que sea pues ir creando comentarios para ir repasando ir viendo qué es lo que hace cada cosa capturamos el lienzo y lo introducimos dentro de una variable con texto amarillas y en definitiva ahora luego sabremos qué es lo que hace cada cosa pongo por aquí otro comentario y digo pero vamos a dibujar un rectángulo blanco bueno dice pero vamos entonces un poco aquí probamos vale y ahora viene una de las cosas más importantes que te voy a enseñar sé que suena pretencioso pero ya verás que es real entonces en cualquier videojuego del mundo mundial en prácticamente cualquier videojuego el 99% de los videojuegos hay un concepto muy importante que es el de la función de inicialización y el de la función de bucle la función de inicialización es una función donde se cargan las condiciones iniciales del juego y la variable la función de bucle es una función que va dando vueltas se va llamando a sí misma como ya te digo el 90 y el 99% de los videojuegos al final son un bucle que se va ejecutando de forma continua entonces yo voy a poner la palabra function para definir una función hay un nombre bastante común que es init vale con lo cual que podría llamar a esta función así y el logo podría crear otra función llamada loop entonces esta sería la función de inicialización y esta sería la función de bucle no me gusta llamar a las cosas en inglés más que nada porque cuando estás aprendiendo si ves function in it no sabes que puedes tocar y que no puedes tocar entonces yo lo que suelo hacer es ponerlo en castellano por ejemplo inicio y por ejemplo bucle y así por ejemplo cuando repasemos el código nos daremos cuenta de que function es una palabra que no puedo tocar con la regla es que si está en inglés es que no lo puedo tocar y si está en castellano es que no puedo tocar vale aquí arriba igual no lo he llamado contexto de hecho si miras videotutoriales en internet verás que muchas veces especialmente cuando activan lo hace alguien que es en inglés llama al contexto con texto pero yo lo llamo con texto porque así cuando ves esta línea tú sabes qué contexto lo puedes cambiar al nombre que tú quieras pero sabes que phil style no lo puedes cambiar porque si está en inglés es que no lo puedes cambiar para entonces por eso yo lo llamo esto función de inicio y entonces digo qué en la función de inicio cargamos todas las condiciones iniciales del juego pero sin embargo en la función de bucle aquí cargamos todo aquello que se va a ir repitiendo una y otra vez durante el juego entonces ahora a continuación lo que voy a hacer es lo siguiente bueno si hago esto voy a hacer un con solo yo tiene mucho de con soles luego ya los borro tiro con sole punto lo digo esta es la función de inicio y ahora vengo por aquí y digo esta es la función de bucle bien entonces guardo voy a inspeccionar voy a poner el inspector de código abajo por un tema de espacio más que nada y ahora si ejecutó el programa veremos que no pasa nada no se está ejecutando ninguna de las dos porque por una razón muy sencilla porque yo he declarado la función de inicio pero nadie ha llamado a la función de inicio entonces yo lo que tengo que hacer aquí es decir el inicio y esto lo que va a hacer es llamar a la función de inicio si yo ahora ejecutó me dirá ok esta es la función de inicio ahora arreglamos el tema del acento que se ve incorrectamente no pasa nada son lo de menos vemos que se llama la función de inicio pero nunca se está llamando a la función de bucle porque la función de inicio debería llamar a la función de bucle y ahora si nos damos cuenta tengo esta es la función de inicio y esta es la función de bucle esta es la estructura mínima que debería tener cualquier videojuego también recuerda lo que he comentado anteriormente y es que yo lo que estoy haciendo es una plantilla vale entonces bueno antes de continuar lo que voy a hacer también con javascript pero como veo que tengo un problema con los acentos pues voy a crear la típica de etiqueta meta charles set es igual a efe 8 simplemente para que el sistema x represente correctamente los acentos vale entonces y luego por otra parte desde un punto de vista estas visitas obligatorias dentro de la página valide como html válido para la w3c así que pues bueno tampoco está mal ponerla bien entonces si ya tengo la función de inicio si ya tengo la función de bucle ahora a continuación lo que quiero es que la función de bucle se repita entonces vamos a ver aquí puedo poner por ejemplo arrancamos la función de inicio y luego ejecutamos la función de bucle y guardamos recargamos y tenemos mismo de antes bien ahora como digo la función del bucle realmente ya se está llamando a sí misma es decir ya está diciendo lo que va a hacer y es que se llama bucle es porque evidentemente se va a ejecutar una vez y otra se va a ejecutar en bucle para eso tengo que hacer lo siguiente aquí arriba voy a crear una zona del programa llamada aquí voy a declarar las variables globales a todo el programa entonces como vemos el videojuego va a tener tres zonas la zona de declaración de variables globales la zona de inicialización de condiciones y la zona de bucle como te digo y te digo una vez más ahora haremos copias de seguridad esto que estoy haciendo ahora evidentemente en un momento dado tendremos que elegir un tipo de juego vale pero lo estoy haciendo un poco con la filosofía plantilla con la filosofía plantilla tal que no sólo te sirva para hacer un juego sino te sirve para hacer cualquier tipo de juego entonces por eso es por lo que estoy poniendo tantos comentarios para que luego pues al final digamos tú puedas esta plantilla y a partir de esa plantilla puedas crear el juego que quieras pero también es muy importante que el código que desarrollamos esté claro primero para que entiendas lo que estamos haciendo y segundo también para que luego puedas meter las manos en el código y puedas tocar lo que sea sabiendo lo que estás tocando de la forma más sencilla posible entonces voy a crear una variable temporizador bar temporizador una vez más que es temporizadores porque yo he elegido el nombre entonces ahora vengo aquí y en lugar de ejecutar el bucle directamente voy a decir temporizador es igual a una función de javascript time out que lo que hace es que ejecuta una función en un tiempo que va a ser 1000 milisegundos en javascript como otros lenguajes de programación el tiempo se mide en milisegundos con lo cual 1000 equivale a un segundo entonces fíjate lo que va a pasar ahora vengo aquí recargo y me dice arranco la función de inicio y un segundo después voy a poner 5000 milisegundos para que lo veas mejor eso es entonces aquí ponemos la función de inicio esperamos 5 segundos y hace paz y dice ejecutamos la función de bucle luego ya estamos viendo que podemos tener cierto control sobre lo que estamos ejecutando no ejecutamos cosas a lo loco sino que podemos elegir cuánto se tarda en ejecutar cada cosa en este caso le digo vendría aquí y ahora espera 35 segundos y entonces ejecuta me el bucle esta variable en principio al declarar a como bar ten en cuenta que javascript es un lenguaje de programación débilmente tipificado y eso quiere decir que en otros lenguajes fuertemente tipificados como por ejemplo java si yo pongo que esto es un in es un entero es que esto va a ser un entero y no va a ser nada más tiene entero y si esto es una instancia de un objeto pues aquí le pondría el tipo de dato de la instancia del objeto pero como esto es javascript y javascript es débilmente tipificado tú crees que al poner var temporizador esto va a ser un string o esto vas esto va a ser una variable digamos exacto entonces esto es una variable efectivamente a rellenar ahora entonces luego en el séptimo efectivamente cómo estás viendo hay dos parámetros donde uno es el que ya hemos comentado que es el tiempo de retraso de la ejecución que en este caso en este ejemplo son 5000 milisegundos y luego el primero y no porque yo lo diga sino porque el hecho fíjate que así es como ha funcionado que es el método que vamos a ejecutar y en definitiva la instrucción javascript que vamos a utilizar y efectivamente va entre comillas intentando ponerse en comillas y verás que yo hace años que no intentó ponerlo sin comillas pero al menos cuando hace años estaba con este tema pues no me funcionaba sin comillas y por eso lo pongo con comillas es extraño porque ya sé que tú dirías bueno si es un método porque no se pone sin las comillas porque al parecer comillas parece que estoy llamando a un string y un string no es la llamada a un método pero sin embargo fíjate que sí que requiere comillas eso para llamar a un método otra cosa es que yo podría poner lo que se llama en javascript una función anónima es decir una función en línea y entonces pondría function función así sin comillas y entonces aquí es empezaría a escribir el código si yo creo una función anónima que no se recomienda por otra parte pero que sepas que existe que se puede hacer eso es cuando entonces puedo librarme de las comillas pero si es para llamar directamente a una función como pues en este caso pues hay que hacerlo con comillas frase que parece un string pero realmente no lo es entonces ahora mismo voy a hacer lo mismo en el bucle entonces ejecutó el temporizador voy a ponerlo aquí cada un segundo voy a ponerlo aquí cada 1 segundo entonces guardo recargo y entonces arrancamos la función de inicio y no sé si estás viendo ahí el numerito del consola pero están apareciendo nuevas interacciones de la ejecución eso quiere decir que este código se está ejecutando y ejecutando este código parece que ahora mismo está funcionando correctamente no es perfecto le falta una cosa y es que como te diría yo el temporizador es algo así como cuando el despertador por la mañana te vuelve a sonar a los 5 minutos de haberlo apagado vale de 3 claro el problema es que si tú tienes varios despertadores y cada uno de ellos suenan los 5 minutos al final te serán un montón de despertadores y al final te explota la cabeza entonces antes de llamar a un nuevo temporizador es bueno eliminar el temporizador anterior y por eso usamos una función que jr time out se llama killer time out y claire thibout va a ser temporizador esto lo que hace es que voy a apuntarlo por aquí porque esto es una de las cosas que insisto queda luego se olvidará esta línea elimina el temporizador actual y entonces cuidado que aquí fíjate que me he dejado por poner un punto y coma eso no es bueno y de hecho aquí arriba también he dejado y pongo creamos un nuevo temporizador para volver a ejecutar el bucle bien entonces ahora el resultado es el mismo ahora verás que el estado es el mismo pero sin embargo como ya te digo internamente desde el punto de vista de uso de la memoria verás que es mucho mejor ahora por tanto una vez que tenemos esto es cuando a continuación vamos a empezar a hacer cosas ballet por cierto que hemos visto que temporizador le he puesto aquí arriba porque es una variable global todo el programa lo que quiere decir que existe aquí es decir existe en todas las partes del programa ahora como tengo un rectángulo quiero parametrizar un poco su comportamiento y para ello voy a hacer lo siguiente paramétrico la posición del rectángulo de ejemplo y entonces digo bar x es igual a 2 256 bar y es igual a 256 y eso lo que va a hacer es que voy a poner el fill recto aquí y aquí pongo la equis y la dieron entonces guarde recargo y ahora veremos que a continuación aparece un rectángulo aquí y cada vez que pasa un segundo el sistema lo que está haciendo es volver a pintar el rectángulo ahí está pintando el rectángulo en el mismo sitio pues ahora para hacer que este ejercicio empieza a tener un poquito de diversión porque hasta ahora mismo no está siendo muy divertido vamos a hacer que el rectángulo se mueva entonces para hacer que el rectángulo se mueva yo vengo por aquí y digo function bucle y para hacer este ejemplo para hacer este ejemplo voy a hacer que x es igual a x bueno se puede poner más igual el abreviado es más punto random librería matemática el más punto random es un número aleatorio que va entre 0 y 1 y pongo menos 0.5 es decir si el número aleatorio va entre 0 y 1 si le quito 0.5 irá entre menos 0.5 y más 0,5 vale ya así pues es simétrico con respecto al 0 y ahora hago lo mismo con el la y ahora vamos a ejecutarlo y ahora de ejecutarlo entonces lo vas a ver pero el rectángulo se empieza a mover no lo ves aunque yo creo que ahora ya se sabe no lo ves por la sencilla razón de que estoy ejecutando estoy refrescando la pantalla cada segundo es decir para que te hagas la idea tú que entiendes de fps es en los juegos y ahora mismo estoy creando un juego de un fps osea desastroso ballet pero si yo quiero aumentar los efectos de este juego yo cojo este time out el 1000 lo recortó a 100 milisegundos y por tanto ahora tengo un juego que se va a ejecutar a 10 fps es todavía no es algo espectacular pero bueno pero yo que sé pero ahí estamos entonces ahora no sé si lo estás viendo pero el programa lo que está haciendo es no se va pintando a la vez bueno un pequeño defecto de el juego ahora mismo de efecto oro según se mire hay veces que nos viene bien pero es que el juego no está eliminando no está borrando los fotogramas anteriores es decir cada vez que yo paso por el bucle y pinto no le estoy diciendo que quiero borrar lo anterior está pintando encima y por eso estarás viendo que lo que está haciendo es dejar un rastro así que ahora a continuación lo que voy a hacer aquí en el bucle es crear una línea de código que va a ser con texto punto clear y rect y clear rect desde cero como a cero hasta 512 como 512 o sea x y anchura y altura lo que hace es borrar vale lo que hace es limpiar entonces y ahora recargo y ahora voy a poner esto a 100 fotogramas por segundo vale y así verás el recuadro moverse mejor yo creo que ahora verás el recuadro un poquito pues moverse con más soltura verás vamos a ver aunque no te lo parezca ese cuadro ahora en un momento se va a convertir en nuestro personaje y de hecho ahora en un momento veremos que también pues no sólo se va a convertir en un personaje sino que se va a convertir en varios personajes y se va a convertir en nuestro personaje protagonista y se va a convertir en varios personajes npcs supongo que entiendes el término en epc de jugador digamos controlado por la máquina vale entonces qué ocurre yo estoy haciendo algo yo he empezado a hacer algo que no es muy recomendable que es crear por aquí una variable global x y una variable global y entonces como te digo el objetivo es que empezamos a planificar digamos nuestro código para que luego crezca lo mejor posible entonces yo sé que un personaje va a tener x va a tener y igual tiene también z y va a tener vida y energía y va a tener un skin iba a tener maná y va a tener una serie de cosas vale entonces crear variables no es muy propio y luego aparte si creó 10 variables ya las tengo creadas pero cuando tenga que crear 100 personajes tendré que crear mil variables y eso no va a ser nada óptimo entonces llegados a este punto es donde vamos a ver que la programación de los videojuegos es uno de los entornos donde más se utiliza aunque parezca mentira pero donde más se utiliza la programación orientada a objetos entonces para eso lo que voy a hacer es crear una clase eso es lo que va a hacer en apariencia va a ser complicar un poco el código pero esa complicación más adelante vamos a ver cómo realmente vale la pena pero mucha complicación realmente pues recompensa sobre todo porque voy a empezar creando una clase en la que voy a crear propiedades y peor todavía voy a crear métodos pero ahora luego veremos que hacerlo así a encapsular en clases nos permitirá trabajar mucho mejor esto qué quiere decir pues lo que quiere decir es que voy a crear por ejemplo aquí que las personaje y aquí en las personas pues lo que voy a hacer es introducir diferentes propiedades a ver lo que acabo de hacer es como te digo crear la clase personaje esto lo quitamos porque esto ya no vale en la clase personaje yo defino que el personaje va a tener un constructor dónde va a tener las propiedades de x day y dz pudieras como es posible que tengamos zetas y el videojuego de momentos 2 d porque la verdad es que vamos a hacer un videojuego 2 5d y el tipo bueno vamos a poner más qué tipo voy a poner al momento color vale ahora luego personalizaremos un poco lo que queramos y pondremos vida energía y todo eso pero para hacernos una idea entonces en el momento lo que voy a hacer es que aquí donde pone de dish punto tipo pues voy a hacer de punto x es igual a más random x 512 es decir cuando el personaje cuando distanciamos digamos un personaje automáticamente va a tener una posición inicial y elvis punto color voy a poner pues de momento efe 00 que es de momento es un color rojo esto lo que hace es que de momento como te digo ya lo cambiaremos cuando creó un personaje pues automáticamente al nacer tener una posición aleatoria y de momento tiene el color rojo y luego ya le cambiaremos el color bien apoyada por el bucle a 33 y es hora que vaya a 30 fotogramas por segundo vale pero el segundo inspeccionamos el error de consola exes notifight ahora tengo un error evidentemente porque la x la he convertido a un parámetro de una clase y ahora estoy llamando a una equis que no existe con lo cual voy a eliminar esto porque no existe porque evidentemente da error y lo vamos a convertir bien ahora yo vengo por aquí y digo el valor personaje 1 es igual a new personaje y entonces con esto lo que tenemos ahora si es que tenemos un personaje creado en la pantalla y ahora lo que puedo hacer es lo siguiente conocer el contexto punto un punto o phil recta y dijo personaje 1 x como personaje 1 punto y como 2020 ahora le pondremos también pues la altura sobre lo que queramos bien esto por aquí vale vamos a ver qué sale de momento ok bien ahora mismo el personaje no se mueve con lo cual yo ahora podría cambiar la posición del personaje aquí en el bucle pero no es lo correcto no es lo correcto porque cuando creamos una clase es para que en la medida de lo posible todo aquello que ocurre en la clase se quede dentro de la clase entonces yo ahora debería venir aquí y debería poner function 99 personaje vale llamarlo 9 y voy a decirle que vamos a ver si x es más igual a más punto random 0.5 así que y esto se lo recargo no va a hacer nada identifier vale mueve un momento ok ya lo tenemos está en esa posición inicial claro mueve no se está ejecutando por qué pues porque yo he declarado un método pero yo en ningún caso estoy llamando al método entonces lo que voy a hacer es personaje 1 punto 9 y por tanto ahora lo que estoy haciendo es ejecutarla el método guardamos y recargamos y ahora el personaje se mueve es decir tenemos lo mismo que teníamos hace un rato pero ahora es mejor y la razón por la que ahora es mejor es simplemente porque digamos ahora está gestionado por una clase y yo te voy a decir una cosa y quiero que sepas y ya hemos hablado anteriormente que yo soy una persona muy poco purista con el tema de programación orientada a objetos es decir no es que haya metido el tema de las clases porque me guste más o me guste menos trabajar con orientación objetos pero en este caso en el desarrollo específico de videojuegos el trabajar con clases y al trabajar con instancia es el trabajar con objetos viene muy bien cara no lo parezca porque ahora tenemos un solo personaje pero cuando tengamos ahora a continuación múltiples personajes en la pantalla veremos que este esfuerzo vale la pena cada poco tiempo tú verás que yo lo que voy a ir haciendo es comentar aquello que me he dejado sin comentar pues claro yo estoy viendo por aquí pues líneas que no deben estar sin comentar como por ejemplo esta de aquí al principio de cada bucle como borramos el lienzo anterior valdés voy a ir poniendo creamos una plantilla para un personaje voy a ir llenando el código de comentarios notamos el personaje de una serie de propiedades iniciales que explotamos y en fin creamos un método para gestionar el movimiento del personaje y más adelante vamos a externalizar método solo lo verás pero de momento lo tenemos así bueno pues si hemos hecho esto vamos a comprobar cómo haber creado clases haber creado una clase realmente nos va a ayudar muchísimo nos va ayudar una barbaridad cuando no queremos hacer un personaje sino que queremos hacer muchos personajes entonces para esto yo lo que voy a hacer es lo siguiente venimos por aquí en lugar de crear un personaje voy a crear una variable llamada número personajes es igual a 100 negocien diego 10 digo mil lo que sea luego lo cambiamos ya la creó una estructura de control for para decir formar y es igual a 0 y es menor que número personajes punto link es decir no perdona número personajes y ya está y ahora vengo por aquí y digo y más vale y ahora vengo por aquí y digo bar array personajes voy a crear un array voy a crear una colección es igual a new arrai y ahora digo array personajes d y por qué pues porque estoy usando el valor y para enterar es igual a new personaje eso quiere decir que yo no acabo de crear un personaje acabo de crear 100 personajes y cada personaje con sus propiedades y cada personaje con su método y esto quiere decir que yo ahora vengo por aquí y ahora vengo técnicamente esto debería estar esto fuera por supuesto técnicamente esto debería estar aquí dentro de inicio porque es realmente donde estamos definiendo qué es lo que pasa al principio del juego entonces eso podía moverlo ahí vale y ahora vengo por aquí y ahora vuelvo a repasar el número de personajes y digo personaje barra y personajes de iu punto 9 es lo que hace es mover a todos y cada uno de los personajes 1 y luego contexto select vamos a ver a rey personajes de iu x-raid personajes de punto y déjame que ponga estos cinco y cinco porque si no veremos nada en la pantalla así que ahora guardo recargo este código puede resultar bastante confuso por la sencilla razón de que tenemos que ver que esto que estamos ejecutando lo estamos ejecutando dentro de un bucle por y el bucle for lo que está haciendo es recorrer toda la matriz entonces yo de momento lo que voy a hacer es que voy a anular un momento el bucle for voy a indicar solo que quiero de la raíz de todo la raíz quiero el índice cero y aquí pongo cero y aquí pongo cero guardo recargo y entonces verás que solo hay un elemento en pantalla eso qué quiere decir lo que quiere decir es que yo en memoria he metido un array de personajes pero luego lo que estoy haciendo que he creado otro bucle for por cierto lo que estoy haciendo es que solo estoy moviendo de todo ese array el elemento que tiene el índice cero y luego lo único que estoy haciendo es pintar de todo ese rey el elemento que tiene el índice pero yo a continuación podría venir aquí y decir vale ahora también quiero que de la rai el elemento que tiene el índice número uno se mueva primero se mueva y luego me lo pinte entonces verás como ahí hay dos elementos moviéndose si yo tengo cien elementos en el array yo ahora tendría que copiar estas dos líneas y pegarlas cien veces y empezará a cambiar los números para que se movieran los cien personajes pero claro tú imagínate que yo era cambiara el número de personajes de 100 a 1000 tendría que repetir esto por 1000 y evidentemente no sería cómodo no sería una buena práctica desde el punto de vista de escribir el código entonces una vez que tenemos que lo que estoy haciendo es no llamar a todo el array sino llamar a cada uno de los elementos de la rai porque yo no puedo ejecutar la instrucción 9 en toda la raya tengo que ejecutar uno a uno de los elementos lo que hace el bucle es llamar uno a cada uno de los elementos de la rai entonces el bucle for lo que hace es crear una variable y luego evidentemente lo que hago reemplazar el 0 por él y en la primera interacción será cero en la segunda interacción será uno en la tercera y está de acción será dos y lo que hago es que me aseguro de que repasó uno a uno todos los elementos de la matriz y ya te digo me da igual que hacían me da igual que ya me verá igual que haya 50 es decir si ahora vengo aquí y cambio 50 pues el bucle foro va a entrar por 50 elementos y si yo vengo aquí y pongo 500 por recargo y verás que ahora tengo 500 personajes en la pantalla sólo bueno que tiene el bucle foro es que da igual cuántos elementos tengan en la raíz porque los va a alterar a todos entonces ahora lo que voy a hacer es poner un comentario y tenemos en todos los elementos de la rai uno a uno y realizamos las operaciones vale es importante que además de poner comentarios el código vaya quedando lo más limpio posible esto que estoy diciendo ya sé que parece que no tenga ningún sentido pero cuando el programa crezca y tenga centenares de líneas de código el que el programa esté bien estructurado y las sangrías estén correctas y esté con bien comentado será muy importante entonces voy a poner aquí creo una instancia del objeto personaje dentro de cada uno de los elementos de la rae de la raíz no de la raíz pero bueno el dictado tiene sus dirigentes de la colección porque no debería usar a raya digamos el consuele punto log yo creo que lo podemos quitar porque ya sabemos lo que hace vamos a ver y ahora pongo aquí ahora lanzó la ejecución del bucle o que la misma forma esté con solo punto lo podemos quitar porque yo creo que ya tenemos claro lo que hace vale y vamos allá y ahora yo creo que más o menos lo tenemos ya bien tenemos ahora mismo pues bien al final la hora luego lo iremos cambiando cien personajes en la pantalla hay un parámetro muy importante al mismo están moviendo muy caótica mente vale hay un parámetro muy importante que es el ángulo hacia el que camina cada personaje es decir es el ángulo es si tú cambias hacia delante o si quieres hacia la izquierda o si genera de la derecha llegados a este punto de la clase vamos a trabajar un poquito con trigonometría electrodo ya sé que suena mal sé que suena duro sé que es una matemáticas pero es que crear videojuegos programar videojuegos requiere programar un poquito de matemáticas es inevitable así que voy a intentar hacerlo lo más suave posible pero quieras que no puso al final de cabo no deja de ser un poquito de conceptos de trigonometría antes de ello evidentemente lo que tengo que hacer es introducir la variable dirección a los parámetros del constructor del personaje entonces yo le voy a decir que disputó dirección es igual y ahora te voy a decir que tú estarás acostumbrado muy probablemente a trabajar con grado sexagesimal es que son los grados que van desde 0 hasta 360 grados pero en javascript como en la gran mayoría de lenguajes de programación de eso ciertamente se trabaja en radiales en todos los radiales son esos que una vuelta entera son 2 pirra viales vale entonces voy a poner más punto x 2 x más punto random y eso es lo que va a hacer más punto random y eso es lo que va a hacer es que cada personaje tenga una dirección diferente y entonces lo que voy a hacer es que en el 9 en lugar de más punto random voy a hacer más puntos coseno de la dirección vamos a verlo verás dentro de la dirección yo lo que quiero para empezar es honrando y cuando digo random lo que quiero decir es que quiero que cada personaje tenga una dirección aleatoria que unos vayan hacia la izquierda que otros vayan hacia la derecha pero random es un número que va desde 0 hasta 1 y yo quiero digamos entre comillas como que vaya desde 0 hasta 360 pero en javascript no hay 360 en javascript la forma de decir una vuelta entera del círculo es pi por 2 porque trabajando en radial es una vuelta entera ya decir más y por 2 quiere decir vuelta entera del círculo pero al multiplicarlo por más punto random lo que estoy haciendo es decirle que algunos irán a 90 grados otro si nada 180 y otros ganan 270 otros irán a 45 grados vale pero que usted no es digamos establecer una aleatoriedad sobre este parámetro de aquí que es una vuelta entera del círculo vamos a verlo endesa ahora si vengo por aquí más puntos y dentro de lo que es la trigonometría eso sí hay una regla nemotécnica que es muy sencilla que siempre acordarse o siempre en la gran mayoría de las veces acordarse que el coche no va con la equis y el pse no va con la y una regla sencilla vale entonces le doy al guardar le doy a recargar y vamos a observar como el cuidado dirección this punto dirección porque no es una biblia global sino que es una variable propia de este objeto vale vamos a verlo entonces y ahora si ahora hacemos esto veremos que ahora cada partícula tiene una dirección diferente y además también lo que encontramos es que cada partícula cuando llega al final digamos del juego dromo pues desaparece porque yo no he dicho ningún momento que la partícula colisión es bueno pues lo voy a decir así que voy a crear un método llamado colisión y dentro del método colisión lo que voy a hacer es que reconozca las paredes y que colisione vale yo creo por aquí el método colisiona y el método colisiona pues va a hacer lo siguiente tiff x es mayor que 512 de punto x es menor que cero es decir necesario por la derecha por la izquierda en este caso es punto dirección es igual y de momento perdón voy a poner más igual este momento a más punto pin una vez más recordemos porque tú era me dirás que quiere decir que a la dirección le sume más puntos y recuerda que en grados en radian es más punto p y equivale a 180 grados y 180 grados es pégate la vuelta vale es justo ves hacia el lado contrario pues por eso esto de aquí aunque no lo parezca quiere decir ves hacia el lado contrario ahora voy a hacer lo mismo con la y de hecho podría hacerlo aquí perdón pulsando el botón que no toca this punto y es menor vamos a ver vamos a verlo vamos a ver vamos a primero comprobar si esto funciona y ahora cambió este 512 por un número paramétrico que será más seguro voy a recargar primero aquí vamos a comprobar cómo vamos a ver así vale muy bien es que hay una cosa muy divertida y es que nadie está llamando a colisionan entonces voy a llamar a colisión ok recargamos vale de punto colisión ok sí también si él sirve para llamar a los métodos de el propio objeto ahora vemos como efectivamente los personajillos que están empezando a rebotar por la pantalla vale y empezamos a ver que pues bueno pues por ejemplo los límites de este 512 están definidos por este 512 que yo he puesto antes y lo cierto es que cuando yo hago un juego lo que me gustaría es que si yo como te diría yo sí yo redimensionó la pantalla a ver venga señor reciben sólo la pantalla me gustaría que el juego ocupará toda la pantalla automáticamente estoy al ahora al cien por cien entonces para ello voy a hacer lo siguiente vamos a ver pero vamos a dibujar un rectángulo blanco no era blanco era rojo pero bueno esto lo eliminamos variables globales del programa ok vale y ahora vengo por aquí y digo lo siguiente de igual anchura pantalla o anchura navegador es igual a windows punto inner con un reconducen es inner wifi bar altura navegador es igual a windows punto y nerja entonces con esto lo que estoy haciendo es detectar realmente cuál es la anchura del carga de la pantalla aprovechó también para aquí en el css decirle en el body que quiero margin 0px padding 0px él es más que nada para que no haya ese margen cillo sino que se pegue a la esquina vale por cierto me he cargado el color rojo ahora lo volvería a poner no pasa nada bien y ahora lo que quiero es que vamos a ver documento punto get element by heidi lienzo punto y yo pongo por aquí height es igual a altura de navegador y de la misma forma igual tengo que hacer un set height ahora veremos y pongo wef es igual a anchura navegador guardo recargo y ahora si te has fijado ahí lo que ha hecho es que ya no está respetando ese esa anchura de 512 sino que lo está extendiendo hacia lo que toca a los entiendo hacia todo lo grande o lo pequeña que sea la pantalla y de esa forma ahora la pantalla es más adaptable pero claro cuidado bueno para empezar en el boli voy a poner overflow hidden para que no me saque las dos barras extras de scroll y luego también hay otras zonas de la pantalla y otras zonas del juego donde hemos utilizado ese número de 512 empresa ahora vengo aquí y anchura navegador altura navegador y también por aquí en este de aquí altura navegador y en su navegador y entonces ahora recargo y ahora el juego es más seguro da por cierto aquí también anchura altura navegador y anchura navegador era el juego es más seguro desde el punto de vista del que era igual cuánto mide la pantalla porque sé que el juego se va a adaptar a la pantalla vale con lo cual efectivamente ya que creamos estas dos variables para parametrizar pues luego las podemos utilizar en un montón de sitios diferentes vale a continuación yo ahora mismo tengo que cuando un personaje coge una seguidilla digamos cuando un personaje coge una dirección pues no la suelta entonces yo por ejemplo lo que voy a hacer es decirle al sistema que disputó dirección es igual a más punto random menos 0.5 eso lo que va a hacer es que los bichos no vayan siempre en línea recta sino que vayan cambiando un poco a poco su dirección web perdón más igual vale más igual para que a su movimiento pues exacto y para que no vayan todos hacia la derecha realmente entonces ahora si coges uno por ejemplo y lo sigues con la vista puesta darás cuenta de que pues cada uno tiene su dirección pero aparte la moviendo antes de continuar con el desarrollo del juego hay una cosa que me gustaría empezar a ver en cuanto a rendimiento ahora mismo tenemos que el juego lo estoy poniendo a 30 fotogramas por segundo es decir el site i'm out está a 33 vale ahora luego podemos cambiarlo a 60 fotogramas por segundo a 120 lo que sea pero yo sobre todo lo que quiero ahora mismo es echarle un vistazo no parece perderse lo tengo aquí en performance aquí abajo me voy a performance le voy a decir guardar y lo que está haciendo el sistema es algo muy importante que es hacer un profile o lo que es lo mismo un perfil lo que están haciendo es sacar cuánto está consumiendo este juego ahora mismo no va a consumir mucho te lo digo ya o sea ahora mismo el resultado va a ser positivo va a ser satisfactorio voy a darle stop y vamos a ver que lo que ocurre vamos a ver lo momento según dyn ahora sale la pantalla momento vale lo que ocurre es esto sale una gráfica en la cual se me dice momento sube en la cual se me dice que pues bueno de toda esta tarta el amarillo es scripting la programación el morado es rendering para pintar cosas en la pantalla el verde es painting vale también para pintar literalmente los cuadrados y el resto del tiempo en una persona s grillo el sistema y el gris clarito es nada es a la verdad es que quiero que lo veas abajo pondrá idle vamos a ver por ciento un poco sobrecargado si no puedo ver si lo puedo bajar con esto y del ballet qué quiere decir ir el idl quiere decir que el sistema está haciendo literalmente la nada entonces que el juego ahora mismo tenga tanto idle es bueno porque no está haciendo o sea nos sobran ahora mismos recursos nos sobran recursos porque estamos empezando el juego esto más adelante evidentemente nos van a sobrar recursos vale entonces simplemente lo que te quiero decir es que es bueno que de vez en cuando saquemos el profiling y comprobemos que no nos estamos quedando sin recursos porque entonces tendremos que replantear lo que estamos programando otra cosa que podemos hacer aparte de un profile de recursos de procesador es sacar un profile de memoria entonces sacó un hip hop shot ya hablaremos de esto le damos aquí a cargar snapshot y no realmente porque yo lo que quería era sacar la memoria que estoy consumiendo a propósito lo encontraré a mira aquí esta memoria ahora parece nada aquí vale esto es lo que está ocurriendo esto es lo que está ocurriendo es que nuestro juego ahora mismo está consumiendo lo ves aquí no sé si lo ves pues un máximo de 19 megas de ram y aún así para la chorrada de juego que es podríamos decir que es bastante pero bueno pero es lo que hay vale entonces una vez más tenemos que saber un poco nuestros jugadores que tienen entonces si nuestros jugadores tienen no se sabe 2 gigas de ram 4 gb de ram y yo estoy gastando 19 megas de ram yo sé que muy bien vale yo sé que no estoy sobresaturando los recursos pero en el momento de que mis jugadores tengan 2 gigas de ram y yo esté gastando 500 megas de ram para un juego yo diré cuidado porque igual consumo la memoria de mis jugadores y el juego va lento los dispositivos se calientan o para intensa ver el que vale entonces hacer un juego como ya te digo pues no es sólo disfrutar no es solo ver cosas guays en la pantalla sino que también pues hay que saber qué recursos gasta lo que estamos utilizando en el juego y tenemos que intentar siempre pues intentar que el juego no consuma más de lo debido vale entonces ahora mismo como te digo los números no salen fantásticos pero porque estamos empezando a medida que vayamos complicando el juego tanto desde el punto de vista gráfico como desde el punto de vista de la lógica tendremos que ir entrando aquí para comprobar que seguimos teniendo el control vale verás voy a cargarme un momentín voy a cargarme un momento la dirección y voy a decir que la dirección de todas las de todos estos bichitos digamos esto lo voy a hacer temporalmente algo lo restauró es igual a por ejemplo 0 es decir todos los bichitos van a ir hacia delante pero luego cuidado porque cambian aquí vale es perfecto dirección vale fenomenal no cambia nada luego quitaré esta línea se ha hecho para probar me confirmarán que es cierto que todos los distritos van hacia la derecha correcto de los diferentes tipos de videojuegos que hay este juego que estamos trabajando ahora mismo es un juego econométrico es decir se ve como desde arriba un poco clash of plants si quieres vale y ese tipo de jugabilidad es perfectamente válida no te digo que no hay otros tipos de juegos que son los juegos y sometí cos isométrico game entonces bueno son este tipo de juegos de hecho en los juegos de tipo isométrico tiene una transformación teóricamente de 33 grados que complica bastante la jugabilidad de estos juegos esto es los juegos isométricos los videojuegos isométricos en lugar de trabajar con una isométrica pura de 33 grados trabajan con una geometría simplificada de 30 grados y eso hace que incluso si busco aquí creo que está en la wikipedia está aquí si busco hasta en la wikipedia veré qué hasta en la wikipedia podemos encontrar aquí la función de conversión de axón o métrico a isométrico que es básicamente esto de aquí yo tengo esas funciones preparadas por aquí en otro juego entonces te las voy a aquí te las voy a copiar el ahí te las voy a pegar ahora verás que aumentan donde está iso x las tengo por aquí vale ok entonces vengo por aquí pero estas dos funciones por aquí por ejemplo al final y eso dice que si tú me das un punto con su x eso y esta función y su x te devuelve la equis en un espacio isométrico sabes cómo te lo convierte a un juego isométrico y si tú me das con la función y soy y la x le y si pones esta fórmula me devuelve la y como te digo no sé si ves por ahí el partido 2 estas funciones no me las he inventado yo sino que se han sacado de la wikipedia de hecho cuando lo consulte no estaba en la wikipedia sino que las consulten en una página de matemáticas para videojuegos pero fíjate que hasta en la wikipedia tiene esta fórmula que te estoy mostrando con esto lo que te quiero decir es que lo que te estoy mostrando no es como una fórmula oculta que me sacaba de la manga sino que es una fórmula que se puede consultar prácticamente en cualquier parte no voy a entrar ahora mismo demasiado en profundidad en el funcionamiento de esta fórmula porque sí que te digo que comprender esta fórmula ahora mismo para ti será difícil es mucho más sencillo que la pongamos en función y tú tranquilo que con el tiempo la comprenderás mejor entonces yo de momento la pongo ahí ya tendremos tiempo para volver a esta fórmula y explicar la mejor pero de momento la pongo ahí como recurso vale y ahora te vengo aquí arriba vamos a ver y cuando pinto voy a decir vamos a ver y su x de array personajes x a rey personajes y como voy a ponerlo en líneas diferentes para que lo veas mejor porque este código se está empezando a complicar y ahora hizo y personajes de x personajes y 55 esto es la componente x esto es la componente y esto es la anchura y esto es la altura que es lo que va a ocurrir ahora si recargamos el videojuego pues lo que va a ocurrir es que los personajes fíjate que ya no se van y esos que hacen ahí se separan hablamos de ellos momento entonces fíjate que ya no se van hacia la derecha no se si lo ves que es como si estuvieran en un espacio en una rejilla en una diagonal efectivamente mira para que lo veas mejor lo que voy a hacer es poner una rejilla de fondo y eso también no pasa nada porque se quedan ahí paraditos ahora hablamos de ellos ahora los sacamos de ahí pero lo que voy a hacer es de enseñarte a programar una rejilla y de paso empezamos a poner imágenes que estamos jugando con cuadraditos pero ahora veremos que este proyecto probablemente vamos a armas si ponemos alguna imagen vamos a ver lo que voy a hacer es poner alguna poner isométrica un grid game cuidado porque corro el riesgo probablemente de alguna rejilla que sea falsa isométrica pero bueno perdón quería decir una rejilla que sea verdadera isométrica cuando la que quiero es una falsa isométrica quiero claro exacto eso es exactamente eso quiero que sea de 30 grados no de 33 a ver si no cojo esa y ya luego veremos qué hacemos con ella vale abra imagen me la guardo en aplicaciones no en el escritorio en porque hay capturas de pantalla videojuegos vale y lo guardo aquí como rejilla punto jpg que es lo que voy a hacer bueno pues como te digo lo que voy a hacer ahora es en condiciones iniciales pasaje ah variables globales imagen rejilla es igual a new email esto es un objeto preconstruido de javascript así que digo imagen rejilla punto src es igual a no me acuerdo como lo llamado sinceramente creo que rejilla verdad notas de jpg las tensiones jpg pero la rejilla punto j jp demás rejilla punto jpg entonces ahora lo que voy a hacer es que justo después de la quilla recta voy a decir con texto punto draw image donde en 0 voy a dibujar la imagen rejilla y eso lo que va a hacer y eso lo que va a hacer es que cuando arrancó el juego un momento hola algún error quizás tal vez vamos a verlo sí vamos a ver te cuento hay un problema es no es del tipo matar muy bien imagen rejilla new image imagen sf vale ahora mismo estoy cargando este objeto directamente al navegador para trabajar correctamente desde las imágenes debería estar trabajando en un servidor de internet hay un truco evidentemente que es montar en nuestro propio ordenador una aplicación de servidor yo en este caso estoy utilizando una aplicación un momento que restaure estoy utilizando una aplicación llamada map digo mamá porque estoy trabajando en mac pero es esta aplicación de aquí pero para windows y para linux hay una aplicación llamada sesión que hace lo mismo vale entonces estas aplicaciones cuando las instala es que está para windows linux y para mac cuando las instaladas lo que hacen voy a ser un momento brackets es que te crean un servidor local entonces voy a hacer lo siguiente por poco esta carpeta de videojuegos que está en el escritorio la voy a meterle el servidor correcto me voy a aplicaciones en mi caso está dentro de mamá dentro de ht docs la voy a pegar ahí y ahora cuidado porque tengo que evitar el archivo que está dentro de esa carpeta no el archivo que estaba en el escritorio parece una tontería pero mucha gente se equivoca en eso entonces arrancamos brackets con ese archivo aquí le digo que quiero cargar ok les digo que quiero cargar localhost en mi caso 88 que es la dirección de este servidor videojuegos vale bien entonces este momento ahí lo tenemos y nos sigue dando error nos sigue dando error pero no hay ningún problema vamos a ver nos dice que la página en la línea 73 que es esta de aquí contexto otro email y es imagen rejilla vamos a ver dragon age vale que es perdón es de los que está al revés imagen rejilla 0 ok vayamos a través y ahora sí si nos fijamos pues vemos ahí los ficheros moviéndose no se mueven perfectamente no 6 lo ves parece que se va yendo de una línea a otra y eso es porque en principio parece que esta rejilla que me descargado es una rejilla puramente isométrica y no falsamente isométrica pero bueno no pasa el momento me la voy a quedar de hecho ahí puedes empezar a ver cómo no coincide vale pero no pasa nada algo que puedo hacer también te digo es recurrir a algún programa de ayuda en este caso voy a utilizar el gimp que supongo que alguna vez lo habrás utilizado si yo estoy dando un curso como por ejemplo en este caso de programación de videojuegos voy a intentar sacar los menos programas posibles vale para al final no sacar mil programas diferentes y marearte pero en este caso el gimp es un programa de mucha ayuda otra cosa que te voy a decir es que técnicamente el trabajo de videojuegos la persona lo hacen varias personas hay uno que es el programador otro que es la grafista para entonces técnicamente toda la parte de gráficos es más de la gráfica pero bueno hay cosas que tenemos que saber hacer entonces vengo por aquí voy a no pues no sé si en el gym se pueden crear directamente rejillas crear no hay insertar pero listo y ahora voy a crear eso sí como la rejilla era muy dura voy a crear una rejilla una imagen blanca la voy a bajar un poquito de opacidad voy a exportar esto como rejilla jpg nuevo jpg y entonces lo voy a reemplazar lo voy a reemplazar jpg lo reemplazó para que sea más agradable vale ahí lo tenemos de hecho lo he hecho un poco abajo y parece que casi de coña he acertado así que bueno pues suerte que he tenido vale vemos como los bichitos se están moviendo ya en un entorno isométrico ahora haremos que cada uno recupere un poco su libertad y también otra cosa que voy a decirte es que bueno hay páginas donde hace un momento hablábamos del tema de el perfil de programador y el perfil de la pista y en este caso quiero quitar ya los puntitos y quiero empezar a meter personajillos no quiero ponerme ahora a diseñar personajillos porque es otro tipo de curso porque para no desviarnos del objetivo de programar un videojuego desde momento de momento lo que voy a hacer es ir a open game art y dentro de que tú por ejemplo en mi curso de blender has visto como incluso en ese curso he diseñado un personaje para videojuegos vale sobre todo en la última parte del curso pero como ya te digo es posible no hayas llegado pero bueno el objetivo como te digo es ahora hacerlo lo más rápido posible entonces me voy a esta página que es open game arts punto o hereje voy a buscar isométrica buscando isométrico pues voy a buscar pues ya te digo un personajillo incluso de fíjate empieza algo que no se debe evidentemente pero isométrico gamer carácter lo digo porque los assets que hay en no venga y marc pues son libres los que hay en google pues no necesariamente tienen por qué serlo pero bueno debe acoger uno hay mira que únicos pues ya estará uno de estos no tendrán transparencia supongo pero bueno entonces voy a uno de éstos te los voy a bajar me lo voy a bajar a videojuegos me lo voy a guardar como personajes y ahora voy a editarlo un momento en gimp simplemente para uno de ellos el qué elige uno vamos a el ángel vamos a proporción 1 a 1 ok quien me lo copió y me lo pongo pero archivo crear desde el portapapeles vale le voy a quitarla el fondo más o menos y una sombrilla vale y ahora me lo voy a guardar como vamos a llamarlo personaje 1 punto png le damos a exportar ok muy bien y ahora venimos por aquí ahora vemos por aquí y ahora voy a empezar a cargar vengo por aquí y oye bar imagen personaje uno es igual a new image y digo imagen personaje 1 punto de src es igual a personaje 1 punto prg si quieres aquí voy a poner en esta zona cargamos las imágenes que vamos a utilizar en el videojuego y así ya sabemos que todo lo que hay aquí a continuación pues son las imágenes bien personaje 1 y esto quiere decir que ahora ya por fin me libro digamos de la del horrible phil recta este de aquí y voy a poner contexto punto draw image no me fijado en el tamaño del personaje solamente será gigantesco preocupes entonces draw image quiero imagen personaje 1 coma la x la y de hecho si quieres voy a eliminar este fill recto esto lo voy a poner en varias líneas porque si no es muy largo y no entenderás qué es lo que está ocurriendo ahí es lo mismo que teníamos antes efectivamente pero buenos juegos de claridad y esto lo voy a sangrar también correctamente para que luego sea más fácil d vale vamos a ver si todo ha salido correctamente no tenemos personajes gigantes la pantalla vale le falta en 85 aquí esto sí aquí le falta un paréntesis ok salen personajes gigantescos pero por lo menos ya tenemos personajes en la pantalla por lo menos ya tenemos digamos te digo a personajes graves digamos ahora lo puedo hacer más pequeño en emails 6 a ver drouin mira tengo por aquí el canvas sit vamos a verlo y michigan wing x y altura y anchura ahí lo tenemos vale pues voy a poner un 30 y algo así para que el personajillo pues me salga más pequeño y salga más controlable bueno una vez que tenemos esto vamos a ver el método de draw image técnicamente y para hacer esto no es que lo diga yo sino que me voy a ir aquí precisamente al chip tiene mínimo tres parámetros que son la imagen la posición x y la posición y opcionalmente el qué no estamos en un trabajo bidimensional pero opcionalmente tenemos el wef y el height tenemos la anchura y la altura si yo le pongo tres parámetros lo que va a hacer es el tamaño original de la imagen pero claro la imagen era un poco gigantesca tal y como la tenía yo vale entonces claro lo que ocurre en este caso evidentemente es que como te diría yo pues momento pues yo quiero que la imagen sea más pequeña entonces por eso verás que en lugar de utilizar la sintaxis de un archivo de tres parámetros es utilizado la sintaxis de cinco parámetros donde es imagen x y anchura y altura y por eso tengo imagen x y anchura y altura esa es un poco la lógica dentro de que el personaje realmente se puede mover como nos dé la gana esto es otra de esas cosas que te digo que las vamos a hacer de plantilla yo te las voy a dejar preparadas para que luego hagas lo que quieras con ello si yo ahora por ejemplo desató esto desató lo de la dirección es igual a cero quiere decir que cada personaje se va a mover como quiera vale vas a ver que cada personaje se va a mover absolutamente como quiera dentro de ese entorno y no hay ningún problema es decir ahí hay videojuegos isométricos donde los personajes se mueven libremente aunque están en un entorno isométrico como te digo no hay ningún problema por ello pero luego hay otros videojuegos donde pues si estás en un entorno isométrico pues el personaje se mueve hacia adelante hacia atrás izquierda derecha porque para eso está sin energía isométrica pero si a continuación lo que voy a hacer dado que ya tienes en la pantalla funcionando es que los personajes se muevan en cualquier dirección yo lo que voy a hacer es enseñarte a que se muevan en la dirección las direcciones isométricas luego si quieres pues ya desactiva ese código como tú quieras entonces vamos a ver cuando trabajamos la dirección cuando trabajamos la dirección lo que vamos a hacer en todo caso es decir que en lugar de admitir diferentes direcciones solo vamos a admitir cuatro direcciones posibles que son adelante atrás izquierda y derecha entonces en este caso lo que voy a hacer es lo siguiente vamos a ver aquí donde pone dirección voy a decir dirección isométrica y entonces dirección isométrica de punto dirección isométrica fíjate que no te estima sacando el parámetro de dirección por si luego lo quieres utilizar vale otro parámetro es igual a más punto random x 4 y a continuación voy a hacer más punto round por qué pues porque el más punto random nos da un número con decimales pero yo no quiero decimales yo quiero que sea 0 1 2 o 3 sin decimales y por eso he puesto el round entonces ahora a continuación morentín ahora a continuación lo que voy a hacer es decirle al programa lo siguiente vamos a ver if this punto dirección isométrica es igual a cero en ese caso pasará una cosa el tiff dirección isométrica podría hacer un switch también te lo digo pero bueno pero con eso sirve al final es lo mismo el if y yo creo que ya 0 1 2 y 3 bien en tres digo de punto dirección this punto dirección es igual leches es igual a cero this punto dirección es igual a más punto de partido 2 o sea 90 grados esto es más punto p o sea 180 grados y es más y realmente esto es por 1.5 perdón x 1.5 entonces vamos a verlo y yo creo que lo tenemos ya lo vamos a aceptar y como verás ahora a ver en principio los personajes menos ese que está por ir un poco escapado pero los personajes se mueven o en una dirección o en la otra no sé por qué se está escapado he visto uno que estaba un poco escapado y se movía como quería diagonal en diagonal no sé por qué pero bueno sí puede que sea pero fíjate éste va descaradamente su rollo va a haber un segundo valero espérate escaparte o que vale no es round es flor porque el round puede redondear a 4 pero el flor siempre redondea hacia abajo y ya había cometido un error matemático ahora si vemos como cada personajillo pues se va moviendo únicamente en esas direcciones y ahora lo que voy a hacer es que pues bueno el personaje digamos se pueda se puede ir cambiando vamos a ver entonces voy a hacer una cosa dirección verdadera ok del punto de dirección verdadera no es igual a más punto random menos 0 partido 5 y ahora lo que voy a hacer es lo siguiente ahora lo que voy a hacer es lo siguiente en lugar de decirle dirección isométrica lo que voy a decirle es que si la dirección está entre 0 y 90 en ese caso dirección es igual a 0 si está entre 90 y 180 en ese caso dirección es igual a 1 y así con cada uno vamos a verlo entonces yo digo sí this dirección verdadera mayor claro es que esto no me sirve esto no me sirve porque el ángulo va a ir variando el ángulo va a ir variando vale lo que puedo hacer en esto no lo que puedo hacer es dirección isométrica es igual a más flor se van a volver un poco con los personajes ahora lo verás pero bueno vamos a verlo de momento para probar vale porque cada uno de ellos va a intentar ir en una dirección diferente voy a hacer una cosa lo que voy a hacer es que los personajes cambien de dirección cada poco tiempo si más que cada equis segundos lo que voy a hacer es que bueno voy a crear un contador de tiempo cuando digo un contador de tiempo quiero decir que tengo equis y dirección de su métrica color no quiero poner la palabra vida porque se ponga a vida tú entenderás que es como energía vale entonces lo que voy a hacer es un travelling tiempo nacimiento el tiempo que hace desde que ha nacido entonces this punto tiempo nacimiento es igual a cero y ahora cada vez que se mueve bis punto tiempo nacimiento más igual a 1 es como que pasa un segundo digamos es como que tienes una unidad más de tiempo en tu vida y entonces ahora lo que voy a hacer es decirle lo siguiente sí tiempo nacimiento porcentaje de 100 a cada 100 segundos es igual a 0 en ese caso y sólo en ese caso y ahora comento esto en ese caso cambia tu dirección qué es lo que va a hacer bueno pues lo que va a hacer momento en tiempo nacimientos notifight this punto tiempo cimiento lo que va a hacer es que cada 100 segundos de la vida del personaje cada 100 unidades va a cambiar de dirección no se lo has visto pero cada 100 han cambiado de dirección voy a por el comentarios que hace rato que no los pongo pero por lo menos pues tenemos ya en la pantalla pues como te diría yo unos personajillos para poder empezar a trabajar con ellos ahora los ponemos un fondo ahora vamos a buscar un personaje que tenga las cuatro vistas para poder hacer como que vaya girando y todo eso entonces ahora de momento lo que voy a hacer eso sí vale vamos a comentar unas cuantas cosas pues lo que hago es que voy a copiar aquí prueba un sumatorio como saca esto vamos a ver aquí le indicamos al programa que el personaje cambia de dirección cada 100 unidades de vida aquí el dictado me acaba de enviar a pastar pues sí totalmente para luego haremos el dictado ahora mientras tanto una cosa estamos pintando imágenes quiero hacer otra prueba de carga ahora con imágenes no te creas que va a salir mucho más desfavorable pero sí que quiero hacerla más que nada para comprobar cómo está ahora esa gráfica para comprobar que una vez que me estamos metiendo 100 personajes también te lo digo o sea estamos tirando bastante alto o sea que quieras que no cien personajes el programa calculando el comportamiento en fin personajes pues eso pesa o sea que evidentemente podríamos bajar el número de personajes pero bueno también quiero cargar un poco pues para que veamos como el ritmo mientras tanto voy abrir una pestaña nueva voy a sacar isométrica pues que pacta un por ejemplo vale eso me trick background game o algo así algo como esto algo como eso vale no sé vamos a esto ok muy bien hay por ahí una esto el fondo vale interest también evidentemente lo que vamos a hacer en siguientes versiones de este juego es esto bueno sabes que me recoge igualmente vale pues también en esto es el fondo también lo que tenemos que hacer es que los personajes no se caigan por el acantilado y reconozcan la colisión con los objetos vale pues eso es lo que haremos en las próximas clases entonces ahora vengo por aquí vamos a ver el fondo voy a echarle un momento con fire fue con gimp vale voy a recortar un trozo ok más adelante lo que haremos es que nuestro juego construya su propio terreno ya lo verás pero de momento trabajar con esto así que le digo sobreescribir lo cargo ok y ahora digo vara puedo copiar y pegar código por cierto a ver cómo ha ido el análisis está ahí abajo tengo que subirlo muy bien imagen fondo vale fíjate que ya no es tan bueno como antes pero bueno todavía es aguantable imagen fondo esto es fondo jpg vale voy a hacer una cosa en el bucle contexto brow image imagen fondo y tuvieras que esto no sirve para nada porque lo que yo voy a hacer es que estoy machacando la imagen del fondo con la rejilla pero lo que voy a hacer ahora es que en el king en la rejilla voy a abrir la rejilla le voy a decir en capa transparencia color alfa y eso es lo que hace ah y eso lo que hace rejilla a punto no y eso lo que hace es guardarme la con transparencia valentín que está guardando sé dt momento hay y entonces lo que va a hacer es ponerme la imagen de fondo momento y por encima la rejilla un segundo que parece que no el fondo jpg en rejilla punto png ahora si la ley entonces ahí verás que ya tenemos los personajillos que están empezando un poco pues a correr por ahí por todas partes donde pues evidentemente lo que queremos es que los personajillos pues ahora a continuación corran con más control cuando digo más control quiero decir que no se salgan de esta zona que colisionen con los árboles que coleccionan entre ellos y en definitiva que podamos empezar a hacer misiones no olvidemos que esto que estamos haciendo al final es un videojuego y un videojuego tiene que haber una misión tiene que haber lo que se llama una condición de finalización y una condición de pérdida de juego vale 3 de momento nos estamos centrando en el que el juego funcione digamos a nivel de que el código funcione tenemos personajes fíjate que al final no hemos utilizado todavía la librería jquery tenemos personajes que van ellos solos tenemos une peces no hemos creado todavía el nuestro que vamos a controlar mediante las teclas del teclado o mediante el movimiento del ratón o mediante lo que sé entonces todo esto como te digo es lo que estamos acción en la clase de mañana que es crear nuestro personaje restringir a los npcs crea situaciones de ganar y de perder y con eso tendremos ya nuestro primero juegos en marcha ok