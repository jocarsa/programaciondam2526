hola isa a ver te cuento un poco esto entonces se llama método el crm en módulos verás que en el crm a los códigos están los nuevos pero los códigos no se re vinculan automáticamente sino que los nuevos han reemplazado los antiguos y la nominación ha cambiado con lo cual a la verás que por ejemplo gestión de un pequeño comercio pues es tutoría a efe de técnicas de almacenes grupo dos de uno friday es decir han cambiado vale entonces la cuestión es la siguiente para revincularlos yo tengo la pantalla partida en dos entonces aquí por ejemplo me voy a ir a todos los cursos me voy a ir a capítulo online me voy a ir a formación reglada me voy a ir a marketing me voy a ir a marketing de primero y yo tengo una serie de módulos los voy a abrir en diferentes pestañas luego por ejemplo aquí en módulos que puedo filtrar y puedo filtrar de tal forma que me voy al curso académico 2020 2021 ciclos marketing cursos un primero grupo no y modalidad distancia vale y le voy a buscar en curso grupo no a distancia vale y te cuento vamos a ver por una parte los códigos para revincularlos módulos aunque parece que están técnicamente no están los correctos porque al meter los nuevos en lugar de los viejos la numeración ha cambiado y por tanto no se revelan automáticamente entonces yo aquí voy a hacer una cosa aquí en los módulos en el crm yo lo que hago es que seleccionan los de 2020 2021 de mar por ejemplo de marketing de primero grupo no modalidad distancia y filtro y tengo unos cuantos módulos tengo un salón de anuncios del inglés formación esto está realmente en un horario común y todo eso pero bueno vale ahora vengo aquí y en el mood el capital online marketing publicidad primero vale y entonces clic clic abro las pestañas y ahora aquí también abro las pestañas quiero decir que clic clic clic y tengo pestañas en un lado y pestañas en otro vale entonces yo vengo y digo esto que es el tablón de anuncios vale pues el tablón de anuncios el short code esta long de anuncios de marketing y publicidad pues aquí busco está los anuncios de marketing y publicidad sigo que viene ahora pues o lo puedo hacer si quieres caminar al revés es decir que viene ahora tablón de anuncios vale ahora gestión económica y financiera gestión económica y financiera aquí busco gestión económica y financiera y le doy a modificar me voy a ajustes de la parte que no esté reiniciado me voy a ajustes del curso me voy a gestión económica y financiera busco esto en económico y financiera y ya lo tengo y sigo cierro aquí ahora que es investigación comercial vale pues a la herramientas del módulo ajustes del curso e investigación comercial dónde está investigación comercial la investigación comercial está allí y buscó aquí investigación comercial a verlo de hecho exacto es el nombre del show recorto estoy cogiendo saldrá igual realmente se coge igual vale es lo mismo investigación comercial vale lo importante es que siempre haya un elemento filtrado esto que es marketing digital la mía entonces ajustes del curso o bien por nombre o bien por nombre corto me voy a marketing digital media marketing digital que está ahí le voy a modificar ahí busco marketing digital y ya lo tenemos vinculado y ahora políticas del marketing y políticas de marketing code políticas políticas está ahí el verde políticas de marketing y por último inglés técnico de marketing de primero ajustes del curso y me voy inglés técnico y ahora cuales debe ser horario reservado para hacer inglés supongo entiendo no lo sé a ver quién es la profesora es debe ser sonia entonces amarilla ok entonces pues entonces es este entonces no sé cuál es bueno pues mira a ver inglés cuál es porque ahora mismo no sé si inglés técnico es horario reservado o inglés técnico es inglés normal vale míralo cuando puedas pero básicamente este es el método de revincular las asignaturas con los nuevos nombres de sort names bueno voy a ir empezando entonces tenemos por aquí el robot que hemos construido de momento voy a enfocar un poco la cámara y vamos a ponerlo en marcha y al ponerlo en marcha vamos a observar cómo aparentemente le voy a poner el grupo de alimentación que estoy aquí vale vamos a ver como un principio gira para girar para y en principio este no parece que sea el comportamiento que nosotros esperamos ahora parece que tira hacia adelante y cuando pongo la mano delante es cuando para gira y a continuación empieza a ir hacia adelante hemos visto cómo ha hecho unas cuantas iteraciones ahora pongo la mano delante otra vez para girar y ahora de nuevo vuelve a continuar en ocasiones no lo hace es porque tengo la sospecha de que estamos al límite del vamos a quitar por aquí venga al límite del amperaje lo que es desactivarlo momento y para ello para solucionar ese problema es para lo que tengo por aquí preparado este segundo grupo de alimentación porque creo que dentro de un rato nos va a hacer falta pero ahora de momento lo que vamos a hacer es ampliar las funciones que tiene nuestro robot y por eso he traído por aquí vamos a ir añadiéndole más componentes y por eso como digo he traído por aquí pues un componente tal y como por ejemplo un servomotor por una razón muy sencilla y es que ahora mismo el sensor de ultrasonidos lo tenemos aquí delante pero yo lo que quiero es que el sensor de ultrasonidos haga un poco como una especie de radar es decir quiero que el robot pare vamos a abrir el arduo vino y ve para aprobar esto que estoy diciendo quiero que el robot avance un poco y entonces quiero que pare y una vez que ha parado quiero que haga un escaneo y entonces elija cuál es el punto en el que tiene menos obstáculos y entonces se dirija hacia ese punto pero esto evidentemente pues empieza a ser un programa ya complejo entonces no es una sola cuestión de meter componentes en la placa sino que además tenemos que programar los correctamente entonces vamos a por ello tenemos por aquí el arduino y de vamos a verlo vamos a abrir reciente robot ultrasonidos valen bien tenemos el proyecto del otro día y lo voy a guardar no voy a guardar como el número 25 robot ultrasonidos 2 porque de esa forma lo que vamos a hacer es mantener lo que ya teníamos pero ampliarlo con lo que vamos a hacer a continuación entonces ahora dentro en el bucle y lo que voy a hacer ahora es modificar este programa para que haga lo que yo quiero entonces vamos a ver a continuación entre el bucle voy a hacer un separador de éstos voy a ponerme aquí ahora voy a escribir en pseudo código lo que quiero que haga el sistema y voy a decir primero quiero que el robot avance no quiero las actualizaciones ahora mismo los que luego a voto avance vale después de que avance está aquí después de que avance ahora quiero que pare quiero que paren y luego lo que quiero ahora quiero que el servo 180 gire 180 grados al girar 180 grados quiero ir escuchando lo que el ultrasonidos tiene que decirme este sería el bloque que tengo aquí a continuación voy a moyá de momento apagar este bloque esta operación es muy delicada lo estoy haciendo es de momento apagar este trozo de código y ahora giro las ruedas en función lo que me diga el sensor de ultrasonidos y a partir de ahí ahora el programa volvería entonces como resumen de lo que había hecho hasta ahora yo lo que quiero a continuación es que una vez que tengo este conjunto en movimiento lo que quiero es incorporar este servomotor de para que en primer lugar el robot realice un avance a continuación quiero que pare a continuación quiero que el servo de 180 que es este de aquí el nuevo que voy a poner gire 180 grados que haga una batida quiero escuchar lo que el ultrasonido tiene que decirme y luego giro las ruedas en función de lo que me diga el sensor entonces lo que he hecho es escribir esto a ver el momento vale entonces ahora lo que voy a hacer es introducir código dentro de estos grandes bloques de código es decir esto que estoy haciendo es un estilo de programación muy interesante que se llama pseudo código la idea es primero decir lo que quieres hacer en un lenguaje en el que tú lo puedas entender para luego poco a poco dejarte las pistas para rellenar con el lenguaje correcto vale entonces vamos a ver por una parte copio estos dos bloques de código es decir primero quiero que el robot avance porque sabemos que en este caso pone en marcha el motor izquierda es decir tenemos los comentarios que hemos ido dejando anteriormente y esto lo quiero durante un segundo durante tres segundos me esperó tres segundos ahora quiero que pague entonces quiero que pare quiere decir que copio este bloque los pongo los dos a 90 y me espero no sé un segundo espero un segundo antes del siguiente bucle ahora a continuación voy a lanzar esto a la placa por cierto para comprobar que lo que va a hacer ahora es avanzar para vale vamos a ir comprobando paso a paso qué es lo que tenemos voy a ver si tengo un problema de alimentación si tuviera un problema de alimentación lo que haría es aumentar apoyar con doble fuente de alimentación pero de momento vamos a ver no de hecho casi obligatoriamente en el momento en el que hago así con cuidado bueno esto allí arriba bueno no te escapes vale vamos a ponerlo ahí bien voy a lanzar el sketch cargándose en la placa y ahora comprobamos que es cierto que avanza 3 segundos para un segundo avanza 3 segundos para un segundo ya tengo realmente lo que quiero tengo de momento lo que necesito ahora lo que quiero es que el servo 180 gire 180 grados voy a parar esto de hecho voy a quitar la alimentación voy a quitar el usb y ahora como digo lo que quiero es que este cacharrito el cervo 180 gire 180 grados vale entonces para ello voy a hacer lo siguiente en primer lugar lo voy a atar al puerto número 4 para aquí en la placa lo meto en el puerto número 4 y ahora voy a programarlo entonces cuando digo que voy a programarlo quiere decir que creó un nuevo servo observo motor 180 y digo crea una nueva instancia del cerco para el motor derecho el motor izquierdo para el motor 180 vale ahora lo que voy a hacer es decirle al sistema que fort int y es igual a 0 y es menor que 180 y más quiero que mediante esta estructura de control de bucle la hemos visto anteriormente en las clases que lo que hace es realizar una serie de recorridos quiero que motor derecho punto no motor 180 puntos right day y ahora a continuación quiero un delay en cada uno de estos pasos quiero un delay no sé de vamos a probar con 50 milisegundos vale entonces lo que va a hacer es avanzar parar el servo va a tirar y otra vez a empezar por cierto el motor aquí el motor 180 lo asocio al puerto hemos dicho que el 4 el motor 180 lo asocio al puerto 4 ahora luego iremos limpiando estos comentarios y vamos allá vamos a probarlo a ver si funciona conecto la placa lanzó el sketch vale y ahora avanza para por el momento ay caray vale está haciendo algo bastante extraño en principio está haciendo algo bastante extraño vamos a ver y es motor 180 estoy asegurando porque ahí tengo ese motor que está girando y se ha quedado como frito voy a darle más alimentación a ver qué es un problema de alimentación así que parece que sea un problema alimentación y ahora sí ahora está girando gira 180 y entonces las ruedas lanzas vale el motor 180 realiza un barrido y las ruedas avanzan con lo cual ahora el cervo gira como podemos ver realiza un barrido quiero que el barrido sea más rápido voy a ponerle un delay de 10 lo vuelvo a lanzar vamos a ver el vídeo ahora las ruedas lanzan hacen allí un extraño moya para iniciar a lanzan paran ahora esto realiza el recorrido avanzan para el servo realiza el recorrido ok vale de momento esto está yendo bien las pilas le dirían quedan pocas pilas vale no pasa nada porque tengo más pilas entonces ahora a continuación lo que voy a hacer es decirle al sistema que el motor al final del todo el motor al final del todo quiero que se quede en 90 vale y que el motor se quede en 90 para que el motor siempre se quede mirando hacia adelante entonces le vuelvo a conectar el grupo de alimentación o así es que se ha desconectado ahora luego me va a hacer falta soldar ahora pongo el vídeo pero parece que tengo un problema de conexión voy a tener que soldar ya si tengo algún problema y esque este cable verde se ha desconectado y voy a tener que soldar lo para que se quede bien cogido he conectado el soldador entonces básicamente pues aquí en este borne bueno para empezar mientras el soldador se va calentando esto d esto de soldar con las pilas puestas pues no es muy bueno el primero que voy a hacer es quitar al menos esa pila ya que es la pila que estaba justo en ese borne el resto igual me dará un poco más igual pero esa pila es justo la que se puede sobrecalentar y evidentemente no quiero eso vale entonces voy a preparar un poquito de estaño y ahora cuando se caliente le pegamos el punto de soldadura y continuamos con el diseño de cómo esto va a encajar en la parte de adelante del robot lo que quiero es que el robot no mire siempre hacia adelante para no mirar en esa dirección siempre sino que avance pare y entonces haga un recorrido de a ver que tengo alrededor entonces que decida dónde le conviene más ir si hace falta que gire y a partir de ahí que siga caminando es un proyecto ambicioso desde el punto de vista no ya del hardware sino de la programación es un proyecto que nos invita nos empuja a pues mejorar nuestros conocimientos de programación y obligarnos a hacer un programa entendible entonces vamos a ver estoy esperando a que el soldador se caliente yo por el olor que hace yo creo que ya está más o menos caliente todo entonces y estaba caído una gota kata plans cada lunes pero me da menos yo creo que ahora sí yo creo que ahora sí yo creo que ahora ese punto está ahí sólido con lo cual voy a apagar el soldador momento el caso es que era luego es probable que suelte un poco más pero de momento pues con eso ya tengo para al menos un rato ahora tengo que esperar a que pues eso un par de minutos a que esa soldadura se enfríe y una vez que tengo esto es cuando vamos a pensar cómo hacer esta parte de aquí vale y es que una vez que tengo esto pues él en ultrasonidos vaya escuchando en cada uno de estos momentos y decida cuál es el punto que más le conviene para eso es para lo que en la clase del jueves pasado estuvimos hablando de matrices porque hoy vamos a usar las matrices en este ejercicio vamos a ver cómo va la temperatura yo creo que está dentro de los parámetros normales vale entonces vamos a poner el vídeo y esto viene aquí vale extraño aquí esto fuera y vamos allá lo pongo muy bien avanza y vemos como hay un fallo de alimentación así que voy a apoyar con esto y lo traemos ahí lo tenemos bien voy a lanzar este sketch ya que creo que no está actualizado qué dice el dispositivo no está configurado parece que el puerto haya cambiado vale pues voy a lanzarlo no es normal pero es posible ahora para que si bien y fijémonos como ahora el serbo se queda mirando hacia delante realiza un mono una batida realiza una batida y vuelve al sitio perfecto para esto de momento ya está haciendo lo que quiero ahora lo que quiero es que este servomotor esté montado al principio del robot y que ya ahora viene lo difícil y que este es el motor contenga el sensor de ultrasonidos eso es lo que realmente va a ser lo edificio bien en este caso lo que voy a hacer de momento es desactivar la alimentación voy a desactivar la alimentación vale y vamos a trabajar con esto de aquí el otro día pegué esto espero que se pueda despegar que parece que va a estar bueno difícil pero no imposible menos mal venga se ha dejado despegar y es lo que voy a hacer es que voy a poner este servo aquí este servo va a estar aquí y necesito pegar de alguna forma ahora veremos como esto aquí delante vamos a ver esto así al revés más que nada porque esa parte es la más corta como lo voy a hacer pues lo voy a hacer evidentemente con pegamento voy a el pegamento no tenía aquí hace un momento justo ahora y aquí está voy a el pegamento voy a pegar vamos a pegar esta parte de aquí le pegamos esta parte lo voy a pegar hace voy a pegar aquí voy a pegar lo más recto que pueda y ahora voy a dejarlo unos pocos segundos con los dedos puestos para que se acabe de pegar y a continuación mi problema es el siguiente mi problema es que la superficie del servomotor apunta hacia arriba o sea está apuntando digamos hacia arriba pero el servomotor es perdón pero el ultrasonidos la superficie que ahora veremos que pega está hacia adelante qué es lo que necesito pues necesito una ele cuando tengo este problema es un problema clásico lo que necesito es una ele que quiero decir con esto ahora veremos que yo creo que puedo soltar esto ya vale ahora veremos que en esta superficie está mirando hacia adelante pero en este servo la superficie en este ser bueno en estos tres sonidos la superficie que quiero pegar está hacia adelante vale demos cuenta esta superficie mira hacia arriba esta superficie mira hacia adelante claro yo no puedo pegar esto así porque si lo pego así el ultrasonido se está mirando hacia arriba yo no quiero que el ultrasonidos mire hacia arriba no me sirve de nada quiero que el ultrasonidos mire hacia adelante vale entonces tengo que una l vale tengo que poner una l para conseguir que arriba se convierta hacia adelante cómo puedo hacer una ele pues realmente con cualquier tipo de mecanismo entonces una cosa que tengo por aquí ahora iría por unas tijeras es precisamente la caja del pegamento el embalaje del pegamento y en el embalaje del pegamento resulta que si nos fijamos en esto de aquí pues hace una l ahí con lo cual voy a ir a por unas tijeras a por unas tijeras de cocina además grandes a ver que parece que esto se está cayendo voy a asegurarme que se mantenga fijo vale pues como decía voy a ir a por unas tijeras para aprovechar este plástico podría aprovechar cualquier otro material es decir seguro que en casa tendrás o bien en metal o bien en plástico alguna l de plástico y si no seguro que puedes algún elemento y doblarlo y tener de esa forma yo sí mirando por aquí por mi mesa a ver si tengo alguna pues eso alguna otra cosa pues era por ejemplo también estoy viendo vamos a ver también estoy viendo que tengo por aquí una cajita que hemos usado en clases anteriores de hecho la usamos para los restos de la soldadura y claro esta cajita que es de cartón esta cajita que es de cartón pues también tiene una l entonces pues no sé igual puedo algo de esto a ver aquí también hay una ele de cartón o sea esto de aquí es una l de cartón grueso la idea es que si buscas seguro que hay algo que tengas por ahí a mano muy momento por unas tijeras y con las tijeras voy a cortar un trozo de este cartón es un vale es un adaptador de apel de corriente pero en definitiva ya lo he usado con lo cual pues no sirve para nada esta caja momento voy a por unas tijeras y ahora como digo lo que voy a hacer es no se ve pero estoy cogiendo las tijeras por aquí están por la parte de atrás correcto y voy a recortar estoy recortando y recortando no se ve pero lo estoy haciendo y después de hacer esto pues tengo esto tengo una l ya está una l así de sencillo y ahora lo que quiero voy a recortar un poco más para adaptar es la forma de uno a la forma del otro vamos a recortar un poco más la l tengo cartón de sobra con lo cual si me equivoco demasiado al recortar pues siempre puedo recortar otro trozo voy a recortar un poco más por aquí tengo esta lista le puedo poner aquí y ahora como vemos en esta parte de aquí pues ya puedo pegar correctamente vale va a recortar un poco más y tengo eso de ahí y yo creo que con eso creo que recortado demasiado vaya pero creo que con eso ya tengo una ele como para poder pegar allí el sensor vamos a verlo dónde está el pegamento voy me lo ha dejado abierto y mal bien entonces voy a poner por aquí una línea de pegamento le pego del cartón le pegó el cartón mantengo un poquito con el deber como es cartón digo yo que pegara rápido y ahora en la parte frontal es donde voy a pegar esto con cuidado porque está estirando un poco pero bueno es normal vale es donde voy a pegar esto aplicar un poquito más pongo por aquí un poquito de pegamento que hice un poquito dice un poquito bastante pero pegó aquí de lante y ahora sí mantengo esto apretado unos agua que se me despega unos largos segundos espera ahora tengo que mantener esto pegado para que el adhesivo haga su función porque cuando estaba pegando la parte de delante y se me estaba despegando la parte de arriba esto ya sabemos que hasta que el pegamento se hace duro pues pueden pasar unos largos minutos entonces lo que voy a hacer es que yo primero pero esto lo dejo pegando se lo dejo endureciéndose y ahora en cuanto lo tenga pues nos iremos a aunque sabe despeja nos iremos a la parte de la programación me da miedo sin soltarlo porque se está despegando vale allí más o menos ya empieza a estar a ver si hay suerte y no se despega demasiado voy a dejar un poco ahí al caer y así un poco puede quitar las manos y me puedo dedicar a programar y no estamos hay una hora con mis dedos puestos en el ensamblaje sin poder hacer nada más vale bueno muy bien que esto está un poco girado más y ahora con cuidado ahora vamos a hablar un poquito de la programación tampoco quiero poner este ensamblaje ya en marcha va a mostrar al menos media hora y vamos a ir programando porque si lo pongo ahora en marcha y esto se pone en marcha seguramente el pegamento se va a despegar y no quiero eso vale entonces mientras que esto está solidificando ahora que debajo del cartón sabemos que está el servomotor de 180 grados pues vamos a seguir programando entonces vamos a ver porque lo que teníamos hasta este momento era que me pongo en marcha el motor izquierdo dónde está la sangría aquí ok pongo en marcha motor izquierdo pongo en marcha por un derecho espero tres segundos quiere decir que los motores que están en marcha tres segundos a continuación pongo los motores en parada es decir a 90 grados lo que hago es que me espero un segundo antes del siguiente bloque y entonces ocurre estoy aquí ahora el motor si hace falta lo que haré es hacer que esto ocurra más lento esto es un poco lo de menos el motor de 180 va girando poco a poco desde cero hasta 180 y ahora en cada lectura lo que tiene que ocurrir es que en esta lectura indique cuál es aquí está indique cuál es la distancia de hecho este bloque me lo voy a cargar porque este bloque es el que define el giro del motor y ahora mismo no quiero girar entonces me cargo todo este bloque de código este es el bloque que quiero entonces en cada uno de los giros quiero me diga qué es lo que tengo en ese giro me diga qué es lo que tengo en el ultrasonidos y ahora lo que va a hacer es que para cada uno de esos giros del servomotor de 180 me va a decir cuál es la distancia pero y qué entonces cuando digo y que quiero decir que quiero hacer algo con esa distancia de esas distancias yo lo que quiero hacer es averiguar cuál es la distancia más corta perdón al revés cuál es la distancia más larga porque la distancia más larga es la buena entonces ahora voy a escribir un trozo de código este trozo de código siendo sencillo va a ser difícil de entender y por eso me voy a esforzar mucho en explicarlo voy a implementar una estrategia que se llama la estrategia del mejor candidato la estrategia del mejor candidato es súper común en el mundo de la programación no es una estrategia de arduino es una estrategia de programación entonces vamos a ver como decía vamos a implementar esta estrategia del mejor candidato que como digo no es esto te voy a explicar no es de arduino si no es de programación y ahora digo mejor ángulo es igual a cero y digo mejor distancia es igual a 10.000 millones mucho cuidado evidentemente si hago esto es porque arriba en las declaraciones tengo que crear un int mejor ángulo es igual a cero un momento y en mejor distancia vale recordemos que esto tiene que existir en las declaraciones de las variables ahora mejor ángulo es igual a cero mejor distancia es una muy grande y ahora digo lo siguiente cuando imprimo la distancia digo sí a distancia es menor que mejor distancia en este caso esto es lo importante en ese caso mejor distancia es igual a distancia es decir actualizo la mejor distancia y mejor ángulo es igual ay al final de todo esto ahora viene un poco la cuestión es print no es sería el punto print que sepas que el mejor cuidado que la mejor distancia es sería el punto print mejor distancia y que sepas que el mejor ángulo que sepas que el mejor ángulo es mejor ángulo qué es lo que está haciendo esto pues lo que está haciendo esto es que pega una batida o sea pega una barrida y al pegar una barrida lo que hace es buscar en este sensor de ultrasonidos que como ahora veremos a continuación va a girar de un lado a otro lo que va a hacer es buscar cuál es la mejor distancia es decir cuál es la distancia más larga yo en este caso lo que digo mi criterio ahora mismo es que la mejor distancia es la más larga o sea la mejor distancia es aquella en la que el robot no encuentre un obstáculo cuando tenga un camino donde encuentre o sea que no tenga un obstáculo en mucho tiempo esa es la mejor distancia vale entonces con esto no lo voy a poner en marcha todavía porque esto aún se estaba pegando y me da un poco de miedo vale no quiero ponerlo en marcha todavía vamos a programar un poco más vamos a comentar el código y con esto lo que haremos es que una vez que haya averiguado cuál es el mejor ángulo ahora sí quiero oír esto ya lo tenemos quiero ir escuchando lo que el ultrasonidos tiene que decirme quiero que el cerco giren 180° así y quiero ir escuchando lo que los trans unidos tienen que decir me voy a poner esto en un comentario porque realmente esto es todo junto esto fuera muy bien y ahora vale y ahora tenemos este bloque de contenido este bloque va a ser difícil porque quiero girar las ruedas en función de lo que me diga el sensor de ultrasonidos vale entonces vamos a ver que hay dos casos de ruedas yo digo vamos a ver el caso en el que el mejor obstáculo está hacia adelante el caso en el que el mejor obstáculo está hacia la izquierda esto quiere decir ángulo de 0 a 90 y el caso en el que el mejor obstáculo está hacia la derecha que es ángulo de 90 hasta 180 yo podría decir incluso se podría decir incluso que esto podría ser de 80 a 100 esto podría hacer de 0 a 80 y esto podría ser de 100 a 180 vale para hacer como digamos tres rangos para hacernos a la idea entonces bueno voy a comentar un poco el código vamos a ver vamos a comentar un poco el código vamos a ver si podemos ponerlo en marcha antes de programar esto de aquí vamos a ver 9 % de momento ahora veremos a continuación y ahora amigo creo una variable para el mejor ángulo en cada barrido y la inicial hizo ahora creo una mejor distancia para cada barrido y la inicial hizo ahora aquí lo que hago es miro la distancia actual y me pregunto si es menor haber un momento a ver un momento no he hecho al revés creo es mayor que la a distancia mejor esto tiene que ser cero y esto es mayor que pero al revés en el caso de que sea cierto actualizó el valor de la distancia le asigno también el valor del ángulo es importante y bueno y espero 50 milisegundos pero 50 milisegundos antes del siguiente giro y esto de aquí no son más que mensajes de puerto serie para ver lo que sale para tener una cierta idea de si lo que está saliendo es correcto o no espero 100 milisegundos y devuelvo el servo 180 a mirar hacia adelante vale con esto ya puedo empezar a probar el código yo creo que está suficientemente sólido lo acabo de tocar creo que está suficientemente pegado vamos a probarlo me da un poco de miedo como ya sabéis pero bueno vamos a probarlo vale vamos allá a ver ahora pongo esto aquí y ahí vemos lo que está haciendo con suerte no se despega quiero esto quiero lanzar el programa vamos a ver un momento que me ha vuelto a cambiar el módem pero vemos cómo está haciendo lo que yo quería es decir vamos a ver que está cargando sabemos como esto mira hacia adelante ahora hace una batida vemos cómo la va más lento vemos cómo va más lento hace una latina está mirando alrededor ahora mira hacia adelante ahora vuelve a hacer una batida vuelve a ser una batida vuelve a hacer una batida y vemos que ahora quiero sacar el puerto serie momento y voy a hacer esto incluso unos 30 hasta 150 vamos a lanzarlo no hace falta que me haga los 180 grados avanza para ahora esto hace esa batida vemos como el sensor de ultrasonidos está haciendo una batida y vamos a ver el puerto sería que nos dice a que no el monitor serie he sacado el monitor serie por qué vale y me dice me está sacando los ángulos ahora los pares pero vemos qué me dice que sepas que la mejor distancia es 264 y que sepas que el mejor ángulo es lo que sea voy a parar voy a quitar este sería el print que no lo quiero ahora para nada y bueno tendría que hacer alguna prueba para comprobar si es cierto que esa es la mejor distancia me voy a fiar ahora el sistema barre efe que sepas que la mejor distancia es 27 7 puede ser me parece demasiado pero que sepas que el mejor ángulo es 56 de hecho si todo va bien debe dar más o menos el mismo resultado no lo está dando pero bueno 32 cada vez me está diciendo un ángulo lo cual es un poco extraño cuando menos y voy a hacer una cosa esto luego lo podemos ir podemos seguir cambiando delay de 150 vamos a lanzarlo lo que voy a hacer ahora es que en lugar de girar ángulo va a girar cada 10 ángulos vamos a verlo y ahora es mejor algunos 140 eso lo dudo bastante mejor ángulo 70 vemos cómo cada vez defiende una cosa 140 ahora mismo dónde está que se encima de la mesa la verdad es que no es muy fiable 140 ha vuelto a sacar 97 140 enferma cosa voy a tapar todo este ángulo con la mano el ángulo es 70 no lo creo así que parece que lo está haciendo bien vale vamos allá vale pues ahora en este programa lo que tenemos que hacer es que el sistema gire ah vamos a ver voy a parar a la que tenemos esto lo que quiero ahora esto quiero que el sistema gire convenientemente en el sentido de que si está hacia adelante hecho un delay no nos falta porque tengo un delay a quien vale vamos a ver ahora vamos al motor punto right vale hacia adelante realmente no hagas nada ahora sí mejor ángulo es mayor que 0 y es cierto que el mejor ángulo es menor que 80 en ese caso harás una cosa y si el mejor ángulo es mayor que 100 y el mejor ángulo es menor que 180 harás otra vale ahora si esto es cierto vas a girar hacia un lado es decir esto y si esto es cierto vas a girar hacia el otro lado esto quiere decir 180 aquí y 0 grados aquí y ahora aquí voy a poner un delay y ahora viene la cuestión y el delay es el siguiente el delay es mejor ángulo menos y es el valor absoluto en arduino vamos a ver como tenemos el valor absoluto de una resta entonces arduino absoluta que es a bs ahí lo tenemos el valor absoluto a bs de un valor y esto lo multiplicamos por 10 por ejemplo aquí voy a hacer lo mismo 90 - mejor ángulo y esto por 10 en este caso lo que va a hacer es girar vamos a ver si funciona correctamente yo creo que tendremos que hacer algunos ajustes muy probablemente pongo alimentación la placa lo cargamos a ver si no ha vuelto a cambiar si ha vuelto cambiar el puerto con gusto aquí puesto aquí cargo no sé si cargado vale a ver ahora cajero y ahora ah hoy claro porque va hacia atrás pero y 180 vale lanzamos y ahora avanza mira avanzas mira recibe y gira voy a parar todo esto un segundo quiero que después de girar quiero que después de girar esté quieto un segundo vale no avanza mira decide gira y ese de un segundo no me ha hecho caso porque este delay que juraría me ha hecho ni caso como no me ha hecho caso lo que puedo hacer es meterlo al principio del look espérate claro al final no es solo no es sólo que parece es que tengo que decirle 90 y 90 vamos allá vamos a verlo vale ahora avanza para mira a la gira y avanza ahora estará avanzando hacia el lugar correcto pues quién lo sabe igual está girando hacia el lugar incorrecto mira define gira voy a meter un delay aquí hola esto lo voy a multiplicar por 40 y esto es algo que realmente esta multiplicación que estoy haciendo por 40 hasta que no hagamos una feria de pruebas no podemos verlo realmente avanza mira ahora para un segundo gira no s 40 iguales 25 ya te digo que esto que esté viendo no sirve para nada hasta que no ponga el robot en marcha y no vea si realmente funciona o qué vale y ahora me gustaría ponerle pues eso algún led algún componente más para cuando el robot está mirando que haga algún tipo de parpadeo vale entonces vamos a ver lo siguiente voy a buscar algún leve voy a desconectar por aquí un momento ahora volveremos a conectar busco algún leve tengo uno por aquí de hecho uno de estos que se conectan directamente y así nos es más sencillo de utilizar lo voy a conectar en el puerto 3 en el puerto digital 3 y así pues ahora lo dejaré un poco colgando por aquí de momento lo dejó colgando aquí y quiero recuperar el ejercicio del led pues no sé para hacer algo con él vale entonces lo que quiero hacer con él vamos a ver es que voy a abrir el sketch leve y digo el pin mode el setup el pino de número 3 el pin mode número 3 lo pongo en output y ahora por ejemplo y ahora por ejemplo aquí cada vez que haga esto pues voy a decir digital right media todo esto es lo que me voy a copiar lo voy a pegar vamos a ver mira aquí y voy a hacer peter wright 3 en hair antes de la 50 pues 75 y 75 para que cada vez que estoy haciendo ahora no sí porque esto es el formal cada vez que haga un barrido lo que quiero es que ruede el led vamos a verlo pongo alimentación pongo usb me habrá cambiado el puerto otra vez bueno no pasa nada vale vemos como los ejercicios que hemos estado haciendo estos días anteriores pues realmente nos sirven porque es el bloque de código lo que es de código que vamos utilizando para luego poder copiar y pegar entonces ahora hago esto vale estoy lanzando el programa si todo bien ahora pinto si hemos visto lo que hace es que cada vez que se pone a leer vale pues lo que hace es un poco como a darnos una señal de que está haciendo algo tengo este led que es de color verde y ahora por ejemplo pues voy a decirle al sistema que quiero poner otro led de color rojo que se encarga de decirme pues cuando está avanzando vale cuando el motor está avanzando pues que esto que haga otro le voy a ver si tengo otro led por ahí esto realmente no tiene más utilidad que informarme de cuando está en marcha ahí vemos voy a buscar otro led la zona que tengo otro me suena que tengo otro según lo que estoy buscando o por ejemplo tengo un va a ser que haya olvidado del váter pues por ejemplo en lugar de meter otro le pudo meter un váter y para meter el váter lo que puedo hacer es dejarlo por ahí igual no sé el led lo pongo ahí y él va será ya no lo sé ahora veremos ale pero de momento lo dejó suelto lo pongo aquí a ver que no me deje ciego el led lo conecto no sólo dejar de momento aquí para silvia para el momento ahora por cierto comentaremos el código que hace un rato que no comentamos nada y vuelvo a sacar el ejercicio de vuelvo a sacar el ejercicio de el buffer vale ahí lo tenemos y digo por ejemplo vamos a ver aquí cuando hair le digo todo en el puerto 2 quiero poner pues 880 momento estoy pensando podría hacer una cosa podría poner la distancia y así de esa forma tengo una cierta idea de qué es lo que está distancia por cuatro de que es lo que estaba viendo el sistema y aquí lo que hago es noto un en el puerto 3 por todos que cumple una función en definitiva que no sólo sea pitar por pitar sino que además el pitido me dé una cierta pista de dónde están los obstáculos entonces vamos a ponerlo regular ha vuelto a cambiar el puerto pero bueno entonces lo vuelvo a lanzar tendrá que error vuelvo a elegir el puerto de arduino lo lanzo vamos a verlo vale sí bueno era gracioso ahora vamos a multiplicarlo por un poquito más esta distancia por 4 más 400 esto va a ser más 5 y esto por tanto será 40 y 40 vamos a bajarlo vale yo lo que quiero ahora si realmente el sistema está siendo obstáculo entonces voy a hacer una cosa voy a poner adelante ningún obstáculo y voy a poner por aquí algún obstáculo voy a poner por ejemplo por aquí una caja para que realmente haya un obstáculo creo que sí lo está cogiendo para poner la caja aquí fijémonos que hay vale fijémonos que se le pongo la mano adelante me aceptó unos tonos graves pero se le quitó la mano hace tonos agudos porque está buscando en la distancia vale para ser correcto parece correcto muy bien de momento ahora pues bueno tendré que ver hay una prueba de fuego que quiero hacer que es si quitándole el usb sigue funcionando o tengo que meter ya el otro grupo y si tengo que meter lo que pude del grupo como podemos ver voy a reiniciar pero como podemos ver se queda sin amperaje no tiene fuerza para mover vemos ahí no tiene fuerza para mover eso desgraciadamente pero no tiene fuerza es ahora lo que voy a tener que hacer vemos ahí como si quito el usb no tiene suficiente fuerza tengo que meter un segundo grupo de alimentación vale las pilas no pueden con todo el sistema fijémonos como solo cuando meto el usb es cuando realmente tiene fuerza vale entonces voy a desactivar esto pero ahora ya no tiene fuerza muy bien vamos allá ahora voy a tener que soltar un poco me dejó todo este bloque aquí traigo esto aquí y necesito un par de cables macho necesito un par de cables macho para vuestro quién voy a conectar el soldador y esto lo voy a conectar aquí tengo este grupo tengo este cable macho y con el soldador y como siempre digo con mucho cuidado lo que voy a hacer es soldarlo y prepararlo para conectarlo voy a conectar el soldador momento me voy a levantar y ya tengo aquí más pilas entonces voy a ponerlas pero con cuidado por qué no estoy estableciendo ningún tipo de parada sabes sistema de parada eso es bueno divertido más que bueno con esto por tanto ahora uno de los motores debería estar en marcha aunque nadie le está dando señal y vamos allá vamos a probarlo ahora este esta alimentación viene aquí veo qué sigue sin ser suficiente vale si únicamente este motor no se pone en marcha vemos si es porque re conectado al revés vamos a ver si lo conectaba al revés en la general para que estas pilas están gastadas porque esto va muy bien a ver desconectar esto vamos a desconectar esto y vamos a ver el esquema de conexión de un servomotor entonces para la chs servo motor los que matrix aquí ok entonces en la el rojo son 5 voltios vale vamos a ver no está girado entonces en definitiva para ver que algo caso pero dentro de que aquí hago caso lo cierto es que esto no está bien conectado en el signo vaya hola el rojo voy a venir el signal claro cuál es el signo vale no es lo que está claro lo que parece claro es que negro es el ground por tanto rojo el negro hasta aquí y hasta aquí vamos a ver a nuestro estado de correcto ese motor de momento no sé y necesito verlo lo que voy a hacer es y quitar los cables correctos evidentemente que se convierte en ver es más es negativo entonces ya estar funcionando porque es un momento hay algún problema en esos cables porque si lo conecto al revés vale no no qué está ocurriendo huele a quemado vamos a quemado parece que es este es el motor sé que por lo que sea parece que por lo que sea no tiene la información correcta y por eso parece que se ha empezado a quemar y por eso le pararon evidentemente entonces voy a volverlo a probar a ver que lo toque no parece estar caliente tampoco la placa tampoco había un humilló cuando hay un amigo hay que detener enseguida el sistema voy a probar de nuevo esto y bueno ya la dejaremos las clases el próximo día al revés pero ha habido hay un problema ha habido un momento en el cual parecía que vamos a verlo de hecho fijémonos el sistema ahora mismo ni se mueve y no sé ahora mismo lo que se ha quemado pero algo se ha quemado vale no pasa nada continuamos con esto el próximo día no sé si habrá un cortocircuito o algo quizás se ha quemado la placa y bueno continuamos en la próxima clase voy a localizar cuál es el problema y una vez que localice cuál es el problema pues probablemente cambiaré la placa y ya está vale okay fernando lo tenemos claro