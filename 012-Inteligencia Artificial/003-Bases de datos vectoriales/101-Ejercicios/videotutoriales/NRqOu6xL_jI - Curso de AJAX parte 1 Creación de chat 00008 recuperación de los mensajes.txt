bien pues hasta ahora nos hemos centrado en únicamente esta información y meterla digamos bueno meterla aquí dentro no enviarla al servidor para esta cajita de mensajes la hemos creado precisamente para poder enviar mensajes para que aquí se refleje no solo el mensaje que nosotros hemos enviado sino el mensaje de cualquier usuario vamos a por ello vamos a hacerlo por tanto lo que voy a hacer ahora es decirle al sistema que cada equis segundos aquí en el archivo javascript vamos a ver lo voy a ejecutar la función bucle vamos a ver jv chat bucle para que no colisione con otras funciones que podamos hacer bien y de hecho esta debería ser esta herencia debería ser j chad éxito por si acaso integramos esto con otros programas informáticos para que no haya duplicidad en los nombres así que jv chat buckler y en el bucle vamos a decirle qué bar jv chat temporizador es igual a nada y entonces vengo por aquí en el documento red y le digo jv chad temporizador es igual al set time out voy a ejecutar jv chat bucle y ahora en el bucle le digo killer time out jv chatwood j muchas temporizadores perdón y ahora le digo esto de aquí lo que le estoy diciendo es recarga la función de bucle cada segundo es decir el documento rueda y lo que hace es lanzar el temporizador y el temporizador lo que hace es ir cargando e ir cargando pues cada segundo vale cada segundo nos vamos a ir al servidor y recuperar los mensajes vamos a por ello bien ahora por tanto me voy a ir al servidor voy a hacer una petición a jacques voy a copiar de hecho esta petición y ahora voy a hacer lo siguiente jv chat aquí no quiero la función de éxito porque al enviar no nos sirve para nada pero aquí sí que la quiero entonces jv chat tipo revolución mensaje nada y usuario bueno no usuario nada vale poco y ahora jv chat éxito lo que va a hacer es que dentro de mensajes dentro de jv chat mensajes va a poner el código que le devuelva el servidor y que código eleva a devolver el servidor al servidor le va a devolver que en el caso de que el tipo sea de evolución pues en ese caso lo que vamos a hacer es decir que petición es igual a mysql y query que va a ser un sencillo select el momento fueron mensajes y a ver qué sale de aquí y entonces mysql fue electo de volver por aquí quiero esto valen y aquí esto es lo que quiero esto lo podemos pasar a una línea y ahora esto es petición esto es fila vale y ahora digo echo rey mensaje por ejemplo con un bebé si todo ha ido bien vamos a ver lo recargó y vamos a verlo por aquí vale debería empezar ya a aparecer por aquí la información jv chat éxito es jv chat mensajes jb chat mensajes de hecho veo como está haciendo algo br sí que está haciendo algo pero parece que no se llama mensajes sino que se llama un mensaje de mensaje no es row sino que es fila ahora así que recargo y como vemos me dice hola segundo mensaje este es un mensaje y tal le vemos que lo que está ocurriendo en este caso es que tenemos ya por aquí y si ahora digo ya digo hola me voy a enviar y esta es una prueba qué va le voy a enviar vemos como ahí ya estamos poniendo cada vez más mensajes vamos a ver a continuación como bueno si yo empiezo a poner mensajes le puedo dar le puedo usar la tecla enter para decirle digamos que quiero que se envíe el mensaje así que voy a usarlo en el javascript entonces le digo lo siguiente cuando sobre jv chat cómo se llama este elemento se llama mensaje punto focus cuando esté dentro de ese elemento voy a hacer una función anónima y voy a decir que cuando pulse la tecla enter en ese caso puedes enviar el mensaje entonces vamos a verlo jquery get enter key y ahí vale aquí y esto lo pego vamos a verlo vamos a ver lo recargó le doy aquí y le doy a enter y me dice ha expulsado enter luego eso quiere decir que en este punto enter le puedo poner por ejemplo pues todo este código que tengo aquí copio y pego ahí lo tenemos así que puedo ir enviando sin ningún problema bien ahora a continuación vamos resolviendo cosas que nos van surgiendo como por ejemplo si yo empiezo a enviar más mensajes pues vamos a ver que desbordó la caja de texto entonces esto lo podemos arreglar con un poquito de css nos damos a css nos vamos a mensajes y le digo overflow y voy a decir scroll y esto lo que va a hacer es que pues al desbordar vamos a verlo jb chat mensajes bien ahora tenemos el scroll tenemos el pequeño problema de que a medida que yo voy poniendo a bb b ccc lo que ocurre es que estos mensajes están abajo del todo cuando hay un chat a mí lo que me gustaría porque me gustaría que ocurriera es que siempre viera digamos la parte debajo del todo hay una función llamada top que nos permite hacer esto nos permite trabajar con esto entonces puedo hacer lo siguiente puedo hacer lo siguiente vamos a ver cuándo cuando entro en el bucle le digo qué jv chat mensajes punto top y de momento voy a poner cinco mil vamos a ver qué pasa vamos a ver si este es el top que quiero no creo que no es scroll top perdón no stop es scroll top así que recargo y si todo va bien ahora a continuación vemos como automáticamente se va al final si le pongo un mensaje vemos como automáticamente en todo momento se va al mensaje que haya al final con esto por tanto aunque parezca que no tenemos un pequeño chat pero vamos a hacerlo más bonito parece que no pero ya lo tenemos ya está funcionando y ahora lo que queremos es que sea bastante más estético