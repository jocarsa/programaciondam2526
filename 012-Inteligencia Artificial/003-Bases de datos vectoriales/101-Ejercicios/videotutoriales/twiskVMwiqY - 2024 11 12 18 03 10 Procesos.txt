y vamos a por ello vamos a ver dónde nos habíamos quedado vamos a hedit esto es lenguajes de marcas sí alguien se había oído algo durante un microsegundo Vale entonces nos vamos a dam nos vamos a segundo nos vamos a servicios y procesos nos vamos a eh comunicaciones en Red vamos a ver un momentín bueno primero el gim lo podemos cerrar ya del ghub acabo de hacer un Push vamos a sacar esto por aquí okay dam segundo servicios y procesos programación multio no esto yo lo veía aquí en Chrome yo lo veía aquí a ver aquí vale Y en local Host en segundo en programación de servicios y procesos 37 Vale ahora sí 37 muy bien bandeja de entrada Así que vamos a volver a abrir esto Es más yo aquí en 37 Okay me voy a vamos a ver a f2 015 continuamos vale Y aquí voy a abrir una terminal y voy a decir que python 3 servidor vale me voy a local Host 5000 Okay tengo esto por aquí bien y ahora eh lo que quiero por ejemplo es que cuando abra cuando en un correo pues ese correo Se me abra del todo por qué Pues porque yo ahora a continuación lo que voy a hacer Es que desde mi correo electrónico voy a enviar un correo pero Esto va a ser extenso Vale entonces le envío el correo aam @ jara.com este es un correo extenso y ahora en lipsum.com lipsum.com Me cojo el Lips y en el correo pongo esto esto y esto vale le doy a enviar y a ver qué me dice tan porque es un alumno que Okay no a ver un segund dejadme que a ver fft eh Vale entonces vamos a ver si todo bien Ahora recargo vale Y claro tengo un nuevo correo pero el problema está en que este correo es muy extenso vale Y me descuadra me desencaja la bandeja de entrada de esta forma yo puedo hacer dos cosas yo puedo o por una parte eh recibir solo únicamente el título del correo el asunto del correo y el correo en sí mismo o bien si recibo el texto pues por ejemplo puedo decir que solo quiero recibir los primeros mensajes vale o sea los primeros caracteres bien en este caso lo que voy a hacer Es que voy a copiar pegar Me voy a ir a 016 previsualizar y en previsualizar ahora cierro aquí me voy a CD me voy a016 vale Y en el servidor antes de hacer nada en el servidor voy a abrir con idel Okay bien y esto es recibir mail vale función recibir recordamos que teníamos fantástico una función llamada correo donde tenemos enviar y recibir y aquí en recibir lo que voy a hacer es vamos a ver es a aquí Body vale mensajes.en mensaje y no quiero esto de aquí vale is multipart content disposition t explain Vale pues voy a todo esto de aquí y lo voy de momento lo voy a comentar Ya sabéis que no me gusta lo de borrar por tanto python servidor python 3 servidor python Ok vale recargo con lo cual me aparece únicamente el asunto del correo y la persona que envía el correo y ahora lo que quiero es que cuando yo haga clic en el correo pues quiero enviar una petición al servidor para decirle vale Dame un correo vale Dame solo un correo a ver esto Ok bien entonces vengo por aquí y ahora lo que voy a hacer es B char vamos a ir a gedit y continuamos vale me voy a templates me voy a Index html Y si hasta el momento había cargado un template nos acordamos que aquí teníamos el template de ID correo for tarjeta content node vale contenedor appen Child y ahora digo tarjeta punto onclick es igual a function console.log has hecho clic en un mensaje y ahora lo voy a abrir vamos a probarlo creo que no hará falta recargar el servidor recargo eh 139 on click bandeja de entrada on click bandeja entrada a un click me dice que nul por qué Pues no lo sé vamos a ver no es un error de ahora pero ya que lo tenemos pues vamos a arreglarlo bandeja entrada on click es document query selector bandeja de entrada entonces bandeja de entrada es bandeja Ese es el error Vale entonces vengo por aquí Y esto es momentín que te lo digo esto es bandeja Ok recargo el error ha desaparecido vale Y ahora cuando hago clic aquí pues no ocurre nada muy bien fantástico vamos a verlo vamos a ver el código y aquí tarjeta on click es igual a fun vale teóricamente debería funcionar pero no funciona Okay vamos a ver el motivo por el que no funciona probablemente tiene que ver con que es un template Entonces yo ahora vengo por aquí y digo datos for each contenedora pench tarjeta on click en principio no le veo problema click vale Ok pues voy a solicitar el comodín de la llamada Entonces vamos a ver tarjeta onclick template not working plantilla tiene su propio evento de clic vale esto se puede después de clonar la plantilla Okay eso puede ser vale tarjeta query Ah es verdad perdón es esto claro es que no es la tarjeta es el article dentro de la tarjeta que no bueno Me da igual vale Voy a hacerlo yo tarjeta query selector article punto onclick vale vamos a verlo ahora y local Host vale artículos clic has hecho clic en un mensaje y ahora lo voy a abrir vale esto quiere decir que ahora eh voy a abrir el o sea voy a crear un nuevo método en función el servidor en el cual lo que quiero ahora es recuperar los datos no de la bandeja de entrada sino de un mensaje en particular vale vamos a hacer eso y también ahora a continuación haremos una primera integración de esto dentro del dentro de crimson Vale y vamos viendo cómo aplicarlo eh más que nada para ver como crimson y todo esto deberá estar en el puerto 5000 porque no puedo tener dos servicios en el puerto 80 vale Pero no pasa nada tampoco es necesario así que vengo por aquí y ahora vengo por aquí y digo cer 017 recuperar un correo solo un correo bien Lo cual quiere decir dec que en el servidor en funciones correo vale vamos a ver vale vengo por aquí nuevo y digo with this server and this Class que te lo digo a ver Ah no hostias esto es funciones correo no me gusta porque esto podría ser una clase pero bueno da igual vale andis funciones correo. python create a function to recover One selected mail Maybe on recibir fun create some kind of Unique ID No lo sé vamos a verlo porque Claro en base a qué voy a el correo Pues no lo sé quiero decir título puede estar duplicado podría ser fecha vale fecha en principio no debería haber dos correos justo en el mismo segundo de la misma hora del mismo día del mismo mes del mismo año pero podría ocurrir vale Enton onces vamos a ver qué me dice vale parece que está creando un ID bien Bueno yo creo que ya vale pues recibir y procesar mensaje Vale recibir y Ok y procesar mensaje Vale ahora añadimos una nueva ruta añadimos una nueva ruta y me voy aquí en el servidor añadimos una nueva ruta vale esto quiere decir que ahora cuando hago clic en un mensaje mail ID qué me está dando el mail ID vamos a verlo vamos a ver eh me vengo por aquí paro fb 017 eh python 3 servidor a va Qué ha pasado vale unexpected intent hostias No me digas esto a ver unexpected indent Ah sí vaya esto qué es esto no va aquí Esto va aquí dident y ya está sí no sé por qué vale r return mensajes is outside function ostias a ver a espera Okay qué está pasando aquí a ver vale Ah ok vale Ya veo lo que pasa vale esto recibir llega hasta aquí y ya está vale Ok y vamos a verlo local Host 5000 vale en cada uno de los correos no quería el cuerpo otra vez pero vale No pasa nada y clic y vale a ver qué estoy recibiendo en cada uno de los mensajes No no porque entonces yo Cómo sé qué correo es cada correo estoy en el sitio correcto vamos a ver estoy en recuperar un correo vale estoy en recuperar un correo Okay status messages Okay Vale pues vamos a verlo pues ahora le digo recuperar un correo templates Vale y on article click recover this article Data with fetch just to conso el tema está en tu Store a mail ID pero vamos a ver ese mail ID que me da aquí parece que me está comprimiendo los estilos vale no me preocupa porque ahora luego tiraré eso a un nuevo archivo de todas no me voy a copiar todo esto voy a copiar únicamente esto Ahí está Vale datos for each dato Ay hostias que vamos a dejarle que acabe Para que me deje copiar solo lo que quiero es más quiero solo esto ya vale article dataset mail ID es igual a esto lo copio estoy en Index me voy aquí ah no sé dónde voy aquí okay TIC ticul en click Ah bueno Vale pues datos for each vale datos for each desde aquí hasta aquí vale lo sangramos vamos a verlo y Data console log Data vale vamos a probarlo hagamos Ok hago click vale error fetching me da en este caso unexpected token doc type is not valid J ok No pasa nada vamos a ver qué error ha dado para ver qué error ha dado voy a decir response text como siempre recargo click y me dice Ah y me dice y map fetch command error Vale y de hecho aquí tendré un error muy bien okay Y eso quiere decir que no ha funcionado la leche vale error on fetch One mail vale Esto bueno recibir no me convence mucho solución pero vale esto es recibir paro el servidor arranco el servidor refresco aquí click y me dice que no pero ahora el error parece otro el problema está en que qué está debug realmente Vale pues console log el ID que voy a enviar Es voy a debugar yo dato Maid Yo creo que el problema empieza por aquí Más que nada porque creo que no está enviando ningú ID click ahí está el problema vale a ver okay it seems to me error esto undefine vale esto es la solución vale actualiza recibir para incluir el mail ID Ahora sí vale de recibir incluye un Unique ID Okay vamos a recargar vamos a ejecutar eh internar solver error sí que estamos bien vale pues voy a hacerlo yo voy a hacerlo yo porque voy a utilizar la fecha porque en este caso chat gpt no me está apañando Y entonces digo include complete date as apoc bueno complete date in recibir fun lo he escrito mal pero vale Ok vamos a verlo e Ah no enviar recibir Okay vamos a verlo enviar y recibir paro recargo ejecuto recargo Vale qué viene asunto cuerpo yid pues no está viniendo la fecha estoy en el sitio correcto recuperar un correo Sí a ver recibir mail no veo que est recibiendo la fecha No ahora sí vale vamos a ver recibir mail ID no tengo muy claro que esto vamos a ver cuatro mensajes asunto cuerpo está pasando de mí vale No pues es más todo fuera Vale y vamos a volver a empezar vamos a ver on recibir fun include mail date complete date on jas la fecha vale venga copio código lo pego eh probamos recargamos inspeccionamos bien esto ya es otra cosa Vale ahora a continuación lo que quiero es crear una nueva función para recuperar un correo en base a su fecha teniendo en cuenta que tenemos el mes el o sea el mes el día El año hora minuto segundo Pues bueno habría problema si recibimos dos correos en el mismo segundo Pues bueno como puede ser pero vamos a verlo otra cosa es que podría poner también una clave combinada entre el asunto de el correo y la fecha y por tanto ya recibir dos correos iguales con la misma fecha y con el mismo asunto Pues ya sería bastante difícil o sea bastante más difícil pero bueno Vale entonces ahora OK ahora digo dónde estás aquí Ok Now create another fun recover date vale vamos a hacer una cosa vamos a asegurar este estado del proyecto con lo cual 018 recuperar por fecha eh vamos a ver cierro aquí recuperar por fecha funciones correo abro con idel recibir por fecha vale Y voy a acabar de implementar esto y ya nos vamos a hacer una primera integración con crimson para ver un poco una bandeja de correo electrónico dentro de crimson evidentemente queda mucho por hacer recibir por fecha Ok vale me vengo aquí recibir por fecha Vale ahora le digo Now update this server to include a rot vale para que me incluya una ruta más recibir enviar vale Y ahora abajo del todo recibir mail ID vamos a ver ah eh Ah no vale No esta no recibir mail por fecha vale Este no lo voy a usar igual este fuera Vale entonces me vengo aquí paro CD cd00 no ya no sé dónde estoy CD 018 vale python 3 servidor vale Y ahora le digo y ahora le digo eh Ok a ver esto có ha quedado vale Okay perfecto no eh No Okay Vale Sí Now update to get email by date asj son in console Vale entonces ahí hará un fetch okay Y una vez que tenga el fetch pues ya solamente es el contenido del Jason y meterlo en la interfaz como queramos esto es de momento Esto vale Aquí está es Esto va Aquí está todavía en ello Vale entonces esto por aquí esto voy a recargar y vamos a probarlo vale en el cuatro estamos enviando estamos recibiendo la fecha hago click email Data y me dice que el email es Oh correo no encontrado con la fecha especificada Vale qué fecha estoy enviando Pues no lo sé ahora lo veremos pero por lo menos ya estamos buscando la fecha correcta Vale entonces o sea estamos ejecutando digamos el ciclo correcto Entonces ahora qué fecha pues console.log voy a buscar por fecha más fecha no coma fecha recargo click voy a buscar por fecha undefine vale Ok Venga pues no pasa nada Qué ha pasado Pues que eh article query selector no esto es dato y esto es dato fecha esto es dato de fecha vamos a verlo ahora recargamos click vale Ok dice voy a buscar por fecha trucut tru trukutru email Data email vamos a ver si ha recibido algo email asunto Hola cuerpo José Vicente fecha lo que sea vale Ya está ya lo hemos conseguido con lo cual si ahora vengo por aquí y digo ahora quiero este correo pues me vuelve este email y este email tiene el email y ahora te escribo por lo que sea vale Lo cual quiere decir que ahora por ejemplo cuando selecciono un correo pues por ejemplo una cosa que puedo hacer es Borrar todo esto de aquí y poner un solo artile Vale y cargar un solo artile al cargar un solo artikle Vamos a verlo ahora cargamos el correo y 36 Bueno voy a hacer una cosa como esto ya es cuestión de interfaz gráfica que no tiene mucho misterio voy a empezar el tema de la integración voy a hacer una integración muy bruta al menos ahora de momento por lo menos para que veamos esto dentro de crimson vale Y que nos anime un poco Entonces ahora me voy a hacer una integración muy bruta Pero a la vez muy conveniente me voy a eh sistemas de gestión empresarial me voy a proyecto en proyecto sistemas de gestión empresarial proyecto me voy a 089 y Ah bueno email Vale y en cliente claro lo primero que tengo que hacer es decidir dónde lo pongo porque dónde lo pongo Pues no lo sé Cuando digo que no lo sé quiero decir que si me voy al superc controlador Pues yo por ejemplo podría poner el correo aquí abajo O podría ponerlo en un botón aquí arriba o yo que sé vale o cuando pincho clientes Pues que al pinchar un cliente me aparezca los correos electrónicos del cliente no lo sé vale Pero como tengo esta zona de aquí arriba bastante utilizada a ver Esto es un header donde pone el super controlador Ah ok vale bien pues en el header lo que voy a hacer aquí escritorio no superc controlador Index vale en el header Aquí voy a poner h1 y aquí voy a poner un na un menú de vamos a verlo vamos a ver qué aspecto tiene vale super controlador No pasa nada me empuja mucho ahora le quito vale le quito tamaño A eso me voy al estilo y digo por aquí que heer es no heer h1 es pading cero píxeles vamos a verlo Wow y margin C pel Okay vale un poquito mejor bien Ahora dentro del nav voy a meter Buttons vale voy a meter un botón entonces header nav Button vale vamos a meter esto y ahora voy a meter aquí un buton a voy a poner a y voy a decir Class acordémonos ayer de que creamos botón vale Class botón blanco pues Class botón blanco pongo pongo cl Ahí va pongo para crear una pequeña botonera más que nada vale Ahí está Wow y vale Okay todo lo que sea un botón voy a decirle que Border known okay Y ahora lo que quiero es que flote con Eh flexbox vale entonces voy a decir que space between ahora veremos qué hacemos con la cosa esa que flotaba por ahí y ya está Center y ok Y entonces vengo por aquí y en el no dónde estás en el header voy a decir que flexbox Ok vale Ya os digo que se me monta í arriba tengo que ver cómo hacerlo otra cosa que no me hace la ilusión es esto de aquí arriba pero bueno ahora veremos dónde recolocar eso y luego con los botones también otra cosa que ocurre Es que creo que tienen un borde demasiado bestia Vale entonces esto de aquí lo voy a mover aquí y le voy a decir bord radius 5co píxeles a ver qué pasa bien así parece más un botón yo creo que así me gusta más todavía Vale y ahora tengo que hacer clic vale en un botón para que sea el correo electrónico entonces para que sea el correo electrónico vamos a verlo aquí en el Index voy a poner ID mail voy a trabajar uno de los botones de ayer cliente superc controlador imagen icono borrar icono documento Vale pues voy a abrir con Ink escape si se abre Ah no sé si se va a abrir icona documento vale entonces ahora lo que voy a hacer Es que voy a Pues mira voy a crear aquí un icono relleno blanco trazo rojo redondeo menos estilo de trazo un poquito mayor y ahora aquí ya sabéis creo que este icono igual lo he dibujado otra vez porque es que me suena ahora mismo en la mente que yo he hecho esto hace poco vale estilo de trazo relleno ninguno vale Y ahora así y esto lo guardo en archivo guardar como esto lo guardo en email cliente superc controlador pues como icono correo. svg entonces vengo aquí Pongo aquí en lugar de una a voy a poner img src img barra icono correo svg vamos a verlo Vale tengo ahí el correo par el icono un poco pequeñito pero bueno a ver por qué es tan pequeñito y Estos son mayores Pues bueno no lo sé ahora mismo botón img y este es botón img pero por lo que sea pues sale más pequeño no pasa nada me da igual a tiempo de hacerlo más grande siempre estamos lo que yo quiero ahora es cargar el correo electrónico entonces para cargar el correo electrónico me vengo a comportamiento aquí y vengo por aquí creo una nueva sección y digo eh Abrir correo electrónico y en este caso pues lo que voy a hacer es decir que document query selector el selector es mail punto onclick function pues lo que voy a hacer en este caso es decirle que vamos a ver es decirle que document quy selector Table es punto Style punto display es igual a block vale Y ahora Let Marco es igual documentate Element frame ahora marco punto set attribute src es local Host de momento 5000 vale ya veremos luego que le ponemos de momento local Host 5000 y entonces vengo y digo document query selector Table appen Child marco lo cual quiere decir que yo cuando me voy a crimson si estoy en el email si todo va bien cuando hago clic en el correo hay algún error quizás vale vamos a verlo si o no A ver un momentom Esto vale esto no s lo mismo que me da pero bueno parece otro error diferente parece otro error diferente porque debe ser del de un text Pero bueno vale hago clic El caso es que no me está haciendo clic no me está haciendo clic vale algún error está viendo a ver estoy en email en cliente superc controlador estoy en email el cliente en superc controlador vale document query selector mail on click y le digo console.log Ok Hola otra cosa que te digo es que document selector Table innerhtml es igual a nada Lo cual quiere decir vacío la tabla vale click Ah ahora sí Ok y ahora esto qué es esto es la sección la verdad es que lo podía poner en la sección más que en la tabla sección vale okay Vale pues Ahora le doy al mail no mail section display block nos ha cargado vale porque en section appen Child vale hago así Ahora tenemos un frame que es un poco bestia pero vamos a formatearlo por último en esta parte entonces me voy a aquí me voy al css y en el css le digo section y frame y ahora vamos a integrarlo vamos a disimularlo para que no se note que es un frame externo porque realmente no es tan externo quiero decir No lo estoy sacando el contenido de bet saber dónde sino que lo estoy sacando de mi propia aplicación de mi propia de mi propio servidor vale aunque sea una integración muy rugosa ahora mismo así que aquí le digo que with 100% H 100% Border known y en principio ya está recargo correo vale Y ahí tengo el correo ón tengo Bueno tengo que controlar eso de ahí que me salga gris o que no me salga gris o lo que sea Pero vale Ahora me voy a generar un nuevo correo y veis como dentro de crimson Pues tengo un nuevo correo y dentro de crimson Pues yo puedo redactar un correo para info @ josev viicente carratala comom eh asunto Perdón Esto es para eh prueba desde crimson Y esta es una prueba de mensaje Vale le doy a enviar Okay vuelvo a la bandeja de entrada me voy a mi correo electrónico a ver espera mensajes espera esto ahora luego respondo le doy a enviar eh Ok Alejandro Ah vale Okay momentín a ver si recibo porque teóricamente debo recibir a menos que me haya cargado algo que espero que no Qué miedo no a ver si me he cargado algo Espero que no es decir a ver si con recibir correo me he cargado Enviar correo mensaje desde dam para info digo Hola le doy a enviar el ID que voy a enviar Okay Vale vamos a verlo okay todos No pues ahora no estoy enviando Vale ahora por lo que sea por lo que sea no estoy enviando ya os digo que me preocupa relativamente poco esto es email Vale ahora tendría que venir aquí digo que me preocupa poco porque como he trabajado con versiones si por lo que sea me he cargado el envío de correo pues Oye pues no pasa nada sabes pues lo restauro y ya está o sea lo saco de alguna versión anterior y lo restauro y ya está entonces recuperar por fecha funciones correo abrir con idle hay un enviar y en el servidor hay un enviar o sea que lo que pasa es que no sí pero esto es correcto Vale pues nada o sea error tampoco da igual es que tengo que esperar un poquito para que se reciba el correo electrónico vale No lo sé lo digo porque estamos dando por hecho que ha dado error cuando técnicamente no ha soltado ningún error sino que simplemente el sistema me dice okay 5000 fabico no lo encuentra eso no pasa nada eso está claro vale pero de momento lo que quería era esto de momento lo que quería era pues enseñaros una primera integración de el correo electrónico integrado dentro de crimson hoy hemos hecho como os digo una integración muy rugosa en el sentido de que realmente el correo no se está comunicando ni con clientes ni con líneas pedido ni con tal vale oye porque hoy lo hemos hecho en plan como os digo muy rugoso pero si me voy a Ink escape y implementamos en próximos días esta flecha que os comentaba esta tarde Pues en el momento en el que cojamos los correos electrónicos y los metamos en la base de datos pues evidentemente ahí ya estamos comunicando los datos para decir tengo una lista de clientes tengo una lista de correos electrónicos que están en la base de datos Hazme un join Búscame qué correos electrónicos tiene este cliente vale Por eso digo que estamos mucho más Aunque repito varias veces que hemos hecho una integración rugosa pero me preocupa poco porque habiendo hecho esta integración tan rugosa estamos realmente cerca de una integración más fina vale simplemente en el momento en el que implementos esta fecha esta flecha perdón pues ya está Vale pues vamos a hacer 5 minutos de descanso y a partir de ahí ya saltamos a la última clase de la tarde de hoy vale que es la clase de acceso a datos donde en este caso en acceso a datos estaremos sabemos que tenemos por ahí en marcha os acordáis el de vale Ah igual Esto es lo que me está fallando Claro igual esto no tampoco Eh sí porque esto es lo que me está fallando porque en este equipo no sé por qué pero no tengo eh No tengo arrancado por defecto el servicio de mongod entonces sudo service eh mongod Start en el caso de los que estáis en Windows no os preocupéis porque os arranca como servicio por defecto vale En el caso de Linux una cosa es instalarlo y otra cosa es arrancarlo como servicio vale con lo cual arranco y ahora sí ya tengo ahí documentos vale como os digo vamos a hacer un pequeño descanso y ahora a la vuelta pues eh No vamos a seguir exactamente con el documento vale vamos a analizar Cómo formatear documentos vamos a hacer un pequeño editor wuis wuet ahora veréis y paro grabación por aquí