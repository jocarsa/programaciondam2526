bien hoy para empezar quiero retomar un poco por dónde me quedé ayer al final de la tarde me quedé pensando cuando acabaron las clases en bueno en parámetros ventajas y desventajas de usar unas alternativas u otras a nivel tecnológico ayer os disteis cuenta que estaba utilizando un archivo csv para guardar la información y objetivo el motivo por el cual no quería eh guardar la información en la base de datos es porque cuando en una web o en una aplicación o en donde sea guardamos la información de registros en la base de datos al final lo que acaba ocurriendo es que el 999,5 o 99,9 por de los registros de perdón de lo que ocupa la base de datos son los registros vale Y por tanto por eso no quiero entre comillas ensuciar la base de datos con los registros ya nos pasa eso en cierta forma entre comillas con las imágenes vale que Eh Esto que os voy a decir es objeto de debate vale sino de polémica directamente que es acerca de la idoneidad O no de incrustar imágenes dentro de una base de datos sql vale de la misma forma que hay peleas entre la gente de Mac y la gente de Windows y peleas entre la gente de Android y la gente de iPhone pues también hay peleas en el mundo informático entre la gente de el sitio correcto para guardar una imagen es la base de datos Porque es un dato y la gente que opina que el sitio correcto es una carpeta porque es un dato pero no es un dato textual vale Pero bueno En definitiva sin abrir ese melón ahora vale porque ese melón es para abrirlo otro día eh voy a hacer lo siguiente lo que voy a hacer en este caso es que de mi Google Drive os voy a en primer lugar descargar una base de datos no sé si alguna vez hemos trabajado ya con ella vale No lo sé vosotros me diréis es una base de datos en un formato llamado sqlite lo utilizamos una vez en el primer trimestre con python a ver registros de b y base de datos vale Aquí está bien y me la voy a bajar Me la voy a bajar Pero la pregunta es utilizamos ese kulite pero utilizamos ese cite con esta base de datos pregunto No lo sé o sea ese cite me acuerdo qué utilizamos pero no sé qué abrimos Así que igual sí que abrimos esto con la de los navegadores correcto Vale pues la de los países correcto vamos a eso perfecto bien pues nos vamos a primero nos vamos a sistemas informáticos voy a hacer aquí gestión de la información y aquí voy a un momentín estructura de directorios identificación de software copias de seguridad tareas automáticas planificación lo voy a guardar Aquí bien lo guardo Aquí y ahora a continuación me voy a ir a Bueno me voy a ir a qué te diría yo me voy a ir a eh caray ese kulite aquí a div browser eso no me salía el nombre de D browser bien Así que abro Y así repasamos vamos a ver nos vamos a html nos vamos a eh dam nos vamos a sistemas nos vamos a gestión de recursos no gestión de conexión No espera gestión de la información tareas automáticas vale Y voy a abrir este registros pun db para que veáis que tengo una tabla llamada logs que tiene en la hoja de datos tiene pues eh lo podemos ver por aquí vale tiene el utc el año el mes el día el minuto el segundo el usuario la IP el navegador vale todo esto de aquí bien en su momento sabemos cómo pudimos hacer vale el país veis que en principio donde hay peticiones es Austria porque cuando creé esta base de datos yo estaba viviendo en Austria por eso las primeras entradas son mías obviamente vale con lo cual eh Vamos allá vamos a pedirle algo a la base de datos voy a abrir idle voy a crear un archivo nuevo y el archivo nuevo me lo voy a guardar en obviamente esa misma carpeta dam w html dam primero sistemas eh gestión tareas vale Y aquí Uy Mira No espérate averigua disco espérate esto ya tenía aquí cosas a ver no lo quiero guardar en la misma carpeta primero sistemas gestión Vale pues voy a hacer aquí una carpeta llamada proyecto analíticas Y entonces la base de datos Okay vale la base de datos de registros me la guardo aquí y por tanto Ahora me voy a proyecto analíticas y hago 001 sqlite bien en ese cite lo primero que voy a hacer es import esite ya está vale import esite as eh sq o lo que sea bueno da igual importa s kulite f5 y Oh no module name de site Cómo puede ser no site 3 vale f5 Ah Qué susto digo si la librería de seite es de sistema o sea es de viene por defecto con la instalación de python Vale ahora a continuación lo que quiero es eh abrir la base de datos y pedirle cosas así que me vengo por aquí me vengo por aquí esto fuera esto es de una juguete que estaba haciendo yo en python Vale y eh digo es cite Open database and Select While bien Y entonces aquí Me conecto eh el try no lo voy a hacer en un try lo voy a hacer lo más directo posible Aunque por facilidad vale pero conexión y la base de datos hemos dicho que se llama voy a cerrar blocs de notas no quiero github fuera esto luego y hemos dicho que se llama registros db cursor es conexión cursor vale intento siempre como veis los ejercicios hacerlos con el menor número de líneas Pos y luego evidentemente pues ya vemos ok Ya vemos pues cómo meterlo en funciones protegerlo con estructuras de control y todo eso vale Select all from logs bien y a continuación digo rows filas es igual a cursor fetch all 002 petición voy a decir Select all from logs limit 10 vale Y así nos Peta la consola Estos son filas y por tanto Pues ahora simplemente voy a decir print filas y ya está bien hago así f5 y vemos que tenemos ahí las filas como tuplas en este caso lo que quiero para mayor facilidad es decirle que el cursor vamos a decir 003 eh diccionario vale el cursor lo quiero como diccionari creo que es en minúsculas dictionary es igual a true vamos a verlo f5 no eh Ok cursor as dictionary y a ver cómo era el parámetro que había que poner para que en lugar de una tupla pues me lo devuelva como un diccionario que básicamente es una Ray vamos a ver a connection Row Factory Vale pues conexión Row Factory y ya está vale Así que a dict Row vale f5 perdón el dictar este ahora true f5 vale Y ahora a continuación me da un Row object y digo for fila in filas print fila f5 vale Row object y dict de fila Ah No se ve Vale pues voy a recargar la compartición de pantalla vale Y confirmador cuando podáis si sí se queda pillado en chat G No sé igual que ayer vale Pero bueno decidme si ahora veis python y si me veis mover el cursor vale bien pues di fila quiero la fila y convertirla Ahora sí esto es mucho más bonito a un diccionario vale Por qué Pues porque antes Tengo una tupla y en la tupla tengo que ir adivinando a ver qué es cada cosa pero si lo lanzo como un diccionario pues caray tengo pues al final un array nombrado Vale tengo un array con los nombres de cada una de las claves así que de esta forma digo Bueno pues eh diccionario es igual a dict de fila y por tanto ya puedo empezar a operar bien para empezar a operar en este caso lo que voy a hacer como una petición digamos y digo 004 eh ordenar por países Entonces al ordenar por países Pues yo vengo por aquí y digo vamos a ver voy a simular la consulta en D ser mejor Primero abro base de datos me voy a dam me voy a Primero me voy a sistemas me voy a gestión me voy a proyecto analíticas me voy a registros vale Y aquí en ejecutar sql Pues tengo una posibilidad de simular la consulta y entonces digo vamos a ver Ok digo Select all from logs vale Y ahora digo Group by país y digo count país coma país y vamos a ver qué nos da esta consulta le doy a Play y Okay Me dice pues las visitas que han habido desde los diferentes países un momento porque me suena quiero recordar que no sé por qué yo empecé con esa columna pero luego cambié la columna a extra 3es por algún motivo que si os digo la verdad Ahora mismo no recuerdo vale con lo cual vamos a verlo voy a decir que Ah perdón No estaba aquí voy a decir que extra 3 y extra 3 le doy a Play bien Ahora quiero order by e order by count extra 3 okay as número y as valor order by núo desk con lo cual le doy a Play Vale y tengo aquí pues las visitas digamos y ahora a continuación y ahora a continuación pues lo que voy a hacer en este caso momento espérate lo que voy a hacer en este caso por ejemplo es decir pues limit eh No sé 20 Dame los 20 primeros que con esto ya está bien vale Así que tengo aquí un resultado podría poner algún filtro vale filtram aquellas que no son nada Es decir a ver Dónde pongo el we extra 3 eh No es igual a nada le doy a Play vale Y me quita me filtra el nada Vale pues Ahora continuación me voy a Select me voy aquí pongo bueno tres comillas y aquí pongo la petición vale Y así en el caso de que hayan comillas pues no colisiona quiere decir que ahora ejecuto y ahora me da Ay qué Guay me da nada no puede ser bien Vamos a ver cursor execute pues no es normal que no me De nada porque sí que me debe dar algo a ver si yo ejecuto esta consulta si yo ejecuto esta consulta me da válido Okay bien Por qué no me da Pues no lo sé vamos a verlo voy a quitar el we ejecutamos voy a ir quitando cosas quito esto imposible cursor execute Group by no puede ser Select all from logs pues Fran tienes toda la razón no hay print vale con lo cual el programa lo está haciendo pero claro yo no estoy diciendo print diccionario Pues tienes toda la razón vale print diccionario muy bien así que le doy f5 y ahora sí Ahora ya tengo el diccionario con el número y con el valor vale Y el hecho de tener un diccionario ahora veréis que va a ser importante si mantenemos la clave y el valor o el número y el valor o el agregado y el valor ahora veréis para qué vale pero de momento muy bien Ok bien no pues me parece o sea el momento en el que vosotros empezáis A ver cosas que yo no pues Es una muy buena señal porque quiere decir que no solo estáis entendiendo el código sino que lo estáis entendiendo al máximo en el sentido y sabéis empezar a ver dónde hay errores Oye no se está imprimiendo Nada igual es porque no había un print vale o sea que ya te digo muy bien visto y muy buena señal Entonces ahora a continuación yo digo vale Esto está bien pero yo quiero Añadir yo voy a tener que Añadir siempre cuando creo una un p Chart dentro de matplot Liv pues tengo que Añadir dos elementos vamos a hacerlo vamos a demostrarlo ent les digo mat plot le simplest p Chart Cuando digo simplest lo que quiero decir es que chat gpt muchas veces nos pone unos ejemplos que te cagas de pero es como ya pero no quiero eso vale Quiero lo más sencillo posible Este es el ejemplo más sencillo posible Así que gráfica importo m plot Li labels y sizes vale Esto es lo que ocurre labels Y sizes le doy a f5 y me sale vale un p Chart ahora lo que quiero es enlazar una cosa con otra es decir lo que quiero es enlazar que los valores realmente sean los que aparecen por aquí por tanto voy a decir lo siguiente labels etiquetas y valores y digo número y valor vale Elí claro etiquetas a ver Esto es números y valores para que coincida vale con la nomenclatura que estoy utilizando entonces valores es igual a una lista vacía números es igual a una lista vacía Por tanto ahora quito el print valores pun apen es diccionario de valor por eso algo que coincida y números punto apen diccionario número si todo va bien Ahora digo quiero que me crees un p Chart y quiero que me lo crees con números y labels es igual a valores así que le doy a f5 Y entonces me aparece Esto vale Y entonces ahora en la primera parte del programa lo que ocurre es que se realiza digamos una petición a la base de datos se obtienen unos datos en un diccionario y a continuación se genera una gráfica con todo esto y luego acordaos que yo puedo venir por aquí 006 y guardo la imagen y al guardar la imagen os voy a decir plt saave fig y me lo guardo como sistemas no perdona me lo guardo como países punto Eh jpg vale por ejemplo jpg bien Así que f5 Okay y figure 1 está preparado vale Y ahora me voy aquí y Oye ah espera Sí vale el saig debería ir antes del plot punsh okay Y ahora me lo guarda vale Y en países Ey tío f5 vale cierro Ahora sí vale Y en países Ahí me lo genera y tal luego obviamente siempre podemos personalizar Pues los colores las letras las tipografías lo que queráis vale pero de momento ya tengo una gráfica Pero qué ocurre y aquí viene la cuestión yo no quiero generar una gráfica Yo quiero generar un panel de control lleno de gráficas igual que el que hicimos para servidor pero en este caso lo quiero para unas analíticas así que por cierto que estamos haciendo la parte del panel de control ahora luego tenemos que hacer la parte de php de guardar información en esta base de datos esite vale Pero vamos a hacer primero el panel de control y ahora que tenemos una base de datos con datos y luego hacemos lo otro bien estamos en países por lo tanto y ahora a continuación y ahora viene la cuestión ahora a continuación Yo quiero hacer esto para otras cosas por ejemplo lo quiero hacer para ips vale vamos a ver la base de datos vamos a ver la base de datos y veo que por ejemplo tengo ips diferentes Vale o años vale o lo que sea bien para ello un momento vamos a ver por aquí el idioma creo que Ah sí Mira el idioma vale el idioma me lo estoy guardando aquí en referencia Pues aquí en referencia Quiero saber cuál es el idioma con el cual se me conectan a la base de datos voy a hacer una cosa como los primeros registros los tengo corruptos V los primeros 800 registros los voy a borrar Vale entonces delete from logs Where we qué we Ah no Ah sí Oye no no mm no tengo identificador en esa tabla vale vamos a ver Bueno voy a hacer lo siguiente puedo barrar por utf aquí Okay W utf es menor que este valor utf es menor que este valor de aquí Hala Play y ya está Okay hoja de datos Y en principio la base de datos ya está un poquito más Limpia bien referencia ahora la columna que quiero es referencia Pues ahora a continuación claro yo ahora qué hago porque me tendría que tocar ahora 007 realizo otra petición pero claro petición tengo que volver a copiar todo esto no me apetece nada la verdad como no me apetece nada lo que voy a hacer es no hacerlo y al no hacerlo lo que voy a empezar haciendo es una función para crear una función Por cierto que Eh Al final debería hacer un conexión punto Close conexión pun Close sería una buena costumbre y eh conexión punto Close vale claro yo a continuación 008 agrupo en una función y entonces digo eh qué te diré yo Def petición gráfica hago así luego ejecuto petición gráfica y se ejecuta pero claro petición gráfica ahora mismo no hace nada conexión cone sí es conexión lo que quiero cerrar ahora mismo conexión gráfica no hace nada interesante en el sentido de que pues simplemente todo el rato los mismos valores será mucho más interesante si la personalizo entonces 009 parámetros en la función y entonces digo petición coma eh salida esto quiere decir que salida es salida espera esto de aquí lo meto aquí y ahora esto de aquí lo meto aquí Entonces esto es salida y esto es petición con lo cual yo hago por una parte una petición gráfica para sacar los países pero luego a continuación una vez que lo he parametrizado yo puedo decir que quiero petición gráfica para sacar un momento dónde estás aquí para sacar la referencia la columna referencia referencia y esto lo como idiomas voy a quitar el plot show ya que ya sé lo que hace f5 Y entonces si voy a esa carpeta me encuentro que hay un archivo llamado países y hay un archivo llamado idiomas lo cual quiere decir que ahora a continuación pues puedo buen ap parte de que todavía e hay países por aquí esto Qué es a ver un momento yo diría que ha un poco reutilizado la Gráfica a ver plt vale Necesito que cada vez que haga una gráfica pues gener una nueva gráfica Vale entonces eh vamos a decir generate New Chart on each plot vamos a ver vale lo que quiero es no parece que va a hacer un close No quiero porcentajes O sí que quiero porcentajes Oh pues sí que quiero porcentajes sí vaya vale Y el plot pun close Esto es lo que está haciendo vale Así que 010 borro la Gráfica Así que copio y pego f5 y eh vamos a ver idiomas y ahora en idiomas Pues ahora me lo coloca correctamente y además me pone porcentajes que no está tampoco nada más Vale y países y distribución de datos y todo eso vale fenomenal bien claro una vez que tengo esto estoy mezclando vale estoy aportando estoy sumando Pues todo aquello que vamos Aprendiendo a lo laro de los meses Pues yo ahora a continuación quiero pedir más cosas Pero la idea es esta vale la idea es que simplemente a partir de aquí Pues ahora a continuación hago una petición gráfica y ya está bien pero ahora además hay peticiones que yo puedo hacer Y en lugar de crear un pie Chart Quiero crear un bar Chart vale una gráfica de barras claro Espérate porque para hacer una gráfica de barras pues esto es petición gráfica que sería tarta pero si hago otra función que comparte un montón de parámetros realmente habrá un montón de duplicados entre las dos funciones Cuando esto ocurre siempre empiezo igual repito muchas veces el mismo ejemplo para que vayáis pillando el rollo de programación estructurada he pasado a funciones y de funciones voy a pasar a objetos Así que para ello digo 011 creo un objeto una clase Y entonces digo eh Class jv gráficas no sé cómo llamarlo jv analíticas voy a llamarlo bien Y entonces digo Death init aquí y todo esto de aquí todos estos datos vale los paso al constructor Esto va al constructor Así que self pun connection es igual a esto conexión self pun connection r Factory es igual a esto self pun cursor es self connection conexión cursor Vale y filas no hace falta filas no hace falta porque eso ya me lo quedo creo bueno Vale Voy a poner el self punto cursor filas esto ya se puede quedar vale Okay eso ya es vamos a poner como que es privado esto quiere decir conexión punto Close pues no necesariamente no vale esto fuera bien esto quiere decir que yo ahora a continuación voy a decir esto es petición gráfica no esto es grafica tarta y entonces yo digo eh conexión o vamos a ver o petición no sé cómo llamarlo eh sesión es igual a jv analíticas eso quiere decir que ahora tengo disponible el gráfica tarta bien a continuación voy a decir grfica tarta y en los parámetros de gráfica tarta voy a poner esto de aquí abajo un momento bueno Esto buen sí lo voy a comentar voy a comentarlo de momento voy a desactivarlo Ok vale vamos a probarlo a ver si va bien plt A ver si va bien o tengo algún error vale init Ah Sí perdón init requiere self y gráfica tarta requiere self vale otra vez bien error cursor is not Define es self pun cursor Dónde está dónde lo pone self pun cursor y self cursor vale venga otra vez vale una vez que hemos hecho esto voy a borrar las gráficas vale una vez que hemos hecho esto pues ejecuto y Se han generado las dos gráficas de forma correcta una gráfica perdón de momento y ahora a continuación ahora sí le digo sesión gráfica tarta desbloqueo esto y sesión gráfica tarta y vamos a ver sí sí desde luego podemos editar que no aparezca en la en el bloque sino que aparezca en cada país y sin problema de hecho vamos a ver bueno podría incluso meterlo aquí sabes podría incluso meterlo en el valor hacer un sumatorio y luego meterlo vale Voy a tirarlo de momento como está pero sí Ahora luego lo podemos meter en el texto no hay ningún problema Vale entonces genero dos gráficas de tarta ya tengo aquí las dos gráficas y ahora a continuación y ahora a continuación si ya tengo una clase 012 creo otro método y para crear otro método yo simplemente copio este método me lo pego y lo llamo gráfica barras y gráfica barras va a ser prácticamente igual que gráfica tarta la diferencia es que en lugar de poner un plot pun pi voy a poner un plot pun bar de esta forma a continuación voy a hacerlo con los países por ejemplo y digo gráfica barra de países barra Así que ejecuto eh vamos a ver a gráfica barras sí gráfica barras vale bien nos dice H no me hace falta el H vale Okay momentín eh fix bar Chart method hace falta un parámetro que es el H vale No pasa nada vamos a ver vale gráfica barras diccionario valores números ya está Esto me da un poco igual vale venga gráfica barras tiramos gráfica barras Okay lanzo ejecuto vale Y ahora tengo por una parte países lo tengo en tarta pero luego por otra parte tengo países en barra vale No quiero ver realmente países en barra lo que quiero ver en barras es por ejemplo las visitas en cada uno de los años que ha habido visitas Así que para ello me vengo a la base de datos me vengo a la base de datos simulo una consulta y digo Select all from logs Group by ano y entonces digo count ao as no me acuerdo as número ao as valor le doy a Play y me dice esto que estamos viendo vale me dice las visitas que han habido en cada uno de los años y ahora sí Esto es lo que me quiero guardar como gráfica de barras vengo por aquí Esto me lo guardo como eh visitas por año f5 me voy por aquí visitas por año dónde estás e no Ah sí visitas por año vale Y tengo que muy irregular es una aplicación que vale he ido moviendo de forma muy irregular tengo aquí que con estas visitas pues veo que vale eh se me han ido guardando pues una serie de registros por año pero es que lo bueno de esto es que a continuación una vez que hemos hecho esto yo puedo empezar a generar peticiones de absolutamente lo que me de la gana Por cierto otra cosa que puedo hacer es eh empezar a separar esto para que en un archivo esté la clase y en otro archivo diferente esté la llamada a la clase vale para ello Bueno voy a hacer una cosa voy a sucumbir al poder del imperio me voy a bajar el visual Studio code igual lo tengo aquí en la tienda no lo sé porque cuando las los proyectos de python se complican Pues bueno hay que reconocer que visual Studio code sí está en untu verdad Vale pues voy a buscarlo visual Studio code miral ahí está el code vale Oh si ya lo tengo instalado No me digas pues code fíjate vale el Imperio ya estaba instalado en mi ordenador no me había dado cuenta vale pues visual Studio code muy bien así que Ok Ok Yes no quiero el repositorio no vale Quiero abrir una carpeta no Open editors no cierra vale Quiero abrir una carpeta file Open folder Quiero primero quiero sistemas informáticos quiero gestión quiero proyecto Quiero abrir vale Y con esto Yes I Trust the authors vale Y con esto yo ahora a continuación dentro de proyecto analíticas Quiero crear una nueva carpeta llamada 013 external analización Y así pues veo vale Ya os digo no me hace mucha gracia el visual Studio pero pues bueno para ver carpetas pues viene mejor entonces que también lo puedo hacer con hedit pero desde visual Studio puedo ejecutar en fin hay que joderse bien hay una pequeña cuestión que hay que tener en cuenta y es que eh A ver creo otro método copio esto lo pego aquí y lo llamo Main python y ahora lo pego vale hay que tener en cuenta que le voy a dar a Play y va a funcionar pero no debería funcionar le doy a Play vale Y ha funcionado y me lo ha guardado no debería haber funcionado porque teóricamente yo estoy abriendo registros.pdf de la carpeta es un poco raro vale lo digo porque en cuanto a uso de recursos Pues hay veces que lo que funciona en visual Studio no funciona en idle y viceversa es por esa cuestión de la carpeta fundamentalmente Bueno pues ahora voy a crear un archivo llamado jv analticas python le muevo Bueno realmente esto le muevo Todo esto le muevo la clase lo muevo Aquí y ahora en Main python digo from jv analticas import all vale import all que básicamente es la clase lo cual quiere decir que pues en este archivo nos podemos centrar únicamente en la instanciación de la clase y la llamada a los métodos que no es moco de pavo tampoco teniendo en cuenta la longitud de las peticiones sql y luego a partir de aquí pues eh Cuando queramos saber lo que hace la clase pues entramos ahí y si hace falta la ampliamos y lo que necesitemos vaya Vale pues ya tengo esto Así que ahora quiero pedir más cosas y si digo que quiero pedir más cosas un momento Claro porque aquí creo que no me deja duplicate no me deja duplicate desde aquí bien tengo que hacerlo desde aquí entonces copio y pego f204 y más peticiones esto quiere decir que voy a hacer lo siguiente voy a hacer lo siguiente voy a crear una carpeta llamada imágenes y voy a modificar la clase a ver que cierre cosas voy a modificar la clase para que me guarde el saig en imágenes barra má salida vale pues aquí existe la carpeta de imágenes Sí vale aquí lo que voy a hacer a continuación es gráfica barras count mes visitas por mes y ahora le doy f5 Perdón le doy aquí a ejecutar se ejecuta me voy a la carpeta imágenes he visitas por año a ver y Vita promes que Ah Ahí está vale Ah Sí perdón perdón que he modificado el sa fig de un pero no he modificado el saf de otro Eso quiere decir que esto a control shift S vale Ok para ejecutar control shift S Eh pues no parece que eso que es que eso es guardar Cómo Ah sí control shift S Pues será control alt S No sé bueno da igual vale Okay Play bien Entonces ahora sí idiomas países y visitas por año y lo que sea y vamos viendo como poco a poco pues me voy haciendo un panel de control vale me voy haciendo Perdón las gráficas Para un panel el de control voy a ver y ahora Quiero las visitas por año ya estos En distribución de datos le tengo que poner algún título Pero vale gráfica barras Pues voy a decir que ahora quiero gráfica barras eh count día visitas por día f5 que no f5 no es tengo ahí el chip de f5 me voy a la carpeta de gráficas y veo que tengo visitas por día vale Y lo mismo voy a hacer visitas por hora no hace falta que haga visitas por minuto y visitas por segundo Así que visitas por minuto por hora Perdón count hora as H Y le doy a Play y ahora aquí a continuación aparece ahí lo tenemos visitas por hora que me dice en este caso pues que Eh pues me visitan más digamos por la tarde que por la mañana bien okay Vale lo que sea vamos a ver qué más tenemos en la base de datos Porque como veis ahora es una cuestión de disfrutar bien Vamos a ver eh extra dos vale que es las páginas visitadas extra dos que son las páginas visitadas vale Y bueno y quiero los navegadores Okay vamos a ver un poquito de ayuda Eh given on database sql sqlite code to get Group by and count of operative systems and sql code to get Group byy sí sí Ahora vamos a las pantallas vamos a las pantallas Group by un count eh off browsers a ver si hay suerte a ver si hay suerte vale Okay perfecto bien Mola me ha hecho un Case vale vamos a ver si hay suerte me voy aquí me voy a ejecutar sql y digo eh voy a hacer esto un poco más pequeño user agent en este caso es navegador vale navegador navegador bien and as operating System vale from logs Group by navegador Ah no Group by operating System vale de momento le doy a Play Mola Mola mucho bien y ahora a continuación digo vale esto es as no me acuerdo as Aquí lo tengo as número y as valor y número ejecutamos no Ah sí Y eh Group by valor No tampoco eh No such column count a ver ah Sí perdón Uh a ver Ah Group by count vale Ok as número es no me acuerdo as número y esto es as valor Play Vale ahora sí Y entonces ahora me puedo ir al código gráfica tarta me copio me pego me copio y me pego Y esto es eh sistemas operativos Play probamos aquí sistemas operativos vale Ahí lo tenemos malalo Qué bonito y bueno todo estaba claro esto suele pasar bien y vamos a continuar porque de la misma forma me puedo sacar los navegadores bien me voy a hacer otra gráfica de tarta A ver no esto no me voy a hacer otra gráfica de tarta la Gráfica de tarta en este caso es este de aquí pero yo sé que la tengo que modificar vale navegador navegador ador vale end as valor count as número from blocks Group by valor order by número y esto es navegadores guardo y ejecuto y así En definitiva tal y como podemos ver vamos a ver navegadores e navegadores no a ver Hay algún error Quizás sí user agent Dónde está user agent Ah aquí then user agend Ok a ver ahora Vale ahora teóricamente ha creado por aquí navegadores y navegadores pues Chrome otros firefox Safari opera lo que sea bien Pero además yo quiero eh En este caso una petición muy importante si empiezo a navegar por los datos vale veis como le vamos sacando jugo a la base de datos si navego por los datos de vez en cuando me voy a encontrar con un dato un poco preocupante Ah por cierto ahora iremos a la pantalla eh vamos a ver un dato un poco preocupante de Bot vale hay Bots me están visitando los Bots Entonces yo quiero esto y ahora digo given a database with user sql to get How many user agents contains B Word and How manyes not con es decir visit hacen Quiero saber cuántas son bots Y cuántas no son bots que no es moco de pavo vale Y entonces vamos a ver esto no tiene el formato que yo quiero y Play Eh sí okay Case buenen buen Qué buen navegador Play from navegador from logs Perdón Ok vale contain not contain Bot vale no lo quiero exactamente así a ver not really like this not really but in two rows colums O sea no lo quiero en columnas lo quiero en filas Ah muy bien un Junior all vale muy bien Ok esto Mola Vale entonces ahora a continuación as count as núo we navegador like Sí pero category dónde pone aquí as valor vamos a verlo y valor y count as número ha número ok vale Ok bien aggo así Ah contain Bots caray porque Bueno pues nada voy a hacerlo aquí vale visual Studio esto es gráfica tarta me voy Ya voy aquí copio no sé por qué se ha quedado frito pero bueno no pasa nada pego y digo Bots y aquí digo Bots no Bots Así que le doy a Play me voy a la carpeta voy a buscar los Bots Wow y un 12 por del tráfico es un buen trozo del gráfico vale Y ojo Eso hace años igual Ahora son más vale Y luego Incluso en un momento dado le puedo decir Bueno pues dime qué Bots diferentes hay O sea lí me los Bots que hay Porque si me visita el Bot de Google Pues vale Pero a ver si me está visitando algún Bot raro ruso que me quiere atacar o vete a saber y me está tanteando vale que si mi web es una web normal pues no pasa nada pero si es una aplicación empresarial Pues sí que me importa saber qué Bots me están revisando no a ver bien pues vamos a ver el tema de las pantallas ahora haremos panel de control vale vamos a ver el tema de las pantallas y eh Para empezar esto se me ha quedado un poco frito frito sí m guardar vale Okay bien con las pantallas lo que ocurre es que eh yo tengo el valor de la pantalla en una columna x y en una columna y vale que tampoco pasa mucho por ello y luego la ventana en la cual me estaban visitando si estaba a pantalla completa o no bien pues para ello a continuación yo lo que voy a hacer vamos a verlo va a ser lo siguiente vamos a ver sql Table have screen resolution in two colums pantalla x and pantalla y Select Group and count to How many visitors Group by resolution vale Vamos a darle bien en este caso aquí vale tenemos una concatenación vamos a verlo selecciono ve aquí pantalla x as valor count as número from logs order by número aquí OK Y tenemos estas pantallas recordad que estos datos son de hace unos cuantos años lo tenéis por ahí vale pero pues fijaos que hay unos cuantos tamaños de pantalla por lo que decías por el respons vale aquí aparece lo del responsive Así que vengo por aquí me copio Esto me voy a visual Studio me voy a gráfica de tarta me pego Ahora sí la petición como veis la idea la filosofía de esto es que una vez que yo os pase esto porque obviamente como todos lo voy a pasar pues vosotros Vais a tener la capacidad de hacer tantas peticiones como queráis y ahora le doy a Play me voy aquí me voy a estos son bots no pantalla Ah perdón Bots No esto son pantallas voy a decir order byal limit 10 para que tampoco me saque 1000 millones de resoluciones de pantalla que me saque las 10 más frecuentes vale Bots Dónde está pantallas pantallas Ah algo he hecho mal vale okay okay Ah vale Perdón aquí el punto y coma limit okay Y pantallas y aquí tenemos la distribución más frecuente de resoluciones de pantallas con esto ya tenemos la una serie de gráficas mínimas ahora luego vemos qué más información podemos sacar seguro que podemos sacar más información pero de momento yo lo que quiero es hacer Pues un poco lo mismo que hicimos ayer que es generar un panel de control desde el cual pueda ver pues eh qué es lo que vale Qué es lo que está sucediendo con mi página web sin ir más lejos me voy a copiar el mismo htm l de ayer porque estaba Guay dónde lo pusimos pues no me acuerdo estaba en primero estaba en programación y no me acuerdo cómo se llamaba proyecto No cómo se llamaba era gestión de bases de datos proyectos vale era tomato no s tomato Vale pues cargo el Index 6 aquí me voy cargo Index vale de momento bien y vamos a verlo vamos a abrir con Google Chrome bueno espera no antes de abrir con Google Chrome voy de momento a el Index Estos son analíticas esto cargaba así fss color tomato vale fantástico y vamos allá ahora mejoraremos más las gráficas porque seguro que quiero poner algún tipo de título a la Gráfica de hecho incluso igual quiero que el título de la Gráfica sea también el título de la imagen No lo sé vamos a verlo bien Esto es no sé qué es vamos a ver qué tenemos imágenes luego lo podemos re estructurar vale Pero primero quiero Bots Y entonces me voy a imágenes barra Bots ahora copio y pego de momento Quiero echarle un vistazo al panel a ver qué tiene idiomas Quiero navegadores quiero países quiero pantallas quiero sistemas operativos quiero eh visitas por año quiero visitas por año quiero visitas por día quiero visitas por día quiero visitas por hora quiero visitas por hora y quiero visitas por mes luego ya lo puedo reordenar visitas por mes si ahora nos vamos al navegador y nos vamos a Host barra dam barra primero barra sistemas informáticos gestión de no me acuerdo gestión proyecto analíticas Vale pues tenemos esto donde en un momento dado Incluso si lo tocamos un poquito vamos a ver Esto va a ser ahora sí ya puedo hacer esto va a ser Index uno porque ahora a continuación voy a hacer Index 2 y en Index 2 voy a decir en el Flex vamos a verlo aquí Ah Espérate que realmente me coge cuatro columnas no a ver bu en Ah claro vale porque esto tiene un Max ahí Wi 9% Sí pero no el body el dashboard no me cuadra no me encaja 400 Index 2 no 200 vale esto es otra cosa muy bien vale con lo cual Pues el objetivo a partir de ahí es tener Eh pues una un panel de control donde podamos ver la información e incluso luego pues con un poquito de con un poquito de javascript podemos ampliar esto para que al hacer clic en una imagen se vea la imagen en grande esto es panel de control de servidor Esto es lo voy a llamar title analticas voy a llamarlo analítica web vale como siempre seleccionado un color vale seleccionado un color css que os mole y le ponemos un nombre de color así que alguien me diga algo vale alguno Que os mole alguno que le podamos aplicar eh pale Violet red vale vamos a ese paale Violet red vale venga me ha molado Hala paale Violet red lo vamos a usar paale Violet red Okay Ok vamos a probar probarlo Okay Vale Mola bien y voy a apuntándole red y esto es eh analítica web vale para luego no repetir colores bien hago así Uy Dónde está la web cerrado la web no vale Y ahora Quiero añadirle un poquito de javascript simplemente pues como se ve un poco de lejos Vale esto luego se vería esto luego se vería así vale para que cuando haga clic en una imagen pues se me haga la imagen grande y así pues una vez más tal y como comentábamos ayer pues vamos integrando tecnologías vale en el sentido de que pues hacemos una integración de python que guarda jpg a través de mat blot le Y eso se alimenta a html css y javascript vale para que veáis una vez más que insisto vale que no es que no os dejemos a python arrinconado al contrario vale lo único que pasa es que debemos tener en cuenta que para este caso no va a ser ningún problema que claro en el momento en el que utilizamos eh scripts de python pues no podemos aplicarlos a la gran mayoría de hostings compartidos vale sino que vamos a tener que aplicarlos a un vps con Linux donde tengamos la posibilidad de ejecutar scripts instalar python configurar el Chrome o lo que sea que ya os digo que en mi caso para lo que voy a hacer en las clases así va a ser vale bien entonces en como digo voy a meter un poquito de javascript vale Así que vamos a hacerlo rápido eh Espera voy a esto fuera vale Ok y Bueno aquí vale Y ad js no voy voy te cuento es una pregunta muy buena vamos a hablar de ella porque de hecho esa pregunta es de hecho justo para esta asignatura que sistemas informáticos eh ad js t eh Show modal window Y ahora te cuento momentín un momentín y te cuento porque eso que has preguntado es para mucho hablar y al mucho hablar digamos creo que os voy a poder dar una perspectiva bastante global del pasado del presente y del futuro ahora veréis por qué un momento que esto me Gen el javascript Y así pues tenemos un panel con analíticas vamos a ver modal vale Y aquí viene el javascript Okay muy bien eh vamos a ver Esto me lo guardo como Index 3 Vamos allá y cargamos Index 3 y no no ahora verás no es necesariamente eso vale Y al hacer clic pues se abre la el modal y luego puedo cerrar el modal vale Y ahora también lo que haremos es mejorar un poquito el archivo de python para que en lugar de poner distribución de datos pues ponga el título de la Gráfica vale pero eso va a ser ahora en un momento vamos a ver antes de ello vamos a hacer una pausa de eh de panel de control vamos a hablar de este tema de los hostings creo que tenemos clase si no recuerdo mal hasta las 5 que tenéis inglés perfecto vale con lo cual me da tiempo perfectamente a explicar esto antes de inglés veréis Qué es una empresa de hostings Bueno una empresa de hostings es una empresa Hosting eh Bueno voy a poner Hosting voy a poner imágenes Vale y básicamente una empresa de Hosting es esto igual es una imagen de Inteligencia artificial Vete a saber No lo sé vale porque aquí veo mucha Lucecita y mucho cachibache para lo que es una empresa real de hostings Pero porque muchos racks de estos son simplemente de metal y ya está no tienen tanta luciad y tanta pero una empresa de Hosting básicamente es una empresa que tiene un montón de ordenadores esos ordenadores están instalados en modo servidor son ordenadores que se pueden abrir en caliente que tienen dos discos duros en ra para hacer copia de seguridad y que en lugar de estar en formato Torre están en formato rack vale que es eh ordenador formato rack que puede ser 1 u 2 u 3 u Perdona 3 u no 4 u vale que son básicamente estos de aquí es decir esto que estáis viendo esto es un rack 1u y esto que veis abajo es un rack 2u es decir cuántas ranuras ocupa básicamente para entendernos vale Este de aquí es un 4u vale básicamente es de hecho si os fijáis este es literalmente una torre pero con dos asas vale Este de aquí o de este formato son básicamente torres pero metidas en un chasis que está pensado para meterlo dentro de un rack y evidentemente por detrás de estos racks eh por detrás Pues hay un montón de cables Hay un montón de cables vale que reúnen todos los cables de cada uno de los racks Así que básicamente para entendernos una empresa de hostings vale es una empresa que tiene un saco de ordenadores en un local La pregunta es un momentín y aquí la pregunta es si tú Fran tuvieras que montar una empresa de estas Cómo lo harías Qué servicio darías yo y ya te digo para empezar si fuera yo el que lo tuviera que hacer no lo haría o sea yo nunca me metería en un negocio de estos porque debe ser super esclavo Pero bueno al final es un negocio que da un servicio como otros muchos negocios bien pues si miramos el índice tb cualquier empresa de Hosting en un momento dado hace un análisis de las tecnologías que hay actualmente en el mercado claro una empresa que está dando servicios en 2024 no se ha creado en 2024 igual se ha creado en 2004 y en estos años ha tomado unas decisiones de qué servidores comprar Qué tipo de servicio dar a cuánto dar el servicio vale a Cuánto cobrar el servicio que esa es una decisión muy importante Entonces qué ocurre Pues que en muchas ocasiones la decisión de qué tipo de servicio amos proviene de estos años es decir 2010 2014 20188 Vale entonces en esos años de hecho por aquí no está php Vale server Side languages popularity Sí pero quiero una gráfica a través del O sea no de hoy no la tengo through Time Mira historical trans justo ole increíble brutal Esto es lo que estoy buscando vale Esto es lo que hay Ah 223 no el último año no claro el último año no A ver monthly no a ver historical trends history ya pero tío no me lo des Ah mira jly o venga Esto sí Esto es lo que hay Esta es la Gráfica que hay claro vosotros diréis no veo un pimiento ok No pasa nada cojo Esto se lo meto a chat gpt y digo create Chart y me lo convierte a una gráfica para que lo pueda ver mejor técnicamente no ya para que yo lo pueda dar mejor sino para que vosotros lo veáis mejor ya que yo Esa tabla me la sé más o menos de memoria vamos a ver momento que está analizando el resultado Fran de esa gráfica Ahora cuando lo veas es que no ya hoy en 2024 vale porque hoy en 2024 python está muy arriba pero hace 10 años 15 años 12 años eh python No tenía la cuota de Mercado que tenía hoy ni en servidores ni en no servidores vale hace 10 años mientras se va cargando la gráfica vale hace 10 años python 2013 2014 vale python era bueno 1,5 por Perdona en servidores pero en trends en tb vale python en 2014 fíjate Dónde estaba o sea y estaba en el 2,5 por Y actualmente está ya tocando el 25% o sea está al 1% de có estaba vale está 10 veces más de como estaba antes Entonces qué ocurre Pues que si tú tuvieras una empresa de eh de Hosting y tuvieras que dar un servicio Pues es normal que las empresas insisto decisión tomada 10 años atrás pues dijeran a ver qué es lo que la gente está utilizando aquí ole venga ahora Enséñame la grande Vale qué es lo que la gente está utilizando Pues php a tope Pues php a tope vale o sea asp bajando cada día más y un montón de pequeñas tendencias subiendo vale por tanto yo digo hace 5 10 años vale la gente que usa php a mucha muerte y mysql a mucha muerte vale yo qué voy a hacer pues lo que voy a hacer es generar un servicio compartido fácil y barato apto para la gran mayoría de consumidores basado en php y mysql ten en cuenta y además tú lo sabes mejor que nadie digo mejor que nadie pero o sea tú lo sabes muy bien En definitiva que una gran cantidad de empresas chupan directamente de wordpress y wordpress no es ni python ni node ni db ni nada o sea wordpress es php mysql con lo cual todo el mundo la mayoría de gente está usando php mysql wordpress tira de php mysql quiero generar algo que sea fácil barato basado pues lo baso en php y en mysql y ya está y quien quiera más quien quiera extras que se pille un vps o un dedicado luego por otra parte también hay que decir que a día de hoy y esto lo hemos visto aquí en clase pero claro vosotros no tenéis el dato histórico vale igual se lo puedo preguntar a chat hpt A ver si lo tiene que es cómo han ido evolucionando los precios de los vps y los precios de los vpss han ido cayendo poco a poco hasta que un vps como hemos estado viendo en semanas anteriores pues está prácticamente al mismo precio que un Hosting compartido vale con lo cual hace 10 años pues Oye quieres algo barato rápido y fácil te pillas un Hosting compartido con php y con mysql ahora quieres cosas especialitas Bueno pues te pillas un vps pagas más y ya ahí te puedes hacer dentro lo que tú quieras a día de hoy Bueno a día de hoy ya no es igual que hace 10 años a día de hoy pues sí está php pero python está disparado y hay mucha gente que está pidiendo hacer cosas con no Djs con lo cual claro qué instalan en un compartido pues es como no sé porque es que claro si arranco un servidor con python no arranco con php Y si arranco con node es otra cosa con respecto a php y luego está mayy sql pero van apareciendo otras cosas como deb que viene Pisando fuerte entonces claro qué es lo que hacen a día de hoy Bueno a ver vengo dando un servicio desde hace décadas no lo voy a parar De repente vale o sea sigo dando el servicio rápido fácil barato de basado en phpm sql porque por otra parte a día de hoy todavía hay mogollón de gente utilizando wordpress y lo va a ha durante muchos años quien quiera extras que se siga pillando un vps pero el precio del vps ha bajado mucho de tal forma que quien quiera extras pues Oye te pillas un vps no va a ser eh tan fácil como un compartido sí que va a ser igual de barato que un compartido Pero la idea de un vps es que dices Bueno tú según lo que te quieras instalar te metes en tu Linux y ya te instalas ahí lo que a ti te dé la gana pero tú verás Lo que te instalas porque es que claro no es como antes hace 10 años Es que era php sql ya está ese es el estándar para hacer web a día de hoy no es que haya otro estándar es que hay tantas opciones que yo que sé sabes Entonces sí correcto es esa es otra cosa efectivamente Y es que hay un montón de gente con un servicio en funcionamiento de phpm sql en un compartido a ver cómo cambias tú a esa gente de plan es que no puedes vale con lo cual O sea tú le dices pero es que incluso aunque actualices los 1000 servidores de 2010 Es que tampoco puedes porque la gente el que tiene un wordpress no quiere que de repente le metas un python y le deje de funcionar el wordpress Porque esa persona es una empresa que es peluquería Martínez y peluquería Martínez no quiere que de repente le deje de ir la web porque como te puedes imaginar peluquería Martínez eh No sabe nada ni de python ni de php ni de may ni de nada Solo sabe que tiene una web y le funciona no quiere saber nada más vale por tanto en ese terreno se aplica el si algo funciona no lo toques es decir los Hosting compartidos con p ni los toques ahora lo que sí que pueden hacer es ir bajando el precio de los vps Y eso sí la gente obviamente Pues tendrá que aprender pues unos mínimos conceptos de Linux para meterse instalarse cosas configurarse su entorno y poner su página web en funcionamiento vale otra cosa es que a lo largo de los años las últimas dos décadas nos hemos acostumbrado todos a que nos dan panel de control de phm sql y nos hemos acostumbrado a que todo lo hacemos con paneles de control super para niños qué bien gracias empresas de hostings pero llega un momento en el que tenemos que darnos cuenta de que eso no es gestionar un servidor eso es utilizar un panel de control super chuli y super para niños de las empresas de Hosting Pero al final montar un servidor es montar un servidor es meterse por línea de comandos y empezar a instalar y configurar y poner en marcha las cosas sabes O sea que en ese sentido Estamos pegando entre comillas como te diría yo como una vuelta al pasado pero es que debe ser así vale pues eso es lo que te digo es lo que te digo vale para la mayoría es suficiente pero claro cuando tienes una página web con un php un mysql y Oye una base de datos mysql unos usuarios ftp pues Oye te pones un cpanel o el cpanel o las alternativas que tiene cada desarrollador de o sea cada proveedor de Hosting y con el cpanel te lo configuras todo pero claro en el momento en el que entra por aquí en juego el python el nodejs el mysql el o sea cada infraestructura bueno y por no hablar del tema de frameworks o sea cada servidor puede tener una infraestructura diferente con lo cual el c panel se queda como diciendo hostias es que yo no sé qué hacer o sea el cpanel cuando es AB y C el cpanel te funciona pero cuando cada servidor puede tener una combinación diferentes tecnologías Pues el cpanel muchas veces no Ojalá Pero no da para todo no te puede representar todos los escenarios Vale entonces de esta forma con esto lo que os quiero decir es un poco analizar el pasado el presente y el futuro qué es lo que va a ocurrir en el futuro pues yo creo que probablemente poco a poco los compartidos van a ir siendo minoritarios y la herramienta estándar será un vps d a cada uno entrará y se montará su aplicación y su infraestructura y su combinación de tecnologías y su lo que quiera otra cosa es que quizás probablemente pues cpanel saque futuras versiones o cpanel o otro desarrollador donde en esas futuras versiones pues integren o sean capaces de integrar y casar y compatibilizar muchas tecnologías indefinidas vale Claro eso es lo justo eso es lo que te digo Fran que a día de hoy tienes un vps por 2 al mes y tiene un rendimiento de centillo no Guay pero de centillo hace 10 años efectivamente o sea decirle un cliente vps era como decirle prepara la cartera y si le decías dedicado ya no es prepara la cartera es prepar la cartilla sabes O sea que y a día de hoy no a día de hoy por suerte mira lo voy a preguntárselo a chg a ver si por lo que sea vale es capaz de recopilar esa información un momentín que me ponga de vida a ver Vale entonces evolución de los precios de los vps en los últimos no sé 20 años a ver qué tal vale Sí pero ya eh una gráfica please Uy el please leído mal escrito has leído un please disléxico Más que nada porque dice en resumen la evolución de los precios de los vps en los últimos 20 años estado marcada por una tendencia a la baja Sí lo sé mira Pues imagínate vale imagínate Esto es lo que hay Vale entonces pues fíjate de el precio promedio de 80 al mes en el año 2005 O sea tú imagínate 80 al mes no es una página pequeñita no es una página compartida es un precio importante y a día de hoy el precio insisto medio V el precio medio por 9 PS pues se va a 8 prácticamente 8 7 o sea ha bajado 10 veces más en 20 años claro 8 al mes para una empresa pequeña pues es un gasto mucho más razonable mucho más que 80 al mes entonces por eso te digo que efectivamente los vps pues bueno a día de hoy Son mucho más convenientes sí bien entonces luego también Lu también hay que reconocer Por supuesto que en un Hosting dedicado como es un entorno mucho más controlado las empresas de Hosting te meten un montón de herramientas de copia de seguridad de spam de antivirus antiques anti leches vale Por qué Porque es un compartido que además está pensado para empresas pequeñas donde la empresa pequeña no quiere saber nada de mantenimiento de servidor también los hostings compartidos quien instala las páginas web son diseñadores web que tampoco ni quieren saber nada de mantenimiento de servidor ni probablemente tampoco tienen la formación como para saber de mantenimiento de servidor vale con lo cual un plan compartido está Guay porque el administrador del servidor compartido te lo gestiona todo y te actualiza el php y todo vale Te hace todo lo que haga falta o sea está Guay vale que parece que me esté metiendo con el Hosting compartido No está Guay vale en un vps pues dependiendo de si el proveedor te da una licencia de c panel Eh pues te es más fácil gestionar versiones de php de forma gráfica y gestionar un montón de cosas y si es mediante línea de comandos Pues sabes que te lo tienes que gestionar tú vale Y eso pues quieras que no equivale Pues a que tú te responsabilizas de las copias de seguridad tú te responsabilizas de abrir y cerrar puertos y el nivel de responsabilidad como te digo es mayor pero es que eso es lo que Tendría que haber sido siempre vale es que lo que no era normal era que todos nos acostumbremos a que subimos por una web por ftp subimos la base de datos y pum Hala ya está y es como eh ya pero no O sea montar un servidor No es eso montar un servidor es algo mucho más complejo vale Pero bueno bien En definitiva tenemos ya esto por aquí vale ahora volvemos ya en estos minutos que nos quedan hasta inglés al panel de control y vamos a echar un vistazo por si le podemos meter algo más bueno Esto luego ya sabéis que lo meteríamos dentro del dónde estás Chrome dentro del caray dentro del cron vale Ok analíticas Ok Muy bien vale Y no sé vamos a ver alguna gráfica que podemos generar más alguna gráfica que podemos generar más en el tiempo que nos queda países pantallas sistemas operativos a ver Ah ips bueno ips es que tampoco me da una información muy humanamente páginas visitadas Sí vale esto es la web que se ha visitado vale Y esto es la página que se ha visitado Okay Vale Aquí veréis urls muy raras pero es porque si os fijáis los registros de 2000 bueno 2016 son estos O sea que Pero en fin vale esto es porque tenía un wordpress por ahí un momentín Fran eso es ahora iremos a la segunda parte de la parte contratante que es de dónde han salido estos datos Vale entonces estos datos te lo voy diciendo ya de dónde han salido es de un Script que ahora luego afinar remos de un Script como el que estábamos haciendo ayer que es el Script de registro vale donde el Script de registro lo que hacía era el servidor la información de servidor y meterla dentro de ayer lo que hicimos era meterla en un csv vale Por eso ahora en esta parte de la clase estamos técnicamente en la segunda parte de la parte contratante que es generar un panel de control a partir de los datos pero ahora luego la vuelta de inglés lo que haremos es generar el Script php que alimentará a una base de datos es kulite con esta información vale o sea que ahora luego os cuento la respuesta a eso bueno Mientras tanto voy a hacer lo siguiente vamos a ver Select extra 2 as count no as valor count extra 2 as no esto es valor no esto es número from logs gr Group by extra 2 order by número desk limit 10 las 10 páginas más vistas Play aquí lo tenemos valeas son las por ejemplo las páginas más vistas para que tú sepas qué páginas son las que te interesa potenciar más Esto visualizarlo va ser complejo va a ser complejo porque eh aquí si esto lo meto un gráfico de tarta esto se va a destrozar máximamente si lo meto en un gráfico de barras Bueno lo puedo meter en un gráfico de barras horizontales Vale entonces aquí voy a decir que mat plot le horizontal eh bar Chart simplest example Mira Sabes qué No va a ser que no va a ser que no voy a crear una siguiente versión que me parece que he cerrado la carpeta me cago en la leche vamos a ver y a ver si hay suerte y no Open containing folder venga Ahora sí y voy a ampliar con 015 gráficas horizontales y ya que estoy programando con una clase ya que estoy programando con una clase Pues le voy a decir que ad Sí pero add method to draw o to create eh horizontal plot charts esto lo voy a poner arriba del todo no lo pongo arriba del todo aquí sí no es ya que lo pueda saber yo eh que porque ya sabéis que no he utilizado ningún tipo de magia negra en particular simplemente es que cada vez que realizáis una conexión a un servidor web estáis transmitiendo toda esa información lo único que estoy haciendo yo es cogerla y de hecho si el usuario me da permiso para geolocalización en un navegador puedo saber hasta la calle y el número de calle y la puerta pero para eso el usuario tiene que aceptar manualmente la geolocalización del servidor Así que y tampoco me hace falta tanta precisión sabes vale horizontales Okay entonces voy a crear un método nuevo creo un método nuevo se llama Death gráfica barras horizontales y a continuación voy a hacer lo siguiente me vengo a Main voy a hacer un session sesión gráfica barras horizontales la petición sql es esta de aquí Eh Esto es páginas visitadas pulsamos Play me voy a la carpeta no me voy a la carpeta de imágenes y aquí páginas visitadas vale se me ha claro se me ha machacado automáticamente en base a la longitud de la ruta bueno Vale esto lo podemos arreglar pero bien Habría que ver cómo arreglarlo Pero bueno y Ah y por cierto esto Qué es a ver en qué orden ha aparecido no sé por qué me lo ha ordenado al revés Y si le digo ask como ya digo no sé por qué me lo ha puesto al revés pero bueno Uh madre de Dios Ah No espérate ah no sí limit 10 claro ascendiente bueno no pasa nada lo dejo así y ya está Vale y otra cosa que quería hacer y otra cosa que quería hacer era eh poner título en la Gráfica Vale entonces aquí en analíticas voy a decir que le paso el título vamos a ver gráfica salida título vale Y aquí donde pone espa que te lo digo gráfica eh plot figer aquí está Vale aquí donde pone distribución de datos pues pongo título aquí donde pone distribución de datos lo pongo le pongo título y aquí donde pone distribución de datos le pongo título Claro que si hago esta promesa luego tengo que cumplirla vale Lo cual quiere decir que coma países visitantes coma esto Qué es eh idiomas esto es eh visitas por año esto es visitas por mes esto es visitas por día esto es visitas por hora Esto es sistemas operativos esto es navegadores esto es Bots esto es pantallas resolución de pantalla y esto es páginas visitadas de esta forma si ahora le doy a Play en las imágenes ahora sí en las imágenes ahora pone el título correcto y en el archivo esto porque se ha abierto aquí en el archivo en Index 3 Lo abro con gedit no se abierto el sitio correcto pero bueno Index 3 lo paso a Index 4 voy a cargar ya que estamos que pas que se me hará impar Pero bueno páginas más vistas eh No me acuerdo cómo se llama páginas visitadas y actualizamos el navegador vale se me descuadra un poco pero bueno ya está No pasa nada Creo que el javascript ahora vale Y así tenemos un título un poco más correcto en cada una de las gráficas bien pues lo dejamos aquí de momento Cierro la sala porque ahora la reclamará Alicia y hará la vuelta en la segunda parte de las clases de hoy conmigo Vamos a ver cómo se recopila esta inform ación y vamos a hacer que el servidor guarde los datos en sqlite Para tenerlos disponibles para más adelante Vale pues paro por aquí nos