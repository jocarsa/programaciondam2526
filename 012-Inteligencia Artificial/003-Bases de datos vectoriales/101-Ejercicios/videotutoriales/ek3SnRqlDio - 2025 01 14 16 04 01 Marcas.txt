os cuento cosas a nivel eh a nivel global a nivel general la analítica vale el concepto de analítica porque una cosa es analítica web y otra cosa es Google analytics algo que parece obvio pero Google analytics ha sido ha llegado a ser una herramienta tan eh Tan extendida que había mucha gente que no entendía la diferencia entre analítica web y Google analytics de la misma forma que hace años sobre todo con gente mayor me costaba hacerles entender la diferencia entre internet y Google porque la gente decía si cuando abro un navegador me sale Google es que Google es internet y yo decía no vale pero me parece una jugada maestra por parte de Google el llegar a confundir a la gente para que la gente no entienda la diferencia entre Google e internet y por mucho que les dijeras No mira es que internet es una infraestructura uno de los servicios que corren encima de internet es la web y un buscador para internet un buscador para la web es Google vale pero la gente no entendía tantos pasos de abstracción la gente decía internet es igual a Google y Google es igual internet bien de esta forma Google analytics fue en su momento una herramienta vamos a trends una herramienta muy buena analytics Google analytics y momentín en España todo el sector vale Y como veis de momento está en caída voy a poner analytics directamente como término de búsqueda vale más o menos lo mismo entonces para mí la analítica web No ya Google analytics la analítica web es un proceso imprescindible dentro de una web tú tienes que saber qué es lo que está ocurriendo dentro de tu web Por qué pues el otro día Fran decías el tema del seo vale efectivamente hay una razón para meter analíticas que es el seo Pero hay otra razón que es pruebas de usabilidad hay otra razón que es analítica de comercio Oye por qué no estás vendiendo la gente está entrando a tus páginas de producto no está entrando Cuántos segundos se quedan qué botones pulsan Qué artículos ven más Qué artículos ven menos todo eso te lo va a decir la analítica pero hasta el momento nos hemos preocupado de crear un Front de crear un Back de crear una base de datos pero no nos hemos preocupado de analizar lo que está ocurriendo porque qué no nos hemos preocupado de analizarlo bueno probablemente no nos hemos preocupado porque no había nada que analizar porque realmente estábamos desarrollando y nuestra web no era pública pero desde la semana pasada es pública Así que a continuación lo que vamos a hacer es meternos dentro de una analítica y ver qué es lo que ocurre dentro de esa analítica bien si nos fijamos dentro una vez que la página web nuestra página web está publicada una forma de obtener analíticas consiste un momento que tosa eh una forma de analíticas voy a cerrar este hedit consiste en ir al servidor ir a dónde estás ir a bar ir a log ir a Apache y dentro de Apache dentro de Hola andrey dentro de Apache encontramos que hay una serie de logs de acceso Vale access.log y veo que por aquí pues desde las 014 hasta las 15505 hasta Ah bueno Sí perdón es que el servidor creo que lleva una hora de retraso Vale pues hay una serie de registros unos registros un poco sospechosos Por cierto Vale ahora hablamos de esto pero registros Al fin y al cabo así que por lo tanto así que por lo tanto yo lo que voy a hacer ahora a ver un segundo vale otra cosa es que tengo por aquí los registros de old l jarsa old l vale aquí por ejemplo hay pues 3000 y pico registros vale cualquiera de ellos pues vamos a hacer un software que se encarga de registrar y se encargue de gestionar estos recursos y me pueda indicar y me pueda dar información de valor acerca de estos recursos cómo lo vamos a hacer Bueno lo vamos a hacer lo podemos hacer como hicimos tomato es decir por ejemplo lo podemos hacer con python o lo podemos hacer con php o podemos hacer lo que queramos de momento he elegido un color vamos a arrancar un nuevo proyecto así que ya sabéis he elegido un color momento que los de segundo hace un momento han elegido un color que ha sido el iory esto es aplicación segundo dam seguridad vale Así que escoge un color y vamos a arrancar un nuevo proyecto de analíticas coged color qué me decís escoged Algún color venga s Green vale mín se ha adelantado Luis ha dicho sig Green otra cosa es que lo tenga ocupado o no vale vamos a sigen creo que no lo tengo ocupado sigen no tengo lighten medium sig Green pero sig Green no lo tengo ocupado vale Así que analytics dam de Primero me voy a ir a ghub me voy a crear un repositorio se va a llamar jocars sigen me voy a ir a public va a ser public create repository vale Y yo de entrada bueno ahora en ghub clono sig Green no medium sig Green que es otra cosa sigen momentín sig Green Ahí está Vale previamente me he copiado me he bajado a local a mi ordenador local en bar en log me he bajado desde el servidor el jarsa Old Access log vale me lo he bajado para poder analizarlo voy a decirle 777 a ver un momentín eh A ver abrir en terminal y sudo ch Mod 777 jarsa all l vale Ok venga me voy a ir a idel me voy a abrir un nuevo archivo me voy a ir a hokar Sas Green me voy a ir a jokar sigren Ok vale lo voy a llamar sigren y voy a decir archivo es igual a Open y quiero abrir bar log apach 2 y jar Ah no se ve Vale pues un momentín paro de compartir vuelvo a compartir Ok vale Y momentín ahora debe verse de hecho vuelvo a sacar el chat Ok vale Y ahora digo jarsa gu no me acuero Ah bueno pues caray jarsa old gu access.log lo quiero abrir en modo r y entonces digo líneas es igual a archivo readlines y print líneas f5 Hola Okay vale Y hay 14,000 líneas madre mía bien Ahora solo quiero líneas de cero Ahora solo quiero el primer archivo la primera línea y la primera línea es esa de ahí una vez que tengo la primera línea a continuación yo puedo empezar a leer y puedo empezar a establecer analíticas por ejemplo Yo quiero saber eh A qué hora me han visitado más por tanto vengo por aquí y digo vamos a ver dónde estás aquí y digo on this log logo python program Being log as this get only hours Así que a continuación vamos a ver Ah bueno tengo el mini podría haberlo hecho con el chat gpt básico Pero bueno bien y vamos a ver no esto Ah mira qué bien vale Y digo vale Okay pues digo for línea in líneas y digo Aquí y digo inicio es igual a línea find esto final es igual a línea find esto a continuación okay Aquí tiempo es igual a línea de inicio hasta el final ahora interpreta el tiempo partes es igual a tiempo partido por esto de aquí y hora es igual Perdón es igual a partes de uno OK Por tanto print hora si ahora pulso f5 me dice las horas a las cuales me han visitado más los usuarios muy bien está computando voy a darle a c voy a dar control C momentín para ya parará Bueno pues ya parará cuando quieras sí quiero pararlo bien una vez que tengo esto Una vez que tengo esto a continuación lo que quiero es crear un diccionario donde pueda almacenar el número de visitas por hora por eso diccionario es ig a vacío y ahora digo sí no porque ahora es un Ah okay vale momentín bueno sabes qué diccionario sí diccionari es igual a nada y digo If partes If H not in diccionario en ese caso diccionario de hora es igual a un O sea si no te habían visitado ahora te han visitado Y si sí que te habían visitado diccionario hora más ig a 1 con lo cual al final print diccionario f5 y me dice Mira a las 0 de la mañana te han visitado 38 personas a la 1 138 a las 2 37 a las 3 28 a las 4 69 a las 11 de la mañana 2118 personas aquí pasa algo raro como os podéis imaginar una vez que tengo esto a continuación yo lo que quiero es con esto algo de información quiero generar por ejemplo una gráfica Y al igual que hicimos en tomato lo voy a hacer utilizando matplot lip que para eso está así que una vez que tengo esto Una vez que tengo esto Ahora sí me voy al chat gpt c básico y digo create a bar Chart with mat plot le vamos a analizar vamos a ejecutar vamos a ver y Okay no no pero esto qué es esto no es cierto vale No I want the python code for that Ah se ha apretado Vale pues paro de compartir vuelvo a compartir Okay Vale decidme cuando podáis si se ve Vale entonces eh diccionario es igual a Esto vale Ok y hago así vamos a ver horas es igual a sorted diccionario kis esto no hace falta pero vale horas y número diccionario Hour hora for hora in horas esto no hace falta porque ya lo tengo pero vale o sea eso vale me le podría haber saltado Pero bueno tampoco está mal Espera que estoy intentando da igual y ahora creo la barra Por cierto esto requiere import mat plot le p plot as plt vale Bueno pues horas y número x Label hora del día eh número de accesos TT eh título accesos por horas y ya está así que bueno dice show ahora haremos un savefig y tengo esto de aquí vale con lo cual qué ocurre bueno en este caso estoy viendo el acceso el log de hoy Entonces el log de hoy evidentemente llega hasta las 14 vale Y nos da este resultado y yo de entrada estoy viendo algo que hasta ahora no podía ver y Es que hoy a las 11 ha pasado algo extraño en mi servidor Y es que han habido un montón de accesos vale Y yo eso si no lo sé no me lo dicen por cierto tomato ayer lo modifiqué No sé creo que me lo dejé inoperativo últimos segundos última hora sí me lo dejé inoperativo No pasa nada vale muy bien pues eso pues ahora a continuación en lugar de show le digo save F me lo quiero guardar como accesos por hora.png y f5 y me voy a dónde estás Me voy a html me voy a sigen me voy a accesos por hora y ya tengo la imagen preparada con lo cual esto lo que quiere decir es que ahora luego me haré una un archivo html ya lo sabéis para cargar un panel de control con las estadísticas con todo esto por lo tanto ya tengo una serie de estadísticas en la pantalla unas estadísticas un poco estáticas ahora a continuación lo que quiero obviamente es vamos a verlo lo que obviamente es convertir esto en una función vamos a verlo para ello print diccionario esto ya no lo quiero horas es igual a sorted vale Ok con lo cual ahora esto lo voy a meter dentro de una función Def registros por hora ruta hago así vale con lo cual a continuación lo que voy a hacer es Llamar a registros por hora aquí abajo de ruta y la ruta es esta de aquí por cierto que sería una muy buena costumbre que al final aquí al finalizar archivo punto Close es decir Cerramos el archivo vale ejecutamos vamos a comprobar que todo va Okay esto fuera f5 Ok vale no A ver no sería peligroso pero me parece muy bien tu reflexión un momentín a ver si lo tengo no sí que lo tengo vale vamos a ver en primer lugar vale siempre preocupémonos por la seguridad yo qué estoy haciendo estoy cogiendo un log directo de la carpeta de mi servidor vale en un servidor vps en un servidor dedicado Incluso en un servidor compartido también te dan la carpeta de log siguiente cuestión es que estoy cogiendo el archivo en modo read vale con lo cual en principio no debería haber problema ahora bien Fran me parece muy bien lo que planteas eventualmente Sería posible por ejemplo en un Chrome primero hacer una copia del archivo log a una carpeta externa a una carpeta propia por ejemplo o a la carpeta de este programa de sigen Y a partir de ahí realizar la lectura sobre ese archivo y no directamente sobre el archivo original vale o sea que ya te digo No creo que no es peligroso pero si lo fuera hay medios de hacer que no lo sea O sea que eso es un poco lo de menos vale Así que tengo esto por aquí con lo cual ahora a continuación yo lo que quiero vamos a ver yo lo que quiero es meterme dentro de la carpeta de logs de Apache Me quiero dentro de la carpeta de logos de Apache aquí aquí vale Y quiero pillar todos los archivos que tengan la extensión punto log vale punto log que en este caso será access.log y Access log con esto por lo tanto a continuación voy a hacer lo siguiente import os me voy a import os me vengo por aquí y Hola ahora luego arreglamos tomato vale bien me vengo por aquí y python Search inside a folder for filles with extension log vamos con os Ok y ahora digo os Walk Vale pues sí es esto ahora digo for root files in folder path vamos a hacer que sea bar log apach Ah momentín vale for file in files If file ends with log en ese caso registros por h de file con lo cual Claro si ahora hago así f5 no s file or directory error.log vale Eso quiere decir que a ver folder path carpeta es igual a esto y entonces digo momentín a ver okay registros por hora carpeta punto carpeta má file bien hago así y ahora el problema es que me ha machacado espérate dónde estás me ha machacado uno con otro vale me ha machacado el uno con el otro de esta forma yo ahora le digo python get file name without extension from file url oosp vale URL pars Así que URL pars y vale Wow Vale pues Hala me quedo toda la función y digo Aquí en registros por hora nombre archivo es igual a get file name de la ruta y nombre archivo más png esto quiere decir que le doy a f5 y ahora en la carpeta me encuentro aquí jocars alls access.png od virtualhost Access png error.png y jocars all y access.png lo que quiere decir esto es que me voy a empezar a llevar esto al servidor y a ver qué aspecto tiene antes de llevármelo vamos a hacer una cosa vamos a ver momentín Esto me lo quiero guardar importo Ese ya lo tengo python create folder If it does not exist Okay vale bien entonces voy a crear una carpeta llamada imágenes y dentro de la carpeta imágenes guardo el nombre del archivo Así que pulso f5 Y en lugar de guardarlo a Palo Seco me lo guardo dentro de la carpeta de imágenes que está más claro ahora quito esto de aquí se queda más ordenadito Pero además yo quiero hacer más cosas vale Quiero crear una carpeta llamada funciones Y entonces dentro de funciones voy a abrir visual Studio y así trabajamos de forma un poquito más ordenada no me hace mucha ilusión Pero bueno vale Así que file Open folder me voy a ir a jarsa dónde estás jocars sig Green vale Y entonces tras de autors Sí entonces en funciones creo un archivo llamada ayudante punto python y digo que aquí meto esta función es file name without extension por tanto from funciones ayudante import get file name with without extension Vale ahora dentro de funciones voy a crear un archivo llamado registros por hora dentro de registros por hora lo que voy a hacer es esto y registros por hora bien cada uno de ellos necesitará una serie de librerías así que por ejemplo así que por ejemplo aquí en URL pars lo voy a poner en ayudante vale enen s e import mat plot le lo paso a registros por hora Ok y yo creo que ya un trct vale Y ya está y ahora from funciones registros por hora import registros por hora de esta forma externaliza a continuación compruebo que todo sigue funcionando correctamente elimino imágenes le doy a Play Y si todo ha ido bien os igos momentín quieto Ah perdón sí aquí import os también vale venga Play vale file name without extension is not defined Ah Sí perdón porque Claro porque en registros por hora aquí importo from ayudante import file name without extension vale probamos de nuevo not F ayudante vale perdón y from funciones punto ayudante vale Vamos a darle os is not defin caray dónde en ayudante python Bueno pues importo ese venga Okay ya está comprobamos que ha generado imágenes y vale aquí lo tenemos esto quiere decir que ya podemos realizar una primera subida no quiero pikach vale no quiero pikach no quiero imágenes ignore folder imágenes me quedo solo con los archivos pun python Así que le voy a dar a commit y primer commit to Main Push origin y ahora en el servidor me voy a ir al servidor lo tenía por aquí abierto y digo vamos a ver bajo vale Espera que lo haga grande para que lo veáis Okay y digo en primer lugar me voy a ionos me creo el proyecto el subdominio sig Green Okay dominio Añadir Noa subdominios vale subdominios añado un subdominio dónde estás crear subdominio nuevo dominio jarsa Eh sigren vale se está creando Mientras tanto me voy al servidor y voy a hacer Vamos a ver servidor logo de servidor dónde estás editor de texto aquí vale Quiero git clone quiero clonar en el servidor esto no A ver quiero clonar en el jarsa eh sigren Ya existe qué me cuentas Ya existe Qué raro existe Ah sí porque estoy en el portátil Caray no me estás contando aquí no José Vicente portátil Pues dónde estoy pues no estoy vale Okay pues n terminal a ver ssh Root @ IP Yes contraseña Vale entonces ahora git clone a ver fb bar W html ls G clone no vale jit clone jarsa c Green clonando pongo contraseña vale con lo cual de momento antes de crear el Virtual Host de momento lo que voy a hacer simplemente va a ser entrar dentro de jarsa c Green ls voy a ejecutar python 3 c Green Y si todo va bien y si todo va to bien me voy ahora a continuación al servidor me voy a la carpeta bar me voy a w me voy a html me voy a cen me voy a imágenes y en imágenes empiezo a encontrar cosas muy chulis Y es que empiezo a encontrar por ejemplo acceso a crimson que es el en la aplicación que estamos haciendo en segundo a las 6 de ayer de la tarde parece que hubo bastante movida Ah sí porque hice una prueba de carga vale con lo cual hice una prueba de carga sí hice una prueba de carga vale eh Dark Slate Blue espérate esto no suena Dark Slate Blue vale parece que nadie ha accedido Ok Dark t bueno Dark tour Case lo publé por la noche con lo cual seguro que nadie ha accedido vale ayer a las 22 23 Ok Forest Green una aplicación que estamos haciendo en segundo vale Ok old l A las 11 de la mañana light salmon es una aplicación de calendario bien vale nadie está accediendo solo yo y medium sig Green y other virtual Host tomato vale tomato solo yo a las 3 y Access con lo cual si os fijáis Pues de entrada ya tengo Eh Pues un primer registro que me dice a qué horas han estado entrando según qué virtual Host en el día anterior vale esto todo nos dice lo que ocurre en el día anterior ok No pasa nada una vez que tengo esto ahora iré a la segunda parte de la aplicación que es montar un panel de control para que esto se vea fácilmente Vale ahora iré a ello pero quiero más cosas así que de la misma forma que esta aplicación ahora mismo me voy a visual Studio aquí visual Studio de la misma forma que esta aplicación me ejecuta registros por hora con todo lo que nos ha costado esto Pues claro ahora me puedo ir a registros por hora y puedo modificar esto para por ejemplo hacer otra las cosas Vale qué otras cosas Bueno pues vamos a verlo vamos a ver porque ahora esto lo que me ha hecho es que me ha cogido las horas del día pero si me voy a un registro si me voy a un registro vamos a ver vamos a el Access log a este vale quiero por ejemplo contar las diferentes ips contar las ips de las cuales me han hecho x peticiones momento y ahora navegaremos ahora cogeremos los sistemas operativos o sea sistemas operativos mayoritarios navegadores motores todo bien De momento me voy aquí a visual Studio me voy un momento aquí Ok Take this function and from log like this and create another function with rows like this and create another function to count distinct ips and render them into a Chart ordered by count desk pues una vez que hemos hecho una función también podemos hacer más funciones Espérate que t aquí registros por hora no ahora verás que no distin typing ahí está Vale pues me cojo Esto me voy a crear una función llamada distintas ips punto python dentro de distintas ips pego esto si hace falta le añado librerías y ahora a continuación en sigen le digo from funciones distintas ips import distinct ips con lo cual me voy a distintas ips ejecuto El Comando de distintas ips de carpeta más archivo voy a decir que en registros por hora le pongo imágenes registros por hora nombre archivo y en distintas ips va a ser distintas ips gu nombre archivo ejecuto le doy a Play y si no da error me voy a esa carpeta esto es el servidor esto ya no sé qué es vamos a ver me voy a crear uno nuevo me voy a html me voy a hokar sigen recordemos que estoy de momento en local sigen me voy a imes y tengo distintas ips de Access distintas ips de jarsa all vale puedo decir por ejemplo que igual solo me quiero quedar con las no sé con las 10 primeras vale o distintas ips vamos a ver dónde estás distintas ips vale de virtual Boss No hay ninguna OK ahora miramos vale distintas ips en distintas ips voy a hacer una cosa aquí en distintas ipes dónde estás aquí vale get only First 20 elements on eh Con qué con diccionario de 20 with the most count para que la Gráfica no se me haga tan fuerte que luego se puede configurar eh vamos a ver dónde está el limitador no veo el Ah no no bueno no sé no lo veo aquí vamos a copiar código vamos a ejecutar me voy a sig Green ejecuto me voy a la carpeta y ahora veo que esto ya es algo más abordable pero hay una IP que está haciendo mog de entradas vale bien Voy a realizar una implementación sobre el servidor Así que actualización nueva función Push me voy al servidor voy a hacer un dónde estás aquí un Pull ejecuto bien me voy a esa carpeta me voy a esa carpeta ya no sé dónde estoy me voy a esa carpeta f5 y ahora voy a hacer una cosa me voy a copiar la carpeta a local porque si no voy a ver nada porque desde el servidor no me deja verlo directamente lo cual es normal copiando 58 archivos un momento vale Y en imágenes por ejemplo pues claro veo que vamos a ver distintas ips en log de acceso Pues bien Vamos a ver eh distintas ips para dar turquesa Pues bien distintas ips para vamos a ver all days error registros por hora esto ya registros por ahora vale distintas ips por aquí all days por ejemplo Vale pues como ya os digo en principio por aquí aparece pues la có te diría yo no la opción de todo aquello que pues aparece en esta carpeta y de ver digamos Esa información bien qué es lo que quiero a continuación Bueno pues lo que quiero a continuación es crear un panel de control en el cual yo pueda seleccionar una aplicación vamos a ver eso es exactamente Fran eso es exactamente Nuestro objetivo eh A ver te cuento hay una cosa que se llama lo habéis oído Big Data esto que estamos haciendo entra dentro de lo que es la filosofía y la metodología del big Data donde el Big Data de lo que trata es de el procesamiento de grandes cantidades de datos de tal forma que un ser humano no tiene la capacidad de extraer a simple vista información de utilidad a partir de sus grandes conjuntos de datos entonces dentro del big Data hay un proceso concreto que es la visualización de los datos la visualización de los datos consiste en representar los datos de forma a que un ser humano sí que pueda ha datos de relevancia y de tal forma que un ser humano pueda tomar decisiones de importancia sobre esos datos de relevancia Así que vale efectivamente pues esto te muestra algo que para un ser humano sería imposible que revisando los logs manualmente pudiera sacar estee tipo de conclusiones qué es lo que voy a hacer ahora Bueno pues lo que quiero hacer ahora es eh voy a intentar ordenar esto por carpetas de tal forma vamos a ver de tal forma que claro distintas ips momentín voy a eliminar todo esto bueno no distintas ips vale Voy a hacerlo Al contrario voy a hacerlo Al contrario vamos a ver no ubun imágenes ahora sí vale elimino las imágenes Okay voy a hacer un cambio en local ya sabéis que primero estoy implementando en local y luego lo implemento sobre el servidor Entonces en este caso vamos a ver en este caso vale nombre archivo Ah es que lo que quiero saber lo que quiero averiguar es por aplicación por virtual Host esto por aquí registros por hora esto por aquí Uy Me he cargado insert dónde está ese insert aquí okay lanzo en el servidor cargo me lo copio vale me lo copio sigin elimino pego vale crimson Dark Slate Blue Pues ahora creo que sí que tengo creo que sí que tengo aquí información como para poder organizar esto en carpetas y por tanto empezar a crear una analítica por cada uno de los virtual Host entonces a partir de aquí Ahora sí a partir de Aquí vamos a hacer lo siguiente distintas ips nombre archivo Vale ahora os make dears espera virtual Host es igual a nombre archivo punit gu y me quedo con el número cero entonces Os make dears imágenes barra virtual Host voy a poner virtual Host aquí imágenes virtual Host exist true vale con lo cual ahora digo imágenes virtual Host barra nombre archivo esto de aquí lo propago aquí vale esto creo que va abajo con lo cual os osds y eh registros por hora distintas ips aquí Ok y plot pun Close tampoco está mal muy bien entonces voy a ejecutarlo primero esta máquina para comprobar si da error no da error y si todo ha ido bien me voy a ya no sé dónde estoy me voy a html me voy a hocar Sas Green imágenes y en imágenes Access error jarsa y other virtual Host fantástico Entonces ahora me creo un Push dónde estás aquí subcarpetas en el servidor me creo un Pull en el servidor me creo un Pull Ah perdón No no para primero hago un Pull ahora hago una ejecución Y si todo va bien okay Y si todo va bien Ahora me voy al servidor y en imágenes f5 y encuentro cada uno de los virtual hosts que tengo en el sistema y en cada uno estará las estadísticas que le toquen correspondiente a cada uno de los virtual hosts vale con esto hemos empezado ya a generar un sistema y un panel de control de estadísticas donde incluso lo que va a hacer es tener estadísticas para cada uno independientemente para cada uno de los virtual Host pero quiero más a continuación aparte de extender Vale ahora luego lo extendemos creando una gráfica con sistemas operativos navegador Quién es Bot Quién no lo es todo eso además Ahora quiero e un panel de control vale Quiero un archivo php para poder verlo así que para hacer esto y para hacerlo rápido voy a el o1 directamente y digo this python with this functions registros por hora distintas ips ayudante Now please make a php Script with a control panel login with user jarsa and password jarsa so First Will have a header with corporate information then Main ui we can Select each One of the virtual horse folders inside imágenes subfolders inside imag folder and then on Main ui load the corresponding img files recorrer dynamically all images in folder render them in a and make a mod to open in large selected click image vale please make corporate color cen and cre and create a Nice and professional css looks vale Vamos allá bien pues con esto lo que vamos a tener es un archivo php que presente un panel de control mucho más bonito de ver vale mucho más efectivo así que vamos a por ello un momentín vamos a ver Okay funciones lo que está haciendo en este caso es definir unas constantes vale hok carsa Y jok carsa más adelante lo podemos conectar con un panel de control y con sqlite con sql y todo eso pero ahora de momento no ahora de momento simplemente Quiero entrar con hok carsa bien De momento está haciendo el css yo Mientras tanto voy a ir creando virtual Host voy a ir creando un virtual Host y lo voy a hacer aquí vale sudo Nano en el servidor sudo Nano apach size available y sigen jocars punc me voy Dónde está jedit aquí me voy a cualquiera de los etc Apache ses available ses enabled Me voy a crimson por ejemplo me lo pego aquí y digo cuando alguien entre en sigren jocars comom o en wwws green.car comom va a ir a la carpeta barw sig Green Perdona no jocars sigren estaba yo haciendo mal jocars sigren los certificados son los mismos jocars sig Green y ya está y el error es este sig Green y sigren Uy Cuidado sigren guardo salgo eh habilito en Apache habilito el Virtual quieto habilito el Virtual Host sig Green recargamos Apache copio pego Vale ahora a continuación si esto ya ha terminado Okay tenemos la pinta en visual Studio por ejemplo Aquí voy a crear un archivo llamado index.php vamos a ejecutarlo en mi propio equipo localhost bar jocars cen jocars selecciono una carpeta bien me gusta pero no del todo error vale Ok Mola pero no es exactamente eso vale Mola mucho pero no es exactamente eso Entonces vamos a ver vamos a ha un poco la pelota chat gpt Almost perfect B instead Select I would like in folders virtual Host in clickable list and then When I cck an element of that list on left Pain on right Pain men 80% deura load images in agreed with modal window me lo ha hecho casi bien pero yo digo Pero quiero un poquito más O sea no es exactamente la idea que yo tenía pero le digo exactamente qué es lo que quiero tengo que hablar el lenguaje correcto para que el programa entienda Qué es lo que no me ha gustado Y cómo sí que lo quiero hacer y ya está así que vamos a ver también te digo que es que antes no le había dicho esto creo que no os lo había dicho lo de que lo quería en dos partes en un 2080 con lo cual Pues el programa evidentemente adivino tampoco va a ser Okay vale esto okay Vale al parecer me lo va a hacer Con php todo O sea que bien quiero decir no tengo ningún problema Por ello Okay Vale pues copio código me vengo aquí ejecuto por aquí okay Mola el estilo un pelín espartano puede ser pero da igual me Mola o sea es lo que quería En definitiva vale una vez que tenemos esto Ahora sí puedo ir a github y puedo decir creo panel de control con lo cual ahora si todo ha ido bien me voy a sig green.car comom forbidden vale Ah sí por qué Porque en el servidor tengo que traer las novedades he subido he hecho un commit desde mi ordenador al servidor perdón a github y ahora desde el servidor tengo que traerme las novedades Así que ahora sí me vengo aquí tengo un login hay que arreglar ese login no pasa nada Ya lo arreglaremos no me preocupa ahora hago así le doy a entrar veo que tengo por aquí todos los virtual hosts y por ejemplo me voy a dónde estás Me voy dónde estás hostias no estás Always o estoy ciego yo bueno está jok carsa Pues sí que se ve que es jok carsa vale Sí por algún motivo jok carsa old lce Uh A ver mín no tengo muy claro no tengo muy claro porque porque sí creo que es esto vale Sí es correcto es eso vale pues hago así luego ya os digo que el css se puede hacer más bonito evidentemente pero de momento lo que me interesa es esto es que para cada uno de los archivos Pues tengo lo que está ocurriendo los accesos que han habido los top IP por acceso por horas y lo que sea qué es lo que tenemos que hacer ahora Bueno pues aumentar cuantas más peticiones mejor Y si mantenemos esta metodología de crear funciones pues podemos crear diferentes funciones con la menor cantidad de esfuerzo posible porque vamos a ver yo ahora hago así y ahora me vengo por aquí y digo eh from this python function readings Reading log file like this Row eh No aquí estás No Ah perdón estaba aquí like this Row vale un momentín vale create functions for y ahora voy a ir al o1 mini for 1 eh responses 200 404 etc dos eh operative systems tres browsers 4 momentom okay Y ya y eso y check vale cuatro check If it is a robot y render all Those charts to p charts please make separated functions y vamos allá así que la idea es que si trabajamos de forma modular es decir si trabajamos creando diferentes funciones pues podemos ampliar este software hasta el infinito y más allá Pero insisto o sea separando la dificultad en este caso estoy haciendo como una especie de optimización prematura es decir primero Tendría que haber creado un archivo larguísimo y luego tendría que haberlo separado en diferentes funciones pero ya sabemos cómo funciona eso al final vale Tú crees que ya hostias pues sí vale pues Oh qué Guay vale parth log Line m a ver espera Espera por qué pars log Line Ah Uh interesante Sí pero no a ver no me queda muy eso Ah parece que vale Ok Venga pues me lo copio me voy a crear en funciones New file más funciones python las voy a meter todas í a saco Vale ahora en cenp voy a hacer from funciones import y ahora a continuación y ahora a continuación voy a hacer esto usage es esto de aquí distin esto ya existía vale Así que me vengo aquí pego el pchart el browsers y el robots voy a asegurarme de una cosa en más funciones a ver cómo lo guarda robots vale Ok browsers vale operating systems o sea tiene buena pinta vamos a ejecutarlo una vez en local no esto no Ah sí Ah no s esto pero as Green aquí no module name funciones vale a ver ahora log file path is not defined Claro porque esto es carpeta y file Ok Muy bien y sio va bien me voy ahora a esta carpeta esto es jokar y Green imágenes vale jarsa muy bien y tengo Access browsers y tengo operating systems y tengo response status 404 87 por vale eso es mal y robot humano 79 pero 20% de robots vale Okay vamos a por ello así que me voy a github y más funciones comit to Main le doy a Push origin okay Y ahora en el servidor Okay momentín me voy a gpool vale ejecuto sigren vamos a verlo vale me voy al panel de control me voy a segreen y por tanto digo bueno medium segreen Vale pues bueno Esto no tiene prácticamente registros pero me voy ajo carsa o sea all y veo pues eso Chrome la mayoría Safari 10% otros 30% Internet Explorer todavía Hay alguno por ahí vale ips Ya lo teníamos sistemas operativos vale Windows Linux macos Ok código distribución de cabeceras http 404 Eso quiere decir que tengo un montón de peticiones de no encontrado archivos de robots vamos a ver por ejemplo el Dark Slate Blue vale No hay por ejemplo no hay registros la gente no está entrando crimson la aplicación de segundo Pues hay un momen dónde estás aquí Ah no dónde estás aquí va un 404 200 301 robots pocos vale Y por ejemplo pues light salmon no hay registros sig Green no hay registros tomato vale poco a poco pues irá viendo registros con esto como podéis ver aparte de que ahora pues haré una un panel de control más bonito y todo eso pero pues podemos Ya empezar a registrar y podemos Ya empezar a crear un sistema de registro de nuestro servidor hay que tener en cuenta que estos registros me están cogiendo únicamente o sea este panel es muy ampliable por la siguiente razón Mira en Apache por defecto vamos a verlo en Apache por defecto en el log de Apache Vale tengo el día de hoy el día de ayer el día de anteayer el otro hasta un máximo de cinco por qué hasta un máximo de cinco Pues porque Apache lo ha querido Así es decir eso se puede configurar para que en lugar de ser cinco sea 25 o sea 50.000 vale Cuantos más registros guarde más va a ocupar en el disco Pero bueno tampoco me importa es decir bueno tampoco me importa o sí no lo sé vamos a ver si me importa o no vamos a la carpeta vamos a no vamos a bar vamos a log vamos a ver de cuánto espacio estamos hablando me voy a apach 2 Vale y estamos hablando de que el registro de hoy Son 128k el registro de ayer vamos al de old days que será el más grande all vale el de hoy Son 1,2 megas esto ya pica el de ayer fueron 1,3 megas claro qué ocurre que a partir de ahí los de los días anteriores están en gz vale en gz quiere decir que están comprimidos es una compresión gzip la compresión gzip se puede descomprimir ahora Fran me lo voy a mover a mi disco duro para no descomprimirlo en la propia carpeta de Apache no Mola eso o sea leer Sí vale pero modificar no logs lo cual quiere decir que tengo un archivo gzip que si hago doble clic se descomprime en un archivo normal vale que ocupa 1,4 meg Y a partir de ahí pues lo puedo abrir con el editor y lo puedo ver y lo puedo revisar y puedo hacer lo que sea quiero decir con todo esto que yo lo que estoy haciendo ahora mismo es simplemente con este archivo de visual Studio todos los archivos que acaben con la extensión log pero de la misma forma que puedo los archivos que acaben con la extensión log lo que puedo hacer es también los archivos gz Eso sí tengo que Alguna algún sitio para descomprimir losos y al descomprimir losos ver también las estadísticas de ayer de anteayer del otro y del otro de más allá vale es decir hasta el día de hoy hasta la clase de hoy lo que vamos a hacer esto vamos a desarrollar algo más vale Pero vamos a los registros del día de ayer y en las clases de mañana aparte de hablar de documentación Pues también hablaremos de Eh pues los archivos gecip y descomprimir losos y lo que sea bien Vamos a complementar un poquito más vamos a complementar un poquito más a ver que vea vamos a ver vale Sí ya sé lo que voy a hacer Mirad vamos a ver ya sé lo que voy a hacer aquí ahí morí Okay y y aquí Ok perfect Now please on another file taking in account this code gop 2 IP to country create a corresponding function to create a p Chart transforming IP count to country vale en este caso lo que voy a hacer es que me voy a copiar vamos a ver de jarsa ivory esto ya lo vimos en su momento la base de datos de geolite to country me voy a sigen me pongo la base de datos vale Y entonces Ok el código está aquí vale vamos a verlo get country vale Ok lo veo muy bestia Pero vale es lo que hay así que vengo por aquí en funciones voy a crear New file llamado países pun python lo pego la ruta es geolite to country Esta es correcta vamos a ver el uso vamos a ver el uso dónde estás aquí el uso será bastante predecible calculo Ah esto lo tendré que instalar en el servidor Pero vale aquí Eh Esto no eh ayudante no esto ya lo tenía vale vamos a ver entonces Aquí no aquí vale le digo carpeta más file le digo es que esto me parece raro porque yo juraría Ah okay vale Okay Esto es lo que no estaba viendo yo esto y esto vale from países import es países no from funciones punto países import countries No import qué import country Spy Chart no import all import all vale Yo creo que sí yo creo que ya le damos a Play me voy aquí esto es correcto Vale y vamos a ver countries Okay perfecto vale Spain Ucrania china Francia Finlandia Estados Unidos Irlanda vale son los que más hay otros que también con lo cual ahora a continuación una vez que esto está claro nos vamos a hacer un Push países por supuesto en el servidor estoy ejecutando el archivo en modo manual luego iría en el ch no estoy diciendo nada porque entiendo que se entiende así que me traigo las novedades ejecuto Ah no está IP pip 3 install Geo ip2 bak System Vale ahora ejecuto bien me voy al panel de control y en el panel de control Pues ahora tengo también una gráfica con la distribución de diferentes accesos por país si me voy a light salmon por ejemplo no hay bueno todo Spain todo soy yo por ejemplo en Dark Slate Blue todavía no hay en crimson vale Spain pero Singapur me está intentando atacar al parecer vale Dark Slate Blue Pues bueno a medida que en Dark turque vale Estados Unidos Dinamarca México pues España Estados Unidos pues empiezo esto Qué es Sas operativos vale empiezo a obtener diferentes gráficas mirando el logo de gráficas vale con lo cual pues esto obviamente luego se puede extender hasta el infinito y más allá voy a tocar ahora ya para acabar y mañana continuamos pues un poquito el estilo así que estilo toco por aquí me voy a index.php y ahora pues voy a hacer cosas vamos a ver qué cosas voy a hacer esto se llama jarsa se Green vale Aquí le voy a poner qué le voy a poner Forest Green voy a el favicon voy a el favicon me voy aquí y cargo que el favicon es c Green Vale ahora h1 img pues me vengo aquí a ver si aquí hay h1 o qué hay vale aquí login form login nada esto Nada aquí Ok H jokar Green vale esto es jokar White creo OK Vamos a verlo no Esto no es no esto tampoco es esto vale Ok venga ahora a continuación me vengo Aquí vamos a un flexbox vamos a Center y digo h1 y h1 img with 60 píxeles Este vale Okay y qué pasa aquí pues lo que pasa aquí es que en navigation claro pues no vale a ver dónde estás h1 heer navigation y el heer y a navigation hay que fastidiarse vale pues esto no lo quiero y esto lo quiero aquí quita Ok Ok a ver un momento heer vale no lo quiero vale Y en el navigation Ah ok Y en el navigation quiero stretch space between y Center Así que en el nav aquí quiero display Flex y quiero esto okay Ahora me gusta un poquito más luego Aquí vamos a ver Esto es el left Pain línea 76 no Ah vale claro left p left Pain vale background se Green color White OK ahora cada uno de los elementos le Class selected vale selected es White y momento Bueno si realmente vale Si no está mal Ok Ah también quiero por cierto también quiero en Forest Green Me quiero el css aquí y me quiero la fuente ubuntu y en la Fuente le quiero decir ubuntu coma Arial coma sanif Ok y ahora aquí selected text decoration underline no esto fuera Ok y ahora pues folder lista padding 10 píxeles a Border bottom un Pixel solid rgba 255,255,0 pun2 Ok with 100% Uy Ah okay el L Vale pues esto aquí ahora sí vale ahora esto ya se parece un poquito más a lo que yo quería con lo cual voy a hacer un comit sobre mejoras estéticas voy a hacer un Pull para traer las mejoras al servidor me vengo aquí a recargar el servidor y ahora sí vale ahora veo como Pues bueno no sé tengo algo que me gusta más luego evidentemente esto ya es una cuestión de gustos obviamente y a cada uno pues se lo monta como quiera vale Pero si os fijáis Pues tengo ya un sistema de estadísticas para cada uno de los subdominios de un servidor que me permite saber Pues un primero de información quiero decir que se puede ampliar todavía más únicamente estoy sacando gráficas podría sacar también listados en Tablas para saber quién está entrando Qué están haciendo qué están viendo y todo eso pero un poco el objetivo de la clase de hoy es pues hacer una pequeña aplicación para demostraros que crear un panel de control para vuestras propias aplicaciones Pues a priori puede ser más sencillo de lo que pueda parecer vale Bueno pues hasta aquí la clase de hoy mañana y pasado continuamos y continuaremos pues documentando extendiendo eh insisto lo que comenté la semana pasada viendo las cosas del temario que faltan para los exámenes de dentro de unas pocas semanas y En definitiva preparando el cierre del trimestre y que todo pues vaya encajando y todo vaya cuadrando y todo esté preparado vale con lo cual Bueno me quedo yo por aquí para las para la siguiente clase de segundo a las 6 y nada y nos vemos mañana y continuamos con las clases vale